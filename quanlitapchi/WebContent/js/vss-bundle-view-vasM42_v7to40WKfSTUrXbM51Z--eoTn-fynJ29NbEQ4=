if (window.performance && window.performance.mark) { window.performance.mark('startLoadBundleInner-view'); }
// Copyright (C) Microsoft Corporation. All rights reserved.
define("VSS/Utils/Html",["require","exports","VSS/Diag","VSS/Utils/String","VSS/Utils/Url"],function(n,t,i,r,u){var f,s,c;(function(n){function o(n,t){if($.isArray(t))for(var i=0;i<t.length;i++)n[t[i].toUpperCase()]=0}function k(n){o(h,n)}function t(n,t,i,u){var f={attributes:{},eolBefore:t,eolAfter:i};r[n.toUpperCase()]=f;o(f.attributes,u)}function v(n){if($.isArray(n))for(var i=0;i<n.length;i++)t(n[i],!1,!1)}function d(n){if($.isArray(n))for(var t=0;t<n.length;t++)s[n[t].toUpperCase()]=0}function a(){r||(r={},t("a",!1,!1,["charset","href","hreflang","name","rel","rev","shape","tabindex","type"]),t("blockquote",!0,!0,["cite"]),t("br",!1,!0,["clear"]),t("caption",!0,!0,["align"]),t("col",!0,!0,["align","char","charoff","span","valign","width"]),t("colgroup",!0,!0,["align","char","charoff","span","valign","width"]),t("del",!1,!1,["cite","datetime"]),t("dir",!0,!0,["compact"]),t("div",!0,!0,["align"]),t("dl",!0,!0,["compact"]),t("font",!1,!1,["color","face","size"]),t("h1",!0,!0,["align"]),t("h2",!0,!0,["align"]),t("h3",!0,!0,["align"]),t("h4",!0,!0,["align"]),t("h5",!0,!0,["align"]),t("h6",!0,!0,["align"]),t("hr",!0,!0,["align","size","width"]),t("img",!1,!1,["align","alt","border","height","hspace","ismap","longdesc","name","src","usemap","vspace","width","alt2","src2"]),t("video",!0,!0,["border","height","src","width","controls","poster","muted","loop"]),t("ins",!1,!1,["cite","datetime"]),t("li",!0,!0,["type","value"]),t("map",!1,!1,["name"]),t("menu",!0,!0,["compact"]),t("ol",!0,!0,["compact","start","type"]),t("p",!0,!0,["align"]),t("pre",!0,!0,["width"]),t("q",!1,!1,["cite"]),t("table",!0,!0,["align","border","cellpadding","cellspacing","frame","rules","summary","width","caption"]),t("tbody",!1,!1,["align","char","charoff","valign"]),t("td",!0,!0,["abbr","align","axis","char","charoff","colspan","headers","height","nowrap","rowspan","scope","valign","width"]),t("tfoot",!0,!0,["align","char","charoff","valign"]),t("th",!0,!0,["abbr","align","axis","char","charoff","colspan","headers","height","nowrap","rowspan","scope","valign","width"]),t("thead",!0,!0,["align","char","charoff","valign"]),t("tr",!0,!0,["align","char","charoff","valign"]),t("ul",!0,!0,["compact","type"]),t("dd",!0,!0,[]),t("dt",!0,!0,[]),v(["abbr","acronym","address","b","bdo","big","center","cite","code","dfn","em","i"]),v(["kbd","s","samp","small","span","strike","strong","sub","sup","tt","u","var"]))}function y(){var t,i,n;if(!f){for(f={},t=["b","i","u","em","small","strong","sub","sup","ins","del","mark","font","h1","h2","h3","h4","h5","h6","strike","ul","ol","dl"],i=["li","dt","dd"],n=0;n<t.length;n++)f[t[n].toUpperCase()]="";for(n=0;n<i.length;n++)f[i[n].toUpperCase()]="p"}}function g(){s||(s={},d(["script","style","option","select","textarea"]))}function nt(){h||(h={},k(["dir","lang","title","style","id","class","contenteditable"]))}function tt(){e||(e={},o(e,["src","href","cite","longdesc"]),o(e,["background-image","list-style-image"]))}function it(){c||(c={},c.DATA=function(n,t,i){return n&&n.toUpperCase()==="IMG"&&t&&t.toUpperCase()==="SRC"?i.toUpperCase().search("DATA:IMAGE/\\w+;")===0:!1})}function rt(){l||(l={},o(l,["background","background-attachment","background-color","background-image","background-position","background-repeat","border","border-bottom","border-bottom-color","border-bottom-style","border-bottom-width","border-collapse","border-color","border-left","border-left-color","border-left-style","border-left-width","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-style","border-top-width","border-width","caption-side","clear","color","float","font","font-family","font-size","font-style","font-variant","font-weight","height","letter-spacing","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","padding","padding-bottom","padding-left","padding-right","padding-top","table-layout","text-align","text-decoration","text-indent","text-transform","vertical-align","white-space","width","word-spacing"]))}function ut(n,t){return n&&t?n.toUpperCase()===t.toUpperCase():!1}function ft(n){return n?(a(),n.toUpperCase()in r):!1}function et(n){return p(n,!0)}function ot(n){return p(n,!1)}function p(n,t){if(n){a();var i=n.toUpperCase();if(i in r)return t?r[i].eolBefore:r[i].eolAfter}return!1}function st(n){if(n){y();var t=f[n.toUpperCase()];if(t!==undefined&&t.length===0)return!0}return!1}function ht(n){if(n){y();var t=f[n.toUpperCase()];if(t&&t.length>0)return t}return null}function ct(n){return n?(g(),n.toUpperCase()in s):!1}function lt(n,t,i,u){var f,e;if(t){if(nt(),f=t.toUpperCase(),i&&u&&f in i&&f in u)throw new Error(f+" is specified in additionalInvalidAttributes and additionalValidAttributes. Attributes may only appear in either the whitelist or blacklist.");if(u&&f in u)return!0;if(f in h)return i&&f in i?!1:!0;if(n&&(a(),e=r[n.toUpperCase()],e))return f in e.attributes}return!1}function w(n){return n&&(tt(),n.toUpperCase()in e)?!0:!1}function b(n,t,i){var r,f,e;return(f=i.indexOf(":"),f<0||u.isSafeProtocol(i))?!0:(it(),e=i.substr(0,f),r=c[e.toUpperCase()],$.isFunction(r)&&r(n,t,i)===!0)?!0:!1}function at(n){return n&&(rt(),n.toUpperCase()in l)?!0:!1}function vt(n){var t=n;return t?(t=t.replace("&","&amp;"),t=t.replace('"',"&quot;"),t=t.replace(">","&gt;"),t.replace("<","&lt;")):""}function yt(n,t,i){i=i||'"';var r=$("<div bogusAttribute="+i+t+i+">");return r.attr("bogusAttribute")}function pt(n,t){var f=[],i,r,u;return $.each(t.split(";")||[],function(t,u){u=$.trim(u);u&&(i=u.split(":",2),r=$.trim(i[0]),i.length===2&&at(r)&&(!w(r)||b(n,r,$.trim(i[1])))&&f.push(u))}),u=f.join(";"),u?'style="'+vt(u)+'"':""}function wt(n,t){if(n&&t)try{var r=decodeURIComponent(t),u=encodeURI(r);return n.replace(t,u)}catch(f){return n.replace(t,"Invalid uri value")}return n}function bt(n,t,i,r,u,f){var e;return w(t)?(e=i.substr(r,u),b(n,t,$.trim(yt(t,e,f)))?wt(i,e):""):t.toUpperCase()==="STYLE"?pt(n,i.substr(r,u)):i}var r,s,h,e,c,l,f;n.areTagsEqual=ut;n.isAllowedTag=ft;n.shouldAddEolBeforeTag=et;n.shouldAddEolAfterTag=ot;n.isFormattingRemovalTag=st;n.getFormattingReplacementTag=ht;n.isSpecialTag=ct;n.isAllowedAttribute=lt;n.cleanAttribute=bt})(f||(f={})),function(n){function s(n){return n>="0"&&n<="9"||n>="A"&&n<="Z"||n>="a"&&n<="z"?!0:!1}function i(n,t){u.lastIndex=t;var i=u.exec(n);return i?i.index:n.length}function h(n,t){e.lastIndex=t;var i=e.exec(n);return i?i.index:n.length}function t(n,t,i){var r=n.indexOf(i,t);return r>=0?r+i.length:n.length}function r(n,t){o.lastIndex=t;var i=o.exec(n);return i?{offset:i.index,name:n.substr(t,i.index-t)}:{offset:n.length,name:n.substr(t,n.length-t)}}function c(n,u,e,o,c,l){var v,a,b,y,k,nt,it,w,p,et,rt,d,ut,g,ft,tt;for(e===void 0&&(e=!1),o===void 0&&(o=null),c===void 0&&(c=null),l===void 0&&(l=!1),v=n.length,a=0;a<v;){if(y=a,a=n.indexOf("<",a),a<0&&(a=v),a>y){u.writeText(n,y,a-y);continue}if(y=a++,b=n.charAt(a),a<v&&b==="!"){if(a++,a+1<v&&n.substr(a,2)==="--"){a+=2;a=t(n,a,"-->");continue}if(a+6<v&&n.substr(a,7)==="[CDATA["){a+=7;a=t(n,a,"]\]>");continue}a=t(n,a,">");continue}if(a<v&&b==="?"){a++;a=t(n,a,">");continue}if(it=!1,a<v&&b==="/"&&(it=!0,a++),a=i(n,a),w=r(n,a),a=w.offset,p=w.name,f.isSpecialTag(p)){for(a=t(n,a,">");a<v;)if(a=t(n,a,"<"),a+2<v&&n.substr(a,3)==="!--")a=t(n,a,"-->");else if(a<v&&n.charAt(a)==="/"){if(a++,a=i(n,a),w=r(n,a),a=w.offset,et=w.name,f.areTagsEqual(p,et)){a=t(n,a,">");break}}else a<v&&a++;continue}if(!f.isAllowedTag(p)||l&&f.isFormattingRemovalTag(p))if(e){u.writeEncodedText(n,y,a-y);continue}else{a=t(n,a,">");continue}for(g=p,ft=a-y,l&&(tt=f.getFormattingReplacementTag(p),tt&&tt.length!==0&&(g=tt,ft=a-(y-(p.length-g.length)))),u.writeTag(n,y,ft,g,it);a<v;){if(y=a,a=i(n,a),a<v&&n.charAt(a)==="/"&&a++,a<v&&n.charAt(a)===">"){a++;u.writeEndOfTag(n,y,a-y,g);break}if(a<v&&s(n.charAt(a))){if(w=r(n,a),a=w.offset,rt=w.name,a=i(n,a),k=0,nt=0,a<v&&n.charAt(a)==="=")if(a++,a=i(n,a),k=a,b=n.charAt(a),d=null,a<v&&(b==="'"||b==='"')){for(d=b,a++,k=a;a<v&&n.charAt(a)!==d;)a++;nt=a;a<v&&n.charAt(a)===d&&a++}else a=h(n,a),nt=a;f.isAllowedAttribute(p,rt,o,c)&&(ut=f.cleanAttribute(p,rt,n.substr(y,a-y),k-y,nt-k,d),ut&&u.writeAttribute(ut));continue}a<v&&n.charAt(a)!==">"&&a++}}}var u=/\S/g,e=/[\s|>]/g,o=/[^\w\:\-]/g;n.parse=c}(s||(s={}));var o=function(){function n(n){this.text=n}return n.prototype.render=function(n){n.append(this.text)},n}(),e=function(){function n(n,t){this.tag=n.toUpperCase();this.root=t===!0}return n._getEmptyTags=function(){if(!n._emptyTags){var t={};t.AREA=!0;t.BASE=!0;t.BASEFONT=!0;t.BGSOUND=!0;t.BR=!0;t.COL=!0;t.EMBED=!0;t.FRAME=!0;t.HR=!0;t.IMG=!0;t.INPUT=!0;t.ISINDEX=!0;t.LINK=!0;t.META=!0;t.PARAM=!0;t.WBR=!0;t.IFRAME=!1;t.MARQUEE=!1;n._emptyTags=t}return n._emptyTags},n.hasEndTag=function(n){var t=this._getEmptyTags(),i=!0;return n in t&&(i=!t[n]),i},n.canTagHaveChild=function(n){var t=this._getEmptyTags();return!(n in t)},n.prototype.getChildren=function(){return this._children||(this._children=[]),this._children},n.prototype.getAttributes=function(){return this._attributes||(this._attributes=[]),this._attributes},n.prototype.getHasClosingTag=function(){return this.empty===!0?!1:n.hasEndTag(this.tag)},n.prototype.getCanHaveChildren=function(){return this.tagClosed===!0?!1:n.canTagHaveChild(this.tag)},n.prototype.render=function(n){var t,i,u,r,f=!1;if(this.tag)for(n.append("<"),n.append(this.tag),u=this.getAttributes(),t=0,i=u.length;t<i;t++)n.append(" "),n.append($.trim(u[t]));if(r=this.getChildren(),r.length>0)for(f=!0,this.tag&&n.append(">"),t=0,i=r.length;t<i;t++)r[t].render(n);this.tag&&(f?(n.append("<\/"),n.append(this.tag),n.append(">")):this.getHasClosingTag()?(n.append("><\/"),n.append(this.tag),n.append(">")):n.append("/>"))},n}(),l=function(){function n(){this._strings=[]}return n.prototype.append=function(n){var t=this._strings;return n&&(t[t.length]=n),this},n.prototype.clear=function(){return this._strings=[],this},n.prototype.toString=function(){return this._strings.join("")},n}(),a=function(){function n(){this._textAccumulator="";this._lastWriteWasEol=!0}return n.prototype.writeText=function(n,t,i){this._textAccumulator+=n.substr(t,i);this._lastWriteWasEol=!1},n.prototype.writeEncodedText=function(n,t,i){this._textAccumulator+=r.htmlEncode(n.substr(t,i));this._lastWriteWasEol=!1},n.prototype.writeTag=function(n,t,i,r,u){var e=r.toUpperCase();(u?f.shouldAddEolAfterTag(r):f.shouldAddEolBeforeTag(r))&&this._writeEols()},n.prototype.writeEndOfTag=function(){},n.prototype.writeAttribute=function(){},n.prototype.finish=function(){},n.prototype.toString=function(){return this._textAccumulator.replace("\u00a0\r\n","\r\n").trim()},n.prototype._writeEols=function(){this._lastWriteWasEol||(this._textAccumulator+="\r\n",this._lastWriteWasEol=!0)},n}(),h=function(){function n(){this.root=new e("",!0);this.elements=[]}return n.prototype.writeText=function(n,t,i){var r=this.elements;r[r.length]=new o(n.substr(t,i))},n.prototype.writeEncodedText=function(n,t,i){var u=this.elements;u[u.length]=new o(r.htmlEncode(n.substr(t,i)))},n.prototype.writeTag=function(n,t,i,r,u){var f,c,l=this.elements,h,s,a=r.toUpperCase();if(u===!0){for(s=[];l.length>0;)if(c=l.pop(),c instanceof o)s[s.length]=c;else if(f=c,f.tag!==a||f.tagClosed){if(f.getCanHaveChildren())for(h=c.getChildren();s.length>0;)h[h.length]=s.pop();s[s.length]=f;f=null}else break;for(f||(f=new e(r)),h=f.getChildren();s.length>0;)h[h.length]=s.pop()}else f=new e(r);f.tagClosed=u;l[l.length]=f},n.prototype.writeEndOfTag=function(n,t,i,r){var u,f,o=this.elements,s=r.toUpperCase();i>1&&(f=n.substr(t,i),f.charAt(f.length-2)==="/"&&o.length>0&&(u=o[o.length-1],u instanceof e&&u.tag===s&&(u.empty=!0,u.tagClosed=!0)))},n.prototype.writeAttribute=function(n){var t,i=this.elements;i.length>0&&(t=i[i.length-1],t instanceof e&&t.getAttributes().push(n))},n.prototype.finish=function(){for(var t,u=this.elements,f=this.root,n=[],i,r;u.length>0;)if(t=u.pop(),t instanceof o)n[n.length]=t;else{if(t.getCanHaveChildren())for(i=t.getChildren();n.length>0;)i[i.length]=n.pop();n[n.length]=t}for(r=f.getChildren();n.length>0;)r[r.length]=n.pop()},n.prototype.toString=function(){var n=new l;return this.root.render(n),n.toString()},n}(),v;(function(n){function i(t){return n.normalizeStripAttributes(t,null)}function r(n,i,r){var o=new h,e=null,u,f;if(i)for(e={},u=0;u<i.length;u++)e[i[u].toUpperCase()]=0;return f=null,r&&(f={},r.forEach(function(n){f[n.toUpperCase()]=0})),t(n,o,!1,e,f)}function u(n){var i=new h;return t(n,i,!1,{CLASS:0,STYLE:0},null,!0)}function f(n){var i=new h;return t(n,i,!0)}function e(n){var i=new a;return t(n,i,!0)}function t(n,t,i,r,u,f){return i===void 0&&(i=!1),r===void 0&&(r=null),u===void 0&&(u=null),f===void 0&&(f=!1),s.parse(n,t,i,r,u,f),t.finish(),t.toString()}n.normalize=i;n.normalizeStripAttributes=r;n.removeFormatting=u;n.sanitize=f;n.convertToPlainText=e})(v=t.HtmlNormalizer||(t.HtmlNormalizer={}));c=function(){function n(){}return n._replaceSimpleTemplateTokens=function(t,i){for(var r=t,e=/\$\{([^\$\}]+)\}/ig,u,o,f;(u=e.exec(r))!==null;)o=u[1],f=n._getEncodedTextPropertyValue(i,o),r=n._replaceMatch(r,u,f),e.lastIndex=u.index+f.length;return r},n._replaceUnencodedTemplateTokens=function(t,i){for(var r=t,e=/\{\{html ([^\$\}]+)\}\}/ig,u,o,f;(u=e.exec(r))!==null;)o=u[1],f=n._getTextPropertyValue(i,o),r=n._replaceMatch(r,u,f),e.lastIndex=u.index+f.length;return r},n._replaceForEachTemplateTokens=function(t,i){for(var f=t,a=/\{\{each \s*([^ \}]+)\}\}((?:.|\r|\n)*)\{\{\/each\}\}/ig,c=/\$\{\$value(?:\.([^\}]+))?\}/ig,r,v,y,e,o,s,p,l,u,h,w;(r=a.exec(f))!==null;){if(v=r[1],y=r[2],e="",o=n._getPropertyValue(i,v),$.isArray(o))for(h=0,w=o.length;h<w;h+=1){for(u=y,c.lastIndex=0;(s=c.exec(u))!==null;)p=s[1],l=n._getEncodedTextPropertyValue(o[h],p),u=n._replaceMatch(u,s,l),c.lastIndex=s.index+l.length;e+=u}f=n._replaceMatch(f,r,e);a.lastIndex=r.index+e.length}return f},n._replaceMatch=function(n,t,i){return n.substring(0,t.index)+i+n.substring(t.index+t[0].length)},n._getEncodedTextPropertyValue=function(t,i){var u=n._getPropertyValue(t,i);return u===undefined?"":r.htmlEncode(u.toString())},n._getTextPropertyValue=function(t,i){var r=n._getPropertyValue(t,i);return r===undefined?"":r.toString()},n._getPropertyValue=function(n,t){if(t===undefined||t.length===0)return n;for(var r=t.split("."),i=n;r.length>0&&i!==undefined;)i=i[r.shift()];return i},n.tmpl=function(t,i){var r=t;return r=n._replaceSimpleTemplateTokens(r,i),r=n._replaceUnencodedTemplateTokens(r,i),n._replaceForEachTemplateTokens(r,i)},n}();t.TemplateEngine=c});
define("VSS/Events/Document",["require","exports","VSS/Diag","VSS/Events/Services","VSS/Events/Action","VSS/Resources/VSS.Resources.Platform","VSS/Service","VSS/Utils/Array","VSS/Utils/Core","VSS/VSS"],function(n,t,i,r,u,f,e,o,s,h){function y(){return e.getLocalService(c)}function a(){return e.getLocalService(l)}var v=h.handleError,l=function(){function n(){this._runningDocEntries=[];this._registerUnloadEvent()}return n.prototype.add=function(n,t){var r={moniker:n,document:t};return this._runningDocEntries.push(r),r},n.prototype.remove=function(n){this._runningDocEntries=o.subtract(this._runningDocEntries,[n])},n.prototype.isModified=function(n){if(n){var t=this._runningDocEntries.filter(function(t){return t.moniker===n})[0];if(!t)throw new Error("Document "+n+" not found.");return t.document.isDirty()}return this._isAnyModified()},n.prototype.beginSave=function(n,t){function e(n){v(n,t,i)}function u(){var t=r[f++];t?t.beginSave(function(){s.delay(i,0,u)},e):$.isFunction(n)&&n.call(i)}var i=this,r=[],f=0;$.each(this._runningDocEntries,function(n,t){t.document.isDirty()&&$.isFunction(t.document.beginSave)&&r.push(t.document)});u()},n.prototype.getUnsavedItemsMessage=function(){for(var s,e,n=[],t,r,h,u,i=0,o=this._runningDocEntries.length;i<o;i++)if(s=this._runningDocEntries[i],u=s.document,u.isDirty()&&$.isFunction(u.getDirtyDocumentTitles)){for(e=u.getDirtyDocumentTitles(6),r=0,h=e.length;r<h;r++){if(t=e[r],n.length===5){n.push(f.UnsavedChangesMore);break}t.length>55&&(t=t.substr(0,52)+"...");n.push(t)}if(n.length>5)break}return n.length===0?f.UnsavedChanges:f.UnsavedChangesWithNames+"\n"+n.join("\n")},n.prototype._isAnyModified=function(){for(var i,n=0,t=this._runningDocEntries.length;n<t;n++)if(i=this._runningDocEntries[n],i.document.isDirty())return!0;return!1},n.prototype._registerUnloadEvent=function(){var n=this,t;u.getService().registerActionWorker(u.CommonActions.ACTION_WINDOW_UNLOAD,function(){if(n.isModified())return n.getUnsavedItemsMessage()});t=$(window);t.bind("beforeunload",function(){try{return u.getService().performAction(u.CommonActions.ACTION_WINDOW_UNLOAD,{})}catch(n){alert(n)}})},n}(),c;t.RunningDocumentsTable=l;c=function(){function n(){this._runningDocumentsTable=a()}return n.prototype.addDeleteListener=function(n){r.getService().attachEvent("tfs-document-delete",n)},n.prototype.removeDeleteListener=function(n){r.getService().detachEvent("tfs-document-delete",n)},n.prototype.addBuildPropertyChangedListener=function(n){r.getService().attachEvent("tfs-document-build-property-changed",n)},n.prototype.removeBuildPropertyChangedListener=function(n){r.getService().detachEvent("tfs-document-build-property-changed",n)},n.prototype.addBuildStoppedListener=function(n){r.getService().attachEvent("tfs-document-build-stopped",n)},n.prototype.removeBuildStoppedListener=function(n){r.getService().detachEvent("tfs-document-build-stopped",n)},n.prototype.addModifiedChangedListener=function(n){r.getService().attachEvent("tfs-document-modified-change",n)},n.prototype.removeModifiedChangedListener=function(n){r.getService().detachEvent("tfs-document-modified-change",n)},n.prototype.isModified=function(n){return this._runningDocumentsTable.isModified(n)},n.prototype.save=function(n,t){var i=this.getActiveDocument();if(i)i.save(n,t);else return this._runningDocumentsTable.beginSave(n,t)},n.prototype.getActiveDocument=function(){return this._activeDocument},n.prototype.setActiveDocument=function(n){this._activeDocument=n},n}();t.DocumentService=c;t.getService=y;t.getRunningDocumentsTable=a});
define("Alerts/Scripts/Resources/TFS.Resources.Alerts",["require","exports"],function(require,exports){var e=exports;e.QuickAlertsHeader="Create new alert when";e.DeliveryTypeSoap="SOAP";e.AdvancedAlertManagementPageLink="Team alerts can be managed from the \u003ca\u003eAdvanced Alerts Management Page\u003c/a\u003e";e.AlertEditorDialogAlertNameWithIdFormat="{0} [{1}] {2}";e.OperatorEqualTo="=";e.AlertDeleteErrorFormat="Failed to delete one or more alerts: {0}";e.EditEmailAddressesDialogTitle="Edit email addresses";e.OpenAlert="Open";e.ConfirmDeleteMessage="Are you sure you want to delete the selected alerts?";e.MyNotificationAddressLegendText="Send my alerts to";e.Alerts="Alerts";e.AlertTemplate="Alert template";e.NewAlert="New...";e.AlertsSavedSuccessfullyMessage="Alert(s) were saved successfully";e.MyCurrentSubscriptionsLabel="My current subscriptions";e.BasicAlertsLegendText="Send me an email alert when";e.DefaultAddressFormat="{0} [default]";e.TeamAlert="Team alert";e.AlertEditorDialogTitle="Alert editor";e.NamedTeamCategorizedAlertsFormat="{0} alerts for {1}";e.RefreshTitle="Refresh all alerts";e.SaveAll="Save all";e.CustomAlerts="Custom alerts";e.MyAlerts="My Alerts";e.FieldNameDefinitionName="Definition name";e.LogicalOperatorAnd="And";e.AlertDialogSaveAndCloseButtonText="Save and close";e.RevertTitle="Undo changes to the selected alerts";e.RefreshingAlertsMessage="Refreshing alerts...";e.QuickAlertsOtherItem="Other...";e.AlertNameColumn="Name";e.TeamAlerts="Team alerts";e.CategoryUnknown="Unknown";e.Revert="Undo";e.AlertFormatColumn="Format";e.AllAlerts="All Alerts";e.EditEmailAddressesDialogInstructionLabel="Enter email addresses in the form \"username@host\" or \"Display Name \u003cusername@host\u003e\". Separate multiple email addresses with a semi-colon (;) or comma (,)";e.BasicAlerts="Basic alerts";e.EditCustomEmailAddressDialogInstructionLabel="Enter email address in the form \"username@host\" or \"Display Name \u003cusername@host\u003e\".";e.AlertsTeamNodeFormat="{0} alerts";e.ValidatorSoapAddressRequired="Must specify a valid SOAP endpoint (URI)";e.NewAlertDialogTitle="Select new alert template";e.LogicalOperatorOr="Or";e.SubscriptionSaveConfirmation=" Are you sure you want to save the subscription(s)?";e.CategoryWorkItem="Work Item";e.SavingAlertsMessage="Saving alerts...";e.AlertScopeLabel="Scope (who can view and manage this alert)";e.SubscriberLabel="Subscriber";e.CustomAddressesRadioLabel="Send to the following email addresses";e.ConfirmRevertMessage="Are you sure you want to undo changes to the selected alerts?";e.FieldNameTeamProject="Team project";e.EditLinkText="Edit...";e.CategorizedAlertsUserNodeFormat="{0} alerts for {1}";e.ValidatorNameExceedsMaxLength="Alert name cannot exceed 200 characters";e.MembersEmail="[Members\u0027 default alert address]";e.AlertEditorNameLabel="Name";e.RevertingAlertsMessage="Reverting alerts...";e.DeliveryScheduleDaily="Daily";e.MyCategorizedAlertsFormat="My {0} alerts";e.TeamsAlertsFilterShowOption="Show";e.CategoryGitPush="Push";e.TeamAlertsTitleFormat="Team alerts for {0}";e.AlertCategory="Alert category";e.DeliveryTypeEmailPlainText="Plain text";e.AlertSaveErrorFormat="Failed to save one or more alerts: {0}";e.DeleteSelected="Delete";e.AlertEditorFormatLabel="Format";e.InvalidOperator="Invalid operator : {0}";e.AlertTemplateNameColumn="Template name";e.InvalidMailSettingsMessage="TF400663: Mail settings are not configured on this server. Please contact your administrator.";e.CategoryCodeReview="Code review";e.CategoryNodeFormat="{0} Alerts";e.All="All";e.DeliveryScheduleWeekly="Weekly";e.EditEmailAddressesDialogDefaultLabel="Enter email addresses";e.DefaultAddressesRadioLabel="Send to my preferred email";e.CategoryCheckin="Checkin";e.ConfirmRefreshMessage="You have unsaved changes. Are you sure you wish to refresh? Unsaved changes will be lost.";e.ManageAlertsDialogTitle="Manage My alerts";e.LoadingAlertsMessage="Loading alerts...";e.DeliveryScheduleImmediate="Immediate";e.AlertSubscriberColumn="Subscriber";e.BasicAlertsNoNotificationAddressAction="Click here to specify your email address...";e.EditCustomEmailAddressDialogTitle="Edit my notification email address";e.EditCustomEmailAddressDialogLabel="Send my alerts to the following email address";e.NewAlertTitle="Create a new alert...";e.ValidatorEmailRequired="Must specify one or more email addresses";e.AlertsAdminPageTitle="Alerts management";e.BasicAlertDisplayedNameFormat="{0} [system alert]";e.OperatorUnder="Under";e.BasicAlertsNoNotificationAddressText="You cannot currently create any basic alert subscriptions because you have not specified a default alert email address.";e.DefaultAlertAddress="[Default alert address]";e.AlertCategoryColumn="Category";e.AlertEditorFilterGroupLabel="Alert filters";e.InvalidField="Invalid field name : {0}";e.SubscriberAlertsCountFormat="Showing {0} of {1} alerts for {2}";e.Refresh="Refresh";e.DeletingAlertsMessage="Deleting alerts...";e.AllMyTeamsAlerts="All My Teams Alerts";e.AlertSendToColumn="Send To";e.CategoryBuild="Build";e.AlertsCountFormat="Showing {0} of {1} alerts";e.TeamCategorizedAlertsFormat="Team {0} alerts";e.MyAlert="My alert";e.AlertsUserNodeFormat="{0} alerts";e.AlertDialogCloseButtonText="Close";e.AllCategorizedAlertsFormat="All {0} alerts";e.DeleteSelectedTitle="Delete the selected alerts";e.ValidatorNameRequired="Must specify a name for this alert";e.AlertEditorAddressLabel="Send to";e.SaveAllTitle="Save all modified alerts";e.DeliveryTypeEmailHtml="HTML";e.OperatorChanges="Changes";e.DeleteAlert="Delete";e.TeamsAlertsFilterHideOption="Hide";e.NoNotificationAddress="[No default email address]";e.InvalidEmailAddressFormat="The following email address is not valid: \u0027{0}\u0027. Please specify a valid email address in the form \u0027user@host\u0027 or \u0027Display name \u003cuser@host\u003e\u0027";e.CategoryGitPullRequest="Pull Request";});

// Copyright (C) Microsoft Corporation. All rights reserved.
var __extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)};define("Alerts/Scripts/TFS.Alerts",["require","exports","VSS/VSS","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Array","VSS/Events/Document","Presentation/Scripts/TFS/TFS.Legacy.Ajax","Alerts/Scripts/Resources/TFS.Resources.Alerts","Presentation/Scripts/TFS/TFS.Service"],function(n,t,i,r,u,f,e,o,s,h){var a=i.queueRequest,v=function(){function n(){}return n.My=0,n.Team=1,n.All=2,n.ChatRoom=3,n}(),c,l,p,w;t.AlertsScope=v;c=function(){function n(){}return n.Unknown=0,n.WorkItemChangedEvent=1,n.CheckinEvent=2,n.BuildCompletionEvent=3,n.BuildCompletionEvent2=4,n.BuildStatusChangeEvent=5,n.BuildResourceChangedEvent=6,n.CodeReviewChangedEvent=7,n.BuildCompletedEvent=8,n.GitPushEvent=9,n.GitPullRequestEvent=10,n}();t.SubscriptionType=c;l=function(){function n(n){this._subscriptionType=n}return n.getAdapter=function(n){return this._adapters||(this._adapters={},this._adapters[c.WorkItemChangedEvent]=new b,this._adapters[c.CheckinEvent]=new k,this._adapters[c.GitPushEvent]=new d,this._adapters[c.GitPullRequestEvent]=new g,this._adapters[c.BuildCompletionEvent]=new nt,this._adapters[c.BuildCompletionEvent2]=new tt,this._adapters[c.BuildStatusChangeEvent]=new rt,this._adapters[c.BuildResourceChangedEvent]=new ut,this._adapters[c.CodeReviewChangedEvent]=new ft,this._adapters[c.BuildCompletedEvent]=new it,this._adapters[c.Unknown]=new et),this._adapters[n]},n.prototype.beginGetFilterFields=function(n,t,i){a(this,this,"_fields",t,i,function(t,i){n.getFilterFields(this._subscriptionType,function(n){t(n)},i)})},n.prototype.getFilterFieldByName=function(n,t,i,r){var f,e;this.beginGetFilterFields(n,function(n){for(f=0,e=n.length;f<e;f++)if(u.localeIgnoreCaseComparer(n[f].fieldName,t)===0){i(n[f]);return}i(null)},r)},n.prototype.getCategoryName=function(){return"CategoryName"},n._adapters=null,n}();t.AlertAdapter=l;i.initClassPrototype(l,{_subscriptionType:0,_fields:null});var b=function(n){function t(){n.call(this,c.WorkItemChangedEvent)}return __extends(t,n),t.prototype.getCategoryName=function(){return s.CategoryWorkItem},t}(l),k=function(n){function t(){n.call(this,c.CheckinEvent)}return __extends(t,n),t.prototype.getCategoryName=function(){return s.CategoryCheckin},t}(l),d=function(n){function t(){n.call(this,c.GitPushEvent)}return __extends(t,n),t.prototype.getCategoryName=function(){return s.CategoryGitPush},t}(l),g=function(n){function t(){n.call(this,c.GitPullRequestEvent)}return __extends(t,n),t.prototype.getCategoryName=function(){return s.CategoryGitPullRequest},t}(l),nt=function(n){function t(){n.call(this,c.BuildCompletionEvent)}return __extends(t,n),t.prototype.getCategoryName=function(){return s.CategoryBuild},t}(l),tt=function(n){function t(){n.call(this,c.BuildCompletionEvent2)}return __extends(t,n),t.prototype.getCategoryName=function(){return s.CategoryBuild},t}(l),it=function(n){function t(){n.call(this,c.BuildCompletedEvent)}return __extends(t,n),t.prototype.getCategoryName=function(){return s.CategoryBuild},t}(l),rt=function(n){function t(){n.call(this,c.BuildStatusChangeEvent)}return __extends(t,n),t.prototype.getCategoryName=function(){return s.CategoryBuild},t}(l),ut=function(n){function t(){n.call(this,c.BuildResourceChangedEvent)}return __extends(t,n),t.prototype.getCategoryName=function(){return s.CategoryBuild},t}(l),ft=function(n){function t(){n.call(this,c.CodeReviewChangedEvent)}return __extends(t,n),t.prototype.getCategoryName=function(){return s.CategoryCodeReview},t}(l),et=function(n){function t(){n.call(this,c.Unknown)}return __extends(t,n),t.prototype.getCategoryName=function(){return s.CategoryUnknown},t}(l),y=function(){function n(){}return n.getName=function(t){var i;return n._names||(i={},i[n.HTML]=s.DeliveryTypeEmailHtml,i[n.PlainText]=s.DeliveryTypeEmailPlainText,i[n.SOAP]=s.DeliveryTypeSoap,n._names=i),n._names[t]},n._names=null,n.HTML=0,n.PlainText=1,n.SOAP=2,n.ChatRoom=4,n.ServiceHooks=5,n}();t.DeliveryType=y;p=function(){function n(){}return n.getName=function(t){var i;return n._names||(i={},i[n.Immediate]=s.DeliveryScheduleImmediate,i[n.Daily]=s.DeliveryScheduleDaily,i[n.Weekly]=s.DeliveryScheduleWeekly,n._names=i),n._names[t]},n._names=null,n.Immediate=0,n.Daily=1,n.Weekly=2,n}();t.DeliverySchedule=p;w=function(n){function t(){n.call(this);e.getRunningDocumentsTable().add("AlertsManager",this);this._alertIdsByChatRoom={};this._alertIdsByClassification={};this._alerts={};this._alertIdsByUser={};this._alertIdsByScope={};this._subscribers={}}return __extends(t,n),t.prototype.getApiLocation=function(n){return this.getTfsContext().getActionUrl(n||"","alerts",{area:"api"})},t.prototype.isDirty=function(){return this.getDirtyAlerts().length>0},t.prototype.getAlerts=function(n,t,i,r,u){var f=this;this._ensureAlertsAtScope(n,t,function(n){$.isFunction(i)&&i.call(f,f._getCachedAlertsByIds(n))},r,typeof u=="undefined"?!1:u)},t.prototype.getAlertsForChatRoom=function(n,t,i){var r=this;this._ensureAlertsForChatRoom(n,function(n){$.isFunction(t)&&t.call(r,r._getCachedAlertsByIds(n))},i)},t.prototype.getAlertsForClassification=function(n,t,i){var r=this;this._ensureAlertsForClassification(n,function(n){$.isFunction(t)&&t.call(r,r._getCachedAlertsByIds(n))},i)},t.prototype.getAlertsForUser=function(n,t,i){var r=this;this._ensureAlertsForUser(n,function(n){$.isFunction(t)&&t.call(r,r._getCachedAlertsByIds(n))},i)},t.prototype.getSubscriber=function(n){return this._subscribers[n]},t.prototype.getBasicTemplates=function(n,t){var r,u,i;a(this,this,"_basicTemplates",n,t,function(n,t){this._ajaxJson("GetBasicSubscriptionTemplates",{},function(t){for(r=0,u=t.length;r<u;r++)i=t[r],i.adapter=l.getAdapter(i.subscriptionType),i.categoryName=i.adapter.getCategoryName();n(t)},t)})},t.prototype.getCustomTemplates=function(n,t){var r,u,i;a(this,this,"_customTemplates",n,t,function(n,t){this._ajaxJson("GetCustomSubscriptionTemplates",{},function(t){for(r=0,u=t.length;r<u;r++)i=t[r],i.adapter=l.getAdapter(i.subscriptionType),i.categoryName=i.adapter.getCategoryName();n(t)},t)})},t.prototype.getChatRoomTemplates=function(n,t){var r,u,i;a(this,this,"_chatRoomTemplates",n,t,function(n,t){this._ajaxJson("GetChatRoomSubscriptionTemplates",{},function(t){for(r=0,u=t.length;r<u;r++)i=t[r],i.adapter=l.getAdapter(i.subscriptionType),i.categoryName=i.adapter.getCategoryName();n(t)},t)})},t.prototype.setMyCustomNotificationAddress=function(n,t,i){var r=this,u;this._ajaxPost("SetCustomNotificationAddress",{customNotificationAddress:n},function(n){r._myCustomNotificationAddressInfo=n;u=r.getSubscriber(r.getTfsContext().currentIdentity.id);u&&(u.email=n.customAddress);$.isFunction(t)&&t.call(r,n.customAddress)},i)},t.prototype.getMyNotificationAddress=function(n,t){var i;this._getMyCustomNotificationAddressInfo(function(t){$.isFunction(n)&&(i=t.customAddress||t.customAddress===""?t.customAddress:this.getTfsContext().currentIdentity.email,n.call(this,i))},t)},t.prototype.createNewAlertFromTemplate=function(n,t,i){var r,u,f;return r={},r.id=0,r.eventTypeName=n.eventTypeName,r.subscriptionType=n.subscriptionType,r.name=n.defaultName,r.deliveryPreference={address:null,schedule:p.Immediate,type:y.HTML},u=this.getTfsContext(),f=u.currentTeam,r.ownerId=u.currentIdentity.id,r.subscriberId=i?i:t===v.Team&&f?f.identity.id:u.currentIdentity.id,r.filter=this._cloneFilter(n.filter),this._extendSubsubscription(r),r},t.prototype.createNewChatRoomAlertFromTemplate=function(n,t,i){var r={};return r.id=0,r.eventTypeName=n.eventTypeName,r.subscriptionType=n.subscriptionType,r.name=n.defaultName,r.deliveryPreference={address:t,schedule:p.Immediate,type:y.ChatRoom},r.subscriberId=i,r.filter=this._cloneFilter(n.filter),this._extendSubsubscription(r),r},t.prototype.getFilterFields=function(n,t,i){this._ajaxJson("GetSubscriptionFilterFields",{type:n},t,i)},t.prototype.getDirtyAlerts=function(){var n=[];return this._alerts&&$.each(this._alerts,function(t,i){i.dirty&&n.push(i)}),n},t.prototype.validateAlert=function(n){var i=[],r,t;for(r in n.filter.clauses)t=n.filter.clauses[r],t.fieldName!==""&&n.adapter.getFilterFieldByName(this,t.fieldName,function(n){var r,f;if(n){r=!1;for(f in n.operators)if(t.operator===n.operators[f]){r=!0;break}r||i.push(u.format(s.InvalidOperator,t.operator))}else i.push(u.format(s.InvalidField,t.fieldName))},function(n){i.push(n)});return i},t.prototype.saveDirtyAlerts=function(n,t,i,r){var u=this.getDirtyAlerts();u.length===0?jQuery.isFunction(n)&&n.call(this,[]):this.saveAlerts(u,n,t,i,r)},t.prototype.saveAlerts=function(n,t,i,r,u){var e,c,a,f,h=[],v=[],o=this,l;if(u){for(l=0;l<n.length;l++)h=h.concat(this.validateAlert(n[l]));if(h.length>0){i(h.join("\n"));return}}this._ajaxPost("saveSubscriptions",{subscriptionsJson:this.getAlertsJsonForPost(n),skipWarning:!u},function(l){var y=0,p;for(c=0,a=n.length;c<a;c++)e=l[c],f=n[y],e.lastError?h.push(e.lastError):e.lastWarning?v.push(e.lastWarning):(p=n.indexOf(f),p!==-1&&(y--,n.splice(p,1),f.dirty=!1),f&&((f.id||!u)&&(u||f.id?o._removeCachedAlert(f.id):o._removeCachedAlert(e.id)),f.id=e.id,f.projectId=e.projectId,o._alerts[e.id]||o._addNewCachedAlert(f))),y++;$(window).trigger("managed-alerts-updated",{alerts:o._alerts});o._handleCallbackErrors(h,s.AlertSaveErrorFormat,i);o._handleCallbackWarnings(v,l,n,t,r,i)},i)},t.prototype.deleteAlerts=function(n,t,i){var r=this;this._ajaxPost("deleteSubscriptions",{alertsToDeleteJson:this.getAlertsJsonForPost(n)},function(u){$.each(n,function(n,t){f.contains(u.idsWithErrors,t.id)||r._removeCachedAlert(t.id)});$(window).trigger("managed-alerts-updated",{alerts:r._alerts});r._handleCallbackErrors(u.errors,s.AlertDeleteErrorFormat,i,t)},i)},t.prototype.revertAlerts=function(n,t,i,r,u){var c=this,e,f,s,h,o;this._ajaxJson("subscriptions",{scope:n},function(n){for(e=0,s=i.length;e<s;e++){for(o=i[e],f=0,h=n.subscriptions.length;f<h;f++)if(o.id===n.subscriptions[f].id){$.extend(o,n.subscriptions[f]);break}o.dirty=!1}r(i);$(window).trigger("managed-alerts-updated",{alerts:c._alerts})},u)},t.prototype.getAlertsJsonForPost=function(n){for(var f=[],i,t=0,u=n.length;t<u;t++)i=$.extend({},n[t]),i.category=null,i.adapter=null,f.push(r.stringifyMSJSON(i));return f},t.prototype.getCachedAlertsCountForScope=function(n){var t=this._alertIdsByScope[n];return $.isArray(t)?t.length:0},t.prototype.getCachedAlertsCountForUser=function(n){var t=this._alertIdsByUser[n];return $.isArray(t)?t.length:0},t.prototype.getCachedAlertsCountForChatRoom=function(n){var t=this._alertIdsByChatRoom[n];return $.isArray(t)?t.length:0},t.prototype.getCachedScopes=function(){var n=[];return $.each(this._alertIdsByScope,function(t,i){$.isArray(i)&&n.push(+t)}),n},t.prototype.getCachedUsers=function(){var n=[];return $.each(this._alertIdsByUser,function(t,i){$.isArray(i)&&n.push(t)}),n},t.prototype.getCachedChatRooms=function(){var n=[];return $.each(this._alertIdsByChatRoom,function(t,i){$.isArray(i)&&n.push(t)}),n},t.prototype.getCachedClassifications=function(){var n=[];return $.each(this._alertIdsByClassification,function(t,i){$.isArray(i)&&n.push(t)}),n},t.prototype.dropAlertResultsForScope=function(n){delete this._alertIdsByScope[n]},t.prototype.dropAlertResultsForUser=function(n){var t=this._alertIdsByUser[n];$.isArray(t)&&delete this._alertIdsByUser[n]},t.prototype.dropAlertResultsForChatRoom=function(n){var t=this._alertIdsByChatRoom[n];$.isArray(t)&&delete this._alertIdsByChatRoom[n]},t.prototype.dropAlertResultsForClassification=function(n){var t=this._alertIdsByClassification[n];$.isArray(t)&&delete this._alertIdsByClassification[n]},t.prototype.dropCachedAlerts=function(){var n=this;this._alerts={};$.each(this.getCachedScopes(),function(t,i){delete n._alertIdsByScope[i]});$.each(this.getCachedUsers(),function(t,i){delete n._alertIdsByUser[i]});$.each(this.getCachedChatRooms(),function(t,i){delete n._alertIdsByChatRoom[i]});$.each(this.getCachedClassifications(),function(t,i){delete n._alertIdsByClassification[i]})},t.prototype._ajaxJson=function(n,t,i,r,u){o.getMSJSON(this.getApiLocation(n),t,i,r,u)},t.prototype._ajaxPost=function(n,t,i,r,u){o.postMSJSON(this.getApiLocation(n),t,i,r,u)},t.prototype._ensureAlertsAtScope=function(n,t,i,r,u){var f=this;u=typeof u=="undefined"?!1:u;u==!0&&(this._alertIdsByScope[n]=null);a(this,this._alertIdsByScope,n,i,r,function(i,r){this._ajaxJson("subscriptions",{scope:n,includeTeamsAlerts:t},function(n){var t=f._storeAlertResults(n);i(t);$(window).trigger("managed-alerts-updated",{alerts:f._alerts})},r)})},t.prototype._ensureAlertsForUser=function(n,t,i){var r=this;a(this,this._alertIdsByUser,n,t,i,function(t,i){this._ajaxJson("subscriptions",{scope:v.All,userId:n},function(n){var i=r._storeAlertResults(n);t(i);$(window).trigger("managed-alerts-updated",{alerts:r._alerts})},i)})},t.prototype._ensureAlertsForChatRoom=function(n,t,i){var r=this;a(this,this._alertIdsByChatRoom,n,t,i,function(t,i){this._ajaxJson("subscriptions",{scope:v.ChatRoom,filter:n},function(n){var i=r._storeAlertResults(n);t(i);$(window).trigger("managed-alerts-updated",{alerts:r._alerts})},i)})},t.prototype._ensureAlertsForClassification=function(n,t,i){var r=this;a(this,this._alertIdsByClassification,n,t,i,function(t,i){this._ajaxJson("subscriptions",{scope:v.My,classification:n},function(n){var i=r._storeAlertResults(n);t(i);$(window).trigger("managed-alerts-updated",{alerts:r._alerts})},i)})},t.prototype._storeAlertResults=function(n){for(var u,i,f=[],t=0,r=n.subscribers.length;t<r;t++)u=n.subscribers[t],this._subscribers[u.teamFoundationId]=u;for(t=0,r=n.subscriptions.length;t<r;t++)i=n.subscriptions[t],f.push(i.id),this._alerts[i.id]||(this._extendSubsubscription(i),this._alerts[i.id]=i);return f},t.prototype._getCachedAlertsByIds=function(n){for(var u=[],i,t=0,r=n.length;t<r;t++)i=this._alerts[n[t]],i&&u.push(i);return u},t.prototype._getMyCustomNotificationAddressInfo=function(n,t){a(this,this,"_myCustomNotificationAddressInfo",n,t,function(n,t){this._ajaxJson("GetCustomNotificationAddress",{},n,t)})},t.prototype._addNewCachedAlert=function(n){var t,i;this._alerts[n.id]=n;n.deliveryPreference.type==y.ChatRoom||(n.subscriberId===this.getTfsContext().currentIdentity.id?this._addNewAlertToCache(this._alertIdsByScope[v.My],n.id):(t=this.getTfsContext().currentTeam,i=t&&t.identity&&t.identity.id,i&&i===n.subscriberId&&this._addNewAlertToCache(this._alertIdsByScope[v.Team],n.id)),this._addNewAlertToCache(this._alertIdsByScope[v.All],n.id));this._addNewAlertToCache(this._alertIdsByUser[n.subscriberId],n.id);n.tag&&this._addNewAlertToCache(this._alertIdsByClassification[n.tag],n.id)},t.prototype._addNewAlertToCache=function(n,t){$.isArray(n)&&n.push(t)},t.prototype._removeCachedAlert=function(n){var t=this;delete this._alerts[n];$.each(this.getCachedScopes(),function(i,r){t._removeFromArray(t._alertIdsByScope[r],n)});$.each(this.getCachedUsers(),function(i,r){t._removeFromArray(t._alertIdsByUser[r],n)})},t.prototype._removeFromArray=function(n,t){var i=$.inArray(t,n);i>=0&&n.splice(i,1)},t.prototype._handleCallbackErrors=function(n,t,r,f){var o,s,e;if(n.length>0){for(e="",o=0,s=n.length;o<s;o++)e+="\r\n"+n[o];e=u.format(t,e);jQuery.isFunction(r)?r.call(this,e,n):i.errorHandler.show(new Error(e))}else jQuery.isFunction(f)&&f.call(this)},t.prototype._handleCallbackWarnings=function(n,t,i,r,u,f){if(n&&n.length>0){var e=confirm(n[0]+s.SubscriptionSaveConfirmation);e===!0?this.saveAlerts(i,r,f,u,!1):u&&jQuery.isFunction(u)&&u.call()}else jQuery.isFunction(r)&&r.call(this)},t.prototype._extendSubsubscription=function(n){n.adapter=l.getAdapter(n.subscriptionType);n.categoryName=n.adapter.getCategoryName();n.isValid=function(){return!0}},t.prototype._cloneFilter=function(n){for(var r={maxGroupLevel:n.maxGroupLevel,clauses:[],groups:[]},t=0,i=n.clauses.length;t<i;t++)r.clauses.push($.extend({},n.clauses[t]));for(t=0,i=n.groups.length;t<i;t++)r.groups.push($.extend({},n.groups[t]));return r},t}(h.TfsService);t.AlertsManager=w;i.tfsModuleLoaded("TFS.Alerts",t)});
define("VSS/Resources/VSS.Resources.Common",["require","exports"],function(require,exports){var e=exports;e.TeamHomeShowAllMembers="Show all members";e.Header_WelcomePortal="Visual Studio Team Services";e.InvalidArtifactUri="TF400897: Invalid artifact uri: {0}";e.GettingStartedCreatingCollection="Creating collection...";e.AgoAMonth="a month ago";e.WelcomePageCreateProjectTitle="Create a team project";e.ViewProcessGuidance="View process guidance";e.Header_Privacy="Privacy policy";e.ErrorDuplicateRouteArea="TF400913: RoutingArea \u0027{0}\u0027 already registered.";e.ReleaseManagementStakeholderName="View Releases and Manage Approvals";e.TimeStampFullDate="{0}, {1}";e.NotAuthorizedToAccessPage="TF400894: You are not authorized to access this page. Please contact your project administrator.";e.HostedWelcomePageTitle="Welcome to Visual Studio Team Services";e.NavigationHelpMenuMsdn="MSDN";e.TeamHomeOpeningWorkItemForm="Opening work item form...";e.InvalidExtensionManifest="Extension manifest file format is invalid. ";e.AgileBoardsFeatureDescription="Agile project management taskboards";e.AddSearchFilterType="Work item type:";e.Header_ExitAdministration="Exit administration";e.BrowseForExtensions="Browse TFS extensions";e.ErrorMissingManifestFileFormat="TF400903: Could not find manifest file ({0}) in the plugin archive";e.TrialModeReminderMessage_Today="\u003cb\u003etoday\u003c/b\u003e";e.ProjectNameNotSpecified="Project name must be specified.";e.NewTeamProjectText="New team project";e.Header_Support="Support";e.Backlog="Backlog";e.TeamDoesNotExistOrNoAccess="TF400914: The specified team, {0}, either does not exist or you do not have access to it.";e.OtherCollections="Other collections";e.ExpandAll="Expand all";e.PageTitleServerHome="Welcome to Team Foundation Server";e.HighContrastThemeName="High contrast";e.FeedbackFeatureName="Request and Manage Feedback";e.StakeholderAccountExpiredReminderMessage="Your current license {0} has expired. You will be assigned a \u003ca href=\"https://go.microsoft.com/fwlink/?LinkID=403541\"\u003eStakeholder license\u003c/a\u003e temporarily. Please contact your account administrator.";e.VersionControlProperty="Version control:";e.TestManagementForBasicUsersFeatureDescription="Run tests assigned to you using the web-based Test Runner.";e.WelcomePageGettingStarted="Getting started";e.ManageSecurity="Manage security";e.GettingStartedCreateCollectionProgressPart1="We are currently creating your first collection and finalizing your account configuration.";e.TestManagementForStakeholderName="Test summary access to stakeholder license users";e.CollapseAllToolTip="Collapse all";e.TeamHomeConfigureAreas="Configure work areas...";e.MenuItemsLoading="Loading...";e.InvalidCallbackName="Callback name contains invalid characters.";e.HelpMenuLabel="Help";e.PageTitleProjectHome="{0} project";e.ErrorPluginNotFound="TF400906: The plugin {0} could not be found";e.Filter="Filter";e.NavigationContentMenuItem_Instance="Team Foundation Server";e.PortfolioBacklogManagementFeatureDescription="Create a portfolio of features and initiatives and trace your product backlog items to portfolio items.";e.GettingStartedRetryTeamProjectCreationLink="Retry team project creation";e.GitSupport="Git support";e.AdministerServer="Manage server";e.Header_Administration="Administration";e.OpenInVisualStudioPartDesc="Open this Team Project in Visual Studio";e.TeamHomeManageMembers="Manage all members...";e.MoreMyTeams="More my teams...";e.WelcomePageBrowseAll="Browse all...";e.MyWork="My work";e.RemoveFromRecentItems="Remove from recent items";e.WelcomePageCreateProjectDescription="Add a team project to a team  project collection.";e.AgoAMinute="a minute ago";e.NavigationContextMenuDefaultLabelTitle="Select a project";e.Header_KeyboardShortcuts="Keyboard shortcuts";e.Header_Community="Community";e.WorkItems="Work items";e.SendMailSendButton="Send";e.HubGroupDashboards="Dashboards";e.GettingStartedPatchLink="Download software";e.GettingStartedPatchText="Download and install the software necessary to connect to your team project from Visual Studio, Eclipse, Excel, or Microsoft Test Manager.";e.Application_NoTeamProjects="There are no team projects.";e.TeamSettings="Team settings";e.GettingStartedTeamProjectPart1="When your account is ready, you will then be able to create a new team project for your team to collaborate in.";e.GettingStartedTeamProjectPart2="Create a new team project for your team to collaborate in.";e.WelcomePageNoRecentProjects="You haven\u0027t recently visited any project or teams.";e.SourcePropertiesGitUrl="Git repository URL";e.InvalidParameterFormat="Format of the parameter \u0027{0}\u0027 is invalid.";e.ViewBacklog="View backlog";e.BranchToDeployLabel="Branch to Deploy";e.TeamTitleFormat="{0} / {1}";e.ErrorNoPluginElementsFormat="TF400904: No plugin elements ({0}) were found in the plugin manifest file";e.TimeStampYesterdayAt="Yesterday at {0}";e.UnableToFindWindowsIdentity="Unable to find Windows identity for {0}";e.Gallery="Available extensions";e.SubscriptionLabel="Subscription";e.AgoHours="{0} hours ago";e.ManageWorkAreas="Manage work areas";e.AgoAYear="a year ago";e.AgoAWeek="a week ago";e.ManageProject="Manage project";e.ManageProfile="My profile";e.AgoYears="{0} years ago";e.ErrorPluginNameInvalidCharsFormat="Invalid character(s) in the plugin name. Plugin name can contain only letters, digits, space and the following characters:\r\n\r\n    {0}";e.AgoWeeks="{0} weeks ago";e.TeamHomeConfigureIterations="Configure schedule and iterations...";e.PortfolioBacklogManagementFeatureName="Agile Portfolio Management";e.TestManagementForStakeholderDescription="Stakeholder license users can view test summary charts on dashboards";e.NavigationContextMenuDefaultLabel="Projects";e.FilterToolTip="Filter";e.NavigationContentMenuItem_TeamProjectCollection="Collection";e.MoreMyCollections="More my collections...";e.ProjectHomeBladeTitle="Team Project";e.ExtensionSlowLoadWarningHeader="A TFS extension is loading slowly. Expand details to view options.";e.NavigationContextMenuBackToWelcomePage="Back to Welcome Page";e.ChatRoomsFeatureName="Team rooms";e.TeamSettings_BacklogLevelsManualCorrectionStepsLink="https://go.microsoft.com/fwlink/?LinkId=615175";e.TeamHomeMembersTitleFormat="Members ({0})";e.HtmlContentMsdnEligible="\u003cspan class=\"refresh-action\" \u003e\u003cb\u003eRetry\u003c/b\u003e\u003c/span\u003e";e.BranchToDeployMessage="Since your repository does not yet have a branch created, we will automatically use the first branch you create for deployments.";e.PropertiesPartTitle="Properties";e.CreateTeamProjectTitle="Create Team Project";e.NewMenuTitle="New";e.GettingStartedTutorialFeedbackDesc="Provide suggestions for how we can improve our Visual Studio Team Services.";e.AdvancedPortfolioBacklogManagementFeatureDescription="Advanced portfolio management.";e.GettingStartedErrorCreatingProject="TF400911: There was an error creating the project. Please try again and if the problem persists \u003ca href=\"https://go.microsoft.com/fwlink/?LinkId=534538\" target=\u0027_blank\u0027\u003econtact our support team\u003c/a\u003e";e.StakeholderExpiredLicenseReminderLink="https://go.microsoft.com/fwlink/?LinkID=403541";e.SetupDeploymentDescription="Build, test, and deploy your website automatically when you check in code.";e.TeamProjectRenamedGlobalMessage="The team project {0} has been renamed to {1}";e.ProjectPickerBladeTitle="Choose project";e.TestManagementFeatureDescription="Web-based Test Case Management functionality.";e.ProjectNameInvalid="The project name is not valid.";e.BacklogManagementFeatureName="Basic backlog and sprint planning tools";e.TeamProjectWatermark="Enter team project name...";e.WelcomePageProjectConnectionMessage="Click \"Browse all...\" to connect to a project.";e.ExtensionDoesNotExist="Extension does not exist.";e.ReleaseManagementStakeholderDescription="View Releases and Manage Approvals";e.CreateProjectFailedMessage="Create Project Failed";e.FeatureEnablementSettings_Error_Invalid_Admin="TF400917: The current configuration is not valid for this feature. This feature cannot be used until you correct the configuration.";e.ManageExtensions="Manage extensions";e.ChartAuthoringFeatureName="Chart Authoring";e.ProjectCreationErrorTryAgain="try again";e.SendMailNoSubjectWarning="Are you sure you want to send this mail without a subject?";e.SignOut="Sign out";e.SidebarSearchWatermark="Search...";e.BacklogManagementFeatureDescription="Basic agile project management product and sprint backlog";e.NavigationContextMenuTeamLabelTitleFormat="Team \u0027{0}\u0027 in Project \u0027{1}\u0027";e.CreateFirstProjectWelcomeText="Welcome.  Your account, \u003ca href=\u0027{0}\u0027 target=\u0027_blank\u0027\u003e{0}\u003c/a\u003e, is created and ready to go.  Now create your first team project where youâ€™ll host your code and backlog. ";e.ExtensionErrorHeader="Failed to load extension";e.ProjectTeams="{0} teams";e.ProjectTitleFormat="{0}";e.RequiredFieldWatermark="Required...";e.ChartViewingFeatureDescription="View custom charts of your work item data.";e.CloseBrowserToCompleteSignoutMessage="You must close your browser to complete the sign out process.";e.Administration="Administration";e.NotSupportedBrowserMessage="\u003ch2\u003eMicrosoft Team Foundation is designed for you, but maybe not for your browser.\u003c/h2\u003e\r\n\u003cp\u003eSome Microsoft Team Foundation features might not work correctly with the version of the web browser you\u0027re currently using.\u003c/p\u003e\r\n\u003cp\u003eTo get the most out of Team Foundation, we recommend that you take a few minutes to upgrade to the current version of one of these browsers:\u003cbr\u003e\r\n  \u003cul\u003e\r\n\t\u003cli\u003e\u003ca href=\"http://windows.microsoft.com/en-US/internet-explorer/downloads/ie\"\u003eWindows Internet Explorer\u003c/a\u003e\u003c/li\u003e\r\n\t\u003cli\u003e\u003ca href=\"https://www.mozilla.com/en-US/firefox/new/\"\u003eMozilla Firefox\u003c/a\u003e\u003c/li\u003e\r\n\t\u003cli\u003e\u003ca href=\"https://www.google.com/chrome\"\u003eGoogle Chrome\u003c/a\u003e\u003c/li\u003e\r\n\t\u003cli\u003e\u003ca href=\"https://www.apple.com/safari/\"\u003eSafari\u003c/a\u003e\u003c/li\u003e\r\n  \u003cul\u003e\r\n\u003c/p\u003e";e.TeamHomeMoreWorkItemTypes="more";e.PinnedItemsTileInfoMessage="You can pin builds, version control paths, work item queries and charts to the team homepage to display them as tiles.";e.ProcessTemplateLabel="Process Template";e.ManageTeamMembers="Manage team members";e.ProjectSettings="Project settings";e.EarlyAdopterModeReminderMessage_MultipleDays="Your account is an Early Adopter account. In \u003cb\u003e{0} days\u003c/b\u003e your account will revert to a standard account. \u003ca href=\u0027{1}\u0027 target=\u0027_blank\u0027\u003eLearn more\u003c/a\u003e.";e.PageTitle_Hosted="Microsoft Visual Studio Team Services";e.RequestFeedback="Request feedback";e.WelcomePageServerAdministrationDescription="Manage team project collections, team projects, users, groups, and permissions.";e.StakeholderReminderMessage="As a stakeholder, you can access the backlog, task and Kanban boards, work items and manage approvals for Releases. {0}.";e.EarlyAdopterAccountLearnMoreUrl="https://go.microsoft.com/fwlink/?LinkID=330423";e.ManageTeams="Manage teams";e.AjaxRequestFailedWithStatus="Ajax request failed with status: {0}.";e.HomePageUpgradeToFullVersionMessage="Visual Studio Team Services is live! Up to 5 users are free, plus for a limited time all use is free. \u003ca href=\u0027https://go.microsoft.com/fwlink/?LinkID=269576\u0027 target=\u0027_blank\u0027\u003eLearn more\u003c/a\u003e.";e.CancelText="Cancel";e.GettingStartedTeamProject="Create a team project";e.ActionsTitle="Actions";e.ProjectHomeBladeSubTitle="Team Project";e.PinnedItemsTitle="Pinned Items";e.Marketplace="Marketplace";e.ErrorPluginElementMissingNameFormat="TF400905: A plugin element ({0}) was found with no \"{1}\" attribute";e.ReleaseManagementFeatureName="Author Release Definitions and Manage Releases";e.UnsavedChanges="You have unsaved changes.";e.ManageSecurityPreferences="Security";e.AllItemsText="All";e.SignInAsDifferentUser="Sign in as...";e.StakeholderMsdnExpiredReminderMessage="Your MSDN subscription has expired. You will be assigned a \u003ca href=\"https://go.microsoft.com/fwlink/?LinkID=403541\"\u003eStakeholder license\u003c/a\u003e temporarily. Check your MSDN subscription status at \u003ca href=\"https://go.microsoft.com/fwlink/?LinkID=513087\"\u003eMy Account portal\u003c/a\u003e.";e.CollapseAll="Collapse all";e.Header_About="About";e.WelcomePageViewOnlineHelpTitle="Visit the MSDN Library";e.AdministerAccount="Manage account";e.CDNDisclaimer="Third party scripts and code linked to or referenced from this website are licensed to you by the parties that own such code, not by Microsoft.  See ASP.NET Ajax CDN Terms of Use â€“ https://www.asp.net/ajaxlibrary/CDN.ashx.";e.SourceQuickStartBladeTitle="Add some code";e.Eclipse="Eclipse";e.SendMailTo="To";e.MoreMyProjects="More my projects...";e.InvalidZipArchiveFile="TF400900: Invalid zip archive file : {0}";e.AutomaticCulture="Browser";e.SendMailTitle="Send mail";e.CreateProjectBladeSubTitle="Create a team project for Visual Studio Team Foundation Server.";e.SourcePropertiesPartTitle="Source";e.SearchWorkItems="Search work items";e.TestManagementForExpressSkuFeatureName="Analyze test results and manage machine groups";e.TeamSettings_BugsBehaviorManualCorrectionStepsLink="https://go.microsoft.com/fwlink/?LinkId=512868";e.ManageNotifications="Notifications";e.CreateTeamProjectPartDesc="Create a team project for Visual Studio Team Foundation Service";e.TeamHomeWorkItemCreatedMessage="{0} created {1}";e.SetUpContinuousDeploymentPartTitle="Set Up Continuous Deployment";e.UnableToAccessCollectionFromCompatUrl="TF400895: Unable to access collection specified : {0}";e.Team_Members="Members ({0})";e.AccountHomePage_ShowAboutTFSHosted_VSO="Display About Visual Studio Team Services";e.AgoMinutes="{0} minutes ago";e.OpenInVisualStudioPartShortTitle="Open in VS";e.TestMailSuccess="Email was successfully sent from TFS to the configured SMTP server.";e.ResourceUsageLoadTestingUnit="virtual user minutes";e.ResourceUsageLoadTestingName="Load Testing";e.NewTeamProjectGitText="New team project + Git";e.TeamHomeViewQueries="View queries";e.InvalidLicenseException="TF400409: You do not have licensing rights to access this feature: {0}";e.ProjectNotFound="TF400901: Project not found: {0}";e.TeamProjectSubHeader="Team Project";e.FirstProjectConfirmationLearn="Are you ready to write some code?  Get started by connecting your project directly to {0}, or learn how to connect with {1}, or {2}.  We think you and your team are going to absolutely love this.";e.AdvancedHomePageFeatureName="Advanced home page";e.NavigationContentMenuItem_Account="Your account";e.WelcomePageVisitGalleryDescription="Access extensions, process templates, and power tools for Visual Studio and Team Foundation Server.";e.TestManagementForBasicUsersFeatureName="Web-based Test Execution";e.XmlSchemaErrorLine="({0},{1}) {2}";e.AddSearchFilterCreatedBy="Created by:";e.ResourceUsageBlockedNoSubscription="Your account has used all the free quantity of this resource. Click Learn more above to set up billing for your account.";e.AccountHomePage_ShowAnnouncements="Display all announcements";e.InvalidParameter="Parameter \u0027{0}\u0027 is invalid";e.ExtensionsDisabledMessage="Extensions are disabled.";e.TeamHomeProjectAdminTitle="Administration";e.CollectionSettings="Collection settings";e.NavigationContextMenuTeamLabelFormat="{0} / {1}";e.WelcomePageVisitGalleryTitle="Visit the Visual Studio Gallery";e.NoImageDataUploaded="No image data uploaded.";e.FetchingSearches="Fetching recent searches";e.PageTitle="Microsoft Team Foundation Server";e.CreateDeploymentPartShortTitle="Create Deployment";e.SendMailAttachments="Attachments";e.TimeStampDayAt="{0} at {1}";e.GettingStartedTutorialLink="Beginner\u0027s guide";e.GettingStartedTutorialText="A step-by-step guide to help you get up and running now.";e.ChatRoomsFeatureDescription="Team rooms enabling real time communication";e.OpenVisualStudio="Open new instance of Visual Studio";e.UnknownArtifactType="Unknow artifact type: {0}";e.TimeStampTodayAt="Today at {0}";e.AddSearchFilterAssignedTo="Assigned to:";e.UnsupportedBrowserWarningMessageHosted="You are using an unsupported browser. For the best experience, please upgrade to a newer browser. \u003ca href=\"https://go.microsoft.com/fwlink/?LinkId=799815\" target=\"_blank\"\u003eLearn more\u003c/a\u003e";e.NewBacklogItemToolTip="Add an item to this backlog";e.AccountSettings="Account settings";e.GettingStartedRetryCollectionCreationLink="Retry collection creation";e.WelcomePageSubmitFeedbackDescription="Provide suggestions for how we can improve Team Web Access and Team Foundation Server.";e.ExtensionSlowLoadWarningBody="It is taking a long time to load the TFS extension content from the following url: \u003cbr /\u003e\u003ca /\u003e";e.CreateTeamProjectPartShortTitle="Team Project";e.EarlyAdopterModeReminderMessage_Today="Your account is an Early Adopter account. \u003cb\u003eToday\u003c/b\u003e your account will revert to a standard account. \u003ca href=\u0027{0}\u0027 target=\u0027_blank\u0027\u003eLearn more\u003c/a\u003e.";e.ChooseWebsiteWizardStepLabel="Choose Website";e.AdvancedHomePageFeatureDescription="Advanced home page.";e.ImageSizeTooLarge="Uploaded image exceeds maximum size.";e.NavigationHelpMenuGettingStarted="Getting started";e.NoCollectionSpecifiedInCompatUrl="TF401198: No project collection specified in the request.";e.UnsavedChangesWithNames="You have unsaved changes:";e.RequireOnPremiseDeploymentError="TF400915: This service is not available.";e.TestMailFailure="Error sending email message. Exception details: {0}";e.TfsAccountBoundToSubscriptionMessage="This TFS account is already bound to your subscription.";e.InvalidErrorParameter="Invalid error parameter";e.CreateFirstProject="Create your first team project";e.Board="Board";e.CreateProjectFailed="Create Project Failed";e.SendMailSpecifyToAddress="There must be at least one email address for To field.";e.AgoDays="{0} days ago";e.AgoADay="a day ago";e.AccountHomePage_ShowAboutTFSHosted="Display About Visual Studio Team Services";e.MoreCollectionProjects="More {0} projects...";e.XCode="XCode";e.FeatureEnablementSettings_Error_Link_Invalid_Admin="https://go.microsoft.com/fwlink/?LinkId=298890";e.JobFailed="TF400902: There was a failure executing the job. Job Id for the failed creation:{0}";e.HubGroupRelease="Release";e.AccountHomePage_ShowAboutTFSOnPerm="Display About Team Foundation Server";e.NewTeamProjectProjectPickerItem="New Team Project";e.ConfirmToDiscardEditedEmail="Leaving this page will discard the email. Do you want to exit?";e.InvalidContentType="The uploaded file must be an image.";e.FeatureEnablementSettings_Error_Missing="This feature cannot be used until a Team Foundation Administrator configures it for this team project.";e.FullOnPremProductName="Visual Studio Team Foundation Server 2017";e.ViewTaskBoard="View task board";e.TestMailMessage="This message was sent to verify TFS email settings.";e.CreateTeamProjectPartTitle="Team Project";e.FeedbackFeatureDescription="Solicit feedback";e.ServerTimeZone="Server: {0}";e.VisualStudio="Visual Studio";e.StakeholderMsdnEligibleReminderMessage="\u003cdiv class=\"stakeholder-license-message\"\u003e We could not verify your Visual Studio subscription so weâ€™ve downgraded you to Stakeholder. Please visit our \u003ca href=\"https://go.microsoft.com/fwlink/?LinkID=733421\u0026clcid=0x409\"\u003e\u003cb\u003etroubleshooting page\u003c/b\u003e\u003c/a\u003e for more details then click here to {0} \u003c/div\u003e";e.TeamHomeTeamsTitle="Teams";e.TeamFoundationServerName="Team Foundation Server 2015";e.TeamHomeCreateWorkItemLink="+ {0}";e.TrialFeatureUrl="https://go.microsoft.com/fwlink/?LinkID=325554";e.ExpandAllToolTip="Expand all";e.ProjectQuickStartTitle="Your Team Project\u0027s up";e.OpenInVisualStudioPartTitle="Open in Visual Studio";e.NavigationContextMenuProjectLabelTitleFormat="Project \u0027{0}\u0027";e.WelcomePageRecentItems="Recent projects and teams";e.FeedbackMenuHint="Feedback";e.NoResultsToDisplay="There are no results to display.";e.AdvancedBacklogManagementFeatureDescription="Advanced backlog and sprint planning tools.";e.LearnGitMessage="Learn how you can use the Git distributed version control system in your team projects.";e.ProjectQuickStartDesc="Kick-start your project with these tools and tips";e.GettingStartedViewOnlineHelp="Learn more, dig deeper";e.HubGroupSource="Code";e.NavigationRecentProjectsAndTeams="Recent projects and teams";e.InternalServerError="Internal server error:";e.ChartAuthoringFeatureDescription="Create customized charts to view and visualize your work item data.";e.AdminFeatureDescription="Administer account and team projects.";e.LearnMore="Learn more";e.PageTitleWithContent="{0} - Microsoft Team Foundation Server";e.SourceControlTitle="Source";e.Settings="Settings";e.StakeholderReminderLink="https://go.microsoft.com/fwlink/?LinkID=402656";e.EllipsisMenuTitle="Configure";e.NoFilesSelected="No files were selected to be uploaded.";e.InvalidEmailWithEmail="Please enter a valid email address ({0}).";e.PageTitleWithContent_Hosted="{0} - Visual Studio Team Services";e.TestMailTitle="Test Mail Settings";e.ResourceUsageBuildUnit="minutes";e.ResourceUsageBuildName="Build";e.PageNotFound="Page not found.";e.AddASearchFilter="Add a search filter";e.FeatureEnablementSettings_Error_LinkText_Invalid_Admin="Learn about how to correct your configuration";e.StakeholderReminderLinkText="Learn more";e.BuildFeatureName="Build";e.ProjectDoesNotExistOrNoAccess="TF400896: The project with guid {0} does not exist or you do not have access.";e.Application_TeamProjects="Team projects ({0})";e.WebApiUndefinedRequestError="An undefined error occurred while attempting to connect to the server. Status code {0}: {1}.";e.GettingStartedErrorCreatingCollection="TF400910: There was an error creating the collection. Contact our support team by visiting https://www.visualstudio.com/support-overview-vs";e.GoToProjectPortal="Go to project portal";e.Activities="Activities";e.UnsupportedBrowserWarningMessage="You are using an unsupported browser. For the best experience, please upgrade to a newer browser. \u003ca href=\"https://go.microsoft.com/fwlink/?LinkId=799814\" target=\"_blank\"\u003eLearn more\u003c/a\u003e";e.NavigationContentMenuItem_Team="Team";e.Application_SelectTeamProject="To get started, select the team project you want to connect to.";e.AddSearchFilterState="State:";e.RetrievingWorkItemTypes="Retrieving work item types...";e.NavigationViewUnknownTabErrorFormat="Could not find navigation tab with id: {0}.";e.ChooseProjectWizardStepLabel="Choose Project";e.WelcomePageViewOnlineHelpDescription="Access online help for Visual Studio Application Lifecycle Management and Team Foundation Server.";e.Security="Security";e.UnkownCompatibilityUrl="TF400907: The URL specified appears to be from an earlier version of Web Access.  The format was not recognized : {0}";e.ManageProjectMembers="Manage project members";e.BrowseAllTeams="Browse all";e.AdvancedPortfolioBacklogManagementFeatureName="Advanced portfolio management";e.EmailExceedsMaxBodySizeLimit="TF400582: The email body exceeds the maximum allowed size of {0} KB. Reduce the contents of the email body and try again.";e.Asterix="*";e.HubGroupHome="Home";e.HubGroupTest="Test";e.CodeFeatureName="Code";e.PinningBlankSlateMessage="Pin items to the homepage to display them here as tiles. You can pin work item queries, work item charts, build definitions and version control paths to the homepage.";e.ManageScheduleIterations="Manage schedule and iterations";e.UnsavedChangesMore="more...";e.BrowseTheMarketplace="Browse Marketplace";e.CreateProjectBladeTitle="Your new Team Project is almost ready.";e.AccountNameLabel="Account Name";e.FeatureEnablementSettings_Error_LinkText_Missing_Admin="Configure feature";e.PluginNotFound="TF400912: Could not find plugin with name \"{0}\".";e.GettingStartedProgressNotStarted="Scheduling collection creation...";e.CodeFeatureDescription="Code repository functionality.";e.FollowingErrors="The following error(s) occurred:";e.MoreProjectTeams="More {0} teams";e.FeatureEnablementSettings_Error_Invalid="TF400916: The current configuration is not valid for this feature. This feature cannot be used until a Team Foundation Administrator corrects the configuration.";e.NotAMemberOfATeam="You are not a member of a team.";e.ManageProjectGroups="Manage teams and project groups";e.TeamHomeManageTeams="Manage teams...";e.AccountNameCreateInfoMessage="This will be the account name on your vanity URL, i.e., accountname.visualstudio.com";e.GettingStartedAccountActive="The account is active and ready for use.  Please save the above Url for your records.";e.ExternalControlLoading="Loading...";e.BuildFeatureDescription="Build services.";e.TeamHomeShowLessMembers="Show less members";e.StakeholderExpiredLicenseReminderLinkText="Learn more";e.VersionControlLabel="Version Control";e.NavigationContextMenuHostedBackTo="Account home";e.TeamHomeActivitesTitle="Activities";e.TileEllipsisMenuTitle="Configure tile";e.ViewQueries="View queries";e.AgoLessThanAMinute="just now";e.ReleaseManagementFeatureDescription="Author release definitions, create and manage releases";e.NotSupportedBrowser="Your browser is not supported";e.ProjectCreationError="There was an error creating your project. Please {0}.";e.SendMailFrom="From";e.DefaultThemeName="Default";e.TileLoading="loading...";e.ChartEllipsisMenuTitle="Configure chart";e.ResourceUsageBlockedWithSubscription="Your account has used all the free quantity of this resource. Click Learn more above to enable paid resources.";e.Members="Members";e.ProcessTemplateProperty="Process template:";e.TeamHomePage_ShowHowTo="Display How to";e.ControlPanel="Control panel";e.TeamHomeLoadingMembers="Loading team members...";e.UserNeedsToBeTeamAdmin="User needs to be a team administrator to perform this operation.";e.AccountNameWatermark="Enter account name...";e.TrialModeReminderMessage="All features have been enabled during your trial. This trial will end {0}. \u003ca href=\u0027{1}\u0027 target=\u0027_blank\u0027\u003eLearn more\u003c/a\u003e.";e.SourceQuickStartBladeSubTitle="Use your favorite tool to publish your project";e.AdvancedBacklogManagementFeatureName="Advanced backlog and sprint planning tools";e.NavigationContentMenuItem_TeamProject="Project";e.MyFavorites="My favorites";e.AjaxRequestTimedOut="Ajax request has been timed out.";e.NavigationContextMenuOnPremBackTo="Server home";e.CloseBrowserToCompleteSignoutWarning="Sign out: close browser to complete sign out";e.TrialModeReminderMessage_MultipleDays="in \u003cb\u003e{0} days\u003c/b\u003e";e.ServerSettings="Server settings";e.GettingStartedTutorialFeedback="Make a suggestion";e.SendMailNoSubjectWarningTitle="Confirmation";e.AgoMonths="{0} months ago";e.HubGroupBuild="Build";e.HubGroupAdmin="Administration";e.YouAreAlmostThereMessagePart2="Click the {0}New Team Project{1} button below to create your first project. ";e.YouAreAlmostThereMessagePart3="The {0}beginnerâ€™s guide{1} has a step-by-step walkthrough on how to upload your source code, setup a build, and start managing your work.  Youâ€™re almost thereâ€¦";e.YouAreAlmostThereMessagePart1="Welcome to Visual Studio Team Services!";e.ImageOf="Image of {0}";e.HubGroupUsers="Users";e.NetworkConnectionUnavailable="TF400893: Unable to contact the server. This is most likely caused by a network error. Please check your connection and try again.";e.HubGroupRooms="Rooms";e.AdminFeatureName="Administer account";e.TrialFeatureExpiredUrl="https://go.microsoft.com/fwlink/?LinkID=328611";e.BuildTitle="Build";e.FeatureEnablementSettings_Error_Missing_Admin="This feature cannot be used until you configure it for this team project.";e.OpenWithVisualStudioTooltip="Open Visual Studio and connect Team Explorer to this project.";e.TeamFoundationServiceName="Visual Studio Team Services";e.ExtensionErrorBody="We were unable to load a TFS extension. To load this component, please ensure that you are able to access the following url: \u003cbr /\u003e\u003ca /\u003e";e.AccountTimeZone="Account: {0}";e.ManageAlerts="Alerts";e.OpenWithVisualStudio="Open with Visual Studio to connect";e.NewBacklogItem="New";e.ErrorSendEmail="TF400969: An error occurred while attempting to send the email. Retry at a later time.";e.NavigationAdminMenuItemFormat="Administer {0}";e.TeamSettings_ManualCorrectionStepsLinkText="correct your configuration manually";e.SendMailSubject="Subject";e.TeamHomeLoadingActivities="Loading activities...";e.TestManagementFeatureName="Web-based Test Case Management";e.PersonalExtensionsDisabledMessage="Personal extensions are disabled.";e.TeamContextNotFound="TF400909: There is no team context.";e.CollectionProjects="{0} projects";e.Project_Teams="{0} teams ({1})";e.RequiresVS2012="Requires Visual Studio 2013+";e.ScrumTemplateInfoMessage="Scrum is an iterative, incremental framework for project management and agile software development. This template includes work items and reports to help your Scrum team be successful.";e.TestManagementForExpressSkuFeatureDescription="Analyze test results and manage machine groups.";e.CreateTeamProjectNoSubError="No subscriptions available to create project edit scope";e.AgileBoardsFeatureName="Agile boards";e.TeamHomeViewBoard="View board";e.RemoveMRUTeamTitle="Remove from this list";e.SendMailWarning="Unable to send message to the following recipients: {0}\r\nPreferred Email address is not configured within the userâ€™s profile.";e.ProjectNameLabel="Name";e.TeamHomeViewBacklog="View backlog";e.InvalidEmailAddressFormat="The following email address is not valid: \u0027{0}\u0027. Please specify a valid email address in the form \u0027user@host\u0027 or \u0027Display name \u003cuser@host\u003e\u0027.";e.InvalidArgumentValue="Invalid argument value.";e.HubGroupWorkItems="Work";e.FirstProjectConfirmationHeader="Your new project, {0}, is ready!";e.ChartViewingFeatureName="Chart Viewing";e.Home="Home";e.PageTitleCollectionHome="{0} project collection";e.Save="Save";e.SendMailNotEnabled="Sending email is not enabled. Please contact your administrator.";e.EarlyAdopterModeReminderMessage_OneDay="Your account is an Early Adopter account. In \u003cb\u003e{0} day\u003c/b\u003e your account will revert to a standard account. \u003ca href=\u0027{1}\u0027 target=\u0027_blank\u0027\u003eLearn more\u003c/a\u003e.";e.TrialModeReminderMessage_OneDay="in \u003cb\u003e{0} day\u003c/b\u003e";e.ViewReports="View reports";e.ConfigureOptionsWizardStepLabel="Configure Options";e.AgoAnHour="an hour ago";e.ExtensionErrorAdditionalSteps="You can try checking your network connection and refreshing this page.";e.WelcomePageSubmitFeedbackTitle="Make a suggestion";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("VSS/Controls/Validation",["require","exports","VSS/Controls","VSS/Resources/VSS.Resources.Platform","VSS/Utils/Core","VSS/Utils/Date","VSS/Utils/Number","VSS/Utils/String","VSS/VSS","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r,u,f,e,o,s){function d(n,t,i){function u(t,i,u,f){u&&u!=="*"&&u!==n||f||r.push(i)}var r=[];return $(i||window.document.body).bind(h.EVENT_VALIDATE_STATUS,u),$(i||window.document.body).trigger(h.EVENT_VALIDATE,[n]),$(i||window.document.body).unbind(h.EVENT_VALIDATE_STATUS,u),r.length&&t&&$.each(r,function(n,i){t.push(i)}),r.length===0}var c=u.delegate,h=function(n){function t(r){if(n.call(this,r),this.getType()===t)throw new Error("You cannot instantiate an abstract type.");this.instanceId="val_"+i.getId()}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({invalidCssClass:"invalid",message:"Invalid input value!",group:"*",allowEmptyString:!1},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._bind("change",c(this,this.onChanged));this._onValidationRequiredDelegate=c(this,this.onValidationRequired);this._bind(window.document.body,t.EVENT_VALIDATE,this._onValidationRequiredDelegate,!0);this._options.bindtokeystrokes&&this._bind("keyup",c(this,this.onKeyUp))},t.prototype.dispose=function(){this._onValidationRequiredDelegate&&this._unbind(window.document.body,t.EVENT_VALIDATE,this._onValidationRequiredDelegate,!0);n.prototype.dispose.call(this)},t.prototype.getValue=function(){return this._element.val()},t.prototype.isValid=function(){return!0},t.prototype.getValidationGroup=function(){return this._options.group},t.prototype.getMessage=function(){var n=this._options.message;return n&&typeof n=="function"&&(n=n.call(this)),n},t.prototype.onKeyUp=function(){this.validate()},t.prototype.onChanged=function(){this.validate()},t.prototype.onValidationRequired=function(n,t){t&&t!=="*"&&t!==this._options.group||this.validate()},t.prototype.validate=function(){var n,i;this._disposed||(n=this._testEmptyString()||this.isValid(),i=this.getValidationGroup(),this._element.toggleClass(this._options.invalidCssClass,!n),this._fire(t.EVENT_VALIDATE_STATUS,[this,i,n]))},t.prototype._testEmptyString=function(){return this._options.allowEmptyString&&this.getValue()===""},t.optionsPrefix="validator",t.EVENT_VALIDATE="validate",t.EVENT_VALIDATE_STATUS="validate-status",t}(i.Enhancement),a,v,y,p,w,b,k,l;t.BaseValidator=h;s.initClassPrototype(h,{instanceId:null});a=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({message:"Input value cannot be empty!"},t))},t.prototype.isValid=function(){return $.trim(this.getValue())?!0:!1},t.optionsPrefix="requiredValidator",t}(h);t.RequiredValidator=a;i.Enhancement.registerEnhancement(a,".validate.required");v=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({message:"Out of range"},t))},t.prototype.isValid=function(){var n=this.getValue(),t=this._element.data("rangeValidator-min"),i=this._element.data("rangeValidator-max");return n>=t&&n<=i},t.prototype.getMessage=function(){var n=this.getValue(),t=this._element.data("rangeValidator-min"),i=this._element.data("rangeValidator-max");return n<t?"Input cannot be smaller than "+t:n>i?"Input cannot be greater than "+i:void 0},t.optionsPrefix="rangeValidator",t}(h);t.RangeValidator=v;i.Enhancement.registerEnhancement(v,".validate.range");y=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({message:"Input value doesn't match regex",testEmptyString:!0},t))},t.prototype.isValid=function(){var n,t;return(t=this._options.regex||this._element.data("regexValidator-regex"),t&&(n=this.getValue(),this._options.testEmptyString||$.trim(n)))?new RegExp(t).test(n):!0},t.prototype.getMessage=function(){return this._element.data("regexValidator-message")||this._options.message},t.optionsPrefix="regexValidator",t}(h);t.RegexValidator=y;i.Enhancement.registerEnhancement(y,".validate.regex");p=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({message:"Input value doesn't satisfy function",testEmptyString:!0,validate:function(){return!0}},t))},t.prototype.isValid=function(){var n,t;return(t=this._options.validate,typeof t=="function"&&(n=this.getValue(),this._options.testEmptyString||$.trim(n)))?t(n):!0},t.prototype.setValidate=function(n){this._options.validate=n},t.prototype.getMessage=function(){return this._element.data("customValidator-message")||this._options.message},t.optionsPrefix="customValidator",t}(h);t.CustomValidator=p;i.Enhancement.registerEnhancement(p,".validate.custom");w=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({message:"Input value must be a valid date",parseFormat:""},t))},t.prototype.isValid=function(){var t=$.trim(this.getValue()),n;if(t)n=f.parseDateString(t,this._options.parseFormat);else return!0;return n instanceof Date&&!isNaN(n.getTime())},t.prototype.getMessage=function(){return this._element.data("dateValidator-message")||this._options.message},t.optionsPrefix="dateValidator",t}(h);t.DateValidator=w;i.Enhancement.registerEnhancement(w,".validate.date");b=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.isValid=function(){var t=this.getValue(),n=this._getBounds();return this.isWithinBounds(t,n.max,n.min)},t.prototype.isWithinBounds=function(n,t,i){var u=e.parseLocale(n),f=!1,r=parseInt(""+u,10),o=parseFloat(""+u);return!isNaN(u)&&r===o&&isFinite(r)&&i<=r&&t>=r&&(f=!0),f},t.prototype.getMessage=function(){var n=this._getBounds();return o.format(r.Validation_IntegerRange,n.min,n.max)},t.prototype._getBounds=function(){var n,t;return n=this._options.minValue!==undefined?this._options.minValue:Number(this._element.data("integerRangeValidator-min")),t=this._options.maxValue!==undefined?this._options.maxValue:Number(this._element.data("integerRangeValidator-max")),{min:n,max:t}},t.optionsPrefix="integerRangeValidator",t}(h);t.IntegerRangeValidator=b;i.Enhancement.registerEnhancement(b,".validate.integerRange");k=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({message:o.format("Input cannot exceed {0} characters.",t.maxLength)},t))},t.prototype.isValid=function(){return this.getValue().length>this._options.maxLength?!1:!0},t.optionsPrefix="maxLengthValidator",t}(h);t.MaxLengthValidator=k;i.Enhancement.registerEnhancement(k,".validate.maxlength");l=function(n){function t(t){n.call(this,t);this._messages={};t.fixedHeight&&(this._fixedHeight=!0);t.singleMessage&&(this._singleMessage=!0);t.showAsWarning&&(this._showAsWarning=!0)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"validation-summary",group:"*"},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._bind(this._options.context||window.document.body,h.EVENT_VALIDATE_STATUS,c(this,this.onValidationStatus),!0)},t.prototype.onValidationStatus=function(n,t,i,r){delete this._messages[t.instanceId];i&&i!=="*"&&i!==this._options.group||(r||(this._messages[t.instanceId]=t.getMessage()),this._updateUI())},t.prototype.validate=function(){try{this._messages={};this._ignoreUIUpdate=!0;this._fire(this._options.context||window.document.body,h.EVENT_VALIDATE,[this._options.group])}finally{this._ignoreUIUpdate=!1}this._updateUI()},t.prototype._updateUI=function(){var n=this,t=!1,i;this._ignoreUIUpdate||(this._element.empty(),$.each(this._messages,function(i,r){return(t=!0,n._element.append($("<div />").text(r||"")),n._singleMessage)?!1:!0}),i=n._showAsWarning?"invalid-warning":"invalid",this._element.toggleClass(i,t),this._element.toggleClass("fixed-height",n._fixedHeight))},t}(i.Control);t.ValidationSummary=l;s.initClassPrototype(l,{_messages:null,_ignoreUIUpdate:!1,_fixedHeight:!1,_singleMessage:!1,_showAsWarning:!1});i.Enhancement.registerEnhancement(l,".validation-summary");t.validateGroup=d;s.tfsModuleLoaded("VSS.UI.Controls.Validation",t)});
define("VSS/Controls/Virtualization",["require","exports","VSS/Controls","VSS/Utils/Core","VSS/Utils/UI","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r,u){var f=r.delegate,e=u.domElem,o=function(n){function t(){n.apply(this,arguments);this._firstVisible=0;this._selectedIndex=-1;this._rowHeight=20;this._ignoreScrollEvent=!1;this._enableMouseOver=!0;this._prevMousePos="";this.visibleRowCount=1}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"virtualizing-list-view",maxRowCount:8,selectedIndex:-1},t))},t.prototype.initialize=function(){this._bind("click",f(this,this._onClick));this._itemsContainer=$(e("ul","items"));this._itemsContainer.attr("role","listbox");this._bind(this._itemsContainer,"mouseover",f(this,this._onMouseOver));this._bind(this._itemsContainer,"mousemove",f(this,this._onMouseMove));this._options.preventMouseDown&&this._bind(this._itemsContainer,"mousedown",function(n){return n.preventDefault()});this._bind(this._itemsContainer,u.BrowserCheckUtils.isFirefox()?"DOMMouseScroll":"mousewheel",f(this,this._onMouseWheel));this._element.append(this._itemsContainer);this._scrollContainer=$(e("div","scroller"));this._bind(this._scrollContainer,"scroll",f(this,this._onScroll));this._scrollSpacer=$(e("div","content-spacer"));this._scrollContainer.append(this._scrollSpacer);this._element.append(this._scrollContainer);this._dataSource=this._options.dataSource;this._selectedIndex=this._options.selectedIndex;this.update();this._enableMouseOver=!0;n.prototype.initialize.call(this)},t.prototype.update=function(){var t=this._dataSource.getCount(),n;this.visibleRowCount=Math.min(t,this._options.maxRowCount);this._selectedIndex>=0&&(this._selectedIndex=Math.min(this._selectedIndex,t-1));this._setVisibleBounds(this._selectedIndex);this._drawItems();n=this._itemsContainer.outerHeight();this._element.height(n);this._setupScrollbar(n)},t.prototype.scrollItemIntoView=function(n){this._setVisibleBounds(n);this._drawItems();this._updateScrollbar()},t.prototype.selectNext=function(n){var t=this._dataSource.nextIndex(this._selectedIndex,n?this.visibleRowCount:1,null);return t>=0?(this.setSelectedIndex(t),this._fireSelectionChanged(),!0):!1},t.prototype.selectPrev=function(n){var t=this._dataSource.nextIndex(this._selectedIndex,-(n?this.visibleRowCount:1),null);return t>=0?(this.setSelectedIndex(t),this._fireSelectionChanged(),!0):!1},t.prototype.getSelectedIndex=function(){return this._selectedIndex},t.prototype.getSelectedItem=function(){return this._itemsContainer.children("li.selected")},t.prototype.setSelectedIndex=function(n,t){this._selectedIndex!==n&&(this._selectedIndex=n,t||this.scrollItemIntoView(n))},t.prototype._setVisibleBounds=function(n){n=n||0;n<=this._firstVisible?this._firstVisible=Math.max(0,n):n>=this._firstVisible+this.visibleRowCount&&(this._firstVisible=Math.max(0,Math.min(n,this._dataSource.getCount()-this.visibleRowCount)));this._firstVisible=Math.max(0,Math.min(this._firstVisible,this._dataSource.getCount()-this.visibleRowCount))},t.prototype._createItem=function(n){var r=this._dataSource.getItemText(n)||"",t=$(e("li",this._options.itemCss));return t.attr({id:i.getId(),role:"option"}),r&&$.isFunction(this._options.getItemContents)?t.append(this._options.getItemContents(r)):t.text(r),this._options.setTitleOnlyOnOverflow?u.tooltipIfOverflow(t[0]):t.attr("title",r),t},t.prototype._drawItems=function(){var n,t;this._itemsContainer.empty();var r=this._options.createItem||this._createItem,i=this._firstVisible,u=Math.min(i+this.visibleRowCount,this._dataSource.getCount());for(n=i;n<u;n++)t=r.call(this,n),t.data("index",n),this._itemsContainer.append(t);this._updateItemStyles();this._enableMouseOver=!1},t.prototype._updateItemStyles=function(){var n=this._firstVisible,t=this._selectedIndex;this._itemsContainer.children("li").each(function(i){$(this).toggleClass("selected",i+n===t)})},t.prototype._setupScrollbar=function(n){var t=this._dataSource.getCount(),i=this.visibleRowCount<t;this._element.toggleClass("scroll",i);i&&(this._rowHeight=(n||this._itemsContainer.outerHeight())/this.visibleRowCount,this._scrollSpacer.height(this._rowHeight*t),this._updateScrollbar())},t.prototype._updateScrollbar=function(){try{this._ignoreScrollEvent=!0;this._scrollContainer.scrollTop(this._rowHeight*this._firstVisible)}finally{this._ignoreScrollEvent=!1}},t.prototype._onScroll=function(){var n=this._dataSource.getCount();return this._ignoreScrollEvent||(this._firstVisible=Math.max(0,Math.min(Math.floor(this._scrollContainer.scrollTop()/this._rowHeight),n-this.visibleRowCount)),this._drawItems()),!1},t.prototype._onMouseMove=function(n){var t=n.screenX+"-"+n.screenY;this._prevMousePos&&this._prevMousePos===t||(this._prevMousePos=t,this._enableMouseOver=!0)},t.prototype._onMouseOver=function(n){var i=$(n.target),t;this._enableMouseOver&&(this._enableMouseOver=!1,t=i.closest("li"),t.length&&(this._selectedIndex=t.data("index"),this._updateItemStyles()))},t.prototype._onMouseWheel=function(n){var t=u.getWheelDelta(n);if(t!==0)return this._firstVisible=Math.max(0,Math.min(this._firstVisible+(t>0?-1:1),this._dataSource.getCount()-this.visibleRowCount)),this.scrollItemIntoView(this._firstVisible),!1},t.prototype._onClick=function(n){var r=$(n.target),t=r.closest("li"),i;if(t.length){if(i=t.data("index"),this._options.itemClick&&this._options.itemClick.call(this,n,i,r,t)===!1)return!1;this.setSelectedIndex(i);this._updateItemStyles();this._fireSelectionChanged(!0)}},t.prototype._fireSelectionChanged=function(n){this._options.selectionChange&&this._options.selectionChange.call(this,this._selectedIndex,n)},t}(i.BaseControl);t.VirtualizingListView=o});
define("VSS/Controls/Combos",["require","exports","VSS/Controls","VSS/Utils/Culture","VSS/Diag","VSS/Events/Services","VSS/Resources/VSS.Resources.Platform","VSS/Utils/Accessibility","VSS/Utils/Core","VSS/Utils/Date","VSS/Utils/String","VSS/Utils/UI","VSS/Controls/Validation","VSS/Controls/Virtualization","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){function ut(n,t){var i=$.extend({},n);return t&&$.each(t,function(n,t){delete i[t]}),i}var p=s.delegate,k=l.domElem,y=l.KeyCode,rt,ft,d,g,nt,yt,et,w,tt,it,vt,b,ot,st,ht,ct,lt,at;(function(n){function t(t){var i=$("<div/>").attr("id",n._PROBE_ID).css("position","absolute").css("left","-50000px").css("top","-50000px").css("width","9em").css("height","18ex").css("overflow","auto").appendTo(t);return $("<div><\/div>").css("width","3in").css("height","36ex").appendTo(i),i}function i(t){t=t||$(document.body);var i=t.children("#"+n._PROBE_ID);return i.length===0&&(i=n._createProbe(t)),i}function r(){return n._getProbe().width()/9}function u(){return n._getProbe().height()/18}function f(){return $("div",n._getProbe()).width()/3}function e(t){var i=n._getProbe(t);return i.width()-i[0].clientWidth}function o(t){var i=n._getProbe(t);return i.height()-i[0].clientHeight}function s(t){t=t.toLowerCase();var i=parseInt(t,10);return t.indexOf("px")>0?i=Math.round(parseFloat(t)):t.indexOf("em")>0?i=Math.round(parseFloat(t)*n.getUnitEm()):t.indexOf("ex")>0?i=Math.round(parseFloat(t)*n.getUnitEx()):t.indexOf("in")>0?i=Math.round(parseFloat(t)*n.getUnitIn()):t.indexOf("mm")>0?i=Math.round(parseFloat(t)*n.getUnitIn()/25.4):t.indexOf("cm")>0&&(i=Math.round(parseFloat(t)*n.getUnitIn()/2.54)),i}n._PROBE_ID="tfs-measurement-probe";n._createProbe=t;n._getProbe=i;n.getUnitEm=r;n.getUnitEx=u;n.getUnitIn=f;n.getScrollbarWidth=e;n.getScrollbarHeight=o;n.getUnitAsPixel=s})(rt||(rt={}));t.extendWithout=ut;ft=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(i.BaseDataSource);t.ListDataSource=ft;d=function(){function n(n,t){this.combo=n;this._options=t||{};this._onForceHideDropPopupDelegate=p(this,this.onForceHideDropPopup)}return n.prototype.initialize=function(){this._options.source&&this.setSource(this._options.source)},n.prototype.dispose=function(){this.hideDropPopup()},n.prototype.setMode=function(n){this._options.mode=n},n.prototype.canType=function(){return!0},n.prototype.getAriaAutocomplete=function(){return this._options.autoComplete===!1?"none":"both"},n.prototype.getAriaDescription=function(){return null},n.prototype.getValue=function(){return null},n.prototype.getDropPopup=function(){return this._dropPopup},n.prototype.getDataSource=function(){return this._dataSource},n.prototype.getDropOptions=function(){return $.extend({combo:this.combo,anchor:this.combo.getElement(),host:this.combo.getElement(),width:this.getDropWidth(),dropElementAlign:"left-top",dropBaseAlign:"left-bottom",dataSource:this._dataSource,setTitleOnlyOnOverflow:this._options.setTitleOnlyOnOverflow},this._options.dropOptions)},n.prototype.getDropWidth=function(){return this.combo.getElement().innerWidth()},n.prototype.showDropPopup=function(){var t=this._options.dropControlType,n;return(this._dropPopup&&this.hideDropPopup(),t)?(n=this.getDropOptions(),n.width=this.getDropWidth(),this._attachGlobalEvents(),this._dropPopup=i.BaseControl.createIn(t,n.host||$(document.body),n),this._options.dropShow&&this._options.dropShow(this._dropPopup),!0):!1},n.prototype.hideDropPopup=function(){if(this._dropPopup){if(this._detachGlobalEvents(),!this._options.dropHide||this._options.dropHide(this._dropPopup))return this._dropPopup.dispose(),this._dropPopup=null,!0;this._dropPopup=null}return!1},n.prototype.toggleDropDown=function(){this._dropPopup?this.hideDropPopup():this.showDropPopup()},n.prototype.isDropVisible=function(){return Boolean(this._dropPopup)},n.prototype.setSource=function(n){this._dataSource&&this._dataSource.setSource(n)},n.prototype.getSelectedIndex=function(){return-1},n.prototype.setSelectedIndex=function(){},n.prototype.getText=function(){return this.combo.getInputText()},n.prototype.setText=function(n,t){typeof n!="undefined"&&this.combo.setInputText(n,t)},n.prototype.upKey=function(){},n.prototype.downKey=function(n){if(n.altKey&&this.showDropPopup())return!1},n.prototype.pageUpKey=function(){},n.prototype.pageDownKey=function(){},n.prototype.leftKey=function(){},n.prototype.rightKey=function(){},n.prototype.keyDown=function(){},n.prototype.keyPress=function(){},n.prototype.keyUp=function(){},n.prototype.onForceHideDropPopup=function(){this.hideDropPopup()},n.prototype.getItemText=function(n,t){return $.isFunction(this._options.getItemText)?this._options.getItemText(this._dataSource.getItem(n,!0)):this._dataSource.getItemText(n,t)},n.prototype._attachGlobalEvents=function(){this.combo._bind(this.combo.getElement().parents(),"scroll resize",this._onForceHideDropPopupDelegate);f.getService().attachEvent("dialog-move",this._onForceHideDropPopupDelegate)},n.prototype._detachGlobalEvents=function(){this.combo._unbind(this.combo.getElement().parents(),"scroll resize",this._onForceHideDropPopupDelegate);f.getService().detachEvent("dialog-move",this._onForceHideDropPopupDelegate)},n}();t.BaseComboBehavior=d;g=function(n){function t(t){n.call(this,t);this.combo=this._options.combo}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"combo-drop-popup"},t))},t.prototype.initialize=function(){this._bind("mousedown",p(this,this._onMouseDown));this.setPosition();n.prototype.initialize.call(this)},t.prototype.setPosition=function(){l.Positioning.position(this.getElement(),this._options.anchor,{elementAlign:this._options.dropElementAlign,baseAlign:this._options.dropBaseAlign});this.getElement().css("opacity","1")},t.prototype.getSelectedIndex=function(){return-1},t.prototype.getSelectedValue=function(){return""},t.prototype.getSelectedItem=function(){return undefined},t.prototype.setSelectedValue=function(){},t.prototype.selectNext=function(){return!1},t.prototype.selectPrev=function(){return!1},t.prototype.update=function(){},t.prototype.dispose=function(){var i=this,t;if(!this.isDisposed())if(t=this.getElement(),t[0]&&!t[0].style.transition)n.prototype.dispose.call(this);else this.getElement().css("opacity","0").on("transitionend",function(){n.prototype.dispose.call(i)})},t.prototype._onMouseDown=function(){this.combo.blockBlur()},t}(i.BaseControl);t.BaseComboDropPopup=g;nt={},function(n){n.ListType="list";n.DateTimeType="date-time";n.MultiValueType="multi-value";n.TreeType="tree";n.TreeSearchType="treesearch"}(yt=t.ComboTypeOptionsConstants||(t.ComboTypeOptionsConstants={}));et=function(n){function t(){n.apply(this,arguments);this._currentText=""}return __extends(t,n),t.registerBehavior=function(n,t){nt[n]=t},t.attachBehavior=function(n,t){var i=nt[n._options.type];return i=n._options.type?nt[n._options.type]:d,i?new i(n,t):null},t.prototype.initializeOptions=function(t){var u=this,i,r;t=$.extend({allowEdit:!0,type:"list",treeLevel:1,mode:"drop",dropWidth:"dynamic",dropCount:8,invalidCss:"invalid",disabledCss:"disabled",dropButtonHoverCss:"hover",inputCss:undefined,coreCssClass:"combo input-text-box",enabled:!0},t);i=t.dropHide;t.dropHide=function(n){var t=!0;return i&&(t=i(n)),t&&u.updateAriaAttributes(!1),t};r=t.dropShow;t.dropShow=function(n){r&&r(n);u.updateAriaAttributes(!0)};n.prototype.initializeOptions.call(this,t)},t.prototype._dispose=function(){this._behavior&&($.isFunction(this._behavior.dispose)&&this._behavior.dispose(),this._behavior=null);n.prototype._dispose.call(this)},t.prototype._createIn=function(t){n.prototype._createIn.call(this,t);this._input=$(k("input")).attr("type","text");this._options.id&&this._input.attr("id",this._options.id+"_txt");typeof this._options.value!="undefined"&&(this._input.val(this._options.value),this._currentText=this.getInputText());this._decorate()},t.prototype._enhance=function(n){this._createElement();this._input=n;n.after(this.getElement());this._decorate();this._currentText=this.getInputText()},t.prototype.initialize=function(){this._ensureBehavior();n.prototype.initialize.call(this);this._input.attr({"aria-expanded":"false",role:"combobox"})},t.prototype.getBehavior=function(){return this._behavior},t.prototype.getText=function(){return this._behavior.getText()},t.prototype.setText=function(n,t){this._behavior.setText(n,t)},t.prototype.getDropButton=function(){return this._dropButton},t.prototype.getInput=function(){return this._input},t.prototype.getInputText=function(){return this._input.val()},t.prototype.setInputText=function(n,t){this._input.val()!==n&&this._input.val(n);this._options.setTitleOnlyOnOverflow||this._input.attr("title",n);t?this.fireChangeIfNecessary(n):this._currentText=n;this.updateAriaActiveDescendant()},t.prototype.getSelectedIndex=function(){return this._behavior.getSelectedIndex()},t.prototype.setSelectedIndex=function(n,t){this._behavior.setSelectedIndex(n,t)},t.prototype.getValue=function(){return this._behavior.getValue()},t.prototype.fireChangeIfNecessary=function(n){return typeof n=="undefined"&&(n=this.getText()),this._currentText!==n?(this._currentText=n,this._options.setTitleOnlyOnOverflow||this._input.attr("title",n),this._fireChange()):void 0},t.prototype.toggleDropDown=function(){this._behavior.toggleDropDown();this._input.focus();this._fire("dropDownToggled",{isDropVisible:this.isDropVisible(),target:this.getElement()})},t.prototype.showDropPopup=function(){this._behavior.showDropPopup();this._input.focus()},t.prototype.hideDropPopup=function(){return this._behavior.hideDropPopup()},t.prototype.isDropVisible=function(){return this._behavior.isDropVisible()},t.prototype.isBlockingBlur=function(){return this._blockBlur},t.prototype.blockBlur=function(){this._blockBlur=!0;this.delayExecute("blockBlur",200,!0,function(){this.cancelBlockBlur()})},t.prototype.cancelBlockBlur=function(){this._blockBlur=!1;this.cancelDelayedFunction("blockBlur")},t.prototype._onInputKeyDown=function(n){if(this._options.onKeyDown&&this._options.onKeyDown.call(this,n),this._behavior.keyDown(n)===!1)return!1;switch(n.keyCode){case y.BACKSPACE:if(!this._options.allowEdit)return n.stopPropagation(),n.preventDefault(),!1;break;case y.PAGE_UP:return this._options.enabled?this._behavior.pageUpKey(n):!1;case y.UP:return this._options.enabled?this._behavior.upKey(n):!1;case y.PAGE_DOWN:return this._options.enabled?this._behavior.pageDownKey(n):!1;case y.DOWN:return this._options.enabled?this._behavior.downKey(n):!1;case y.LEFT:return this._options.enabled?this._behavior.leftKey(n):!1;case y.RIGHT:return this._options.enabled?this._behavior.rightKey(n):!1;case y.TAB:this.cancelBlockBlur();break;case y.ENTER:case y.ESCAPE:if(this.fireChangeIfNecessary(),this.hideDropPopup())return!1;break;default:if(!this._behavior.canType())return!1}},t.prototype.setTextSelection=function(n){var t=this._input[0],i;t.setSelectionRange?t.setSelectionRange(n,t.value.length):t.createTextRange&&(i=t.createTextRange(),i.moveStart("character",n),i.select())},t.prototype.setSource=function(n){this._behavior.setSource(n)},t.prototype.getEnabled=function(){return this._options.enabled===!0},t.prototype.setEnabled=function(n){this._options.enabled=n===!0;this._updateStyles()},t.prototype.getMode=function(){return this._options.mode},t.prototype.setMode=function(n){this._options.mode=n;this._behavior.setMode(n);this._updateStyles()},t.prototype.setType=function(n){this._options.type!==n&&(this.hideDropPopup(),this.getElement().removeClass(this._options.type),this._options.type=n,this._ensureBehavior(),this._updateStyles())},t.prototype.getComboType=function(){return this._options?this._options.type:null},t.prototype.setInvalid=function(n){this.getElement().toggleClass(this._options.invalidCss,n);this._input.attr(t.invalidAttribute,n?"true":"false")},t.prototype.isValid=function(){return c.ignoreCaseComparer(this._input.attr(t.invalidAttribute),"true")!==0},t.prototype._ensureBehavior=function(){var n,t;if(this._behavior&&($.isFunction(this._behavior.dispose)&&this._behavior.dispose(),this._behavior=null),this._behavior=w.attachBehavior(this,this._options),!this._behavior)throw new Error(c.format("Unsupported combo behavior '{0}'.",this._options.type));this._behavior.initialize();this._input.attr("aria-autocomplete",this._behavior.getAriaAutocomplete());n=this._behavior.getAriaDescription();n?(this._ariaDescription&&this._ariaDescription.remove(),t=String(i.getId()),this._ariaDescription=$("<div />").attr("id",t).hide().text(n).appendTo(this._element),this._input.attr("aria-describedby",t)):this._input.attr("aria-describedby",null)},t.prototype._decorate=function(){var u=this,t=this._options,i=this.getElement(),n=this._input,r;i.val=function(){return arguments.length?u.setText(arguments[0],!1):u.getText()};n.attr("autocomplete","off");this._bind("mousedown",p(this,this._onMouseDown));this._bind(n,"keydown",p(this,this._onInputKeyDown));this._bind(n,"keypress",p(this,this._onInputKeyPress));this._bind(n,"keyup",p(this,this._onInputKeyUp));this._bind(n,"focus",p(this,this._onInputFocus));this._bind(n,"blur",p(this,this._onInputBlur));this._bind(n,"click",p(this,this._onInputClick));this._bind(n,"focus",function(){i.addClass("focus")});this._bind(n,"blur",function(){i.removeClass("focus")});t.allowEdit||(n.attr("readonly","readonly"),i.addClass("no-edit"));t.inputCss&&n.addClass(t.inputCss);t.placeholderText&&n.attr("placeholder",t.placeholderText);n.bind("change input",function(){return u.fireChangeIfNecessary()});this._options.setTitleOnlyOnOverflow&&l.tooltipIfOverflow(n[0]);t.noDropButton&&i.addClass("no-background");r=$(k("div","wrap"));r.append(n);this._options.label&&this._options.id&&r.append($(k("label","hidden")).append(this._options.label).attr("For",n.attr("id")));t.iconCss&&($(k("div","preWrapIcon")).addClass(t.iconCss).appendTo(i),r.addClass("withIcon"));i.append(r);this._dropButton=$(k("div","drop"));this._dropButton.attr("role","button");this._bind(this._dropButton,"mouseenter",function(){$(this).addClass(t.dropButtonHoverCss)});this._bind(this._dropButton,"mouseleave",function(){$(this).removeClass(t.dropButtonHoverCss)});this._bind(this._dropButton,"click",p(this,this._onDropButtonClick));i.append(this._dropButton);this._updateStyles()},t.prototype._updateStyles=function(){var n=this.getElement(),i=this._input,t,r;n.addClass(this._options.type);this._dropButton.removeClass(c.localeIgnoreCaseComparer(this._options.type,"date-time")===0?"bowtie-icon bowtie-chevron-down-light":"bowtie-icon bowtie-calendar");this._dropButton.addClass(c.localeIgnoreCaseComparer(this._options.type,"date-time")===0?"bowtie-icon bowtie-calendar":"bowtie-icon bowtie-chevron-down-light");t=this._options.enabled;t?i.removeAttr("disabled"):i.attr("disabled","disabled");this._options.allowEdit?i.removeAttr("readonly"):i.attr("readonly","readonly");i.toggleClass(this._options.disabledCss,!t);n.children("div").toggleClass(this._options.disabledCss,!t);t?n.removeAttr("disabled"):n.attr("disabled");r=t&&this._options.mode==="drop";n.toggleClass("drop",r&&!this._options.noDropButton);n.toggleClass("text",!r)},t.prototype._onDropButtonClick=function(){return this.toggleDropDown(),!1},t.prototype._onInputClick=function(){return!this._options.allowEdit&&this._options.enabled&&this.toggleDropDown(),!1},t.prototype._onInputFocus=function(){if(!this._onInputFocusInProgress)try{this._onInputFocusInProgress=!0;this._blockBlur||this._options.disableTextSelectOnFocus||this._input.select();$.isFunction(this._options.focus)&&this._options.focus.apply(this,arguments)}finally{this._onInputFocusInProgress=!1}},t.prototype._onInputBlur=function(){this._disposed||(this.fireChangeIfNecessary(),this._blockBlur?this._input.focus(10):this.hideDropPopup(),$.isFunction(this._options.blur)&&this._options.blur.apply(this,arguments))},t.prototype._onMouseDown=function(){this.blockBlur()},t.prototype._onInputKeyPress=function(n){return this._behavior.keyPress(n)},t.prototype._onInputKeyUp=function(n){var t=this._behavior.keyUp(n);return this.fireChangeIfNecessary(),t},t.prototype.updateAriaAttributes=function(n){var t,i;n===void 0&&(n=this.isDropVisible());n?(this._input.attr({"aria-expanded":"true"}),this.updateAriaActiveDescendant(),t=this._behavior.getDataSource(),t&&(i=t.getCount(),o.announce(c.format(e.ComboBoxItemCountAnnouncement,i)))):this._input.attr({"aria-expanded":"false","aria-owns":null,"aria-activedescendant":null})},t.prototype.updateAriaActiveDescendant=function(){var n=this._behavior.getDropPopup(),t=n&&n.getSelectedItem();this._input.attr("aria-activedescendant",t?t.attr("id"):null)},t.invalidAttribute="aria-invalid",t.enhancementTypeName="tfs.combo",t}(i.Control);t.ComboO=et;w=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(et);t.Combo=w;i.Enhancement.registerJQueryWidget(w,"comboList",{type:"list"});i.Enhancement.registerJQueryWidget(w,"comboTree",{type:"tree"});tt=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({itemCss:""},t))},t.prototype.initialize=function(){this._dataSource=this._options.dataSource;this._initializeVirtualization();n.prototype.initialize.call(this)},t.prototype._initializeVirtualization=function(){this.virtualizingListView=i.Enhancement.enhance(v.VirtualizingListView,this.getElement(),$.extend(ut(this._options,["coreCssClass"]),{maxRowCount:this._options.dropCount}));this.virtualizingListView.getElement().attr("role","listbox")},t.prototype.selectPrev=function(n){return this.virtualizingListView.selectPrev(n)},t.prototype.selectNext=function(n){return this.virtualizingListView.selectNext(n)},t.prototype.getSelectedIndex=function(){return this.virtualizingListView.getSelectedIndex()},t.prototype.getSelectedValue=function(){return this._dataSource.getItemText(this.virtualizingListView.getSelectedIndex())},t.prototype.setSelectedValue=function(n){var t=n?this._dataSource.getItemIndex(n):-1;this.virtualizingListView.setSelectedIndex(t)},t.prototype.getSelectedItem=function(){return this.virtualizingListView.getSelectedItem()},t.prototype.getDataSource=function(){return this._dataSource},t.prototype.update=function(){this.virtualizingListView.update()},t}(g);t.ComboListDropPopup=tt;it=function(n){function t(t,i){n.call(this,t,$.extend({dropControlType:tt},i))}return __extends(t,n),t.prototype.initialize=function(){this._dataSource=this._createDataSource();n.prototype.initialize.call(this)},t.prototype.setSource=function(t){n.prototype.setSource.call(this,t);this._maxItemLength=null},t.prototype.getDropOptions=function(){return $.extend(n.prototype.getDropOptions.call(this),{selectedIndex:this._dataSource.getItemIndex(this.combo.getText()),selectionChange:p(this,this._dropSelectionChanged)})},t.prototype.getValue=function(){return this.getText()},t.prototype.getMaxItemLength=function(){var i,r,n,t;if(this._maxItemLength===null){for(i=this._dataSource.getCount(!0),n=0,t=0;t<i;t++)r=this.getItemText(t,!0),n=Math.max(r.length,n);this._maxItemLength=n}return this._maxItemLength},t.prototype.getDropWidth=function(){var i=n.prototype.getDropWidth.call(this),t=this.getMaxItemLength()*rt.getUnitEx();return t*=1.2,this._options.maxAutoExpandDropWidth&&t>i?Math.min(Math.max(this._options.maxAutoExpandDropWidth,i),t):Math.max(i,t)},t.prototype.getSelectedIndex=function(n,t){return this._dataSource.getItemIndex(n||this.getText(),!1,t)},t.prototype.setSelectedIndex=function(n,t){this._setSelectedIndex(n,t)},t.prototype.setText=function(t,i){var r;i&&(r=t!==this.getText());n.prototype.setText.call(this,t,i);i&&r&&this._options.indexChanged&&this._options.indexChanged.call(this,this.getSelectedIndex(t))},t.prototype.upKey=function(t){if(this._options.mode!=="text")return n.prototype.upKey.call(this,t)===!1?!1:this.selectPrev()},t.prototype.downKey=function(t){if(this._options.mode!=="text")return n.prototype.downKey.call(this,t)===!1?!1:this.selectNext()},t.prototype.pageUpKey=function(t){if(this._options.mode!=="text")return n.prototype.pageUpKey.call(this,t)===!1?!1:this.selectPrev(!0)},t.prototype.pageDownKey=function(t){if(this._options.mode!=="text")return n.prototype.pageDownKey.call(this,t)===!1?!1:this.selectNext(!0)},t.prototype.keyDown=function(n){if(this._options.mode!=="text")if(n.keyCode===229)this._enableAutoFill=!1;else if(n.ctrlKey&&(n.keyCode===89||n.keyCode===90))return!1},t.prototype.keyPress=function(){if(this._options.mode!=="text")return this._enableAutoFill=typeof this._options.autoComplete=="undefined"?!0:this._options.autoComplete,!0},t.prototype.keyUp=function(n){var t;if(this._options.mode!=="text")return t=n.keyCode||n.charCode,this._options.enableFilter===!0&&(t>=47||t===y.SPACE||t===y.BACKSPACE||t===y.DELETE)&&this._applyFilter(),this._enableAutoFill&&((t>=47||t===y.SPACE)&&this._tryAutoFill(),this._enableAutoFill=!1),this._options.keyUp&&this._options.keyUp.call(this),!0},t.prototype.selectPrev=function(n){var i=this.getDropPopup(),t;if(i){if(i.selectPrev(n))return!1}else if(!n&&(t=this._dataSource.nextIndex(this.getSelectedIndex(null,!0),-1,!0),t>=0))return this._setSelectedIndex(t,!0),!1},t.prototype.selectNext=function(n){var i=this.getDropPopup(),t;if(i){if(i.selectNext(n))return!1}else if(!n&&(t=this._dataSource.nextIndex(this.getSelectedIndex(null,!0),1,!0),t>=0))return this._setSelectedIndex(t,!0),!1},t.prototype._createDataSource=function(){return new ft(this._options)},t.prototype._dropSelectionChanged=function(n,t){this.setText(this.getItemText(n,!1),!0);t&&this.hideDropPopup()},t.prototype._setSelectedIndex=function(n,t){this.setText(this.getItemText(n,!0),t)},t.prototype._tryAutoFill=function(){var n,t,i,r;u.logTracePoint("Combo._tryAutoFill.start");t=this.combo.getText();i=this._dataSource.getItemIndex(t,!0,!0);i>=0&&(n=this.getItemText(i,!0));n&&(this.combo.setText(n,!0),this.combo.setTextSelection(t.length));r=this.getDropPopup();r&&r.setSelectedValue(n);u.logTracePoint("Combo._tryAutoFill.complete")},t.prototype._applyFilter=function(){u.logTracePoint("Combo._applyFilter.start");this._filterData(this.combo.getText());var n=this.getDropPopup();n&&n.update();u.logTracePoint("Combo._applyFilter.complete")},t.prototype._filterData=function(n){var r=this,t,i;n?(t=this._dataSource.getItemIndexes(n,!0,!0),i=t.map(function(n){return r._dataSource.getItem(n,!0)}),this._dataSource.setItems(i,this._dataSource.getItems(!0))):this._dataSource.setItems(this._dataSource.getItems(!0))},t}(d);t.ComboListBehavior=it;w.registerBehavior("list",it);vt=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({message:"Input value is not allowed!"},t))},t.prototype.isValid=function(){var t=$.trim(this.getValue()),n;return t&&(n=i.Enhancement.getInstance(w,this.getElement()),n)?n.getSelectedIndex()>=0:!0},t}(a.BaseValidator);t.ComboControlValidator=vt;b=function(){function n(n){this._setDate(n||new Date)}return n.toGregorian=function(n,t,i){var u=r.getDateTimeFormat().Calendar.convert;return u?u.toGregorian(n,t,i):new Date(n,t,i)},n.fromGregorian=function(n){var t=r.getDateTimeFormat().Calendar.convert;if(t)return t.fromGregorian(n)},n.prototype.getBaseDate=function(){return this._baseDate},n.prototype.setTime=function(n){n=n instanceof Date?n:new Date(n);this._setDate(n)},n.prototype.getTime=function(){return this.getBaseDate().getTime()},n.prototype.getDay=function(){return this.getBaseDate().getDay()},n.prototype.getFullYear=function(n){return n===!0&&this._convertedDate?this._convertedDate[0]:this.getBaseDate().getFullYear()},n.prototype.getMonth=function(n){return n===!0&&this._convertedDate?this._convertedDate[1]:this.getBaseDate().getMonth()},n.prototype.getDate=function(n){return n===!0&&this._convertedDate?this._convertedDate[2]:this.getBaseDate().getDate()},n.prototype.jumpToMonthStart=function(){var i=this.getFullYear(),r=this.getMonth(),u=this.getDate(),t=new n(new Date(i,r,u,12));return this.setTime(t.getTime()-n.DAY_IN_MILLISECONDS*(t.getDate(!0)-1)),this},n.prototype.jumpToWeekStart=function(){var t=r.getDateTimeFormat().FirstDayOfWeek,i=(n.DAYS_IN_A_WEEK-t+this.getDay())%n.DAYS_IN_A_WEEK;return this.setTime(this.getTime()-i*n.DAY_IN_MILLISECONDS),this},n.prototype.nextDay=function(){return this.setTime(this.getTime()+n.DAY_IN_MILLISECONDS),this},n.prototype.prevMonth=function(){return this._increment(0,-1),this},n.prototype.nextMonth=function(){return this._increment(0,1),this},n.prototype.prevYear=function(){return this._increment(-1,0),this},n.prototype.nextYear=function(){return this._increment(1,0),this},n.prototype.equals=function(n){return this.getFullYear()===n.getFullYear()&&this.getMonth()===n.getMonth()&&this.getDate()===n.getDate()},n.prototype._setDate=function(t){this._baseDate=t;this._convertedDate=n.fromGregorian(t)},n.prototype._increment=function(t,i){var r=this.getMonth(!0),u=this.getFullYear(!0);i>0?++r>11&&(r=0,u++):i<0&&--r<0&&(r=11,u--);u+=t;this.setTime(n.toGregorian(u,r,1))},n.DAY_IN_MILLISECONDS=864e5,n.DAYS_IN_A_WEEK=7,n}();ot=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"date-panel",canTakeFocus:!1},t))},t.prototype.initialize=function(){this._selectedDate=this._options.selectedDate;this._date=this._selectedDate||h.getNowInUserTimeZone();this._bind("click",p(this,this._onClick));this._bind("keydown",p(this,this._onKeyDown));this._draw(this._date,"prev-month");n.prototype.initialize.call(this)},t.prototype.prevMonth=function(){var n=new b(this._date);this._date=n.prevMonth().getBaseDate();this._draw(this._date,"prev-month")},t.prototype.nextMonth=function(){var n=new b(this._date);this._date=n.nextMonth().getBaseDate();this._draw(this._date,"next-month")},t.prototype.prevYear=function(){var n=new b(this._date);this._date=n.prevYear().getBaseDate();this._draw(this._date,"prev-year")},t.prototype.nextYear=function(){var n=new b(this._date);this._date=n.nextYear().getBaseDate();this._draw(this._date,"next-year")},t.prototype.selectDate=function(n){this.setSelectedDate(n);this._options.onSelectDate&&this._options.onSelectDate()},t.prototype.setSelectedDate=function(n){this._selectedDate=this._date=n;this._draw(this._selectedDate);this._fireChange()},t.prototype.getSelectedDate=function(){return this._selectedDate},t.prototype.getSelectedItem=function(){return this._$selectedItem},t.prototype._draw=function(n,t){var f=this.getElement(),o=this._options.todayFormat||"d",u=$("<table />").attr("cellSpacing",0).attr("cellPadding",0).attr("border",0),i=$("<tr />").addClass("quick-nav"),r;$("<a />").addClass("prev-month").attr("href","#").attr("tabindex",-1).append($("<span/>").addClass("icon icon-drop-left")).appendTo($("<td/>").addClass("prev-month").appendTo(i));r=$("<td/>").addClass("month-year").appendTo(i);r.text(h.localeFormat(n,"y",!0));$("<a />").addClass("next-month").attr("href","#").attr("tabindex",-1).append($("<span/>").addClass("icon icon-drop-right")).appendTo($("<td/>").addClass("next-month").appendTo(i));u.append(i);i=$("<tr />");r=$("<td />").attr("colspan",6).addClass("days");r.append(this._drawCalendarTable(n));i.append(r);u.append(i);i=$("<tr />");r=$("<td />").attr("colspan",6).addClass("legend");$("<a />").addClass("today").attr("href","#").attr("tabindex",-1).append($("<span/>").addClass("today")).append(c.format(e.TodayTitle,h.localeFormat(new Date,o))).appendTo(r);i.append(r);u.append(i);f.empty().append(u);t&&this._options.canTakeFocus&&$("."+t).focus()},t.prototype._drawCalendarTable=function(n){var l=h.getTodayInUserTimeZone(),s=r.getDateTimeFormat(),u=new b(n),a=u.getMonth(!0),o,e,f,c,t;for(u.jumpToMonthStart(),u.jumpToWeekStart(),o=$("<table />").attr("cellSpacing",0).attr("border",0),e=$("<tr />").addClass("day-names"),f=0;f<7;f++)t=$("<td />"),t.text(s.ShortestDayNames[(s.FirstDayOfWeek+f)%b.DAYS_IN_A_WEEK]),e.append(t);for(o.append(e),f=0;f<6;f++){for(e=$("<tr />").addClass("days"),c=0;c<b.DAYS_IN_A_WEEK;c++)t=$("<td />").addClass("date-cell").attr({id:i.getId(),"aria-label":h.localeFormat(u.getBaseDate(),s.ShortDatePattern,!0)}),$("<a />").addClass("date").attr("href","#").attr("tabindex",-1).data("date",u.getTime()).text(u.getDate(!0)).appendTo(t),u.getMonth(!0)!==a&&t.addClass("other-month"),u.equals(l)&&t.addClass("today"),this._selectedDate instanceof Date?u.equals(this._selectedDate)&&(t.addClass("selected"),this._options.canTakeFocus&&t.focus(),this._$selectedItem=t):u.equals(n)&&(this._options.canTakeFocus&&t.focus(),t.addClass("selected")),e.append(t),u.nextDay();o.append(e)}return o},t.prototype._onKeyDown=function(n){return n.keyCode===y.ENTER||n.keyCode===y.SPACE?this._onClick(n):n.keyCode===y.LEFT||n.keyCode===y.RIGHT||n.keyCode===y.UP||n.keyCode===y.DOWN?!1:void 0},t.prototype._onClick=function(n){var r=$(n.target),t=r.closest("a"),i;return t.length?(t.hasClass("prev-month")?this.prevMonth():t.hasClass("next-month")?this.nextMonth():t.hasClass("prev-year")?this.prevYear():t.hasClass("next-year")?this.nextYear():t.hasClass("today")?this.selectDate(h.getNowInUserTimeZone()):t.hasClass("date")&&this.selectDate(new Date(t.data("date"))),!1):(i=r.closest(".date-cell"),i.length)?(this.selectDate(new Date(i.find("a").data("date"))),!1):void 0},t}(i.BaseControl);t.DatePanel=ot;st=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initialize=function(){this._selectedDate=this._options.selectedDate;this._datePanel=i.BaseControl.createIn(ot,this.getElement(),$.extend(ut(this._options,["coreCssClass"]),{change:p(this,this._onChange)}));n.prototype.initialize.call(this)},t.prototype.getSelectedDate=function(){return this._selectedDate},t.prototype.getSelectedItem=function(){return this._datePanel.getSelectedItem()},t.prototype.setSelectedDate=function(n){this._selectedDate=n;this._datePanel&&this._datePanel.setSelectedDate(n)},t.prototype._onChange=function(){return this._selectedDate=this._datePanel.getSelectedDate(),this._fireChange(),!1},t}(g);t.ComboDateDropPopup=st;ht=function(n){function t(t,i){n.call(this,t,$.extend({dropControlType:st,dateTimeFormat:r.getDateTimeFormat().ShortDatePattern},i))}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this._timeValue=this._options.defaultTimeOfDay||0},t.prototype.canType=function(){return!this.isDropVisible()},t.prototype.getAriaAutocomplete=function(){return"none"},t.prototype.getAriaDescription=function(){return e.ComboDateScreenReaderHelp},t.prototype.getValue=function(){return this.getSelectedDate()},t.prototype.getDropOptions=function(){var i=this,t=this.getSelectedDate();return!t&&this._options.getInitialDate&&(t=this._options.getInitialDate(this.combo)),$.extend(n.prototype.getDropOptions.call(this),{dropElementAlign:"right-top",dropBaseAlign:"right-bottom",selectedDate:t,onSelectDate:function(){i.hideDropPopup()},change:p(this,this._onChange)})},t.prototype.getDropWidth=function(){return undefined},t.prototype.getSelectedDate=function(){var i=$.trim(this.combo.getText()),n=null,t;return i&&(n=h.parseDateString(i,this._options.parseFormat,!0),n&&(t=new Date(n.getFullYear(),n.getMonth(),n.getDate()),this._options.defaultTimeOfDay&&n.getTime()===t.getTime()?(n=new Date(n.getTime()+this._options.defaultTimeOfDay),this.setText(h.localeFormat(n,this._options.dateTimeFormat,!0),!1)):this._timeValue=n-t)),n},t.prototype.setSelectedDate=function(n,t){t===void 0&&(t=!0);n=new Date(n.getFullYear(),n.getMonth(),n.getDate());n=new Date(n.getTime()+(this._timeValue||0));this.setText(h.localeFormat(n,this._options.dateTimeFormat,!0),t)},t.prototype.upKey=function(){var n=this.getDropPopup();if(n)return n.setSelectedDate(this._addDays(this._getSelectedDate(),-7)),!1},t.prototype.downKey=function(t){if(n.prototype.downKey.call(this,t)===!1)return!1;var i=this.getDropPopup();if(i)return i.setSelectedDate(this._addDays(this._getSelectedDate(),7)),!1},t.prototype.pageUpKey=function(){var t=this.getDropPopup(),n;if(t)return n=this._getSelectedDate(),t.setSelectedDate(this._addDays(n,-1*this._getMonthLength(n.getMonth()-1,n.getFullYear()))),!1},t.prototype.pageDownKey=function(){var t=this.getDropPopup(),n;if(t)return n=this._getSelectedDate(),t.setSelectedDate(this._addDays(n,this._getMonthLength(n.getMonth(),n.getFullYear()))),!1},t.prototype.leftKey=function(){var n=this.getDropPopup();if(n)return n.setSelectedDate(this._addDays(this._getSelectedDate(),-1)),!1},t.prototype.rightKey=function(){var n=this.getDropPopup();if(n)return n.setSelectedDate(this._addDays(this._getSelectedDate(),1)),!1},t.prototype._onChange=function(){var t=this.getDropPopup(),n=t.getSelectedDate();return n&&this.setSelectedDate(n),!1},t.prototype._getSelectedDate=function(){var n=this.getDropPopup();return n.getSelectedDate()||new Date},t.prototype._addDays=function(n,t){var i=new Date;return i.setTime(n.getTime()+t*864e5),i},t.prototype._getMonthLength=function(n,t){n=(n+12)%12+1;switch(n){case 4:case 6:case 9:case 11:return 30;case 2:if(t%4==0){var i=new Date(t,1,29);if(i.getMonth()===1)return 29}return 28;default:return 31}},t}(d);t.ComboDateBehavior=ht;w.registerBehavior("date-time",ht);i.Enhancement.registerJQueryWidget(w,"comboDateTime",{type:"date-time"});ct=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({type:"date-time"},t))},t}(w);t.DatePicker=ct;i.Enhancement.registerJQueryWidget(ct,"datePicker");lt=function(n){function t(t){n.call(this,t);this._checkStates={};this._options.id||(this._options.id="cmvdp_"+i.getId())}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({cssClass:"multi-value",createItem:p(this,this._createItem),itemClick:p(this,this._onItemClick)},t))},t.prototype.initialize=function(){var t=this.combo.getText().split(this._options.sepChar),i=this;$.each(t,function(n,t){t=$.trim(t);t&&(i._checkStates[t]=!0)});n.prototype.initialize.call(this)},t.prototype.getCheckedItems=function(){var n=this;return $.map(this._dataSource.getItems(),function(t){if(n._checkStates[t])return t})},t.prototype.getValue=function(){return this.getCheckedItems().join(this._options.joinChar||this._options.sepChar+" ")},t.prototype.toggleCheckbox=function(n){var r=this._options.id+"_cb"+n,t,i;i=this._dataSource.getItemText(n);t=$("#"+r);t.prop("checked")?(t.prop("checked",!1),this._checkStates[i]=!1):(t.prop("checked",!0),this._checkStates[i]=!0)},t.prototype._createItem=function(n){var t=this._dataSource.getItemText(n),r=this._options.id+"_cb"+n,i=$(k("li",this._options.nodeCss)),u=$("<input />").data("value",t).attr("type","checkbox").attr("id",r).data("index",n).appendTo(i);return this._checkStates[t]&&u.prop("checked",!0),i.append($(k("label")).attr("for",r).text(t||"")),i},t.prototype._onItemClick=function(n,t,i,r){var f,u,e=this._dataSource.getItemText(t);f=Boolean(this._checkStates[e]);u=Boolean(r.find("input").prop("checked"));this._checkStates[e]=u;f!==u&&this._fireChange()},t}(tt);t.ComboMultiValueDropPopup=lt;at=function(n){function t(i,r){n.call(this,i,$.extend({dropControlType:lt,sepChar:t.Default_Seperate_Char,joinChar:t.Default_Join_Char},r))}return __extends(t,n),t.prototype.canType=function(){return!this.isDropVisible()},t.prototype.getValue=function(){var n=this.getDropPopup();return n.getCheckedItems()},t.prototype.getDropOptions=function(){return $.extend(n.prototype.getDropOptions.call(this),{sepChar:this._options.sepChar,joinChar:this._options.joinChar,selectedIndex:-1,selectionChange:!1,change:p(this,this._onChange)})},t.prototype.keyDown=function(n){var t=this.getDropPopup(),i;t&&n.keyCode===y.SPACE&&(i=t.getSelectedIndex(),i>=0&&(t.toggleCheckbox(i),this.setText(t.getValue(),!0)))},t.prototype._onChange=function(){var n=this.getDropPopup();return this.setText(n.getValue(),!0),!1},t.Default_Seperate_Char=",",t.Default_Join_Char=", ",t}(it);t.ComboMultiValueBehavior=at;w.registerBehavior("multi-value",at)});
define("VSS/Controls/Panels",["require","exports","VSS/Ajax","VSS/Controls","VSS/Diag","VSS/Resources/VSS.Resources.Platform","VSS/Controls/StatusIndicator","VSS/Utils/Core","VSS/Utils/UI","VSS/VSS","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r,u,f,e,o,s,h){var c=s.domElem,y=h.getErrorMessage,l=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({collapsed:!0,iconCss:"icon",iconCollapseCss:"bowtie-icon bowtie-toggle-tree-collapsed",iconExpandCss:"bowtie-icon bowtie-toggle-tree-expanded"},t))},t.prototype._swapDefaultToggleIconForCustom=function(n){this._$toggleIcon.remove();this._$toggleIcon=n;this._header.addClass(t._defaultToggleIconOverrideClass)},t.prototype._createControl=function(){var t=this,n=this._options;return this._isDisabled=!1,n.hoverCss&&this.getElement().hover(function(){$(this).addClass(n.hoverCss)},function(){$(this).removeClass(n.hoverCss)}),this._header=$(c("div","tfs-collapsible-header")).attr({tabindex:"0",role:"button","aria-expanded":String(this.isExpanded())}),n.headerCss&&this._header.addClass(n.headerCss),this._header.bind("click.CollapsiblePanel",function(){return t.toggleExpandedState()}),this._header.bind("keydown",function(n){if(n.target===n.currentTarget&&n.keyCode===s.KeyCode.ENTER&&!s.KeyUtils.isModifierKey(n))return t.toggleExpandedState()}),this._header.bind("mouseenter focus",function(n){return n.preventDefault(),t._header.addClass("focus"),!1}),this._header.bind("mouseleave blur",function(n){return n.preventDefault(),t._header.removeClass("focus"),!1}),this._$toggleIcon=$(c("span","tfs-collapsible-collapse")).addClass(n.iconCss).addClass(n.collapsed?n.iconCollapseCss:n.iconExpandCss),n.collapseCss&&this._$toggleIcon.addClass(n.collapseCss),this._header.append(this._$toggleIcon),this.getElement().append(this._header),this._content=$(c("div","tfs-collapsible-content")),n.contentCss&&this._content.addClass(n.contentCss),n.collapsed&&this._content.hide(),this.getElement().append(this._content),this.getElement()},t.prototype._createIn=function(t){n.prototype._createIn.call(this,t);this._createControl()},t.prototype._enhance=function(n){if(this._options.collapsed=n.hasClass("collapsed"),this._createElement(),this._createControl(),n.after(this.getElement()),this.appendContent(n),this._options.headerText)this.appendHeaderText(this._options.headerText);else if(this._options.headerContent)this.appendHeader(this._options.headerContent),this._options.customToggleIcon&&this._swapDefaultToggleIconForCustom(this._options.customToggleIcon);else{var t=n.attr("title");t&&(n.hasClass("header")&&(n.removeClass("header"),this._header.addClass("header")),this.appendHeader(t))}},t.prototype.replaceHeaderTextIfPresent=function(n){return $("span.tfs-collapsible-text",this._header).text(n)},t.prototype.appendHeaderText=function(n){this._header.attr("title",n);var t=$("<span/>").text(n).addClass("tfs-collapsible-text");return(this._options.headingLevel===undefined||this._options.headingLevel>0)&&t.attr({role:"heading","aria-level":this._options.headingLevel?String(this._options.headingLevel):"2"}),this.appendHeader(t)},t.prototype.appendHeader=function(n){return this._header.append(n),this},t.prototype.appendContent=function(n){var i=this._options,t;return $.isFunction(n)?i.collapsed?(this._dynamicContents||(this._dynamicContents=[]),this._dynamicContents.push(n)):t=n.call(this):t=n,t&&(this._content.append(t),this.getElement().removeClass("collapsed")),this},t.prototype.isExpanded=function(){return this._options.collapsed?!1:!0},t.prototype.expand=function(){this.isExpanded()||this.toggleExpandedState()},t.prototype.collapse=function(){this.isExpanded()&&this.toggleExpandedState()},t.prototype.toggleExpandedState=function(){var i,o,n=this._options,r,u=this._content,f=this._dynamicContents,e;if(this._isDisabled)return!1;if(n.collapsed=!n.collapsed,r=this._$toggleIcon,r.removeClass(n.iconCollapseCss+" "+n.iconExpandCss),r.addClass(n.collapsed?n.iconCollapseCss:n.iconExpandCss),this._header.attr("aria-expanded",String(!n.collapsed)),n.collapsed)u.hide(),n.expandCss&&this.getElement().removeClass(n.expandCss),this._fire(t.EVENT_CONTENT_COLLAPSED);else{if(f){for(i=0,o=f.length;i<o;i++)e=f[i],$.isFunction(e)&&u.append(e.apply());this._dynamicContents=null}u.show();n.expandCss&&this.getElement().addClass(n.expandCss);this._fire(t.EVENT_CONTENT_EXPANDED)}if(this._options.onToggleCallback&&$.isFunction(this._options.onToggleCallback))this._options.onToggleCallback(this.isExpanded());return!1},t.prototype.setDisabled=function(n){this._isDisabled!=n&&(n?(this._header.addClass("disabled"),this._$toggleIcon.hide(),this._header.removeAttr("tabindex")):(this._header.removeClass("disabled"),this._$toggleIcon.show(),this._header.attr("tabindex","0")),this._isDisabled=n)},t.prototype.isCollapsiblePanelDisabled=function(){return this._isDisabled},t.EVENT_CONTENT_EXPANDED="collapsible-panel-expanded",t.EVENT_CONTENT_COLLAPSED="collapsible-panel-collapsed",t.enhancementTypeName="tfs.collapsiblepanel",t._defaultToggleIconOverrideClass="custom-toggle-icon",t}(r.Control),a,v;t.CollapsiblePanel=l;r.Enhancement.registerJQueryWidget(l,"collapsible");r.Enhancement.registerEnhancement(l,".tfs-collapsible");a=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({cssClass:"ajax-panel",replaceContent:!0,cache:!0},t))},t.prototype.initialize=function(){var t=this._options.url;n.prototype.initialize.call(this);t&&this.beginLoad(t,this._options.urlParams,this._options.success,this._options.error)},t.prototype._dispose=function(){this._cancelPendingLoad();n.prototype._dispose.call(this)},t.prototype.beginLoad=function(n,t,s,h){var l=this,c,a;u.logTracePoint("AjaxPanel.beginLoad.start");this._cancelPendingLoad();c=new o.Cancelable(this);this._cancelable=c;this.getElement().empty();this._options.showStatusIndicator!==!1&&(a=r.BaseControl.createIn(e.StatusIndicator,this.getElement(),{center:!0,imageClass:"big-status-progress",message:f.Loading}),a.start());this._element.attr("aria-busy","true");i.issueRequest(n,{type:"GET",data:t,dataType:"html",traditional:!0,cache:this._options.cache}).then(c.wrap(function(n){l.onLoadCompleted(n);$.isFunction(s)&&s.call(self,n)}),c.wrap(function(n){var t;$.isFunction(h)&&(t=h.call(self,n)===!0);l.onLoadError(n,t)}))},t.prototype.onLoadCompleted=function(n){this.getElement()&&this._options.replaceContent&&(this.getElement().empty(),this.getElement().html(n),r.Enhancement.ensureEnhancements(this.getElement()));this._element.removeAttr("aria-busy");u.logTracePoint("AjaxPanel.beginLoad.complete")},t.prototype.onLoadError=function(n,t){t||this.showError(n);this._element.removeAttr("aria-busy");u.logTracePoint("AjaxPanel.beginLoad.complete")},t.prototype.showError=function(n){this.getElement().empty();$(c("div","error")).appendTo(this.getElement()).text(y(n))},t.prototype._cancelPendingLoad=function(){this._cancelable&&(this._cancelable.cancel(),this._cancelable=null)},t.enhancementTypeName="tfs.ajaxPanel",t}(r.Control);t.AjaxPanelO=a;v=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(a);t.AjaxPanel=v});
/*!
 * jQuery UI Core 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
(function(n){typeof define=="function"&&define.amd?define("jQueryUI/core",["jquery"],n):n(jQuery)})(function(n){function t(t,r){var u,f,e,o=t.nodeName.toLowerCase();return"area"===o?(u=t.parentNode,f=u.name,!t.href||!f||u.nodeName.toLowerCase()!=="map")?!1:(e=n("img[usemap='#"+f+"']")[0],!!e&&i(e)):(/^(input|select|textarea|button|object)$/.test(o)?!t.disabled:"a"===o?t.href||r:r)&&i(t)}function i(t){return n.expr.filters.visible(t)&&!n(t).parents().addBack().filter(function(){return n.css(this,"visibility")==="hidden"}).length}n.ui=n.ui||{};n.extend(n.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});n.fn.extend({scrollParent:function(t){var i=this.css("position"),u=i==="absolute",f=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=n(this);return u&&t.css("position")==="static"?!1:f.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return i==="fixed"||!r.length?n(this[0].ownerDocument||document):r},uniqueId:function(){var n=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&n(this).removeAttr("id")})}});n.extend(n.expr[":"],{data:n.expr.createPseudo?n.expr.createPseudo(function(t){return function(i){return!!n.data(i,t)}}):function(t,i,r){return!!n.data(t,r[3])},focusable:function(i){return t(i,!isNaN(n.attr(i,"tabindex")))},tabbable:function(i){var r=n.attr(i,"tabindex"),u=isNaN(r);return(u||r>=0)&&t(i,!u)}});n("<a>").outerWidth(1).jquery||n.each(["Width","Height"],function(t,i){function f(t,i,r,u){return n.each(e,function(){i-=parseFloat(n.css(t,"padding"+this))||0;r&&(i-=parseFloat(n.css(t,"border"+this+"Width"))||0);u&&(i-=parseFloat(n.css(t,"margin"+this))||0)}),i}var e=i==="Width"?["Left","Right"]:["Top","Bottom"],r=i.toLowerCase(),u={innerWidth:n.fn.innerWidth,innerHeight:n.fn.innerHeight,outerWidth:n.fn.outerWidth,outerHeight:n.fn.outerHeight};n.fn["inner"+i]=function(t){return t===undefined?u["inner"+i].call(this):this.each(function(){n(this).css(r,f(this,t)+"px")})};n.fn["outer"+i]=function(t,e){return typeof t!="number"?u["outer"+i].call(this,t):this.each(function(){n(this).css(r,f(this,t,!0,e)+"px")})}});n.fn.addBack||(n.fn.addBack=function(n){return this.add(n==null?this.prevObject:this.prevObject.filter(n))});n("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(n.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,n.camelCase(i)):t.call(this)}}(n.fn.removeData));n.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());n.fn.extend({focus:function(t){return function(i,r){return typeof i=="number"?this.each(function(){var t=this;setTimeout(function(){n(t).focus();r&&r.call(t)},i)}):t.apply(this,arguments)}}(n.fn.focus),disableSelection:function(){var n="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(n+".ui-disableSelection",function(n){n.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(t!==undefined)return this.css("zIndex",t);if(this.length)for(var i=n(this[0]),r,u;i.length&&i[0]!==document;){if(r=i.css("position"),(r==="absolute"||r==="relative"||r==="fixed")&&(u=parseInt(i.css("zIndex"),10),!isNaN(u)&&u!==0))return u;i=i.parent()}return 0}});n.ui.plugin={add:function(t,i,r){var u,f=n.ui[t].prototype;for(u in r)f.plugins[u]=f.plugins[u]||[],f.plugins[u].push([i,r[u]])},call:function(n,t,i,r){var u,f=n.plugins[t];if(f&&(r||n.element[0].parentNode&&n.element[0].parentNode.nodeType!==11))for(u=0;u<f.length;u++)n.options[f[u][0]]&&f[u][1].apply(n.element,i)}}});
/*!
 * jQuery UI Widget 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
(function(n){typeof define=="function"&&define.amd?define("jQueryUI/widget",["jquery"],n):n(jQuery)})(function(n){var i=0,t=Array.prototype.slice;return n.cleanData=function(t){return function(i){for(var r,u,f=0;(u=i[f])!=null;f++)try{r=n._data(u,"events");r&&r.remove&&n(u).triggerHandler("remove")}catch(e){}t(i)}}(n.cleanData),n.widget=function(t,i,r){var s,f,u,o,h={},e=t.split(".")[0];return t=t.split(".")[1],s=e+"-"+t,r||(r=i,i=n.Widget),n.expr[":"][s.toLowerCase()]=function(t){return!!n.data(t,s)},n[e]=n[e]||{},f=n[e][t],u=n[e][t]=function(n,t){if(!this._createWidget)return new u(n,t);arguments.length&&this._createWidget(n,t)},n.extend(u,f,{version:r.version,_proto:n.extend({},r),_childConstructors:[]}),o=new i,o.options=n.widget.extend({},o.options),n.each(r,function(t,r){if(!n.isFunction(r)){h[t]=r;return}h[t]=function(){var n=function(){return i.prototype[t].apply(this,arguments)},u=function(n){return i.prototype[t].apply(this,n)};return function(){var i=this._super,f=this._superApply,t;return this._super=n,this._superApply=u,t=r.apply(this,arguments),this._super=i,this._superApply=f,t}}()}),u.prototype=n.widget.extend(o,{widgetEventPrefix:f?o.widgetEventPrefix||t:t},h,{constructor:u,namespace:e,widgetName:t,widgetFullName:s}),f?(n.each(f._childConstructors,function(t,i){var r=i.prototype;n.widget(r.namespace+"."+r.widgetName,u,i._proto)}),delete f._childConstructors):i._childConstructors.push(u),n.widget.bridge(t,u),u},n.widget.extend=function(i){for(var e=t.call(arguments,1),f=0,o=e.length,r,u;f<o;f++)for(r in e[f])u=e[f][r],e[f].hasOwnProperty(r)&&u!==undefined&&(i[r]=n.isPlainObject(u)?n.isPlainObject(i[r])?n.widget.extend({},i[r],u):n.widget.extend({},u):u);return i},n.widget.bridge=function(i,r){var u=r.prototype.widgetFullName||i;n.fn[i]=function(f){var s=typeof f=="string",o=t.call(arguments,1),e=this;return s?this.each(function(){var t,r=n.data(this,u);return f==="instance"?(e=r,!1):r?!n.isFunction(r[f])||f.charAt(0)==="_"?n.error("no such method '"+f+"' for "+i+" widget instance"):(t=r[f].apply(r,o),t!==r&&t!==undefined?(e=t&&t.jquery?e.pushStack(t.get()):t,!1):void 0):n.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+f+"'")}):(o.length&&(f=n.widget.extend.apply(null,[f].concat(o))),this.each(function(){var t=n.data(this,u);t?(t.option(f||{}),t._init&&t._init()):n.data(this,u,new r(f,this))})),e}},n.Widget=function(){},n.Widget._childConstructors=[],n.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=n(r||this.defaultElement||this)[0];this.element=n(r);this.uuid=i++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=n();this.hoverable=n();this.focusable=n();r!==this&&(n.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(n){n.target===r&&this.destroy()}}),this.document=n(r.style?r.ownerDocument:r.document||r),this.window=n(this.document[0].defaultView||this.document[0].parentWindow));this.options=n.widget.extend({},this.options,this._getCreateOptions(),t);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:n.noop,_getCreateEventData:n.noop,_create:n.noop,_init:n.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(n.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:n.noop,widget:function(){return this.element},option:function(t,i){var e=t,r,u,f;if(arguments.length===0)return n.widget.extend({},this.options);if(typeof t=="string")if(e={},r=t.split("."),t=r.shift(),r.length){for(u=e[t]=n.widget.extend({},this.options[t]),f=0;f<r.length-1;f++)u[r[f]]=u[r[f]]||{},u=u[r[f]];if(t=r.pop(),arguments.length===1)return u[t]===undefined?null:u[t];u[t]=i}else{if(arguments.length===1)return this.options[t]===undefined?null:this.options[t];e[t]=i}return this._setOptions(e),this},_setOptions:function(n){for(var t in n)this._setOption(t,n[t]);return this},_setOption:function(n,t){return this.options[n]=t,n==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,r){var f,u=this;typeof t!="boolean"&&(r=i,i=t,t=!1);r?(i=f=n(i),this.bindings=this.bindings.add(i)):(r=i,i=this.element,f=this.widget());n.each(r,function(r,e){function o(){if(t||u.options.disabled!==!0&&!n(this).hasClass("ui-state-disabled"))return(typeof e=="string"?u[e]:e).apply(u,arguments)}typeof e!="string"&&(o.guid=e.guid=e.guid||o.guid||n.guid++);var s=r.match(/^([\w:-]*)\s*(.*)$/),h=s[1]+u.eventNamespace,c=s[2];c?f.delegate(c,h,o):i.bind(h,o)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;t.unbind(i).undelegate(i);this.bindings=n(this.bindings.not(t).get());this.focusable=n(this.focusable.not(t).get());this.hoverable=n(this.hoverable.not(t).get())},_delay:function(n,t){function r(){return(typeof n=="string"?i[n]:n).apply(i,arguments)}var i=this;return setTimeout(r,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function(t){n(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){n(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function(t){n(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){n(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,r){var u,f,e=this.options[t];if(r=r||{},i=n.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],f=i.originalEvent,f)for(u in f)u in i||(i[u]=f[u]);return this.element.trigger(i,r),!(n.isFunction(e)&&e.apply(this.element[0],[i].concat(r))===!1||i.isDefaultPrevented())}},n.each({show:"fadeIn",hide:"fadeOut"},function(t,i){n.Widget.prototype["_"+t]=function(r,u,f){typeof u=="string"&&(u={effect:u});var o,e=u?u===!0||typeof u=="number"?i:u.effect||i:t;u=u||{};typeof u=="number"&&(u={duration:u});o=!n.isEmptyObject(u);u.complete=f;u.delay&&r.delay(u.delay);o&&n.effects&&n.effects.effect[e]?r[t](u):e!==t&&r[e]?r[e](u.duration,u.easing,f):r.queue(function(i){n(this)[t]();f&&f.call(r[0]);i()})}}),n.widget});
/*!
 * jQuery UI Button 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/button/
 */
(function (n) { typeof define == "function" && define.amd ? define("jQueryUI/button",["jquery", "./core", "./widget"], n) : n(jQuery) })(function (n) { var t, i = "ui-button ui-widget ui-state-default ui-corner-all", r = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only", f = function () { var t = n(this); setTimeout(function () { t.find(":ui-button").button("refresh") }, 1) }, u = function (t) { var i = t.name, r = t.form, u = n([]); return i && (i = i.replace(/'/g, "\\'"), u = r ? n(r).find("[name='" + i + "'][type=radio]") : n("[name='" + i + "'][type=radio]", t.ownerDocument).filter(function () { return !this.form })), u }; return n.widget("ui.button", { version: "1.11.4", defaultElement: "<button>", options: { disabled: null, text: !0, label: null, icons: { primary: null, secondary: null } }, _create: function () { this.element.closest("form").unbind("reset" + this.eventNamespace).bind("reset" + this.eventNamespace, f); typeof this.options.disabled != "boolean" ? this.options.disabled = !!this.element.prop("disabled") : this.element.prop("disabled", this.options.disabled); this._determineButtonType(); this.hasTitle = !!this.buttonElement.attr("title"); var e = this, r = this.options, o = this.type === "checkbox" || this.type === "radio", s = o ? "" : "ui-state-active"; r.label === null && (r.label = this.type === "input" ? this.buttonElement.val() : this.buttonElement.html()); this._hoverable(this.buttonElement); this.buttonElement.addClass(i).attr("role", "button").bind("mouseenter" + this.eventNamespace, function () { r.disabled || this === t && n(this).addClass("ui-state-active") }).bind("mouseleave" + this.eventNamespace, function () { r.disabled || n(this).removeClass(s) }).bind("click" + this.eventNamespace, function (n) { r.disabled && (n.preventDefault(), n.stopImmediatePropagation()) }); this._on({ focus: function () { this.buttonElement.addClass("ui-state-focus") }, blur: function () { this.buttonElement.removeClass("ui-state-focus") } }); o && this.element.bind("change" + this.eventNamespace, function () { e.refresh() }); this.type === "checkbox" ? this.buttonElement.bind("click" + this.eventNamespace, function () { if (r.disabled) return !1 }) : this.type === "radio" ? this.buttonElement.bind("click" + this.eventNamespace, function () { if (r.disabled) return !1; n(this).addClass("ui-state-active"); e.buttonElement.attr("aria-pressed", "true"); var t = e.element[0]; u(t).not(t).map(function () { return n(this).button("widget")[0] }).removeClass("ui-state-active").attr("aria-pressed", "false") }) : (this.buttonElement.bind("mousedown" + this.eventNamespace, function () { if (r.disabled) return !1; n(this).addClass("ui-state-active"); t = this; e.document.one("mouseup", function () { t = null }) }).bind("mouseup" + this.eventNamespace, function () { if (r.disabled) return !1; n(this).removeClass("ui-state-active") }).bind("keydown" + this.eventNamespace, function (t) { if (r.disabled) return !1; (t.keyCode === n.ui.keyCode.SPACE || t.keyCode === n.ui.keyCode.ENTER) && n(this).addClass("ui-state-active") }).bind("keyup" + this.eventNamespace + " blur" + this.eventNamespace, function () { n(this).removeClass("ui-state-active") }), this.buttonElement.is("a") && this.buttonElement.keyup(function (t) { t.keyCode === n.ui.keyCode.SPACE && n(this).click() })); this._setOption("disabled", r.disabled); this._resetButton() }, _determineButtonType: function () { var n, t, i; this.type = this.element.is("[type=checkbox]") ? "checkbox" : this.element.is("[type=radio]") ? "radio" : this.element.is("input") ? "input" : "button"; this.type === "checkbox" || this.type === "radio" ? (n = this.element.parents().last(), t = "label[for='" + this.element.attr("id") + "']", this.buttonElement = n.find(t), this.buttonElement.length || (n = n.length ? n.siblings() : this.element.siblings(), this.buttonElement = n.filter(t), this.buttonElement.length || (this.buttonElement = n.find(t))), this.element.addClass("ui-helper-hidden-accessible"), i = this.element.is(":checked"), i && this.buttonElement.addClass("ui-state-active"), this.buttonElement.prop("aria-pressed", i)) : this.buttonElement = this.element }, widget: function () { return this.buttonElement }, _destroy: function () { this.element.removeClass("ui-helper-hidden-accessible"); this.buttonElement.removeClass(i + " ui-state-active " + r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()); this.hasTitle || this.buttonElement.removeAttr("title") }, _setOption: function (n, t) { if (this._super(n, t), n === "disabled") { this.widget().toggleClass("ui-state-disabled", !!t); this.element.prop("disabled", !!t); t && (this.type === "checkbox" || this.type === "radio" ? this.buttonElement.removeClass("ui-state-focus") : this.buttonElement.removeClass("ui-state-focus ui-state-active")); return } this._resetButton() }, refresh: function () { var t = this.element.is("input, button") ? this.element.is(":disabled") : this.element.hasClass("ui-button-disabled"); t !== this.options.disabled && this._setOption("disabled", t); this.type === "radio" ? u(this.element[0]).each(function () { n(this).is(":checked") ? n(this).button("widget").addClass("ui-state-active").attr("aria-pressed", "true") : n(this).button("widget").removeClass("ui-state-active").attr("aria-pressed", "false") }) : this.type === "checkbox" && (this.element.is(":checked") ? this.buttonElement.addClass("ui-state-active").attr("aria-pressed", "true") : this.buttonElement.removeClass("ui-state-active").attr("aria-pressed", "false")) }, _resetButton: function () { if (this.type === "input") { this.options.label && this.element.val(this.options.label); return } var i = this.buttonElement.removeClass(r), e = n("<span><\/span>", this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(i.empty()).text(), t = this.options.icons, f = t.primary && t.secondary, u = []; t.primary || t.secondary ? (this.options.text && u.push("ui-button-text-icon" + (f ? "s" : t.primary ? "-primary" : "-secondary")), t.primary && i.prepend("<span class='ui-button-icon-primary ui-icon " + t.primary + "'><\/span>"), t.secondary && i.append("<span class='ui-button-icon-secondary ui-icon " + t.secondary + "'><\/span>"), this.options.text || (u.push(f ? "ui-button-icons-only" : "ui-button-icon-only"), this.hasTitle || i.attr("title", n.trim(e)))) : u.push("ui-button-text-only"); i.addClass(u.join(" ")) } }), n.widget("ui.buttonset", { version: "1.11.4", options: { items: "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)" }, _create: function () { this.element.addClass("ui-buttonset") }, _init: function () { this.refresh() }, _setOption: function (n, t) { n === "disabled" && this.buttons.button("option", n, t); this._super(n, t) }, refresh: function () { var i = this.element.css("direction") === "rtl", t = this.element.find(this.options.items), r = t.filter(":ui-button"); t.not(":ui-button").button(); r.button("refresh"); this.buttons = t.map(function () { return n(this).button("widget")[0] }).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(i ? "ui-corner-right" : "ui-corner-left").end().filter(":last").addClass(i ? "ui-corner-left" : "ui-corner-right").end().end() }, _destroy: function () { this.element.removeClass("ui-buttonset"); this.buttons.map(function () { return n(this).button("widget")[0] }).removeClass("ui-corner-left ui-corner-right").end().button("destroy") } }), n.ui.button });
/*!
 * jQuery UI Draggable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 */
(function (n) { typeof define == "function" && define.amd ? define("jQueryUI/draggable",["jquery", "./core", "./mouse", "./widget"], n) : n(jQuery) })(function (n) { return n.widget("ui.draggable", n.ui.mouse, { version: "1.11.4", widgetEventPrefix: "drag", options: { addClasses: !0, appendTo: "parent", axis: !1, connectToSortable: !1, containment: !1, cursor: "auto", cursorAt: !1, grid: !1, handle: !1, helper: "original", iframeFix: !1, opacity: !1, refreshPositions: !1, revert: !1, revertDuration: 500, scope: "default", scroll: !0, scrollSensitivity: 20, scrollSpeed: 20, snap: !1, snapMode: "both", snapTolerance: 20, stack: !1, zIndex: !1, drag: null, start: null, stop: null }, _create: function () { this.options.helper === "original" && this._setPositionRelative(); this.options.addClasses && this.element.addClass("ui-draggable"); this.options.disabled && this.element.addClass("ui-draggable-disabled"); this._setHandleClassName(); this._mouseInit() }, _setOption: function (n, t) { this._super(n, t); n === "handle" && (this._removeHandleClassName(), this._setHandleClassName()) }, _destroy: function () { if ((this.helper || this.element).is(".ui-draggable-dragging")) { this.destroyOnClear = !0; return } this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"); this._removeHandleClassName(); this._mouseDestroy() }, _mouseCapture: function (t) { var i = this.options; return (this._blurActiveElement(t), this.helper || i.disabled || n(t.target).closest(".ui-resizable-handle").length > 0) ? !1 : (this.handle = this._getHandle(t), !this.handle) ? !1 : (this._blockFrames(i.iframeFix === !0 ? "iframe" : i.iframeFix), !0) }, _blockFrames: function (t) { this.iframeBlocks = this.document.find(t).map(function () { var t = n(this); return n("<div>").css("position", "absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0] }) }, _unblockFrames: function () { this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks) }, _blurActiveElement: function (t) { var i = this.document[0]; if (this.handleElement.is(t.target)) try { i.activeElement && i.activeElement.nodeName.toLowerCase() !== "body" && n(i.activeElement).blur() } catch (r) { } }, _mouseStart: function (t) { var i = this.options; return (this.helper = this._createHelper(t), this.helper.addClass("ui-draggable-dragging"), this._cacheHelperProportions(), n.ui.ddmanager && (n.ui.ddmanager.current = this), this._cacheMargins(), this.cssPosition = this.helper.css("position"), this.scrollParent = this.helper.scrollParent(!0), this.offsetParent = this.helper.offsetParent(), this.hasFixedAncestor = this.helper.parents().filter(function () { return n(this).css("position") === "fixed" }).length > 0, this.positionAbs = this.element.offset(), this._refreshOffsets(t), this.originalPosition = this.position = this._generatePosition(t, !1), this.originalPageX = t.pageX, this.originalPageY = t.pageY, i.cursorAt && this._adjustOffsetFromHelper(i.cursorAt), this._setContainment(), this._trigger("start", t) === !1) ? (this._clear(), !1) : (this._cacheHelperProportions(), n.ui.ddmanager && !i.dropBehaviour && n.ui.ddmanager.prepareOffsets(this, t), this._normalizeRightBottom(), this._mouseDrag(t, !0), n.ui.ddmanager && n.ui.ddmanager.dragStart(this, t), !0) }, _refreshOffsets: function (n) { this.offset = { top: this.positionAbs.top - this.margins.top, left: this.positionAbs.left - this.margins.left, scroll: !1, parent: this._getParentOffset(), relative: this._getRelativeOffset() }; this.offset.click = { left: n.pageX - this.offset.left, top: n.pageY - this.offset.top } }, _mouseDrag: function (t, i) { if (this.hasFixedAncestor && (this.offset.parent = this._getParentOffset()), this.position = this._generatePosition(t, !0), this.positionAbs = this._convertPositionTo("absolute"), !i) { var r = this._uiHash(); if (this._trigger("drag", t, r) === !1) return this._mouseUp({}), !1; this.position = r.position } return this.helper[0].style.left = this.position.left + "px", this.helper[0].style.top = this.position.top + "px", n.ui.ddmanager && n.ui.ddmanager.drag(this, t), !1 }, _mouseStop: function (t) { var r = this, i = !1; return n.ui.ddmanager && !this.options.dropBehaviour && (i = n.ui.ddmanager.drop(this, t)), this.dropped && (i = this.dropped, this.dropped = !1), this.options.revert === "invalid" && !i || this.options.revert === "valid" && i || this.options.revert === !0 || n.isFunction(this.options.revert) && this.options.revert.call(this.element, i) ? n(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function () { r._trigger("stop", t) !== !1 && r._clear() }) : this._trigger("stop", t) !== !1 && this._clear(), !1 }, _mouseUp: function (t) { return this._unblockFrames(), n.ui.ddmanager && n.ui.ddmanager.dragStop(this, t), this.handleElement.is(t.target) && this.element.focus(), n.ui.mouse.prototype._mouseUp.call(this, t) }, cancel: function () { return this.helper.is(".ui-draggable-dragging") ? this._mouseUp({}) : this._clear(), this }, _getHandle: function (t) { return this.options.handle ? !!n(t.target).closest(this.element.find(this.options.handle)).length : !0 }, _setHandleClassName: function () { this.handleElement = this.options.handle ? this.element.find(this.options.handle) : this.element; this.handleElement.addClass("ui-draggable-handle") }, _removeHandleClassName: function () { this.handleElement.removeClass("ui-draggable-handle") }, _createHelper: function (t) { var r = this.options, u = n.isFunction(r.helper), i = u ? n(r.helper.apply(this.element[0], [t])) : r.helper === "clone" ? this.element.clone().removeAttr("id") : this.element; return i.parents("body").length || i.appendTo(r.appendTo === "parent" ? this.element[0].parentNode : r.appendTo), u && i[0] === this.element[0] && this._setPositionRelative(), i[0] === this.element[0] || /(fixed|absolute)/.test(i.css("position")) || i.css("position", "absolute"), i }, _setPositionRelative: function () { /^(?:r|a|f)/.test(this.element.css("position")) || (this.element[0].style.position = "relative") }, _adjustOffsetFromHelper: function (t) { typeof t == "string" && (t = t.split(" ")); n.isArray(t) && (t = { left: +t[0], top: +t[1] || 0 }); "left" in t && (this.offset.click.left = t.left + this.margins.left); "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left); "top" in t && (this.offset.click.top = t.top + this.margins.top); "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top) }, _isRootNode: function (n) { return /(html|body)/i.test(n.tagName) || n === this.document[0] }, _getParentOffset: function () { var t = this.offsetParent.offset(), i = this.document[0]; return this.cssPosition === "absolute" && this.scrollParent[0] !== i && n.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), t.top += this.scrollParent.scrollTop()), this._isRootNode(this.offsetParent[0]) && (t = { top: 0, left: 0 }), { top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0), left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0) } }, _getRelativeOffset: function () { if (this.cssPosition !== "relative") return { top: 0, left: 0 }; var n = this.element.position(), t = this._isRootNode(this.scrollParent[0]); return { top: n.top - (parseInt(this.helper.css("top"), 10) || 0) + (t ? 0 : this.scrollParent.scrollTop()), left: n.left - (parseInt(this.helper.css("left"), 10) || 0) + (t ? 0 : this.scrollParent.scrollLeft()) } }, _cacheMargins: function () { this.margins = { left: parseInt(this.element.css("marginLeft"), 10) || 0, top: parseInt(this.element.css("marginTop"), 10) || 0, right: parseInt(this.element.css("marginRight"), 10) || 0, bottom: parseInt(this.element.css("marginBottom"), 10) || 0 } }, _cacheHelperProportions: function () { this.helperProportions = { width: this.helper.outerWidth(), height: this.helper.outerHeight() } }, _setContainment: function () { var f, t, i, r = this.options, u = this.document[0]; if (this.relativeContainer = null, !r.containment) { this.containment = null; return } if (r.containment === "window") { this.containment = [n(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, n(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, n(window).scrollLeft() + n(window).width() - this.helperProportions.width - this.margins.left, n(window).scrollTop() + (n(window).height() || u.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]; return } if (r.containment === "document") { this.containment = [0, 0, n(u).width() - this.helperProportions.width - this.margins.left, (n(u).height() || u.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]; return } if (r.containment.constructor === Array) { this.containment = r.containment; return } (r.containment === "parent" && (r.containment = this.helper[0].parentNode), t = n(r.containment), i = t[0], i) && (f = /(scroll|auto)/.test(t.css("overflow")), this.containment = [(parseInt(t.css("borderLeftWidth"), 10) || 0) + (parseInt(t.css("paddingLeft"), 10) || 0), (parseInt(t.css("borderTopWidth"), 10) || 0) + (parseInt(t.css("paddingTop"), 10) || 0), (f ? Math.max(i.scrollWidth, i.offsetWidth) : i.offsetWidth) - (parseInt(t.css("borderRightWidth"), 10) || 0) - (parseInt(t.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (f ? Math.max(i.scrollHeight, i.offsetHeight) : i.offsetHeight) - (parseInt(t.css("borderBottomWidth"), 10) || 0) - (parseInt(t.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom], this.relativeContainer = t) }, _convertPositionTo: function (n, t) { t || (t = this.position); var i = n === "absolute" ? 1 : -1, r = this._isRootNode(this.scrollParent[0]); return { top: t.top + this.offset.relative.top * i + this.offset.parent.top * i - (this.cssPosition === "fixed" ? -this.offset.scroll.top : r ? 0 : this.offset.scroll.top) * i, left: t.left + this.offset.relative.left * i + this.offset.parent.left * i - (this.cssPosition === "fixed" ? -this.offset.scroll.left : r ? 0 : this.offset.scroll.left) * i } }, _generatePosition: function (n, t) { var i, s, u, f, r = this.options, h = this._isRootNode(this.scrollParent[0]), e = n.pageX, o = n.pageY; return h && this.offset.scroll || (this.offset.scroll = { top: this.scrollParent.scrollTop(), left: this.scrollParent.scrollLeft() }), t && (this.containment && (this.relativeContainer ? (s = this.relativeContainer.offset(), i = [this.containment[0] + s.left, this.containment[1] + s.top, this.containment[2] + s.left, this.containment[3] + s.top]) : i = this.containment, n.pageX - this.offset.click.left < i[0] && (e = i[0] + this.offset.click.left), n.pageY - this.offset.click.top < i[1] && (o = i[1] + this.offset.click.top), n.pageX - this.offset.click.left > i[2] && (e = i[2] + this.offset.click.left), n.pageY - this.offset.click.top > i[3] && (o = i[3] + this.offset.click.top)), r.grid && (u = r.grid[1] ? this.originalPageY + Math.round((o - this.originalPageY) / r.grid[1]) * r.grid[1] : this.originalPageY, o = i ? u - this.offset.click.top >= i[1] || u - this.offset.click.top > i[3] ? u : u - this.offset.click.top >= i[1] ? u - r.grid[1] : u + r.grid[1] : u, f = r.grid[0] ? this.originalPageX + Math.round((e - this.originalPageX) / r.grid[0]) * r.grid[0] : this.originalPageX, e = i ? f - this.offset.click.left >= i[0] || f - this.offset.click.left > i[2] ? f : f - this.offset.click.left >= i[0] ? f - r.grid[0] : f + r.grid[0] : f), r.axis === "y" && (e = this.originalPageX), r.axis === "x" && (o = this.originalPageY)), { top: o - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + (this.cssPosition === "fixed" ? -this.offset.scroll.top : h ? 0 : this.offset.scroll.top), left: e - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + (this.cssPosition === "fixed" ? -this.offset.scroll.left : h ? 0 : this.offset.scroll.left) } }, _clear: function () { this.helper.removeClass("ui-draggable-dragging"); this.helper[0] === this.element[0] || this.cancelHelperRemoval || this.helper.remove(); this.helper = null; this.cancelHelperRemoval = !1; this.destroyOnClear && this.destroy() }, _normalizeRightBottom: function () { this.options.axis !== "y" && this.helper.css("right") !== "auto" && (this.helper.width(this.helper.width()), this.helper.css("right", "auto")); this.options.axis !== "x" && this.helper.css("bottom") !== "auto" && (this.helper.height(this.helper.height()), this.helper.css("bottom", "auto")) }, _trigger: function (t, i, r) { return r = r || this._uiHash(), n.ui.plugin.call(this, t, [i, r, this], !0), /^(drag|start|stop)/.test(t) && (this.positionAbs = this._convertPositionTo("absolute"), r.offset = this.positionAbs), n.Widget.prototype._trigger.call(this, t, i, r) }, plugins: {}, _uiHash: function () { return { helper: this.helper, position: this.position, originalPosition: this.originalPosition, offset: this.positionAbs } } }), n.ui.plugin.add("draggable", "connectToSortable", { start: function (t, i, r) { var u = n.extend({}, i, { item: r.element }); r.sortables = []; n(r.options.connectToSortable).each(function () { var i = n(this).sortable("instance"); i && !i.options.disabled && (r.sortables.push(i), i.refreshPositions(), i._trigger("activate", t, u)) }) }, stop: function (t, i, r) { var u = n.extend({}, i, { item: r.element }); r.cancelHelperRemoval = !1; n.each(r.sortables, function () { var n = this; n.isOver ? (n.isOver = 0, r.cancelHelperRemoval = !0, n.cancelHelperRemoval = !1, n._storedCSS = { position: n.placeholder.css("position"), top: n.placeholder.css("top"), left: n.placeholder.css("left") }, n._mouseStop(t), n.options.helper = n.options._helper) : (n.cancelHelperRemoval = !0, n._trigger("deactivate", t, u)) }) }, drag: function (t, i, r) { n.each(r.sortables, function () { var f = !1, u = this; u.positionAbs = r.positionAbs; u.helperProportions = r.helperProportions; u.offset.click = r.offset.click; u._intersectsWith(u.containerCache) && (f = !0, n.each(r.sortables, function () { return this.positionAbs = r.positionAbs, this.helperProportions = r.helperProportions, this.offset.click = r.offset.click, this !== u && this._intersectsWith(this.containerCache) && n.contains(u.element[0], this.element[0]) && (f = !1), f })); f ? (u.isOver || (u.isOver = 1, r._parent = i.helper.parent(), u.currentItem = i.helper.appendTo(u.element).data("ui-sortable-item", !0), u.options._helper = u.options.helper, u.options.helper = function () { return i.helper[0] }, t.target = u.currentItem[0], u._mouseCapture(t, !0), u._mouseStart(t, !0, !0), u.offset.click.top = r.offset.click.top, u.offset.click.left = r.offset.click.left, u.offset.parent.left -= r.offset.parent.left - u.offset.parent.left, u.offset.parent.top -= r.offset.parent.top - u.offset.parent.top, r._trigger("toSortable", t), r.dropped = u.element, n.each(r.sortables, function () { this.refreshPositions() }), r.currentItem = r.element, u.fromOutside = r), u.currentItem && (u._mouseDrag(t), i.position = u.position)) : u.isOver && (u.isOver = 0, u.cancelHelperRemoval = !0, u.options._revert = u.options.revert, u.options.revert = !1, u._trigger("out", t, u._uiHash(u)), u._mouseStop(t, !0), u.options.revert = u.options._revert, u.options.helper = u.options._helper, u.placeholder && u.placeholder.remove(), i.helper.appendTo(r._parent), r._refreshOffsets(t), i.position = r._generatePosition(t, !0), r._trigger("fromSortable", t), r.dropped = !1, n.each(r.sortables, function () { this.refreshPositions() })) }) } }), n.ui.plugin.add("draggable", "cursor", { start: function (t, i, r) { var u = n("body"), f = r.options; u.css("cursor") && (f._cursor = u.css("cursor")); u.css("cursor", f.cursor) }, stop: function (t, i, r) { var u = r.options; u._cursor && n("body").css("cursor", u._cursor) } }), n.ui.plugin.add("draggable", "opacity", { start: function (t, i, r) { var u = n(i.helper), f = r.options; u.css("opacity") && (f._opacity = u.css("opacity")); u.css("opacity", f.opacity) }, stop: function (t, i, r) { var u = r.options; u._opacity && n(i.helper).css("opacity", u._opacity) } }), n.ui.plugin.add("draggable", "scroll", { start: function (n, t, i) { i.scrollParentNotHidden || (i.scrollParentNotHidden = i.helper.scrollParent(!1)); i.scrollParentNotHidden[0] !== i.document[0] && i.scrollParentNotHidden[0].tagName !== "HTML" && (i.overflowOffset = i.scrollParentNotHidden.offset()) }, drag: function (t, i, r) { var u = r.options, o = !1, e = r.scrollParentNotHidden[0], f = r.document[0]; e !== f && e.tagName !== "HTML" ? (u.axis && u.axis === "x" || (r.overflowOffset.top + e.offsetHeight - t.pageY < u.scrollSensitivity ? e.scrollTop = o = e.scrollTop + u.scrollSpeed : t.pageY - r.overflowOffset.top < u.scrollSensitivity && (e.scrollTop = o = e.scrollTop - u.scrollSpeed)), u.axis && u.axis === "y" || (r.overflowOffset.left + e.offsetWidth - t.pageX < u.scrollSensitivity ? e.scrollLeft = o = e.scrollLeft + u.scrollSpeed : t.pageX - r.overflowOffset.left < u.scrollSensitivity && (e.scrollLeft = o = e.scrollLeft - u.scrollSpeed))) : (u.axis && u.axis === "x" || (t.pageY - n(f).scrollTop() < u.scrollSensitivity ? o = n(f).scrollTop(n(f).scrollTop() - u.scrollSpeed) : n(window).height() - (t.pageY - n(f).scrollTop()) < u.scrollSensitivity && (o = n(f).scrollTop(n(f).scrollTop() + u.scrollSpeed))), u.axis && u.axis === "y" || (t.pageX - n(f).scrollLeft() < u.scrollSensitivity ? o = n(f).scrollLeft(n(f).scrollLeft() - u.scrollSpeed) : n(window).width() - (t.pageX - n(f).scrollLeft()) < u.scrollSensitivity && (o = n(f).scrollLeft(n(f).scrollLeft() + u.scrollSpeed)))); o !== !1 && n.ui.ddmanager && !u.dropBehaviour && n.ui.ddmanager.prepareOffsets(r, t) } }), n.ui.plugin.add("draggable", "snap", { start: function (t, i, r) { var u = r.options; r.snapElements = []; n(u.snap.constructor !== String ? u.snap.items || ":data(ui-draggable)" : u.snap).each(function () { var t = n(this), i = t.offset(); this !== r.element[0] && r.snapElements.push({ item: this, width: t.outerWidth(), height: t.outerHeight(), top: i.top, left: i.left }) }) }, drag: function (t, i, r) { for (var e, o, s, h, c, a, l, v, w, b = r.options, f = b.snapTolerance, y = i.offset.left, k = y + r.helperProportions.width, p = i.offset.top, d = p + r.helperProportions.height, u = r.snapElements.length - 1; u >= 0; u--) { if (c = r.snapElements[u].left - r.margins.left, a = c + r.snapElements[u].width, l = r.snapElements[u].top - r.margins.top, v = l + r.snapElements[u].height, k < c - f || y > a + f || d < l - f || p > v + f || !n.contains(r.snapElements[u].item.ownerDocument, r.snapElements[u].item)) { r.snapElements[u].snapping && r.options.snap.release && r.options.snap.release.call(r.element, t, n.extend(r._uiHash(), { snapItem: r.snapElements[u].item })); r.snapElements[u].snapping = !1; continue } b.snapMode !== "inner" && (e = Math.abs(l - d) <= f, o = Math.abs(v - p) <= f, s = Math.abs(c - k) <= f, h = Math.abs(a - y) <= f, e && (i.position.top = r._convertPositionTo("relative", { top: l - r.helperProportions.height, left: 0 }).top), o && (i.position.top = r._convertPositionTo("relative", { top: v, left: 0 }).top), s && (i.position.left = r._convertPositionTo("relative", { top: 0, left: c - r.helperProportions.width }).left), h && (i.position.left = r._convertPositionTo("relative", { top: 0, left: a }).left)); w = e || o || s || h; b.snapMode !== "outer" && (e = Math.abs(l - p) <= f, o = Math.abs(v - d) <= f, s = Math.abs(c - y) <= f, h = Math.abs(a - k) <= f, e && (i.position.top = r._convertPositionTo("relative", { top: l, left: 0 }).top), o && (i.position.top = r._convertPositionTo("relative", { top: v - r.helperProportions.height, left: 0 }).top), s && (i.position.left = r._convertPositionTo("relative", { top: 0, left: c }).left), h && (i.position.left = r._convertPositionTo("relative", { top: 0, left: a - r.helperProportions.width }).left)); !r.snapElements[u].snapping && (e || o || s || h || w) && r.options.snap.snap && r.options.snap.snap.call(r.element, t, n.extend(r._uiHash(), { snapItem: r.snapElements[u].item })); r.snapElements[u].snapping = e || o || s || h || w } } }), n.ui.plugin.add("draggable", "stack", { start: function (t, i, r) { var f, e = r.options, u = n.makeArray(n(e.stack)).sort(function (t, i) { return (parseInt(n(t).css("zIndex"), 10) || 0) - (parseInt(n(i).css("zIndex"), 10) || 0) }); u.length && (f = parseInt(n(u[0]).css("zIndex"), 10) || 0, n(u).each(function (t) { n(this).css("zIndex", f + t) }), this.css("zIndex", f + u.length)) } }), n.ui.plugin.add("draggable", "zIndex", { start: function (t, i, r) { var u = n(i.helper), f = r.options; u.css("zIndex") && (f._zIndex = u.css("zIndex")); u.css("zIndex", f.zIndex) }, stop: function (t, i, r) { var u = r.options; u._zIndex && n(i.helper).css("zIndex", u._zIndex) } }), n.ui.draggable });
/*!
 * jQuery UI Mouse 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 */
(function (n) { typeof define == "function" && define.amd ? define("jQueryUI/mouse",["jquery", "./widget"], n) : n(jQuery) })(function (n) { var t = !1; return n(document).mouseup(function () { t = !1 }), n.widget("ui.mouse", { version: "1.11.4", options: { cancel: "input,textarea,button,select,option", distance: 1, delay: 0 }, _mouseInit: function () { var t = this; this.element.bind("mousedown." + this.widgetName, function (n) { return t._mouseDown(n) }).bind("click." + this.widgetName, function (i) { if (!0 === n.data(i.target, t.widgetName + ".preventClickEvent")) return n.removeData(i.target, t.widgetName + ".preventClickEvent"), i.stopImmediatePropagation(), !1 }); this.started = !1 }, _mouseDestroy: function () { this.element.unbind("." + this.widgetName); this._mouseMoveDelegate && this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate) }, _mouseDown: function (i) { if (!t) { this._mouseMoved = !1; this._mouseStarted && this._mouseUp(i); this._mouseDownEvent = i; var r = this, u = i.which === 1, f = typeof this.options.cancel == "string" && i.target.nodeName ? n(i.target).closest(this.options.cancel).length : !1; return !u || f || !this._mouseCapture(i) ? !0 : (this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function () { r.mouseDelayMet = !0 }, this.options.delay)), this._mouseDistanceMet(i) && this._mouseDelayMet(i) && (this._mouseStarted = this._mouseStart(i) !== !1, !this._mouseStarted)) ? (i.preventDefault(), !0) : (!0 === n.data(i.target, this.widgetName + ".preventClickEvent") && n.removeData(i.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function (n) { return r._mouseMove(n) }, this._mouseUpDelegate = function (n) { return r._mouseUp(n) }, this.document.bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), i.preventDefault(), t = !0, !0) } }, _mouseMove: function (t) { return this._mouseMoved && (n.ui.ie && (!document.documentMode || document.documentMode < 9) && !t.button || !t.which) ? this._mouseUp(t) : ((t.which || t.button) && (this._mouseMoved = !0), this._mouseStarted) ? (this._mouseDrag(t), t.preventDefault()) : (this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, t) !== !1, this._mouseStarted ? this._mouseDrag(t) : this._mouseUp(t)), !this._mouseStarted) }, _mouseUp: function (i) { return this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), this._mouseStarted && (this._mouseStarted = !1, i.target === this._mouseDownEvent.target && n.data(i.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(i)), t = !1, !1 }, _mouseDistanceMet: function (n) { return Math.max(Math.abs(this._mouseDownEvent.pageX - n.pageX), Math.abs(this._mouseDownEvent.pageY - n.pageY)) >= this.options.distance }, _mouseDelayMet: function () { return this.mouseDelayMet }, _mouseStart: function () { }, _mouseDrag: function () { }, _mouseStop: function () { }, _mouseCapture: function () { return !0 } }) });
/*!
 * jQuery UI Position 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
(function(n){typeof define=="function"&&define.amd?define("jQueryUI/position",["jquery"],n):n(jQuery)})(function(n){return function(){function a(n,t,i){return[parseFloat(n[0])*(l.test(n[0])?t/100:1),parseFloat(n[1])*(l.test(n[1])?i/100:1)]}function r(t,i){return parseInt(n.css(t,i),10)||0}function y(t){var i=t[0];return i.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:n.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}n.ui=n.ui||{};var u,f,i=Math.max,t=Math.abs,e=Math.round,o=/left|center|right/,s=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,l=/%$/,v=n.fn.position;n.position={scrollbarWidth:function(){if(u!==undefined)return u;var r,i,t=n("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'><\/div><\/div>"),f=t.children()[0];return n("body").append(t),r=f.offsetWidth,t.css("overflow","scroll"),i=f.offsetWidth,r===i&&(i=t[0].clientWidth),t.remove(),u=r-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),r=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),u=i==="scroll"||i==="auto"&&t.width<t.element[0].scrollWidth,f=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:f?n.position.scrollbarWidth():0,height:u?n.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=n(t||window),r=n.isWindow(i[0]),u=!!i[0]&&i[0].nodeType===9;return{element:i,isWindow:r,isDocument:u,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:r||u?i.width():i.outerWidth(),height:r||u?i.height():i.outerHeight()}}};n.fn.position=function(u){if(!u||!u.of)return v.apply(this,arguments);u=n.extend({},u);var k,l,p,b,w,g,nt=n(u.of),it=n.position.getWithinInfo(u.within),rt=n.position.getScrollInfo(it),d=(u.collision||"flip").split(" "),tt={};return g=y(nt),nt[0].preventDefault&&(u.at="left top"),l=g.width,p=g.height,b=g.offset,w=n.extend({},b),n.each(["my","at"],function(){var n=(u[this]||"").split(" "),t,i;n.length===1&&(n=o.test(n[0])?n.concat(["center"]):s.test(n[0])?["center"].concat(n):["center","center"]);n[0]=o.test(n[0])?n[0]:"center";n[1]=s.test(n[1])?n[1]:"center";t=h.exec(n[0]);i=h.exec(n[1]);tt[this]=[t?t[0]:0,i?i[0]:0];u[this]=[c.exec(n[0])[0],c.exec(n[1])[0]]}),d.length===1&&(d[1]=d[0]),u.at[0]==="right"?w.left+=l:u.at[0]==="center"&&(w.left+=l/2),u.at[1]==="bottom"?w.top+=p:u.at[1]==="center"&&(w.top+=p/2),k=a(tt.at,l,p),w.left+=k[0],w.top+=k[1],this.each(function(){var y,g,s=n(this),h=s.outerWidth(),c=s.outerHeight(),ut=r(this,"marginLeft"),ft=r(this,"marginTop"),et=h+ut+r(this,"marginRight")+rt.width,ot=c+ft+r(this,"marginBottom")+rt.height,o=n.extend({},w),v=a(tt.my,s.outerWidth(),s.outerHeight());u.my[0]==="right"?o.left-=h:u.my[0]==="center"&&(o.left-=h/2);u.my[1]==="bottom"?o.top-=c:u.my[1]==="center"&&(o.top-=c/2);o.left+=v[0];o.top+=v[1];f||(o.left=e(o.left),o.top=e(o.top));y={marginLeft:ut,marginTop:ft};n.each(["left","top"],function(t,i){n.ui.position[d[t]]&&n.ui.position[d[t]][i](o,{targetWidth:l,targetHeight:p,elemWidth:h,elemHeight:c,collisionPosition:y,collisionWidth:et,collisionHeight:ot,offset:[k[0]+v[0],k[1]+v[1]],my:u.my,at:u.at,within:it,elem:s})});u.using&&(g=function(n){var r=b.left-o.left,a=r+l-h,f=b.top-o.top,v=f+p-c,e={target:{element:nt,left:b.left,top:b.top,width:l,height:p},element:{element:s,left:o.left,top:o.top,width:h,height:c},horizontal:a<0?"left":r>0?"right":"center",vertical:v<0?"top":f>0?"bottom":"middle"};l<h&&t(r+a)<l&&(e.horizontal="center");p<c&&t(f+v)<p&&(e.vertical="middle");e.important=i(t(r),t(a))>i(t(f),t(v))?"horizontal":"vertical";u.using.call(this,n,e)});s.offset(n.extend(o,{using:g}))})};n.ui.position={fit:{left:function(n,t){var e=t.within,u=e.isWindow?e.scrollLeft:e.offset.left,o=e.width,s=n.left-t.collisionPosition.marginLeft,r=u-s,f=s+t.collisionWidth-o-u,h;t.collisionWidth>o?r>0&&f<=0?(h=n.left+r+t.collisionWidth-o-u,n.left+=r-h):n.left=f>0&&r<=0?u:r>f?u+o-t.collisionWidth:u:r>0?n.left+=r:f>0?n.left-=f:n.left=i(n.left-s,n.left)},top:function(n,t){var o=t.within,u=o.isWindow?o.scrollTop:o.offset.top,e=t.within.height,s=n.top-t.collisionPosition.marginTop,r=u-s,f=s+t.collisionHeight-e-u,h;t.collisionHeight>e?r>0&&f<=0?(h=n.top+r+t.collisionHeight-e-u,n.top+=r-h):n.top=f>0&&r<=0?u:r>f?u+e-t.collisionHeight:u:r>0?n.top+=r:f>0?n.top-=f:n.top=i(n.top-s,n.top)}},flip:{left:function(n,i){var r=i.within,y=r.offset.left+r.scrollLeft,c=r.width,o=r.isWindow?r.scrollLeft:r.offset.left,l=n.left-i.collisionPosition.marginLeft,a=l-o,v=l+i.collisionWidth-c-o,u=i.my[0]==="left"?-i.elemWidth:i.my[0]==="right"?i.elemWidth:0,f=i.at[0]==="left"?i.targetWidth:i.at[0]==="right"?-i.targetWidth:0,e=-2*i.offset[0],s,h;a<0?(s=n.left+u+f+e+i.collisionWidth-c-y,(s<0||s<t(a))&&(n.left+=u+f+e)):v>0&&(h=n.left-i.collisionPosition.marginLeft+u+f+e-o,(h>0||t(h)<v)&&(n.left+=u+f+e))},top:function(n,i){var r=i.within,y=r.offset.top+r.scrollTop,c=r.height,o=r.isWindow?r.scrollTop:r.offset.top,l=n.top-i.collisionPosition.marginTop,a=l-o,v=l+i.collisionHeight-c-o,p=i.my[1]==="top",u=p?-i.elemHeight:i.my[1]==="bottom"?i.elemHeight:0,f=i.at[1]==="top"?i.targetHeight:i.at[1]==="bottom"?-i.targetHeight:0,e=-2*i.offset[1],s,h;a<0?(h=n.top+u+f+e+i.collisionHeight-c-y,(h<0||h<t(a))&&(n.top+=u+f+e)):v>0&&(s=n.top-i.collisionPosition.marginTop+u+f+e-o,(s>0||t(s)<v)&&(n.top+=u+f+e))}},flipfit:{left:function(){n.ui.position.flip.left.apply(this,arguments);n.ui.position.fit.left.apply(this,arguments)},top:function(){n.ui.position.flip.top.apply(this,arguments);n.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,r,u,e,o=document.getElementsByTagName("body")[0],s=document.createElement("div");t=document.createElement(o?"div":"body");r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};o&&n.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(e in r)t.style[e]=r[e];t.appendChild(s);i=o||document.documentElement;i.insertBefore(t,i.firstChild);s.style.cssText="position: absolute; left: 10.7432222px;";u=n(s).offset().left;f=u>10&&u<11;t.innerHTML="";i.removeChild(t)}()}(),n.ui.position});
/*!
 * jQuery UI Resizable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 */
(function (n) { typeof define == "function" && define.amd ? define("jQueryUI/resizable",["jquery", "./core", "./mouse", "./widget"], n) : n(jQuery) })(function (n) { return n.widget("ui.resizable", n.ui.mouse, { version: "1.11.4", widgetEventPrefix: "resize", options: { alsoResize: !1, animate: !1, animateDuration: "slow", animateEasing: "swing", aspectRatio: !1, autoHide: !1, containment: !1, ghost: !1, grid: !1, handles: "e,s,se", helper: !1, maxHeight: null, maxWidth: null, minHeight: 10, minWidth: 10, zIndex: 90, resize: null, start: null, stop: null }, _num: function (n) { return parseInt(n, 10) || 0 }, _isNumber: function (n) { return !isNaN(parseInt(n, 10)) }, _hasScroll: function (t, i) { if (n(t).css("overflow") === "hidden") return !1; var r = i && i === "left" ? "scrollLeft" : "scrollTop", u = !1; return t[r] > 0 ? !0 : (t[r] = 1, u = t[r] > 0, t[r] = 0, u) }, _create: function () { var e, f, u, i, o, r = this, t = this.options; if (this.element.addClass("ui-resizable"), n.extend(this, { _aspectRatio: !!t.aspectRatio, aspectRatio: t.aspectRatio, originalElement: this.element, _proportionallyResizeElements: [], _helper: t.helper || t.ghost || t.animate ? t.helper || "ui-resizable-helper" : null }), this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i) && (this.element.wrap(n("<div class='ui-wrapper' style='overflow: hidden;'><\/div>").css({ position: this.element.css("position"), width: this.element.outerWidth(), height: this.element.outerHeight(), top: this.element.css("top"), left: this.element.css("left") })), this.element = this.element.parent().data("ui-resizable", this.element.resizable("instance")), this.elementIsWrapper = !0, this.element.css({ marginLeft: this.originalElement.css("marginLeft"), marginTop: this.originalElement.css("marginTop"), marginRight: this.originalElement.css("marginRight"), marginBottom: this.originalElement.css("marginBottom") }), this.originalElement.css({ marginLeft: 0, marginTop: 0, marginRight: 0, marginBottom: 0 }), this.originalResizeStyle = this.originalElement.css("resize"), this.originalElement.css("resize", "none"), this._proportionallyResizeElements.push(this.originalElement.css({ position: "static", zoom: 1, display: "block" })), this.originalElement.css({ margin: this.originalElement.css("margin") }), this._proportionallyResize()), this.handles = t.handles || (n(".ui-resizable-handle", this.element).length ? { n: ".ui-resizable-n", e: ".ui-resizable-e", s: ".ui-resizable-s", w: ".ui-resizable-w", se: ".ui-resizable-se", sw: ".ui-resizable-sw", ne: ".ui-resizable-ne", nw: ".ui-resizable-nw" } : "e,s,se"), this._handles = n(), this.handles.constructor === String) for (this.handles === "all" && (this.handles = "n,e,s,w,se,sw,ne,nw"), e = this.handles.split(","), this.handles = {}, f = 0; f < e.length; f++) u = n.trim(e[f]), o = "ui-resizable-" + u, i = n("<div class='ui-resizable-handle " + o + "'><\/div>"), i.css({ zIndex: t.zIndex }), "se" === u && i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"), this.handles[u] = ".ui-resizable-" + u, this.element.append(i); this._renderAxis = function (t) { var i, u, f, e; t = t || this.element; for (i in this.handles) this.handles[i].constructor === String ? this.handles[i] = this.element.children(this.handles[i]).first().show() : (this.handles[i].jquery || this.handles[i].nodeType) && (this.handles[i] = n(this.handles[i]), this._on(this.handles[i], { mousedown: r._mouseDown })), this.elementIsWrapper && this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i) && (u = n(this.handles[i], this.element), e = /sw|ne|nw|se|n|s/.test(i) ? u.outerHeight() : u.outerWidth(), f = ["padding", /ne|nw|n/.test(i) ? "Top" : /se|sw|s/.test(i) ? "Bottom" : /^e$/.test(i) ? "Right" : "Left"].join(""), t.css(f, e), this._proportionallyResize()), this._handles = this._handles.add(this.handles[i]) }; this._renderAxis(this.element); this._handles = this._handles.add(this.element.find(".ui-resizable-handle")); this._handles.disableSelection(); this._handles.mouseover(function () { r.resizing || (this.className && (i = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)), r.axis = i && i[1] ? i[1] : "se") }); t.autoHide && (this._handles.hide(), n(this.element).addClass("ui-resizable-autohide").mouseenter(function () { t.disabled || (n(this).removeClass("ui-resizable-autohide"), r._handles.show()) }).mouseleave(function () { t.disabled || r.resizing || (n(this).addClass("ui-resizable-autohide"), r._handles.hide()) })); this._mouseInit() }, _destroy: function () { this._mouseDestroy(); var t, i = function (t) { n(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove() }; return this.elementIsWrapper && (i(this.element), t = this.element, this.originalElement.css({ position: t.css("position"), width: t.outerWidth(), height: t.outerHeight(), top: t.css("top"), left: t.css("left") }).insertAfter(t), t.remove()), this.originalElement.css("resize", this.originalResizeStyle), i(this.originalElement), this }, _mouseCapture: function (t) { var r, i, u = !1; for (r in this.handles) i = n(this.handles[r])[0], (i === t.target || n.contains(i, t.target)) && (u = !0); return !this.options.disabled && u }, _mouseStart: function (t) { var u, f, e, r = this.options, i = this.element; return this.resizing = !0, this._renderProxy(), u = this._num(this.helper.css("left")), f = this._num(this.helper.css("top")), r.containment && (u += n(r.containment).scrollLeft() || 0, f += n(r.containment).scrollTop() || 0), this.offset = this.helper.offset(), this.position = { left: u, top: f }, this.size = this._helper ? { width: this.helper.width(), height: this.helper.height() } : { width: i.width(), height: i.height() }, this.originalSize = this._helper ? { width: i.outerWidth(), height: i.outerHeight() } : { width: i.width(), height: i.height() }, this.sizeDiff = { width: i.outerWidth() - i.width(), height: i.outerHeight() - i.height() }, this.originalPosition = { left: u, top: f }, this.originalMousePosition = { left: t.pageX, top: t.pageY }, this.aspectRatio = typeof r.aspectRatio == "number" ? r.aspectRatio : this.originalSize.width / this.originalSize.height || 1, e = n(".ui-resizable-" + this.axis).css("cursor"), n("body").css("cursor", e === "auto" ? this.axis + "-resize" : e), i.addClass("ui-resizable-resizing"), this._propagate("start", t), !0 }, _mouseDrag: function (t) { var i, r, u = this.originalMousePosition, e = this.axis, o = t.pageX - u.left || 0, s = t.pageY - u.top || 0, f = this._change[e]; return (this._updatePrevProperties(), !f) ? !1 : (i = f.apply(this, [t, o, s]), this._updateVirtualBoundaries(t.shiftKey), (this._aspectRatio || t.shiftKey) && (i = this._updateRatio(i, t)), i = this._respectSize(i, t), this._updateCache(i), this._propagate("resize", t), r = this._applyChanges(), !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(), n.isEmptyObject(r) || (this._updatePrevProperties(), this._trigger("resize", t, this.ui()), this._applyChanges()), !1) }, _mouseStop: function (t) { this.resizing = !1; var r, u, f, e, o, s, h, c = this.options, i = this; return this._helper && (r = this._proportionallyResizeElements, u = r.length && /textarea/i.test(r[0].nodeName), f = u && this._hasScroll(r[0], "left") ? 0 : i.sizeDiff.height, e = u ? 0 : i.sizeDiff.width, o = { width: i.helper.width() - e, height: i.helper.height() - f }, s = parseInt(i.element.css("left"), 10) + (i.position.left - i.originalPosition.left) || null, h = parseInt(i.element.css("top"), 10) + (i.position.top - i.originalPosition.top) || null, c.animate || this.element.css(n.extend(o, { top: h, left: s })), i.helper.height(i.size.height), i.helper.width(i.size.width), this._helper && !c.animate && this._proportionallyResize()), n("body").css("cursor", "auto"), this.element.removeClass("ui-resizable-resizing"), this._propagate("stop", t), this._helper && this.helper.remove(), !1 }, _updatePrevProperties: function () { this.prevPosition = { top: this.position.top, left: this.position.left }; this.prevSize = { width: this.size.width, height: this.size.height } }, _applyChanges: function () { var n = {}; return this.position.top !== this.prevPosition.top && (n.top = this.position.top + "px"), this.position.left !== this.prevPosition.left && (n.left = this.position.left + "px"), this.size.width !== this.prevSize.width && (n.width = this.size.width + "px"), this.size.height !== this.prevSize.height && (n.height = this.size.height + "px"), this.helper.css(n), n }, _updateVirtualBoundaries: function (n) { var r, u, f, e, t, i = this.options; t = { minWidth: this._isNumber(i.minWidth) ? i.minWidth : 0, maxWidth: this._isNumber(i.maxWidth) ? i.maxWidth : Infinity, minHeight: this._isNumber(i.minHeight) ? i.minHeight : 0, maxHeight: this._isNumber(i.maxHeight) ? i.maxHeight : Infinity }; (this._aspectRatio || n) && (r = t.minHeight * this.aspectRatio, f = t.minWidth / this.aspectRatio, u = t.maxHeight * this.aspectRatio, e = t.maxWidth / this.aspectRatio, r > t.minWidth && (t.minWidth = r), f > t.minHeight && (t.minHeight = f), u < t.maxWidth && (t.maxWidth = u), e < t.maxHeight && (t.maxHeight = e)); this._vBoundaries = t }, _updateCache: function (n) { this.offset = this.helper.offset(); this._isNumber(n.left) && (this.position.left = n.left); this._isNumber(n.top) && (this.position.top = n.top); this._isNumber(n.height) && (this.size.height = n.height); this._isNumber(n.width) && (this.size.width = n.width) }, _updateRatio: function (n) { var t = this.position, i = this.size, r = this.axis; return this._isNumber(n.height) ? n.width = n.height * this.aspectRatio : this._isNumber(n.width) && (n.height = n.width / this.aspectRatio), r === "sw" && (n.left = t.left + (i.width - n.width), n.top = null), r === "nw" && (n.top = t.top + (i.height - n.height), n.left = t.left + (i.width - n.width)), n }, _respectSize: function (n) { var t = this._vBoundaries, i = this.axis, r = this._isNumber(n.width) && t.maxWidth && t.maxWidth < n.width, u = this._isNumber(n.height) && t.maxHeight && t.maxHeight < n.height, f = this._isNumber(n.width) && t.minWidth && t.minWidth > n.width, e = this._isNumber(n.height) && t.minHeight && t.minHeight > n.height, o = this.originalPosition.left + this.originalSize.width, s = this.position.top + this.size.height, h = /sw|nw|w/.test(i), c = /nw|ne|n/.test(i); return f && (n.width = t.minWidth), e && (n.height = t.minHeight), r && (n.width = t.maxWidth), u && (n.height = t.maxHeight), f && h && (n.left = o - t.minWidth), r && h && (n.left = o - t.maxWidth), e && c && (n.top = s - t.minHeight), u && c && (n.top = s - t.maxHeight), n.width || n.height || n.left || !n.top ? n.width || n.height || n.top || !n.left || (n.left = null) : n.top = null, n }, _getPaddingPlusBorderDimensions: function (n) { for (var t = 0, i = [], r = [n.css("borderTopWidth"), n.css("borderRightWidth"), n.css("borderBottomWidth"), n.css("borderLeftWidth")], u = [n.css("paddingTop"), n.css("paddingRight"), n.css("paddingBottom"), n.css("paddingLeft")]; t < 4; t++) i[t] = parseInt(r[t], 10) || 0, i[t] += parseInt(u[t], 10) || 0; return { height: i[0] + i[2], width: i[1] + i[3] } }, _proportionallyResize: function () { if (this._proportionallyResizeElements.length) for (var n, t = 0, i = this.helper || this.element; t < this._proportionallyResizeElements.length; t++) n = this._proportionallyResizeElements[t], this.outerDimensions || (this.outerDimensions = this._getPaddingPlusBorderDimensions(n)), n.css({ height: i.height() - this.outerDimensions.height || 0, width: i.width() - this.outerDimensions.width || 0 }) }, _renderProxy: function () { var t = this.element, i = this.options; this.elementOffset = t.offset(); this._helper ? (this.helper = this.helper || n("<div style='overflow:hidden;'><\/div>"), this.helper.addClass(this._helper).css({ width: this.element.outerWidth() - 1, height: this.element.outerHeight() - 1, position: "absolute", left: this.elementOffset.left + "px", top: this.elementOffset.top + "px", zIndex: ++i.zIndex }), this.helper.appendTo("body").disableSelection()) : this.helper = this.element }, _change: { e: function (n, t) { return { width: this.originalSize.width + t } }, w: function (n, t) { var i = this.originalSize, r = this.originalPosition; return { left: r.left + t, width: i.width - t } }, n: function (n, t, i) { var r = this.originalSize, u = this.originalPosition; return { top: u.top + i, height: r.height - i } }, s: function (n, t, i) { return { height: this.originalSize.height + i } }, se: function (t, i, r) { return n.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [t, i, r])) }, sw: function (t, i, r) { return n.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [t, i, r])) }, ne: function (t, i, r) { return n.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [t, i, r])) }, nw: function (t, i, r) { return n.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [t, i, r])) } }, _propagate: function (t, i) { n.ui.plugin.call(this, t, [i, this.ui()]); t !== "resize" && this._trigger(t, i, this.ui()) }, plugins: {}, ui: function () { return { originalElement: this.originalElement, element: this.element, helper: this.helper, position: this.position, size: this.size, originalSize: this.originalSize, originalPosition: this.originalPosition } } }), n.ui.plugin.add("resizable", "animate", { stop: function (t) { var i = n(this).resizable("instance"), u = i.options, r = i._proportionallyResizeElements, f = r.length && /textarea/i.test(r[0].nodeName), s = f && i._hasScroll(r[0], "left") ? 0 : i.sizeDiff.height, h = f ? 0 : i.sizeDiff.width, c = { width: i.size.width - h, height: i.size.height - s }, e = parseInt(i.element.css("left"), 10) + (i.position.left - i.originalPosition.left) || null, o = parseInt(i.element.css("top"), 10) + (i.position.top - i.originalPosition.top) || null; i.element.animate(n.extend(c, o && e ? { top: o, left: e } : {}), { duration: u.animateDuration, easing: u.animateEasing, step: function () { var u = { width: parseInt(i.element.css("width"), 10), height: parseInt(i.element.css("height"), 10), top: parseInt(i.element.css("top"), 10), left: parseInt(i.element.css("left"), 10) }; r && r.length && n(r[0]).css({ width: u.width, height: u.height }); i._updateCache(u); i._propagate("resize", t) } }) } }), n.ui.plugin.add("resizable", "containment", { start: function () { var r, f, e, o, s, h, c, t = n(this).resizable("instance"), l = t.options, a = t.element, u = l.containment, i = u instanceof n ? u.get(0) : /parent/.test(u) ? a.parent().get(0) : u; i && (t.containerElement = n(i), /document/.test(u) || u === document ? (t.containerOffset = { left: 0, top: 0 }, t.containerPosition = { left: 0, top: 0 }, t.parentData = { element: n(document), left: 0, top: 0, width: n(document).width(), height: n(document).height() || document.body.parentNode.scrollHeight }) : (r = n(i), f = [], n(["Top", "Right", "Left", "Bottom"]).each(function (n, i) { f[n] = t._num(r.css("padding" + i)) }), t.containerOffset = r.offset(), t.containerPosition = r.position(), t.containerSize = { height: r.innerHeight() - f[3], width: r.innerWidth() - f[1] }, e = t.containerOffset, o = t.containerSize.height, s = t.containerSize.width, h = t._hasScroll(i, "left") ? i.scrollWidth : s, c = t._hasScroll(i) ? i.scrollHeight : o, t.parentData = { element: i, left: e.left, top: e.top, width: h, height: c })) }, resize: function (t) { var o, s, h, c, i = n(this).resizable("instance"), v = i.options, r = i.containerOffset, l = i.position, f = i._aspectRatio || t.shiftKey, e = { top: 0, left: 0 }, a = i.containerElement, u = !0; a[0] !== document && /static/.test(a.css("position")) && (e = r); l.left < (i._helper ? r.left : 0) && (i.size.width = i.size.width + (i._helper ? i.position.left - r.left : i.position.left - e.left), f && (i.size.height = i.size.width / i.aspectRatio, u = !1), i.position.left = v.helper ? r.left : 0); l.top < (i._helper ? r.top : 0) && (i.size.height = i.size.height + (i._helper ? i.position.top - r.top : i.position.top), f && (i.size.width = i.size.height * i.aspectRatio, u = !1), i.position.top = i._helper ? r.top : 0); h = i.containerElement.get(0) === i.element.parent().get(0); c = /relative|absolute/.test(i.containerElement.css("position")); h && c ? (i.offset.left = i.parentData.left + i.position.left, i.offset.top = i.parentData.top + i.position.top) : (i.offset.left = i.element.offset().left, i.offset.top = i.element.offset().top); o = Math.abs(i.sizeDiff.width + (i._helper ? i.offset.left - e.left : i.offset.left - r.left)); s = Math.abs(i.sizeDiff.height + (i._helper ? i.offset.top - e.top : i.offset.top - r.top)); o + i.size.width >= i.parentData.width && (i.size.width = i.parentData.width - o, f && (i.size.height = i.size.width / i.aspectRatio, u = !1)); s + i.size.height >= i.parentData.height && (i.size.height = i.parentData.height - s, f && (i.size.width = i.size.height * i.aspectRatio, u = !1)); u || (i.position.left = i.prevPosition.left, i.position.top = i.prevPosition.top, i.size.width = i.prevSize.width, i.size.height = i.prevSize.height) }, stop: function () { var t = n(this).resizable("instance"), r = t.options, u = t.containerOffset, f = t.containerPosition, e = t.containerElement, i = n(t.helper), o = i.offset(), s = i.outerWidth() - t.sizeDiff.width, h = i.outerHeight() - t.sizeDiff.height; t._helper && !r.animate && /relative/.test(e.css("position")) && n(this).css({ left: o.left - f.left - u.left, width: s, height: h }); t._helper && !r.animate && /static/.test(e.css("position")) && n(this).css({ left: o.left - f.left - u.left, width: s, height: h }) } }), n.ui.plugin.add("resizable", "alsoResize", { start: function () { var t = n(this).resizable("instance"), i = t.options; n(i.alsoResize).each(function () { var t = n(this); t.data("ui-resizable-alsoresize", { width: parseInt(t.width(), 10), height: parseInt(t.height(), 10), left: parseInt(t.css("left"), 10), top: parseInt(t.css("top"), 10) }) }) }, resize: function (t, i) { var r = n(this).resizable("instance"), e = r.options, u = r.originalSize, f = r.originalPosition, o = { height: r.size.height - u.height || 0, width: r.size.width - u.width || 0, top: r.position.top - f.top || 0, left: r.position.left - f.left || 0 }; n(e.alsoResize).each(function () { var t = n(this), u = n(this).data("ui-resizable-alsoresize"), r = {}, f = t.parents(i.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"]; n.each(f, function (n, t) { var i = (u[t] || 0) + (o[t] || 0); i && i >= 0 && (r[t] = i || null) }); t.css(r) }) }, stop: function () { n(this).removeData("resizable-alsoresize") } }), n.ui.plugin.add("resizable", "ghost", { start: function () { var t = n(this).resizable("instance"), i = t.options, r = t.size; t.ghost = t.originalElement.clone(); t.ghost.css({ opacity: .25, display: "block", position: "relative", height: r.height, width: r.width, margin: 0, left: 0, top: 0 }).addClass("ui-resizable-ghost").addClass(typeof i.ghost == "string" ? i.ghost : ""); t.ghost.appendTo(t.helper) }, resize: function () { var t = n(this).resizable("instance"); t.ghost && t.ghost.css({ position: "relative", height: t.size.height, width: t.size.width }) }, stop: function () { var t = n(this).resizable("instance"); t.ghost && t.helper && t.helper.get(0).removeChild(t.ghost.get(0)) } }), n.ui.plugin.add("resizable", "grid", { resize: function () { var h, t = n(this).resizable("instance"), i = t.options, y = t.size, o = t.originalSize, s = t.originalPosition, c = t.axis, l = typeof i.grid == "number" ? [i.grid, i.grid] : i.grid, f = l[0] || 1, e = l[1] || 1, a = Math.round((y.width - o.width) / f) * f, v = Math.round((y.height - o.height) / e) * e, r = o.width + a, u = o.height + v, p = i.maxWidth && i.maxWidth < r, w = i.maxHeight && i.maxHeight < u, b = i.minWidth && i.minWidth > r, k = i.minHeight && i.minHeight > u; i.grid = l; b && (r += f); k && (u += e); p && (r -= f); w && (u -= e); /^(se|s|e)$/.test(c) ? (t.size.width = r, t.size.height = u) : /^(ne)$/.test(c) ? (t.size.width = r, t.size.height = u, t.position.top = s.top - v) : /^(sw)$/.test(c) ? (t.size.width = r, t.size.height = u, t.position.left = s.left - a) : ((u - e <= 0 || r - f <= 0) && (h = t._getPaddingPlusBorderDimensions(this)), u - e > 0 ? (t.size.height = u, t.position.top = s.top - v) : (u = e - h.height, t.size.height = u, t.position.top = s.top + o.height - u), r - f > 0 ? (t.size.width = r, t.position.left = s.left - a) : (r = f - h.width, t.size.width = r, t.position.left = s.left + o.width - r)) } }), n.ui.resizable });
/*!
 * jQuery UI Dialog 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/dialog/
 */
(function (n) { typeof define == "function" && define.amd ? define("jQueryUI/dialog",["jquery", "./core", "./widget", "./button", "./draggable", "./mouse", "./position", "./resizable"], n) : n(jQuery) })(function (n) { return n.widget("ui.dialog", { version: "1.11.4", options: { appendTo: "body", autoOpen: !0, buttons: [], closeOnEscape: !0, closeText: "Close", dialogClass: "", draggable: !0, hide: null, height: "auto", maxHeight: null, maxWidth: null, minHeight: 150, minWidth: 150, modal: !1, position: { my: "center", at: "center", of: window, collision: "fit", using: function (t) { var i = n(this).css(t).offset().top; i < 0 && n(this).css("top", t.top - i) } }, resizable: !0, show: null, title: null, width: 300, beforeClose: null, close: null, drag: null, dragStart: null, dragStop: null, focus: null, open: null, resize: null, resizeStart: null, resizeStop: null }, sizeRelatedOptions: { buttons: !0, height: !0, maxHeight: !0, maxWidth: !0, minHeight: !0, minWidth: !0, width: !0 }, resizableRelatedOptions: { maxHeight: !0, maxWidth: !0, minHeight: !0, minWidth: !0 }, _create: function () { this.originalCss = { display: this.element[0].style.display, width: this.element[0].style.width, minHeight: this.element[0].style.minHeight, maxHeight: this.element[0].style.maxHeight, height: this.element[0].style.height }; this.originalPosition = { parent: this.element.parent(), index: this.element.parent().children().index(this.element) }; this.originalTitle = this.element.attr("title"); this.options.title = this.options.title || this.originalTitle; this._createWrapper(); this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog); this._createTitlebar(); this._createButtonPane(); this.options.draggable && n.fn.draggable && this._makeDraggable(); this.options.resizable && n.fn.resizable && this._makeResizable(); this._isOpen = !1; this._trackFocus() }, _init: function () { this.options.autoOpen && this.open() }, _appendTo: function () { var t = this.options.appendTo; return t && (t.jquery || t.nodeType) ? n(t) : this.document.find(t || "body").eq(0) }, _destroy: function () { var n, t = this.originalPosition; this._untrackInstance(); this._destroyOverlay(); this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(); this.uiDialog.stop(!0, !0).remove(); this.originalTitle && this.element.attr("title", this.originalTitle); n = t.parent.children().eq(t.index); n.length && n[0] !== this.element[0] ? n.before(this.element) : t.parent.append(this.element) }, widget: function () { return this.uiDialog }, disable: n.noop, enable: n.noop, close: function (t) { var i, r = this; if (this._isOpen && this._trigger("beforeClose", t) !== !1) { if (this._isOpen = !1, this._focusedElement = null, this._destroyOverlay(), this._untrackInstance(), !this.opener.filter(":focusable").focus().length) try { i = this.document[0].activeElement; i && i.nodeName.toLowerCase() !== "body" && n(i).blur() } catch (u) { } this._hide(this.uiDialog, this.options.hide, function () { r._trigger("close", t) }) } }, isOpen: function () { return this._isOpen }, moveToTop: function () { this._moveToTop() }, _moveToTop: function (t, i) { var r = !1, f = this.uiDialog.siblings(".ui-front:visible").map(function () { return +n(this).css("z-index") }).get(), u = Math.max.apply(null, f); return u >= +this.uiDialog.css("z-index") && (this.uiDialog.css("z-index", u + 1), r = !0), r && !i && this._trigger("focus", t), r }, open: function () { var t = this; if (this._isOpen) { this._moveToTop() && this._focusTabbable(); return } this._isOpen = !0; this.opener = n(this.document[0].activeElement); this._size(); this._position(); this._createOverlay(); this._moveToTop(null, !0); this.overlay && this.overlay.css("z-index", this.uiDialog.css("z-index") - 1); this._show(this.uiDialog, this.options.show, function () { t._focusTabbable(); t._trigger("focus") }); this._makeFocusTarget(); this._trigger("open") }, _focusTabbable: function () { var n = this._focusedElement; n || (n = this.element.find("[autofocus]")); n.length || (n = this.element.find(":tabbable")); n.length || (n = this.uiDialogButtonPane.find(":tabbable")); n.length || (n = this.uiDialogTitlebarClose.filter(":tabbable")); n.length || (n = this.uiDialog); n.eq(0).focus() }, _keepFocus: function (t) { function i() { var t = this.document[0].activeElement, i = this.uiDialog[0] === t || n.contains(this.uiDialog[0], t); i || this._focusTabbable() } t.preventDefault(); i.call(this); this._delay(i) }, _createWrapper: function () { this.uiDialog = n("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front " + this.options.dialogClass).hide().attr({ tabIndex: -1, role: "dialog" }).appendTo(this._appendTo()); this._on(this.uiDialog, { keydown: function (t) { if (this.options.closeOnEscape && !t.isDefaultPrevented() && t.keyCode && t.keyCode === n.ui.keyCode.ESCAPE) { t.preventDefault(); this.close(t); return } if (t.keyCode === n.ui.keyCode.TAB && !t.isDefaultPrevented()) { var i = this.uiDialog.find(":tabbable"), r = i.filter(":first"), u = i.filter(":last"); t.target !== u[0] && t.target !== this.uiDialog[0] || t.shiftKey ? (t.target === r[0] || t.target === this.uiDialog[0]) && t.shiftKey && (this._delay(function () { u.focus() }), t.preventDefault()) : (this._delay(function () { r.focus() }), t.preventDefault()) } }, mousedown: function (n) { this._moveToTop(n) && this._focusTabbable() } }); this.element.find("[aria-describedby]").length || this.uiDialog.attr({ "aria-describedby": this.element.uniqueId().attr("id") }) }, _createTitlebar: function () { var t; this.uiDialogTitlebar = n("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog); this._on(this.uiDialogTitlebar, { mousedown: function (t) { n(t.target).closest(".ui-dialog-titlebar-close") || this.uiDialog.focus() } }); this.uiDialogTitlebarClose = n("<button type='button'><\/button>").button({ label: this.options.closeText, icons: { primary: "ui-icon-closethick" }, text: !1 }).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar); this._on(this.uiDialogTitlebarClose, { click: function (n) { n.preventDefault(); this.close(n) } }); t = n("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar); this._title(t); this.uiDialog.attr({ "aria-labelledby": t.attr("id") }) }, _title: function (n) { this.options.title || n.html("&#160;"); n.text(this.options.title) }, _createButtonPane: function () { this.uiDialogButtonPane = n("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"); this.uiButtonSet = n("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane); this._createButtons() }, _createButtons: function () { var i = this, t = this.options.buttons; if (this.uiDialogButtonPane.remove(), this.uiButtonSet.empty(), n.isEmptyObject(t) || n.isArray(t) && !t.length) { this.uiDialog.removeClass("ui-dialog-buttons"); return } n.each(t, function (t, r) { var u, f; r = n.isFunction(r) ? { click: r, text: t } : r; r = n.extend({ type: "button" }, r); u = r.click; r.click = function () { u.apply(i.element[0], arguments) }; f = { icons: r.icons, text: r.showText }; delete r.icons; delete r.showText; n("<button><\/button>", r).button(f).appendTo(i.uiButtonSet) }); this.uiDialog.addClass("ui-dialog-buttons"); this.uiDialogButtonPane.appendTo(this.uiDialog) }, _makeDraggable: function () { function i(n) { return { position: n.position, offset: n.offset } } var t = this, r = this.options; this.uiDialog.draggable({ cancel: ".ui-dialog-content, .ui-dialog-titlebar-close", handle: ".ui-dialog-titlebar", containment: "document", start: function (r, u) { n(this).addClass("ui-dialog-dragging"); t._blockFrames(); t._trigger("dragStart", r, i(u)) }, drag: function (n, r) { t._trigger("drag", n, i(r)) }, stop: function (u, f) { var e = f.offset.left - t.document.scrollLeft(), o = f.offset.top - t.document.scrollTop(); r.position = { my: "left top", at: "left" + (e >= 0 ? "+" : "") + e + " top" + (o >= 0 ? "+" : "") + o, of: t.window }; n(this).removeClass("ui-dialog-dragging"); t._unblockFrames(); t._trigger("dragStop", u, i(f)) } }) }, _makeResizable: function () { function r(n) { return { originalPosition: n.originalPosition, originalSize: n.originalSize, position: n.position, size: n.size } } var t = this, i = this.options, u = i.resizable, f = this.uiDialog.css("position"), e = typeof u == "string" ? u : "n,e,s,w,se,sw,ne,nw"; this.uiDialog.resizable({ cancel: ".ui-dialog-content", containment: "document", alsoResize: this.element, maxWidth: i.maxWidth, maxHeight: i.maxHeight, minWidth: i.minWidth, minHeight: this._minHeight(), handles: e, start: function (i, u) { n(this).addClass("ui-dialog-resizing"); t._blockFrames(); t._trigger("resizeStart", i, r(u)) }, resize: function (n, i) { t._trigger("resize", n, r(i)) }, stop: function (u, f) { var e = t.uiDialog.offset(), o = e.left - t.document.scrollLeft(), s = e.top - t.document.scrollTop(); i.height = t.uiDialog.height(); i.width = t.uiDialog.width(); i.position = { my: "left top", at: "left" + (o >= 0 ? "+" : "") + o + " top" + (s >= 0 ? "+" : "") + s, of: t.window }; n(this).removeClass("ui-dialog-resizing"); t._unblockFrames(); t._trigger("resizeStop", u, r(f)) } }).css("position", f) }, _trackFocus: function () { this._on(this.widget(), { focusin: function (t) { this._makeFocusTarget(); this._focusedElement = n(t.target) } }) }, _makeFocusTarget: function () { this._untrackInstance(); this._trackingInstances().unshift(this) }, _untrackInstance: function () { var t = this._trackingInstances(), i = n.inArray(this, t); i !== -1 && t.splice(i, 1) }, _trackingInstances: function () { var n = this.document.data("ui-dialog-instances"); return n || (n = [], this.document.data("ui-dialog-instances", n)), n }, _minHeight: function () { var n = this.options; return n.height === "auto" ? n.minHeight : Math.min(n.minHeight, n.height) }, _position: function () { var n = this.uiDialog.is(":visible"); n || this.uiDialog.show(); this.uiDialog.position(this.options.position); n || this.uiDialog.hide() }, _setOptions: function (t) { var i = this, r = !1, u = {}; n.each(t, function (n, t) { i._setOption(n, t); n in i.sizeRelatedOptions && (r = !0); n in i.resizableRelatedOptions && (u[n] = t) }); r && (this._size(), this._position()); this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", u) }, _setOption: function (n, t) { var u, r, i = this.uiDialog; (n === "dialogClass" && i.removeClass(this.options.dialogClass).addClass(t), n !== "disabled") && (this._super(n, t), n === "appendTo" && this.uiDialog.appendTo(this._appendTo()), n === "buttons" && this._createButtons(), n === "closeText" && this.uiDialogTitlebarClose.button({ label: "" + t }), n === "draggable" && (u = i.is(":data(ui-draggable)"), u && !t && i.draggable("destroy"), !u && t && this._makeDraggable()), n === "position" && this._position(), n === "resizable" && (r = i.is(":data(ui-resizable)"), r && !t && i.resizable("destroy"), r && typeof t == "string" && i.resizable("option", "handles", t), r || t === !1 || this._makeResizable()), n === "title" && this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))) }, _size: function () { var t, i, r, n = this.options; this.element.show().css({ width: "auto", minHeight: 0, maxHeight: "none", height: 0 }); n.minWidth > n.width && (n.width = n.minWidth); t = this.uiDialog.css({ height: "auto", width: n.width }).outerHeight(); i = Math.max(0, n.minHeight - t); r = typeof n.maxHeight == "number" ? Math.max(0, n.maxHeight - t) : "none"; n.height === "auto" ? this.element.css({ minHeight: i, maxHeight: r, height: "auto" }) : this.element.height(Math.max(0, n.height - t)); this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", "minHeight", this._minHeight()) }, _blockFrames: function () { this.iframeBlocks = this.document.find("iframe").map(function () { var t = n(this); return n("<div>").css({ position: "absolute", width: t.outerWidth(), height: t.outerHeight() }).appendTo(t.parent()).offset(t.offset())[0] }) }, _unblockFrames: function () { this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks) }, _allowInteraction: function (t) { return n(t.target).closest(".ui-dialog").length ? !0 : !!n(t.target).closest(".ui-datepicker").length }, _createOverlay: function () { if (this.options.modal) { var t = !0; this._delay(function () { t = !1 }); this.document.data("ui-dialog-overlays") || this._on(this.document, { focusin: function (n) { t || this._allowInteraction(n) || (n.preventDefault(), this._trackingInstances()[0]._focusTabbable()) } }); this.overlay = n("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()); this._on(this.overlay, { mousedown: "_keepFocus" }); this.document.data("ui-dialog-overlays", (this.document.data("ui-dialog-overlays") || 0) + 1) } }, _destroyOverlay: function () { if (this.options.modal && this.overlay) { var n = this.document.data("ui-dialog-overlays") - 1; n ? this.document.data("ui-dialog-overlays", n) : this.document.unbind("focusin").removeData("ui-dialog-overlays"); this.overlay.remove(); this.overlay = null } } }) });
// Copyright (C) Microsoft Corporation. All rights reserved.
define("VSS/Controls/Dialogs",["require","exports","VSS/Controls","VSS/Diag","VSS/Events/Services","VSS/Controls/Panels","VSS/Resources/VSS.Resources.Platform","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/UI","VSS/VSS","q","jQueryUI/core","jQueryUI/button","jQueryUI/dialog","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r,u,f,e,o,s,h,c,l){function g(n,t){t&&h.BrowserCheckUtils.isEdge()&&$.each(t,function(t,i){var r=i.click;r&&(i.click=function(t){t&&!$(t.currentTarget).is(":disabled")&&r.apply(n[0],arguments)})})}function nt(n,t){var r=t||"",i;return i=typeof n=="string"?n.split(" "):n,r.split(" ").concat(i).filter(function(n,t,i){return i.indexOf(n)===t}).join(" ")}function ut(n,t){return v.show(n,t)}function et(n,t){return y.showMessageDialog(n,t)}var a=o.delegate,ft=h.domElem,p,v,w,b,k,tt,it,d,y,rt;t.preventClickingDisabledButtons=g;p=function(n){function t(t){n.call(this,t);this._resizeDelegate=a(this,this._onWindowResize)}return __extends(t,n),t.beginExecuteDialogAction=function(n){v._dialogActionInProgress||(v._dialogActionInProgress=!0,n(function(){v._dialogActionInProgress=!1}))},t.create=function(n,t){var o=t&&t.content||$("<div />"),r,u,f,e;return t&&t.contentText&&o.text(t.contentText),r=i.Enhancement.enhance(n,o,t),u=this._getNextDialogZIndex(),r._element.parent().css("z-index",u),r._options.modal&&(f=r._element.parent().next("div.ui-widget-overlay").css("z-index",u-1),(h.BrowserCheckUtils.isIE()||h.BrowserCheckUtils.isEdge())&&(e=f.clone().insertAfter(f),f.css("width","50%"),e.css({"z-index":u-1,width:"50%",left:"50%"}),r._secondOverlay=e)),r._element.parent().children("div.ui-icon-gripsmall-diagonal-se").addClass("ui-icon-grip-diagonal-se"),r},t._getNextDialogZIndex=function(){var t,n,i=0;return $("div.ui-dialog").each(function(){t=Number($(this).css("z-index"));!isNaN(t)&&t>i&&(i=t)}),i<10001?n=10002:(n=i+2,n%2!=0&&n++),n},t.show=function(n,t){return this.create(n,$.extend({autoOpen:!0},t))},t.prototype.initializeOptions=function(t){var i,r,u,f;this._options=this._options||{};n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"dialog",widthPct:.8,heightPct:.8,modal:!0,draggable:!0,resizable:!0,autoOpen:!1,dynamicSize:!0,disposeOnClose:!0,closeText:e.CloseButtonLabelText},t));i=this._options;r=$(window);i.height==="auto"&&(i.height=null);i.minWidth=Math.max(240,parseInt(i.minWidth,10)||0);i.minHeight=Math.max(192,parseInt(i.minHeight,10)||0);i.maxWidth=Math.min(window.innerWidth,parseInt(i.maxWidth,10)||Infinity);i.maxHeight=Math.min(window.innerHeight,parseInt(i.maxHeight,10)||Infinity);this._ensureCtaButton();i.dynamicSize?(i.width=r.width()*i.widthPct,i.height=r.height()*i.heightPct):!i.useLegacyStyle&&i.height&&(u=66,i.subtitle&&(u+=22),f=typeof i.height=="number"?i.height:parseInt(i.height,10),f+=u,i.height=f);i.height&&!isNaN(i.height)&&(i.height=Math.min(i.height,r.height()));i.width&&!isNaN(i.width)&&(i.width=Math.min(i.width,r.width()));i.hideCloseButton&&(i.dialogClass=nt("no-close",i.dialogClass));this._options.useLegacyStyle&&(i.dialogClass=nt("ui-dialog-legacy",i.dialogClass))},t.prototype.initialize=function(){var i=this,e,o;n.prototype.initialize.call(this);var t=this,s=$(window),f=$.extend({},this._options);f.title=this.getTitle();f.close=function(n){i._options.close&&i._options.close(n);i._removeSecondOverlay();i.onClose(n)};f.open=function(n){t._options.open&&t._options.open.call(this,n);t.onOpen(n)};this._bind("dialogdragstart",function(){u.getService().fire("dialog-move",i);i._onDialogMove()});this._options.attachResize&&this._bind("dialogresizestop",this.onDialogResize.bind(this));this._options.resizable&&this._bind("dialogresize",this._onDialogResizing.bind(this));f.dynamicSize&&(u.getService().attachEvent("window-resize",this._resizeDelegate),this._bind("dialogclose",function(){var n=u.getService();n.fire("dialog-close",t);n.detachEvent("window-resize",t._resizeDelegate)}));f.url||r.logTracePoint("Dialog.initialize.complete");g(this.getElement(),f.buttons);this._options.contentMargin===!1&&this.getElement().addClass("no-margin");this.getElement().dialog(f);this._options.useLegacyStyle||(e=this.getElement().parent(),o=e.find(".ui-dialog-titlebar"),o.addClass("bowtie").append($("<div />").addClass("ui-dialog-subtitle")),o.attr("title",this.getTitle()),e.find(".ui-dialog-buttonpane").addClass("bowtie"),e.find("button.ui-dialog-titlebar-close .ui-button-icon-primary").addClass("bowtie-icon bowtie-navigate-close"),(this._options.useBowtieStyle||this._options.bowtieVersion>0)&&e.addClass("bowtie-style"));this.setSubtitle(this.getSubtitle());this.getElement().keydown(function(n){var r,u,i;if(n.keyCode===$.ui.keyCode.ENTER){if(i=$(n.target),(!n.shiftKey&&i.is("input[type='text']")||i.is("textarea")&&n.ctrlKey)&&t._options.defaultButton&&t._options.buttons)return r=t._options.buttons[t._options.defaultButton],r&&(u=$("#"+r.id).button("option"),u.disabled||r.click.apply(this,[n])),!1;if(!i.is("textarea")&&!i.is("a")&&!i.is("button")&&!i.hasClass("propagate-keydown-event"))return!1}});setTimeout(function(){i._autoSizeAndPosition()},0);v._dialogActionInProgress=!1},t.prototype._autoSizeAndPosition=function(){var n=this.getElement(),t=this._options;n&&n.length>0&&$.contains(document.body,n[0])&&(t.preventAutoResize||(t.position&&n.dialog("option","position",t.position),t.height?n.dialog("option","height",t.height):n.dialog("option","height","auto"),this._setMaxHeight()),n.show())},t.prototype._ensureCtaButton=function(){var n=this._options,r,u,t,i;n.noAutoCta!==!0&&(r=/(^cta$)|(^cta\ )|(\ cta\ )|( cta$)/,u=/(^warning$)|(^warning\ )|(\ warning\ )|( warning$)/,$.isArray(n.buttons)&&n.buttons.length>0&&!n.buttons.some(function(n){return r.test(n.class)})&&!n.buttons.some(function(n){return u.test(n.class)})?(i=n.buttons[0].class||"",n.buttons[0].class=i+" cta"):n.buttons&&typeof n.buttons=="object"&&(t=Object.keys(n.buttons),t.length>0&&(t.some(function(t){return r.test(n.buttons[t].class)})||t.some(function(t){return u.test(n.buttons[t].class)})||(i=n.buttons[t[0]].class||"",n.buttons[t[0]].class=i+" cta"))))},t.prototype.onLoadCompleted=function(t){n.prototype.onLoadCompleted.call(this,t);this.setInitialFocus();r.logTracePoint("Dialog.initialize.complete")},t.prototype.setInitialFocus=function(){var n=this._options.initialFocusSelector||":visible:tabbable";this.getElement().find(n).first().focus()},t.prototype.setFormFocusDelayed=function(n){o.delay(this,300,function(){n.eq(0).focus().select()})},t.prototype.setTitle=function(n){this._title=n;this._updateTitle()},t.prototype.getTitle=function(){return this._title||this._options.title||this.getElement().attr("title")||""},t.prototype.setSubtitle=function(n){this._subtitle=n;this._updateSubtitle()},t.prototype.getSubtitle=function(){var n=this._subtitle;return(n===null||n===undefined)&&(n=this._options.subtitle),n||""},t.prototype.centerDialog=function(){this.getElement().dialog("option","position",{my:"center",at:"center",of:window});this._setMaxHeight()},t.prototype.getDialogResult=function(){return this._dialogResult},t.prototype.setDialogResult=function(n){this._dialogResult=n},t.prototype.show=function(){this.getElement().dialog("open")},t.prototype.onOpen=function(){if(!this._options||this._options.hasProgressElement!==!1){var n=$("<div />").addClass("ui-dialog-titlebar-progress-container").appendTo(this.getElement().parent().find(".ui-dialog-titlebar"));this._progressElement=$("<div />").addClass("ui-dialog-titlebar-progress-element").appendTo(n);c.globalProgressIndicator.registerProgressElement(this._progressElement)}u.getService().fire("dialog-open",this)},t.prototype.onClose=function(){u.getService().fire("dialog-close",this);this._progressElement&&c.globalProgressIndicator.unRegisterProgressElement(this._progressElement);this._removeSecondOverlay();this._options.disposeOnClose&&this.dispose();var n=$(".ui-dialog").slice(-1);n.length&&!this._options.noFocusOnClose&&n.focus()},t.prototype.close=function(){this.getElement()&&this.getElement().dialog("close")},t.prototype.dispose=function(){this._removeSecondOverlay();n.prototype.dispose.call(this)},t.prototype._removeSecondOverlay=function(){this._secondOverlay&&(this._secondOverlay.remove(),this._secondOverlay=null)},t.prototype._updateSubtitle=function(){if(this._initialized&&this.getElement()){var n=this.getElement().parent().find(".ui-dialog-subtitle"),t=this.getSubtitle()||"";n.text(t);n.toggle(t.length>0)}},t.prototype.onDialogResize=function(){},t.prototype._updateTitle=function(){this._initialized&&this.getElement()&&this.getElement().dialog("option","title",this.getTitle())},t.prototype._onWindowResize=function(){var t=$(window),n=this._options;this.getElement().dialog("option",{width:t.width()*n.widthPct,height:t.height()*n.heightPct});this.getElement().dialog("option",{position:n.position})},t.prototype._onDialogResizing=function(n,t){var u=$(window),i,r;t&&t.position&&t.size&&(i=Math.min(t.size.height,u.height()-t.position.top),r=Math.min(t.size.width,u.width()-t.position.left),(i!==t.size.height||r!==t.size.width)&&this.getElement().dialog("option",{width:r,height:i}))},t.prototype._onDialogMove=function(){this._options.preventAutoResize||(this._setMaxHeight(),this._ensureDialogContentHeight())},t.prototype._ensureDialogContentHeight=function(){var n=this.getElement().parent().css("height");n!=="auto"?this.getElement().css("height",this.getElement().outerHeight()):this.getElement().css("height","auto")},t.prototype._setMaxHeight=function(){var n=this.getElement().prev().outerHeight(!0)+this.getElement().next().outerHeight(!0);this.getElement().css("maxHeight",window.innerHeight-this.getElement().parent().position().top-n)},t.enhancementTypeName="tfs.dialog",t._dialogActionInProgress=!1,t}(f.AjaxPanelO);t.DialogO=p;v=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(p);t.Dialog=v;w=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"dialog modal-dialog",modal:!0,dynamicSize:!1,width:500,height:"auto",defaultButton:"ok",buttons:{ok:{id:"ok",text:t&&t.okText||e.ModalDialogOkButton,click:a(this,this.onOkClick),"class":"cta",disabled:"disabled"},cancel:{id:"cancel",text:t&&t.cancelText||e.ModalDialogCancelButton,click:a(this,this.onCancelClick)}}},t))},t.prototype.initialize=function(){this._bind(b.EVENT_BUTTON_STATUS_CHANGE,a(this,this.onButtonStatusChange));this._bind("resultReady",a(this,this.onResultReady));n.prototype.initialize.call(this)},t.prototype.updateOkButton=function(n){this.getElement()&&this.getElement().trigger(b.EVENT_BUTTON_STATUS_CHANGE,{enabled:n===!0})},t.prototype.processResult=function(n){var t=this._options.okCallback;n&&($.isFunction(t)&&(t.call(this,n),r.logTracePoint(this.getTypeName()+".callback-complete")),this.close())},t.prototype.onOkClick=function(){r.logTracePoint(this.getTypeName()+".OkClicked");this.processResult(this.getDialogResult())},t.prototype.onResultReady=function(n,t){this.processResult(t)},t.prototype.onCancelClick=function(){$.isFunction(this._options.cancelCallback)&&this._options.cancelCallback();this.close()},t.prototype.onButtonStatusChange=function(n,t){this.getElement().siblings(".ui-dialog-buttonpane").find("#"+(t.button||"ok")).button("option","disabled",t.enabled?"":"disabled")},t.enhancementTypeName="tfs.modaldialog",t.EVENT_BUTTON_STATUS_CHANGE="buttonStatusChange",t}(p);t.ModalDialogO=w;b=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(w);t.ModalDialog=b;k=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({width:400,height:200,resizable:!1,cssClass:"confirmation-dialog"},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this.$errorContainer=$(ft("div")).addClass("confirmation-dialog-error").prependTo(this.getElement()).hide();this.updateOkButton(!0)},t.prototype._onSuccess=function(){this._fire("resultReady",!0);var n=this._options.successCallback;$.isFunction(n)&&(n.apply(this,arguments),r.logTracePoint(this.getTypeName()+".callback-complete"))},t.prototype._onError=function(n){this.$errorContainer.text(n.message).show()},t.prototype.onOkClick=function(t){this.updateOkButton(!1);n.prototype.onOkClick.call(this,t)},t}(w);t.ConfirmationDialogO=k;tt=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(k);t.ConfirmationDialog=tt;it=function(){function n(n){this.button=n}return n.prototype.toString=function(){return"MessageDialogResult: Button: "+(this.button?this.button.id:"?")+" ("+c.ErrorHandler.ignoreRejectedPromiseTag+")"},n}();d=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeOptions=function(t){var u=this,i=$.extend({width:500,height:"auto",hideCloseButton:!0,coreCssClass:"dialog modal-dialog message-dialog",modal:!0,dynamicSize:!1},t),r;i.buttons instanceof Array&&i.buttons.length>0&&(r={},i.buttons.forEach(function(n){r[n.id]=u.getButtonOptions(n)}),i.defaultButton=i.buttons[0].id,this.setDialogResult(i.buttons[i.buttons.length-1]),i.buttons=r);t.escapeButton&&this.setDialogResult(t.escapeButton);n.prototype.initializeOptions.call(this,i)},t.prototype.initialize=function(){var i,t;n.prototype.initialize.call(this);this._options.requiredTypedConfirmation&&this.initializeTypedConfirmation();for(i in this._options.buttons)t=this._options.buttons[i],t.style&&$("#"+t.id).addClass(t.style)},t.prototype.initializeTypedConfirmation=function(){var u=this,f=this.getElement(),n=$("<input type='text' class='textbox message-dialog-confirm-textbox no-match' />"),t=$(),i,r;for(i in this._options.buttons)this._options.buttons[i].reject||(t=t.add($("#"+this._options.buttons[i].id)));r=function(){s.ignoreCaseComparer(n.val(),u._options.requiredTypedConfirmation)==0?(n.removeClass("no-match").addClass("match"),t.button("option","disabled","")):(n.addClass("no-match").removeClass("match"),t.button("option","disabled","disabled"))};n.bind("input keyup",r);f.append($("<div class='message-dialog-confirm'><\/div>").append(n));r(null);o.delay(this,100,function(){n.focus();n.select()})},t.prototype.getPromise=function(){return this._deferred||(this._deferred=l.defer()),this._deferred.promise},t.showMessageDialog=function(n,t){var i,r;return t=t||{},i=$.extend({buttons:[y.buttons.ok,y.buttons.cancel],useBowtieStyle:!0,minWidth:t.width,minHeight:t.height,title:e.Confirm},t),i.content=typeof n=="string"?$("<div />").text(n):n,r=ut(y,i),r.getPromise()},t.prototype.onClose=function(t){if(this._deferred){var i=new it(this.getDialogResult());this._options.beforeClose&&this._options.beforeClose(i.button);i.button.reject?this._deferred.reject(i):this._deferred.resolve(i)}return n.prototype.onClose.call(this,t)},t.prototype.getButtonOptions=function(n){var t=this;return $.extend({click:function(){t.setDialogResult(n);t.close()}},n)},t.buttons={ok:{id:"ok",text:e.ModalDialogOkButton,reject:!1},cancel:{id:"cancel",text:e.ModalDialogCancelButton,reject:!0},yes:{id:"yes",text:e.ModalDialogYesButton,reject:!1},no:{id:"no",text:e.ModalDialogNoButton,reject:!0},close:{id:"close",text:e.CloseButtonLabelText,reject:!0}},t}(p);t.MessageDialogO=d;y=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(d);t.MessageDialog=y;rt=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({width:t.width||600,minWidth:400,height:t.height||450,minHeight:200,attachResize:!0,defaultButton:"close",buttons:[{id:"close",text:e.CloseButtonLabelText,click:a(this,this.close)}]},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this.setTitle(e.CopyContentDialogTitle);this._decorate()},t.prototype._decorate=function(){var r=this.getElement(),n,i=$("<div>").text(this._options.dialogLabel||this._getDefaultLabelText()),t;this._options.dialogLabelExtend&&i.append(this._options.dialogLabelExtend);t=$("<div class='copy-dialog-container'>").append(i).append($("<p>"));this._options.excludeTextPanel||(n=$("<div>"),t.append(n),this._options.copyAsHtml?this._initializeRichEditor(n):(this._initializeTextPanel(n),o.delay(this,100,function(){this._$textArea.focus();this._$textArea.select()})),this._bind("dialogresize",function(){n.css("height",t.height()-i.height()-40+"px")}));r.append(t);this._options.excludeTextPanel||n.css("height",t.height()-i.height()-40+"px")},t.prototype._getDefaultLabelText=function(){return h.BrowserCheckUtils.isMacintosh()?e.CopyContentMacintoshHelpText:e.CopyContentPcHelpText},t.prototype._initializeRichEditor=function(n){var t=this;c.using(["VSS/Controls/RichEditor"],function(r){var u=i.BaseControl.createIn(r.RichEditor,n,{noToolbar:!0,height:"100%",pageHtml:t._options.pageHtml,internal:!0});u.ready(function(){u.setValue(t._options.data);u.bindOnCopy(a(t,function(){o.delay(this,0,function(){this.close()})}));o.delay(t,100,function(){u.selectText();u.setEnabled(!1)})})})},t.prototype._initializeTextPanel=function(n){var t="copy-content-textarea";this._options.textAreaCopyClass&&(t=this._options.textAreaCopyClass);this._$textArea=$("<textarea/>").addClass(t).text(this._options.data);this._$textArea[0].oncopy=a(this,function(){o.delay(this,0,function(){this.close()})});n.append(this._$textArea)},t.enhancementTypeName="CopyContentDialog",t}(w);t.CopyContentDialog=rt;t.show=ut;t.showMessageDialog=et});
define("Admin/Scripts/Resources/TFS.Resources.Admin",["require","exports"],function(require,exports){var e=exports;e.PublicKeysLearnMoreLink="https://go.microsoft.com/fwlink/?LinkID=722443\u0026amp;clcid=0x409";e.PublicKeysLearnMoreText="Learn more";e.AddGroupPermissionsDescriptionOnPremise="Type the name of the Team Foundation Server group for which you would like to add explicit permissions.  You can select from a list by clicking browse.";e.ManageAzureSubscriptionLink="https://go.microsoft.com/fwlink/?LinkID=512046";e.MustCreateProcess="You must create an inherited process before customizing a work item.";e.SecurityIdentitySearchControl_FilterGroups="Filter groups";e.TurnOnNewNavHeader="Turn on new navigation";e.GroupExtensionSubtitle="Group extension";e.ConnectedServiceViewTitle="Azure Service: {0}";e.OptInModel="Opt-in model";e.CreateProjectInformationHeader="Team project information";e.GroupNameAlreadyAdded="This group name already exists in selected page";e.BasicAuthDisabledLinkText="Learn more";e.SvnRepositoryUrl="Subversion repository URL";e.ProcessPageTitleFields="Fields - {0}";e.ExportProgressStartTimeFormat="Started {0} on {1}";e.ImportProcess="Import";e.EndpointDoesnotExist="Endpoint does not exist.";e.DisableNewWorkItemFormLearnMoreText="Learn more on how to revert to the old layout";e.GettingStartedRetryTeamProjectDeletionLink="Retry team project deletion";e.Membership="membership";e.CannotEditAADgroup="Cannot Edit AAD group";e.AddSshConnectionsDialogTitle="Add new SSH Connection";e.DestroyingCannotBeUndone="Destroying a field will delete all data associated with that field, including historical values. Once destroyed, you can\u0027t recover the data.";e.ImportProcessNextStep="More information";e.ExportExpiresInOneMinute="Expires in \u003cb\u003e1\u003c/b\u003e minute";e.ViewStateDialogTitle="View State";e.CreateAField="Create a field";e.RemoveFieldDialogTitle="Remove field";e.RemoveFieldDialogText1="Are you sure you want to remove field \"{0}\" from work item type \"{1}\"?";e.RemoveFieldDialogText2="Data will not be deleted. You can add the field back to the work item type at a later time.";e.TooltipForMalformedDeletingProject="This team project is taking a long time to be deleted and may be in a bad state. It is recommended that the delete be rerun.";e.TeamName="Team name";e.TeamArea="Team area";e.PasswordsDoNotMatchErrorMessage="These passwords don\u0027t match.";e.FeatureEnablement_Finish_Error_Intro="An error occurred. Features could not be configured.";e.ExportDeletionDialogTitle="Warning";e.SubscriptionIdInvalid="Subscription ID must be a valid GUID";e.NonMaterializedPermissions="We could not retrieve the permissions for this user. Permissions will be visible after the user logs into the account.";e.FeatureEnablement_Finish_ConfigurationApplied="Configuration settings have been applied to your team project.";e.GitHubConnectionType="GitHub";e.ProjectDeleteSuccess="Project \"{0}\" successfully deleted.";e.ConnectionLabel="Connection:";e.IdentityPickerDialog_AddUsersAndGroupsTitle="Add users and groups";e.TeamAdminIdentityPickerDialog_SearchInstructions="To add a team administrator, just type their sign-in address or display name";e.AddGroupHeaderHosted="Add a Visual Studio Team Services group";e.ErrorNoWorkingDaySelected="You have not selected a working day. This is not a valid configuration. You must select at least one working day to be able to use the burndown and the capacity planning.";e.FeatureEnablement_Verify_LoadingInfo="Inspecting process templates for compatibility with your team project ...";e.LearnEditFieldLink="https://go.microsoft.com/fwlink/?LinkId=690591";e.NewWitDialogDescriptionLabel="Description";e.SetUpBillingLinkText="Learn more";e.TeamProjects="Team projects";e.Congratulations="Congratulations!";e.ReferencedFieldCannotBeDestroyed="Field \"{0}\" cannot be destroyed as there are work item types that use this field. Please remove the field from the following work item types before destroying: {1}.";e.GroupIllegalCharacters="\u0027\u0026\u0027 character is prohibited in group name";e.NewWitDialogColorLabel="Color";e.NewWitCreateButton="Create";e.ConfigureNewWorkItemFormRadioLabel_OptIn="Enable opt-in for all users";e.ConfigureNewWorkItemFormRadioLabel_Force="New form only";e.InvitationCodeRequest="Thanks for your interest in our Visual Studio Team Services Program. To obtain an invitation code register your email address and we will send you a new code as soon as we start accepting new accounts.";e.SecurityDialogTitle="Permissions for {0}";e.DeleteProject="Delete Project";e.ErrorAddingTeamAdmin="Error(s) adding team administrator";e.EnterAValue="Enter a value";e.LearnAddPage="Learn more about adding a page";e.AddFieldDialog_ErrorsInTab="You have errors in this tab";e.EditGroupLearnMoreLink="https://go.microsoft.com/fwlink/?LinkID=718197";e.AssociatedAutomationControlSubtitle="Associated Automation Details";e.UndoInProgress="Undoing...";e.TryOutCompanion="Try Test Manager extension for free for 90 days.";e.MustSelectDefaultTeam="You must select a default team in order to change the profile picture for a team project.";e.ErrorSavingWorkItemTypeBacklogs="An error occurred while saving your selection. Someone else may have made modifications before you did. Please refresh the page and try again.";e.AddMemberPermissionsDescriptionHosted="To add explicit permissions for a user, type their display name or email address.";e.AddFieldDialog_GroupRequired="Fields of this type cannot be added to a page that has no groups.";e.ConfigureNewWorkItemFormHeader="Opt-in model";e.TeamSettings_WorkingDaysValueProp="Capacity and burndown are based on the days your team works.";e.DisconnectSpnEndpointInprogress="Cleaning up Service Principal details...";e.NewTeamProjectMenuItem="New team project...";e.ProcessPageTitleWorkItemTypes="Work Item Type - {0} - {1}";e.FeatureEnablement_LinkText_ConfigurationEducation="Learn more about these configuration changes";e.RemoveInProgress="Removing...";e.NoControlContributionsFound="No control contributions found";e.NoIdentitiesFound="No identities found in current scope.";e.NewTeamAltText="New team";e.Failed="FAILED";e.StateUnHideState="Unhide";e.ThisAccountNotAAD="This account is not backed by Azure Active Directory. ";e.Boolean="Boolean";e.Filter="Filter";e.Fields="Fields";e.IdentityType="Identity type";e.Friday="Friday";e.AddFieldDialog_PicklistMustHaveAtLeastOneValue="The picklist must contain at least one value. Please add an item to your picklist.";e.WeakPasswordErrorMessage="The password provided does not meet the minimum security requirements. The password must have at least 8 characters and contain at leastÂ three of the following: uppercase letters, lowercase letters, numbers, and symbols.";e.RenameProjectLocalWorkspacesLinkText="local workspaces";e.ExportConfirmationDialogText="\u003cdiv\u003e\u003ctable\u003e\u003ctr\u003e\u003ctd\u003e\u003cimg src=\"{0}\" style=\"vertical-align:middle\"\u003e\u003c/img\u003e\r\n           \u003c/td\u003e\u003ctd style=\"padding-left:12px\"\u003e\r\n           \u003cspan\u003eSince Visual Studio Team Services receives updates and improvements more frequently than Team Foundation Server, moving your team project collection to an on-premises server may result in data and feature loss.  For more information on what artifacts will be lost when downgrading to the current on-premises target, click\r\n           \u003c/span\u003e\u003c/span\u003e\u003ca href=\u0027https://go.microsoft.com/fwlink/?LinkID=329853\u0027 target=\u0027_blank\u0027 \u003ehere\u003c/a\u003e.\u003c/div\u003e\r\n           \u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\u003c/div\u003e\r\n    ";e.ShowNodeInLayoutContextMenuTooltip="Show the {0} on the form layout. Any previous data will appear again.";e.Tuesday="Tuesday";e.CredentialsUsernamePrimary="User name (primary)";e.ConnectedServiceDoesnotExist="Azure Service does not exist.";e.PageNameRequired="Page name cannot be empty";e.EditPageLearnMoreLink="https://go.microsoft.com/fwlink/?LinkId=821336";e.UnexpectedServerError="The server returned an unexpected error.";e.RemoveAction="Remove";e.AadGroupUsersAutoAssignLicense="Users in this group will be automatically assigned a license from the available pool at first signon. You can manage licenses for users in the user hub. \u003ca href=\"https://go.microsoft.com/fwlink/?LinkID=398168\" target=\"_blank\"\u003eLearn more\u003c/a\u003e";e.SorryNoDelete="The server returned an unexpected error, Please try again.";e.ProcessSelectorNoMatchingProcesses="No process names contain the filter text";e.Delete="Delete";e.Direct="direct";e.NewOwner="New owner";e.ProcessUploadDescription="Applying process changes";e.Domain="Domain";e.UploadProcessSuccessful="Process imported successfully";e.Monday="Monday";e.MoveUp="Move up";e.ProcessEmptyPageText="Your Page Is Empty";e.SshKeyHelpText="Provide entire contents of the private key file.";e.GitHubOauthAutherizedFormat="Authorized as GitHub user \u0027{0}\u0027";e.AddAPageTo="Add a page to {0}";e.OnlyCustomFieldsCanBeDestroyed="Only custom fields can be destroyed";e.PersonalExtensionsGroupName="Personal extensions (visible only to you)";e.CreateInheritedProcess="Create inherited process from {0}";e.ExportConfirmationDialogTitle="Warning";e.ProcessOverrideDescription="Process \u0027{0}\u0027 already exists.";e.TeamSettings_NoPermissionsBacklog="backlogs";e.FieldGridHeaderDescription="Description";e.Browse="Browse";e.CompanionFeaturesEnabled="Test Manager extension is currently enabled for all users.";e.Thursday="Thursday";e.ExportDownloadConfirmationDialogText="\u003cdiv\u003e\u003ctable\u003e\u003ctr\u003e\u003ctd\u003e\u003cimg src=\"{0}\" style=\"vertical-align:middle\"\u003e\u003c/img\u003e\r\n           \u003c/td\u003e\u003ctd style=\"padding-left:12px\"\u003e\r\n           \u003cspan\u003eThe content you are about to download includes a configuration file that provides access to your exported data.  Anyone who has the information in this file will be able to download your data, so you should be sure not to share it with anyone.  Please confirm that you would like to continue.\r\n           \u003c/span\u003e\r\n           \u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\u003c/div\u003e\r\n    ";e.Permissions_Description="You can add your team to any existing security group to automatically inherit permissions.";e.FeatureEnablement_ProcessTemplate_InvalidWithErrors_Intro="There are no process templates available with valid configuration settings for this team project. The closest match is:";e.TeamSettings_BugsBehaviorValueProp="Bugs act like either backlog items or tasks.";e.DoNotAddToSecurityGroup="(Do not add to a security group)";e.DefaultProcess="{0} (default)";e.FieldGridContextMenuEdit="Edit";e.Cancel="Cancel";e.TeamSettings_NoPermissionsWorkingDays="working days";e.SshUserNameIsRequired="The user name is required";e.Change="Change";e.ConnectionNameIsRequired="The connection name is required";e.DeleteAccountHeader="DELETE ACCOUNT";e.Create="Create";e.SendMailSendButton="Send";e.AuthorizationNotSuccessful="Authorization was not successfully granted";e.PageNameAlreadyAdded="This page name already exists in the layout";e.PasswordsMustMatch="Passwords must match";e.DeleteNewLayout="Delete new layout";e.ConfigureNewWorkItemFormRadioDescription_AdminOnly="Only Collection Administrators will see the \u003cb\u003eTry the new form\u003c/b\u003e hyperlink that allows them to opt-in to use the new form layouts.";e.GitHubOauthAutherizationFailedFormat="Authorization failed: {0}";e.ProjectDeleting="Deleting team project...";e.DisconnectServiceConfirmation="Disconnecting this service will delete all associated deployment environments. Revoke OAuth access under the Connections tab in your user profile to prevent {0} from connecting to this hosted TFS account:\u003cbr /\u003e\u003cbr /\u003e{1}\u003cbr /\u003e\u003cbr /\u003e\u003cstrong\u003eAre you sure you want to disconnect {0}?\u003c/strong\u003e";e.SvnConnectionType="Subversion";e.FeatureEnablement_ChangesToBeAppliedToProject="To configure these features, a few work item types may be added and some existing ones may slightly be modified.";e.FindMembers="Find members";e.Iterations="Iterations";e.ConnectionTypeOauth="OAuth";e.ConnectionStatusVerifying="Verifying...";e.ControlExtensionControlLabel="Control";e.NotSet="Not set";e.JoinGroup="Join group";e.AddTfsGroupHosted="Add VSTS Group";e.PreferredEmail="Preferred email";e.ConfirmUserAAD="Confirm this user has been added to your Microsoft Azure Directory.";e.DeleteProjectInformationHeader="Deleting project \"{0}\"";e.ExportExpiresInMinutes="Expires in \u003cb\u003e{0}\u003c/b\u003e minutes";e.EnterANumericValue="Enter a numeric value";e.ShowBugsAsRequirements="AsRequirements";e.Online="Online";e.CustomProcessName="Custom process name";e.IdentityPickerDialog_SearchInstructions_AsMember="To add this user or group as a member of other groups, type aliases or display names of the groups that you want to add to";e.ErrorJoiningOne="Unable to join 1 group.";e.FieldLayoutSection1InfoText="Multi-line text fields are given a unique group in the column selected below.";e.LayoutViewDescription="\u003cspan\u003e For each work item type, you can add, modify, move or remove custom fields, groups and pages. And you can also modify the attributes of an inherited field, group or page (\u003c/span\u003e\u003cspan class=\"{0}\" \u003e\u003c/span\u003e) as well as hide inherited fields. \u003ca href=\"http://go.microsoft.com/fwlink/?LinkId=800032\" target=\"_blank\" rel=\"external\"\u003eLearn more\u003c/a\u003e";e.PicklistAddItem="Add value";e.AdminLayoutMoveErrorDialogTitle="Cannot move the {0}";e.DoNotHavePermissions="You do not have the necessary rights to manage these permissions.";e.NewAccountUrl="New account URL";e.Layout="Layout";e.AdvancedLicenseName="Advanced";e.Locale="Locale";e.AccountBackedByAADNoTenant="This account is backed by Azure Active Directory.";e.TeamWorkItem_UseChildren="Include sub-areas";e.ImportProcessAttachmentText="Select the location of the zip file that contains the process template to import.";e.DisableGuestUserAccess="External guest access";e.NoParentGroupForTeamConfirmation="This team has not been added to a security group. If a user is added to this team and does not have permissions granted to them in any other way, they will not have permission to access the project.\r\n\u003cbr/\u003e\u003cbr/\u003e\r\nDo you want to create a team that is not in a security group?";e.TeamSettings_BacklogVisbilitySectionHeader="Backlog navigation levels";e.DeleteUser="Delete user";e.DeleteTeam="Delete team";e.ExportProgressUnknown="Unknown";e.SshHostHelpText="Host name or IP address of the remote machine.";e.UnableToFindExtension="Could not find the specified extension file \u0027{0}\u0027. Check the file name and try again.";e.DisabledWorkItemsBlockText="Disabled";e.AccountDeleteCustomReason="Please specify a reason for deleting your account:";e.JoinGroupDescriptionHosted="Type the name of the Visual Studio Team Services group you would like this identity to join.  You can select from a list by clicking browse.";e.ContributorsGroupName="Contributors";e.InvitationCodeRemainingUses="({0} uses left)";e.WorkItemTypeNameConstraints="Name cannot be a number or contain the following characters: \u0027.,;~:/\\*|?\"\u0026%$!+=()[]{}\u003c\u003e-";e.DoNotShowOnBacklogsOrBoards="Don\u0027t show this on backlogs or boards";e.ChangeProcess="Change process";e.SshPortHelpText="Port number on the remote machine to use for connecting.";e.SshPassword="Password or passphrase";e.LimitedPermissionsTooltip="You do not have permission to make changes.";e.FieldsViewDescriptionToolTip="For each work item type, you can add or modify a custom field, or modify the attributes of an inherited field. System fields are read-only.";e.DeleteProjectDialogTitle="Delete Project";e.LearnMoreTrialFeature="Learn more about upgrading license(s).";e.CredentialsHeader="Alternate authentication credentials";e.Projects="Projects";e.ChatRoomGroupedPermissionChat="Chat";e.BasicAuthEnableCredentials="Click here to enable";e.ProcessStatesGridInherited="Inherited";e.TimeZone="Time zone";e.ADDANAADGROUP="ADD AN AAD GROUP";e.CredentialsConfirmPassword="Confirm password";e.ExportProgressComplete="Complete";e.ChangeTeamProjectProcess="Change team projects to use {0}";e.General="General";e.UsernameOrScope="Username Or Scope";e.TeamSettings_NoPermissionsBugs="bugs";e.ProcessOverview="Process Overview";e.DefaultLicenseName="{0} (default)";e.AddGroupDialog_PageRequired="Page cannot be empty";e.PromoteProcessNotStarted="Scheduling update...";e.FieldName="Field name";e.FieldType="Type";e.LearnMoreAADGuestUserFLink="https://go.microsoft.com/fwlink/?LinkId=716883";e.PicklistString="Picklist (string)";e.FeatureEnablement_ProcessTemplate_CannotConfigureReasons="Listed below are the reasons why the configuration settings in this template are not valid.";e.EnableProcess="Enable Process";e.DeleteConnectedService="Disconnect";e.NewServiceEndpoint="New Service Endpoint";e.CollectionUnavailableError="The collection might have gone offline. You can refresh the page and we will try this again. Details: {0}";e.ExportProgressExporting="Exporting";e.AddMenuItem="Add...";e.FeatureEnablement_Finish_AdditionalConfiguration="Additional configuration options are available.";e.Boolean_True="True";e.PluginEnableWarningMessage="Warning: Enabling this extension will grant it access to userâ€™s data in Team Foundation Server.\r\n\r\nDo you want to grant access to this extension?";e.DeletingYourAccountErrorHeader="This account is linked to an Azure subscription. You must \u003ca href = https://go.microsoft.com/fwlink/?LinkID=511319\u0026clcid=0x409\u003eunlink the subscription\u003c/a\u003e before you delete your account.";e.NoTeams="No teams available.";e.DisablePublicKey="SSH authentication";e.AddGitHubConnectionsDialogTitle="Add new GitHub service connection";e.ExportDateAtTimeFormat="{0:D} at {1:T}";e.ShowBugsAsRequirementsLabel="Bugs appear on the backlogs and boards with requirements.";e.DoNotShowBugsLabel="Bugs do not appear on backlogs or boards.";e.JoinGroupHeaderHosted="Join a Visual Studio Team Services group";e.FeatureEnablement_LinkText_EnabledFeaturesEducation="Learn more about the enabled features";e.DisableNewWorkItemFormCheckboxText="I understand that reverting the collection to the old form can disrupt operations.";e.IdentityPickerDialog_SearchInstructions="To add users or groups to this group, just type their sign-in addresses or group aliases";e.DefaultTeamName="{0} (default team)";e.PageLayoutDescription="Add a new page to store your work items\u0027 fields and groups.";e.GroupName="Group name";e.LayoutViewDescriptionToolTip="For each work item type, you can add, modify, move or remove custom fields, groups and pages. And you can also modify the attributes of an inherited field, group or page as well as hide inherited fields.";e.CredentialsEnable="Enable alternate credentials";e.TeamSettings_AttemptToFixConfiguration="To attempt to fix the configuration, run {0} or {1}.";e.CannotEditAADGroupHere="Cannot Edit AAD group here";e.ConnectionTypePersonalAccessToken="personal access token";e.ErrorNoBacklogLevelSelected="You have not selected a backlog level. This is not a valid configuration. You must select at least one backlog level to use the agile tools.";e.ImportProcessUpdateCloseDescription="You can safely close the dialog while team projects get updated in the background.";e.LayoutToolBarNewControlExtension="Add custom control";e.RenameProject="Rename Project";e.WorkItemTypeViewStatesTitle="{0}: States";e.SorryNoUpdate="Sorry, the account cannot be renamed within one hour of the most recent rename.";e.DateTime="Date/Time";e.CredentialsExplanation="Some applications that work outside the browser (including Team Explorer Everywhere command line client and the git-tf utility) require basic authentication credentials. Other applications do not properly handle using an e-mail address for the user name during authentication.\u003cbr /\u003e\u003cbr /\u003eTo work with these applications, you need to enable alternate credentials, set a password, and optionally set a secondary user name not in the form of an e-mail address. Please note that alternate credentials cannot be used to sign in to the service from a web browser or outside of these applications. \u003ca href=\u0027https://go.microsoft.com/fwlink/?LinkID=257884\u0027 target=\u0027_blank\u0027\u003eLearn more\u003c/a\u003e";e.MustBeAdminToModifyProcess="You do not have sufficient permissions to modify this process.";e.DeleteTeamDescription="Are you sure? This action cannot be undone. This will permanently delete the team {0}. Deletion includes backlog and board configurations, team capacity data, and other team information.";e.CreateProjectProjectCreated="Your project is created and your team is going to absolutely love this.";e.TeamSettings_WorkingDaysSectionHeader="Select days";e.FeatureEnablement_LinkText_ManualConfigurationHelp="Learn how to configure features manually";e.TeamWorkItem_DefaultValue="Use as default";e.ProcessSecurityTitle="Process-level security for {0}";e.ShowNodeInLayoutContextMenuText="Show on layout";e.CreateProjectCreatingProject="Creating team project...";e.AddFieldDialog_InvalidIntegerValue="Invalid integer value";e.Revert="Revert";e.Region="Region";e.Remove="Remove";e.CreateInheritedProcessTooltip="Create inherited process";e.DeleteProjectUrlText="deleting a team project";e.ProcessUploadCompletedDescription="Process updates completed";e.SshKey="Private key";e.Sunday="Sunday";e.CopyToClipboard="Copy to clipboard";e.AddGroupHeaderOnPremise="Add a Team Foundation Server group";e.Status="Status";e.AddControlExtensionDialog_GroupRequired="Control extensions cannot be added to a page that has no groups.";e.String="Text (single line)";e.NewTeam="New team";e.Search="Search";e.ExportDownloadConfirmationDialogTitle="Warning";e.ProcessFieldsViewDescription="\u003cspan\u003e This page lists all fields in the process including system fields (\u003c/span\u003e\u003cspan class=\"{1}\" \u003e\u003c/span\u003e) and the fields from the parent process (\u003c/span\u003e\u003cspan class=\"{0}\" \u003e\u003c/span\u003e). From this page you can only delete custom fields (no icon). \u003ca href=\"http://go.microsoft.com/fwlink/?LinkId=800032\" target=\"_blank\" rel=\"external\"\u003eLearn more\u003c/a\u003e";e.FeatureEnablement_Welcome_PartiallyConfigured="Incorrectly configured (will be skipped)";e.SelectColumnForHtmlField="Select the column for this group.";e.NoGroupForSelectedPage="The page you have selected has no groups";e.ExportProgressQueued="Queued";e.TooltipForMalformedCreatingProject="This team project is taking a long time to be created and may be in a bad state. It is recommended that it be deleted and recreated.";e.Administrators="Administrators";e.ExternalGitConnectionType="External Git";e.ImportProcessLearnLinkDescription="During upload, the system replaces the Build, Lab, Groups and Version Control plug-ins with defaults, and ignores Project Mapping, Reporting, and Windows SharePoint Services plug-ins.";e.DefaultPicklistElement="default";e.AdminTeamWorkItems_Title="Team field";e.FeatureEnablement_Welcome_FeaturesConfigured="Some features are already configured.";e.DeletePageConfirmationTitle="Remove page from layout";e.CreateProjectProjectNameInvalid="The following project name is not valid: \u0027{0}\u0027.";e.DefineField="Definition";e.RequiredField="Required field.";e.SystemProcess="[system process]";e.ProfileImage="Profile image";e.DisableWorkItemTypeCheckboxText="Disable this work item type";e.FeatureEnablement_Welcome_Button_Verify="Verify";e.WorkItemTypeOverviewCustomTypeDescription="Edit the attributes of the work item type.";e.WorkItemTypeUsageAll="All";e.ProjectMigrationSuccessful="Project change successful";e.CreateGroup="Create group";e.StatesViewDescription="For each work item type, you can customize the workflow to support your team\u0027s process. From this page you can add and remove custom states as well as hide inherited states ({0}).";e.Project="Project";e.Process="Process";e.Profile="Profile";e.FieldOptionsDescription="Set options for the field";e.RemoveFieldFromLayoutTooltip="Remove the field from the form layout, but keep it in the work item type. Data will not be deleted.";e.SetUpBillingFwdLink="https://go.microsoft.com/fwlink/?LinkID=512045";e.SetSecondaryUsername="Set";e.TeamSettings_WorkingDaysTitle="Working days";e.TeamSettings_BacklogVisbilityValueProp="See only the backlogs your team manages.";e.InheritedDeny="Inherited deny";e.CredentialsPassword="Password";e.TimeFormatHint="Select how to display times";e.SelectFieldDescription="Add a field to store custom, queryable data about your work items.";e.StartFeatureTrial="Start account trial";e.DeleteProjectInfo="Are you \u003cb\u003eABSOLUTELY\u003c/b\u003e sure? This action \u003cb\u003eCANNOT\u003c/b\u003e be undone. This will permanently delete the team project \u003cb\u003e{0}\u003c/b\u003e. Deletion includes all work items, source control items, teams, builds, and other artifacts within the team project.";e.SearchServicesText="Search Services...";e.BugsOnBacklogFwdLinkText="Learn more.";e.InvalidFileType="Invalid file type selected. Please select a valid zip file.";e.DisableNewWorkItemFormWarning="Warning: Read the following carefully before reverting!";e.NoPermissionsToAddAADGroupToVSOGroups="You do not have sufficient permissions to add an AAD group to the following VSTS groups: {0}";e.InvalidAccountName="Please enter a valid account name.";e.NewWorkItemFormConfigureLinkLabel="Configure the opt-in model";e.ExportContinue="Continue";e.FeatureEnablement_Wizard_Title="Configure Features";e.StateColorPickerNoColor="No color";e.AddUserTableText="Identities";e.LearnEditPage="Learn more about editing a page";e.ManageProcessSecurity="Manage process security";e.FieldsViewDescription="\u003cspan\u003e For each work item type, you can add or modify a custom field, or modify the attributes of an inherited field (\u003c/span\u003e\u003cspan class=\"{0}\" \u003e\u003c/span\u003e). System fields (\u003c/span\u003e\u003cspan class=\"{1}\" \u003e\u003c/span\u003e) are read-only. \u003ca href=\"http://go.microsoft.com/fwlink/?LinkId=800032\" target=\"_blank\" rel=\"external\"\u003eLearn more\u003c/a\u003e";e.ExtensionUploadError="Unknown error while updating the extension.";e.NewConnectedService="New Service";e.SvnServerUrlHelpText="If you use this authentication credential as a main Subversion repository connection endpoint, you should specify the full repository URL,\r\ne.g. \u003ccode\u003e`https://svnserver/repo`\u003c/code\u003e or \u003ccode\u003e`svn://svnserver:3690/repositories/myrepo`\u003c/code\u003e.\r\nThe `Realm name` parameter is optional in this case.\r\n\u003cbr\u003e\u003cbr\u003e\r\nIf you use this authentication credential as an additional connection endpoint for Subversion externals, you may specify the schema, hostname, and port only,\r\ne.g. \u003ccode\u003e`https://svnserver:443`\u003c/code\u003e or \u003ccode\u003e`svn://svnserver:3690`\u003c/code\u003e.\r\nThe `Realm name` parameter is required in this case.";e.LearnExtensionLink="https://go.microsoft.com/fwlink/?LinkId=690591";e.BugsAsTasksTaskBoardImageTitle="Bugs on the task board";e.DialogExtensionFileTitle="Extension file";e.AddTfsGroup="Add TFS group";e.AddAadGroup="Add AAD Group";e.Iteration="Iterations";e.BrowseTeam="Browse team";e.AdvancedAdminTasks="Advanced administration tasks";e.StateEditDialog_NoSuggestedStates="No Suggested States";e.ProjectName="Project name";e.NoServiceDescription="No Services found.";e.FieldGridHeaderDefaultValue="Default value";e.TfsGroup="Team Foundation Server group";e.TypeInTheAccountName="Confirm that you really want to delete the account by typing the name of your account.";e.ProcessFilterWatermarkText="Filter processes";e.DisableNewWorkItemFormLinkLabel="Disable the new work item form";e.AddWindowsMembers="Add Windows user or group";e.ErrorJoining="Unable to join {0} groups.";e.Connect="Connect";e.Control="control";e.CreateNewLayout="Create new layout";e.AddPermissionsUserTableText="Identity";e.ConfigureNewWorkItemFormLearnMoreUrl="https://go.microsoft.com/fwlink/?LinkId=761097";e.CreateNewGroupHosted="Create new Visual Studio Team Services group";e.DateFormat="Date pattern";e.BacklogChangeHideInfo="The {0} work item type will no longer appear in the {1} level backlog and board.";e.SubscriptionNameInvalid="Enter a valid subscription name";e.AddAFieldTo="Add a field to {0}";e.RenameProjectInfo2="If your teams are using {0}, then it is recommended that they update to the Visual Studio 2017, Visual Studio 2015, Visual Studio 2013 Update 5, or Visual Studio 2012 Update 5 to have these workspaces be corrected on the next get. Visual Studio 2010 only supports server workspaces and doesnâ€™t need an update. If they can\u0027t update then they will need to shelve their changes, create a new workspace, and unshelve their changes.";e.RenameProjectInfo3="For more details see {0}";e.ControlContributionEditDisabledTooltip="Editing is disabled while contributions are loading";e.ProjectRenaming="Renaming team project...";e.CreateProjectDialogTitle="Create team project";e.Password="Password/Token Key";e.NoServiceTitle="Services";e.Overview="Overview";e.GroupLayoutDescription="A group shows logically related fields together.";e.RemovePageFromLayoutDialogText1="This action cannot be undone. If you delete this page, its layout will be lost.";e.RemovePageFromLayoutDialogText2="Are you sure you want to delete the page {0}?";e.Inheritance="Inheritance";e.ProcessOverrideDescriptionReplace="Are you sure you want to replace this?";e.DeleteAadGroupWarning="This will delete the group {0} from VSTS. Use Azure portal to delete the group permanently.";e.AddFieldDialog_FieldNameAlreadyAddedToWIT="The field name is already used.";e.SetUpBillingText="Set up billing for your account";e.RemoveTeamAdminTitle="Remove team administrator";e.ConnectionTypeCredentials="credentials";e.DisableNewWorkItemFormTitle="Disable the new work item form and revert back to the old layout";e.FieldNameCannotContainOnlyNumbers="Field name cannot contain only numbers";e.IdentityPickerDialog_SeparateBySemicolons="Use semicolons to separate multiple entries";e.SvnAcceptUntrustedCertsHelpText="Allows the SVN client to accept self-signed SSL server certificates without installing them into the TFS service role and/or Build Agent computers. \u003cbr\u003e\u003cbr\u003e Same as the `--trust-server-cert` option of the `svn` command line utility.";e.DisconnectServiceEndpointConfirm="Are you sure you want to disconnect {0}?";e.WorkItemTypeColor="Color";e.ExtensionsEnableButton="Enable";e.ExportExpiresInHours="Expires in \u003cb\u003e{0}\u003c/b\u003e hours";e.Collection="Collection";e.EditStateMenuItem="Edit";e.ControlExtensionSubtitle="Control extension";e.SaveChanges="Save changes";e.CreateGroupText="Create new group";e.DeleteAccount="Delete";e.Identity="Identity";e.TeamSettings_BacklogVisbilityTitle="Backlogs";e.WorkItemTypeNameRequired="Work item type name cannot be empty";e.ErrorThisAccountNotAAD="Error: This account is not backed by Azure Active Directory.";e.SendMailTo="To";e.NewStateDialogTitle="Add a state to {0}";e.ServiceEndpointRoleAssignmentsPermissionDeniedMessage="You do not have permission to manage this service endpoint\u0027s roles.";e.TeamWorkItem_FieldLabel="Specify the values this team is responsible for";e.ControlExtensionDialogTitle="Add a custom control to {0}";e.DestroyWitConfirmDialogConfirmation="Please type the name of the work item type to confirm.";e.TfsGroups="TFS groups";e.ChangePicture="Change picture";e.ConnectionStatusNotVerified="Not Verified";e.SendMailTitle="Send mail";e.NoParentGroupForTeamConfirmationTitle="Create a team without permissions";e.Language="Language";e.BasicAuthDisabledFwdLink="https://go.microsoft.com/fwlink/?LinkId=518601";e.Wednesday="Wednesday";e.CannotDeleteAccountOwnerFromAccountAdminGroup="Cannot remove the account owner from the account Team Foundation Administrators group.";e.ProcessNameMustBeUnique="Process name must be unique";e.DisableWorkItemTypeLegend="Disabling a work item type will prevent new work items of that type from being created. Existing items can be modified and will continue to appear on backlogs, boards, and queries.";e.AddFieldDialog_NameRequired="Field name cannot be empty";e.TracePermissionText="Why?";e.ExportHubText="Export";e.TypeAADGroupName="Type the name of the AAD group you would like to add as a member of this identity. You can select from a list by clicking browse.";e.BacklogChangeSavedInfo="Backlog level successfully changed.";e.ProjectMigrationLink="https://go.microsoft.com/fwlink/?LinkID=616878";e.ProcessValidationFailed="Process validation";e.DisableProcess="Disable Process";e.FeatureEnablement_Welcome_VerifyPrompt="Select verify to verify if these features can be configured automatically.";e.SshFingerprintMessage="Compare the server fingerprint when you connect via Git to ensure youâ€™ve connected to the real TFS server.";e.TrialEndToday="Trial will end today";e.Decimal="Decimal";e.LayoutToolBarNew="New";e.ProcessValidationFailedWarning="I understand that \u003ca href=\"{0}\" target=\u0027_blank\u0027\u003eall team projects\u003c/a\u003e which reference process \u0027{1}\u0027 will be updated.";e.ErrorLeaving="Unable to leave selected group.";e.InstallNewExtensionDialogTitle="Install new extension ";e.EditFieldIn="Edit field {0} In {1}";e.Destroy="Destroy";e.LayoutContextMenuNewField="New field";e.EndpointViewTitle="Endpoint: {0}";e.DeleteProjectNotStarted="Scheduling team project deletion...";e.JoinGroupHeaderOnPremise="Join a Team Foundation Server group";e.AddWindowsIdentity="Add Windows identity";e.ProcessValidationWarningDescription="Importing process \u0027{0}\u0027 will result in changes that cannot be undone.";e.PicklistInteger="Picklist (integer)";e.DefaultGroupName="Custom";e.HideFieldFromLayoutDialogText1="Are you sure you want to hide field \"{0}\" from the form layout of work item type \"{1}\"?";e.HideFieldFromLayoutDialogTitle="Hide field from layout";e.ProcessFieldsViewDescriptionToolTip="This page lists all fields in the process including system fields and the fields from the parent process.";e.EnableNewWorkItemFormTitle="Enable the new work item form layout";e.AdminLayoutRemovePageDialogTitle="Cannot remove page";e.CouldNotFetchEndpointTypes="Could not retrieve available endpoint types";e.Boolean_False="False";e.AdminLayoutShowHideErrorDialogTitle="Cannot {0} the {1}";e.NoGroupWatermark="Not visible on the form";e.ExportProgressDowngrading="Applying Downgrade";e.GetProcessTemplatesError="An error occurred attempting to load the process templates.  Try again or contact your system administrator.";e.ProcessNotEnabled="The process is not enabled.";e.SetDefaultLicense="Set as default access level";e.BacklogChangeRemovingGroupWithCustomFieldWarning="You have custom field in the \"{0}\" group that will be removed from the backlog. To preserve them, move them to a new group.";e.AdminRequired="At least one administrator is required";e.ConfigureNewWorkItemFormRadioLabel_AdminOnly="Enable opt-in for Collection Admins";e.SshHostIsRequired="The host name is required";e.UnableToEditAdminGroup="Administrator group cannot be modified.";e.ImportProcessConfirmation="Import process confirmation";e.FeatureEnablement_LinkText_FeatureEducation="Learn more about these features";e.WorkItemStateDialog_Name="Name";e.TeamWorkItem_SpecifyAdditionValues="Specify additional values";e.FeatureEnablement_ProcessTemplate_CannotConfigure="Your team project cannot be configured automatically.";e.ExtensionsVersionText="Version";e.ChatRoomGroupedPermissionAdminister="Administer";e.ControlContributionEditDisabledErrorMessage="An error occurred while loading control contributions.  Editing control contributions is disabled. Please refresh your page to enable  editing.";e.RemoveGroupFromLayoutTooltip="Remove the group from the form layout";e.NewTeamMenuItem="New team";e.Expanded="expanded";e.PromoteProcessRetry="Retry update process";e.TreePath="Tree path";e.ChangePassword="Change";e.Collections="Collections";e.AddMembers="Add user";e.BacklogChangeAddedFieldInfo="The {0} field has been added to the work item type.";e.DeleteDefaultProcessTemplate="You can\u0027t delete process \u0027{0}\u0027 because it is the default process. To delete the process, you need to \u003ca href=\"https://go.microsoft.com/fwlink/?LinkId=529212\" target=\u0027_blank\u0027\u003echange the default process\u003c/a\u003e and try again.";e.AddFieldDialog_FieldNameCreated="The field name already exists.";e.CannotEditWindowsGroups="Cannot edit members of Windows groups";e.PromoteProcessError="There was an error while updating the process \u0027{0}\u0027. One or more projects failed to get updated. Please upload the process again and if the problem persists \u003ca href=\"https://go.microsoft.com/fwlink/?LinkId=534538\" target=\u0027_blank\u0027\u003econtact our support team\u003c/a\u003e";e.ProcessUploadFailedDescription="Apply process changes failed";e.ExportExpiresInDays="Expires in \u003cb\u003e{0}\u003c/b\u003e days";e.ShowFieldInForm="Show this field in form";e.MicrosoftAzureActiveDirectoryStatus="Azure Active Directory";e.Companionfeatures="Account-wide Test Manager trial";e.GenericConnectionType="Generic";e.NewGroupAltText="New group";e.Enabled="Enabled";e.EmptySectionAddFieldText="Add a field ...";e.Required="Required";e.No="No";e.On="On";e.Permissions="Permissions";e.PlusAdd="+ Add";e.PicklistItemAdreadyExists="The value already exists";e.FeatureEnablement_Button_Configure="Configure";e.AddSshKey="Add an SSH public key";e.UpdateAuthenticationDialogTitle="Update Authentication for {0}";e.TfsGroupsHosted="VSTS Groups";e.AdminLayoutInheritedGroupTooltip="This group is inherited from the parent process\u0027s form layout.Â You can change the label but you cannot change the section it is in.";e.FeatureEnablementLinkText="Feature Enablement";e.ProcessPageTitleOverview="Overview - {0}";e.ExtensionsDuplicateMessage="This extension is not accessible because there is another copy with higher precedence.";e.AdminTeamWorkItems_Help_Caption="Help on configuring team areas";e.IdentityPickerDialog_AddUsersAndGroupsButtonText="Add...";e.ConnectionNameInvalid="Enter a valid connection name";e.ProcessAddFieldEmptyPageLinkText="Once you {0} to your page, you will see them appear here";e.NoIdentitiesMatchSearch="No identities match search query.";e.DeleteProjectConfirmationText="Please type the name of the team project to confirm.";e.ControlExtensionInvalidFieldTypes="The field type of field \u0027{0}\u0027 is \u0027{1}\u0027 which doesnt match the required field types \u0027{2}\u0027";e.NewAccountFeatureName="New Account Homepage";e.CreateGroupAction="Create group...";e.ControlExtensionDescriptionText="Using extensions, you can provide first-class integration experiences for the work item form in Visual Studio Team Services";e.RenameAccountDescription="Changing your account URL has several side effects.  Please read the following carefully before you proceed.";e.BugsAsRequirementsKanbanBoardImageTitle="Bugs on the Kanban board";e.BrowseServer="Browse server";e.GettingStartedErrorRenamingProject="There was an error renaming the project. Please try again and if the problem persists contact our support team by visiting https://www.visualstudio.com/support-overview-vs";e.ImportProcessNextStepModify="- Customize a process";e.FeatureEnablement_SingleValidProcessTemplate_Intro="Your team project will be configured using settings from this process template:";e.InheritanceDisabled="Inheritance disabled";e.SelectProcessContext="Select a process...";e.InheritanceEnabled="Inheritance enabled";e.InheritedAllow="Inherited allow";e.OnlyShowFirst100Memberships="Displaying first 100 memberships only.";e.FeatureEnablement_Welcome_PreviouslyConfigured="Previously configured (will be skipped)";e.AddFieldDialog_InvalidDateValue="Invalid date value";e.UndoChanges="Undo changes";e.BacklogChangeRemovingFieldInfo="The {0} field will be removed from the work item type.";e.PublicKeyFwdLink="https://go.microsoft.com/fwlink/?LinkID=715524\u0026clcid=0x409";e.FeatureEnablement_Finish_Success_Intro="Congratulations!";e.Add="Add";e.All="All";e.Day="day";e.New="New";e.Off="Off";e.Yes="Yes";e.NewLayout="New layout";e.Allow="Allow";e.FieldGridHeaderRequired="Required";e.Field="Field";e.Group="Group";e.NoProjects="No projects available.";e.SpnKeyInvalid="Enter a valid service principal key";e.Close="Close";e.Label="Label";e.Users="Users";e.Disconnect="Disconnect";e.SendMailCharactersCount="{0}/{1} characters";e.AreYouSureToDestroyField="Are you sure you want to destroy field \"{0}\"?";e.EndpointTypeNotFound="The endpoint type extension {0} is either disabled or uninstalled which may lead to issues in using this endpoint.";e.Teams="Teams";e.Theme="Theme";e.Reset="Reset";e.Scope="Scope";e.ConnectionTypeServicePrincipal="Service Principal";e.TeamSettings_NoPermissionsGeneral="team settings";e.UserProfile="User profile";e.RenameProjectNameExists="A team project with the name \"{0}\" already exists. The existing project will either need to be renamed or deleted to complete this rename.";e.LoadingInProgress="Loading ...";e.ExtensionsLegacyWarningMessage="This extensibility model is deprecated. \u003ca href=\"https://aka.ms/migrating-tfs-legacy-extensions\" target=\"_blank\"\u003eLearn about\u003c/a\u003e the new model for building extensions for Team Foundation Server.";e.Credentials="Credentials";e.EditGroupNameWatermark="Enter a name";e.MissingAddPermission="You do not have the required permissions to perform this action.";e.LearnMoreAAD="Learn more";e.CreateProjectNotStarted="Scheduling team project creation...";e.ConfigureNewWorkItemFormRadioDescription_OptIn="All users in the collection will see the \u003cb\u003eTry the new form\u003c/b\u003e hyperlink that allows them to opt-in to use the new form layouts.";e.Services="Services";e.FieldGridHeaderWorkItemTypes="Work item types that use field";e.NoTfsUserError="TF400368: The identity does not have any permissions on TFS server.";e.ServerFingerprint="Server Fingerprint";e.FeatureEnablement_ProcessTemplate_MultipleValid_PickProcessTemplate="Choose a process template to continue:";e.AddChefConnectionsDialogTitle="Add new Chef service connection";e.ConfigureNewWorkItemFormRadioDescription_Force="All users are automatically opted-in to use the new form. Users can\u0027t switch back to using the old form.";e.AddPageLearnMoreLink="https://go.microsoft.com/fwlink/?LinkId=821335";e.FeatureEnablement_Button_Close="Close";e.WorkItemStateDialog_StateCategory="State Category";e.DisableNewWorkItemFormDescription_2="Use the witadmin command line tool to export a copy of your work item types to retain a version of any optimizations you\u0027ve made to the new form layouts.";e.DisableNewWorkItemFormDescription_1="When you revert the collection back to the old form, you lose any optimizations you made to the new form layouts for all work item types.  Also, you disable the opt-in mode, and reset all users to use the old work item form.";e.DestroyWitConfirmDialogTitle="Destroy Work Item Type";e.ConfirmToDiscardEditedEmail="Leaving this page will discard the email. Are you sure you want to discard these changes?";e.AddFieldDescriptionWatermark="Optionally provide a description for the field";e.SshConnectionType="SSH";e.UserName="User name";e.TeamSettings_BugsBehaviorExplanationEnd=") on your backlogs and boards. {0}";e.EnableNewWorkItemFormLearnMoreText="Learn more about the new work item form layout";e.ServerUrl="Server URL";e.AddUser="Add user";e.UpdateSuccessMoreInformationLink2="https://go.microsoft.com/fwlink/?LinkId=534544";e.UpdateSuccessMoreInformationLink1="https://go.microsoft.com/fwlink/?LinkId=534545";e.AddPage="Add page";e.ShowBugsAsTasks="AsTasks";e.AddDeploymentEnvironmentsDialogTitle="Add Azure Subscription";e.InvitationCodeMaxAccounts="Thanks for your support! Unfortunately, the Visual Studio Team Services program is full and we are unable to accept any additional participants at this time. If you want to get in our waiting list and be notified when we start accepting more users give us your email address and we will be back in touch.";e.AddMemberHeaderOnPremise="Add a Windows user or group";e.ProcessCreated="You have successfully created the inherited process {0}.";e.DestroyFieldTitle="Destroy field";e.ErrorRemoving="Unable to remove the selected identity from this group.";e.PromoteProcessSuccess="You have successfully imported process \u0027{0}\u0027.";e.GlobalExtensionsGroupName="Global extensions (visible to everyone)";e.WorkItemTypeOverviewInheritedDescription="Attributes for inherited work item types are read-only.";e.Account="Account";e.RemoveStateConfirmationTitle="REMOVE STATE";e.WorkItemTypeBacklogsCustomTypeDescription="Choose the level of board and backlog where you want {0} work items to appear. \u003ca href=\"http://go.microsoft.com/fwlink/?LinkID=823956\" target=\"_blank\" rel=\"external\"\u003eLearn more\u003c/a\u003e";e.RemoveStateConfirmationLine2="Work items will no longer be able to transition to the state. Current and historical state values are not changed.";e.BacklogChangeRemovedFieldInfo="The {0} field has been removed from the work item type.";e.AdminLayoutInheritedFieldTooltip="This field is inherited from the parent process.Â You can hide it from the form layout and change the label but you cannot not change the group it is in.";e.BacklogChangeToLayoutAddingFieldInfo="Click New field to add {0} to the form layout.";e.CheckName="Check name";e.PermissionsDialogRemoveUserConfirmation="Are you sure that you want to remove the selected user or group?";e.AddMemberHeaderHosted="Add a user";e.Features="Features";e.ProcessValidationFailedErrorDescription="The validation of the process \u0027{0}\u0027 failed. Please fix the errors in the process, and retry the import.";e.DeletingAccount="\u003cspan\u003eDeleting account...\u003c/span\u003e\u003c/br\u003e\u003cspan\u003eYou will be redirected to VisualStudio.com shortly.\u003c/span\u003e";e.CollectionOverviewPage="Collection Overview page";e.PermissionsCannotSetAADGroup="Permissions cannot be set for an AAD group. This group will inherit permissions available through VSTS group membership.";e.AddGroupPermissionsDescriptionHosted="Type the name of the Visual Studio Team Services group for which you would like to add explicit permissions.  You can select from a list by clicking browse.";e.WorkItemStateDialog_Color="Color";e.Disabled="Disabled";e.MigrationSucessDescription="You have successfully changed {0} projects to use {1}.";e.SpnClientIdInvalid="Enter a valid service principal client ID or name";e.WorkItemTypeViewLayoutTitle="{0}: Layout";e.WorkItemTypeDescription="Description";e.ShowBugsAsTasksLabel="Bugs appear on the backlogs and boards with tasks.";e.CharactersRemaining="{0} characters remaining";e.TracePermissionTextForExplicitAllow="Overriding explicit allow â€¦ why?";e.BacklogChangeAddingMultipleFieldsInfo="The {0} and {1} fields will be added to the work item type.";e.CreateTeam="Create team";e.Existing="Existing";e.RenameProjectUrlText="renaming a team project.";e.ApplicationCredentials="Application Connections";e.ProvideDescription="Optionally provide a description";e.OAuthDisabledFwdLink="https://go.microsoft.com/fwlink/?LinkId=518601";e.DefaultGroupNameWithAppendant="Custom {0}";e.ProfileImageSaveError="Sorry, we were unable to save the avatar.";e.ConfigureNewWorkItemFormLearnMoreText="Learn more about the different opt-in models";e.PromoteProcessSuccessDescription="All team projects that reference the process have been updated.";e.ExportCollectionOneProjectFormatString="Export data and metadata for \u003cb\u003e1\u003c/b\u003e team project in the collection \u003cb\u003e{0}\u003c/b\u003e";e.AddControlExtensionDialog_ContributionInputsExceedLimit="This custom control specifies {0} inputs, which exceeds the limit of {1}.  This custom control cannot be added.";e.CredentialsDisable="Disable alternate credentials";e.BugsAsRequirementsTaskBoardImageTitle="Bugs on the task board";e.CannotDeleteDefaultTeam="You cannot delete the default team for a project.";e.ExportCollectionFormatString="Export data and metadata for all \u003cb\u003e{0}\u003c/b\u003e team projects in the collection \u003cb\u003e{1}\u003c/b\u003e";e.BacklogChangeRemovedMultipleFieldsInfo="The {0} and {1} fields have been removed from the work item type.";e.RenameProjectConfirmationText="I understand that renaming the team project is disruptive.";e.SecurityIdentitySearchControl_FilterUsers="Filter users";e.AddExternalGitConnectionsDialogTitle="Add new external Git repository connection";e.WorkItemTypeViewOverview="Overview";e.StateMoveDownMenuItem="Move down";e.StateRemoveMenuItem="Remove";e.PageIllegalCharacters="\u0027\u0026\u0027 character is prohibited in page name";e.ReadOnly="Read-only";e.EditGroupInformationHosted="Edit Visual Studio Team Services group";e.SavingProgress="Saving...";e.PromoteProcessStarted="{0} of {1} complete.";e.LearnMore="Learn more";e.ClickToChangeImage="Click to change image";e.InvitationCodeRegister="Register";e.IdentityInputWatermarkOnPremise="Display name or domain\\username";e.Settings="Settings";e.ExportEstimatedDatabaseSizeMegabytes="{0} MB";e.ExportDownloadHasExpired="\u003cb\u003eThe download has expired\u003c/b\u003e";e.ImportProcessLearnLink="\u003ca href=\"https://go.microsoft.com/fwlink/?LinkId=534262\" target=\u0027_blank\u0027\u003eLearn more about importing a process\u003c/a\u003e";e.BacklogChangeBasicInfo="The {0} work item type will appear on the {1} level backlog and board.";e.ViewStateMenuItem="View";e.CreatedBy="Created by";e.AcceptUntrustedCerts="Accept untrusted SSL certificates";e.RenameProjectBullet4="Version Control workspaces will need to be corrected by running get latest version.";e.RenameProjectBullet2="All users will need to restart Visual Studio.";e.RenameProjectBullet3="Git remotes will need to be updated with the new project name.";e.RenameProjectBullet1="Builds running during the rename might fail.";e.ExportDownloadContinue="Continue";e.CredentialsUsernameSecondary="User name (secondary)";e.BugsAsTasksKanbanBoardImageTitle="No bugs on the Kanban board";e.AdminLayoutSystemTooltip="This is a system process. All objects in a system process are locked for editing. If you want to modify the form layout for this work item type, please create an inherited process first from the Process Overview page.";e.CreateProcess="Create Process";e.GettingStartedCreateInvitationCode="Invitation Codes";e.GitHubPatIsRequired="A GitHub personal access token is required";e.LearnMoreAADGuestUser="Learn More";e.NameIsRequired="A name must be provided for the inherited process";e.BasicAuthDisabled="Your alternate credentials have been disabled.";e.FeatureEnablement_Button_Cancel="Cancel";e.StateHideState="Hide";e.DisableNewWorkItemFormLearnMoreUrl="https://go.microsoft.com/fwlink/?LinkId=761095";e.ProjectsAndTeams="Projects and teams";e.LearnAddFieldLink="https://go.microsoft.com/fwlink/?LinkID=616879";e.WorkItemTypeViewBacklogsTitle="{0}: Backlogs";e.ConnectionType="Type:";e.ConnectionName="Connection Name";e.NavigateToProject="Navigate to project";e.ErrorAddingZero="Unable to add members to this group.";e.ExistingGroupText="Select existing group";e.ProcessOverrideDetailedDescription="We have detected that process \u0027{0}\u0027 has been renamed to \u0027{1}\u0027. When you continue you will replace the process \u0027{0}\u0027. If you however wanted to import a new template, please \u003ca href=\"https://go.microsoft.com/fwlink/?LinkId=534545\" target=\u0027_blank\u0027\u003efollow these instructions\u003c/a\u003e";e.FieldOptions="Field options";e.LineNumber="Line number";e.TracePermissionDialogTitle="Trace permission";e.TrialEndedOn="Your trial ended on \u003cb\u003e{0}\u003c/b\u003e.";e.ExportEstimatedDatabaseSizeGigabytes="{0} GB";e.PrivateExtensionOptionText="This extension is only visible to me";e.UnsavedChangesPrompt="You have modified the form details.  Close and lose changes?";e.RemoveFieldFromLayoutContextMenuText="Remove from layout";e.FeatureEnablement_ProcessTemplate_Invalid_Intro="There are no process templates available with valid configuration settings for this team project.";e.FeatureEnablement_Welcome_NotConfigured="Not configured";e.ExportDeletionContinue="Continue";e.AdminTeamWorkItems_InvalidField="An error occurred. The field used to define team ownership no longer exists. Your project administrator must specify a field to use for team ownership. Click here for  information about how to update your project-level settings.";e.TeamWorkItem_DeleteRow="Delete this row";e.TeamSettings_BugsBehaviorSectionHeader="How your team works with bugs";e.FieldDetailsLayoutDescription="Choose how the field is displayed on the work item form.";e.GroupNameRequired="Group name cannot be empty";e.ChangeTeamProject="Change team project";e.ExportProgressPreparing="Preparing";e.SelectProcess="Choose file to upload";e.RemoveStateConfirmationButtonText="Remove";e.ProcessPageTitleSecurity="Security - {0}";e.Security="Security";e.Section1="Column 1";e.Section2="Column 2";e.Section3="Column 3";e.BasicAuthDisabledOnAccount="Alternate credentials have been disabled for this account.  Please contact your account administrator.";e.ExtensionsInstalledOnFormat="Installed on {0}";e.BuildDefinition="Build definition";e.DestroyFieldTooltip="Destroy the field";e.NoSearchResults="No search results.";e.NewWorkItemFormLabel="New work item form";e.RemoveFieldFromWorkItemTypeTooltip="Remove the field from the work item type.";e.ErrorAddingOne="Unable to add 1 member to this group.";e.AccountOverviewPage="Account Overview page";e.CheckStatus="Check status";e.CollectionName="Collection name";e.DeleteProcessTemplateConfirmation="Are you sure you want to permanently delete process \u0027{0}\u0027?";e.SetDefaultProcess="Set as default process";e.Options="Options";e.PageExtensionSubtitle="Page extension";e.AddAGroupTo="Add a group to {0}";e.CannotDeleteAccountAdminGroupFromCollectionAdminGroup="Cannot remove the account Team Foundation Administrators group from the Project Collection Administrators group.";e.ExtensionsNoEntry="No extensions found. Click install to add a new one.";e.PicklistAtLeastOneRequired="Please add at least one picklist value";e.BacklogChangeAddingFieldInfo="The {0} field will be added to the work item type.";e.License="License";e.RemoveStateConfirmatioinLine1="Are you sure you want to remove the state \u0027{0}\u0027 from \u0027{1}\u0027 work item type?";e.AddGroupDescriptionOnPremise="Type the name of the Team Foundation Server group you would like to add as a member of this identity. You can select from a list by clicking browse.";e.ConnectionStatusVerified="Verified";e.Migrate="Migrate";e.MessageToAdminPage="You can visit the {0} to view and manage existing projects.";e.AddGenericConnectionsDialogTitle="Add new Generic Connection";e.SvnRealmNameHelpText="If you use multiple credentials in a build definition to download a complete set of the source from Subversion,\r\nyou should specify the `Realm name` in each of them. The `Realm name` represents a sort of \"authentication namespace\" used\r\nby the Subversion repository to select the appropriate Subversion identity database. Along with the repository server\u0027s schema, hostname, and port it forms\r\na key that the Build Agent uses to select the specific credential from the set provided in the build definition.  \u003cbr\u003e\u003cbr\u003e\r\nTo find out the `Realm name`, you could do any of the following:\r\n\u003cul\u003e\r\n\u003cli\u003e\r\nIf you access the repository via `HTTP` or `HTTPS`: Open the repo in a web browser without saved credentials. It will use the `Realm Name` in the authentication dialog.\r\n\u003c/li\u003e\r\n\u003cli\u003e\r\nUse the command line `svn` program. If you don\u0027t have stored the credentials, run e.g. \u003ccode\u003e`svn info https://svnserver/repo`\u003c/code\u003e.\r\nYou will see the `Realm name` when it asks you to enter a password.\r\n\u003c/li\u003e\r\n\u003cli\u003e\r\nIf you have already stored the credentials to access the repository, look for the `Realm name` in one of the files in the Subversion authentication cache section of your user profile,\r\ne.g. in \u003ccode\u003e`~/.subversion/auth/svn/simple`\u003c/code\u003e or \u003ccode\u003e`C:\\Users\\yourname\\Application Data\\Subversion\\auth\\svn.simple`\u003c/code\u003e.\r\n\u003c/li\u003e\r\n\u003c/ul\u003e";e.StatesViewDescriptionToolTip="You can customize your state workflow to determine the logical progression and regression of work that team members will perform. It also specifies the values that appear in the drop-down menus for the State and Reason fields.";e.DeleteServiceEndpointDialogTitle="Disconnect Service Endpoint";e.NameMustBeUnique="Project name must be unique";e.AddCustomConnectionsDialogTitle="Add new {0} Connection";e.NoCollections="No collections";e.FeatureEnablement_ProcessTemplate_MultipleValid_Recommended="(Recommended)";e.TeamSettings_BugsBehaviorTitle="Working with bugs";e.AddControlExtension="Add a custom control";e.KeyData="Key Data";e.TeamMembers="Team members";e.TurnOnNewNavConfirmMessageOnPrem="Are you sure you wish to turn on the new navigation feature? This will affect all users on this TFS instance.";e.VerifyConnection="Verify connection";e.WorkItemTypeViewBacklogs="Backlogs";e.AddFieldDialog_InvalidDecimalValue="Invalid Decimal value";e.YourPublicKeys="Your Public Keys";e.InvitationCodeRequestFromFullCode="The invitation code provided has reached maximum capacity. We love onboarding new customers, so if you are interested, register with us and we will send you a new code as soon as we start accepting new accounts.";e.TraceLicenseDialogTitle="Trace effective license";e.IllegalCharacter="Remove the character {0} to continue. The characters {1} are prohibited";e.WorkItemTypeNameAlreadyExists="The work item type name already exists";e.AzureRMConnectionType="Azure Resource Manager";e.AddMemberDescriptionHosted="To add a user that is not currently known to Visual Studio Team Services, type their sign in address. If the member is known, just type their display name.";e.EditPage="Edit page {0} In {1}";e.EditMenu="Edit...";e.EditGroupInformationOnPremise="Edit Team Foundation Server group";e.CurrentOwner="Current owner";e.UseExistingField="Use an existing field";e.IllegalCharacters="These characters are prohibited .,;\u0027`:~\\/\\*|?\"\u0026%$!+=()[]{}\u003c\u003e-";e.StateMoveUpMenuItem="Move up";e.DeleteUserDescription="This will delete the user {0}.";e.FileName="File name";e.StatesViewLearnMoreLink="https://go.microsoft.com/fwlink/?LinkId=800035";e.PluginUninstallWarningMessage="Are you sure you want to uninstall this extension?";e.WorkItemTypeViewFieldsTitle="{0}: Fields";e.AllowBasicAuthCreds="Alternate authentication credentials";e.PageLayoutEditDescription="A page stores your work items\u0027 fields and groups.";e.NewWitDialogTitle="Create new work item type";e.TeamNameColumn="Team Name";e.InvalidEmail="Please enter a valid email address.";e.SecurityIdentitySearchControl_FilterUsersGroups="Filter users and groups";e.SelectColumnForGroup="Select the column for the group.";e.AddAzureResourceManagerDialogTitle="Add Azure Resource Manager Service Endpoint";e.EnableNewWorkItemFormLinkLabel="Enable the new work item form";e.EndpointSecurityTitle="{0} \u003e {1}";e.DeleteFromVSO="Delete from VSTS";e.SshPasswordHelpText="Provide the password or the passphrase for the private key if using a keypair.";e.PlainText="Text field (multi-line)";e.TurnOffNewNavHeader="Turn off new navigation";e.ProcessTemplateNotFound="Process \u0027{0}\u0027 does not exist.";e.AddMemberPermissionsDescriptionOnPremise="To add explicit permissions for a Windows user or group, type their display name or Domain\\Username";e.LayoutToolBarNewGroup="New group";e.LayoutToolBarNewField="New field";e.Connections="Connections";e.SetDefaultTeam="Set team as project default";e.AdminLayoutMovePageDialogTitle="Cannot move the page";e.Saturday="Saturday";e.Succeeded="SUCCEEDED";e.GitHubOauthAlreadyAuthorized="Already authorized";e.ConfigureNewWorkItemFormTitle="Choose the opt-in model for the new work item form";e.TeamSettings_NoPermissionsWarning="You do not have sufficient permissions to configure {0}. You must either be a team administrator or a project administrator.";e.ClearExplicitPermissions="Clear explicit permissions";e.ImportProcessUpdateDescription="Updating all team projects using the process \u0027{0}\u0027.";e.AllFieldsRequired="All fields are required";e.ConfirmationPendingMessage="Confirmation pending";e.TurnOnNewNavConfirmMessageHosted="Are you sure you wish to turn on the new navigation feature? This will affect all users in the account.";e.AdminLayoutRequestFailureMessage="An error occurred while performing your request. Please refresh the form layout and try again.";e.NewWitButton="New work item type";e.ManageTeamMembersDialogTitle="Manage membership of {0}";e.ImportProcessNextStepUnderstandCustomization="- Differences between Visual Studio Team Services and TFS process customizations";e.PleaseSelect="Please select";e.FeatureEnablement_ProcessTemplate_MultipleValid_Intro="More than one process template contains configuration settings appropriate for your team project. The most recent version is selected for you below.";e.BacklogChangeRemovingMultipleFieldsInfo="The {0} and {1} fields will be removed from the work item type.";e.PublicKeysDescription="Contribute to a Git repository without typing a username and password every time.";e.CalendarTypeHint="Select a calendar type";e.AdminLayoutMoveRequestFailureDragDropDisabledMessage="An error occurred while performing your request. Reordering is disabled. Please refresh your page to enable re-ordering.";e.IdentityInputWatermarkHosted="Display Name or Microsoft Account";e.ErrorRetrievingProgressDetailsHeader="Details:";e.ErrorAdding="Unable to add {0} members to this group.";e.OnlyShowFirst100Members="Displaying first 100 members only.";e.LabelIllegalCharacters="\u0027\u0026\u0027 character is prohibited in label";e.StatesToolBarNew="New state";e.CheckNameInProgress="Checking...";e.ImportProcessName="You have successfully imported process \u0027{0}\u0027. You can now \u003ca href=\"\" class=\"process-new-project\" target=\u0027_blank\u0027\u003ecreate a project.\u003c/a\u003e";e.AddMemberDescriptionOnPremise="To add a Windows user or group that is not currently known to Team Foundation Server, type the domain\\username. If the identity is known, just type the display name.";e.ErrorRetrievingImportProcessProgressMessage="Unable to retrieve the update progress for process \u0027{0}\u0027. Click Refresh to retry. If the problem persists, please  \u003ca href=\"https://go.microsoft.com/fwlink/?LinkId=534538\" target=\u0027_blank\u0027\u003econtact our support team\u003c/a\u003e";e.ExportExpiresInOneHour="Expires in \u003cb\u003e1\u003c/b\u003e hour";e.Results="Results";e.AADGroupMembersAzurePortal="AAD group members can be viewed and modified through Azure portal.";e.BugsOnBacklogFwdLink="https://go.microsoft.com/fwlink/?LinkId=512867";e.WorkItemTypeViewFields="Fields";e.PicklistItemCannotBeMoreThan255Chars="Value must be less than 255 characters";e.FieldDefinitionNotFound="Cannot edit control, field definition not found.";e.AddTeamAdministrator="Add Team Administrator";e.Refresh="Refresh";e.ThemeHint="Select your display theme";e.AccountExtensionsGroupName="Account extensions (visible only on this account)";e.LayoutToolBarNewPage="New page";e.WhyDeleteAccount="It would help us if you could share the reason you are deleting your account (optional):";e.ConnectionStatusFailed="Failed";e.UISettings="UI settings";e.DateFormatHint="Select how to display dates";e.WorkItemTypeBacklogsInheritedTypeDescription="You cannot edit the backlog and board level for an inherited work item type. \u003ca href=\"http://go.microsoft.com/fwlink/?LinkID=823956\" target=\"_blank\" rel=\"external\"\u003eLearn more\u003c/a\u003e";e.LayoutViewNoControlLabel="No Label";e.BacklogChangeAddedMultipleFieldsInfo="The {0} and {1} fields have been added to the work item type.";e.ExportDeletionDialogText="\u003cdiv\u003e\u003ctable\u003e\u003ctr\u003e\u003ctd\u003e\u003cimg src=\"{0}\" style=\"vertical-align:middle\"\u003e\u003c/img\u003e\r\n           \u003c/td\u003e\u003ctd style=\"padding-left:12px\"\u003e\r\n           \u003cspan\u003eYour export will be permanently deleted.  Are you sure you want to continue?\r\n           \u003c/span\u003e\u003c/div\u003e\r\n           \u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\u003c/div\u003e\r\n    ";e.TrialInProgress="Trial in progress: \u003cb\u003e{0} {1}\u003c/b\u003e left";e.MigrationFailedMessage="The process change failed for {0} project(s): ";e.TimeZoneHint="Select your time zone";e.BugsBehaviorFieldsMissingWarning="VS402346: The work item type {0} does not have the fields: {1}. These fields are needed for some charts and metrics including Capacity and the Cumulative Flow Diagram. To add the fields to this work item type, have an administrator run {2} or {3}.";e.CreateNewGroupOnPremise="Create new Team Foundation Server group";e.FeatureEnablement_IssuesList="List of issues";e.DeleteConnectedServiceDialogTitle="Disconnect Azure Service";e.HideNodeInLayoutContextMenuTooltip="Hide the {0} from the form layout. Data will not be deleted and will appear again when you add the {0} back to the form layout at a later time.";e.AddGroupLearnMoreLink="https://go.microsoft.com/fwlink/?LinkID=718196";e.ExtensionsDisableButton="Disable";e.SendMailNote="Note";e.RenameProjectInformationHeader="Renaming project \"{0}\" to \"{1}\"";e.WorkItemTypes="Work Item Types";e.EnableNewWorkItemFormLearnMoreUrl="https://go.microsoft.com/fwlink/?LinkId=761096";e.Members="Members";e.CannotBeUndone="Warning: Please read the following carefully before proceeding!";e.DialogOkButton="OK";e.ProjectRename="Rename";e.UserInformation="User information";e.UploadingExtensionMessage="Uploading extension...";e.BillingInformationHeader="Billing Information";e.AccountUrl="Account URL";e.Message="Message";e.FeatureEnablement_Verify_EnablingInfo="Configuring features for your team project ...";e.EditProfile="Edit profile";e.LearnMoreTrialFeatureAccountInTrial="Learn more";e.AzureActiveDirectoryGroups="Azure Active Directory Groups";e.CannotAddDirectlyToGroup="Cannot add users directly to this group";e.ProcessSelectorNoProcessesInCollection="No processes in the collection";e.ControlPanel="Control panel";e.ErrorRetrievingProgressMessage="Unable to retrieve the update progress details. Click Refresh to retry. If the problem persists, please  \u003ca href=\"https://go.microsoft.com/fwlink/?LinkId=534538\" target=\u0027_blank\u0027\u003econtact our support team\u003c/a\u003e";e.RemovingRequiredFieldWarningText="Because this field is required and does not have a default value, users might not be able to save work items from this type.";e.RemoveTeamAdmin="This will remove \"{0}\" from being an administrator for team \"{1}\".";e.SecurityIdentitySearchControl_Filter="Filter";e.LayoutContextMenuNewControlExtension="Add custom control";e.AddSvnConnectionsDialogTitle="Add new Subversion repository Connection";e.ConnectionTypeCertificate="certificate";e.GettingStartedErrorDeletingProject="There was an error deleting the project. Please try again and if the problem persists contact our support team by visiting https://www.visualstudio.com/support-overview-vs";e.ImportProcessTemplateTitle="Import Process";e.LinksControlSubtitle="Links";e.WorkItemTypeName="Name";e.AzureSubscriptionId="Azure Subscription ID";e.AccountDeleteReason6="Other (Please specify)";e.AllowOAuthCreds="Third-party application access via OAuth";e.AADName="AAD Name";e.FieldGridContextMenuRemove="Remove";e.RenameProjectNotStarted="Scheduling team project rename...";e.TeamWorkItem_DuplicateValue="At least one of the values that you added is a duplicate of a value already on the list. You must either delete or change the duplicate value before you can continue.";e.FieldNotFound="The field \"{0}\" is not available in this process";e.ConfirmCancelTitle="Unsaved Changes";e.MoveDown="Move down";e.ExtensionsNameColumn="Name";e.AddGroupDescriptionHosted="Type the name of the Visual Studio Team Services group you would like to add as a member of this identity. You can select from a list by clicking browse.";e.ExportRetryButtonText="Retry";e.SuggestedPicklist="Allow users to enter their own values";e.Description="Description";e.AdminLayoutRemoveGroupDialogTitle="Cannot remove group";e.TeamWorkItem_SelectValidValues="Either no value has been specified for team ownership, or the specified value is not valid. You must select at least one value from the list in order to continue.";e.AddFieldDialog_InvalidPicklistDefaultValue="The value \u0027{0}\u0027 is not a valid default value for this picklist field. Please choose one of the picklist items as a default value or remove the default value.";e.PicklistSizeLimitValidationMessage="Picklist cannot contain more than {0} values";e.CalendarType="Calendar type";e.NewWitCancelButton="Cancel";e.DeleteAccountTermsOfService="By clicking \u003cb\u003eDelete\u003c/b\u003e, you agree to the \u003ca href=\u0027https://go.microsoft.com/fwlink/?LinkID=266231\u0027 target=\u0027_blank\u0027\u003eTerms of Service\u003c/a\u003e and \u003ca href=\u0027https://go.microsoft.com/fwlink/?LinkID=264782\u0027 target=\u0027_blank\u0027\u003ePrivacy Statement\u003c/a\u003e.";e.FeatureEnablement_Welcome_Warning="Any features already configured will be skipped. To change their configuration, you must configure the features manually.";e.SshServerFingerprint="\u003cspan class=\"ssh-fingerprint\"\u003eServer {0} fingerprint\u003c/span\u003e {1} ({2}) \u003cbr\u003e";e.IdentityPickerDialog_UserOrGroupPrompt="User or group";e.AccountName="Account name";e.AddUserDialogFreeMemberMessage="Up to 5 users are free, plus for a limited time all use is free. \u003ca href=\u0027https://go.microsoft.com/fwlink/?LinkID=269577\u0027 target=\u0027_blank\u0027\u003eLearn more\u003c/a\u003e.";e.GettingStartedRetryTeamProjectRenameLink="Retry team project rename";e.Integer="Integer";e.RenameWarning6="\u003c/a\u003e) will not be redirected.";e.RenameWarning5="   I understand and still want to rename my account URL.";e.RenameWarning4="\u0027 target=\u0027_blank\u0027\u003e";e.RenameWarning3="The existing account URL (\u003ca href=\u0027";e.RenameWarning2="Workspaces and connection strings will need to be updated to point to the new URL.  Read \u003ca href=\u0027https://go.microsoft.com/fwlink/?LinkId=273928\u0027 target=\u0027_blank\u0027\u003ethis article\u003c/a\u003e for details.";e.RenameWarning1="Save all your work and ensure that nobody is using the service.";e.WorkItemTypeViewLayout="Layout";e.LearnEditField="Learn more about editing a field";e.LearnEditGroup="Learn more about editing a group";e.DestroyWitConfirmDialogInfo="Are you \u003cstrong\u003eABSOLUTELY\u003c/strong\u003e sure? This action \u003cstrong\u003eCANNOT\u003c/strong\u003e be undone.  This will permanently delete the work item type \u003cstrong\u003e{0}\u003c/strong\u003e. Deletion includes permanently deleting all work items of that type.";e.ProjectRenameSuccess="Project \"{0}\" successfully renamed to \"{1}\"";e.SearchIdentities="Search identities...";e.TeamCreatedSuccessFullyWithWarnings="Team created successfully with the following warnings: ";e.AddFieldsText="add fields";e.InheritedProcessCreated="Inherited Process Created";e.AddControlExtensionDialog_NoContributionInputsInfo="No configuration is needed for this control extension";e.FeatureEnablement_DataWontBeChanged="None of your existing data will be changed.";e.TeamWorkItem_Line1="Your project uses the following work item field to define team ownership: {0} ";e.TeamWorkItem_Line2="Before your team can begin working on tasks, you must choose at least one value for that field that will identify the work for which your team will be responsible. ";e.AzureConnectionType="Azure";e.JoinGroupDescriptionOnPremise="Type the name of the Team Foundation Server group you would like this identity to join.  You can select from a list by clicking browse.";e.WindowsGroups="Windows groups";e.FeatureEnablement_LinkText_AdditionalConfigurationEducation="Learn more about additional configuration";e.ProcessInheritanceLink="https://go.microsoft.com/fwlink/?LinkID=616873";e.HelpLink="Help link";e.FeatureEnablement_Finish_Error_Prefix="The following error occurred:";e.FieldGridHeaderName="Name";e.FieldGridHeaderType="Type";e.WorkItemTypeBlockedFromCustomization="This work item type is blocked from customization.";e.DeleteProcessTemplateWithProject="You can\u0027t delete process \u0027{0}\u0027 because it is used by one or more projects. To delete the process, you need to delete its projects or migrate them to the system process and try again.";e.BacklogChangeToLayoutAddingMultipleFieldsInfo="Click New field to add {0} and {1} to the form layout.";e.EnableNewWorkItemFormDescription_3="Once enabled, you can select the opt-in mode for switching to the new form.";e.EnableNewWorkItemFormDescription_2="You can then optimize the new form layout, prior to rolling it out for your users, and avoid losing customizations that you have made with the old form.";e.EnableNewWorkItemFormDescription_1="Enabling the new work item form causes a new layout to be created for all work item types defined in the project collection.";e.EnableNewWorkItemFormDescription_4="Only after you set the opt-in mode can users switch to the new form, or switch back and forth between old and new forms. Also, at any time, you can disable the new form if it doesn\u0027t meet your requirements.";e.RenameProjectInfo="Renaming team project \"{0}\" to \"{1}\" will be disruptive to the teams who are working in the project. It\u0027s recommended that renames be performed during off hours.";e.ControlExtensionInputsDescriptionText="This custom control requires additional configuration to work properly";e.RevertToolTip="Discard the form layout changes made in this process to this field, and instead revert back to the form layout of the parent process.";e.InvalidToFieldInput="Please enter a valid email address or display name";e.PicklistItems="Picklist items";e.FeatureEnablement_Welcome_FeaturesNotConfigured="The following features have not been configured for this team project.";e.NoMembers="No members";e.ErrorSavingBacklogVisibilities="An error occurred while saving your selection. Your team project administrator may have added or removed backlog levels. Please refresh the page and try again.";e.FeatureEnablement_LinkText_ErrorEducation="Learn more about these errors";e.ProgressPleaseWait="Please wait ...";e.History="History";e.NewNavigationFeatureName="New Navigation";e.HideNodeInLayoutContextMenuText="Hide from layout";e.DeletingYourAccountHeader="All users in your account ({0}) will immediately lose access when you delete the account. ";e.SendMailSubject="Subject";e.TenetIdInvalid="Enter a valid tenant ID";e.ExportNoteCanOnlyKeepOne="\u003cb\u003eNote:\u003c/b\u003e You may only keep one export at a time. In order to start a new export, you need to delete your current export.";e.LabelRequired="Label cannot be empty";e.AddField="Add field";e.DeleteGroup="Delete group";e.DisplayName="Display Name";e.AddGroup="Add group";e.RemoveCustomControlFromLayoutDialogText2="Data will not be deleted. You can add the custom control back to the form layout at a later time.";e.RemoveCustomControlFromLayoutDialogText1="Are you sure you want to remove custom control \"{0}\" from the form layout of work item type \"{1}\"?";e.EditStateDialogTitle="Edit State";e.RemoveFieldFromLayoutDialogText1="Are you sure you want to remove field \"{0}\" from the form layout of work item type \"{1}\"?";e.RemoveFieldFromLayoutDialogText2="Data will not be deleted. You can add the field back to the form layout at a later time.";e.RemoveFieldFromLayoutDialogTitle="Remove from layout";e.Permission="Permission";e.AccountBackedByAAD="This account is backed by the \u003cb\u003e{0}\u003c/b\u003e Azure Active Directory.";e.DestroyWitConfirmDialogOkText="Destroy Work Item Type";e.LearnAddGroup="Learn more about adding a group";e.LearnAddField="Learn more about adding a field";e.CreateNewTeam="Create new team";e.BacklogChangeSavedWithNewFieldsInfo="Backlog level successfully changed. To add the new fields to your form, go to the \u003ca href=\"#\"\u003elayout page\u003c/a\u003e.";e.DefaultValueDescription="Set the initial value of the field";e.NewWitDialogNameLabel="Name";e.EditField="Edit Field";e.EditGroup="Edit group {0} In {1}";e.DeleteGroupDescription="This will delete the group {0}.";e.ManageAzureSubscriptionLinkText="Manage";e.WorkItemTypeViewStates="States";e.LanguageHint="Select your language";e.DeletingYourAccountHeader1="We are sorry to see you go :(. Once deleted your account will be in a disabled state for 90 days, after which it will be deleted permanently. You can find out more about  \u003ca href=\u0027https://go.microsoft.com/fwlink/?LinkID=403575\u0027 target=\u0027_blank\u0027\u003edeleting or recovering your account.\u003c/a\u003e.";e.Navigate="Navigate";e.JenkinsLicenseText="â€œJenkinsâ€ is a registered trademark of Software in the Public Interest Inc\r\nThe Jenkins logo is licensed under the Creative Commons Attribution-ShareAlike Unported License by the Jenkins project (https://jenkins-ci.org/)";e.LearnMoreAADFLink="https://go.microsoft.com/fwlink/?LinkID=397729";e.StatesDialogLearnMoreLink="https://go.microsoft.com/fwlink/?LinkId=800040";e.RenameAccountUrlHeader="Rename account URL";e.AddFieldDialog_ExistingFieldNameInvalid="The value {0} is not a valid field name. Please choose from the list.";e.FieldGridContextMenuDestroy="Destroy";e.SshKeys="SSH Keys";e.SshHost="Host name";e.SshPort="Port number";e.DestroyFieldButton="Destroy";e.PicklistIntRangeValidationMessage="Value must be between -2147483648 and 2147483647";e.SelectProcessText="Add or modify a process by importing a zipped process template. A modified process will automatically update existing team projects that reference that process.";e.Edit="Edit";e.Area="Areas";e.Days="days";e.Deny="Deny";e.Back="Back";e.TurnOffNewNavConfirmMessageOnPrem="Are you sure you wish to turn off the new navigation feature? This will affect all users on this TFS instance.";e.Name="Name";e.User="User";e.Undo="Undo";e.HTML="Text (multiple lines)";e.Hide="hide";e.Save="Save";e.Show="show";e.Path="Path";e.Page="Page";e.TeamSettings_BugsBehaviorExplanationStart="Choose the behavior of bugs (shown as ";e.FieldToolBarNewField="New field";e.UnableToFindProcess="Unable to find process {0}. The process might have been updated by another user";e.GettingStartedInvitationCodeDescription="Got friends that would be interested in trying out the Visual Studio Team Services?  Click on the link above to get an invitation code you can share.  Valid for up to 5 account activations.";e.NewWitDialogLearnMoreLink="http://go.microsoft.com/fwlink/?LinkId=809088";e.TimeFormat="Time pattern";e.OAuthDisabledLinkText="Learn more";e.TurnOffNewNavConfirmMessageHosted="Are you sure you wish to turn off the new navigation feature? This will affect all users in the account.";e.EditGroupDescriptionWatermark="Enter a description";e.CreateAreaPath="Create an area path with the name of the team.";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("VSS/Artifacts/Services",["require","exports","VSS/Context","VSS/Diag","VSS/Events/Action","VSS/Resources/VSS.Resources.Platform","VSS/Service","VSS/Utils/Url","VSS/Utils/String","VSS/VSS"],function(n,t,i,r,u,f,e,o,s,h){function v(n){return n.toLowerCase()}function p(n){for(var i={},u,r,t=0,f=n.length;t<f;t++)u=c.decodeUri(n[t]),r=v(u.tool),i[r]||(i[r]=[]),i[r].push(u);return i}var l=function(){function n(n){this._data=n;this._data.uri||(this._data.uri=c.encodeUri({tool:this.getTool(),type:this.getType(),id:this.getId()}))}return n._execute=function(n,t){var i=n.getUrl(t);i?u.getService().performAction(u.CommonActions.ACTION_WINDOW_OPEN,{url:i,target:"_blank"}):alert(s.format(f.UnknownArtifactType,n.getType()))},n.prototype.getUri=function(){return this._data.uri},n.prototype.getTool=function(){return this._data.tool},n.prototype.getType=function(){return this._data.type},n.prototype.getId=function(){return this._data.id},n.prototype.getTitle=function(){return this.getUri()},n.prototype.setError=function(n){this._error=n},n.prototype.getError=function(){return this._error},n.prototype.execute=function(t){return u.getService().performAction(n.ACTION_ARTIFACT_EXECUTE,{artifact:this,webContext:t})},n.prototype.getUrl=function(){return null},n.ACTION_ARTIFACT_EXECUTE="artifact-execute",n}(),c,y,a;t.Artifact=l;u.getService().registerActionWorker(l.ACTION_ARTIFACT_EXECUTE,function(n){return l._execute(n.artifact,n.webContext)});c=function(){function n(){}return n.encodeUri=function(t){return n.VSTFS+[encodeURIComponent(t.tool),encodeURIComponent(t.type),encodeURIComponent(t.id)].join(n.URI_SEPARATOR)},n.decodeUri=function(t){var u,i;if(t.length>n.VSTFS.length&&(u=t.substr(0,n.VSTFS.length).toLowerCase(),u===n.VSTFS&&(i=t.substr(n.VSTFS.length).split(n.URI_SEPARATOR),i.length===3)))return{uri:t,tool:n.legacyDecodeURIComponent(i[0]),type:n.legacyDecodeURIComponent(i[1]),id:n.legacyDecodeURIComponent(i[2])};throw new Error(s.format(f.InvalidArtifactUri,t));},n.legacyDecodeURIComponent=function(n){var t;return t=n.replace(/\+/g," "),decodeURIComponent(t)},n.VSTFS="vstfs:///",n.URI_SEPARATOR="/",n}();t.LinkingUtilities=c;y={};a=function(n){function t(){n.call(this)}return __extends(t,n),t.registerArtifactResolver=function(n,t){y[v(n)]=t},t.getArtifactResolver=function(n){return y[v(n)]},t.prototype.beginResolveArtifacts=function(n,i,r){function c(n,t){for(var f=[],r,i=0,u=n.length;i<u;i++)r=new l(n[i]),t&&r.setError(t),f.push(r);return f}function e(){u.resolving===0&&(r(u.results),u.resolving-=1)}function f(n,t){u.resolving-=1;u.results=u.results.concat(n.success?n.artifacts:c(t,n.error));e()}function a(n,i){var r=t.getArtifactResolver(n);return r?(r(i,h,function(n){f(n,i)},function(n){f({success:!1,error:n},i)}),!0):!1}var s=this.getWebContext(),h=$.extend({webContext:s},i),u={results:[],resolving:0},o=p(n);$.each(o,function(){u.resolving+=1});$.each(o,function(n,t){a(n,t)||f({success:!1,error:new Error("NoResolver")},t)});e()},t.MODE_TRANSLATEURL="translateURL",t}(e.VssService);t.ClientLinking=a;o.getTranslatorService().registerUrlTranslator(function(n,t,r,u,f){var o;n&&s.startsWith(n,c.VSTFS,s.ignoreCaseComparer)?(o=t&&t.webContext||i.getDefaultWebContext(),e.getCollectionService(a,o).beginResolveArtifacts([n],{mode:a.MODE_TRANSLATEURL},function(n){n&&n.length===1&&!n[0].getError()?r(n[0].getUrl(o)):f()},u)):f()});h.tfsModuleLoaded("VSS.OM.Artifacts",t)});
define("Presentation/Scripts/TFS/TFS.Core.WebApi",["require","exports","VSS/WebApi/RestClient"],function(n,t,i){var u=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.beginGetMru=function(n){return this._beginRequest({area:t.IdentityMruArea,locationId:t.IdentityMruLocationId,httpMethod:"GET",responseIsCollection:!0,routeValues:{mruName:n}})},t.prototype.beginPostMruIdentity=function(n,i){return this._beginRequest({area:t.IdentityMruArea,locationId:t.IdentityMruLocationId,httpMethod:"POST",routeValues:{mruName:n},data:{identityIds:i}})},t.prototype.beginDeleteMruIdentity=function(n,i){return this._beginRequest({area:t.IdentityMruArea,locationId:t.IdentityMruLocationId,httpMethod:"DELETE",routeValues:{mruName:n},data:{identityIds:i}})},t.IdentityMruArea="core",t.IdentityMruLocationId="5EAD0B70-2572-4697-97E9-F341069A783A",t}(i.VssHttpClient),r;t.IdentityMruHttpClient=u;r=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.beginGetTemporaryData=function(n){return this._beginRequest({area:t.TemporaryDataArea,locationId:t.TemporaryDataLocationId,httpMethod:"GET",routeValues:{id:n}})},t.prototype.beginCreateTemporaryData=function(n){return this._beginRequest({area:t.TemporaryDataArea,locationId:t.TemporaryDataLocationId,httpMethod:"POST",data:n})},t.TemporaryDataArea="properties",t.TemporaryDataLocationId="B4B570EF-1775-4093-9218-AFB7E4C8AEF6",t}(i.VssHttpClient);t.TemporaryDataHttpClient=r});
define("Presentation/Scripts/TFS/TFS.OM.Identities",["require","exports","VSS/VSS","Presentation/Scripts/TFS/TFS.Legacy.Ajax","VSS/Utils/String","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Events/Handlers","VSS/Service","VSS/Artifacts/Services","Presentation/Scripts/TFS/TFS.Core.WebApi","VSS/FeatureAvailability/Services","VSS/Locations","VSS/Telemetry/Services","VSS/WebApi/Constants","VSS/Common/Contracts/Platform"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){var tt=e.TfsContext,ut,w,it,k,g,nt,b,d,rt;(function(n){n[n.All=0]="All";n[n.Users=1]="Users";n[n.Groups=2]="Groups"})(t.IdentityFilter||(t.IdentityFilter={}));ut=t.IdentityFilter;w=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeConnection=function(t){n.prototype.initializeConnection.call(this,t);this._httpClient=t.getHttpClient(c.IdentityMruHttpClient)},t.prototype.beginGetMru=function(n,t,r){this._httpClient.beginGetMru(n).then(function(n){$.isFunction(t)&&t(n)},r||i.handleError)},t.prototype.beginPostMruIdentity=function(n,t,r,u){this._httpClient.beginPostMruIdentity(n,t).then(function(){$.isFunction(r)&&r()},u||i.handleError)},t.prototype.beginDeleteMruIdentity=function(n,t,r,u){this._httpClient.beginDeleteMruIdentity(n,t).then(function(){$.isFunction(r)&&r()},u||i.handleError)},t}(s.VssService);t.IdentityMruService=w;it=function(){function n(){}return n.getGlobalMruName=function(){return e.TfsContext.getDefault().navigation.serviceHost.instanceId},n.beginGetIdentityMru=function(t,i,r,u,f){var e,o,h;if(i===void 0&&(i=!0),e=n.identityMruMap[t],e&&i)$.isFunction(r)&&r(e);else{if(e){if(e.isRefreshing()){$.isFunction(r)&&r(e);return}e.setRefreshing(!0)}o=s.getCollectionService(w,f);h=new Date;o.beginGetMru(t,function(i){var f=new Date,u;b.preProcessIdentities(i,!0);e?(e.refresh(i,!0),e.setRefreshing(!1)):(e=new d(t,i),n.identityMruMap[t]=e);u={elapsedTime:f.getTime()-h.getTime()};v.publishEvent(new v.TelemetryEventData("IdentityMru","IdentityMruLoadTime",u));$.isFunction(r)&&r(e)},u)}},n.getIdentityMru=function(t,i){return t||(t=n.getGlobalMruName()),n.identityMruMap[t]||(n.identityMruMap[t]=new d(t,[]),n.beginGetIdentityMru(t,!1,undefined,undefined,i)),n.identityMruMap[t]},n.identityMruMap={},n}();t.IdentityMruStore=it,function(n){n[n.None=0]="None";n[n.ShowGenericImage=1]="ShowGenericImage"}(t.IdentityImageMode||(t.IdentityImageMode={}));k=t.IdentityImageMode,function(n){n[n.AccountName=0]="AccountName";n[n.DisplayName=1]="DisplayName";n[n.AdministratorsGroup=2]="AdministratorsGroup";n[n.Identifier=3]="Identifier";n[n.MailAddress=4]="MailAddress";n[n.General=5]="General";n[n.Alias=6]="Alias"}(t.IdentitySearchFactor||(t.IdentitySearchFactor={}));g=t.IdentitySearchFactor,function(n){n[n.Small=0]="Small";n[n.Medium=1]="Medium";n[n.Large=2]="Large"}(t.IdentityImageSize||(t.IdentityImageSize={}));nt=t.IdentityImageSize;b=function(){function n(){}return n.preProcessIdentities=function(t,i){i===void 0&&(i=!1);$.each(t,function(t,i){i.isTfsGroup=n.isTfsGroup(i)})},n.getIdentityImageUrl=function(t,i,r){i===void 0&&(i=k.None);var u=e.TfsContext.getDefault();if(t.isAadIdentity)return u.getActionUrl("GetAadUserThumbnail","identity",{project:"",team:"",area:"api",userObjectId:t.id});if(u.isHosted&&l.FeatureAvailabilityService.isFeatureEnabled(f.FeatureAvailabilityFlags.WebAccessIdentityImagesFromProfile)&&n.getSpsAccountUrl()!=""){if((r===undefined||r===null)&&(r=nt.Small),t.id)return n.getIdentityImageUrlFromProfile(u,t.id,r);if(t.uniqueName)return n.getIdentityImageUrlFromProfile(u,t.uniqueName,r);if(t.isContainer)return n.getIdentityImageUrlFromProfile(u,t.displayName,r);if(i===k.ShowGenericImage)return u.configuration.getResourcesFile("notassigned-user.svg")}else{if((r===undefined||r===null)&&(r=nt.Medium),t.id)return u.getIdentityImageUrl(t.id,{size:r});if(t.uniqueName)return u.getIdentityImageUrl("",{identifier:t.uniqueName,resolveAmbiguous:!1,identifierType:g.AccountName,size:r});if(t.isContainer)return u.getIdentityImageUrl("",{identifier:t.displayName,resolveAmbiguous:!1,identifierType:g.General,size:r});if(i===k.ShowGenericImage)return u.configuration.getResourcesFile("notassigned-user.svg")}return""},n.getSpsAccountUrl=function(){return a.getCachedServiceLocation(y.ServiceInstanceTypes.SPS,p.ContextHostType.Application)},n.getIdentityImageUrlFromProfile=function(t,i,r){var f=n.getSpsAccountUrl();return f?u.format("{0}/profile/Avatar?identityId={1}&size={2}",f,i,r):""},n.parseUniquefiedIdentityName=function(t){var a,v;if(!t)return null;var r=t.lastIndexOf(n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START),o=t.lastIndexOf(n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END),s=!1,y=!1,h=!1,e=t;r>=0&&o>r&&(h=!0,e=e.replace(n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START).replace(n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END));r=e.lastIndexOf(n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START);o=e.lastIndexOf(n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END);var c=e,l="",f="",i="";return r>=0&&o>r&&(c=$.trim(e.substr(0,r)),h?(i=$.trim(e.substr(r+1,o-r-1)),i.indexOf(n.AAD_IDENTITY_USER_PREFIX)===0?i=i.substr(n.AAD_IDENTITY_USER_PREFIX.length):i.indexOf(n.AAD_IDENTITY_GROUP_PREFIX)===0&&(s=!0,i=i.substr(n.AAD_IDENTITY_GROUP_PREFIX.length)),a=i.lastIndexOf("\\"),a>0&&(f=$.trim(i.substr(a+1)),f.indexOf("@")!==-1?(l=f,i=$.trim(i.substr(0,a))):(c=t,i="",h=!1,s=!1))):(f=$.trim(e.substr(r+1,o-r-1)),v=n.getVsIdFromGroupUniqueName(f),f.indexOf("@")!==-1||f.indexOf("\\")!==-1||v||u.isGuid(f)?(l=f,v!=""&&(i=v,s=!0,y=!0,l="")):c=t)),{id:i,displayName:c,uniqueName:l,isAadIdentity:h,isContainer:s,isTfsGroup:y}},n.getUniquefiedIdentityName=function(t){if(t.isAadIdentity&&t.displayName&&t.id){var i=t.isContainer?n.AAD_IDENTITY_GROUP_PREFIX:n.AAD_IDENTITY_USER_PREFIX;return t.uniqueName&&!t.isContainer?u.format("{0} {1}{2}{3}\\{4}{5}",t.displayName,n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,i,t.id,t.uniqueName,n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):u.format("{0} {1}{2}{3}{4}",t.displayName,n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,i,t.id,n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END)}return!t.isAadIdentity&&t.displayName&&t.isContainer&&t.isTfsGroup?t.id?u.format("{0} {1}{2}{3}{4}",t.displayName,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,n.TFS_GROUP_PREFIX,t.id.toUpperCase(),n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):t.displayName:!t.isAadIdentity&&t.displayName&&t.uniqueName?u.format("{0} {1}{2}{3}",t.displayName,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,t.uniqueName,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):t.displayName||""},n.getFriendlyDistinctDisplayName=function(t){return t.displayName&&t.uniqueName&&!t.isTfsGroup?n.getDistinctDisplayName(t.displayName,t.uniqueName):t.displayName||""},n.getDistinctDisplayName=function(t,i){return t&&i?u.format("{0} {1}{2}{3}",t,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START,i,n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END):""},n.getFriendlyUniqueName=function(t){if(t.isContainer&&t.isTfsGroup&&t.displayName){var i=t.displayName.lastIndexOf(n.IDENTITY_UNIQUENAME_SEPARATOR);if(i!==-1)return t.displayName.substr(i+1)}return t.uniqueName},n.getVsIdFromGroupUniqueName=function(t){var i,r,f,e;return t?(r="",f=t.lastIndexOf(n.IDENTITY_UNIQUENAME_SEPARATOR),i=f===-1?t:t.substr(0,f),u.startsWith(i,n.TFS_GROUP_PREFIX)&&(e=$.trim(i.substr(3)),r=u.isGuid(e)?e:""),r):""},n.isTfsGroup=function(t){if(t.isContainer&&t.uniqueName)return n.getVsIdFromGroupUniqueName(t.uniqueName)!==u.empty||u.startsWith(t.uniqueName,h.LinkingUtilities.VSTFS,u.localeIgnoreCaseComparer)},n.union=function(t,i,r){r===void 0&&(r=!0);var u=t.slice(0),f={},e={},o={};return $.each(u,function(n,t){t.id&&(e[t.id.toLowerCase()]=t);t.uniqueName&&(o[t.uniqueName.toLowerCase()]=t);t.id||t.uniqueName||!t.displayName||(f[t.displayName.toLowerCase()]=t)}),$.each(i,function(n,t){t.id||t.uniqueName?e[(t.id||"").toLowerCase()]||o[(t.uniqueName||"").toLowerCase()]||u.push(t):f[t.displayName.toLowerCase()]||u.push(t)}),r&&n._sortListByName(u),u},n.subtract=function(t,i,r){r===void 0&&(r=!0);var u=t.slice(0);return $.each(i,function(t,i){for(var f=u.length,r=0;r<f;r++)n.areItemsEqual(i,u[r])&&(u.splice(r,1),f--)}),r&&n._sortListByName(u),u},n._sortListByName=function(n){n.sort(function(n,t){if(n.isTfsGroup&&!t.isTfsGroup)return 1;if(!n.isTfsGroup&&t.isTfsGroup)return-1;var i=$.trim(n.displayName.toLowerCase()),r=$.trim(t.displayName.toLowerCase());return u.localeIgnoreCaseComparer(i,r)})},n.areItemsEqual=function(n,t){var i,r;return n.id&&t.id?(i=$.trim(n.id.toLowerCase()),r=$.trim(t.id.toLowerCase())):n.uniqueName&&t.uniqueName?(i=$.trim(n.uniqueName.toLowerCase()),r=$.trim(t.uniqueName.toLowerCase())):(i=$.trim(n.displayName.toLowerCase()),r=$.trim(t.displayName.toLowerCase())),u.localeIgnoreCaseComparer(i,r)===0},n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START="<",n.IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END=">",n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_START="<<",n.AAD_IDENTITY_UNIQUEFIEDNAME_SEPERATOR_END=">>",n.TFS_GROUP_PREFIX="id:",n.AAD_IDENTITY_USER_PREFIX="user:",n.AAD_IDENTITY_GROUP_PREFIX="group:",n.IDENTITY_UNIQUENAME_SEPARATOR="\\",n}();t.IdentityHelper=b;d=function(){function n(n,t){this._mruName=n;this._refreshing=!1;this._events=new o.NamedEventCollection;this.refresh(t)}return n.prototype.refresh=function(n,t){var i=this;this._mruItems=n;this._idToMruItemMap={};$.each(this._mruItems,function(n,t){i._idToMruItemMap[t.id]=t});t&&this.fireMruRefreshed()},n.prototype.addItems=function(n){var u=this,t=[],i=[],f,r;$.each(n,function(n,r){r.id&&(t.push(r.id),i.push(r),u._idToMruItemMap[r.id]=r)});this._mruItems=b.union(this._mruItems,i);t.length>0&&(f=tt.getDefault(),r=s.getCollectionService(w),r.beginPostMruIdentity(this._mruName,t))},n.prototype.removeItems=function(n){var i=this,t=[],r=[],f,u;$.each(n,function(n,u){u.id&&i.isItemInMru(u)&&(t.push(u.id),r.push(u),delete i._idToMruItemMap[u.id])});this._mruItems=b.subtract(this._mruItems,r);t.length>0&&(f=tt.getDefault(),u=s.getCollectionService(w),u.beginDeleteMruIdentity(this._mruName,t))},n.prototype.setRefreshing=function(n){this._refreshing=n},n.prototype.isRefreshing=function(){return this._refreshing},n.prototype.isItemInMru=function(n){return n&&n.id&&this._idToMruItemMap[n.id]?!0:!1},n.prototype.getMruItems=function(){return this._mruItems},n.prototype.attachMruRefreshed=function(t){this._events.subscribe(n.MRU_REFRESHED_EVENT,t)},n.prototype.detachMruRefreshed=function(t){this._events.unsubscribe(n.MRU_REFRESHED_EVENT,t)},n.prototype.fireMruRefreshed=function(){this._events.invokeHandlers(n.MRU_REFRESHED_EVENT,this.getMruItems())},n.MRU_REFRESHED_EVENT="mru-refreshed",n}();t.IdentityMru=d;rt=function(){function n(){}return n.prototype.beginAadIdentitySearch=function(n,t,i,u,f){var f=f||e.TfsContext.getDefault(),o=f.getActionUrl("searchAadIdentities","identity",{project:"",team:"",area:"api"});r.getMSJSON(o,{searchTerm:n,identityType:t},i,u)},n.prototype.beginTfsIdentitySearch=function(n,t,i,u,f){var f=f||e.TfsContext.getDefault(),o=f.getActionUrl("searchIdentities","wit",{project:"",team:"",area:"api"});r.getMSJSON(o,{searchTerm:n,identityType:t},i,u)},n}();t.BaseIdentityProvider=rt});
define("Presentation/Scripts/TFS/TFS.IdentityImage",["require","exports","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Identities","VSS/Utils/UI"],function(n,t,i,r,u){function o(n,t,r,u,e,o){n||(n=i.TfsContext.getDefault());var s=f(u,e,o);return s.attr("src",n.getIdentityImageUrl(t,r)),t&&s.addClass("identity-"+t),s}function s(n,t,i,u,e){var o=f(t,i,u),s=e?r.IdentityImageMode.ShowGenericImage:r.IdentityImageMode.None;return o.attr("src",r.IdentityHelper.getIdentityImageUrl(n,s)),o}function f(n,t,i){var r;return r=$(e("img","identity-picture")),t&&r.attr("title",t),n&&r.addClass(n),i&&r.attr("alt",i),r}var e=u.domElem;t.identityImageElement=o;t.identityImageElementByIdentifier=s});
define("VSS/Controls/Navigation",["require","exports","VSS/Common/Constants/Platform","VSS/Context","VSS/Controls","VSS/Contributions/Controls","VSS/Contributions/Services","VSS/Diag","VSS/Events/Handlers","VSS/Controls/Menus","VSS/Navigation/Services","VSS/Controls/Notifications","q","VSS/Resources/VSS.Resources.Platform","VSS/Service","VSS/Controls/Splitter","VSS/Telemetry/Services","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Array","VSS/Utils/UI","VSS/VSS","VSS/LoaderPlugins/Css!VSS.Controls","VSS/LoaderPlugins/Css!PivotView"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt){function ht(n){var t;return n&&n.length===1&&(t=n.data("item"),t||(t={text:n.find("a:first").html(),title:n.attr("title")||null,id:n.data("id"),link:n.find("a:first").attr("href"),selected:n.hasClass("selected"),encoded:n.data("encoded")||!1,disabled:n.hasClass("disabled")},n.data("item",t))),t}function wt(n,t){t=t||ht(n);t&&(t.disabled?(n.attr("disabled","disabled"),n.addClass("disabled"),n.removeClass("selected")):(n.removeAttr("disabled"),n.removeClass("disabled"),n.toggleClass("selected",t.selected)))}var rt=b.delegate,tt=g.domElem,ft=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({attachNavigate:!1,titleElementSelector:".hub-title",hubSplitterSelector:".hub-content > .splitter",_useHostedTitle:!1},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._options.attachNavigate===!0&&this._attachNavigate()},t.prototype.onNavigate=function(){},t.prototype._getViewTitle=function(){return this._element.find(".hub-title").eq(0)},t.prototype.setViewTitle=function(n,t){this._element.find(this._options.titleElementSelector).text(n||"").attr("title",t||n||"");this.setWindowTitle(n)},t.prototype.setViewTitleContent=function(n,t){this._element.find(this._options.titleElementSelector).html(t||"").attr("title",n||"");this.setWindowTitle(n)},t.prototype.setWindowTitle=function(n){document.title=k.format(this._getPageTitleString(),n||"")},t.prototype.setLeftHubPaneVisibility=function(n){var i=this._element.find(this._options.hubSplitterSelector),t=u.Enhancement.getInstance(p.Splitter,i);t&&n!==this._leftPaneVisible&&(this._leftPaneVisible=n,t.toggleSplit(n))},t.prototype.setFullScreenMode=function(n,t){t===void 0&&(t=!1);var i=$(document.body),r=$(".tfs-host-notifications");i.toggleClass("no-chrome",n);i.toggleClass("full-screen-mode",n);r.toggleClass("visible",r.css("display")!="none");this.setLeftHubPaneVisibility(!n||t)},t.prototype._setTitleMode=function(n){this._useHostedTitle=n},t.prototype._getPageTitleString=function(){return this._useHostedTitle?v.PageTitleWithContent_Hosted:v.PageTitleWithContent},t.prototype._attachNavigate=function(){var i=this,n=!1,t=c.getHistoryService();t.attachNavigate(function(t,r){n=!0;i._onNavigate(r||{})});n||this._onNavigate(t.getCurrentState()||{})},t.prototype._onNavigate=function(n){this.onNavigate(n)},t.ACTION_CONTRIBUTION="contribution",t}(u.BaseControl),st,it,ut,ct,lt,at,et,ot,pt,kt;t.NavigationView=ft;st=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({leftPaneSelector:".hub-content > .splitter > .leftPane",rightPaneSelector:".hub-content > .splitter > .rightPane"},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._leftPane=this.getElement().find(this._options.leftPaneSelector);this._rightPane=this.getElement().find(this._options.rightPaneSelector)},t.getInstance=function(){return t._instance||(t._instance=u.Enhancement.enhance(t,".hub-view",{})),t._instance},t.prototype.getLeftPane=function(){return this._leftPane},t.prototype.getRightPane=function(){return this._rightPane},t}(ft);t.TriSplitNavigationView=st;it=function(){function n(n){this._options=n||{};this._items=this._options.items||[]}return n.toItem=function(n){var t;return n&&n.length===1&&(t=n.data("item"),t||(t={text:n.find("a:first").text(),title:n.attr("title")||null,value:n.data("value"),selected:n.hasClass("selected"),encoded:n.data("encoded")||!1},n.data("item",t))),t},n.domToItems=function(t,i){var r=[];return t.children("li.pivot-filter-item"+(i||"")).each(function(){r.push(n.toItem($(this)))}),r},n.setElementContent=function(n,t){var i,r,e,o,f;i=t.selectedTitle||t.title;r=t.selectedText||t.text;e=t.encoded;o=t.icon;i||e||(i=r);n.empty();i&&n.attr("title",i);o&&$("<span />").addClass(o).addClass("selected-icon").appendTo(n);r&&(f=$("<span />").attr("id",u.getId()),e?f.html(r):f.text(r),f.appendTo(n))},n.prototype.getTypeName=function(){var n=this.constructor;return n.typeName||"select"},n.prototype.getItems=function(t){return n.domToItems(this._element,t)},n.prototype._toItem=function(t){return n.toItem(t)},n.prototype._updateItem=function(n,t){t=t||this._toItem(n);t&&(t.disabled?(n.attr("disabled","disabled"),n.addClass("disabled"),n.removeClass("selected")):(n.removeAttr("disabled"),n.removeClass("disabled"),n.toggleClass("selected",t.selected)))},n.prototype._toggleItem=function(n,t){var i=this._toItem(n);return i&&(typeof t=="undefined"&&(t=!i.selected),i.selected=t,this._updateItem(n,i)),i},n.prototype._selectFirstEnabledItem=function(n){var t,i;return $.each(n,function(){if(!this.disabled&&(t||(t=this),this.selected))return i=this,!1}),!i&&t&&(t.selected=!0,i=t),i},n.prototype._fireChange=function(n,t){n.trigger("filter-changed",[t])},n.prototype._selectItem=function(n){var i,t=n.next("li:not([disabled])");return t.length===0&&(t=n.siblings("li:not([disabled])").first()),t.length>0&&(this._toggleItem(n,!1),i=this._toggleItem(t,!0)),i},n.prototype._onChange=function(n){var r=$(n.target),t,u,i;t=r.closest("li");u=r.closest("a");t.length>0&&(i=this._selectItem(t),i&&this._fireChange(this._element,i));u.length>0&&n.preventDefault()},n.prototype.enhance=function(){var t,n;this._element=this._options.filterContainer.find("ul.pivot-filter-items");this._items=this.getItems();this._attachChange(this._element);t=this._options.filterContainer.children("span.title");t.length===1&&(n=t.attr("id"),n||(n=String(u.getId()),t.attr("id",n)),this._element.find("a").each(function(t,i){var r=$(i),f=r.attr("id")||String(u.getId());r.attr({id:f,"aria-labelledby":n+" "+f})}))},n.prototype.populate=function(){var n=this._items,t=this._ensureElement();t.children().remove();n&&n.length>0&&(this._selectFirstEnabledItem(n),$.each(n,function(){var n=$(tt("li","pivot-filter-item")),r,i,u;n.data("item",this);this.disabled?(n.attr("disabled","disabled"),n.addClass("disabled")):this.selected&&n.addClass("selected");r=this.title;r||this.encoded||(r=this.text);r&&n.attr("title",r);this.value&&n.data("value",this.value);i=$(tt("a"));i.attr("href","#");u=i;this.icon&&($("<span />").addClass(this.icon).appendTo(i),u=$("<span />").appendTo(i));u.addClass("text");this.encoded?u.html(this.text):u.text(this.text);n.append(i);t.append(n)}),this._attachChange(t))},n.prototype.updateItems=function(n){this._items=n;this.populate()},n.prototype.getItem=function(n){var t,i=this._items;return typeof n=="number"?t=i[n]:$.each(i,function(){if(this.value==n||this.text==n)return t=this,!1}),t},n.prototype.getSelectedItems=function(){return this.getItems(".selected")},n.prototype.getSelectedItem=function(){var n=this.getItems(".selected");return n&&n[0]},n.prototype.setSelectedItem=function(n){var t=this,i=this._items;typeof n!="object"&&(n=this.getItem(n));n&&($.each(i,function(){this.selected=!1}),n.selected=!0,this._element.children("li").each(function(){t._updateItem($(this))}))},n.prototype._ensureElement=function(){return this._element||(this._element=$(tt("ul","pivot-filter-items")),this._element.appendTo(this._options.filterContainer)),this._element},n.prototype._attachChange=function(n){n.children().bind("click",rt(this,this._onChange))},n}();nt.initClassPrototype(it,{_options:null,_items:null,_element:null});ut=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.registerBehavior=function(n){t._behaviors[n.typeName]=n},t.createBehavior=function(n,i){var r;return $.each(n||[],function(n,i){return r=t._behaviors[i],r?!1:void 0}),r||(r=it),new r(i)},t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"pivot-filter",behavior:"select"},t))},t.prototype._enhance=function(t){var r,i;n.prototype._enhance.call(this,t);i=t[0];r=i&&typeof i.className=="string"?i.className.split(" "):[];this._initBehavior(r);this._behavior.enhance()},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._attachEvents()},t.prototype.getSelectedItems=function(){return this._behavior.getSelectedItems()},t.prototype.getSelectedItem=function(){return this._behavior.getSelectedItem()},t.prototype.getItem=function(n){return this._behavior.getItem(n)},t.prototype.getItems=function(){return this._behavior.getItems()},t.prototype.setSelectedItem=function(n,t){t===void 0&&(t=!0);this._behavior.setSelectedItem(n,t)},t.prototype.updateItems=function(n,t){this._behavior.updateItems(n,t)},t.prototype._initBehavior=function(n){this._behavior=t.createBehavior(n,{align:this._options.align,items:this._options.items,filterContainer:this._element,useBowtieStyle:this._options.useBowtieStyle})},t.prototype._createElement=function(){n.prototype._createElement.call(this);this._initBehavior([this._options.behavior]);this._buildDom()},t.prototype._buildDom=function(){var n=this._element,o=this._behavior,r=this._options,u,t,e,i,f;n.addClass(o.getTypeName());u=$(tt("span","title"));t=r.title;i=r.text;e=r.useBowtieStyle;f=r.encoded;t||f||(t=i,t&&n.attr("title",t));i&&(f?u.html(i):u.text(i));n.append(u);e&&(n.addClass("bowtie-pivot-filter"),$(tt("span","drop-icon bowtie-icon bowtie-chevron-down")).appendTo(n));this._behavior.populate()},t.prototype._attachEvents=function(){this._bind(this._element,"filter-changed",rt(this,this._onFilterChanged))},t.prototype._onFilterChanged=function(n,t){return this._fire("changed",[t]),$.isFunction(this._options.change)?this._options.change.call(this,t):void 0},t.enhancementTypeName="tfs.ui.pivotFilter",t._behaviors={},t}(u.Control);t.PivotFilter=ut;nt.initClassPrototype(ut,{_behavior:null});ct=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype._selectFirstEnabledItem=function(){},t.prototype._selectItem=function(n){var i=this,t,r=this._toItem(n);return r.selected||(n.siblings("li").each(function(){i._toggleItem($(this),!1)}),t=this._toggleItem(n,!0)),t},t.typeName="radio",t}(it);ut.registerBehavior(ct);lt=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype._selectFirstEnabledItem=function(){},t.prototype._selectItem=function(n){return this._toggleItem(n,!0)},t.typeName="checkbox",t}(it);ut.registerBehavior(lt);at=function(n){function t(t){n.call(this,t);this._showItemIcons=!1}return __extends(t,n),t.prototype.getItems=function(t){return this._addCommandIdToItems(n.prototype.getItems.call(this,t))},t.prototype.populate=function(){var n=this._selectFirstEnabledItem(this._items);n&&(this._element&&this._element.remove(),this._disposeExistingPopup(),this._element=$("<a href=# class='selected'/>").appendTo(this._options.filterContainer),it.setElementContent(this._element,n),this._options.useBowtieStyle?this._options.filterContainer.bind("click",rt(this,this._onDrop)):this._element.bind("click",rt(this,this._onDrop)))},t.prototype.enhance=function(){this._element=this._options.filterContainer.find("ul.pivot-filter-items");this._items=this.getItems();this._element.remove();this.populate()},t.prototype.updateItems=function(t,i){this._showItemIcons=i&&i.showItemIcons;n.prototype.updateItems.call(this,this._addCommandIdToItems(t))},t.prototype.getSelectedItems=function(){return[this.getSelectedItem()]},t.prototype.getSelectedItem=function(){var n;return $.each(this._items,function(){if(this.selected===!0)return n=this,!1}),n},t.prototype.setSelectedItem=function(n,t){t===void 0&&(t=!0);var i=this._items;n&&n!==this.getSelectedItem()&&($.each(i,function(){this.selected=!1}),n.selected=!0,it.setElementContent(this._element,n),t&&this._fireChange(this._element,n))},t.prototype._addCommandIdToItems=function(n){return $.map(n,function(n){return n.id||(n.id=n.text),n})},t.prototype._onDrop=function(n){var r=$(n.target),t=this._options.filterContainer,f=this._items,i;return this._disposeExistingPopup(),i=u.BaseControl.createIn(h.PopupMenu,t,{align:this._options.align||"left-bottom",showIcon:this._showItemIcons,items:[{childItems:f}],useBowtieStyle:this._options.useBowtieStyle,onDeactivate:function(){t.removeClass("active");t.children("ul.menu-popup").hide()},executeAction:rt(this,this._onExecute)}),b.delay(this,10,function(){t.addClass("active");i.popup(r,t)}),this._popupMenu=i,!1},t.prototype._onExecute=function(n){this._options.filterContainer.removeClass("active");this.setSelectedItem(n.get_commandSource()._item)},t.prototype._disposeExistingPopup=function(){this._popupMenu&&(this._popupMenu.dispose(),delete this._popupMenu)},t.typeName="dropdown",t}(it);ut.registerBehavior(at);u.Enhancement.registerEnhancement(ut,".pivot-filter.enhance");et=function(n){function t(t){n.call(this,t);this._contributionsInitialized=!1}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"pivot-view",tagName:"ul"},t))},t.prototype._enhance=function(t){n.prototype._enhance.call(this,t);this._options.items=this.getItems();var i=this._element.data("contribution-id");i&&(this._options.contributionId=i,this._options.getContributionContext&&typeof this._options.getContributionContext=="function"&&(this._contributionContext=this._options.getContributionContext()),this.refreshContributedItems())},t.prototype.getItems=function(n){var t=[];return this._element.children("li"+(n||"")).each(function(){t.push(ht($(this)))}),t},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._attachEvents()},t.prototype.setExtensionContainer=function(n){this._extensionContainer=n},t.prototype.showExtensionTab=function(n,t){f.createContributedControl(this._extensionContainer,n,t)},t.prototype.setContributionContext=function(n){this._contributionContext=n},t.prototype.refreshContributedItems=function(n){var t=this;return n===void 0&&(n=!1),(!this._contributionsInitialized||n)&&typeof this._options.contributionId=="string"?y.getService(e.ExtensionService).getContributionsForTargets([this._options.contributionId]).then(function(n){var i=[];return n.forEach(function(n){var r=f.getBackgroundInstance(n,n.properties.registeredObjectId||n.id).then(function(i){var e,o,u,f,r=t._contributionContext,s,h;return e=i&&typeof i.isDisabled=="function"?i.isDisabled(r):a.resolve(!1),o=i&&typeof i.isInvisible=="function"?i.isInvisible(r):a.resolve(!1),i&&typeof i.name=="function"?(s=i.name,u=s(r)):u=i&&typeof i.name=="string"?a.resolve(i.title):a.resolve(n.properties.name),i&&typeof i.title=="function"?(h=i.title,f=h(r)):f=i&&typeof i.title=="string"?a.resolve(i.title):n.properties.title?a.resolve(n.properties.title):a.resolve(null),a.all([e,o,u,f]).then(function(i){var s=i[0],h=i[1],o=i[2],l=i[3],u,r,f,e;return h?null:(u=n.properties.action,r="",t._options.generateContributionLink&&typeof t._options.generateContributionLink=="function"?r=t._options.generateContributionLink(n.id):(f=c.getHistoryService().getCurrentState(),f.contributionId=n.id,r="#"+c.getHistoryService().getFragmentActionLink(u||ft.ACTION_CONTRIBUTION,f)),e=!1,t._options.getEnabledState&&typeof t._options.getEnabledState=="function"&&(e=!0),{disabled:e&&!t._options.getEnabledState(n.id)?!0:s,encoded:!1,id:n.id,link:r,text:o,title:l||o,contributed:!0,action:u})})});i.push(r)}),a.allSettled(i).then(function(n){$.isArray(t._options.items)?(t._options.items=t._options.items.filter(function(n){return!n.contributed}),t._options.items=t._options.items.concat(n.filter(function(n){return n&&n.state==="fulfilled"&&!!n.value}).map(function(n){return n.value}))):t._options.items=n.filter(function(n){return n.state==="fulfilled"}).map(function(n){return n.value})}).then(function(){t._contributionsInitialized=!0;t.updateItems()})}):(this._contributionsInitialized=!0,a.resolve(null))},t.prototype.updateItems=function(){var i=this,t=this._element,n;t.empty();this._itemIdToSelect&&(n=d.first(this._options.items,function(n){return(n.action||n.id)==i._itemIdToSelect}),n&&(this._itemIdToSelect=null,n.disabled||(this._options.items.forEach(function(n){n.selected=!1}),n.selected=!0)));this._populateItems(t)},t.prototype.setViewLink=function(n,t){var i=this.getView(n);i&&(i.link=t,this._element.find("li").each(function(i,r){var u=$(r);if(u.data("id")===n)return u.find("a:first").attr("href",t),!1}))},t.prototype.getSelectedView=function(){var n=this.getItems(".selected");return n&&n[0]},t.prototype.setViewEnabled=function(n,t){var r=this,i;if(i=this.getView(n),i){if(!i.contributed||!t){i.disabled=!t;return}y.getService(e.ExtensionService).getContribution(n).then(function(n){var t=f.getBackgroundInstance(n,n.properties.registeredObjectId||n.id).then(function(n){var t=r._contributionContext;n&&typeof n.isDisabled=="function"?r._makeThennable(n.isDisabled(t)).then(function(n){i.disabled=n}):i.disabled=!1})})}},t.prototype._makeThennable=function(n){return n&&$.isFunction(n.then)?n:a.resolve(n)},t.prototype.getView=function(n,t){var i;return typeof n=="number"?i=this._options.items[n]:$.each(this._options.items,function(){if(this.id==n)return i=this,!1}),this._itemIdToSelect=!i&&t?t:null,i},t.prototype.setSelectedView=function(n){var t=this._options.items;if(typeof n!="object"&&(n=this.getView(n)),n){$.each(t,function(){this.selected=!1});n.selected=!0;this._element.find("li").each(function(){wt($(this),null)});this.onChanged(n);n.contributed&&n.id&&e.ExtensionHelper.publishTraceData(null,null,n.id)}},t.prototype.onChanged=function(n){this._fire("changed",[n])},t.prototype._createElement=function(){n.prototype._createElement.call(this);this._buildDom()},t.prototype._buildDom=function(){this._populateItems(this._element)},t.prototype._populateItems=function(n){var r,i=this._options.items,t;i&&($.each(i,function(){if(!this.disabled&&(t||(t=this),this.selected))return r=this,!1}),!r&&t&&(t.selected=!0),$.each(i,function(){var t=$(tt("li")),r,i;t.data("item",this);this.disabled?(t.attr("disabled","disabled"),t.addClass("disabled")):this.selected&&t.addClass("selected");r=this.title;r||this.encoded||(r=this.text);r&&t.attr("title",r);this.id&&(t.data("id",this.id),t.attr("data-id",this.id));i=$(tt("a"));this.link?i.attr("href",this.link):i.attr("href","#");this.encoded?i.html(this.text):i.text(this.text);t.append(i);n.append(t)}))},t.prototype._attachEvents=function(){this._bind("click",rt(this,this._onClick))},t.prototype._onClick=function(n){var u=$(n.target),r,i,t;r=u.closest("li");i=u.closest("a");r.length>0&&(t=ht(r));i.length>0&&(k.caseInsensitiveContains(i.attr("href"),"#")||t&&t.disabled)&&(t&&!t.disabled&&this.setSelectedView(t),i.attr("href")==="#"&&n.preventDefault())},t.enhancementTypeName="tfs.ui.pivotView",t}(u.Control);t.PivotView=et;u.Enhancement.registerEnhancement(et,".pivot-view.enhance");ot=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.onNavigate=function(){},t.prototype.onNavigateAway=function(){},t}(u.BaseControl);t.NavigationViewTab=ot;var vt=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({cssClass:"error-tab"},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._messageControl=u.BaseControl.createIn(l.MessageAreaControl,$("<div class='tabbed-navigation-error' />").appendTo(this._element),{closeable:!1})},t.prototype.setContent=function(n,t,i,r){this._messageControl.setMessage({type:i,header:n,content:t});this._messageControl.setErrorDetailsVisibility(r)},t.TAB_ID="error",t}(ot),yt=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({cssClass:"info-tab"},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this)},t.prototype.setHeader=function(n,t){this._$description||(this._$description=$(tt("div","information-summary")).prependTo(this._element));this._$title||(this._$title=$(tt("div","information-title")).prependTo(this._element));this._$title.text(n);this._$description.html(t)},t.prototype.appendInformation=function(n,t){return u.BaseControl.createIn(l.InformationAreaControl,$(tt("div")).appendTo(this._element),{caption:n,collapsed:t})},t.TAB_ID="info",t}(ot),bt=function(n){function t(t){n.call(this,t);this._currentNavigationContextId=0;this._lastParsedNavigationContextId=0;this._showingError=!1}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({tabs:null,tabOptions:null,attachNavigate:!0,hubContentSelector:".right-hub-content .hub-pivot-content",pivotTabsSelector:".right-hub-content .hub-pivot .views .pivot-view",hubSplitterSelector:".hub-splitter"},t))},t.prototype.initialize=function(){this._hubContent=this._element.find(this._options.hubContentSelector);this._options.tabs&&(this._tabsControl=u.Enhancement.ensureEnhancement(et,this._element.find(this._options.pivotTabsSelector)),this._tabsMap={},this._tabOptionsMap={},this.updateTabs(this._options.tabs),this._tabs={});n.prototype.initialize.call(this)},t.prototype.updateTabs=function(n){var t=this;Object.keys(n).forEach(function(i){t._tabsMap[(""+i).toUpperCase()]=n[i]});this._options.tabOptions&&Object.keys(this._options.tabOptions).forEach(function(n){t._tabOptionsMap[(""+n).toUpperCase()]=t._options.tabOptions[n]})},t.prototype.getTab=function(n){return n=(""+n).toUpperCase(),this._tabs[n]},t.prototype.showError=function(n){var i=nt.getErrorMessage(n),t="";n.stack&&(t=$("<div />").text(n.stack));this.showErrorContent(i,t,l.MessageAreaType.Error,!1)},t.prototype.showErrorContent=function(n,t,i,r){var f,e;if(this._tabs){this._updateTabsControl(vt.TAB_ID,this.getRawState(),this._currentParsedState);this._showingError=!0;f=this._getErrorTab();f.setContent(n,t,i,r);this._showTab(f);this._hubContent.show();this.onNavigate(this.getState())}else e=u.BaseControl.createIn(l.MessageAreaControl,$(tt("div","tabbed-navigation-error")).appendTo(this._hubContent),{closeable:!1}),e.setMessage({type:i,header:n,content:t}),e.setErrorDetailsVisibility(r)},t.prototype.showInformationTab=function(n,t){if(this._tabs){this._updateTabsControl(yt.TAB_ID,this.getRawState(),this._currentParsedState);this._showingInfo=!0;var i=this._getInfoTab();i.setHeader(n,t);this._showTab(i);this._hubContent.show();this.onNavigate(this.getState())}else this._$infoContent=$(tt("div","information-section")).appendTo(this._hubContent),$(tt("div","information-title")).appendTo(this._$infoContent).text(n||""),$(tt("div","information-summary")).text(t||"").appendTo(this._$infoContent)},t.prototype.appendInformationContent=function(n,t){var i,r;return this._tabs?(r=this._getInfoTab(),i=r.appendInformation(n,t)):this._$infoContent&&(i=u.BaseControl.createIn(l.InformationAreaControl,this._$infoContent,{caption:n,collapsed:t})),i},t.prototype.appendSectionTitle=function(n){this._tabs?$(tt("div","information-title")).appendTo(this._getInfoTab().getElement()).append(n):this._$infoContent&&$(tt("div","information-title")).appendTo(this._$infoContent).append(n)},t.prototype.appendSectionSummary=function(n){this._tabs?$(tt("div","information-summary")).appendTo(this._getInfoTab().getElement()).append(n):this._$infoContent&&$(tt("div","information-summary")).appendTo(this._$infoContent).append(n)},t.prototype.appendElement=function(n){this._tabs?n.appendTo(this._getInfoTab().getElement()):this._$infoContent&&n.appendTo(this._$infoContent)},t.prototype.refreshCurrentTab=function(){this._onNavigate(this._currentRawState)},t.prototype.getCurrentAction=function(){return this._currentTabId},t.prototype.getState=function(){return this._currentParsedState||{}},t.prototype.setState=function(n){this._currentParsedState=n},t.prototype.getEmptyState=function(){var n={};return $.each(c.getHistoryService().getCurrentState(),function(t){n[t]=null}),n},t.prototype.getRawState=function(){return this._currentRawState||{}},t.prototype.parseStateInfo=function(n,t,i){i(n,t)},t.prototype.getTabVisibility=function(){return!0},t.prototype.getTabLabel=function(){},t.prototype.setHubPivotVisibility=function(n){this._tabsControl.getElement().parents(".hub-pivot:first").toggleClass("hidden",!n)},t.prototype._getErrorTab=function(){return this._errorTab||(this._errorTab=this._createTab(vt)),this._errorTab},t.prototype._getInfoTab=function(){return this._infoTab||(this._infoTab=this._createTab(yt)),this._infoTab},t.prototype._onNavigate=function(n){var i=this,t;this._currentRawState=n;t=++this._currentNavigationContextId;this.parseStateInfo(n.action,n,function(r,u){i._onParseStateInfoSuccess(r,n,u,t)});this._skipTabHideOnAsyncNavigate&&(this._lastParsedNavigationContextId===t||this._showingError||this._showingInfo||this._hubContent.hide(),this._skipTabHideOnAsyncNavigate=!1)},t.prototype._redirectNavigation=function(n,t,i){this._skipTabHideOnAsyncNavigate=!0;i?c.getHistoryService().replaceHistoryPoint(n,t):c.getHistoryService().addHistoryPoint(n,t)},t.prototype._onParseStateInfoSuccess=function(n,t,i,r){var u;if(this._currentParsedState=i||{},this._lastParsedNavigationContextId=r,this._hubContent.show(),this._tabs)if(this._updateTabsControl(n,t,i),u=this._getTab(n),u){if(this._showTab(u),this._showingError=!1,this._currentTabId=n,$.isFunction(u.onNavigate))u.onNavigate(t,i);this.onNavigate(i)}else this.showError(k.format(v.NavigationViewUnknownTabErrorFormat,n));else this.onNavigate(i)},t.prototype._updateTabsControl=function(n,t,i){var r=this;Object.keys(this._tabsMap).forEach(function(u){var o,e=(""+u).toLowerCase(),f=r._tabsControl.getView(e,n);f&&(f.link=c.getHistoryService().getFragmentActionLink(e,t),f.selected=u===(""+n).toUpperCase(),f.disabled=!r.getTabVisibility(e,n,t,i),o=r.getTabLabel(e,n,t,i),o&&(f.text=o))});this._tabsControl.updateItems()},t.prototype._showTab=function(n){this._currentTab!==n&&(this._currentTab&&(this._currentTab.onNavigateAway(),this._currentTab.hideElement()),n&&n.showElement(),this._currentTab=n)},t.prototype._getTab=function(n){var t,i;return n=(""+n).toUpperCase(),t=this._tabs[n],t||(i=this._tabsMap[n],i&&(t=this._createTab(i,this._tabOptionsMap[n]),this._tabs[n]=t)),t},t.prototype._createTab=function(n,t){var i=$("<div />").addClass("navigation-view-tab").appendTo(this._hubContent);return u.Enhancement.enhance(n,i,$.extend({navigationView:this},t))},t}(ft);t.TabbedNavigationView=bt;pt=function(n){function t(t){n.call(this,t);this._navigationLinkOptions=t||{}}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({tagName:"a"},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._navigateHandler=rt(this,this.onNavigate);var t=c.getHistoryService();t.attachNavigate(this._navigateHandler);this._navigationLinkOptions.text?this._element.text(this._navigationLinkOptions.text):this._navigationLinkOptions.$content&&this._navigationLinkOptions.$content.appendTo(this._element);this._navigationLinkOptions.target&&this._element.attr("target",this._navigationLinkOptions.target);this._navigationLinkOptions.title&&this._element.attr("title",this._navigationLinkOptions.title);this.updateLink(this._navigationLinkOptions.initialState||t.getCurrentState())},t.prototype.dispose=function(){n.prototype.dispose.call(this);c.getHistoryService().detachNavigate(this._navigateHandler)},t.prototype.onNavigate=function(n,t){this.updateLink(t)},t.prototype.updateLink=function(n){this._element.attr("href",this.getLocation(n))},t.prototype.getLocation=function(n){return this._navigationLinkOptions.getUrl?this._navigationLinkOptions.getUrl.call(this,n):(n=$.extend({},n,this._navigationLinkOptions.state),c.getHistoryService().getFragmentActionLink(null,n))},t}(u.BaseControl);t.NavigationLink=pt,function(n){function ft(n,t){u=t||{};b||(e=n,c.getHistoryService().attachNavigate(it),$(window).bind("keydown",at),it(),b=!0)}function d(){return t}function h(n,i,r,e){i===void 0&&(i=!0);r===void 0&&(r=!1);e===void 0&&(e=!0);t=n;st.getInstance().setFullScreenMode(t,r);vt();i&&c.getHistoryService().addHistoryPoint(undefined,nt(),undefined,e);f&&f.invokeHandlers(y,this,null);u.publishCIData!==!1&&yt(i);u.setFullScreenCallback&&$.isFunction(u.setFullScreenCallback)&&u.setFullScreenCallback()}function nt(i){var r={};return i=i===undefined?t:i,r[n.FULLSCREEN_HASH_PARAMETER]=i,r}function tt(){return"bowtie-icon "+(t?"bowtie-view-full-screen-exit":"bowtie-view-full-screen")}function et(){return t?v.ExitFullScreenModeTooltip:v.EnterFullScreenModeTooltip}function ot(n){l().subscribe(a,n)}function ht(n){l().unsubscribe(a,n)}function ct(n){l().subscribe(y,n)}function lt(n){l().unsubscribe(y,n)}function at(n,t,i,r,u){var f=!0;return n instanceof jQuery.Event?f=n.isDefaultPrevented():n instanceof KeyboardEvent&&(f=n.defaultPrevented),t=n.keyCode||t,i=n.ctrlKey||i,r=n.shiftKey||r,u=n.altKey||u,!(i||r||u)&&!f&&t&&t===g.KeyCode.ESCAPE?(d()&&h(!1),!1):void 0}function it(){var t=c.getHistoryService().getCurrentState();h(t&&k.localeIgnoreCaseComparer(t[n.FULLSCREEN_HASH_PARAMETER],"true")===0,!1,u.showLeftLane===!0)}function ut(){return{id:p,title:t?v.ExitFullScreenModeTooltip:v.EnterFullScreenModeTooltip,icon:tt(),showText:!1,action:rt}}function vt(){var n=e.getItem(p),t;n?(n.update(ut()),n.removeHighlight()):(t=e.getItems(),t.push(ut()),e.updateItems(t))}function yt(n){var u={isToggle:n,isFullScreen:t,Url:window.location.pathname,HashUrl:window.location.hash,UserId:r.getDefaultWebContext().user.id,ScreenWidth:window.innerWidth,ScreenHeight:window.innerHeight};f&&f.invokeHandlers(a,this,u);w.publishEvent(new w.TelemetryEventData(i.WebAccessCustomerIntelligenceConstants.Area,i.WebAccessCustomerIntelligenceConstants.FullScreenModeFeature,u))}function l(){return f||(f=new s.NamedEventCollection),f}var rt;n.FULLSCREEN_HASH_PARAMETER="fullScreen";var p="fullscreen-toggle",a="fullscreen-ci",y="fullscreen-url-update-event",t,b,e,f,u;n.initialize=ft;n.getFullScreen=d;n.setFullScreen=h;n.getUrlData=nt;n.getFullScreenIcon=tt;n.getFullScreenTooltip=et;n.attachFullScreenCI=ot;n.detachFullScreenCI=ht;n.attachFullScreenUrlUpdateEvent=ct;n.detachFullScreenUrlUpdateEvent=lt;rt=function(){h(!t,u.addHistoryPoint!==!1,u.showLeftLane===!0)}}(kt=t.FullScreenHelper||(t.FullScreenHelper={}));nt.tfsModuleLoaded("VSS.UI.Controls.Navigation",t)});
define("VSS/Search",["require","exports","VSS/Diag","VSS/Utils/Array","VSS/Utils/Core","VSS/VSS"],function(n,t,i,r,u,f){function h(n,t){var u=n.length,r,f,e,i;if(u>1){for(n.sort(t),r=new Array(u),r[0]=n[0],f=0,e=1,i=1;i<u;i++)n[i]!==n[f]&&(r[e++]=n[i],f=i);r.length=e;n=r}return n}var p=u.delegate,w=function(){function n(n,t){this._strategy=n;this._adapter=t}return n.prototype.addItems=function(n){var t=this;i.measurePerformance(function(){t._strategy.processItems(n)},"[SearchCore] Index Building Time");i.logTracePoint("SearchCore.finishIndexing")},n.prototype.beginSearch=function(n){var r=this,t;return this._adapter.isDataSetComplete()||this._adapter.addMoreItems(p(this,this.addItems),function(){r.beginSearch(n)}),i.measurePerformance(function(){t=r._strategy.search(n)},"[SearchCore] Search Time"),this._adapter.handleResults(t,!0,n),t},n.prototype.getStrategy=function(){return this._strategy},n.prototype.clearStrategyStore=function(){this.getStrategy().clearStrategyStore()},n}(),e,c,o,a,v,y;t.SearchCore=w;e=function(){function n(n){this._options=$.extend({},n);this._options.specialCharacters&&this._options.specialCharacters.length&&this._buildSpecialCharacterHashSet(this._options.specialCharacters)}return n.getTerms=function(n,t){var e,u,o,s,f,r,h;for(e=new Object(void 0),u=0,o=n;u<o.length;u++)for(s=o[u],f=s.toLocaleLowerCase().split(t||" "),r=0,h=f.length;r<h;r++)f[r]&&(e[f[r]]=!0);return Object.keys(e)},n.prototype._buildSpecialCharacterHashSet=function(n){var t,i,r;for(this._specialCharactersHashSet={},t=0,i=n;t<i.length;t++)r=i[t],this._specialCharactersHashSet[r.toLocaleLowerCase()]=!0},n.prototype._getTerms=function(t){var u=n.getTerms(t,this._options.delimiter),r,f;if(this._specialCharactersHashSet)for(r=0,f=u;r<f.length;r++){for(var e=f[r],i=0,o=e.length;i<o&&this._specialCharactersHashSet.hasOwnProperty(e[i]);)i++;i>0&&i<o&&u.push(e.substr(i))}return u},n.prototype.processItems=function(){},n.prototype.clearStrategyStore=function(){},n.prototype.search=function(){return[]},n.prototype.dataExists=function(){return!1},n.prototype.getIndexedItemsCount=function(){return 0},n.prototype.getIndexTotalSize=function(){return 0},n}();t.SearchStrategy=e;c=function(n){function t(t,i){if(n.call(this,i),t)this._searchStore=t;else{var r={comparer:this._options.comparer};i&&i.delimiter&&(r.delimiter=i.delimiter);this._searchStore=new l(r)}this._dataExists=!1;this._indexedItems=[]}return __extends(t,n),t.prototype.getIndexTotalSize=function(){return this._searchStore.getStoreTotalSize()},t.prototype.clearStrategyStore=function(){this._dataExists=!1;this._indexedItems=[];this._searchStore.clearStrategyStore()},t.prototype.getIndexedItemsCount=function(){return this._indexedItems.length},t.prototype.processItems=function(n){var f,r,u,t;for(f=0,r=0,u=n;r<u.length;r++)t=u[r],t.terms.length!==0&&this._searchStore.addToIndex(t.item,this._getTerms(t.terms))&&(this._indexedItems.push(t.item),f+=t.terms.length);this._dataExists=!0},t.prototype.search=function(n){var t=$.trim(n);return t===""?this._indexedItems:this._searchStore.search(t)},t.prototype.dataExists=function(){return this._dataExists},t}(e);t.IndexedSearchStrategy=c;o=function(){function n(n){this._options=n||{};this._comparer=this._options.comparer}return n.prototype.search=function(){return[]},n.prototype.addToIndex=function(){return!1},n.prototype.clearStrategyStore=function(){},n.prototype.getStoreTotalSize=function(){return 0},n}();t.IndexedSearchStore=o;var s=function(){function n(n){this.children={};this.content=[];n&&this.content.push(n)}return n}(),b=function(){function n(n){this.root=new s;this.SIZEOF_KEY=2;this.SIZEOF_NUMBER=8;this._comparer=n;this._trieSize=0}return n.prototype.insert=function(n,t){for(var i=this.root,r=0,o=n.length,u,f,e;r<o;++r)if(f=i.children[n[r]],f)i=f;else break;for(;r<o;++r)u=new s,this._trieSize+=this.SIZEOF_KEY,i.children[n[r]]=u,i=u;return e=!1,i.content.indexOf(t)===-1&&(i.content.push(t),this._trieSize+=this.SIZEOF_NUMBER,e=!0),e},n.prototype.find=function(n){for(var r,t=this.root,i=0,u=n.length;i<u;++i)if(r=n[i],t.children[r])t=t.children[r];else return null;return this._getAllDescendantContent(t)},n.prototype._getAllDescendantContent=function(n){var i=[],r=[],t,u;for(i.push(n);i.length;)if(t=i.pop(),t.content&&t.content.length&&(r=r.concat(t.content)),t.children)for(u in t.children)i.push(t.children[u]);return h(r,this._comparer)},n.prototype.clear=function(){this.root=new s;this._trieSize=0},n.prototype.getTrieTotalSize=function(){return this._trieSize},n}(),l=function(n){function t(t){n.call(this,t);this._trie=new b(this._comparer)}return __extends(t,n),t.prototype.search=function(n){for(var u,f,h=e.getTerms([n],this._options.delimiter),t=[],o=0,s=h;o<s.length;o++)if(u=s[o],u&&(f=this._trie.find(u),t=f?t.length===0?f:r.intersectUniqueSorted(t,f,this._comparer):[],t.length===0))break;return t},t.prototype.addToIndex=function(n,t){var u,r,f,e;for(u=!0,r=0,f=t;r<f.length;r++)e=f[r],this._trie.insert(e,n)||(u=!1);return u},t.prototype.clearStrategyStore=function(){this._trie.clear()},t.prototype.getStoreTotalSize=function(){return this._trie.getTrieTotalSize()},t}(o);t.TrieStore=l;a=function(n){function t(t){n.call(this,t);this._index={};this._tokenCache={}}return __extends(t,n),t.prototype.search=function(n){var s,t,u,o,c,f;for(s=e.getTerms([n],this._options.delimiter),t=[],u=0,o=s;u<o.length;u++)if(c=o[u],f=this._index[c],f)t=t.length===0?f:r.intersect(t,f,this._comparer);else{t=[];break}return h(t,this._comparer)},t.prototype.addToIndex=function(n,t){var f,e,h,r,u,l,o,s,c,a;if(f=!0,t)for(e=0,h=t;e<h.length;e++)if(r=h[e],u=[],r){if(this._addItemToIndex(n,r)||(f=!1),this._tokenCache[r])u=this._tokenCache[r];else{for(l=r.length,o=1;o<l;o++)u.push(r.substring(0,o));this._tokenCache[r]=u}if(u)for(s=0,c=u;s<c.length;s++)a=c[s],this._addItemToIndex(n,a)||(f=!1)}return f},t.prototype.clearStrategyStore=function(){this._index={}},t.prototype._addItemToIndex=function(n,t){var u=!1,r=this._index[t];return r||(r=[],this._index[t]=r),r.indexOf(n)===-1&&(r.push(n),u=!0),u},t}(o);t.InvertedIndexStore=a;v=function(){function n(){}return n.prototype.addMoreItems=function(){},n.prototype.createSearchableObjects=function(){return[]},n.prototype.handleResults=function(){},n.prototype.handleError=function(){},n.prototype.handleClear=function(){},n.prototype.isDataSetComplete=function(){return!1},n}();t.SearchAdapter=v;y=function(){function n(n,t){this.item=n;this.terms=t}return n.prototype.setTerms=function(n){this.terms=n},n.prototype.addTerm=function(n){this.terms.push(n)},n}();t.SearchableObject=y;t.fastUnique=h;f.tfsModuleLoaded("VSS.Search",t)});
define("VSS/Utils/Clipboard",["require","exports","VSS/VSS"],function(n,t,i){function r(n,t){var f=!0,r,u,i;return t||window.clipboardData===undefined?(i=$("<div/>"),i.css("background-color","white"),t?i.append(n):i.text(n),document.body.createTextRange?(i.prependTo($("body")),r=document.body.createTextRange(),r.moveToElementText(i[0]),r.select(),r.execCommand("copy")):document.createRange&&window.getSelection&&(i.appendTo($("body")),r=document.createRange(),u=window.getSelection(),u.removeAllRanges(),r.selectNodeContents(i[0]),u.addRange(r),f=document.execCommand("copy")),i.remove()):window.clipboardData.setData(o,n),f}function u(n,t){var r;t&&t.copyDialogOptions?(r=t.copyDialogOptions,r.data=n,r.copyAsHtml=t.copyAsHtml):(r={data:n},t&&(r.copyAsHtml=t.copyAsHtml));i.using(["VSS/Controls/Dialogs"],function(n){n.show(n.CopyContentDialog,r)})}function s(n,t){if(n&&typeof n=="string")if(t&&t.showCopyDialog)u(n,t);else{var i=!1;if(t&&t.copyAsHtml){if(e())try{i=r(n,!0)}catch(o){}}else if(f())try{i=r(n,!1)}catch(o){}i||u(n,t)}}function f(){return document.queryCommandSupported("copy")||window.clipboardData!==undefined}function e(){return document.body.createTextRange!==undefined||document.queryCommandSupported("copy")&&document.createRange!==undefined}var o="text";t.copyToClipboard=s;t.supportsNativeCopy=f;t.supportsNativeHtmlCopy=e});
/*!
 * jQuery UI Droppable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/droppable/
 */
(function (n) { typeof define == "function" && define.amd ? define("jQueryUI/droppable",["jquery", "./core", "./widget", "./mouse", "./draggable"], n) : n(jQuery) })(function (n) { return n.widget("ui.droppable", { version: "1.11.4", widgetEventPrefix: "drop", options: { accept: "*", activeClass: !1, addClasses: !0, greedy: !1, hoverClass: !1, scope: "default", tolerance: "intersect", activate: null, deactivate: null, drop: null, out: null, over: null }, _create: function () { var t, i = this.options, r = i.accept; this.isover = !1; this.isout = !0; this.accept = n.isFunction(r) ? r : function (n) { return n.is(r) }; this.proportions = function () { if (arguments.length) t = arguments[0]; else return t ? t : t = { width: this.element[0].offsetWidth, height: this.element[0].offsetHeight } }; this._addToManager(i.scope); i.addClasses && this.element.addClass("ui-droppable") }, _addToManager: function (t) { n.ui.ddmanager.droppables[t] = n.ui.ddmanager.droppables[t] || []; n.ui.ddmanager.droppables[t].push(this) }, _splice: function (n) { for (var t = 0; t < n.length; t++) n[t] === this && n.splice(t, 1) }, _destroy: function () { var t = n.ui.ddmanager.droppables[this.options.scope]; this._splice(t); this.element.removeClass("ui-droppable ui-droppable-disabled") }, _setOption: function (t, i) { if (t === "accept") this.accept = n.isFunction(i) ? i : function (n) { return n.is(i) }; else if (t === "scope") { var r = n.ui.ddmanager.droppables[this.options.scope]; this._splice(r); this._addToManager(i) } this._super(t, i) }, _activate: function (t) { var i = n.ui.ddmanager.current; this.options.activeClass && this.element.addClass(this.options.activeClass); i && this._trigger("activate", t, this.ui(i)) }, _deactivate: function (t) { var i = n.ui.ddmanager.current; this.options.activeClass && this.element.removeClass(this.options.activeClass); i && this._trigger("deactivate", t, this.ui(i)) }, _over: function (t) { var i = n.ui.ddmanager.current; i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.addClass(this.options.hoverClass), this._trigger("over", t, this.ui(i))) }, _out: function (t) { var i = n.ui.ddmanager.current; i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("out", t, this.ui(i))) }, _drop: function (t, i) { var r = i || n.ui.ddmanager.current, u = !1; return !r || (r.currentItem || r.element)[0] === this.element[0] ? !1 : (this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function () { var i = n(this).droppable("instance"); if (i.options.greedy && !i.options.disabled && i.options.scope === r.options.scope && i.accept.call(i.element[0], r.currentItem || r.element) && n.ui.intersect(r, n.extend(i, { offset: i.element.offset() }), i.options.tolerance, t)) return u = !0, !1 }), u) ? !1 : this.accept.call(this.element[0], r.currentItem || r.element) ? (this.options.activeClass && this.element.removeClass(this.options.activeClass), this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("drop", t, this.ui(r)), this.element) : !1 }, ui: function (n) { return { draggable: n.currentItem || n.element, helper: n.helper, position: n.position, offset: n.positionAbs } } }), n.ui.intersect = function () { function n(n, t, i) { return n >= t && n < t + i } return function (t, i, r, u) { if (!i.offset) return !1; var o = (t.positionAbs || t.position.absolute).left + t.margins.left, s = (t.positionAbs || t.position.absolute).top + t.margins.top, h = o + t.helperProportions.width, c = s + t.helperProportions.height, f = i.offset.left, e = i.offset.top, l = f + i.proportions().width, a = e + i.proportions().height; switch (r) { case "fit": return f <= o && h <= l && e <= s && c <= a; case "intersect": return f < o + t.helperProportions.width / 2 && h - t.helperProportions.width / 2 < l && e < s + t.helperProportions.height / 2 && c - t.helperProportions.height / 2 < a; case "pointer": return n(u.pageY, e, i.proportions().height) && n(u.pageX, f, i.proportions().width); case "touch": return (s >= e && s <= a || c >= e && c <= a || s < e && c > a) && (o >= f && o <= l || h >= f && h <= l || o < f && h > l); default: return !1 } } }(), n.ui.ddmanager = { current: null, droppables: { "default": [] }, prepareOffsets: function (t, i) { var r, f, u = n.ui.ddmanager.droppables[t.options.scope] || [], o = i ? i.type : null, e = (t.currentItem || t.element).find(":data(ui-droppable)").addBack(); n: for (r = 0; r < u.length; r++) if (!u[r].options.disabled && (!t || u[r].accept.call(u[r].element[0], t.currentItem || t.element))) { for (f = 0; f < e.length; f++) if (e[f] === u[r].element[0]) { u[r].proportions().height = 0; continue n } (u[r].visible = u[r].element.css("display") !== "none", u[r].visible) && (o === "mousedown" && u[r]._activate.call(u[r], i), u[r].offset = u[r].element.offset(), u[r].proportions({ width: u[r].element[0].offsetWidth, height: u[r].element[0].offsetHeight })) } }, drop: function (t, i) { var r = !1; return n.each((n.ui.ddmanager.droppables[t.options.scope] || []).slice(), function () { this.options && (!this.options.disabled && this.visible && n.ui.intersect(t, this, this.options.tolerance, i) && (r = this._drop.call(this, i) || r), !this.options.disabled && this.visible && this.accept.call(this.element[0], t.currentItem || t.element) && (this.isout = !0, this.isover = !1, this._deactivate.call(this, i))) }), r }, dragStart: function (t, i) { t.element.parentsUntil("body").bind("scroll.droppable", function () { t.options.refreshPositions || n.ui.ddmanager.prepareOffsets(t, i) }) }, drag: function (t, i) { t.options.refreshPositions && n.ui.ddmanager.prepareOffsets(t, i); n.each(n.ui.ddmanager.droppables[t.options.scope] || [], function () { if (!this.options.disabled && !this.greedyChild && this.visible) { var r, e, f, o = n.ui.intersect(t, this, this.options.tolerance, i), u = !o && this.isover ? "isout" : o && !this.isover ? "isover" : null; u && (this.options.greedy && (e = this.options.scope, f = this.element.parents(":data(ui-droppable)").filter(function () { return n(this).droppable("instance").options.scope === e }), f.length && (r = n(f[0]).droppable("instance"), r.greedyChild = u === "isover")), r && u === "isover" && (r.isover = !1, r.isout = !0, r._out.call(r, i)), this[u] = !0, this[u === "isout" ? "isover" : "isout"] = !1, this[u === "isover" ? "_over" : "_out"].call(this, i), r && u === "isout" && (r.isout = !1, r.isover = !0, r._over.call(r, i))) } }) }, dragStop: function (t, i) { t.element.parentsUntil("body").unbind("scroll.droppable"); t.options.refreshPositions || n.ui.ddmanager.prepareOffsets(t, i) } }, n.ui.droppable });
// Copyright (C) Microsoft Corporation. All rights reserved.
define("VSS/Utils/Draggable",["require","exports","VSS/Diag","jQueryUI/draggable"],function(n,t,i){$(function(){$.ui.plugin.add("draggable","scrollables",{start:function(){function s(n){return n.closest("body").length?!0:!1}for(var f=[],i=null,n=null,o=$(this).data("ui-draggable"),r=o.options,e=0,t=0,u=r.scrollables.length;t<u;t++,e++)(i=$(r.scrollables[t]),s(i))&&i.each(function(t,i){var r=$(i);n=r.offset();n.bottom=n.top+r.height();n.right=n.left+r.width();f[e++]={element:i,rect:n}});r.scrollableElements=f},drag:function(n){var s=$(this).data("ui-draggable"),t=s.options,u=t.cursorAt||{left:0,top:0},l=!1,f=null,h=!1,c=t.scrollableElements,r=null,p,o,y;var a=u.top!=null?u.top:s.helperProportions.height-u.bottom,v=u.left!=null?u.left:s.helperProportions.width-u.right,e={left:n.pageX-v,top:n.pageY-a,right:n.pageX-v+s.helperProportions.width,bottom:n.pageY-a+s.helperProportions.height};for(o=0,y=c.length;o<y;o+=1)typeof c[o]!="undefined"&&(f=c[o].element,r=c[o].rect,l=(e.left>=r.left&&e.left<=r.right||e.right>=r.left&&e.right<=r.right)&&(e.top>=r.top&&e.top<=r.bottom||e.bottom>=r.top&&e.bottom<=r.bottom),l&&(t.axis&&t.axis!=="y"||t.scrollablesAxis&&t.scrollablesAxis!=="y"||(r.bottom-n.pageY<t.scrollSensitivity?(f.scrollTop=f.scrollTop+t.scrollSpeed,h=!0):n.pageY-r.top<t.scrollSensitivity&&(f.scrollTop=f.scrollTop-t.scrollSpeed,h=!0)),t.axis&&t.axis!=="x"||t.scrollablesAxis&&t.scrollablesAxis!=="x"||(r.right-n.pageX<t.scrollSensitivity?(f.scrollLeft=f.scrollLeft+t.scrollSpeed,h=!0):n.pageX-r.left<t.scrollSensitivity&&(f.scrollLeft=f.scrollLeft-t.scrollSpeed,h=!0))));h!==!1&&(p=f.offsetHeight)},stop:function(){var n=$(this).data("ui-draggable"),t=n.options;delete t.scrollableElements}})})});
define("VSS/Controls/Grids",["require","exports","VSS/Contributions/Services","VSS/Controls","VSS/Diag","VSS/Events/Action","VSS/Controls/Menus","VSS/Resources/VSS.Resources.Platform","VSS/Search","VSS/Service","VSS/Controls/StatusIndicator","VSS/Utils/Clipboard","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/UI","VSS/VSS","jQueryUI/droppable","VSS/Utils/Draggable","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){function ut(n,t,i,r,u){for(var f;n<t;)u[n]=i,f=Math.abs(r[n++])+n,f>n&&(ut(n,f,i+1,r,u),n=f)}var g=u.log,nt=u.LogVerbosity.Verbose,b=a.delegate,w=y.domElem,rt,ft=function(){function n(n){this.update(n)}return n.prototype.update=function(n){this._updateSource(n);this.grid&&this.grid.setDataSource(this)},n.prototype.getSource=function(){return this._source},n.prototype.getExpandStates=function(){return null},n.prototype._updateSource=function(n){this._source=n||[]},n}(),et,k,d,tt,ot,it,st;t.GridDefaultSource=ft;et=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.getExpandStates=function(){return this._expandStates},t.prototype._updateSource=function(n){this._source=[];this._expandStates=[];this._prepareItems(n||[])},t.prototype._prepareItems=function(n){for(var t,o,s,f,i=0,r=this._expandStates,u=0,e=n;u<e.length;u++)t=e[u],i+=1,this._source.push($.isArray(t.values)?t.values:t),o=r.length,r.push(0),s=$.isArray(t.children)&&t.children.length>0,s&&(f=this._prepareItems(t.children),r[o]=f*(t.collapsed===!0?-1:1),i+=f);return i},t}(ft);t.GridHierarchySource=et;k=function(n){function t(t){n.call(this,t);this._showingContextMenu=!1;this._contextMenuKeyPressedState=2;this._isAboveFirstOrBelowLastRow=!1;this._rows={};this._columns=[];this._sortOrder=[]}return __extends(t,n),t.prototype.initializeOptions=function(i){n.prototype.initializeOptions.call(this,$.extend({role:"grid",autoSort:!0,payloadSize:t.PAYLOAD_SIZE,extendViewportBy:3,gutter:{contextMenu:null,icon:!1,checkbox:!1},header:!0,allowMoveColumns:!0,draggable:null,droppable:null,asyncInit:!0,sharedMeasurements:!0,coreCssClass:"grid"},i));this._options.contextMenu&&(this._options.contextMenu.useBowtieStyle=!this._options.useLegacyStyle)},t.prototype.getSelectionCount=function(){return this._selectionCount},t.prototype._enhance=function(t){n.prototype._enhance.call(this,t);this._buildDom()},t.prototype.initialize=function(){n.prototype.initialize.call(this);this.getElement().attr("aria-readonly","true");this._contentSize={width:300,height:400};this._takeMeasurements();this._options.asyncInit?a.delay(this,10,function(){this._attachEvents()}):this._attachEvents();this._options.contextMenu&&typeof this._options.contextMenu.columnIndex=="undefined"&&(this._automaticContextMenuColumn=!0);this.initializeDataSource(this._options.suppressRedraw);this._options.contextMenu&&this._options.contextMenu.contributionIds&&h.getService(i.ExtensionService).getContributionsForTargets(this._options.contextMenu.contributionIds);u.logTracePoint("Grid.initialize.complete")},t.prototype.getDraggingRowInfo=function(){return this._draggingRowInfo},t.prototype._getDragOverRows=function(){return this._ddRowOverStatus},t.prototype._getAcceptStatus=function(n){return this._droppable.accept||this._droppable.acceptSelector?this._ddRowAcceptStatus[n]:!0},t.prototype._resetRowAcceptStatus=function(){this._ddRowAcceptStatus={}},t.prototype._rowDropTryActivate=function(n,t,i){var r=this._rowDropAccept(n,i.draggable);return r&&this._rowDropActivate(n,t,i),r},t.prototype._rowIntersect=function(n,t){var f=this._rows[t.dataIndex],i,r,u;return f?(i=f.row,r=i.offset(),r.top-=this._rowOffsetHeight||0,u=this._calculateIntersectPosition(n),$.ui.intersect(n,{offset:r,proportions:function(){return{width:i[0].offsetWidth,height:i[0].offsetHeight}}},this._droppable.tolerance,{pageY:u.pageY,pageX:u.pageX})):!1},t.prototype._calculateIntersectPosition=function(n){var t,i;return(n.positionAbs||n.position)&&(n.clickOffset||n.offset)&&(t=(n.positionAbs||n.position.absolute).top+(n.clickOffset||n.offset.click).top,i=(n.positionAbs||n.position.absolute).left+(n.clickOffset||n.offset.click).left),{pageY:t,pageX:i}},t.prototype.initializeDataSource=function(n){var t;if(this._resetScroll){this._ignoreScroll=!0;try{t=this._canvas[0];t.scrollTop=0;t.scrollLeft=0;this._scrollLeft=0;this._scrollTop=0;this._resetScroll=!1}finally{this._ignoreScroll=!1}}this.setDataSource(this._options.source,this._options.expandStates,this._options.columns,this._options.sortOrder,undefined,n);n||(this._expandedCount>0?this._options.keepSelection&&this._selectedIndex>=0?this._selectRow(Math.min(this._selectedIndex,this._expandedCount-1)):this._selectRow(this._options.initialSelection!==!1?0:-1):this.setSelectedRowIndex(-1))},t.prototype.setDataSource=function(n,t,i,r,f,e){function y(){v.isDisposed()?u.logWarning("Layout called (in setDataSource) after grid was disposed."):(v.layout(),v._ensureSelectedIndex(f))}var o,h,l,s,v=this,c;if(n&&!$.isArray(n)&&(c=n,c.grid=this,n=c.getSource(),t=c.getExpandStates()),this._dataSource=n||[],this._count=l=this._dataSource.length,t?(this._expandStates=t,this._indentLevels=[],ut(0,l,1,t,this._indentLevels)):(this._indentLevels=null,this._expandStates=null),this._expandedCount=l,this._updateRanges(),i)for(this._columns=[],o=0,h=i.length;o<h;o++)s=i[o],this._setColumnInfo(s,o),this._columns.push(s);if(r)for(this._sortOrder=[],o=0,h=r.length;o<h;o++)s=r[o],s.order!=="desc"&&(s.order="asc"),this._sortOrder.push(s);this._options.autoSort&&this._sortOrder.length>0&&this._trySorting(this._sortOrder);this._clearSelection();this._determineIndentIndex();e||(this._options.asyncInit?a.delay(this,0,y):y())},t.prototype._setColumnInfo=function(n,t){n.index=typeof n.index!="undefined"?n.index:t;n.canSortBy=n.canSortBy!==!1;n.canMove=n.canMove!==!1;n.width=typeof n.width!="undefined"?n.width:100;n.getCellContents=n.getCellContents||this._drawCell;n.getHeaderCellContents=n.getHeaderCellContents||this._drawHeaderCellValue;n.getColumnValue=n.getColumnValue||this.getColumnValue},t.prototype.getRowInfo=function(n){return this._rows[n]},t.prototype.getRowData=function(n){return this._dataSource[n]},t.prototype.getColumns=function(){return this._columns||[]},t.prototype.getSortOrder=function(){return this._sortOrder||[]},t.prototype.setColumnOptions=function(n,t){for(var r=this._columns,i=0,f=r.length;i<f;i++)if(r[i].name===n){r[i]=$.extend(r[i],t);break}},t.prototype._getDataIndex=function(n){var t,u,r=-1,f=this._visibleRange,i;if(n<0)return-1;for(t=0,u=f.length;t<u;t++)if(i=f[t],r+=i[1]-i[0]+1,n<=r)return i[1]-r+n;return n},t.prototype._getRowIndex=function(n){for(var r=0,f=this._visibleRange,t,i=0,u=f.length;i<u;i++){if(t=f[i],n>=t[0]){if(n<=t[1])return r+n-t[0]}else break;r+=t[1]-t[0]+1}return-Math.max(0,r-1)},t.prototype.expandNode=function(n){var t,i;this._expandStates&&(t=this._expandStates[n],t<0&&(this._expandStates[n]=-t,this._updateRanges(),i=this._rows[n],i&&(i.dirty=!0)))},t.prototype.collapseNode=function(n){var t,i;this._expandStates&&(t=this._expandStates[n],t>0&&(this._expandStates[n]=-t,this._updateRanges(),i=this._rows[n],i&&(i.dirty=!0)))},t.prototype.expandAllNodes=function(){return this._updateExpansionStates(!0,Number.MAX_VALUE)},t.prototype.collapseAllNodes=function(){return this._updateExpansionStates(!1,Number.MAX_VALUE)},t.prototype.expandAll=function(){u.logTracePoint("Grid.expandAll.start");this._updateExpansionStateAndRedraw(!0,Number.MAX_VALUE);u.logTracePoint("Grid.expandAll.complete")},t.prototype.collapseAll=function(){u.logTracePoint("Grid.collapseAll.start");this._updateExpansionStateAndRedraw(!1,Number.MAX_VALUE);u.logTracePoint("Grid.collapseAll.complete")},t.prototype.expandByLevel=function(n){this._updateExpansionStateAndRedraw(!0,n)},t.prototype.collapseByLevel=function(n){this._updateExpansionStateAndRedraw(!1,n)},t.prototype.tryToggle=function(n,t,i){var r,f,u,e;if(!this._expandStates||this._selectedIndex<0||this._expandedCount<=0||(r=i!==undefined&&i>-1?i:this._getDataIndex(this._selectedIndex),e=this._rows[r],!e))return!1;if(t){if(n){if(u=!0,!this.expandAllNodes())return!1}else if(u=!1,!this.collapseAllNodes())return!1;return this._raiseToggleEvent(e,u),this._clearSelection(),this._addSelection(Math.abs(this._getRowIndex(r))),this._layoutContentSpacer(),this._redraw(),!0}if(f=this._expandStates[r],f!==0){if(n)if(u=!0,f<0)this.expandNode(r);else return!1;else if(u=!1,f>0)this.collapseNode(r);else return!1;return this._raiseToggleEvent(e,u),this._clearSelection(),this._addSelection(this._getRowIndex(r)),this._layoutContentSpacer(),this._redraw(),!0}return!1},t.prototype._getVisibleRowIndices=function(){var n=this._scrollTop,r=n+this._canvasHeight,t=this._expandedCount-1,i=this._rowHeight;return{first:Math.min(t,Math.max(0,Math.ceil(n/i))),last:Math.min(t,Math.floor(r/i)-1)}},t.prototype._getRowIntoView=function(n,t){var e,i,o,f,r;return(u.logTracePoint("TFS.UI.Controls.Grids._getRowIntoView.start"),t)?(r=Math.max(0,Math.min(n||0,this._expandedCount-1))*this._rowHeight,this._canvas[0].scrollTop=r,this._scrollTop=r,!0):(e=this._getVisibleRowIndices(),i=e.first,o=e.last,f=o-i,n<i||n>o)?(i=this._selectedIndex>i?Math.max(n-f,0):Math.max(0,Math.min(n+f,this._expandedCount-1)-f),r=i*this._rowHeight,this._canvas[0].scrollTop=r,this._scrollTop=r,!0):!1},t.prototype.getSelectedRowIntoView=function(n){return this._getRowIntoView(this._selectedIndex,n)},t.prototype.cacheRows=function(){},t.prototype._drawRowsInternal=function(n,t){function rt(n){n.hover(function(){n.addClass("grid-row-hover")},function(){n.removeClass("grid-row-hover")})}var h,b,l,e=this._rows,i,u,r,k={},d=this._expandStates,g=0,tt=this._indentLevels,nt=0,a=this._gutter,ut=this._canvas[0],it,c,v,f,y,p,o,s;for(y=document.createDocumentFragment(),a&&(it=this._gutter[0],p=document.createDocumentFragment()),this._rows=k,h=0,b=n.length;h<b;h++)l=n[h],u=l[0],r=l[1],i=e[r],i?(f=i.rowIndex!==u,f?i.rowIndex=u:(f=i.dirty,delete i.dirty),t&&(f=!0),delete e[r]):(f=!0,i={rowIndex:u,dataIndex:r},c=w("div","grid-row grid-row-normal"),c.id="row_"+this.getId()+"_"+u,y.appendChild(c),o=$(c),o.attr("role","row"),i.row=o.data("grid-row-info",i),s=null,a&&(v=w("div","grid-gutter-row grid-gutter-row-normal"),p.appendChild(v),s=$(v),i.gutterRow=s.data("grid-row-info",i)),!this._options.useLegacyStyle&&s?(this.setupFullRowHover(o),this.setupFullRowHover(s)):rt(o)),k[r]=i,f&&(d&&(g=d[r],nt=tt[r]),this._updateRow(i,u,r,g,nt));for(r in e)e.hasOwnProperty(r)&&(i=e[r],i.row.remove(),a&&i.gutterRow.remove());return this._droppable&&this._droppable.rowOffsetPercentage&&this._rows[0]&&!this._rowOffsetHeight&&(this._rowOffsetHeight=this._rows[0].row.height()*this._droppable.rowOffsetPercentage/100),{rowsFragment:y,gutterFragment:p}},t.prototype.setupFullRowHover=function(n){function t(n,t){var i=n.data("grid-row-info");i&&(i.row&&i.row.toggleClass("grid-row-hover",t),i.gutterRow&&i.gutterRow.toggleClass("grid-row-hover",t))}n.hover(function(){t(n,!0)},function(){t(n,!1)})},t.prototype._drawRows=function(n,t){var i=this._drawRowsInternal(n,t),u=this._canvas[0],r;u.appendChild(i.rowsFragment);i.gutterFragment&&(r=this._gutter[0],r.appendChild(i.gutterFragment))},t.prototype.updateRow=function(n,t,i){var r,u=0,f=0;typeof t=="undefined"||t<0?t=this._getDataIndex(n):(typeof n=="undefined"||n<0)&&(n=this._getRowIndex(t));r=this._rows[t];r&&(this._expandStates&&(u=this._expandStates[t],f=this._indentLevels[t]),this._updateRow(r,n,t,u,f,i))},t.prototype._updateRow=function(n,i,r,u,f,e){var v,o,g,h,nt,k,c,tt,ot,st,l,ht,a,it,p,d,rt,ut,ft,b,s,et;for(st=this._indentIndex,this._gutter&&(o=this._options.gutter,g=n.gutterRow,h=g[0],h.style.top=i*this._rowHeight+"px",h.style.left="0px",h.style.width=this._gutterWidth+"px",h.style.height=this._rowHeight+"px",o.contextMenu&&(it="grid-gutter-cell grid-gutter-menu",this._options.useLegacyStyle&&this._rowHasContextMenu(r)&&(it+=" grid-gutter-drop bowtie-icon bowtie-triangle-down"),nt=w("div",it),$(nt).css("line-height",this._rowHeight+"px"),g.append(nt)),o.checkbox&&(ot=$(w("input","checkbox "+(o.checkbox.cssClass||""))).attr("type","checkbox"),tt=w("div","grid-gutter-cell grid-gutter-checkbox"),tt.appendChild(ot[0]),h.appendChild(tt)),o.icon&&(c="grid-gutter-cell grid-gutter-icon ",typeof o.icon.cssClass!="undefined"&&(c+=o.icon.cssClass+" "),typeof o.icon.index!="undefined"&&(c+=(this.getColumnValue(r,o.icon.index,-1)||"")+" "),$.isFunction(o.icon.getIconClass)&&(c+=(o.icon.getIconClass(this._dataSource[r])||"")+" "),o.icon.ownerDraw!==!1&&(c+=this._getGutterIconClass(i,r,u,f)||""),k=w("div",c),$(k).css("line-height",this._rowHeight+"px"),o.icon.tooltipIndex&&(p=this.getColumnValue(r,o.icon.tooltipIndex,-1),$.isFunction(p)&&(p=p()),$(k).attr("title",p)),h.appendChild(k)),this._drawGutterCell(n,i,r,u,f)),d=!!e,v=this._updateRowSize(i,n.row,d),rt=this._columns,b=0,l=0,ht=rt.length;l<ht;++l)(s=rt[l],s.hidden)||(b+=(s.width||20)+this._cellOffset,!d||e[s.index])&&(a=s.getCellContents.apply(this,[n,r,u,f,s,st,l]),a&&(s.width>0&&(ut=s,ft=a),!this._options.useLegacyStyle&&this._options.contextMenu&&s.index===this._options.contextMenu.columnIndex&&this._addContextMenuContainer(a,this._rowHasContextMenu(r)),d?v.replaceChild(a[0],v.children[l]):v.appendChild(a[0])));b=this._fixColumnsWidth(b);et=this._canvasWidth-b;this._options.lastCellFillsRemainingContent===!0&&et>0&&ft&&ut&&ft.width(ut.width+et);y.makeElementUnselectable(v);this._gutter&&y.makeElementUnselectable(h);this._updateRowSelectionStyle(n,this._selectedRows,this._selectedIndex);this._options.enabledEvents&&t.EVENT_ROW_UPDATED in this._options.enabledEvents&&this._element.triggerHandler(t.EVENT_ROW_UPDATED,[n])},t.prototype._rowHasContextMenu=function(n){return!(this._options.source&&this._options.source[n]&&this._options.source[n].noContextMenu)},t.prototype._addContextMenuContainer=function(n,t){var i,r,u;t?(i=$(w("div","grid-context-menu-container grid-context-menu")).attr("title",""),r=$(w("span","grid-context-menu-icon bowtie-icon bowtie-ellipsis")),i.append(r),u=$(w("div","grid-cell-contents-container")).append(n.contents()),n.append(i),n.append(u)):n.prepend($(w("div","grid-context-menu-container grid-no-context-menu")))},t.prototype._updateRowSize=function(n,t,i){i||t.empty();var r=t[0];return r.style.top=n*this._rowHeight+"px",r.style.left=this._gutterWidth+"px",r.style.height=this._rowHeight+"px",r.style.width=isNaN(this._contentSize.width)?"":Math.max(this._contentSize.width+2,this._canvasWidth-this._gutterWidth)+"px",r},t.prototype._drawCell=function(n,t,i,r,u,f,e){var s,h,c,o,l,a=u.width||20,v;return l=w("div","grid-cell"),l.style.width=isNaN(a)?a:a+"px",o=$(l),typeof u.hrefIndex!="undefined"&&(v=this.getColumnValue(t,u.hrefIndex,-1)),s=this.getColumnText(t,u,e),o.attr("title",s||null),o.attr("role","gridcell"),v?o.append($("<a/>").attr("href",v).text(s)):s?o.text(s):o.html("&nbsp;"),e===f&&r>0&&(c=r*16-13,u.indentOffset=c,i!==0&&(h=$(w("div","icon grid-tree-icon")).appendTo(o).css("left",c),i>0?h.addClass("bowtie-icon bowtie-chevron-down"):h.addClass("bowtie-icon bowtie-chevron-right")),o.css("textIndent",r*16+"px")),u.rowCss&&o.addClass(u.rowCss),o},t.prototype._drawHeaderCellValue=function(n){var t=$("<div/>").text(n.text||"").addClass("title");return!this._isIndentedHeaderColumn(n)||this._indentLevels==="undefined"||this._indentLevels===null||t.addClass("indented-title"),t},t.prototype._isIndentedHeaderColumn=function(n){return n.index===this._indentIndex},t.prototype._layoutHeader=function(){this._header&&this._headerCanvas.length>0&&(this._headerCanvas[0].style.left=this._gutterWidth-this._scrollLeft+"px");this._gutter&&this._gutter.length>0&&(this._gutter[0].style.left=this._scrollLeft+"px")},t.prototype.layout=function(){u.logTracePoint("Grid.layout.start");this._setContextMenuColumn();this._cleanUpRows();this._fixScrollPos();this._layoutContentSpacer();this._updateViewport();this._layoutHeader();this._drawHeader();this._fire("Grid.layout.complete");u.logTracePoint("Grid.layout.complete")},t.prototype.redraw=function(){this._fixScrollPos();this._redraw(!0)},t.prototype.getColumnValue=function(n,t){return this._dataSource[n][t]},t.prototype.getColumnText=function(n,t,i){var r,u;return r=t.getColumnValue.call(this,n,t.index,i),u=typeof r!="string"?a.convertValueToDisplayString(r,t.format):r,t.maxLength=Math.max(t.maxLength||0,u.length),u},t.prototype._getExpandState=function(n){var t=0;return this._expandStates&&typeof this._expandStates[n]=="number"&&(t=this._expandStates[n]),t},t.prototype._selectRow=function(n,t,i){var r=i&&i.ctrl,u=i&&i.shift,f=i&&i.rightClick;r?this._addSelection(n,t,{toggle:!0}):u?(this._clearSelection(),this._addSelectionRange(n,t)):f?this._selectedRows&&n+""in this._selectedRows?(this._selectedIndex=n,this._updateAriaAttribute()):(this._clearSelection(),this._addSelection(n,t)):(this._clearSelection(),this._addSelection(n,t))},t.prototype.getSelectedRowIndex=function(){return this._selectedIndex},t.prototype.setSelectedRowIndex=function(n){this._clearSelection();this._addSelection(n)},t.prototype.getSelectedDataIndex=function(){return this._getDataIndex(this._selectedIndex)},t.prototype.getLastRowDataIndex=function(){var n=this._visibleRange.length;return n>0?this._visibleRange[n-1][1]:-1},t.prototype.getSelectedDataIndices=function(){var t,n=this._selectedRows,i=[];if(n)for(t in n)n.hasOwnProperty(t)&&(i[i.length]=n[t]);return i},t.prototype.ensureDataIndexExpanded=function(n){for(var t=this._getRowIndex(n);t<0||n>0&&t===0;)this.expandNode(this._getDataIndex(-t)),t=this._getRowIndex(n);return t},t.prototype.setSelectedDataIndex=function(n,t){var i=t?this.ensureDataIndexExpanded(n):this._getRowIndex(n);this.setSelectedRowIndex(i)},t.prototype.selectionChanged=function(){},t.prototype.selectedIndexChanged=function(){},t.prototype._updateRowSelectionStyle=function(n,t,i){var f="grid-row-selected",e="grid-row-selected-blur",o="grid-gutter-row-selected",s="grid-gutter-row-selected-blur",h="grid-row-current",c="grid-gutter-row-current",l="grid-blurred",a=n.rowIndex,u=n.row,r=n.gutterRow,v=this._active;t&&a in t?(r&&r.find("input.checkbox").prop("checked",!0),v?(u.hasClass(f)||(u.removeClass(e),u.addClass(f)),r&&!r.hasClass(o)&&(r.removeClass(s),r.addClass(o)),this.getElement().removeClass(l)):(u.hasClass(e)||(u.removeClass(f),u.addClass(e)),r&&!r.hasClass(s)&&(r.removeClass(o),r.addClass(s)),this.getElement().addClass(l))):(u.removeClass(f+" "+e+" "+h),r&&(r.removeClass(o+" "+s+" "+c),r.find("input.checkbox").prop("checked",!1)));a===i?(u.addClass(h),r&&r.addClass(c)):(u.removeClass(h),r&&r.removeClass(c))},t.prototype.focus=function(n){y.tryFocus(this._canvas,n)},t.prototype.getContextMenuRowInfo=function(){return this._popupMenu?this._popupMenu._options.contextInfo.rowInfo:null},t.prototype._createContextMenu=function(n,t){return this._createContextPopupMenuControl(t)},t.prototype._createContextPopupMenuControl=function(n){var t=$.map(n.items||[],function(n){return n});return r.BaseControl.createIn(e.PopupMenu,this._element,$.extend({align:"left-bottom"},n,{items:[{childItems:e.sortMenuItems(t)}]}))},t.prototype._onContainerResize=function(){this._measureCanvasSize();(this._canvasHeight!==this._previousCanvasHeight||this._canvasWidth!==this._previousCanvasWidth)&&this.layout()},t.prototype._onColumnResize=function(n){this._fire("columnresize",[n])},t.prototype._onColumnMove=function(n,t){this._fire("columnmove",[n,t])},t.prototype._sortBy=function(n,t){var i=this._sortOrder.slice(0),u,f,r,e=!1,o;if(n){for(u=0,f=i.length;u<f;u++)if(r=i[u],r.index===n.index){i.splice(u,1);e=!0;break}e?r.order=r.order==="asc"?"desc":"asc":r={index:n.index,order:"asc"};t?i.push(r):i=[r]}o=this._getSortColumns(i);this._onSort(i,o)},t.prototype.onSort=function(n,t){this._options.autoSort&&(this._trySorting(n,t),this._sortOrder=n,this.layout());u.logTracePoint("Grid.OnSort.Complete")},t.prototype._trySorting=function(n,t){function l(n,t,i,r){var u=i[n.index],f=r[n.index],e=typeof u,o=typeof f;return e==="undefined"||u===null?o==="undefined"||f===null?0:-1:e==="number"&&o==="number"?u-f:u instanceof Date&&f instanceof Date?u.getTime()-f.getTime():v.localeIgnoreCaseComparer(u,f)}var o=this,s,r,h,f,i;if(t||(t=this._getSortColumns(n)),s=[],r=this._expandStates,r)for(i=0;i<r.length;i++)if(h=r[i],h!=0)for(f=i+1;f<=Math.abs(h)+i;f++)s[f]=i;var u=[],e=this._dataSource,c=this._indentLevels;for(i=0;i<e.length;i++)u[i]=r?{dataSource:e[i],expandState:r[i],level:c[i],parent:u[s[i]]}:{dataSource:e[i]};for(u.sort(function(i,r){for(var c,s,h,a,f,e=0;e<n.length;e++)if(c=n[e],h=t[e],h){if(f=[i,r],o._expandStates)if(f=o._getComparableAncestors(u,i,r),f[0]){if(!f[1])return-1}else return 1;if(a=h.comparer||l,s=a.call(o,h,c.order,f[0].dataSource,f[1].dataSource),s===0)continue;else return c.order==="desc"?-s:s}return 0}),i=0;i<u.length;i++)e[i]=u[i].dataSource,r&&(r[i]=u[i].expandState,c[i]=u[i].level)},t.prototype._getComparableAncestors=function(n,t,i){return i==t.parent?[null,i]:t==i.parent?[t,null]:t.parent==i.parent?[t,i]:t.level>i.level?this._getComparableAncestors(n,t.parent,i):t.level<i.level?this._getComparableAncestors(n,t,i.parent):this._getComparableAncestors(n,t.parent,i.parent)},t.prototype._getRowInfoFromEvent=function(n,t){return $(n.target).closest(t).data("grid-row-info")},t.prototype._onRowMouseDown=function(n){var t=this._getRowInfoFromEvent(n,".grid-row,.grid-gutter-row");if(t)if($(n.target).hasClass("grid-tree-icon")&&n.which===1)this._onToggle(t);else if(n.which!==2)return this._selectRow(t.rowIndex,t.dataIndex,{ctrl:n.ctrlKey,shift:n.shiftKey,rightClick:n.which===3||$(n.target).closest(".grid-context-menu-container").length>0}),this._handleEvent(n,this.onRowMouseDown,"rowmousedown",{row:t.row,rowInfo:t,rowIndex:t.rowIndex,dataIndex:t.dataIndex})},t.prototype.onRowMouseDown=function(){},t.prototype._onRowMouseUp=function(n){var t=this._getRowInfoFromEvent(n,".grid-row");if(t)return this._handleEvent(n,this.onRowMouseUp,"rowmouseup",{row:t.row,rowInfo:t,rowIndex:t.rowIndex,dataIndex:t.dataIndex})},t.prototype.onRowMouseUp=function(){},t.prototype.onRowClick=function(n){if(!this._options.useLegacyStyle&&n.event&&n.event.target){var t=$(n.event.target).closest(".grid-context-menu");if(t.length>0){n.contextMenu=t;return this.onContextMenu(n)}}},t.prototype.onRowDoubleClick=function(){},t.prototype.onGutterClick=function(n){this._options.gutter.contextMenu&&this._options.useLegacyStyle&&this._showContextMenu(n)},t.prototype.onEnterKey=function(n){if(n.event.altKey)return this._showContextMenu(n),!1},t.prototype.onDeleteKey=function(){},t.prototype._onOpenRowDetail=function(n,t){var i,r,u;if(this._handleEvent(n,this.onOpenRowDetail,"openRowDetail",t)!==!1){if(i=this._options.openRowDetail,i)return $.isFunction(i)&&(i=i.call(this,this._selectedIndex)),i&&(typeof i!="string"?(r=this.getColumnValue(this._selectedIndex,i.hrefIndex,-1),u=i.target):r=i,r&&(u?f.getService().performAction(f.CommonActions.ACTION_WINDOW_OPEN,{url:r,target:u,features:this._options.openRowDetail.targetFeatures}):f.getService().performAction(f.CommonActions.ACTION_WINDOW_NAVIGATE,{url:r}))),!1}else return!1},t.prototype.onOpenRowDetail=function(){},t.prototype.onContextMenu=function(n){this._showContextMenu(n)},t.prototype._onBlur=function(){g(nt,"(grid) focus out");this._showingContextMenu||(this._active=!1,this._updateSelectionStyles())},t.prototype._onFocus=function(){g(nt,"(grid) focus in");this._lastFocusTime=Date.now();this._active=!0;this._updateSelectionStyles();this._updateAriaAttribute()},t.prototype._onKeyPress=function(){},t.prototype._onKeyDown=function(n){var i={lo:-1,hi:-1},t=y.KeyCode,r=this._canvas;if(g(nt,"(grid) key down"),this._copyInProgress)return n.keyCode===t.ESCAPE&&this._cancelable&&this._cancelable.cancel(),!1;this._count>0&&(i={lo:0,hi:this._expandedCount-1});this._selectedIndex<0&&this._addSelection(i.lo);switch(n.keyCode){case t.A:if(n.ctrlKey)this.selectAll();else return;break;case t.C:if(n.ctrlKey)this.copySelectedItems();else return;break;case t.F10:return n.shiftKey?this._onContextMenu():void 0;case t.DOWN:this._onDownKey(n,i);break;case t.UP:this._onUpKey(n,i);break;case t.PAGE_DOWN:case t.PAGE_UP:this._onPageUpPageDownKey(n,i);break;case t.RIGHT:this._onRightKey(n);break;case t.LEFT:this._onLeftKey(n);break;case t.ENTER:if(!y.KeyUtils.isModifierKey(n))return this._onEnterKey(n,i);break;case t.DELETE:return this._onDeleteKey(n);case t.HOME:this._onHomeKey(n,i);break;case t.END:this._onEndKey(n,i);break;case t.ESCAPE:this._onEscapeKey(n);break;case t.TAB:this._onTabKey(n);return;case t.BACKSPACE:this._onBackSpaceKey(n);return;case t.CONTEXT_MENU:this._contextMenuKeyPressedState=0;this._onContextMenu(n);return;default:return}this.getSelectedRowIntoView();this._fire("keydown",[n.keyCode,n.ctrlKey,n.shiftKey,n.altKey]);n.preventDefault()},t.prototype._onBackSpaceKey=function(){},t.prototype._onUpKey=function(n,t){this._clearSelection();n.ctrlKey?n.shiftKey?this._addSelectionRange(t.lo):this._addSelection(t.lo):n.shiftKey?this._addSelectionRange(Math.max(this._selectedIndex-1,t.lo)):this._addSelection(Math.max(this._selectedIndex-1,t.lo))},t.prototype._onDownKey=function(n,t){this._clearSelection();n.ctrlKey?n.shiftKey?this._addSelectionRange(t.hi):this._addSelection(t.hi):n.shiftKey?this._addSelectionRange(Math.min(this._selectedIndex+1,t.hi)):this._addSelection(Math.min(this._selectedIndex+1,t.hi))},t.prototype._onRightKey=function(n){var t=this._canvas;this.tryToggle(!0,n.shiftKey)?(this._clearSelection(),this._addSelection(this._selectedIndex)):t.scrollLeft(t.scrollLeft()+50)},t.prototype._onLeftKey=function(n){var t=this._canvas;this.tryToggle(!1,n.shiftKey)?(this._clearSelection(),this._addSelection(this._selectedIndex)):t.scrollLeft(t.scrollLeft()-50)},t.prototype._onPageUpPageDownKey=function(n,t){var i=this._getRowsPerPage(n),r=y.KeyCode;this._clearSelection();n.keyCode===r.PAGE_DOWN?n.shiftKey?this._addSelectionRange(Math.min(this._selectedIndex+i,t.hi)):this._addSelection(Math.min(this._selectedIndex+i,t.hi)):n.shiftKey?this._addSelectionRange(Math.max(this._selectedIndex-i,t.lo)):this._addSelection(Math.max(this._selectedIndex-i,t.lo))},t.prototype._getRowsPerPage=function(){var n=this._canvas[0].clientHeight;return Math.floor(n/this._rowHeight)},t.prototype._onHomeKey=function(n,t){this._clearSelection();n.shiftKey?this._addSelectionRange(t.lo):this._addSelection(t.lo)},t.prototype._onEndKey=function(n,t){this._clearSelection();n.shiftKey?this._addSelectionRange(t.hi):this._addSelection(t.hi)},t.prototype._onTabKey=function(){},t.prototype._onEscapeKey=function(){this._tryFinishColumnMoving(!0)},t.prototype._onKeyUp=function(){return},t.prototype.enableEvent=function(n){var t=this._options.enabledEvents;t||(t={},this._options.enabledEvents=t);t[n]=!0},t.prototype.disableEvent=function(n){var t=this._options.enabledEvents;t&&delete t[n]},t.prototype.getExpandStates=function(){return this._expandStates},t.prototype.beginFormatTable=function(n,t,i,r){this._beginEnsureSelectionIsAvailable(b(this,function(){var t=this,u,f;t._cancelable&&t._cancelable.canceled||(i||(i=t._options&&t._options.formatterType?t._options.formatterType:it),u=new i(t,r),f=u.getTableFromSelectedItems());$.isFunction(n)&&n(f)},t))},t.prototype._createElement=function(){n.prototype._createElement.call(this);this._buildDom()},t.prototype._addSpacingElements=function(){},t.prototype._createFocusElement=function(){return $(w("div","grid-focus")).attr("tabIndex",0).attr("role","grid")},t.prototype._buildDom=function(){var t=document.createDocumentFragment(),n,i;n=this._options.gutter;i=n&&(n.contextMenu||n.icon||n.checkbox);this._canvas=$(w("div","grid-canvas")).attr("tabIndex",0).attr("role","grid");this._focus=this._canvas;this._contentSpacer=$(w("div","grid-content-spacer"));this._canvas.append(this._contentSpacer);this._addSpacingElements();this._options.header&&(this._element.addClass("has-header"),this._header=$(w("div","grid-header")),this._header.bind("contextmenu",function(n){return n.preventDefault(),n.stopPropagation(),!1}),this._headerCanvas=$(w("div","grid-header-canvas")),this._header.append(this._headerCanvas),t.appendChild(this._header[0]));i&&(this._element.addClass("has-gutter"),this._gutter=$(w("div","grid-gutter")),this._canvas.append(this._gutter),this._header&&(this._gutterHeader=$(w("div","grid-gutter-header")),n.tooltip&&this._gutterHeader.attr("title",n.tooltip),this._header.append(this._gutterHeader)),this._options.useLegacyStyle||n.icon||n.checkbox||this._gutter.addClass("grid-gutter-behind"));this._options.useLegacyStyle&&this._element.addClass("grid-legacy");t.appendChild(this._canvas[0]);this._canvasDroppable=$(w("div","grid-canvas grid-canvas-droppable"));t.appendChild(this._canvasDroppable[0]);this._element.append(t)},t.prototype._shouldAttachContextMenuEvents=function(){return!this._options.useLegacyStyle&&!!this._options.contextMenu&&this._options.gutter.contextMenu!==!1||this._gutter&&this._options.gutter&&this._options.gutter.contextMenu},t.prototype._attachEvents=function(){var n=this,i=this,t;y.attachResize(this._element,a.throttledDelegate(this,10,this._onContainerResize));this._bind("mousedown",b(this,this._onContainerMouseDown));this._bind(this._canvas,"keydown",b(this,this._onKeyDown));this._bind(this._canvas,"keyup",b(this,this._onKeyUp));this._bind(this._canvas,"keypress",b(this,this._onKeyPress));this._bind(this._canvas,"focus",b(this,this._onFocus));this._bind(this._canvas,"blur",b(this,this._onBlur));this._shouldAttachContextMenuEvents()&&this._bind("contextmenu",function(t){if(n._contextMenuKeyPressedState===1||$(t.target).closest(".grid-row,.grid-gutter-row").length>0)return n._onContextMenu.call(n,t)});this._bind(this._canvas,"click",b(this,this._onRowClick));this._bind(this._canvas,"dblclick",b(this,this._onRowDoubleClick));this._bind(this._canvas,"mousedown",b(this,this._onRowMouseDown));this._bind(this._canvas,"mouseup",b(this,this._onRowMouseUp));t=a.throttledDelegate(this,10,this._onCanvasScroll);this._bind(this._canvas,"scroll",t);this._bind(this._canvas,"touchmove",t);this._bind(this._canvas,"selectstart",b(this,this._onSelectStart));this._header&&(this._bind(this._header,"mousedown",b(this,this._onHeaderMouseDown)),this._bind(this._header,"mouseup",b(this,this._onHeaderMouseUp)),this._bind(this._header,"click",b(this,this._onHeaderClick)),this._bind(this._header,"dblclick",b(this,this._onHeaderDblClick)));this._gutter&&(this._bind(this._gutter,"click",b(this,this._onGutterClick)),this._gutter.hover(function(n){$(n.target).closest(".grid-gutter-row").addClass("grid-gutter-row-hover")},function(n){$(n.target).closest(".grid-gutter-row").removeClass("grid-gutter-row-hover")}));this._setupDragDrop();this._element.parents(".ui-tabs").bind("tabsactivate",function(){i._element.is(":visible")&&i.layout()});u.logTracePoint("Grid._attachEvents.complete")},t.prototype._getDraggedRowsInfo=function(n){var u=$(n.target),t,i,r=null;return t=u.closest(".grid-row"),t.length&&(i=t.data("grid-row-info"),r={dataIndex:+i.dataIndex,rowIndex:+i.rowIndex}),r},t.prototype._setupDragDrop=function(){this.setupDragDrop(this._options.draggable,this._options.droppable)},t.prototype.setupDragDrop=function(n,i){var r=this,e,u,f=function(n){n.draggable||(n.draggable=r._canvas);n.draggingRowInfo=u},o;n&&(e={axis:"y",helperClass:"grid-row-dragging",zIndex:1e3,appendTo:this._canvas,handle:".grid-row",opacity:.7,scope:this.getTypeName(),cursorAt:{top:this._rowHeight/2}},typeof n!="object"&&(n={}),this._draggable=$.extend({},e,n),n=$.extend(e,n,{helper:function(n){if(u=r._getDraggedRowsInfo(n),u){r._cleanupDragDropState();var t=r._getDraggable(r._canvas);return f(t),r._rowDragCreateHelper(u,n,t)}return u=null,$("<div />")},drag:function(n,t){return f(t),r._invokeDragHandler(n,t,r._draggable.drag)},start:function(n,i){return u?(f(i),r._canvas.data(t.DATA_DRAGGING_ROWINFO,u),r._draggingRowInfo=u,r._invokeDragHandler(n,i,r._draggable.start)):!1},stop:function(n,i){f(i);var u=r._invokeDragHandler(n,i,r._draggable.stop);return r._draggingRowInfo=null,r._canvas.data(t.DATA_DRAGGING_ROWINFO,null),u}}),this._canvas.draggable(n));i&&(o={tolerance:"intersect",hoverClass:"grid-row-drop-active",scope:this.getTypeName()},i.accept&&($.isFunction(i.accept)||(i.acceptSelector=i.accept)),this._droppable=$.extend({},o,i),i=$.extend({},this._droppable,{accept:function(n){return r._ddDropStarted||r._droppableAcceptHandler(n,u),!0},activate:function(n,t){f(t);r._droppableActivateHandler(n,t)},deactivate:function(n,t){f(t);r._droppableDeactivateHandler(n,t)},over:function(n,t){f(t);r._droppableOverHandler(n,t)},out:function(n,t){f(t);r._droppableOutHandler(n,t)},drop:function(n,t){r._ddDropStarted=!0;f(t);r._droppableDropHandler(n,t)}}),this._canvasDroppable.droppable(i));(n||i)&&this._cleanupDragDropState()},t.prototype.disableDragDrop=function(){var n={drag:function(){return!1},start:function(){return!1}};this._canvas.draggable(n)},t.prototype.enableDragDrop=function(){this._setupDragDrop()},t.prototype._droppableAcceptHandler=function(n,i){var u=this,f=this._droppable.accept,r;f&&(n.data(t.DATA_DRAGGING_ROWINFO,i),$.each(this._rows,function(t,i){r={dataIndex:Number(t),rowIndex:i.rowIndex};u._rowDropAccept(r,n)}))},t.prototype._droppableDropHandler=function(n,t){var l=this,s,i,r,f,e,o,h,c;u.logTracePoint("Grid._drop.start");s=this._droppable.drop;s&&this._draggableOverGrid&&(r=this._getDraggable(t.draggable),$.each(this._rows,function(n,t){var u={dataIndex:Number(n),rowIndex:t.rowIndex};if(l._rowIntersect(r,u))return i=u,!1}),!i&&this._rowOffsetHeight&&(f=this._rowOffsetHeight>0?this.getLastRowDataIndex():0,e=this._rows[f],e&&(i={dataIndex:+f,rowIndex:+e.rowIndex,isAboveFirstOrBelowLast:!0},o=e.row,h=o.offset(),f!==0&&(h.top+=this._rowOffsetHeight),c=this._calculateIntersectPosition(r),$.ui.intersect(r,{offset:h,proportions:function(){return{width:o[0].offsetWidth,height:o[0].offsetHeight-Math.abs(l._rowOffsetHeight)}}},this._droppable.tolerance,{pageY:c.pageY,pageX:c.pageX})||(i=null))),i&&this._getAcceptStatus(i.dataIndex)&&(t.droppingRowInfo=i,s.call(this,n,t)))},t.prototype._droppableActivateHandler=function(n,t){var i=this,r=t.draggingRowInfo?Number(t.draggingRowInfo.dataIndex):-1;$.each(this._rows,function(u,f){u!==r&&i._rowDropTryActivate({dataIndex:Number(u),rowIndex:f.rowIndex},n,t)})},t.prototype._droppableDeactivateHandler=function(n,t){var i=this,r=t.draggingRowInfo?t.draggingRowInfo.dataIndex:-1;$.each(this._rows,function(u,f){u!==r&&i._rowDropDeactivate({dataIndex:Number(u),rowIndex:f.rowIndex},n,t)});this._cleanupDragDropState()},t.prototype._droppableOverHandler=function(n,t){var i=this;this._draggableOverGrid=!0;this._bind(window.document,"mousemove",function(n){i._draggableOverGrid&&i._droppableOverMoveHandler(n,t)});this._droppableOverMoveHandler(n,t)},t.prototype._droppableOutHandler=function(n,t){this._unregisterDragMouseMove();this._droppableOverMoveHandler(n,t)},t.prototype._droppableOverMoveHandler=function(n,t){var u=this,i=this._getDragOverRows(),s=this._getDraggable(t.draggable),l=t.draggingRowInfo?Number(t.draggingRowInfo.dataIndex):-1,r,f,e,o,h,c;$.each(this._rows,function(r,f){var e;r!==l&&(e={dataIndex:+r,rowIndex:+f.rowIndex},u._getAcceptStatus(r)&&(u._draggableOverGrid&&u._rowIntersect(s,e)?i[r]||(i[r]=!0,u._rowDropOver(e,n,t)):i[r]&&(delete i[r],delete u._isAboveFirstOrBelowLastRow,u._rowDropOut(e,n,t))))});this._rowOffsetHeight&&(r=this._rowOffsetHeight>0?this.getLastRowDataIndex():0,e=this._rows[r],e&&(f={dataIndex:+r,rowIndex:+e.rowIndex},o=e.row,h=o.offset(),r!==0&&(h.top+=this._rowOffsetHeight),c=this._calculateIntersectPosition(s),this._draggableOverGrid&&$.ui.intersect(s,{offset:h,proportions:function(){return{width:o[0].offsetWidth,height:o[0].offsetHeight-Math.abs(u._rowOffsetHeight)}}},this._droppable.tolerance,{pageY:c.pageY,pageX:c.pageX})?($.extend(f,{isAboveFirstOrBelowLast:!0}),i[r]||(i[r]=!0,this._isAboveFirstOrBelowLastRow=!0,this._rowDropOver(f,n,t))):i[r]&&this._isAboveFirstOrBelowLastRow&&(delete i[r],delete this._isAboveFirstOrBelowLastRow,this._rowDropOut(f,n,t))))},t.prototype._getDraggable=function(n){return n.data("ui-draggable")},t.prototype._cleanupDragDropState=function(){this._resetRowAcceptStatus();this._resetRowOverStatus();this._unregisterDragMouseMove();this._ddDropStarted=!1},t.prototype._unregisterDragMouseMove=function(){this._draggableOverGrid=!1;this._unbind(window.document,"mousemove")},t.prototype._resetRowOverStatus=function(){this._ddRowOverStatus={}},t.prototype._rowDropAccept=function(n,i){var u=this._rows[n.dataIndex],r;return u?(r=this._ddRowAcceptStatus[n.dataIndex],typeof r=="undefined"&&($.isFunction(this._droppable.accept)?(i.data(t.DATA_DROPPING_ROWINFO,n),r=this._droppable.accept.call(this,i)):this._droppable.acceptSelector&&(r=u.row.is(this._droppable.acceptSelector)),this._ddRowAcceptStatus[n.dataIndex]=r),r):!1},t.prototype._rowDropActivate=function(n,t,i){var r=this._rows[n.dataIndex],u=this._droppable.activate;if(r&&(this._droppable.activeClass&&r.row.addClass(this._droppable.activeClass),u))return u.call(this,t,$.extend({},i,{droppingRowInfo:r}))},t.prototype._rowDropDeactivate=function(n,t,i){var f=this._getAcceptStatus(n.dataIndex),r,u;if(f&&(r=this._rows[n.dataIndex],u=this._droppable.deactivate,r&&(this._droppable.activeClass&&r.row.removeClass(this._droppable.activeClass),this._droppable.hoverClass&&r.row.removeClass(this._droppable.hoverClass),u)))return u.call(this,t,$.extend({},i,{droppingRowInfo:r}))},t.prototype._rowDropOver=function(n,t,i){var r=this._rows[n.dataIndex],u=this._droppable,f=this._droppable.over,e=this._getDraggable(i.draggable);r&&(e.dropped=!0,u.hoverClass&&r.row.addClass(u.hoverClass),this._rowOffsetHeight&&(r.isAboveFirstOrBelowLast=n.isAboveFirstOrBelowLast),f&&f.call(this,t,$.extend({},i,{droppingRowInfo:r})))},t.prototype._rowDropOut=function(n,t,i){var r=this._rows[n.dataIndex],u=this._droppable,f=this._droppable.out,e=this._getDraggable(i.draggable);r&&(e.dropped=!1,u.hoverClass&&r.row.removeClass(u.hoverClass),f&&f.call(this,t,$.extend({},i,{droppingRowInfo:r})))},t.prototype._rowDrop=function(n,t,i,r){var f=this._rows[n.dataIndex],u=this._droppable;f&&(u.hoverClass&&f.row.removeClass(u.hoverClass),u.activeClass&&f.row.removeClass(u.activeClass),u.drop&&u.drop.call(this,i,$.extend({},r,{droppingRowInfo:f})))},t.prototype._rowDragCreateHelper=function(n,t,i){var r;return $.isFunction(this._draggable.helper)?this._draggable.helper.call(this,t,$.extend({},i,{draggingRowInfo:n})):(r=this._rows[n.dataIndex].row.clone(),r.removeClass("grid-row-selected grid-row-selected-blur grid-row-current"),r.addClass(this._draggable.helperClass),r.css("position","absolute"),r)},t.prototype._invokeDragHandler=function(n,t,i){if(i)return i.call(this,n,t)},t.prototype._takeMeasurements=function(){var t,r,u,o,i,n,f,e,s;this._options.sharedMeasurements&&(n=rt);n||(n={},f=this._options.coreCssClass,e=this._getEnhancementOption("cssClass"),e&&(f+=" "+e),t=$(w("div",f)).appendTo(document.body).css("position","absolute").css("left",-5e3).css("top",-5e3).width(1e3).height(500),s="grid-row grid-row-normal"+(this._options.useLegacyStyle?" grid-row-legacy":""),r=$(w("div",s)).appendTo(t),u=$(w("div","grid-cell")).width(100).appendTo(r).text("1"),n.rowHeight=r.outerHeight(),n.cellOffset=u.outerWidth()-100,o=$(w("div")).appendTo(u).css("overflow","hidden").css("width","1em").css("height","1ex"),n.unitEx=o.outerHeight(),i=$(w("div","grid-gutter")),i.append(w("div","grid-gutter-row grid-gutter-row-selected")),i.appendTo(t),n.gutterWidth=i[0].clientWidth,t.remove(),this._options.sharedMeasurements&&(rt=n));this._unitEx=n.unitEx;this._rowHeight=n.rowHeight;this._cellOffset=n.cellOffset;this._gutterWidth=this._gutter?n.gutterWidth:0},t.prototype._ensureSelectedIndex=function(n){var t=this._selectedIndex;typeof n=="number"&&(this._selectedIndex=n);this._selectedIndex>=0&&(this._count<=this._selectedIndex&&(this._selectedIndex=this._count-1),this._selectedIndex!==t&&this._addSelection(this._selectedIndex))},t.prototype._determineIndentIndex=function(){for(var t=this._columns,n=0,i=t.length;n<i;n++)if(t[n].indent){this._indentIndex=n;return}this._indentIndex=0},t.prototype._updateRanges=function(){var n=0,i=0,r=this._count,t=[],u=0,f;if(this._expandStates){while(n<r)f=this._expandStates[n],f<0?(t[t.length]=[i,n],u+=n-i+1,n+=1-f,i=n):n++;i<r&&(t[t.length]=[i,r-1],u+=r-i)}else u=r,t[t.length]=[0,u];this._expandedCount=u;this._visibleRange=t},t.prototype._updateExpansionStates=function(n,t){var e=!1,l,f;if(this._expandStates){for(var h=this._expandStates,i,o,a=this._rows,r=0,s=[],c=function(n,t){h[t]=-n;e=!0;var i=a[t];i&&(i.dirty=!0)},u=0,v=this._count;u<v;){for(i=h[u],r<t?(i<0&&n===!0||i>0&&n===!1)&&c(i,u):r===t&&(i>0&&n===!0||i<0&&n===!1)&&c(i,u),l=r,f=0;f<l;f++)s[f]-=1,s[f]===0&&(r-=1);o=Math.abs(i);o>0&&(s[r]=o,r+=1);u++}e&&this._updateRanges()}return e},t.prototype._updateExpansionStateAndRedraw=function(n,t){var r,i=this._selectedIndex;i>=0&&(r=this._getDataIndex(i));this._updateExpansionStates(n,t);i>=0&&(this._clearSelection(),this._addSelection(Math.abs(this._getRowIndex(r))));this._layoutContentSpacer();this._redraw()},t.prototype._updateViewport=function(n){var e,r,u,o,l,y=this._count,t,i,s,a,h=[],c=[],f=[],p=this._expandStates||[],v=this._expandedCount-1;for(e=this._getVisibleRowIndices(),r=e.first,u=e.last,r=Math.max(0,r-this._options.extendViewportBy),u=Math.min(v,u+this._options.extendViewportBy),o=Math.max(0,r-this._options.payloadSize),l=Math.min(v,u+this._options.payloadSize),i=this._getDataIndex(o),a=r,t=o;t<=l&&i<y;t++)t<r?h[h.length]=[t,i]:t>u?c[c.length]=[t,i]:(f[f.length]=[t,i],a=t),s=p[i],s<0?i+=1-s:i++;this.cacheRows(h,f,c);this._drawRows(f,n)},t.prototype._setContextMenuColumn=function(){var i=this,n,t;this._options.contextMenu&&(this._automaticContextMenuColumn&&(this._options.contextMenu.columnIndex=undefined,n=this._columns.filter(function(n){return!n.hidden}),n.forEach(function(n){i._options.contextMenu.columnIndex===undefined&&n.width>120&&(i._options.contextMenu.columnIndex=n.index)}),typeof this._options.contextMenu.columnIndex=="undefined"&&n.length>0&&(this._options.contextMenu.columnIndex=n[n.length-1].index)),t=this._columns.filter(function(n){return i._options.contextMenu.columnIndex===n.index}),t.length===1&&(t[0].width=Math.max(32,t[0].width)))},t.prototype._cleanUpRows=function(){var n=this._rows,t,i,r=this._gutter;for(i in n)n.hasOwnProperty(i)&&(t=n[i],t.row.remove(),r&&t.gutterRow.remove());this._rows={}},t.prototype._getGutterIconClass=function(){return""},t.prototype._drawGutterCell=function(){},t.prototype._drawHeader=function(){var i,l,n,a=this._columns,h,t,u,r,f,k,v=this._sortOrder,c,e,p,o,b,s;if(this._header){for(c=document.createDocumentFragment(),i=0,l=a.length;i<l;i++)if(n=a[i],!n.hidden){for(t=w("div","grid-header-column"),b=n.tooltip||n.text,h=$(t).attr("title",b),t.style.width=(n.width||20)+"px",t._data={columnIndex:i,header:!0},u=w("div","separator"),n.fixed&&(u.style.cursor="auto"),k=$(u),u._data={columnIndex:i,separator:!0},t.appendChild(u),f=n.getHeaderCellContents.apply(this,[n])||$(w("div")),n.headerCss&&f.addClass(n.headerCss),r=w("div","sort-handle"),e=0,p=v.length;e<p;e++)if(o=v[e],o.index===n.index){o.order==="asc"?(h.addClass("ascending"),this._options.useLegacyStyle?($(r).removeClass("bowtie-icon bowtie-triangle-down"),$(r).addClass("bowtie-icon bowtie-triangle-up")):(s=w("i","bowtie-icon right bowtie-sort-ascending"),f[0].appendChild(s))):o.order==="desc"&&(h.addClass("descending"),this._options.useLegacyStyle?($(r).removeClass("bowtie-icon bowtie-triangle-up"),$(r).addClass("bowtie-icon bowtie-triangle-down")):(s=w("i","bowtie-icon right bowtie-sort-descending"),f[0].appendChild(s)));break}t.appendChild(f[0]);t.appendChild(r);c.appendChild(t)}this._headerCanvas.empty();this._columnMovingElement=null;this._headerCanvas[0].appendChild(c);y.makeElementUnselectable(this._header[0])}},t.prototype._fixColumnsWidth=function(n){return n+2},t.prototype._layoutContentSpacer=function(){for(var n=0,t,f=this._columns,r,u,i=0,e=f.length;i<e;i++)f[i].hidden||(n+=(f[i].width||20)+this._cellOffset);n=this._fixColumnsWidth(n);t=Math.max(1,this._expandedCount*this._rowHeight);this._contentSpacer.width(n);this._contentSpacer.height(t);this._gutter&&this._gutter.height(t);this._measureCanvasSize();this._ignoreScroll=!0;try{r=Math.max(0,Math.min(this._scrollTop,t-this._canvasHeight));r!==this._scrollTop&&(this._scrollTop=r,this._canvas[0].scrollTop=r);u=Math.max(0,Math.min(this._scrollLeft,n-this._canvasWidth));u!==this._scrollLeft&&(this._scrollLeft=u,this._canvas[0].scrollLeft=u)}finally{this._ignoreScroll=!1}this._contentSize.width=n;this._contentSize.height=t},t.prototype._fixScrollPos=function(){var n=this._ignoreScroll;this._ignoreScroll=!0;try{this._canvas[0].scrollLeft=this._scrollLeft;this._canvas[0].scrollTop=this._scrollTop}finally{this._ignoreScroll=n}},t.prototype._redraw=function(n){this._layoutHeader();this._updateViewport(n)},t.prototype.selectAll=function(){if(this._count>0&&this._options.allowMultiSelect!==!1){this._addSelection(0);this._clearSelection();this._selectionStart=0;var n=Math.max(0,this._selectedIndex);this._addSelectionRange(this._expandedCount-1,undefined,{doNotFireEvent:!0});this._selectedIndex=n;this._updateSelectionStyles();this._selectionChanged()}},t.prototype._clearSelection=function(){this._selectionCount=0;this._selectedRows=null},t.prototype._addSelection=function(n,t,i){var r,u=i&&i.keepSelectionStart,f=i&&i.doNotFireEvent,e=i&&i.toggle;this._options.allowMultiSelect===!1&&(u=!1,this._clearSelection());this._selectedRows||(this._selectedRows={});n>=0?(r=!0,n+""in this._selectedRows?e&&(r=!1,this._selectionCount=Math.max(0,this._selectionCount-1),delete this._selectedRows[n]):this._selectionCount++,typeof t!="number"&&(t=this._getDataIndex(n)),r&&(this._selectedRows[n]=t),this._selectedIndex=n,this._updateAriaAttribute(),(this._selectionStart<0||!u)&&(this._selectionStart=n)):(t=-1,this._selectedIndex=-1);f||(this._updateSelectionStyles(),this._selectionChanged(),this._selectedIndexChanged(this._selectedIndex,t))},t.prototype._addSelectionRange=function(n,t,i){var u,o,r,f,h=i&&i.doNotFireEvent,s=-1,e;if(this._options.allowMultiSelect===!1)this._addSelection(n,t);else{for(this._selectedRows&&(s=this._selectedRows[this._selectedIndex]),this._selectionStart<0&&(this._selectionStart=n),u=Math.min(this._selectionStart,n),o=Math.max(this._selectionStart,n),(typeof t!="number"||u!==n)&&(t=this._getDataIndex(u)),r=u;r<=o;r++)this._addSelection(r,t,{keepSelectionStart:!0,doNotFireEvent:!0}),r===n&&(e=t),f=this._getExpandState(t),f<0?t+=1-f:t++;this._selectedIndex=n;this._updateAriaAttribute();h||(this._updateSelectionStyles(),this._selectionChanged(),s!==e&&this._selectedIndexChanged(this._selectedIndex,e))}},t.prototype._updateAriaAttribute=function(){var i,n,t;this._active&&(i=this._getDataIndex(this._selectedIndex),i>=0&&(n=this.getRowInfo(i),n&&n.row&&(t=n.row.attr("id"),t!==this._activeAriaId&&(this._canvas.attr("aria-activedescendant",t),this._activeAriaId=t))))},t.prototype._updateSelectionStyles=function(){this.delayExecute("updateSelectionStyles",10,!0,function(){var n,r=this._selectedRows,u=this._selectedIndex,t=this._rows,i;for(n in t)t.hasOwnProperty(n)&&(i=t[n],this._updateRowSelectionStyle(i,r,u))})},t.prototype._selectionChanged=function(){this.selectionChanged(this._selectedIndex,this._selectionCount,this._selectedRows);this._fire("selectionchanged",{selectedIndex:this._selectedIndex,selectedCount:this._selectionCount,selectedRows:this._selectedRows})},t.prototype._selectedIndexChanged=function(n,i){this.selectedIndexChanged(n,i);this._fire(t.EVENT_SELECTED_INDEX_CHANGED,[n,i])},t.prototype._showContextMenu=function(n){var u=this,o,i=n?n.rowInfo:null,s,r,h,t,f;(this._showingContextMenu=!0,t=$.extend({},this._options.contextMenu),t)&&i&&(o=this._dataSource[i.dataIndex],f=n.contextMenu?"context-menu-active context-menu-clicked":"context-menu-active",t=$.extend({onActivate:function(){i.row.addClass(f)},onDeactivate:function(){i.row.removeClass(f)},onPopupEscaped:function(){i.row.removeClass(f)}},t,{contextInfo:{rowInfo:i,item:o},onHide:function(){Date.now()-u._lastFocusTime>e.BLUR_CLOSE_TIMEOUT+10&&(u._showingContextMenu=!1,u._fire(u._canvas,"blur"))}.bind(this)}),o.root||(t.items=t.items?$.isFunction(t.items)?t.items.call(this,t.contextInfo):t.items.slice(0):[],this._popupMenu&&(this._popupMenu.dispose(),this._popupMenu=null),r=this.getPinAndFocusElementForContextMenu(n),r.isRightClick&&(t=$.extend(t,{align:"left-bottom"})),this._popupMenu=this._createContextMenu(i,t),this._popupMenu&&r&&(s=r.pinElement,h=r.focusElement[0],a.delay(this,10,function(){this._popupMenu.popup(h,s)}))))},t.prototype.getPinAndFocusElementForContextMenu=function(n){var i=n.contextMenu,r=!1,t;return this._contextMenuKeyPressedState===1||i||this._options.useLegacyStyle||(t=n.event,t&&t.pageX&&t.pageY&&t.target&&($(t.target).closest(".grid-row").length>0||$(t.target).closest(".grid-gutter-row").length>0)&&(this._$popupMenuPinTarget||(this._$popupMenuPinTarget=$(w("div","grid-context-menu-popup-pin")).appendTo(document.body)),this._$popupMenuPinTarget.css({top:t.pageY,left:t.pageX}),i=this._$popupMenuPinTarget,r=!0)),{pinElement:i||n.rowInfo.gutterRow||n.rowInfo.row||this._canvas,focusElement:this._canvas,isRightClick:r}},t.prototype._onContainerMouseDown=function(){this.focus(10)},t.prototype._measureCanvasSize=function(){this._previousCanvasHeight=this._canvasHeight;this._previousCanvasWidth=this._canvasWidth;this._canvasHeight=this._canvas[0].clientHeight;this._canvasWidth=this._canvas[0].clientWidth},t.prototype._setupDragEvents=function(){this._bind(window.document,"mousemove",b(this,this._onDocumentMouseMove),!0);this._bind(window.document,"mouseup",b(this,this._onDocumentMouseUp),!0)},t.prototype._clearDragEvents=function(){this._unbind(window.document,"mousemove",null,!0);this._unbind(window.document,"mouseup",null,!0)},t.prototype._onDocumentMouseMove=function(n){var r,u,f,t=this._columnSizing,i=this._columnMoving;t&&t.active===!0&&(r=n.pageX-t.origin,f=Math.max(this._cellMinWidth,t.originalWidth+r),u=this._columns[t.index],u.width=f,this._applyColumnSizing(t.index),this._moveSizingElement(t.index));i&&i.state>0&&(r=n.pageX-i.origin,r!==0&&(i.state=2,this._moveColumnMovingElement(i.index,i.left+r)))},t.prototype._onDocumentMouseUp=function(){return a.delay(this,0,function(){this._tryFinishColumnSizing(!1);this._tryFinishColumnMoving(!1);this._clearDragEvents()}),!1},t.prototype._onHeaderMouseDown=function(n){var i,t,u,f,e,r;if(n.which===1)if(e=$(n.target).closest(".separator"),e.length>0){if(i=e[0]._data.columnIndex,t=this._columns[i],!t.fixed)return this._columnSizing={active:!0,index:i,originalWidth:t.width,origin:n.pageX},this._moveSizingElement(i),this._setupDragEvents(),!1}else if(r=$(n.target).closest(".grid-header-column"),r.length>0&&(i=r[0]._data.columnIndex,t=this._columns[i],this._options.allowMoveColumns&&!t.fixed&&t.canMove)){for(r.addClass("moving"),this._columnMoving={state:1,index:i,width:t.width,origin:n.pageX,colHeaderElement:r},u=0,f=0;f<i;)t=this._columns[f++],t.hidden||(u+=t.width);return this._columnMoving.left=u,this._setupDragEvents(),!1}},t.prototype._onHeaderMouseUp=function(){return},t.prototype._onHeaderClick=function(n){var r,t,i,u;if(i=$(n.target).closest(".grid-header-column"),i.length>0&&!this._columnSizing){if(u=$(n.target).closest(".separator"),u.length>0)return!1;r=i[0]._data.columnIndex;t=this._columns[r];t.canSortBy&&!t.fixed&&this._sortBy(t,n.shiftKey)}},t.prototype._onHeaderDblClick=function(n){var i,r,t,u,f,e;return i=$(n.target).closest(".separator"),i.length>0?(this._tryFinishColumnSizing(!0),this._tryFinishColumnMoving(!0),r=i[0]._data.columnIndex,t=this._columns[r],t.fixed||(u=Math.max(t.maxLength||0,3),f=1.1+.7*Math.exp(-u/20),e=t.width,t.width=(t.indentOffset||0)+Math.round(u*f*this._unitEx),this._applyColumnSizing(r,e,!0)),!1):void 0},t.prototype._moveSizingElement=function(n){var r=this._canvas,e=r[0],t=this._sizingElement,i,u=0,f=this._gutterWidth;if(!t){if(n<0)return;t=$(w("div","grid-column-sizing")).appendTo(r);this._sizingElement=t}if(t.height(e.clientHeight-1),t.css("top",this._scrollTop),n<0)t.css("left",-5e3).css("top",-5e3).height(0);else{while(u<=n)i=this._columns[u++],i.hidden||(f+=i.width);t.css("left",f-1)}},t.prototype._getVisibleColumnIndex=function(n){var t=0,i=0,r=this._columns.length;if(this._columns[n].hidden)return-1;while(t<n)this._columns[t].hidden||i++,t++;return i},t.prototype._applyColumnSizing=function(n,t,i){var f=this._getVisibleColumnIndex(n)+1,r=this._columns[n],u=!1;t=t||-1;r&&(u=r.width!==t,$(".grid-header-column:nth-child("+f+")",this._headerCanvas).width(r.width));i===!0&&(u&&this.layout(),this._onColumnResize(r))},t.prototype._tryFinishColumnSizing=function(n){var t=this._columnSizing;t&&(t.active===!0&&(n||this._applyColumnSizing(t.index,t.originalWidth,!0),this._moveSizingElement(-1)),this._columnSizing=null)},t.prototype._moveColumnMovingElement=function(n,t){var h=this._headerCanvas,c=this._canvas,r=this._columnMovingElement,u=this._columnMovingPinElement,i,l=this._columns.length,o=this._gutterWidth,f=0,e=0,s;if(!r){if(n<0)return;r=$(w("div","grid-column-moving")).appendTo(h);this._columnMovingElement=r;u=$(w("div","grid-column-moving-placer")).appendTo(c).height(4).css("left",-500).css("top",-500);this._columnMovingPinElement=u}if(n<0)r.css("left",-5e5),u.css("left",-500).css("top",-500);else{for(i=this._columns[n],r.width(i.width).css("left",t).css("top",0).text(i.text),s=t+(i.width>>1);f<l;){if(i=this._columns[f],!i.hidden){if(s-o>i.width/2)e=f+1;else break;o+=i.width}f++}e<n||e>n+1?(this._columnInsert=e,u.css("left",o-4).css("top",this._scrollTop)):(this._columnInsert=-1,u.css("left",-500).css("top",-500))}},t.prototype._applyColumnMoving=function(n,t){var u,r,i=this._columns;t>=0&&(t>n&&t--,u=i[n],r=i[t],this._options.allowMoveColumns&&!r.fixed&&r.canMove&&(i.splice(n,1),i.splice(t,0,u),this._determineIndentIndex(),this.layout(),this._onColumnMove(n,t)))},t.prototype._tryFinishColumnMoving=function(n){var t=this._columnMoving;t&&(t.state>1&&(this._moveColumnMovingElement(-1),n||this._applyColumnMoving(t.index,this._columnInsert)),this._columnMoving.colHeaderElement&&this._columnMoving.colHeaderElement.removeClass("moving"),this._columnMoving=null)},t.prototype._getSortColumns=function(n){for(var u=this._columns,f,o,s=[],i,h,r,t=0,e=n.length;t<e;t++){for(o=n[t],i=0,h=u.length;i<h;i++)if(r=u[i],r.index===o.index){f=r;break}s.push(f)}return s},t.prototype._onSort=function(n,t){this.onSort(n,t)!==!1&&this._fire("sort",[{sortOrder:n,sortColumns:t}])},t.prototype._onSelectStart=function(){return this._options.allowTextSelection?!0:!1},t.prototype._onCanvasScroll=function(){var n=this._canvas[0];return this._resetScroll=!0,this._scrollLeft=n.scrollLeft,this._scrollTop=n.scrollTop,this._ignoreScroll||this._redraw(),u.logTracePoint("TFS.UI.Controls.Grids._onCanvasScroll.complete"),!1},t.prototype._handleEvent=function(n,t,i,r){var f,e=this._selectedIndex,u;return f=this._getDataIndex(e),u={rowIndex:e,dataIndex:f,rowInfo:this._rows[f],event:n},r&&$.extend(u,r),t&&t.call(this,u)===!1?!1:this._fire(i,u)},t.prototype._onRowClick=function(n){var t=this._getRowInfoFromEvent(n,".grid-row");if(t)return this._handleEvent(n,this.onRowClick,"rowclicked",{row:t.row,rowInfo:t,rowIndex:t.rowIndex,dataIndex:t.dataIndex})},t.prototype._onRowDoubleClick=function(n){var t=this._getRowInfoFromEvent(n,".grid-row");if(t&&!$(n.target).hasClass("grid-tree-icon"))return this._handleEvent(n,this.onRowDoubleClick,"rowdblclick",{row:t.row,rowInfo:t,rowIndex:t.rowIndex,dataIndex:t.dataIndex})!==!1?this._onOpenRowDetail(n,{rowIndex:t.rowIndex,dataIndex:t.dataIndex}):!1},t.prototype._onGutterClick=function(n){var t=this._getRowInfoFromEvent(n,".grid-gutter-row"),i;if(t)return this._options.gutter.checkbox?(i=$(n.target),i.hasClass("checkbox")&&this._addSelection(t.rowIndex,t.dataIndex,{toggle:!0})):this._selectedRows&&typeof this._selectedRows[t.rowIndex]=="number"||this._selectRow(t.rowIndex,t.dataIndex),this._handleEvent(n,this.onGutterClick,"gutterclick",{gutterRow:t.gutterRow,rowInfo:t,rowIndex:t.rowIndex,dataIndex:t.dataIndex})},t.prototype._onEnterKey=function(n){return this._handleEvent(n,this.onEnterKey,"enterkey")!==!1?this._onOpenRowDetail(n):!1},t.prototype._onDeleteKey=function(n){return this._handleEvent(n,this.onDeleteKey,"deletekey")},t.prototype._onContextMenu=function(n,t){return this._contextMenuKeyPressedState===0?(this._contextMenuKeyPressedState=1,n.preventDefault()):(this._contextMenuKeyPressedState===1&&(this._contextMenuKeyPressedState=2),this._handleEvent(n,this.onContextMenu,"contextMenu",t)),!1},t.prototype._onToggle=function(n){var t,i;this._expandStates&&(t=this._expandStates[n.dataIndex],t!==0&&(t>0?(i=!1,this.collapseNode(n.dataIndex)):t<0&&(i=!0,this.expandNode(n.dataIndex)),this._isAncestorFolderToggled(n)?this.ancestorFolderToggled(n):this.nonAncestorFolderToggled(n,this._selectedRows?this._selectedRows[this._selectedIndex]:undefined),this._layoutContentSpacer(),this._redraw(),this._raiseToggleEvent(n,i)));this.afterOnToggle(n)},t.prototype._isAncestorFolderToggled=function(n){var u={},i,r,t;if(this._indentLevels&&this._selectedIndex&&this._selectedRows&&this._selectionCount===1)for(i=this._selectedRows[this._selectedIndex],r=this._indentLevels[i]-1,t=i-1;t>=0;t--)this._indentLevels[t]===r&&(u[t]=!0,r--);return u[n.dataIndex]===!0},t.prototype.ancestorFolderToggled=function(n){this._folderToggled(n)},t.prototype.nonAncestorFolderToggled=function(n){this._folderToggled(n)},t.prototype.afterOnToggle=function(){},t.prototype._folderToggled=function(n){this._clearSelection();this._addSelection(Math.min(n.rowIndex,this._expandedCount-1),n.dataIndex)},t.prototype._raiseToggleEvent=function(n,i){this._options.enabledEvents&&t.EVENT_ROW_TOGGLED in this._options.enabledEvents&&this._element.triggerHandler(t.EVENT_ROW_TOGGLED,[n,i])},t.prototype.copySelectedItems=function(n,t,i){var r=this,f;u.logTracePoint("TFS.UI.Controls.Grids.copySelectedItems.start");this._copyInProgress=!0;f=new c.LongRunningOperation(this.getElement(),{cancellable:!0,message:o.CopyProgressPleaseWait});f.beginOperation(function(e){r._cancelable=e;r.beginFormatTable(function(n){f.endOperation();r._copyInProgress=!1;u.logTracePoint("TFS.UI.Controls.Grids.copySelectedItems.complete");r._cancelable&&r._cancelable.canceled||l.copyToClipboard(n,{copyAsHtml:t})},null,n,i)})},t.prototype._ensureRowDrawn=function(){return!0},t.prototype._beginEnsureSelectionIsAvailable=function(n){n()},t.prototype._dispose=function(){n.prototype._dispose.call(this);y.detachResize(this._element)},t.enhancementTypeName="tfs.grid",t.MAX_COPY_SIZE=1e3,t.PAYLOAD_SIZE=200,t.EVENT_ROW_UPDATED="rowupdated",t.EVENT_ROW_TOGGLED="rowtoggled",t.EVENT_SELECTED_INDEX_CHANGED="selectedIndexChanged",t.DATA_DRAGGING_ROWINFO="draggingRowInfo",t.DATA_DROPPING_ROWINFO="droppingRowInfo",t}(r.Control);t.GridO=k;d=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(k);t.Grid=d;p.initClassPrototype(k,{_dataSource:[],_expandStates:null,_indentLevels:null,_columns:[],_sortOrder:[],_visibleRange:[],_count:0,_expandedCount:0,_selectedIndex:-1,_indentIndex:0,_selectionStart:-1,_selectionCount:0,_selectedRows:null,_rowHeight:20,_cellOffset:0,_gutterWidth:30,_contentSize:null,_rows:{},_focus:null,_scroller:null,_canvas:null,_canvasHeight:300,_canvasWidth:300,_contentSpacer:null,_header:null,_headerCanvas:null,_gutter:null,_gutterHeader:null,_popupMenu:null,_columnSizing:null,_columnMoving:null,_columnMovingElement:null,_columnMovingPinElement:null,_columnInsert:null,_unitEx:null,_sizingElement:null,_resetScroll:!1,_ignoreScroll:!1,_scrollTop:0,_scrollLeft:0,_ddRowAcceptStatus:null,_ddRowOverStatus:null,_droppable:null,_draggable:null,_draggingRowInfo:null,_cancelable:null,_active:!1,_activeAriaId:null,_cellMinWidth:15,_copyInProgress:!1});r.Enhancement.registerJQueryWidget(d,"grid");tt=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.enhancementTypeName="tfs.listview",t}(d);t.ListView=tt;r.Enhancement.registerJQueryWidget(tt,"listView");$(function(){function n(){function t(){n&&(n.style.overflowX=n.clientWidth!==n.scrollWidth?"scroll":"auto")}var n;n=$(document.body).children(".main-container")[0];y.attachResize(n,t);t()}y.BrowserCheckUtils.isMsie()&&n()});ot=function(n){function t(){n.call(this)}return __extends(t,n),t.prototype.attachGrid=function(n){this._grid||(this._grid=n)},t.prototype.addMoreItems=function(n,t){n(this.createSearchableObjects());t()},t.prototype.createSearchableObjects=function(){var i,n,r,h;u.logVerbose("GridSearchAdapter.createSearchableObjects: Creating searchable objects for grid data.");var f=this._gridData=this._grid._dataSource,c=this.getSearchableColumns(),e=[],o,t;for(i in f){for(t=[],n=0,r=c;n<r.length;n++)h=r[n],t.push(this._grid.getColumnText(i,h));o=new s.SearchableObject(f[i],t);e.push(o)}return e},t.prototype.handleResults=function(n){u.logVerbose("GridSearchAdapter.handleResults: Updating grid with new results.");this._results=n;this._grid.setDataSource(n,this._grid.getExpandStates(),this._grid.getColumns(),this._grid.getSortOrder(),null,!1)},t.prototype.handleError=function(n){p.handleError({name:"",message:n})},t.prototype.handleClear=function(){u.logVerbose("GridSearchAdapter.handleClear: Restoring original dataset");this._results===this._grid._dataSource&&this._grid.setDataSource(this._gridData,this._grid.getExpandStates(),this._grid.getColumns(),this._grid.getSortOrder(),null,!1);this._results=undefined},t.prototype.isDataSetComplete=function(){var n=this._gridData===this._grid._dataSource||this._results===this._grid._dataSource;return u.logVerbose("GridSearchAdapter.isDataSetComplete: "+n),n},t.prototype.getSearchableColumns=function(){var t=this,n;return this._searchableColumns||(this._searchableColumns=[],n=this._grid.getColumns(),$.each(n,function(n,i){i.isSearchable&&t._searchableColumns.push(i)})),this._searchableColumns},t}(s.SearchAdapter);t.GridSearchAdapter=ot;it=function(){function n(n,t){this._options=t;this._grid=n}return n.prototype.getTableFromSelectedItems=function(){u.logTracePoint("TFS.UI.Controls.Data.TabDelimitedTableFormatter.getTableFromSelectedItems.start");var f=this,i=this._grid,r=i.getSelectedDataIndices(),n=new v.StringBuilder,t;return(t=i.getColumns(),r.length===0||t.length===0)?"":($.each(t,function(t,i){t>0&&n.append(v.tab);n.append(i.text)}),n.appendNewLine(),$.each(r,function(r,u){r>0&&n.appendNewLine();n.append($.map(t,function(n){return f.getFormattedColumnValue(n,i.getColumnText(u,n))}).join(v.tab))}),u.logTracePoint("TFS.UI.Controls.Data.TabDelimitedTableFormatter.getTableFromSelectedItems.complete"),n.toString())},n.prototype.getFormattedColumnValue=function(n,t){return t},n}();t.TabDelimitedTableFormatter=it;st=function(){function n(n,t){this._options=t;this._grid=n}return n.prototype.processColumns=function(n){return n},n.prototype.getTableFromSelectedItems=function(){return this._getJQTableFromSelectedItems().html()},n.prototype.getFormattedColumnValue=function(n,t){return t},n.prototype._getSelectedDataIndicesFromGrid=function(){return this._grid.getSelectedDataIndices()},n.prototype._getJQTableFromSelectedItems=function(){var h=this,i,r,t,o,e,s;if(u.logTracePoint("TFS.UI.Controls.Data.HtmlTableFormatter.getTableFromSelectedItems.start"),i=this._grid,r=this._getSelectedDataIndicesFromGrid(),t=this.processColumns(i.getColumns()),r.length===0||t.length===0)return $("<div/>");var f=$("<table/>").attr("border","0").attr("cellpadding","0").attr("cellspacing","0").attr("style",n.FONT_FAMILY+n.FONT_SIZE+n.BORDER_COLLAPSE),c=$("<thead />").attr("style",n.HEADER_BACKGROUND_COLOR+n.HEADER_COLOR).appendTo(f),l=$("<tr />").appendTo(c);return $.each(t,function(t,i){var r=$("<th />").append(i.text).attr("style",n.COLUMN_BORDER+n.COLUMN_VERTICAL_ALIGN+n.COLUMN_PADDING);l.append(r)}),o=$("<tbody />").appendTo(f),$.each(r,function(r,u){var e=n.ROW_BACKGROUND_COLOR,f;r%2!=0&&(e=n.ROW_ALT_BACKGROUND_COLOR);f=$("<tr />").css({background:e});$.each(t,function(t,r){var e=h.getFormattedColumnValue(r,i.getColumnText(u,r)),o;r.noHtmlEncode||(e=v.htmlEncode(e));e===""&&(e="&nbsp;");o=$("<td />").append(e).attr("style",n.COLUMN_BORDER+n.COLUMN_VERTICAL_ALIGN+n.COLUMN_PADDING);f.append(o)});o.append(f)}),u.logTracePoint("TFS.UI.Controls.Data.HtmlTableFormatter.getTableFromSelectedItems.complete"),e=$("<div />").append(f),this._options&&this._options.extendedText&&(s=$("<div />").attr("style",n.FONT_FAMILY+n.FONT_SIZE).append(this._options.extendedText),e.append(s)),e},n.HEADER_BACKGROUND_COLOR="background-color: #3D5277;",n.HEADER_COLOR="color: white;",n.FONT_SIZE="font-size: 11pt;",n.FONT_FAMILY="font-family: Calibri, sans-serif;",n.BORDER_COLLAPSE="border-collapse: collapse;",n.COLUMN_BORDER="border: 1px solid white;",n.COLUMN_VERTICAL_ALIGN="vertical-align: top;",n.COLUMN_PADDING="padding: 1.45pt .05in;",n.ROW_BACKGROUND_COLOR="#DEE8F2",n.ROW_ALT_BACKGROUND_COLOR="#F0F4FA",n}();t.HtmlTableFormatter=st;p.tfsModuleLoaded("VSS.UI.Controls.Grids",t)});
define("Presentation/Scripts/TFS/TFS.UI.Widgets",["require","exports","VSS/Resources/VSS.Resources.Platform","VSS/Utils/UI","jQueryUI/core","jQueryUI/widget","VSS/LoaderPlugins/Css!widget"],function(n,t,i,r){function u(n,t){return n.keyCode===t.keyCode&&n.altKey===t.altKey&&n.ctrlKey===t.ctrlKey?!0:!1}function f(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return n.Dropdown.apply(n,i)}function e(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return n.DropdownList.apply(n,i)}$.widget("TFS.Dropdown",{options:{dynamicSearch:!1,filterList:!1,id:null,initialValue:"",listSize:8,showDelete:!1,showListOnKeystroke:!0,_elements:{_autoComplete:null,_container:null,_control:null,_input:null,_search:null,_list:null,_searching:null},_autoCompleteValue:null,_previousValue:null,_valueList:[],_searchActive:!1,_searchResult:!1,_stateIcon:null,_addStackDepth:0},_create:function(){this.options._control_id=Math.random();this.element.append('<div class="dropdown-input-control"><div class="dropdown-input-main"><div class="dropdown-input-inputarea"><input autocomplete="off" class="dropdown-input-text dropdown-input-autocomplete" readonly tabIndex="-1" type="text" /><div class="dropdown-input-blank"><\/div><input autocomplete="off" class="dropdown-input-text dropdown-input-name" spellcheck="false" type="text" /><\/div><div class="dropdown-input-search" tabindex="0"><\/div><\/div><div class="dropdown-popup"><div class="dropdown-input-list-container boxshadow"><ul class="dropdown-input-list"><\/ul><div class="dropdown-input-list-searching status-text"><\/div><div class="dropdown-input-list-no-results status-text"><\/div><\/div><\/div><\/div>');this.options._elements._control=this.element.find(".dropdown-input-main");this.options._elements._autoComplete=this.element.find(".dropdown-input-autocomplete");this.options._elements._input=this.element.find(".dropdown-input-name");this.options._elements._search=this.element.find(".dropdown-input-search");this.options._elements._container=this.element.find(".dropdown-input-list-container");this.options._elements._list=this.element.find(".dropdown-input-list");this.options._elements._searching=this.element.find(".dropdown-input-list-searching").text(i.Searching);this.options._elements._noResults=this.element.find(".dropdown-input-list-no-results").text(i.NoSearchResults);this.options.id&&(this.options._elements._input.attr("id",this.options.id),this.options._elements._input.attr("name",this.options.id));this.options.initialValue&&this.setValue(this.options.initialValue);this.options.watermarkText&&r.Watermark(this.options._elements._input,{watermarkText:this.options.watermarkText});this._updateControlState();this.options._elements._search.bind("click",this,function(n){n.data._handleClick()});this.options._elements._search.bind("keydown",this,function(n){(n.keyCode===$.ui.keyCode.SPACE||n.keyCode===$.ui.keyCode.ENTER)&&n.data._handleClick()});this.options._elements._input.bind("keydown",this,function(n){n.data._handleKeyDown(n)});this.options._elements._input.bind("keydown",this,function(n){n.data._alignValue()});this.options._elements._input.bind("keyup",this,function(n){n.data._handleTextChange()});this.options._elements._input.bind("focusin",this,function(n){n.data.options._elements._autoComplete.show()});this.options._elements._input.bind("focusout",this,function(n){n.data.options._elements._autoComplete.hide()});this.options._elements._input.bind("mousedown",this,function(n){$(document).bind("mousemove.Dropdown",n.data,function(n){n.data._alignValue()});$(document).bind("mouseup",n.data,function(n){n.data._alignValue();$(document).unbind("mousemove.Dropdown");$(document).unbind(n)})});this.element.bind("startSearch",this,function(n,t){n.data._startSearch(n,t)});this.element.bind("completeSearch",this,function(n,t){n.data._completeSearch(n,t)});this.element.bind("cancelSearch",this,function(n,t){n.data._cancelSearch(n,t)});this.options._elements._list.bind("mousemove",this,function(n){n.data._trackMousePosition(n)});this.element.bind("removeItem",this,function(n,t){n.data._removeItem(n,t)})},add:function(n,t){if(this.options._addStackDepth++,jQuery.isArray(n))for(t=0;t<n.length;t++)this.add(n[t]);else jQuery.isFunction(n)?this.add(n()):this._addItem(n,t);this.options._addStackDepth--;this.options._addStackDepth===0&&this._updateControlState()},clear:function(){this.options._elements._list.find(".dropdown-input-listitem").remove();this.options._valueList=[];this._updateControlState()},remove:function(n){this.element.trigger("removeItem",{value:n})},hideList:function(n){this.options._elements._control.removeClass("dropdown-active");this.options._elements._container.hide();n&&(this.options._elements._input.focus(),this.options._elements._autoComplete.show());$(document).unbind("mousedown.Dropdown"+this.options._control_id);this._updateStateIcon();this.element.trigger("listHidden")},showList:function(n){this.options._elements._container.width(this.element.outerWidth()-(this.options._elements._container.outerWidth(!0)-this.options._elements._container.width())-parseInt(this.element.css("padding-left"),10)-parseInt(this.element.css("border-left-width"),10));this.options._elements._control.addClass("dropdown-active");this.options._elements._container.show();r.Positioning.position(this.options._elements._container,this.element,{elementAlign:"right-top",baseAlign:"right-bottom"});n&&(this.options._elements._input.focus(),this.options._elements._autoComplete.show());$(document).bind("mousedown.Dropdown"+this.options._control_id,this,function(n){$(n.target).parents(".dropdown-input-control").parent().get(0)!==n.data.element.get(0)&&n.data.hideList(!1)});this._updateControlState();this.element.trigger("listShown")},ensureVisible:function(n){var t=this.getListItem(n);t&&this._ensureVisible(t)},getControlState:function(){return this.options._searchActive?"searching":this.options._elements._list.is(":visible")?"active":"inactive"},getListItem:function(n){var f,e,i,r,t,u;if(isNaN(n)){for(e=n.toLowerCase(),r=0,u=this.options._valueList.length-1;r<=u;)if(t=Math.round((r+u)/2),e<this.options._valueList[t].lowerValue)i=-1,u=t-1;else if(e>this.options._valueList[t].lowerValue)i=1,r=t+1;else{i=0;break}i===0&&(f=this.options._valueList[t])}else f=this.options._valueList[n];return f},highlight:function(n){var i,t=this.getListItem(n);t&&(t.value!==this.highlightedValue()&&(i=this.options._elements._list.find(".highlighted"),i.removeClass("highlighted"),t.element.addClass("highlighted")),this._ensureVisible(t))},highlightedValue:function(){var n=this.options._elements._list.find(".dropdown-input-listitem.highlighted");return n.length>0?n.text():null},select:function(n,t){var i=this.getListItem(n),r;return i?(r={item:i.item,canceled:!1},this.element.trigger("itemSelecting",r),r.canceled?(this.hideList(t),!1):(this.setValue(i.value),this.hideList(t),this.element.trigger("itemSelected",{item:i.item}),!0)):!1},getValue:function(){return this.options._elements._input.val()},setValue:function(n){this.options._elements._input.val(n);this._handleTextChange()},cancelSearch:function(n){this.element.trigger("cancelSearch",{focusControl:n})},completeSearch:function(){this.element.trigger("completeSearch")},startSearch:function(n){this.element.trigger("startSearch",{focusControl:n})},_addItem:function(n,t){var f="",r=null,e=null,u=n.text===undefined?n:n.text,s=u.toLowerCase(),o=0,h=0,i=0,c=this.options._valueList.length-1,l=u,a={deny:null,item:n};if(this.element.trigger("filterItem",a),!a.deny){if(t===undefined||t===null){while(h<=c)if(i=Math.round((h+c)/2),s<this.options._valueList[i].lowerValue)o=-1,c=i-1;else if(s>this.options._valueList[i].lowerValue)o=1,h=i+1;else{o=0;break}o>0&&i++}else i=t,l=t;i<this.options._valueList.length&&(e=this.options._valueList[i].element);f=this.options.showDelete?'<li class="dropdown-input-listitem deletable"><div class="dropdown-input-listitem-value" /><div class="dropdown-input-listitem-delete" /><\/li>':'<li class="dropdown-input-listitem"><div class="dropdown-input-listitem-value" /><\/li>';e?(e.before(f),r=e.prev()):(this.options._elements._list.append(f),r=this.options._elements._list.children().last());r.children(".dropdown-input-listitem-value").attr("title",u).text(u);this.options._valueList.splice(i,0,{element:r,lowerValue:s,markup:f,value:u,item:n,visible:!0});r.bind("click",this,function(n){n.data.select(l,!0)});r.bind("mousemove",this,function(n){!$(this).hasClass("highlighted")&&n.data._trackMousePosition(n)&&n.data.highlight(l)});this.options.showDelete&&r.find(".dropdown-input-listitem-delete").bind("click",this,function(n){n.data.element.trigger("removeItem",{value:$(this).parents(".dropdown-input-listitem").text()});n.preventDefault();n.stopPropagation()})}},_removeItem:function(n,t){var i=this.getListItem(t.value);i&&(this.options._valueList.splice(i.element.index(),1),i.element.remove(),this.options._elements._list.find(".dropdown-input-listitem").length===0&&this.cancelSearch(),this._updateControlState(!0),this.element.trigger("itemRemoved",{value:t.value}))},_alignValue:function(){this.options._elements._autoComplete.scrollLeft(this.options._elements._input.scrollLeft())},_ensureVisible:function(n){for(var t,i,u,f,e,o=0,r=0;r<this.options._valueList.length;r++)if(e=this.options._valueList[r],e.visible){if(e.element===n.element){t=o;break}o++}t===undefined&&(t=-1);f=n.element.outerHeight(!0);i=t*f;u=i+f;i<this.options._elements._list.scrollTop()?this.options._elements._list.scrollTop(i):u-this.options._elements._list.height()>this.options._elements._list.scrollTop()&&this.options._elements._list.scrollTop(u-this.options._elements._list.height())},_trackMousePosition:function(n){return this.options._lastMouseX!==n.pageX||this.options._lastMouseY!==n.pageY?(this.options._lastMouseX=n.pageX,this.options._lastMouseY=n.pageY,!0):!1},_updateControlState:function(n){var f,o,i=this.options._elements._input.val(),e,r=0,s=2048,u,t;for(this.options._autoCompleteValue=null,f=i.toLowerCase(),u=0;u<this.options._valueList.length;u++)t=this.options._valueList[u],(e=t.lowerValue.indexOf(f))===-1?(t.element.hasClass("highlighted")&&t.element.removeClass("highlighted"),this.options.filterList?(t.element.hide(),t.visible=!1):r++):(e<s&&i.length>0&&(n||(this.options._autoCompleteValue=t.value),s=e),this.options.filterList&&(t.element.show(),t.visible=!0),r++);this.options._autoCompleteValue&&this.options._autoCompleteValue.toLowerCase().indexOf(f)===0?(o=i+this.options._autoCompleteValue.substring(i.length),this.options._elements._autoComplete.val(o)):this.options._elements._autoComplete.val("");r>0?(this.options._elements._noResults.hide(),this.options._elements._list.show(),r<=this.options.listSize?(this.options._elements._list.removeClass("overflow"),this.options._elements._list.height("")):(this.options._elements._list.addClass("overflow"),this.options._elements._list.height(Math.min(r,this.options.listSize)*this.options._elements._list.find(".dropdown-input-listitem").last().outerHeight(!0)))):(this.options._elements._list.height(Math.max(20,this.options._elements._list.find(".dropdown-input-listitem").first().outerHeight(!0))),this.options._elements._searching.is(":visible")?(this.options._elements._noResults.hide(),this.options._elements._list.show()):(this.options._elements._noResults.show(),this.options._elements._list.hide()));this.options._autoCompleteValue?this.highlight(this.options._autoCompleteValue):i.length===0&&this.highlight(0);this._updateStateIcon()},_updateStateIcon:function(){this.options._stateIcon&&this.options._elements._search.removeClass(this.options._stateIcon);this.options._stateIcon=this.options._searchActive?"img_redx":this.options._searchResult?"img_grayx":this.options.dynamicSearch?"img_magnify":this.options._elements._container.is(":visible")?"img_collapse":"img_expand";this.options._elements._search.addClass(this.options._stateIcon)},_handleClick:function(){this.options._searchActive||this.options._searchResult?this.cancelSearch(!0):this.options._elements._list.is(":visible")?this.hideList(!0):this.startSearch(!0)},_handleFocusOut:function(){this.getControlState()!=="inactive"&&this.hideList(!1)},_handleKeyDown:function(n){var i=!1,t;this.options.searchHotkey&&u(this.options.searchHotkey,n)&&(this.startSearch(!0),i=!0);n.keyCode===9?((this.getControlState()==="active"||this.options._elements._autoComplete.is(":visible")&&this.options._autoCompleteValue)&&this.select(this.options._autoCompleteValue,!1),this.getControlState()!=="inactive"&&this.hideList(!1)):n.keyCode===13?this.getControlState()==="active"&&this.select(this.highlightedValue(),!0)&&(i=!0):n.keyCode===27?this.getControlState()!=="inactive"&&(this.hideList(!0),i=!0):n.keyCode===38?(t=this.getListItem(this.highlightedValue()),t&&(t=t.element.prevAll().filter(":visible").first(),t.length>0&&this.highlight(t.text())),i=!0):n.keyCode===40?(this.getControlState()==="inactive"?this.options._searchResult?this.showList(!0):this.startSearch(!0):(t=this.getListItem(this.highlightedValue()),t?(t=t.element.nextAll().filter(":visible").first(),t.length>0&&this.highlight(t.text())):this.highlight(0)),i=!0):this.options.comboOnly&&(i=!0);i&&(n.preventDefault(),n.stopPropagation())},_handleTextChange:function(){var n;n=this.options._elements._input.val();n!==this.options._previousValue&&(n.length>0&&this.options.showListOnKeystroke&&this.options._valueList.length>0&&this.getControlState()==="inactive"&&this.showList(!0),this._updateControlState(),this.element.trigger("valueUpdated",{value:n}),this.options._previousValue=n);this._alignValue()},_cancelSearch:function(n,t){this.options._searchActive=!1;this.options._searchResult=!1;this.options.dynamicSearch&&this.clear();this.hideList(t&&t.focusControl)},_completeSearch:function(n,t){this.options._searchActive=!1;this.options._elements._searching.hide();this.options.dynamicSearch&&(this.options._searchResult=!0);t&&t.focusControl&&(this.options._elements._input.focus(),this.options._elements._autoComplete.show());this._updateControlState()},_startSearch:function(n,t){this.getControlState()!=="searching"&&(this.options._searchActive=!0,this.options.dynamicSearch?(this.clear(),this.options._elements._searching.show()):this.completeSearch(),this.showList(t&&t.focusControl),this.options.dynamicSearch&&n.data.element.trigger("querySearch",{value:n.data.getValue()}))}});$.widget("TFS.DropdownList",{options:{items:[]},_create:function(){var n=$.extend({dynamicSearch:!1,filterList:!1},this.options);this.options._dropdownControl=this.element.Dropdown(n).data("TFS-Dropdown");this.options._dropdownControl.add(this.options.items)}});t.Dropdown=f;t.DropdownList=e});
define("VSS/Operations/Contracts",["require","exports"],function(n,t){"use strict";(function(n){n[n.NotSet=0]="NotSet";n[n.Queued=1]="Queued";n[n.InProgress=2]="InProgress";n[n.Cancelled=3]="Cancelled";n[n.Succeeded=4]="Succeeded";n[n.Failed=5]="Failed"})(t.OperationStatus||(t.OperationStatus={}));var i=t.OperationStatus;t.TypeInfo={Operation:{},OperationReference:{},OperationStatus:{enumValues:{notSet:0,queued:1,inProgress:2,cancelled:3,succeeded:4,failed:5}}};t.TypeInfo.Operation.fields={status:{enumType:t.TypeInfo.OperationStatus}};t.TypeInfo.OperationReference.fields={status:{enumType:t.TypeInfo.OperationStatus}}});
define("VSS/Operations/RestClient",["require","exports","VSS/Operations/Contracts","VSS/Service","VSS/WebApi/RestClient"],function(n,t,i,r,u){"use strict";function y(n){return window.VSS&&window.VSS.VssSDKRestVersion&&a[window.VSS.VssSDKRestVersion]?r.getClient(a[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):r.getClient(o,undefined,undefined,undefined,n)}var f=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.getOperation=function(n){return this._beginRequest({httpMethod:"GET",area:"operations",locationId:"9a1b74b4-2ca8-4a9f-8470-c2f2e6fdc949",resource:"operations",routeTemplate:"_apis/{resource}/{operationId}",responseType:i.TypeInfo.Operation,routeValues:{operationId:n},apiVersion:this.operationsApiVersion})},t}(u.VssHttpClient),e,o,s,h,c,l,v,a;t.CommonMethods2To3_1=f;e=function(n){function t(t,i){n.call(this,t,i);this.operationsApiVersion="3.1-preview.1"}return __extends(t,n),t}(f);t.OperationsHttpClient3_1=e;o=function(n){function t(t,i){n.call(this,t,i);this.operationsApiVersion="3.0"}return __extends(t,n),t}(f);t.OperationsHttpClient3=o;s=function(n){function t(t,i){n.call(this,t,i);this.operationsApiVersion="2.3"}return __extends(t,n),t}(f);t.OperationsHttpClient2_3=s;h=function(n){function t(t,i){n.call(this,t,i);this.operationsApiVersion="2.2"}return __extends(t,n),t}(f);t.OperationsHttpClient2_2=h;c=function(n){function t(t,i){n.call(this,t,i);this.operationsApiVersion="2.1"}return __extends(t,n),t}(f);t.OperationsHttpClient2_1=c;l=function(n){function t(t,i){n.call(this,t,i);this.operationsApiVersion="2.0"}return __extends(t,n),t}(f);t.OperationsHttpClient2=l;v=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t}(e);t.OperationsHttpClient=v;a={"3.1":e,"3.0":o,"2.3":s,"2.2":h,"2.1":c,"2.0":l};t.getClient=y});
define("VSS/Artifacts/Constants",["require","exports"],function(n,t){var i,r;(function(n){n.TcmResult="TcmResult";n.TcmResultAttachment="TcmResultAttachment";n.Build="Build";n.VersionedItem="VersionedItem";n.LatestItemVersion="LatestItemVersion";n.Changeset="Changeset";n.Shelveset="Shelveset";n.WorkItem="WorkItem";n.Storyboard="Storyboard";n.Commit="Commit";n.CodeReviewId="CodeReviewId";n.CodeReviewSdkId="ReviewId";n.PullRequestId="PullRequestId";n.ProjectDownloadProject="Project";n.Ref="Ref"})(i=t.ArtifactTypeNames||(t.ArtifactTypeNames={})),function(n){n.VersionControl="VersionControl";n.WorkItemTracking="WorkItemTracking";n.TeamBuild="Build";n.TestManagement="TestManagement";n.Requirements="Requirements";n.Hyperlink="Hyperlink";n.Legacy="Legacy";n.CodeSense="CodeSense";n.Git="Git";n.CodeReview="CodeReview";n.ProjectDownload="ProjectDownload"}(r=t.ToolNames||(t.ToolNames={}))});
define("Build.Common/Scripts/Registration.Artifacts",["require","exports","VSS/Artifacts/Constants","VSS/Artifacts/Services","VSS/VSS"],function(n,t,i,r,u){r.ClientLinking.registerArtifactResolver(i.ToolNames.TeamBuild,function(n,t,i,r){u.using(["Build.Common/Scripts/BuildArtifacts"],function(u){u.BuildArtifactResolver.beginResolve(n,t,i,r)})});u.tfsModuleLoaded("Registration.Artifacts",t)});
define("Requirements/Scripts/TFS.Requirements.Setup",["require","exports","VSS/VSS","VSS/Artifacts/Constants","VSS/Artifacts/Services"],function(n,t,i,r,u){u.ClientLinking.registerArtifactResolver(r.ToolNames.Requirements,function(n,t,r,u){i.using(["Requirements/Scripts/TFS.Requirements.Utils"],function(i){i.RequirementsArtifactHandler.beginResolve(n,t,r,u)})});i.tfsModuleLoaded("TFS.Requirements.Setup",t)});
define("TestManagement/Scripts/TFS.TestManagement.Setup",["require","exports","VSS/Artifacts/Constants","VSS/Artifacts/Services","VSS/VSS"],function(n,t,i,r,u){r.ClientLinking.registerArtifactResolver(i.ToolNames.TestManagement,function(n,t,i,r){u.using(["TestManagement/Scripts/TFS.TestManagement.TestManagementHandler"],function(u){u.TestManagementArtifactHandler.beginResolve(n,t,i,r)})});u.tfsModuleLoaded("TFS.TestManagement.Setup",t)});
define("VersionControl/Scripts/TFS.VersionControl.Registration.Artifacts",["require","exports","VSS/VSS","VSS/Artifacts/Constants","VSS/Artifacts/Services","Presentation/Scripts/TFS/TFS.ArtifactPlugins"],function(n,t,i,r,u,f){u.ClientLinking.registerArtifactResolver(r.ToolNames.VersionControl,function(n,t,r,u){i.using(["VersionControl/Scripts/TFS.VersionControl"],function(i){i.VersionControlArtifactHandler.beginResolve(n,t,r,u)})});u.ClientLinking.registerArtifactResolver(r.ToolNames.Git,function(n,t,r,u){i.using(["VersionControl/Scripts/TFS.VersionControl"],function(i){i.GitArtifactHandler.beginResolve(n,t,r,u)})});f.registerArtifactPluginAsync("git",function(n){i.using(["VersionControl/Scripts/TFS.VersionControl.RelatedArtifacts"],function(t){n(t.VCArtifactPlugin)})});i.tfsModuleLoaded("TFS.VersionControl.Registration.Artifacts",t)});
define("Presentation/Scripts/TFS/TFS.OM.Common",["require","exports","VSS/VSS","VSS/Error","VSS/Artifacts/Constants","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Array","VSS/Utils/UI","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.Service","Presentation/Scripts/TFS/TFS.WebSettingsService","Presentation/Scripts/TFS/TFS.Legacy.Ajax","VSS/Diag","VSS/Service","VSS/Events/Action","VSS/Context","VSS/Common/Contracts/Platform","VSS/Contributions/Services","VSS/FeatureAvailability/Services","q"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt){function dt(){var n=g.FeatureAvailabilityService;return n.isFeatureEnabled(h.FeatureAvailabilityFlags.WorkItemTrackingCustomizeStates)&&n.isFeatureEnabled(h.FeatureAvailabilityFlags.WebaccessProcessHierarchy)}function st(n){var t=new Error(e.format("Favorite item '{0}' already exist.",n));return t.name=ft.FavoriteItemAlreadyExist,t}function vt(n,t){var i;return i={area:"api"},t=t||n.navigation.topMostLevel,t>=c.NavigationContextLevels.Application&&(t<c.NavigationContextLevels.Team&&(i.ignoreDefaultTeam=!0,i.team=""),t<c.NavigationContextLevels.Project&&(i.project=""),t<c.NavigationContextLevels.Collection&&(i.serviceHost="")),i}var tt,ft,ht,ct,lt,it,rt,at,et,yt,ot,ut,pt,gt,wt,bt,kt;(function(n){n.FavoriteItemAlreadyExist="VSS.Service.FavoriteItemAlreadyExist"})(ft||(ft={}));t.IsCustomizeStatesEnabled=dt;ht=function(){function n(){}return n.getConnection=function(n){var t=n?n.contextData:b.getDefaultWebContext();return p.VssConnection.getConnection(t,k.ContextHostType.Application)},n.getDefaultConnection=function(){return p.VssConnection.getConnection(b.getDefaultWebContext(),k.ContextHostType.Application)},n}();t.Application=ht;ct=function(){function n(){}return n.getConnection=function(n){var t=n?n.contextData:b.getDefaultWebContext();return p.VssConnection.getConnection(t,k.ContextHostType.Deployment)},n.getDefaultConnection=function(){return p.VssConnection.getConnection(b.getDefaultWebContext(),k.ContextHostType.Deployment)},n}();t.Deployment=ct;lt=function(){function n(){}return n.getConnection=function(n){var t=n?n.contextData:b.getDefaultWebContext();return p.VssConnection.getConnection(t,k.ContextHostType.ProjectCollection)},n.getDefaultConnection=function(){return p.VssConnection.getConnection(b.getDefaultWebContext(),k.ContextHostType.ProjectCollection)},n}();t.ProjectCollection=lt;it=function(){function n(n,t){this.favStore=n;t&&(this.id=t.id,this.name=t.name,this.parentId=t.parentId,this.type=t.type,this.data=t.data)}return n.prototype.path=function(n){return s.calculateTreePath.call(this,n,"/","name","root")},n.prototype.beginRename=function(n,t,r){var u=this,f;this.parent&&this.parent.findChildItem(n,this.type,this.data)?i.handleError(st(n),r,this):(f=$.extend({},this),f.name=n,this.favStore.beginUpdateItems([f],function(){u.name=n;$(window).trigger("favorite-item-renamed",u);$.isFunction(t)&&t.call(u,u)},r))},n.prototype.beginDelete=function(n,t,i){this.favStore.beginDeleteItems([this],n,t,i)},n.prototype.onDelete=function(n,t){!t&&this.parent&&this.parent.remove(this);delete this.favStore.all[this.id];n&&$(window).trigger("favorite-item-removed",this)},n.FAVITEM_TYPE_WIT_QUERYITEM="Microsoft.TeamFoundation.WorkItemTracking.QueryItem",n.FAVITEM_TYPE_WIT_QUERYCHART="Microsoft.TeamFoundation.WorkItemTracking.QueryChart",n.FAVITEM_TYPE_VC_PATH="Microsoft.TeamFoundation.VersionControl.Path",n.FAVITEM_TYPE_BUILD_DEFINITION="Microsoft.TeamFoundation.Build.Definition",n.FAVITEM_TYPE_BUILD2_DEFINITION="Microsoft.TeamFoundation.Build2.Definition",n.FAVITEM_TYPE_TESTMANAGEMENT_CHART="Microsoft.Teamfoundation.TestManagement.Charts",n}();t.FavoriteItem=it;rt=function(n){function t(t,i){n.call(this,t,i);this.children=[]}return __extends(t,n),t.prototype.add=function(n,t){this.children.push(n);n.parent=this;t!==!0&&this.children.sort(function(n,t){return e.localeIgnoreCaseComparer(n.name,t.name)})},t.prototype.remove=function(n){o.remove(this.children,n)},t.prototype.clear=function(){this.children=[]},t.prototype.findByPath=function(n){return s.findTreeNode.call(this,n,"/",e.localeIgnoreCaseComparer,"name")},t.prototype.findByData=function(n){for(var i,t=0,r=this.children.length;t<r;t++)if(i=this.children[t],i.data===n)return i;return null},t.prototype.beginCreateNewFolder=function(n,t,i){this.beginCreateNewItem(n,null,null,t,i)},t.prototype.beginCreateNewItem=function(n,r,u,f,e,o){var s,h=this,c;(o===null||o===undefined)&&(o=!0);this.findChildItem(n,r,u)?i.handleError(st(n),e,this):(c={id:undefined,parentId:this.id,name:n,type:r,data:u},s=r?new it(this.favStore,c):new t(this.favStore,c),this.favStore.beginUpdateItems([s],function(){h.add(s);h.favStore.all[s.id]=s;o&&$(window).trigger("favorite-item-created",s);$.isFunction(f)&&f.call(h,s)},e))},t.prototype.onDelete=function(t,i){$.each(this.children,function(n,t){t.onDelete(!1,!0)});n.prototype.onDelete.call(this,t,i)},t.prototype.findChildItem=function(n,t,i){for(var r,u=0,f=this.children.length;u<f;u++)if(r=this.children[u],e.localeIgnoreCaseComparer(n,r.name)===0&&r.type===t&&r.data===i)return r;return null},t}(it);t.FavoriteFolder=rt;at={};et=function(n){function t(t,i,r,u,f,e){n.call(this,null,{id:f,name:e});this.root=!0;this.favStore=this;this._tfsContext=t;this._routeData=i;this._identity=r;this._scope=u;this.all={}}return __extends(t,n),t.computeStoreKey=function(n,t,i,r){return n.getActionUrl("list","favorites",$.extend({},r,{identityId:t,scope:i}))},t.createFavoriteStore=function(n,i,r,u,f){var e,o;return r===null&&(r=undefined),e=vt(n,i),o=t.computeStoreKey(n,r,u,e),new t(n,e,r,u,o,f)},t.beginGetFavoriteStore=function(n,r,u,f,e,o,s,h){var c,l;o?(c=t.createFavoriteStore(n,r,u,f,e),c.beginRefresh(function(){s(c)},h)):(l=t.computeStoreKey(n,u,f,vt(n,r)),i.queueRequest(this,at,l,s,h,function(i,o){var s=t.createFavoriteStore(n,r,u,f,e);s.beginRefresh(function(){i(s)},o)}))},t.getFavoriteStore=function(n,i,r,u,f){return t.createFavoriteStore(n,i,r,u,f)},t.prototype.beginRefresh=function(n,t){var i,r=this;i=this._tfsContext.getActionUrl("list","favorites",this._routeData);v.getMSJSON(i,{identityId:this._identity,scope:this._scope},function(t){r._populateItems(t);$.isFunction(n)&&n.call(r)},t)},t.prototype.beginDeleteItems=function(n,t,i,r){var e=this,u,f;(r===null||r===undefined)&&(r=!0);n&&n.length&&(f=this._tfsContext.getActionUrl("delete","favorites",this._routeData),u=$.map(n,function(n){return n.id}),v.postMSJSON(f,{identityId:this._identity,scope:this._scope,favItemIds:u},function(){$.each(n,function(n,t){t.onDelete(r)});$.isFunction(t)&&t.call(e,n)},i))},t.prototype.beginUpdateItems=function(n,t,i){var r=this,u,e;n&&n.length&&(e=this._tfsContext.getActionUrl("update","favorites",this._routeData),u=$.map(n,function(n){return f.stringifyMSJSON({id:n.id,parentId:n.parentId===r.id?undefined:n.parentId,name:n.name,type:n.type,data:n.data})}),v.postMSJSON(e,{identityId:this._identity,scope:this._scope,favItemJsons:u},function(i){$.each(i,function(t,i){n[i.index].id=i.id});$.isFunction(t)&&t.call(r,n)},i))},t.prototype._populateItems=function(n){var t={},r,i,u,f=this;this.clear();n&&(n.sort(function(n,t){return e.localeIgnoreCaseComparer(n.name,t.name)}),$.each(n,function(n,i){var r;r=i.type?new it(f,i):new rt(f,i);t[r.id]=r}));for(r in t)t.hasOwnProperty(r)&&(i=t[r],u=t[i.parentId],u?u.add(i,!0):this.add(i,!0));this.all=t},t.FAVORITE_STORE_SCOPE_FAVORITE_QUERIES="WorkItemTracking.Queries",t.FAVORITE_STORE_SCOPE_FAVORITE_BUILD_DEFINITIONS="Build.Definitions",t.FAVORITE_STORE_SCOPE_FAVORITE_PATHS="VersionControl.Paths",t}(rt);t.FavoriteStore=et;yt=function(){function n(n){this.store=n.store;this.error=n.error}return n.beginGetPreferenceStore=function(t,i,r,u,f){et.beginGetFavoriteStore(t,i,null,n.PREFERENCES_STORE_SCOPE,r,!1,function(t){u(new n({store:t}))},function(t){f(new n({error:t}))})},n.prototype.getValue=function(n){var t;return this.store&&(t=this.store.findByPath(n)),t?t.data:null},n.prototype.setValue=function(t,i,r,u){var f;this.store&&(f=this.store.findByPath(t),f?(f.data=i,this.store.beginUpdateItems([f],r,u)):this.store.beginCreateNewItem(t,n.PREFERENCES_ITEM_TYPE,i,r,u))},n.PREFERENCES_STORE_SCOPE="Preferences",n.PREFERENCES_ITEM_TYPE="Microsoft.TeamFoundation.Preference",n}();t.Preferences=yt;ot=function(){function n(n){this.setColorsData(n)}return n.getDefault=function(){if(!tt){var t=f.parseJsonIsland($(document),".workitemtype-colors",!0);tt=new n(t)}return tt},n.beginGetColorsProvider=function(){if(tt||(tt=new n(null)),!tt.isWorkItemColorsDefined()){var t=nt.defer(),i=c.TfsContext.getDefault(),r=i.getActionUrl("WorkItemColorData","wit",{area:"api",team:""});return v.getMSJSON(r,{},function(n){tt.setColorsData(n);t.resolve(tt)},function(){t.resolve(tt)}),t.promise}return nt.resolve(tt)},n.prototype.setColorsData=function(n){var t=this;this._witPrimaryColorsMap={};this._witColorsDefined=!1;n&&n.length>0&&($.each(n,function(n,i){if(i.PrimaryColor!==null){var r=i.PrimaryColor.length===8?i.PrimaryColor.substring(2):i.PrimaryColor;t._witPrimaryColorsMap[i.WorkItemTypeName.toLowerCase()]="#"+r}}),this._witColorsDefined=!0)},n.prototype.isWorkItemColorsDefined=function(){return this._witColorsDefined},n.prototype.getWorkItemTypeColor=function(t){var i=n.DEFAULT_PRIMARY_WORKITEM_COLOR;return t&&this.isWorkItemColorsDefined()&&(i=this._witPrimaryColorsMap[t.toLowerCase()]||i),i},n.DEFAULT_PRIMARY_WORKITEM_COLOR="#009CCC",n.TRANSPARENT_COLOR="transparent",n}();t.ColorsProvider=ot;ut=function(){function n(){var n,i,t;this._projectNameToColorSettingsMap={};this._projectIdToColorSettingsMap={};this._settingsBeingFetched={};n=c.TfsContext.getDefault().contextData.project;n&&n.name&&(i=p.getService(d.WebPageDataService),t=i.getPageData("ms.vss-work-web.work-item-states-color-data-provider"),!!t&&Array.isArray(t)&&this._setWorkItemStateColorsData({projectName:n.name,projectId:n.id,workItemTypeStateColors:t}))}return n.getDefault=function(){return n._workItemStatesColorProvider||(n._workItemStatesColorProvider=new n),n._workItemStatesColorProvider},n.prototype.isPopulated=function(n){return(n=this._getNormalizedString(n),this._projectIdToColorSettingsMap.hasOwnProperty(n)||this._projectNameToColorSettingsMap.hasOwnProperty(n))?!0:!1},n.prototype.getWorkItemStateColor=function(t,i,r){var f,u;return r?(t=this._getNormalizedString(t),i=this._getNormalizedString(i),r=this._getNormalizedString(r),f=this._projectIdToColorSettingsMap[t]||this._projectNameToColorSettingsMap[t],!!f&&(u=f[i],!!u&&!!u[r]))?"#"+u[r]:n.DEFAULT_STATE_COLOR:n.DEFAULT_STATE_COLOR},n.prototype.beginGetWorkItemStateColor=function(n){var t=this;if(n=this._getNormalizedString(n),this.isPopulated(n))return nt(null);if(this._settingsBeingFetched.hasOwnProperty(n))return this._settingsBeingFetched[n];var i=nt.defer(),u=c.TfsContext.getDefault(),f=u.getActionUrl("WorkItemStatesColorData","wit",{area:"api",project:n});return this._settingsBeingFetched[n]=i.promise,v.getMSJSON(f,{},function(r){t._setWorkItemStateColorsData(r);i.resolve(null);delete t._settingsBeingFetched[n]},function(u){r.publishErrorToTelemetry({name:"WorkItemStatesColorDataFetchException",message:e.format("Failed to fetch state color data for a project. : {0}",JSON.stringify(u))});var f={workItemTypeStateColors:[],projectId:n,projectName:n};t._setWorkItemStateColorsData(f);i.resolve(null);delete t._settingsBeingFetched[n]}),i.promise},n.prototype._setWorkItemStateColorsData=function(n){var t,o,u,i,f,r,e;if(!this.isPopulated(n.projectName)){for(t={},o=this._getNormalizedString(n.projectName),n.projectId&&(u=this._getNormalizedString(n.projectId)),i=0,f=n.workItemTypeStateColors;i<f.length;i++){var s=f[i],h={},l=this._getNormalizedString(s.workItemTypeName);for(r=0,e=s.stateColors;r<e.length;r++){var c=e[r],a=this._getNormalizedString(c.name),v=this._getNormalizedString(c.color);h[a]=v}t[l]=h}this._projectNameToColorSettingsMap[o]=t;u&&(this._projectIdToColorSettingsMap[u]=t)}},n.prototype._getNormalizedString=function(n){return n.trim().toLowerCase()},n.DEFAULT_STATE_COLOR="transparent",n}();t.WorkItemStatesColorProvider=ut;pt=function(){function n(){}return n.getWorkItemStateColorCell=function(t,i,r){var u=t,f,o;return t&&e.ignoreCaseComparer(t,"#ffffff")!==0||(t=ot.TRANSPARENT_COLOR,u=n.STATES_DEFAULT_COLOR),f=$("<span/>").addClass(n.CSS_WORKITEM_STATE_CIRCLE).css({"background-color":t,"border-color":u}),o=$("<span/>").addClass("workitem-state-value").text(i),$("<div/>").addClass("workitem-state-color-cell").append(f.add(o)).attr("title",r||i)},n.getAutoUpdatingWorkItemStateColorCell=function(t,i,r){var u,e,f;return!t||!i||!r?null:(u=ut.getDefault(),u.isPopulated(t)?(e=u.getWorkItemStateColor(t,i,r),n.getWorkItemStateColorCell(e,r)):(f=n.getWorkItemStateColorCell(ut.DEFAULT_STATE_COLOR,r),u.beginGetWorkItemStateColor(t).then(function(){var e=u.getWorkItemStateColor(t,i,r);f.find("."+n.CSS_WORKITEM_STATE_CIRCLE).css({"background-color":e,"border-color":e})}),f))},n.CSS_WORKITEM_STATE_CIRCLE="workitem-state-circle",n.STATES_DEFAULT_COLOR="#5688E0",n}();t.WorkItemStateCellRenderer=pt,function(n){function t(n,t,i){var r=c.TfsContext.getDefault();n=r.currentTeam.identity.id+n;p.getCollectionService(a.WebSettingsService).beginWriteSetting("/"+n,t,a.WebSettingsScope.User,i)}function i(n,i,r){t(n,i,r)}function r(n,i,r){t(n,i,r)}function u(n,i,r){t(n,i,r)}n.saveTeamUserStringSetting=i;n.saveTeamUserNumberSetting=r;n.saveTeamUserBoolSetting=u}(gt=t.ContextUtils||(t.ContextUtils={}));wt=function(){function n(){}return n._combineUri=function(t,i){return n._ensureUriReadyForAppend(t)+i},n._ensureUriReadyForAppend=function(n){return n.lastIndexOf("/")===n.length-1?n:n+"/"},n.browserRequiresParamEncoding=function(){return s.BrowserCheckUtils.isMsie()&&parseInt(s.BrowserCheckUtils.getVersion(),10)<10},n.beginBuildUri=function(t,i,r,u,f,e){u;var h=n.ALM_SCHEME+t+"/"+i,o,s,l=n.browserRequiresParamEncoding();u=u||[];r&&(o=c.TfsContext.getDefault(),u.splice(0,0,{name:n.COLLECTION_PARAM_NAME,value:o.navigation.collection.uri}));s=n.buildQueryParameterString(u);l?v.getMSJSON(o.getActionUrl("Base64EncodeValue","common",{area:"api"}),{value:n.buildQueryParameterString(u,l)},function(t){f.call(this,h+s+"&"+n.ENCODED_PARAM_NAME+"="+t)},e):f.call(this,h+s)},n.beginBuildCreateStoryboardUri=function(t,i,r){n.beginBuildUri(u.ToolNames.Requirements,"CreateStoryboard",!0,[{name:n.WORK_ITEM_ID_PARAM_NAME,value:t.join(",")}],i,r)},n.buildFeedbackClientUri=function(t){var i,u=[],r=c.TfsContext.getDefault();return i=r.navigation.publicAccessPoint.scheme==="https"?n.MFBCLIENTS_SCHEME:n.MFBCLIENT_SCHEME,i+=r.navigation.publicAccessPoint.authority+r.navigation.collection.vDir,i+=n.PROJECT_PARAM_NAME+":"+r.navigation.project,u.push({name:n.FEEDBACK_REQUEST_IDS_PARAM_NAME,value:t.join(",")}),i+n.buildQueryParameterString(u)},n.buildQueryParameterString=function(n,t){var i="",r;return $.each(n,function(u){r=n[u];i+=u===0?"?":"&";i+=encodeURIComponent(r.name)+"=";i+=t||r.doNotEncode?r.value:encodeURIComponent(r.value)}),i},n.ALM_SCHEME="tfs://",n.COLLECTION_PARAM_NAME="cn",n.PROJECT_PARAM_NAME="p",n.WORK_ITEM_ID_PARAM_NAME="wid",n.MFBCLIENT_SCHEME="mfbclient://",n.MFBCLIENTS_SCHEME="mfbclients://",n.FEEDBACK_REQUEST_IDS_PARAM_NAME="rid",n.ENCODED_PARAM_NAME="__params",n}();t.AlmUriBuilder=wt;bt=function(){function n(){}return n.launchUri=function(n){var t=s.BrowserCheckUtils.isMsie()&&parseInt(s.BrowserCheckUtils.getVersion(),10)>=10;t||window.navigate?w.getService().performAction(w.CommonActions.ACTION_WINDOW_NAVIGATE,{url:n}):w.getService().performAction(w.CommonActions.ACTION_WINDOW_OPEN,{url:n,target:"_blank"})},n}();t.AlmUriManager=bt;kt=function(n){function t(){n.call(this)}return __extends(t,n),t.prototype.beginGetIntegrations=function(n,t,i){var r=this;this._getAllIntegrations(function(i){var u=[];$.each(i,function(t,i){i.end_point===n&&u.push(i)});t.call(r,u)},i)},t.prototype._getApiLocation=function(n){return this.getTfsContext().getActionUrl(n,"Extensions",{area:"api",team:"",project:""})},t.prototype._replaceUrlTokens=function(n){var r=null,i;return n?(i=this.getTfsContext(),r=i.configuration,n=n.replace(t.TFS_ROOT_PATH_TOKEN,r.getRootPath()),n=n.replace(t.TFS_RESOURCES_PATH_TOKEN,r.getResourcesPath()),i.navigation.applicationServiceHost&&(n=n.replace(t.TFS_ACCOUNT_NAME_TOKEN,i.navigation.applicationServiceHost.name)),n):n},t.prototype._getAllIntegrations=function(n,t){var r=this;i.queueRequest(this,this,"_integrations",n,t,function(n,t){v.getMSJSON(r._getApiLocation("Integrations"),{fallThrough:!0},function(t){t=t||[];$.each(t,function(n,t){t.url!=="undefined"&&(t.url=r._replaceUrlTokens(t.url));t.properties={};t._properties&&$.each(t._properties,function(n,i){i&&i.name&&(t.properties[i.name]=i.value)})});n(t)},t)})},t.TFS_ROOT_PATH_TOKEN="{TfsRootPath}",t.TFS_RESOURCES_PATH_TOKEN="{TfsResourcesPath}",t.TFS_ACCOUNT_NAME_TOKEN="{AccountName}",t}(l.TfsService);t.ExtensionManagementService=kt;i.tfsModuleLoaded("TFS.OM.Common",t)});
define("VSS/Identities/Picker/RestClient",["require","exports","VSS/WebApi/Constants","VSS/WebApi/RestClient"],function(n,t,i,r){var u=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.beginGetIdentities=function(){throw{source:"AbstractIdentityPickerHttpClient",message:"A concrete httpclient should extend AbstractIdentityPickerHttpClient and implement beginGetIdentities"};},t.prototype.beginGetIdentityImageLocation=function(){throw{source:"AbstractIdentityPickerHttpClient",message:"A concrete httpclient should extend AbstractIdentityPickerHttpClient and implement beginGetImageLocation"};},t.prototype.beginGetConnections=function(){throw{source:"AbstractIdentityPickerHttpClient",message:"A concrete httpclient should extend AbstractIdentityPickerHttpClient and implement beginGetConnections"};},t.prototype.beginGetIdentityFeatureMru=function(){throw{source:"AbstractIdentityPickerHttpClient",message:"A concrete httpclient should extend AbstractIdentityPickerHttpClient and implement beginGetMru"};},t.prototype.beginPatchIdentityFeatureMru=function(){throw{source:"AbstractIdentityPickerHttpClient",message:"A concrete httpclient should extend AbstractIdentityPickerHttpClient and implement beginPatchMru"};},t}(r.VssHttpClient),f;t.AbstractIdentityPickerHttpClient=u;f=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.beginGetIdentities=function(n){return this._beginRequest({area:i.CommonIdentityPickerResourceIds.ServiceArea,locationId:i.CommonIdentityPickerResourceIds.IdentitiesLocationId,httpMethod:"POST",data:n})},t.prototype.beginGetIdentityImageLocation=function(n){var r=this,u={objectId:n};return t._identityImageLocation||(t._identityImageLocation=this._beginGetLocation(i.CommonIdentityPickerResourceIds.ServiceArea,i.CommonIdentityPickerResourceIds.IdentityAvatarLocationId)),t._identityImageLocation.then(function(n){return r.getRequestUrl(n.routeTemplate,n.area,n.resourceName,u,{})})},t.prototype.beginGetConnections=function(n,t){return this._beginRequest({area:i.CommonIdentityPickerResourceIds.ServiceArea,locationId:i.CommonIdentityPickerResourceIds.IdentityConnectionsLocationId,httpMethod:"GET",routeValues:{objectId:n},data:t})},t.prototype.beginGetIdentityFeatureMru=function(n,t,r){return this._beginRequest({area:i.CommonIdentityPickerResourceIds.ServiceArea,locationId:i.CommonIdentityPickerResourceIds.IdentityFeatureMruLocationId,httpMethod:"GET",routeValues:{objectId:n,featureId:t},data:r})},t.prototype.beginPatchIdentityFeatureMru=function(n,t,r){return this._beginRequest({area:i.CommonIdentityPickerResourceIds.ServiceArea,locationId:i.CommonIdentityPickerResourceIds.IdentityFeatureMruLocationId,httpMethod:"PATCH",routeValues:{objectId:n,featureId:t},data:r})},t._identityImageLocation=null,t}(u);t.CommonIdentityPickerHttpClient=f});
define("VSS/Identities/Picker/Constants",["require","exports"],function(n,t){var u=function(){function n(){}return n.Area="IdentityPicker",n.Scenario_GetMru_Rtt="IdentityPicker_MruService_GetMru_Rtt",n.Scenario_AddMru_Rtt="IdentityPicker_MruService_AddMru_Rtt",n.Scenario_RemoveMru_Rtt="IdentityPicker_MruService_RemoveMru_Rtt",n.Scenario_GetDirectory_Rtt="IdentityPicker_IdentityService_GetDirectory_Rtt",n.Scenario_GetConnections_Rtt="IdentityPicker_IdentityService_GetConnections_Rtt",n.Scenario_PagingQuerySplit="IdentityPicker_PagingQuerySplit",n.Feature_DropdownControl="DropdownControl",n.Feature_SearchControl="SearchControl",n.Feature_IdCardDialogControl="IdCardDialogControl",n.Feature_DisplayControl="DisplayControl",n.Feature_TwoLayerCache="TwoLayerCache",n.Feature_RequestCache="RequestCache",n.Feature_Select_Mru_NoPrefix="Select_Mru_NoPrefix",n.Feature_Select_Mru_Prefix="Select_Mru_Prefix",n.Feature_Select_Mru_Dir="Select_Mru_Dir",n.Feature_Select_Dir="Select_Dir",n.Feature_Click_IdCard="Click_IdCard",n.Feature_Click_Remove_Mru="Click_Remove_Mru",n.Feature_ApiExceptions="Api_Exceptions",n}(),i,r;t.Telemetry=u;i=function(){function n(){}return n.prefix="p_prefix",n.userId="p_userId",n.accountProjectCollectionTeam="p_accountProjectCollectionTeam",n.identityTypes="p_identityTypes",n.operationScopes="p_operationScopes",n.maxResults="p_maxResults",n.minResults="p_minResults",n.consumerId="p_consumerId",n.extensionId="p_extensionId",n.entityId="p_entityId",n.exceptionData="p_exceptionData",n.isMru="p_isMru",n.isNonMaterialized="p_isNonMaterialized",n.isTwoLayerCacheHit="p_isTwoLayerCacheHit",n.isDirSearchUid="p_isDirSearchUid",n}();t.TelemetryProperties=i;r=function(){function n(){}return n.UnknownConsumer="UNKNOWN",n}();t.ConsumerId=r});
define("VSS/Identities/Picker/Cache",["require","exports","VSS/Utils/Core","VSS/Utils/String","VSS/Identities/Picker/Constants","VSS/Telemetry/Services"],function(n,t,i,r,u,f){var s=function(){function n(){}return n.guessQueryTokenType=function(t){return r.isGuid(t)&&!r.isEmptyGuid(t)?e.Guid:n._isValidEmail(t)?e.Email:n._isPotentialEntityId(t)?e.UniqueIdentifier:e.Unknown},n._isPotentialEntityId=function(n){var t=n.split(".");return t.length==6&&r.isGuid(t[5])&&!r.isEmptyGuid(t[5])?!0:!1},n._isValidEmail=function(n){var t=n.split("@");return t.length===2&&t[0].length>=1&&t[1].length>=1?!0:!1},n}(),e,o,h,c,l;(function(n){n[n.Unknown=0]="Unknown";n[n.UniqueIdentifier=1]="UniqueIdentifier";n[n.Guid=2]="Guid";n[n.Email=3]="Email"})(t.CacheableTypes||(t.CacheableTypes={}));e=t.CacheableTypes;o=function(){function n(){this._cache={};this._config={expirationIntervalS:86400}}return n.prototype.get=function(n){if(!n)throw{message:"invalid (null/undefined) key",parameter:"key",source:"HashCache add"};if(!this._cache.hasOwnProperty(n)||!this._cache[n])return null;var t=this._cache[n];return(new Date).getTime()/1e3>t.expiryTimeS?(delete this._cache[n],null):this._cache[n].item},n.prototype.set=function(n,t){if(!n)throw{message:"invalid (null/undefined) key",parameter:"key",source:"HashCache add"};var i={item:t,expiryTimeS:(new Date).getTime()/1e3+this._config.expirationIntervalS};this._cache[n]=i},n.prototype.clear=function(){var n=this._getKeys(),t;if(n&&n.length!=0)for(t in n)delete this._cache[t]},n.prototype.configure=function(n){this._config=n},n.prototype._getKeys=function(){return Object.keys(this._cache)},n}();t.HashCache=o;h=function(){function n(){this._config={delayIntervalMS:n._defaultDelayIntervalMS};this._cache=new o;this._cache.configure({expirationIntervalS:this._config.delayIntervalMS/1e3})}return n.prototype.getPromise=function(n){this._setOrResetTimer();var t=this._cache.get(n);return t?t:null},n.prototype.setPromise=function(n,t){this._setOrResetTimer();this._cache.set(n,t)},n.prototype.configure=function(n){this._config=n;this._cache.configure({expirationIntervalS:this._config.delayIntervalMS/1e3})},n.prototype._setOrResetTimer=function(){var n=this;this._timeoutHandle&&(clearTimeout(this._timeoutHandle),this._timeoutHandle=null);this._timeoutHandle=setTimeout(i.delegate(this,function(){n._cache.clear()}),this._config.delayIntervalMS)},n._defaultDelayIntervalMS=6e4,n}();t.RequestCache=h;c=function(){function n(n){this._redirectors={};this.configure(n);this._objectCache=new o}return n.prototype.configure=function(n){if(!n||!n.getUniqueIdentifier)throw{source:"TwoLayerCache configure",message:"missing config or missing the required getUniqueIdentifier property",parameter:"config"};this._config=n},n.prototype.addRedirector=function(n){if(n===null||n===undefined)throw{source:"TwoLayerCache addRedirector",message:"invalid null/undefined cacheType",parameter:"cacheType"};if(this._redirectors.hasOwnProperty(n.toString()))throw{source:"TwoLayerCache addRedirector",message:"redirector with supplied cacheType already exists: currently at most one redirector supported for a CacheType",parameter:"cacheType"};this._redirectors[n.toString()]=new o},n.prototype.get=function(n,t){return this._queryCache(n,t)},n.prototype.set=function(n,t,i){var u,r,f;if(u=i?i:s.guessQueryTokenType(n).toString(),r=this._config.getUniqueIdentifier(t),!r)throw{source:"TwoLayerCache set",message:"could not retrieve a valid unique identifier from the value"};if(u==e.UniqueIdentifier.toString()||r==n||this._redirectors.hasOwnProperty(u.toString())){if(u==e.UniqueIdentifier.toString()||r==n){this._objectCache.set(n,t);return}f=this._redirectors[u];f.set(n,r);this._objectCache.set(r,t);return}},n.prototype._queryCache=function(n,t){var i,r;return i=t?t:s.guessQueryTokenType(n).toString(),i==e.UniqueIdentifier.toString()?this._objectCache.get(n):this._redirectors.hasOwnProperty(i.toString())?(r=this._redirectors[i].get(n),!r)?null:this._objectCache.get(r):this._objectCache.get(n)},n}();t.TwoLayerCache=c;l=function(){function n(){}return n.traceCacheHit=function(n,t){var r=n!=null,i={};i[u.TelemetryProperties.isTwoLayerCacheHit]=r;f.publishEvent(new f.TelemetryEventData(u.Telemetry.Area,t,i))},n}()});
define("VSS/Identities/Picker/Services",["require","exports","VSS/FeatureAvailability/Services","VSS/Locations","VSS/Performance","VSS/Service","VSS/Telemetry/Services","VSS/Utils/Core","VSS/Identities/Picker/RestClient","VSS/Identities/Picker/Cache","VSS/Identities/Picker/Constants","q"],function(n,t,i,r,u,f,e,o,s,h,c,l){var v=o.delegate,a=function(){function n(){}return n.getOperationScopeList=function(n){var t=[];return n.IMS&&t.push("ims"),n.Source&&t.push("source"),n.AAD&&t.push("aad"),n.AD&&t.push("ad"),n.WMD&&t.push("wmd"),t},n.getQueryTypeHint=function(n){var t=void 0;return n?(n.UID&&(t="uid"),t):t},n.getIdentityTypeList=function(t){var i=[];return t.User&&i.push(n.UserEntity),t.Group&&i.push(n.GroupEntity),i},n.getConnectionTypeList=function(n){var t=[];return n.successors?t.push("successors"):n.successors&&t.push("predecessors"),t},n.getDefaultIdentityImage=function(t){return t.entityType.toLowerCase().trim()==n.GroupEntity?t.originDirectory.toLowerCase().trim()==n.VisualStudioDirectory?n.DefaultVsoGroupImage:n.DefaultRemoteGroupImage:n.DefaultUserImage},n.getDistinct=function(n){return n.filter(function(n,t,i){return i.indexOf(n)==t})},n.addScenarioProperties=function(t,i,r,u,f,e){return u&&(i[c.TelemetryProperties.identityTypes]=n.getIdentityTypeList(u)),r&&(i[c.TelemetryProperties.operationScopes]=n.getOperationScopeList(r)),f&&(i[c.TelemetryProperties.maxResults]=f.maxResults,i[c.TelemetryProperties.minResults]=f.minResults),i[c.TelemetryProperties.consumerId]=e?e.consumerId:c.ConsumerId.UnknownConsumer,i[c.TelemetryProperties.userId]=t&&t.getWebContext()&&t.getWebContext().user?t.getWebContext().user.id:"",i[c.TelemetryProperties.accountProjectCollectionTeam]=n._getHostMetadata(t),i},n._getHostMetadata=function(n){var t="",i="",r="",u="";return n&&n.getWebContext()&&(t=n.getWebContext().account?n.getWebContext().account.name:"",i=n.getWebContext().collection?n.getWebContext().collection.name:"",r=n.getWebContext().project?n.getWebContext().project.name:"",u=n.getWebContext().team?n.getWebContext().team.name:""),"account["+t+"]/collection["+i+"]/project["+r+"]/team["+u+"]"},n._defaultProperties=["DisplayName","IsMru","ScopeName","SamAccountName","Active"],n._defaultUserProperties=["Department","JobTitle","Mail","MailNickname","PhysicalDeliveryOfficeName","SignInAddress","Surname","Guest"],n._defaultGroupProperties=["Description"],n.DefaultUserImage=r.urlHelper.getVersionedContentUrl("ip-content-user-default.png"),n.DefaultVsoGroupImage=r.urlHelper.getVersionedContentUrl("ip-content-vso-group-default.png"),n.DefaultRemoteGroupImage=r.urlHelper.getVersionedContentUrl("ip-content-aad-group-default.png"),n.VisualStudioDirectory="vsd",n.AzureActiveDirectory="aad",n.ActiveDirectory="ad",n.WindowsMachineDirectory="wmd",n.SourceDirectory="src",n.UserEntity="user",n.GroupEntity="group",n.OptionsMinResultsKey="MinResults",n.OptionsMaxResultsKey="MaxResults",n.ExtensionData_ExtensionIdKey="ExtensionId",n.ExtensionData_ProjectScopeNameKey="ProjectScopeName",n.ExtensionData_CollectionScopeNameKey="CollectionScopeName",n.ExtensionData_ConstraintListKey="Constraints",n.ExtensionData_NoServiceIdentities="NoServiceIdentities",n.ExtensionData_MaterializedAadGroupsOnlyItem="MaterializedAadGroupsOnly",n.GetIdentities_Prefix_Separator=";",n}(),y,p;t.ServiceHelpers=a;y=function(n){function t(){var r=this;n.call(this);var u=f.getService(i.FeatureAvailabilityService),e=function(n){if(t._ffClientPerformanceEnabled=n,t._ffClientPerformanceEnabled){var i={getUniqueIdentifier:function(n){return n&&n.identities&&n.identities.length==1?n.identities[0].entityId:null}};r._qtrCache=new h.TwoLayerCache(i);r._qtrCache.addRedirector(h.CacheableTypes.Email);r._qtrCache.addRedirector(h.CacheableTypes.Guid);r._qtrRequestAggregator=new h.RequestCache;r._entityImageRequestAggregator=new h.RequestCache}},o=function(){t._ffClientPerformanceEnabled=!1};u.beginIsFeatureEnabled(t._ffClientPerformance,v(this,e),v(this,o))}return __extends(t,n),t.prototype.getIdentities=function(n,i,r,f,o,h){var tt=this,b,w,y,it,et,ct,ot,k,rt,st,lt,p,ht,nt,ft,yt,g;if(!i){nt={source:"IdentityService",parameter:"operationScope",message:"operationScope null or undefined"};throw nt;}if(!r){nt={source:"IdentityService",parameter:"identityType",message:"identityType null or undefined"};throw nt;}if(b=u.getScenarioManager().startScenario(c.Telemetry.Area,c.Telemetry.Scenario_GetDirectory_Rtt),w={},w=a.addScenarioProperties(this,w,i,r,f,h),w[c.TelemetryProperties.prefix]=n,w[c.TelemetryProperties.isDirSearchUid]=o&&o.UID?!0:!1,y={},it={},!n)return it;p=[];et=n.split(a.GetIdentities_Prefix_Separator);for(ct in et)ot=et[ct].toLowerCase().trim(),ot&&p.push(ot);if(p=a.getDistinct(p),p.forEach(function(n){y[n]=l.defer();it[n]=y[n].promise}),t._ffClientPerformanceEnabled)for(k in y){if(rt=this._qtrCache.get(k),rt){rt.queryToken=k;y[k].resolve(rt);p=t._removeQueryToken(k,p);continue}if(st=this._qtrRequestAggregator.getPromise(t.getUniqueRequestString(k,i,r)),st){lt=v(this,function(n){st.then(v(tt,function(t){y&&y[n]&&y[n].resolve(t)}),v(tt,function(t){y&&y[n]&&y[n].reject(t)}))});lt(k);p=t._removeQueryToken(k,p);continue}}if(p.length==0)return it;if(t._ffClientPerformanceEnabled)for(ht in p)this._qtrRequestAggregator.setPromise(t.getUniqueRequestString(p[ht],i,r),y[p[ht]].promise);n=p.join(a.GetIdentities_Prefix_Separator);var at=a.getIdentityTypeList(r),vt=a.getOperationScopeList(i),ut=a.getQueryTypeHint(o);if(at.length==0||vt.length==0){nt={source:"IdentityService",parameter:"identityType or operationScope",message:"queried identityType or operationScope is/are unsupported"};throw nt;}f&&f.httpClient?ft=f.httpClient:(yt=this.getConnection().getHttpClient(s.CommonIdentityPickerHttpClient),ft=yt);var pt=at,wt=vt,d={};f&&f.minResults&&(d[a.OptionsMinResultsKey]=f.minResults);f&&f.maxResults&&(d[a.OptionsMaxResultsKey]=f.maxResults);f&&f.extensionData&&(d[a.ExtensionData_ExtensionIdKey]=f.extensionData.extensionId,d[a.ExtensionData_ProjectScopeNameKey]=f.extensionData.projectScopeName,d[a.ExtensionData_CollectionScopeNameKey]=f.extensionData.collectionScopeName,d[a.ExtensionData_ConstraintListKey]=f.extensionData.constraints);g=a._defaultProperties;r.User&&(g=g.concat(a._defaultUserProperties));r.Group&&(g=g.concat(a._defaultGroupProperties));var kt=function(n){if(n.results.length<1)return i;var u=function(n){if(b&&b.addSplitTiming(c.Telemetry.Scenario_PagingQuerySplit+"_End_"+n&&n.results[0]?n.results[0].queryToken:""),n&&n.results.length!=0){n.results[0].identities.forEach(function(n){n.image||(n.image=a.getDefaultIdentityImage(n))});t._ffClientPerformanceEnabled&&tt._cacheQueryTokenResult(n.results[0]);var i=n.results[0].queryToken;i&&y[i.toLowerCase().trim()]&&y[i.toLowerCase().trim()].resolve(n.results[0])}},r=function(n){for(var t in y)y[t].reject(n);w[c.TelemetryProperties.exceptionData]=n;e.publishEvent(new e.TelemetryEventData(c.Telemetry.Area,c.Telemetry.Feature_ApiExceptions,w))},i,f=function(n){var f,e;n.identities&&n.identities.length==0&&n.pagingToken?(f={query:n.queryToken,identityTypes:pt,operationScopes:wt,properties:g,pagingToken:n.pagingToken,options:d},ut&&(f.queryTypeHint=ut),b.addSplitTiming(c.Telemetry.Scenario_PagingQuerySplit+"_Start_"+n.queryToken),e=ft.beginGetIdentities(f).then(u,r),i&&i.push(e)):n.identities&&n.identities.length>=0?(n.identities.forEach(function(n){n.image||(n.image=a.getDefaultIdentityImage(n))}),t._ffClientPerformanceEnabled&&tt._cacheQueryTokenResult(n),n.queryToken&&y[n.queryToken.toLowerCase().trim()]&&y[n.queryToken.toLowerCase().trim()].resolve(n)):r()};n.results.forEach(f,tt);i&&i.length>0?l.allSettled(i).then(function(){b.addData(w);b.end()},function(){b.addData(w);b.end()}):(b.addData(w),b.end())},dt=function(n){for(var t in y)y[t].reject(n);w[c.TelemetryProperties.exceptionData]=n;e.publishEvent(new e.TelemetryEventData(c.Telemetry.Area,c.Telemetry.Feature_ApiExceptions,w));b.end()},bt={query:n,identityTypes:pt,operationScopes:wt,properties:g,options:d};return ut&&(bt.queryTypeHint=ut),ft.beginGetIdentities(bt).then(kt,dt),it},t.prototype.getIdentityImages=function(n,i){var c=this,a,r,e,o,y,f,h,p,u;if(!n||n.length<=0){a={source:"IdentityService",parameter:"identities",message:"identities null or undefined or empty list"};throw a;}if(r={},e={},i&&i.httpClient?o=i.httpClient:(y=this.getConnection().getHttpClient(s.CommonIdentityPickerHttpClient),o=y),u=t._getEntityIdsAsQueryTokens(n),u.forEach(function(n){r[n]=l.defer();e[n]=r[n].promise}),t._ffClientPerformanceEnabled)for(f in r)if(h=this._entityImageRequestAggregator.getPromise(f),h){p=v(this,function(n){h.then(v(c,function(t){r&&r[n]&&r[n].resolve(t)}),v(c,function(t){r&&r[n]&&r[n].reject(t)}))});p(f);u=t._removeQueryToken(f,u);continue}else this._entityImageRequestAggregator.setPromise(f,r[f].promise);return u.length==0?e:(u.forEach(function(n){var t=function(t){var i;t&&t.trim()&&(i={},i[n]=t.trim(),r[n].resolve(i))};o.beginGetIdentityImageLocation(n).then(t)}),e)},t.prototype.getIdentityConnections=function(n,t,i,r,f,o){var h,y,v,p,g,w,nt;if(!n){h={source:"IdentityService",parameter:"identity",message:"identity null or undefined or empty list"};throw h;}if(!t){h={source:"IdentityService",parameter:"operationScope",message:"operationScope null or undefined"};throw h;}if(!i){h={source:"IdentityService",parameter:"identityType",message:"identityType null or undefined"};throw h;}if(!r){h={source:"IdentityService",parameter:"connectionType",message:"connectionType null or undefined"};throw h;}var b=a.getIdentityTypeList(i),k=a.getOperationScopeList(t),d=a.getConnectionTypeList(r);if(b.length==0||k.length==0||d.length==0){h={source:"IdentityService",parameter:"identityType or operationScope or connectionType",message:"queried identityType or operationScope or connectionType is/are unsupported"};throw h;}y=u.getScenarioManager().startScenario(c.Telemetry.Area,c.Telemetry.Scenario_GetConnections_Rtt);v={};v=a.addScenarioProperties(this,v,t,i,f,o);v[c.TelemetryProperties.entityId]=n.entityId;p=l.defer();g=p.promise;f&&f.httpClient?w=f.httpClient:(nt=this.getConnection().getHttpClient(s.CommonIdentityPickerHttpClient),w=nt);var tt=a._defaultProperties.concat(a._defaultUserProperties).concat(a._defaultGroupProperties),it={identityTypes:b,operationScopes:k,connectionTypes:d,depth:1,properties:tt},rt=function(n){n.successors.forEach(function(n){n.image||(n.image=a.getDefaultIdentityImage(n))});y.addData(v);y.end();p.resolve(n)},ut=function(n){v[c.TelemetryProperties.exceptionData]=n;y.addData(v);e.publishEvent(new e.TelemetryEventData(c.Telemetry.Area,c.Telemetry.Feature_ApiExceptions,v));y.end();p.reject(n)};return w.beginGetConnections(n.entityId,it).then(rt,ut),g},t._getEntityIdsAsQueryTokens=function(n){var t=[];return n.forEach(function(n){(n.entityType.trim().toLowerCase()==a.UserEntity||n.entityType.trim().toLowerCase()==a.GroupEntity)&&t.push(n.entityId)}),t},t.prototype._cacheQueryTokenResult=function(n){n.queryToken&&n.queryToken.trim()&&n.identities&&n.identities.length==1&&this._qtrCache.set(n.queryToken.toLowerCase().trim(),n)},t._removeQueryToken=function(n,t){var i=t.indexOf(n);return i>=0&&t.splice(i,1),t},t.getUniqueRequestString=function(n,t,i){var r=a.getIdentityTypeList(i).join(","),u=a.getOperationScopeList(t).join(",");return n+";"+u+";"+r},t.MIN_RESULTS=40,t.MAX_RESULTS=40,t._ffClientPerformanceEnabled=!1,t._ffClientPerformance="VisualStudio.Services.IdentityPicker.ClientPerformance",t}(f.VssService);t.IdentityService=y;p=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getMruIdentities=function(n,i,r,f,o){var y,v,w,h,p,k,b,d;if(!n){h={source:"IdentityService",parameter:"operationScope",message:"operationScope null or undefined"};throw h;}if(i&&i.trim().toLowerCase()!=t.DEFAULT_IDENTITY_ID){h={source:"IdentityService",parameter:"identityId",message:"identityId can only be 'me'"};throw h;}if(i="me",r&&r.trim().toLowerCase()!=t.DEFAULT_FEATURE_ID){h={source:"IdentityService",parameter:"featureId",message:"featureId can only be 'common'"};throw h;}if(r="common",y=u.getScenarioManager().startScenario(c.Telemetry.Area,c.Telemetry.Scenario_GetMru_Rtt),v={},v=a.addScenarioProperties(this,v,null,null,f,o),w=a.getOperationScopeList(n),w.length==0){h={source:"IdentityService",parameter:"operationScope",message:"queried operationScope is unsupported"};throw h;}p=l.defer();k=p.promise;f&&f.httpClient?b=f.httpClient:(d=this.getConnection().getHttpClient(s.CommonIdentityPickerHttpClient),b=d);var g=a._defaultProperties.concat(a._defaultUserProperties).concat(a._defaultGroupProperties),nt={operationScopes:w,properties:g},tt=function(n){y.addData(v);y.end();p.resolve(n.mruIdentities)},it=function(n){v[c.TelemetryProperties.exceptionData]=n;y.addData(v);e.publishEvent(new e.TelemetryEventData(c.Telemetry.Area,c.Telemetry.Feature_ApiExceptions,v));y.end();p.reject(n)};return b.beginGetIdentityFeatureMru(i,r,nt).then(tt,it),k},t.prototype.removeMruIdentities=function(n,i,r,f,o,h){var p,y,b,v,w,d,k,g;if(!n||n.length==0){v={source:"IdentityService",parameter:"objectIds",message:"objectIds null or undefined or empty"};throw v;}if(!i){v={source:"IdentityService",parameter:"operationScope",message:"operationScope null or undefined"};throw v;}if(r&&r.trim().toLowerCase()!=t.DEFAULT_IDENTITY_ID){v={source:"IdentityService",parameter:"identityId",message:"identityId can only be 'me'"};throw v;}if(r="me",f&&f.trim().toLowerCase()!=t.DEFAULT_FEATURE_ID){v={source:"IdentityService",parameter:"featureId",message:"featureId can only be 'common'"};throw v;}if(f="common",p=u.getScenarioManager().startScenario(c.Telemetry.Area,c.Telemetry.Scenario_RemoveMru_Rtt),y={},y=a.addScenarioProperties(this,y,null,null,o,h),b=a.getOperationScopeList(i),b.length==0){v={source:"IdentityService",parameter:"operationScope",message:"queried operationScope is unsupported"};throw v;}w=l.defer();d=w.promise;o&&o.httpClient?k=o.httpClient:(g=this.getConnection().getHttpClient(s.CommonIdentityPickerHttpClient),k=g);var nt=[{op:"remove",value:n,operationScopes:b}],tt=function(n){p.addData(y);p.end();w.resolve(n.result)},it=function(n){y[c.TelemetryProperties.exceptionData]=n;p.addData(y);e.publishEvent(new e.TelemetryEventData(c.Telemetry.Area,c.Telemetry.Feature_ApiExceptions,y));p.end();w.reject(n)};return k.beginPatchIdentityFeatureMru(r,f,nt).then(tt,it),d},t.prototype.addMruIdentities=function(n,i,r,f,o,h){var b,v,p,y,w,d,k,g;if(!n||n.length==0){v={source:"IdentityService",parameter:"objectIds",message:"objectIds null or undefined or empty"};throw v;}if(!i){v={source:"IdentityService",parameter:"operationScope",message:"operationScope null or undefined"};throw v;}if(r&&r.trim().toLowerCase()!=t.DEFAULT_IDENTITY_ID){v={source:"IdentityService",parameter:"identityId",message:"identityId can only be 'me'"};throw v;}if(r=t.DEFAULT_IDENTITY_ID,f&&f.trim().toLowerCase()!=t.DEFAULT_FEATURE_ID){v={source:"IdentityService",parameter:"featureId",message:"featureId can only be 'common'"};throw v;}if(f=t.DEFAULT_FEATURE_ID,b=a.getOperationScopeList(i),b.length==0){v={source:"IdentityService",parameter:"operationScope",message:"queried operationScope is unsupported"};throw v;}p=u.getScenarioManager().startScenario(c.Telemetry.Area,c.Telemetry.Scenario_AddMru_Rtt);y={};y=a.addScenarioProperties(this,y,null,null,o,h);w=l.defer();d=w.promise;o&&o.httpClient?k=o.httpClient:(g=this.getConnection().getHttpClient(s.CommonIdentityPickerHttpClient),k=g);var nt=[{op:"add",value:n,operationScopes:b}],tt=function(n){p.addData(y);p.end();w.resolve(n.result)},it=function(n){y[c.TelemetryProperties.exceptionData]=n;p.addData(y);e.publishEvent(new e.TelemetryEventData(c.Telemetry.Area,c.Telemetry.Feature_ApiExceptions,y));p.end();w.reject(n)};return k.beginPatchIdentityFeatureMru(r,f,nt).then(tt,it),d},t.DEFAULT_IDENTITY_ID="me",t.DEFAULT_FEATURE_ID="common",t}(f.VssService);t.MruService=p});
define("VSS/Identities/Picker/Controls",["require","exports","VSS/Context","VSS/Controls","VSS/Diag","VSS/Events/Services","VSS/Identities/Picker/Constants","VSS/Identities/Picker/Services","VSS/Identities/Picker/Cache","VSS/Controls/Notifications","VSS/Resources/VSS.Resources.Platform","VSS/Service","VSS/Controls/StatusIndicator","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/UI","VSS/Telemetry/Services","q","jQueryUI/core","jQueryUI/button","jQueryUI/dialog"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b){var dt=p.domElem,k=v.delegate,rt=function(n){function t(t){n.call(this,t);this._numItemsDisplayed=0;this._scrollTimeout=100;this._loadOnCreate=!1;this._isFiltered=!0;var i=t;"eventOptions"in i&&i.eventOptions||(i.eventOptions={uniqueId:d.getRandomString()});this.initializeOptionsInternal(i)}return __extends(t,n),t.prototype.initializeOptionsInternal=function(n){this._identityType=n.identityType?n.identityType:{User:!0};this._operationScope=n.operationScope?n.operationScope:{IMS:!0};this._size=n.size!=null?n.size:tt.Large;this._setShowContactCard();this._displayedEntities=[];this._showOnlyMruIdentities=!1;this._enableDirectorySearch();this._options.showMru&&this._disableDirectorySearch();this._isSearchActive=!1;this._preDropdownRender=n.preDropdownRender?n.preDropdownRender:null;this._loadOnCreate=n.loadOnCreate?n.loadOnCreate:!1;this._elementAlign=this._options.alignment&&this._options.alignment.elementAlign?this._options.alignment.elementAlign:"left-top";this._baseAlign=this._options.alignment&&this._options.alignment.baseAlign?this._options.alignment.baseAlign:"left-bottom";this._positioningElement=this._options.alignment&&this._options.alignment.positioningElement?this._options.alignment.positioningElement:null;this._prefix="";this._controlLoaded=null;this._loadOnCreate&&this.load();n.eventOptions&&(this._eventOptions=n.eventOptions)},t.prototype.initializeOptions=function(i){var r=t.CSS_DROPDOWN_BASE+" "+d.CSS_FIXED_POSTIION;n.prototype.initializeOptions.call(this,$.extend({coreCssClass:r,pageSize:i.pageSize?i.pageSize:10},i))},t.prototype.initialize=function(){n.prototype.initialize.call(this);var i=function(n){n.preventDefault()};this._bind(this._element,t.EVENT_MOUSEDOWN,k(this,i),!0)},t.prototype.load=function(){return this._getEntityOperationsFacade().load({loadMru:this._options.showMru})},t.prototype.addIdentitiesToMru=function(n){var r=this,i;try{if(!n||n.length==0)return;if(i=n.filter(function(n){if(!ht.isStringPrefixedLocalId(n))return!0}),!i||i.length==0)return;var u=function(n){r._element&&n==!0&&r._getEntityOperationsFacade().refreshUserMru()},f=function(){},e=l.getService(o.MruService);e.addMruIdentities(i,{IMS:!0},o.MruService.DEFAULT_IDENTITY_ID,o.MruService.DEFAULT_FEATURE_ID,{httpClient:this._options.httpClient},{consumerId:this._options.consumerId}).then(u,f);this._disableDirectorySearch()}catch(t){if(t!==Object(t)||!("source"in t)||t.source!="MruService")throw t;}},t.prototype.isVisible=function(){return this._isVisible},t.prototype.isFiltered=function(){return this._isVisible&&this._isFiltered},t.prototype.showAllMruIdentities=function(n){var t=this,i;if(n===void 0&&(n=!0),!this._options.showMru){i={source:"showAllMruIdentities",message:"The showMru option needs to be enabled to call showAllMruIdentities"};throw i;}return this.load().then(k(this,function(){return t._getUserMruEntitiesPostLoad(n)}),k(this,function(){return t._getUserMruEntitiesPostLoad(n)}))},t.prototype.getIdentities=function(n,t){var i=this;return t===void 0&&(t=!0),this.load().then(k(this,function(){return i._getIdentitiesPostLoad(n,t)}),k(this,function(){return i._getIdentitiesPostLoad(n,t)}))},t.prototype.show=function(){var n=this;this.load().then(k(this,function(){n._showPostLoad()}),k(this,function(){n._showPostLoad()}))},t.prototype.hide=function(n,i){if(i===void 0&&(i=!1),this._isVisible=!1,this._element.hide(),!i&&this._options.onHide)this._options.onHide(n);var r={uniqueId:this._eventOptions?this._eventOptions.uniqueId:null};f.getService().fire(t.HIDE_DROPDOWN_EVENT_INTERNAL,r)},t.prototype.getSelectedIndex=function(){return this._selectedIndex==-1?null:this._selectedIndex<this._displayedEntities.length-1?this._selectedIndex:this._displayedEntities.length-1},t.prototype.getSelectedItem=function(){return this._selectedIndex==-1||this._selectedIndex>this._displayedEntities.length-1?null:this._displayedEntities[this._selectedIndex]},t.prototype.handleKeyEvent=function(n){if(!n||!n.keyCode)return!0;switch(n.keyCode){case g.UP:return this.isVisible()?this._prevItem():!0;case g.DOWN:return this.isVisible()?this._nextItem():(this.show(),!0);case g.PAGE_UP:return this.isVisible()?this._prevPage():!0;case g.PAGE_DOWN:return this.isVisible()?this._nextPage():!0;case g.ENTER:return this.isVisible()&&this._searchButtonClickDelegate(),!0;case g.ESCAPE:return this.isVisible()?(this.hide(n),n.stopPropagation(),!1):!0;case g.RIGHT:return this.isVisible()&&this._showContactCard&&this._selectedIndex!=-1?(n.stopPropagation(),$(".identity-picker-contact-card-icon",this._indexedEntityMap[this._selectedIndex]).click(),!1):!0;case g.DELETE:if(this.isVisible()&&this._options.showMru){var t=this.getSelectedItem();return t&&t.isMru&&nt.isDirectoryEntityType(t)?(n.stopPropagation(),$(".identity-picker-delete-icon",this._indexedEntityMap[this._selectedIndex]).click(),!1):!0}return!0;default:return!0}},t.prototype.getPrefix=function(){return this._prefix},t.prototype.updatePrefix=function(n){this._prefix=n?n.toLowerCase().trim():"";this._prefix||(this._isSearchActive=!1,this._disableDirectorySearch())},t.prototype.dispose=function(){n.prototype.dispose.call(this)},t.prototype.reset=function(){this._resetSearchStatuses();this._prefix="";this._enableDirectorySearch();this._displayedEntities=[];this._alterStateAndRender(!1,!1);this._disableDirectorySearch()},t.getClassSelector=function(n){return"."+n},t.prototype._getEntityOperationsFacade=function(){return this._entityOperationsFacade||(this._entityOperationsFacade=l.getService(ot)),this._entityOperationsFacade},t.prototype._getUserMruEntitiesPostLoad=function(n){var t=this;return n===void 0&&(n=!0),this._isFiltered=!1,this._showOnlyMruIdentities=!0,this._isDropdownVisibleInitially=this._isVisible,this._getEntityOperationsFacade().isUserMruReady()||this._alterStateAndRender(!0,!1,n),this.load().then(k(this,function(){return t.getIdentities(t._prefix,n)}))},t.prototype._enableDirectorySearch=function(){this._isDirectorySearchEnabled=!0},t.prototype._disableDirectorySearch=function(){this._isDirectorySearchEnabled=!1},t.prototype._resetSearchStatuses=function(){this._isSearchActive=!1;this._disableDirectorySearch()},t.prototype._getIdentitiesPostLoad=function(n,t){var i,r;return(t===void 0&&(t=!0),i=b.defer(),!this._element)?(i.reject(null),i.promise):(this._showLoading(),this._isDropdownVisibleInitially=this._isVisible,this._isSearchActive=!1,this._displayedEntities=[],this._options.showMru&&(this._mruEntities=this._getEntityOperationsFacade().getMruEntitiesUnchecked(),r=o.ServiceHelpers.getIdentityTypeList(this._identityType),this._mruEntities=this._mruEntities.filter(function(n){return r.indexOf(n.entityType.trim().toLowerCase())>=0})),(!n||n.trim().length===0)&&(this._resetSearchStatuses(),!this._showOnlyMruIdentities))?(this._prefix=n,this._enableDirectorySearch(),this._alterStateAndRender(!0,!0),this._disableDirectorySearch(),i.resolve([]),i.promise):(n=n.toLowerCase().trim(),this._prefix=n,this._showOnlyMruIdentities)?(this._displayedEntities=this._mruEntities?this._mruEntities:[],this._alterStateAndRender(!1,!1,t),this._showOnlyMruIdentities=!1,this._getImagesForDisplayedEntities(),i.resolve(this._displayedEntities),i.promise):(this._options.showMru&&(this._displayedEntities=ot.filterEntities(this._mruEntities,n)),this._isFiltered=!0,this._options.showMru&&!this._isDirectorySearchEnabled)?(this._alterStateAndRender(!0),this._getImagesForDisplayedEntities(),i.resolve(this._displayedEntities),i.promise):this._getDirectoryEntitiesWithRender(n,i)},t.prototype._getDirectoryEntitiesWithRender=function(n,t){return this._isSearchActive=!0,this._alterStateAndRender(!0),this._getDirectoryEntities(n,t)},t.prototype._checkIfServerException=function(n){return!n||!("serverError"in n)||!n.serverError||!("typeKey"in n.serverError)?!1:!0},t.prototype._getMessageForIpsAuthorizationException=function(n){if(n.serverError.typeKey.trim()=="IdentityPickerAuthorizationException"&&n.serverError.customProperties!=null){var i=n.serverError.customProperties.identityPickerAuthorizationExceptionType,t=c.IdentityPicker_ErrorAuthorizationException;return i==lt.IsGuestUser&&(t=c.IdentityPicker_GuestUserException),t}return null},t.prototype._getDirectoryEntities=function(n,i,r){var f=this;r===void 0&&(r=!1);var s=function(t){f._element&&(f._isSearchActive=!1,n===f._prefix&&n.length>=1&&(f._displayedEntities=t?t.identities:[],f._alterStateAndRender(!0)),i.resolve(f._displayedEntities))},o=function(r){if(r&&u.logError("_getDirectoryEntities/getIdentitiesErrorCallback:"+JSON.stringify(r)),n===f._prefix)if(f._checkIfServerException(r)){var e=f._getMessageForIpsAuthorizationException(r);e&&f._showError($("<span>").text(e+" [").append($("<a><\/a>").attr("href",t.IP_AUTHORIZATION_EXCEPTION_DETAILS_LINK).text(c.IdentityPicker_ErrorMoreDetails).attr("target","_blank")).append($("<span>").text("]")))}else f._showError(c.IdentityPicker_ErrorLoadingIdentities);f._isSearchActive=!1;i.reject(r?r:null)},h={identityServiceOptions:{operationScope:this._operationScope,identityType:this._identityType,httpClient:this._options.httpClient,extensionData:this._options.extensionData},identityExtensionOptions:{consumerId:this._options?this._options.consumerId:e.ConsumerId.UnknownConsumer},prefix:n,sources:this._options.showMru?[ut.Directory,ut.Mru]:[ut.Directory]},l=this._getEntityOperationsFacade().search(h).then(function(n){for(var t in n.queryTokenResponse)n.queryTokenResponse[t].then(k(f,s),k(f,o))},o);return i.promise},t.prototype._getImagesForDisplayedEntities=function(){var n=this,i=function(i){if(n._element){if(!i)return;n._displayedEntities.forEach(k(n,function(r){i.hasOwnProperty(r.entityId)&&i[r.entityId]&&(r.image=i[r.entityId],$(t.getClassSelector(t.CSS_AVATAR),n._$itemsContainer).each(function(n,t){t.hasAttribute("data-objectid")&&t.getAttribute("data-objectid")===r.entityId&&t.setAttribute("src",i[r.entityId])}))}))}},r=function(n){n&&u.logError("_getImagesForDisplayedEntities/getIdentityImagesErrorCallback:"+JSON.stringify(n))};this._getEntityOperationsFacade().getImagesForEntities(this._displayedEntities).then(i,r)},t.prototype._showPostLoad=function(){if(this._element){this._isVisible=!0;this._element.show();this._setPosition();var n={uniqueId:this._eventOptions?this._eventOptions.uniqueId:null};f.getService().fire(t.SHOW_DROPDOWN_EVENT_INTERNAL,n)}},t.prototype._constructDropdown=function(n,t,i,r){t===void 0&&(t=!1);i===void 0&&(i=!0);r===void 0&&(r=!0);this._indexedEntityMap={};i&&this._setupDom();t?this._setSelectedIndex(this._selectedIndex<this._displayedEntities.length?this._selectedIndex:this._isSearchActive?this._displayedEntities.length-1:-1,!0,p.Positioning.VerticalScrollBehavior.Top):(this._selectedIndex=it.SelectNone,r&&this._numItemsDisplayed>0?this._setSelectedIndex(it.SelectFirstItem,!1):this._setSelectedIndex(it.SelectNone,!1))},t.prototype._removeIdentityFromMru=function(n){var i=this;try{if(ht.isStringPrefixedLocalId(n))return;var r=function(n){i._element&&n==!0&&i._getEntityOperationsFacade().refreshUserMru()},u=function(){},f=l.getService(o.MruService);f.removeMruIdentities([n],{IMS:!0},o.MruService.DEFAULT_IDENTITY_ID,o.MruService.DEFAULT_FEATURE_ID,{httpClient:this._options.httpClient},{consumerId:this._options.consumerId}).then(r,u);this._disableDirectorySearch()}catch(t){if(t!==Object(t)||!("source"in t)||t.source!="MruService")throw t;}},t.prototype._alterStateAndRender=function(n,t,i){if(t===void 0&&(t=!1),i===void 0&&(i=!0),this._element){if(n||this.hide(void 0,!0),this._prefix&&this._prefix.trim().length!=0||(this._isSearchActive=!1),this._displayedEntities=this._displayedEntities||[],this._preDropdownRender&&(this._displayedEntities=this._preDropdownRender(this._displayedEntities)),this._constructDropdown(this._displayedEntities,t,!0,i),!this._isSearchActive&&!this._prefix&&this._displayedEntities.length==0){this.hide();return}n&&(!this._isDropdownVisibleInitially||this._isVisible)&&this.show()}},t.prototype._getUniqueIdForActiveDescendant=function(){var n=r.getId().toString(),i={activeDescendantId:n,uniqueId:this._eventOptions?this._eventOptions.uniqueId:null};return f.getService().fire(t.UPDATE_ACTIVE_DESCENDANT_ID,i),n},t.prototype._setSelectedIndex=function(n,t,i){i===void 0&&(i=p.Positioning.VerticalScrollBehavior.Bottom);var r=n!==null&&n!==undefined&&this._indexedEntityMap&&this._indexedEntityMap[n]&&(this._selectedIndex!==n||!this._indexedEntityMap[this._selectedIndex].hasClass("selected"));r?(this._selectedIndex=n,$("li",this._$itemsContainer).removeClass("selected").removeAttr("id"),this._indexedEntityMap[this._selectedIndex].addClass("selected").attr("id",this._getUniqueIdForActiveDescendant()),t&&this._scrollItemIntoView(this._selectedIndex,i)):$.isNumeric(n)&&(this._selectedIndex=n)},t.prototype._scrollItemIntoView=function(n,t){n!==null&&n!==undefined&&p.Positioning.scrollIntoViewVertical(this._indexedEntityMap[n],t)},t.prototype._setPosition=function(){var i=this._getPositioningElement(),n;this._options.width?this._element.width(this._options.width):(n=i.outerWidth()-t.DROPDOWN_BORDER_PX,this._element.width(n<t.MIN_WIDTH?t.MIN_WIDTH:n));p.Positioning.position(this.getElement(),i,{elementAlign:this._elementAlign,baseAlign:this._baseAlign,overflow:"fit-flip"})},t.prototype._getPositioningElement=function(){var n=this._positioningElement;return $.isFunction(n)&&(n=n()),n||(n=this.getElement().parent()),n},t.prototype._showLoading=function(){this._element.empty();this._element.attr("aria-busy","true");var n=$("<div>").addClass("search").appendTo(this._element),t=r.BaseControl.createIn(a.StatusIndicator,n,{center:!1,message:c.IdentityPicker_LoadingIdentities});t.start()},t.prototype._showError=function(n){var t=$(".search",this._element).empty().addClass("search-error"),i=r.BaseControl.createIn(h.MessageAreaControl,t,{closeable:!1,message:{header:typeof n=="string"||n instanceof String?$("<span>").text(n):n,type:h.MessageAreaType.Error},showIcon:!1})},t.prototype._nextPage=function(){var n=-1;return this._loadNextPage(!0),this._selectedIndex<this._displayedEntities.length-1&&this._selectedIndex!==-1&&(n=this._selectedIndex+this._options.pageSize),this._setSelectedIndex(n<this._displayedEntities.length?n:this._displayedEntities.length-1,!0,p.Positioning.VerticalScrollBehavior.Top),!1},t.prototype._prevPage=function(){var n=0;return this._selectedIndex===-1?n=this._displayedEntities.length-this._options.pageSize:this._selectedIndex>0&&(n=this._selectedIndex-this._options.pageSize),this._setSelectedIndex(n>=0?n:it.SelectFirstItem,!0,p.Positioning.VerticalScrollBehavior.Top),!1},t.prototype._nextItem=function(){return this._selectedIndex===this._displayedEntities.length-1?$(".search",this._element).is(":visible")?(this._selectedIndex=it.SelectNone,$("li",this._$itemsContainer).removeClass("selected").removeAttr("id"),$(".search",this._element).addClass("selected").attr("id",this._getUniqueIdForActiveDescendant())):this._setSelectedIndex(it.SelectFirstItem,!0):this._selectedIndex<this._displayedEntities.length-1&&this._setSelectedIndex(this._selectedIndex+1,!0),!1},t.prototype._prevItem=function(){return this._selectedIndex===-1&&this._displayedEntities&&this._displayedEntities.length?($(".search",this._element).removeClass("selected").removeAttr("id"),this._setSelectedIndex(this._displayedEntities.length-1,!0)):this._selectedIndex>0&&this._setSelectedIndex(this._selectedIndex-1,!0,p.Positioning.VerticalScrollBehavior.Top),!1},t.prototype._createItem=function(n){var t=this,r={deleteIconClickDelegate:k(this,function(n,i){var r=t._mruEntities.indexOf(n);r>=0&&t._mruEntities.splice(r,1);r=t._displayedEntities.indexOf(n);r>=0&&t._displayedEntities.splice(r,1);i.remove();n.localId&&n.localId.trim()&&t._removeIdentityFromMru(n.localId);t._numItemsDisplayed=Math.min(t._displayedEntities.length,Math.max(t._options.pageSize,t._numItemsDisplayed));t._$searchResultStatus.remove();t._$searchResultStatus=t._constructSearchResultStatus();t._showAdditionalInformation()}),entityListItemClickDelegate:k(this,function(n){if(t._logSelectedEntity(n),$.isFunction(t._options.onItemSelect))t._options.onItemSelect(n)})},u={operationScope:this._operationScope,identityType:this._identityType,httpClient:this._options.httpClient?this._options.httpClient:null},f={consumerId:this._options.consumerId},e=this._displayedEntities[n],i=(new bt).withIdentityServiceOptions(u).withIdentityExtensionOptions(f).withPrefix(this._prefix&&this._prefix.trim()&&!this._showOnlyMruIdentities?this._prefix:"").withEntity(e).forControlOfSize(this._size).registerCallbacks(r).withContactCard(this._showContactCard,this._options.focusElementOnContactCardClose).build();return this._indexedEntityMap[n]=i,i},t.prototype._logSelectedEntity=function(n){var r=!1,u=!1,i,t,f;try{i=e.Telemetry.Feature_DropdownControl;(n.originDirectory.toLowerCase().trim()==o.ServiceHelpers.VisualStudioDirectory||n.localDirectory.toLowerCase().trim()==o.ServiceHelpers.VisualStudioDirectory)&&(r=!0);n.isMru&&(u=!0);this._prefix?this._options.showMru?i=this._isDirectorySearchEnabled?e.Telemetry.Feature_Select_Mru_Dir:e.Telemetry.Feature_Select_Mru_Prefix:this._isDirectorySearchEnabled&&(i=e.Telemetry.Feature_Select_Dir):this._options.showMru&&(i=e.Telemetry.Feature_Select_Mru_NoPrefix);t={};t[e.TelemetryProperties.prefix]=this._prefix;t[e.TelemetryProperties.consumerId]=this._options&&this._options.consumerId?this._options.consumerId:null;t[e.TelemetryProperties.extensionId]=this._options&&this._options.extensionData&&this._options.extensionData.extensionId?this._options.extensionData.extensionId:null;t[e.TelemetryProperties.identityTypes]=o.ServiceHelpers.getIdentityTypeList(this._options.operationScope);t[e.TelemetryProperties.operationScopes]=o.ServiceHelpers.getOperationScopeList(this._options.operationScope);t[e.TelemetryProperties.isMru]=u;t[e.TelemetryProperties.isNonMaterialized]=!r;t[e.TelemetryProperties.maxResults]=this._options&&this._options.maxResults?this._options.maxResults:o.IdentityService.MAX_RESULTS;t[e.TelemetryProperties.minResults]=this._options&&this._options.minResults?this._options.minResults:o.IdentityService.MIN_RESULTS;t[e.TelemetryProperties.entityId]=n.entityId;t[e.TelemetryProperties.consumerId]=this._options.consumerId;f=l.getService(o.IdentityService);t=o.ServiceHelpers.addScenarioProperties(l.getService(o.IdentityService),t);w.publishEvent(new w.TelemetryEventData(e.Telemetry.Area,i,t))}catch(s){}},t.prototype._setupDom=function(){this._element.empty();this._element.removeAttr("aria-busy");this._setupEntitiesInDom();!this._isDirectorySearchEnabled&&this._options.showMru&&this._prefix&&!this._showOnlyMruIdentities&&this._constructSearchButton().appendTo(this._element);this._displayedEntities&&this._displayedEntities.length>0&&(this._$searchResultStatus=this._constructSearchResultStatus());this._showAdditionalInformation()},t.prototype._showAdditionalInformation=function(){this._displayedEntities.length===0&&(this._isSearchActive||this._options.showMru&&!this._getEntityOperationsFacade().isUserMruReady()?this._showLoading():(!this._options.showMru||this._isDirectorySearchEnabled&&this._prefix||this._showOnlyMruIdentities)&&this._constructInformativeMessage(c.IdentityPicker_NoResult).appendTo(this._element))},t.prototype._setupEntitiesInDom=function(){var n=this,u=function(){return n._scrollTimeout!==null&&(clearTimeout(n._scrollTimeout),n._scrollTimeout=null),n._scrollTimeout=setTimeout(k(n,n._loadNextPage),100),!1},i,r;if(this._$itemsContainer=$("<ul>").addClass("items").attr("role","listbox").css({"max-height":Math.min((d.getSizePx(this._size)+t.IMAGE_MARGINS_PX)*this._options.pageSize-10,t.MAX_HEIGHT)+"px"}),this._element.append(this._$itemsContainer),this._$itemsContainer.scroll(k(this,u)),this._displayedEntities.length==0)this._numItemsDisplayed=0;else for(this._numItemsDisplayed=Math.min(this._displayedEntities.length,Math.max(this._options.pageSize,this._numItemsDisplayed)),i=0;i<this._numItemsDisplayed;i++)i>this._displayedEntities.length-1||(r=this._createItem(i),r&&(this._$itemsContainer.append(r),r.height(r.height()+t.IMAGE_MARGINS_PX)))},t.prototype._constructSearchResultStatus=function(){var n=$("<div>").addClass("search-result-status").appendTo(this._element);return this._displayedEntities.length==1&&this._numItemsDisplayed==this._displayedEntities.length?n.text(y.format(c.IdentityPicker_SingleResultStatus,this._displayedEntities.length)):this._displayedEntities.length>1&&this._numItemsDisplayed<=this._displayedEntities.length?n.text(y.format(c.IdentityPicker_MultipleResultStatus,this._displayedEntities.length)):n.hide(),n},t.prototype._constructSearchButton=function(){var n;return n=$("<div>").addClass("search").attr("title",c.IdentityPicker_SearchButton).attr("tabindex","0").attr("role","option"),n.append($("<span>").addClass("bowtie-icon bowtie-search identity-picker-search-icon")).append($("<span>").addClass("status-message").text(c.IdentityPicker_SearchButton)),n.click(k(this,this._searchButtonClickDelegate)),n},t.prototype._constructInformativeMessage=function(n){return $("<div>").addClass("no-result").append($("<span>").addClass("status-message").text(n).attr("role","alert"))},t.prototype._loadNextPage=function(n){var u,r,i;if(n===void 0&&(n=!1),u=this._$itemsContainer.scrollTop()+this._$itemsContainer.outerHeight()>=this._$itemsContainer[0].scrollHeight-5,n||u){for(r=this._numItemsDisplayed;r<this._numItemsDisplayed+Math.min(this._displayedEntities.length-this._numItemsDisplayed,this._options.pageSize);r++)i=this._createItem(r),i&&(this._$itemsContainer.append(i),i.height(i.height()+t.IMAGE_MARGINS_PX));this._numItemsDisplayed+=Math.min(this._displayedEntities.length-this._numItemsDisplayed,this._options.pageSize);this._$searchResultStatus.remove();this._$searchResultStatus=this._constructSearchResultStatus()}this._scrollTimeout!==null&&(clearTimeout(this._scrollTimeout),this._scrollTimeout=null)},t.prototype._searchButtonClickDelegate=function(){this._enableDirectorySearch();this.getIdentities(this._prefix)},t.prototype._setShowContactCard=function(){this._showContactCard=this._options.showContactCard},t.SHOW_DROPDOWN_EVENT_INTERNAL="identity-picker-dropdown-show",t.HIDE_DROPDOWN_EVENT_INTERNAL="identity-picker-dropdown-hide",t.UPDATE_ACTIVE_DESCENDANT_ID="identity-picker-dropdown-update-active-descendant-id",t.CSS_DROPDOWN_BASE="identity-picker-dropdown",t.IMAGE_MARGINS_PX=8,t.MIN_WIDTH=300,t.MAX_HEIGHT=240,t.DROPDOWN_BORDER_PX=2,t.IP_AUTHORIZATION_EXCEPTION_DETAILS_LINK="https://aka.ms/c0eo4d",t.CSS_AVATAR="identity-picture",t.EVENT_MOUSEDOWN="mousedown",t}(r.Control),st,it,g,at,tt,et,lt,vt,d,ht,yt,pt;t.IdentityPickerDropdownControl=rt;st=function(n){function t(t){n.call(this,t);this._scrollTimeout=100;this._pageSize=10;this._selectedIndex=it.SelectNone;this._identityType=t.identityType?t.identityType:{User:!0};this._operationScope=t.operationScope?t.operationScope:{IMS:!0}}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({width:400,height:70,resizable:!1,modal:!1,draggable:!0,autoOpen:!0,closeOnEscape:!1,cssClass:"idcard-dialog-content",closeText:c.CloseButtonLabelText},t))},t.prototype.initialize=function(){var i,r,u;if(n.prototype.initialize.call(this),this._previousFocusedElement=$(document.activeElement),this._element.dialog(this._options),this._$idCardDialog=this._element.closest(t.JQUERY_UI_DIALOG_CLASS).addClass("idcard-dialog").attr("visibility","hidden"),this._onIdCardBlurDelegate=k(this,this._onIdCardBlur),this._bind(this._$idCardDialog,"dialogclose",k(this,this._onIdCardClose),!0),this._bind(this._$idCardDialog,"keydown",k(this,this._onKeyDown),!0),this._$idCardDialog.css("z-index",t._getHigherZIndex("div"+t.JQUERY_UI_DIALOG_CLASS)),$(".ui-icon-closethick",this._$idCardDialog).addClass("bowtie-icon bowtie-navigate-close"),this._repositionDialog(),this._$idCardDialog.hide(),$(".ui-dialog-content",$(".idcard-dialog:visible")).dialog("close"),this._$idCardDialog.attr("id",t.ID_CARD_DIALOG_ID),this._options.identity){if(i=this._options.identity,!nt.isDirectoryEntityType(i)){r={source:"IdCardDialog initialize",message:"The IdCardDialog can only be initialized with a user or group IEntity"};throw r;}u=nt.getUniqueIdentifierForDisambiguation(i);this._$idCardDialog.attr("data-prefix",u.toLowerCase());this._getIdentitiesSuccess({queryToken:null,identities:[i]});!d.isOnPremiseEnvironment()&&i.localDirectory&&i.localDirectory.toLowerCase().trim()==o.ServiceHelpers.VisualStudioDirectory&&this._operationScope&&(this._operationScope.AAD||this._operationScope.Source)&&this._getDirectoryEntities(i.entityId)}else this._$idCardDialog.attr("data-prefix",this._options.uniqueIdentifier.toLowerCase()),this._getDirectoryEntities(this._options.uniqueIdentifier)},t.prototype._getEntityOperationsFacade=function(){return this._entityOperationsFacade||(this._entityOperationsFacade=l.getService(ot)),this._entityOperationsFacade},t._getHigherZIndex=function(n){var t,i=1001;return $(n).each(function(n,r){t=$(r).css("z-index");!isNaN(t)&&t>i&&(i=t)}),++i},t.prototype._repositionDialog=function(){var t={elementAlign:"left-top",baseAlign:"left-bottom",overflow:"none-none"},n,i,r;this._options.anchorContainer?(n=$(this._options.anchorContainer).offset(),t.leftOffsetPixels=n.left,t.topOffsetPixels=n.top,t.skipZIndexSetting=!0):n=this._options.anchor.offset();p.Positioning.position(this._$idCardDialog,this._options.anchor,t);i=this._options.leftValue&&this._options.leftValue>0?this._options.leftValue:n.left;i+this._$idCardDialog.outerWidth()<$(window).width()+$(window).scrollLeft()?this._$idCardDialog.css("left",i):this._$idCardDialog.css("left",i-this._$idCardDialog.outerWidth()+this._options.anchor.outerWidth());r=this._options.topValue&&this._options.topValue>0?this._options.topValue:n.top+this._options.anchor.outerHeight();r+this._$idCardDialog.outerHeight()<$(window).height()+$(window).scrollTop()?this._$idCardDialog.css("top",r):this._$idCardDialog.css("top",r-this._$idCardDialog.outerHeight()-this._options.anchor.outerHeight())},t.prototype._getDirectoryEntities=function(n){var t=this,i={identityServiceOptions:{operationScope:this._operationScope,identityType:this._identityType,httpClient:this._options.httpClient,extensionData:this._options.extensionData},identityExtensionOptions:{consumerId:this._options?this._options.consumerId:e.ConsumerId.UnknownConsumer},prefix:n,queryTypeHint:{UID:!0},sources:[ut.Directory]},r=this._getEntityOperationsFacade().search(i).then(function(n){for(var i in n.queryTokenResponse)n.queryTokenResponse[i].then(k(t,t._getIdentitiesSuccess),k(t,t._getIdentitiesFailure))},this._getIdentitiesFailure)},t.prototype._getIdentitiesFailure=function(){f.getService().fire(t.IDCARD_LOADED_EVENT)},t.prototype._getIdentitiesSuccess=function(n){if(!n||!n.identities||n.identities.length<1){this._getIdentitiesFailure(n);return}var i=n.identities[0],r=nt.getUniqueIdentifierForDisambiguation(i),u=nt.getSignInAddress(i);(this._$idCardDialog.attr("data-prefix")&&r.toLowerCase().indexOf(this._$idCardDialog.attr("data-prefix").toLowerCase())===0||u.toLowerCase().indexOf(this._$idCardDialog.attr("data-prefix").toLowerCase())===0)&&this._element&&this._displayIdCard(i);f.getService().fire(t.IDCARD_LOADED_EVENT)},t.prototype._displayIdCard=function(n){var i=this,t,s,r,h,w;this._$idCardDialog.attr("data-objectid",n.entityId);this._bind($("body"),"mousedown",this._onIdCardBlurDelegate,!0);$(".ui-dialog-buttonpane",this._$idCardDialog).hide();this._element.empty();$(".identity-picker-idcard-header").empty();var a=$("<div>").addClass("identity-picker-idcard-header").prependTo($(".ui-dialog-titlebar",this._$idCardDialog)),g=$("<div>").addClass("identity-picker-idcard-image").appendTo(a),v=$("<div>").addClass("identity-picker-idcard-basicinfo").appendTo(a),e=y.decodeHtmlSpecialChars(nt.getDisplayName(n)),tt=o.ServiceHelpers.getDefaultIdentityImage(n),rt=d.createImgElement(tt,n.image?n.image:"","user-picture-card");if(rt.attr("alt",e).appendTo(g),t=nt.getSignInAddress(n),t.trim()||this._options.uniqueIdentifier&&d.isValidEmail(this._options.uniqueIdentifier)&&(t=this._options.uniqueIdentifier),$("<div>").addClass("identity-picker-idcard-basicinfo-name").attr("title",y.htmlEncodeJavascriptAttribute(e)).appendTo(v).text(e),s=$("<div>").addClass("identity-picker-idcard-ellipsis-overflow").appendTo(v),d.isValidEmail(t)?$("<a>").attr("href","mailto:"+t).text(y.decodeHtmlSpecialChars(t)).attr("tabindex","0").appendTo(s):s.text(y.decodeHtmlSpecialChars(t)),r=(new wt).getIdentityAttributes(n),n.entityType.trim().toLowerCase()==o.ServiceHelpers.UserEntity){h=r.toRows();for(w in h)this._element.append(h[w])}else if(n.entityType.trim().toLowerCase()==o.ServiceHelpers.GroupEntity){var b=$("<div>").addClass("identity-picker-idcard-row").appendTo(this._element),u=$("<span>").addClass("identity-picker-idcard-tab").attr("title",c.IdentityPicker_IdCardInfo).text(c.IdentityPicker_IdCardInfo).attr("tabindex","0").appendTo(b),f=$("<span>").addClass("identity-picker-idcard-tab identity-picker-idcard-unselected-tab").attr("title",c.IdentityPicker_IdCardMembers).text(c.IdentityPicker_IdCardMembers).attr("tabindex","0").appendTo(b),l=r.toRows()[0];this._element.append(l);this._constructMemberTabContent().appendTo(this._element);this._getDirectoryMemberEntities(n);u.click(k(this,function(){u.hasClass("identity-picker-idcard-unselected-tab")&&(u.removeClass("identity-picker-idcard-unselected-tab"),f.addClass("identity-picker-idcard-unselected-tab"),i._$groupMembersContainer.parent().hide(),l.show(),i._element.css("height","auto"))}));f.click(k(this,function(){f.hasClass("identity-picker-idcard-unselected-tab")&&(f.removeClass("identity-picker-idcard-unselected-tab"),u.addClass("identity-picker-idcard-unselected-tab"),l.hide(),i._setSelectedIndex(it.SelectFirstItem,p.Positioning.VerticalScrollBehavior.Top),i._$groupMembersContainer.parent().show(),i._element.css("height","auto"))}))}r.isEmpty()?$(".ui-dialog-titlebar",this._$idCardDialog).addClass("no-content"):$(".ui-dialog-titlebar",this._$idCardDialog).removeClass("no-content");this._element.css("height","auto");this._repositionDialog();this._$idCardDialog.show();this._$idCardDialog.attr("visibility","");this._$idCardDialog.attr("tabindex","-1");this._$idCardDialog.focus()},t.prototype._constructMemberTabContent=function(){var n=$("<div>").addClass(t.CSS_ID_CARD_MEMBERS_DROPDOWN+" "+t.CSS_ID_CARD_LIST).attr("aria-busy","true").hide();return this._$groupMembersContainer=$("<ul>").attr("role","listbox").attr("aria-label",c.IdentityPicker_IdCardMembersTabDescription).attr("tabindex","0").appendTo(n).css({"max-height":Math.min((d.getSizePx(tt.Large)+t.IMAGE_MARGINS_PX)*this._pageSize-10,t.MAX_HEIGHT)+"px"}),this._$loading=$("<div>").addClass("identity-picker-idcard-word-wrap identity-picker-idcard-error").text(c.IdentityPicker_IdCardLoadingMembers).appendTo(n),n},t.prototype._getDirectoryMemberEntities=function(n){var t=this,r=l.getService(o.IdentityService),f=function(n){if(t._element){if(!n)return;t._groupMembers.forEach(k(t,function(i){n.hasOwnProperty(i.entityId)&&n[i.entityId]&&(i.image=n[i.entityId],$(".identity-picture",t._$groupMembersContainer).each(function(t,r){r.hasAttribute("data-objectid")&&r.getAttribute("data-objectid")===i.entityId&&(r.setAttribute("src",n[i.entityId]),r.setAttribute("class","identity-picture small"))}))}))}},e=function(n){n&&u.logError("_getDirectoryMemberEntities/getIdentityImagesErrorCallback:"+JSON.stringify(n))},s=function(n){if(t._element){if(!n||!n.successors){k(t,i)();return}t._groupMembers=n.successors;t._groupMembers&&t._groupMembers.length>0?(t._groupMembers=d.sortGroupMembersByName(t._groupMembers),t._groupMembers.forEach(function(n){(!n.image||n.image.trim())&&(n.image=o.ServiceHelpers.getDefaultIdentityImage(n))}),t._getEntityOperationsFacade().getImagesForEntities(t._groupMembers).then(f,e),t._$loading.hide(),t._renderMembersList()):t._$loading.text(c.IdentityPicker_IdCardNoMembers);t._$groupMembersContainer.parent().removeAttr("aria-busy")}},i=function(n){t._element&&(t._$groupMembersContainer.parent().removeAttr("aria-busy"),t._$loading.text(c.IdentityPicker_IdCardErrorLoadingMembers));n&&u.logError("_displayIdCard/getConnectionsErrorCallback:"+JSON.stringify(n))};r.getIdentityConnections(n,this._operationScope,{User:!0,Group:!0},{successors:!0},{httpClient:this._options.httpClient},{consumerId:this._options.consumerId}).then(k(this,s),k(this,i))},t.prototype._isMembersListVisible=function(){return this._$groupMembersContainer&&this._$groupMembersContainer.length&&this._$groupMembersContainer.parent()&&this._$groupMembersContainer.parent().is(":visible")},t.prototype._onIdCardBlur=function(){!this._element.hasClass("ui-dialog-content")||$(event.target).closest("#"+t.ID_CARD_DIALOG_ID).length||$(event.target).is("#"+t.ID_CARD_DIALOG_ID)||this._element.dialog("close")},t.prototype._onIdCardClose=function(){this._options.focusElementOnClose&&this._options.focusElementOnClose.is(":visible")?this._options.focusElementOnClose.focus():this._previousFocusedElement.focus();this._unbind($("body"),"mousedown",this._onIdCardBlurDelegate,!0);this._element.dialog("destroy")},t.prototype._onKeyDown=function(n){if(!n||!n.keyCode)return!0;switch(n.keyCode){case g.UP:return this._isMembersListVisible()?this._prevItem():!0;case g.DOWN:return this._isMembersListVisible()?this._nextItem():!0;case g.PAGE_UP:return this._isMembersListVisible()?this._prevPage():!0;case g.PAGE_DOWN:return this._isMembersListVisible()?this._nextPage():!0;case g.ENTER:case g.SPACE:return this._isMembersListVisible()&&this._selectedIndex!=it.SelectNone?(n.stopPropagation(),$("li",this._$groupMembersContainer).eq(this._selectedIndex).click(),!1):($(".identity-picker-idcard-tab").is($(document.activeElement)[0])&&$(".identity-picker-idcard-tab").hasClass("identity-picker-idcard-unselected-tab")&&$(".identity-picker-idcard-tab").click(),!0);case g.ESCAPE:case g.LEFT:return n.stopPropagation(),this._element.dialog("close"),!1;case g.TAB:var r=$(":tabbable",this),t=r.filter(":first"),i=r.filter(":last");return i.length&&n.target===i[0]&&!n.shiftKey?(t.focus(),!1):t.length&&n.target===t[0]&&n.shiftKey?(i.focus(),!1):!0;default:return!0}},t.prototype._createItem=function(n){var i=this,e,h,s,f,u,c;return n?(h=o.ServiceHelpers.getDefaultIdentityImage(n),n.image&&(e=n.image),s=y.decodeHtmlSpecialChars(nt.getDisplayName(n)),f=y.decodeHtmlSpecialChars(nt.getSignInAddress(n)),f=y.isGuid(f)?"":f,u=$("<li>").attr("title",y.htmlEncodeJavascriptAttribute(s)).attr("role","option").attr("id",r.getId().toString()).height(40),d.createImgElement(h,e,"identity-picture small",n.entityId).addClass(e&&e.trim()?"":"hidden").appendTo(u),c=$("<div>").addClass("item-text-container").append($("<div>").addClass("title large").text(s)).append($("<div>").addClass("subtitle large").text(f)).appendTo(u),c.css("max-width",this._element.width()-t.MEMBERS_TAB_LEFT_PADDING_PX-t.IMAGE_MARGINS_PX-d.getSizePx(tt.Large)-d.IDENTITY_ITEM_BUFFER_WIDTH_PX),u.click(k(this,function(f){f.stopPropagation();var e={identity:n,anchor:u,leftValue:f.pageX!==undefined?f.pageX:u.offset().left,topValue:f.pageY!==undefined?f.pageY:u.offset().top,operationScope:i._operationScope,identityType:i._identityType,httpClient:i._options.httpClient?i._options.httpClient:null,focusElementOnClose:i._options.focusElementOnClose&&i._options.focusElementOnClose.is(":visible")?i._options.focusElementOnClose:i._previousFocusedElement};r.Enhancement.enhance(t,"<div/>",e)})),u):null},t.prototype._renderMembersList=function(){var n=this,r=function(){return n._scrollTimeout!==null&&(clearTimeout(n._scrollTimeout),n._scrollTimeout=null),n._scrollTimeout=setTimeout(k(n,n._loadNextPage),100),!1},t,i;if(this._$groupMembersContainer.empty(),this._$groupMembersContainer.addClass("items"),this._$groupMembersContainer.scroll(k(this,r)),this._groupMembers.length==0)this._numItemsDisplayed=0;else for(this._numItemsDisplayed=Math.min(this._groupMembers.length,this._pageSize),t=0;t<Math.min(this._groupMembers.length,this._pageSize);t++)i=this._createItem(this._groupMembers[t]),i&&this._$groupMembersContainer.append(i)},t.prototype._loadNextPage=function(){var t=this._$groupMembersContainer.scrollTop()+this._$groupMembersContainer.outerHeight()>=this._$groupMembersContainer[0].scrollHeight-5,n;if(t){for(n=this._numItemsDisplayed;n<this._numItemsDisplayed+Math.min(this._groupMembers.length-this._numItemsDisplayed,this._pageSize);n++)this._$groupMembersContainer.append(this._createItem(this._groupMembers[n]));this._numItemsDisplayed+=Math.min(this._groupMembers.length-this._numItemsDisplayed,this._pageSize)}this._scrollTimeout!==null&&(clearTimeout(this._scrollTimeout),this._scrollTimeout=null)},t.prototype._nextItem=function(){return this._selectedIndex===this._groupMembers.length-1?this._setSelectedIndex(it.SelectFirstItem):this._selectedIndex<this._groupMembers.length-1&&this._setSelectedIndex(this._selectedIndex+1),!1},t.prototype._prevItem=function(){return this._selectedIndex===-1&&this._groupMembers&&this._groupMembers.length?this._setSelectedIndex(this._groupMembers.length-1):this._selectedIndex>0&&this._setSelectedIndex(this._selectedIndex-1,p.Positioning.VerticalScrollBehavior.Top),!1},t.prototype._nextPage=function(){var n=-1;return this._loadNextPage(),this._selectedIndex<this._groupMembers.length-1&&this._selectedIndex!==-1&&(n=this._selectedIndex+this._pageSize),this._setSelectedIndex(n<this._groupMembers.length?n:this._groupMembers.length-1,p.Positioning.VerticalScrollBehavior.Top),!1},t.prototype._prevPage=function(){var n=0;return this._selectedIndex===-1?n=this._groupMembers.length-this._pageSize:this._selectedIndex>0&&(n=this._selectedIndex-this._pageSize),this._setSelectedIndex(n>=0?n:it.SelectFirstItem,p.Positioning.VerticalScrollBehavior.Top),!1},t.prototype._setMemberActiveDescendant=function(n){this._$groupMembersContainer.attr("aria-activedescendant",n)},t.prototype._setSelectedIndex=function(n,t){t===void 0&&(t=p.Positioning.VerticalScrollBehavior.Bottom);var i=$("li",this._$groupMembersContainer),r=n!==null&&n!==undefined&&i.length&&i.eq(n).length&&(this._selectedIndex!==n||!i.eq(this._selectedIndex).hasClass("selected"));r?(this._selectedIndex=n,i.removeClass("selected"),i.eq(this._selectedIndex).addClass("selected"),this._setMemberActiveDescendant(i.eq(this._selectedIndex).attr("id")),p.Positioning.scrollIntoViewVertical(i.eq(n),t)):$.isNumeric(n)&&(this._selectedIndex=n)},t.IDCARD_LOADED_EVENT="idcard-finished-loading",t.MAX_HEIGHT=240,t.IMAGE_MARGINS_PX=8,t.MEMBERS_TAB_LEFT_PADDING_PX=11,t.CSS_ID_CARD_LIST="identity-picker-idcard-list",t.CSS_ID_CARD_MEMBERS_DROPDOWN=rt.CSS_DROPDOWN_BASE,t.JQUERY_UI_DIALOG_CLASS=".ui-dialog",t.ID_CARD_DIALOG_ID="idcard-dialog",t}(r.Control);t.IdCardDialog=st,function(n){n[n.SelectNone=-1]="SelectNone";n[n.SelectFirstItem=0]="SelectFirstItem"}(it||(it={}));g=p.KeyCode;at=function(n){function t(t,i){if(i===void 0&&(i=!1),n.call(this,t),this._resolvedIEntity=null,this._loadOnCreate=!1,this._previousInput="",this._isSearchEverIssued=!1,this._readOnlyMode=!1,this._showMruExpander=!1,this._queryTokensRequested={},!i){var r=t;r.dropdownContainer=k(this,function(){return $("body")});this.initializeOptionsInternal(r)}}return __extends(t,n),t.prototype.initializeOptionsInternal=function(n){if(this._identityType=n.identityType?n.identityType:{User:!0},this._operationScope=n.operationScope?n.operationScope:{IMS:!0},this._size=n.size!=null?n.size:tt.Medium,this._dropdownContainerDelegate=n.dropdownContainer,this._preDropdownRender=this._options.callbacks&&n.callbacks.preDropdownRender?n.callbacks.preDropdownRender:null,this._loadOnCreate=n.loadOnCreate?n.loadOnCreate:!1,n.placeholderText&&n.placeholderText.trim())this._placeholderText=n.placeholderText;else{var t=o.ServiceHelpers.getIdentityTypeList(this._identityType);this._placeholderText=this._generatePlaceHolder(t)}this._controlLoaded=null},t.prototype.initialize=function(){var i=this,u,e,o,s;n.prototype.initialize.call(this);u=this._options.items;this._selectedItems=[];this._unresolvedItems=[];this._$currentlyFocusedItem=null;this._$container=this._element.parent();this._controlWidth=Math.max(this._$container.innerWidth(),t.DEFAULT_WIDTH);this._element.addClass("identity-picker-search-box");this._element.height(d.getSizePx(this._size)+t.OUTER_PADDING_PX);e=function(n){$(n.target).hasClass("identity-picker-input")||$(n.target).hasClass("identity-picker-search-multiple-name")||$(n.target).hasClass(t.CSS_SEARCH_MRU_TRIANGLE)||i.focusOnSearchInput()};this._bind(this._element,"click",k(this,e),!0);this._bind(this._element,"remove",k(this,this.dispose));this._$input=$("<input>").attr("type","text").attr("autocomplete","off").attr("placeholder",this._placeholderText).addClass("identity-picker-input").attr("role","combobox").attr("aria-autocomplete","list").attr("aria-label",this._placeholderText);this._options.elementId&&this._$input.attr("id",this._options.elementId);this._$input.appendTo(this._element);d.styleElementBySize(this._$input,this._size,!0);this._showMruExpander=this._options.showMruTriangle?!0:!1;this._isReadOnly()&&(this._showMruExpander=!1);this._showMruExpander&&(this._$mruTriangle=$("<span>").addClass(t.CSS_SEARCH_MRU_TRIANGLE).addClass("bowtie-icon bowtie-triangle-down").appendTo(this._element),this._bind(this._$mruTriangle,"mousedown",k(this,function(n){i._onMruTriangleMousedown(n)}),!0),this._bind(this._$mruTriangle,"click",k(this,function(n){i._onMruTriangleClick(n)}),!0));this._recalculateInputWidth();this._bind($(window),"resize",k(this,function(){i._recalculateInputWidth()}),!0);this._bind(this._$input,"focus",k(this,function(){i._$currentlyFocusedItem=null}),!0);this._options.multiIdentitySearch&&(this._options.highlightResolved=!1,this._options.watermark=null);this._options.highlightResolved||(this._options.watermark=null);this._options.watermark&&this._showWatermark();this._setShowContactCard();this._bind(this._$input,"keyup",k(this,this._onInputKeyUp));this._bind(this._element,"keydown",k(this,this._onInputKeyDown));this._bind(this._$input,"blur",k(this,this._onInputBlur));this._bind(this._$input,"input",k(this,this._onInputChange));this._bind(this._$input,"click",k(this,this._onInputClick));this._externalEventDelegate=k(this,this._onInputBlur);this._dropdownShowEventDelegate=k(this,this._attachHandlersOnShowDropdown);this._dropdownHideEventDelegate=k(this,this._detachHandlersOnHideDropdown);this._updateActiveDescendantIdEventDelegate=k(this,this._updateActiveDescendantId);f.getService().attachEvent(rt.SHOW_DROPDOWN_EVENT_INTERNAL,this._dropdownShowEventDelegate);f.getService().attachEvent(rt.HIDE_DROPDOWN_EVENT_INTERNAL,this._dropdownHideEventDelegate);o=this._dropdownContainerDelegate();this._identityPickerDropdownUniqueId=d.getRandomString();s={pageSize:this._options.pageSize,onItemSelect:k(this,function(n){if(i._resolveItem(n),i.focusOnSearchInput(),i._options.callbacks&&i._options.callbacks.onItemSelect)i._options.callbacks.onItemSelect(n)}),identityType:this._identityType,operationScope:this._operationScope,httpClient:this._options.httpClient?this._options.httpClient:null,showContactCard:this._showContactCard,showMru:this._isShowMruEnabledInDropdown(),preDropdownRender:this._preDropdownRender,loadOnCreate:this._loadOnCreate,extensionData:this._options.extensionData,size:this._options.dropdownSize!=null?this._options.dropdownSize:tt.Large,width:this._options.dropdownWidth,focusElementOnContactCardClose:this._$input,eventOptions:{uniqueId:this._identityPickerDropdownUniqueId},alignment:{positioningElement:this._$container},consumerId:this._options.consumerId};this._identityPickerDropdown=r.create(rt,o,s);this._attachHandlersOnShowDropdown({uniqueId:this._identityPickerDropdownUniqueId});this._$input.attr("aria-owns",this._identityPickerDropdown.getId());u&&((typeof u=="string"||u instanceof String)&&u?this.setEntities([],u.trim().split(";")):u instanceof Array&&u.length>0&&this.setEntities(u,[]));this._loadOnCreate&&this.load()},t.prototype.load=function(){var n=this;return this._controlLoaded?this._controlLoaded.promise:(this._controlLoaded=b.defer(),this._identityPickerDropdown.load().then(k(this,function(){n._controlLoaded.resolve(!0)}),k(this,function(){n._controlLoaded.resolve(!1)})))},t.prototype.getIdentitySearchResult=function(){return{resolvedEntities:this._selectedItems,unresolvedQueryTokens:this._unresolvedItems}},t.prototype.clear=function(){this._clearSearchControl();!this._options.multiIdentitySearch&&this._options.watermark&&this._showWatermark()},t.prototype.isDropdownVisible=function(){return this._identityPickerDropdown.isVisible()},t.prototype.isDropdownFiltered=function(){return this._identityPickerDropdown.isFiltered()},t.prototype.addIdentitiesToMru=function(n){var t=n.map(function(n){if(nt.isDirectoryEntityType(n))return n.localId});this._identityPickerDropdown.addIdentitiesToMru(t)},t.prototype.setEntities=function(n,t,i){var e=n?n.length:0,o=t?t.length:0,h,c,f,r,l,s,u;if(e+o!=0){if(!this._options.multiIdentitySearch&&e+o>1){h={source:"setEntities",message:"Cant set more than one entity for a single select control"};throw h;}if(c={UID:!0},o>0){if(this._options.showTemporaryDisplayName){this._options.watermark&&$(".identity-picker-resolved:has(> .identity-picker-watermark-name)",this._element).remove();f=[];for(u in t)r=t[u].trim(),r.charAt(r.length-1)==">"&&r.indexOf("<")>=0?(l=r.substring(0,r.indexOf("<")-1).trim(),s=r.substring(r.indexOf("<")+1,r.length-1).trim(),f.push(s),this._createTemporaryItem(l,s.toLowerCase())):f.push(r);t=f}this._resolveInputToIdentities(t.join(";"),c,i)}if(e>0)for(u in n)n[u]&&this._resolveItem(n[u])}},t.prototype.getDropdownPrefix=function(){return this._identityPickerDropdown.getPrefix()},t.prototype.showMruDropdown=function(){this._showMruExpander&&this._$mruTriangle.trigger("click")},t.prototype.focusOnSearchInput=function(){if(this._$currentlyFocusedItem=null,this._$input.is(":visible"))this._$input.focus();else{var n=$(".identity-picker-resolved:visible",this._element);n.length<=0?(this._$input.show(),this._$input.focus()):($(n[0]).focus(),this._$currentlyFocusedItem=$(n[0]))}this._$container.triggerHandler("focus")},t.prototype.enableReadOnlyMode=function(){this._readOnlyMode=!0;this._showMruExpander=!1;this._hideMruTriangle();this._$container.addClass("identity-picker-readonly");$(".identity-picker-resolved-name",this._element).removeAttr("tabindex");$(".identity-picker-watermark-name",this._element).removeAttr("tabindex");$(".identity-picker-resolved-close",this._element).hide();$(".identity-picker-resolved",this._element).removeAttr("aria-haspopup");$(".identity-picker-resolved",this._element).removeAttr("role");$(".identity-picker-resolved",this._element).removeAttr("aria-label");this._$input.removeAttr("role")},t.prototype.disableReadOnlyMode=function(){this._readOnlyMode=!1;this._showMruExpander=this._options.showMruTriangle?!0:!1;this._showMruTriangle();this._$container.removeClass("identity-picker-readonly");$(".identity-picker-resolved-name",this._element).attr("tabindex","0");$(".identity-picker-watermark-name",this._element).attr("tabindex","0");$(".identity-picker-resolved-close",this._element).show();this._showContactCard&&!this._options.highlightResolved&&$(".identity-picker-resolved",this._element).attr("aria-haspopup","true");this._$input.attr("role","combobox");this._setResolvedItemRole($(".identity-picker-resolved",this._element),$(".identity-picker-resolved-name",this._element).text())},t.prototype.dispose=function(){this._detachHandlersOnHideDropdown({uniqueId:this._identityPickerDropdownUniqueId});this._dropdownShowEventDelegate&&f.getService().detachEvent(rt.SHOW_DROPDOWN_EVENT_INTERNAL,this._dropdownShowEventDelegate);this._dropdownHideEventDelegate&&f.getService().detachEvent(rt.HIDE_DROPDOWN_EVENT_INTERNAL,this._dropdownHideEventDelegate);this._identityPickerDropdown.dispose();n.prototype.dispose.call(this)},t.prototype._getEntityOperationsFacade=function(){return this._entityOperationsFacade||(this._entityOperationsFacade=l.getService(ot)),this._entityOperationsFacade},t.prototype._isReadOnly=function(){return this._readOnlyMode},t.prototype._hideMruTriangle=function(){this._$mruTriangle&&this._$mruTriangle.addClass("identity-picker-element-hide")},t.prototype._showMruTriangle=function(){this._showMruExpander&&this._$mruTriangle&&this._$mruTriangle.removeClass("identity-picker-element-hide")},t.prototype._resetSearchControl=function(n,t){n===void 0&&(n=!0);t===void 0&&(t=!0);this._options.watermark?n?this._showWatermark():this._clearWatermark():(this._$input.show(),this._recalculateInputWidth());this._showMruTriangle();t&&this.focusOnSearchInput()},t.prototype._clearSearchControl=function(){$(".identity-picker-resolved",this._element).remove();this._queryTokensRequested={};this._options.multiIdentitySearch||this._resetSearchControl(!1,!1);this._selectedItems=[];this._unresolvedItems=[];this._$currentlyFocusedItem=null;this._setInputText("");this._fireInvalidInput()},t.prototype._showAllMruInDropdownWithoutDefaultSelection=function(n){n===void 0&&(n=!0);this._showAllMruInDropdown(n,!1)},t.prototype._showAllMruInDropdown=function(n,t){var i=this,r;n===void 0&&(n=!0);t===void 0&&(t=!0);r=function(t){i._element&&((t&&t.length>0||n)&&i._showDropdown(),i._unbind(i._$input,"input"),i.focusOnSearchInput(),v.delay(i,0,function(){i._bind(i._$input,"input",k(i,i._onInputChange))}))};this._isSearchEverIssued=!0;this._identityPickerDropdown.showAllMruIdentities(t).then(r)},t.prototype._showProgressCursor=function(){this._fire(t.SEARCH_STARTED_EVENT,null);$(".identity-picker-input",this._element).css("cursor","progress")},t.prototype._stopProgressCursor=function(){this._fire(t.SEARCH_FINISHED_EVENT,null);$(".identity-picker-input",this._element).css("cursor","text")},t.prototype._fireInvalidInput=function(){this._fire(t.INVALID_INPUT_EVENT,null)},t.prototype._fireValidInput=function(){this._fire(t.VALID_INPUT_EVENT,null)},t.prototype._fireRemoveResolvedInput=function(){this._fire(t.RESOLVED_INPUT_REMOVED_EVENT,null)},t.prototype._fireDataSourceFallback=function(){this._fire(t.DATA_SOURCE_FALLBACK_EVENT,null)},t.prototype._fireDataSourceReevaluate=function(){this._fire(t.DATA_SOURCE_REEVALUATE_EVENT,null)},t.prototype._updateActiveDescendantId=function(n){n&&n.uniqueId&&this._identityPickerDropdownUniqueId&&this._identityPickerDropdownUniqueId===n.uniqueId&&this._$input.attr("aria-activedescendant",n.activeDescendantId)},t.prototype._isShowMruEnabledInDropdown=function(){return this._options.showMru||this._showMruExpander},t.prototype._attachHandlersOnShowDropdown=function(n){n&&n.uniqueId&&this._identityPickerDropdownUniqueId&&this._identityPickerDropdownUniqueId===n.uniqueId&&(this.getElement()&&this._bind(this.getElement().parents(),"scroll resize",this._externalEventDelegate),f.getService().attachEvent(t.DIALOG_MOVE_EVENT,this._externalEventDelegate),f.getService().attachEvent(rt.UPDATE_ACTIVE_DESCENDANT_ID,this._updateActiveDescendantIdEventDelegate))},t.prototype._detachHandlersOnHideDropdown=function(n){n&&n.uniqueId&&this._identityPickerDropdownUniqueId&&this._identityPickerDropdownUniqueId===n.uniqueId&&(this.getElement()&&this._unbind(this.getElement().parents(),"scroll resize",this._externalEventDelegate),f.getService().detachEvent(t.DIALOG_MOVE_EVENT,this._externalEventDelegate),f.getService().detachEvent(rt.UPDATE_ACTIVE_DESCENDANT_ID,this._updateActiveDescendantIdEventDelegate))},t.prototype._hideDropdown=function(n){this._detachHandlersOnHideDropdown({uniqueId:this._identityPickerDropdownUniqueId});this._identityPickerDropdown.hide(n);this._$input.removeAttr("aria-activedescendant")},t.prototype._showDropdown=function(){this._attachHandlersOnShowDropdown({uniqueId:this._identityPickerDropdownUniqueId});this._identityPickerDropdown.show()},t.prototype._compareInputOnInputChangeEvent=function(n){return n=n?n:"",this._previousInput==n},t.prototype._setInputText=function(n){n=n?n:"";this._$input.val(n);this._previousInput=n},t.prototype._resetPreviousInput=function(){this._previousInput=""},t.prototype._onInputChange=function(n){var t=this.getInputText(),i,r,u,f;if(this._compareInputOnInputChangeEvent(t))return!0;if(t=t?t:"",this._previousInput=t,this._resolvedIEntity=null,this._recalculateInputWidth(),t&&t.indexOf(";")<=0?this._fireInvalidInput():this._fireInputValidityEvent(),!t||!this._options.multiIdentitySearch||t.indexOf(";")<0){if(this._isSearchEverIssued=!0,t&&!this._options.multiIdentitySearch){i=t.split(";");r="";for(u in i)if(f=i[u]?i[u].trim():"",f){r=f;break}t=r}return this._identityPickerDropdown.getIdentities(t),!0}this._resolveInputToIdentities(this.getInputText());n.stopPropagation()},t.prototype._onInputClick=function(n){var t=this.getInputText();t&&(this._isSearchEverIssued?this._showDropdown(n):this._options.showMru&&this._showAllMruInDropdown(!1))},t.prototype._onMruTriangleMousedown=function(n){n.preventDefault();n.stopPropagation()},t.prototype._onMruTriangleClick=function(n){if(this._isReadOnly())return!1;this._identityPickerDropdown.isVisible()?this._hideDropdown(n):this._showAllMruInDropdownWithoutDefaultSelection();this.focusOnSearchInput();n.stopPropagation()},t.prototype._isDropdownHovered=function(){return this._identityPickerDropdown.getElement()&&$(this._identityPickerDropdown.getElement()).filter(":hover").length>0},t.prototype._isContactCardHovered=function(){return $(".idcard-dialog").length>0&&$(".idcard-dialog").filter(":hover").length>0},t.prototype._onInputBlur=function(n){this._isDropdownHovered()||$(".idcard-dialog").length||$(".idcard-dialog-content").length||!this._$input.is(":visible")||(this._identityPickerDropdown.isVisible()&&this._hideDropdown(n),this._options.highlightResolved&&(this._resolvedIEntity?this._resolveItem(this._resolvedIEntity):this._options.watermark&&!this.getInputText()&&(this._showWatermark(),this._showMruTriangle())),this._options.callbacks&&this._options.callbacks.onInputBlur&&this._options.callbacks.onInputBlur())},t.prototype._focusOnResolvedItem=function(n){n.is(":visible")?(n.focus(),this._$container.triggerHandler("focus")):this.focusOnSearchInput()},t.prototype._onInputKeyDown=function(n){var i,t;if(!n||this._isReadOnly())return!0;if(n.keyCode===g.ESCAPE&&this.isDropdownVisible()&&n.stopPropagation(),n.keyCode===g.UP)return this._identityPickerDropdown.isVisible()&&this._identityPickerDropdown.handleKeyEvent(n),n.preventDefault(),!0;if(n.keyCode===g.DOWN)return this._identityPickerDropdown.isVisible()?this._identityPickerDropdown.handleKeyEvent(n):this._isShowMruEnabledInDropdown()?this._showAllMruInDropdown():this._showDropdown(n),n.preventDefault(),!0;if(n.keyCode===g.TAB)return!n.shiftKey&&this._identityPickerDropdown.isVisible()&&(this._resolveSelectedItem(!0),this._options.callbacks&&this._options.callbacks.onInputBlur&&this._options.callbacks.onInputBlur()),!0;if(n.keyCode===g.ENTER)return this._identityPickerDropdown.isVisible()?(this._resolveSelectedItem(),this.focusOnSearchInput(),!1):this._options.multiIdentitySearch&&this._$currentlyFocusedItem?(this._$currentlyFocusedItem.click(),!1):!0;if(n.keyCode===g.RIGHT&&this._showContactCard&&this._identityPickerDropdown.isVisible()&&this._identityPickerDropdown.getSelectedItem()&&this._$input[0].selectionEnd==this._$input.val().length||n.keyCode===g.DELETE&&this._isShowMruEnabledInDropdown()&&this._identityPickerDropdown.isVisible()&&(i=this._identityPickerDropdown.getSelectedItem(),i&&i.isMru&&nt.isDirectoryEntityType(i)))return this._identityPickerDropdown.handleKeyEvent(n),n.preventDefault(),!1;if(!this._$currentlyFocusedItem&&this._$input[0]===document.activeElement&&this._$input[0].selectionStart>0)return!0;if(this._options.callbacks&&this._options.callbacks.onKeyPress)this._options.callbacks.onKeyPress(n.keyCode);switch(n.keyCode){case g.LEFT:return this._options.multiIdentitySearch?this._$currentlyFocusedItem&&this._$currentlyFocusedItem.prev(".identity-picker-resolved")[0]?(this._$currentlyFocusedItem.blur(),this._$currentlyFocusedItem=this._$currentlyFocusedItem.prev(".identity-picker-resolved"),this._focusOnResolvedItem(this._$currentlyFocusedItem),!1):!this._$currentlyFocusedItem&&(this._selectedItems&&this._selectedItems.length>0||this._unresolvedItems&&this._unresolvedItems.length>0)&&this._$input[0]===document.activeElement&&!this._$input[0].selectionStart?(this._$currentlyFocusedItem=this._$input.prev(".identity-picker-resolved"),this._focusOnResolvedItem(this._$currentlyFocusedItem),!1):!0:!0;case g.RIGHT:return this._options.multiIdentitySearch?this._$currentlyFocusedItem?(this._$currentlyFocusedItem.blur(),this._$currentlyFocusedItem.next(".identity-picker-resolved")[0]?(this._$currentlyFocusedItem=this._$currentlyFocusedItem.next(".identity-picker-resolved"),this._focusOnResolvedItem(this._$currentlyFocusedItem)):this.focusOnSearchInput(),!1):!0:!0;case g.BACKSPACE:return this._options.multiIdentitySearch?this._$currentlyFocusedItem?(t=this._$currentlyFocusedItem,this._$currentlyFocusedItem.prev(".identity-picker-resolved")[0]?(this._$currentlyFocusedItem=this._$currentlyFocusedItem.prev(".identity-picker-resolved"),this._focusOnResolvedItem(this._$currentlyFocusedItem)):this._$currentlyFocusedItem.next(".identity-picker-resolved")[0]?(this._$currentlyFocusedItem=this._$currentlyFocusedItem.next(".identity-picker-resolved"),this._focusOnResolvedItem(this._$currentlyFocusedItem)):this.focusOnSearchInput(),this._removeFromResolved(t.attr("data-signin")),this._removeFromUnresolved(t.attr("data-signin")),t.remove(),this._recalculateInputWidth(),!1):(this._selectedItems&&this._selectedItems.length>0||this._unresolvedItems&&this._unresolvedItems.length>0)&&this._$input[0]===document.activeElement&&!this._$input[0].selectionStart?(this._removeFromResolved(this._$input.prev(".identity-picker-resolved").attr("data-signin")),this._removeFromUnresolved(this._$input.prev(".identity-picker-resolved").attr("data-signin")),this._$input.prev(".identity-picker-resolved").remove(),this._recalculateInputWidth(),!1):!0:this._selectedItems&&this._selectedItems.length>0?(this._removeFromResolved(this._$input.prev(".identity-picker-resolved").attr("data-signin")),this._$input.prev(".identity-picker-resolved").remove(),this._resetSearchControl(),!1):!0;case g.DELETE:return this._options.multiIdentitySearch?this._$currentlyFocusedItem?(t=this._$currentlyFocusedItem,this._$currentlyFocusedItem.next(".identity-picker-resolved")[0]?(this._$currentlyFocusedItem=this._$currentlyFocusedItem.next(".identity-picker-resolved"),this._focusOnResolvedItem(this._$currentlyFocusedItem)):this.focusOnSearchInput(),this._removeFromResolved(t.attr("data-signin")),this._removeFromUnresolved(t.attr("data-signin")),t.remove(),this._recalculateInputWidth(),!1):!0:this._selectedItems&&this._selectedItems.length>0?(this._removeFromResolved(this._$input.prev(".identity-picker-resolved").attr("data-signin")),this._$input.prev(".identity-picker-resolved").remove(),this._resetSearchControl(),!1):!0;case g.SPACE:return this._options.multiIdentitySearch&&this._$currentlyFocusedItem?(this._$currentlyFocusedItem.click(),!1):!0;default:return!0}},t.prototype._fireInputValidityEvent=function(){!this.getInputText().length&&this._selectedItems&&this._selectedItems.length>0&&(!this._unresolvedItems||!this._unresolvedItems.length)?this._fireValidInput():this._fireInvalidInput()},t.prototype._resolveSelectedItem=function(n){if(n===void 0&&(n=!1),this._identityPickerDropdown.isVisible()){var t=this._identityPickerDropdown.getSelectedItem();if(t&&(this._resolveItem(t,!0,null,n),this._options.callbacks&&this._options.callbacks.onItemSelect))this._options.callbacks.onItemSelect(t)}},t.prototype._onInputKeyUp=function(n){return n.keyCode!==g.DOWN&&n.keyCode!==g.UP&&n.keyCode!==g.RIGHT&&this._identityPickerDropdown.handleKeyEvent(n),!0},t.prototype._removeFromUnresolved=function(n){for(var t=this._unresolvedItems.indexOf(n.toLowerCase());t>=0;)this._unresolvedItems.splice(t,1),t=this._unresolvedItems.indexOf(n.toLowerCase());this._fireInputValidityEvent()},t.prototype._removeFromResolved=function(n){function i(t){var i=nt.getUniqueIdentifierForDisambiguation(t);return i.toLowerCase()===n.toLowerCase()?($(".idcard-dialog").each(function(){if($(this).is(":visible")&&$(this).attr("data-prefix")&&n.toLowerCase().indexOf($(this).attr("data-prefix").toLowerCase())===0)return $(".ui-dialog-content",$(this)).dialog("close"),!1}),!1):!0}var t=this._selectedItems.filter(i);t.length!=this._selectedItems.length&&(this._selectedItems=t,this._fireInputValidityEvent(),this._fireRemoveResolvedInput())},t.prototype.getInputText=function(){return this._$input.val().trim()},t.prototype._resolveInputToIdentities=function(n,t,i){function p(n){if(this._element){if(!n||!n.queryToken||!n.identities){k(this,c)();return}this._fireDataSourceReevaluate();n.identities.length!=1?this._fireInvalidInput():n.queryToken.toLowerCase().trim()in this._queryTokensRequested&&this._resolveItem(n.identities[0],!1,n.queryToken);this._hideDropdown();this._stopProgressCursor()}}function c(n){this._element&&(this._stopProgressCursor(),this._fireDataSourceFallback(),this._fireValidInput());n&&u.logError("_resolveInputToIdentities/getIdentitiesErrorCallback:"+JSON.stringify(n))}var v=this,l=n.split(o.ServiceHelpers.GetIdentities_Prefix_Separator),r=[],h,f,a,s,y,w;for(f in l)h=l[f]?l[f].trim():"",h.length>0&&(r.push(h),this._unresolveItem(h));this._options.multiIdentitySearch||(this._queryTokensRequested={});for(f in r)this._queryTokensRequested[r[f].toLowerCase().trim()]=!0;if(a=r.length,a)for(this._showProgressCursor(),s=0;s<=a/50;s++)y={identityServiceOptions:{operationScope:i?i:this._operationScope,identityType:this._identityType,httpClient:this._options.httpClient,extensionData:this._options.extensionData},identityExtensionOptions:{consumerId:this._options?this._options.consumerId:e.ConsumerId.UnknownConsumer},prefix:r.slice(50*s,50*s+50).join(";"),queryTypeHint:t,sources:[ut.Directory]},w=this._getEntityOperationsFacade().search(y).then(function(n){for(var t in n.queryTokenResponse)n.queryTokenResponse[t].then(k(v,p),k(v,c))},c)},t.prototype._recalculateInputWidth=function(){if(this._$input)if(this._controlWidth=Math.max(this._$container.width(),t.DEFAULT_WIDTH),this._$input.prev(".identity-picker-resolved")[0]){var n=this._$container.offset().left+Math.max(this._$container.innerWidth(),t.DEFAULT_WIDTH)-this._$input.prev(".identity-picker-resolved").offset().left-this._$input.prev(".identity-picker-resolved").innerWidth()-parseInt(this._$input.prev(".identity-picker-resolved").css("margin-right"))-parseInt(this._$container.css("padding-right"))-parseInt(this._$container.css("border-right-width"))-t.OUTER_PADDING_PX-d.SCROLL_BAR_WIDTH_PX-(this._showMruExpander?t.TRIANGLE_WIDTH_PX:0),i=this._$input.attr("placeholder").length;n>(i?i:15)*6?this._$input.width(n):this._$input.width(this._controlWidth-t.OUTER_PADDING_PX-d.SCROLL_BAR_WIDTH_PX-(this._showMruExpander?t.TRIANGLE_WIDTH_PX:0))}else this._$input.width(this._controlWidth-t.OUTER_PADDING_PX-(this._showMruExpander?t.TRIANGLE_WIDTH_PX:0))},t.prototype._replaceAndCleanup=function(n){for(var i=!1,t=new RegExp("(( *;+ *)+|^ *)("+n.replace(/[.^$*+?()[{\\|\]-]/g,"\\$&")+")(( *;+ *)+| *$)","gi");this.getInputText().search(t)>=0;)this._setInputText(this.getInputText().replace(t,";")),i=!0;return t=new RegExp("^( *;+ *)+$"),this.getInputText().search(t)||this._setInputText(""),i},t.prototype._findInSelectedItems=function(n){var i=-1,t,r;if(!n)return i;for(t=0,r=this._selectedItems.length;t<r;t++)if(this._selectedItems[t].entityId===n.entityId){i=t;break}return i},t.prototype._showIdCardDialog=function(n){if(this._showContactCard){var t={identity:n.identity,anchor:n.anchor,leftValue:n.leftValue,topValue:n.topValue,operationScope:this._operationScope,identityType:this._identityType,httpClient:this._options.httpClient?this._options.httpClient:null,consumerId:this._options.consumerId};r.Enhancement.enhance(st,"<div/>",t)}},t.prototype._clearWatermark=function(){this._identityPickerDropdown&&(this._identityPickerDropdown.isVisible()&&this._hideDropdown(),this._identityPickerDropdown.reset());this._$input.hide();this._setInputText("")},t.prototype._showWatermark=function(){var n=this,l=this._isControlInFocus(),h,c,f,u,e;this._controlWidth=Math.max(this._$container.width(),t.DEFAULT_WIDTH);this._clearWatermark();var r=this._options.watermark,s=y.decodeHtmlSpecialChars(nt.getDisplayName(r)),i=$("<span>").addClass("identity-picker-resolved").attr("title",y.htmlEncodeJavascriptAttribute(s));i.attr("tabindex","-1");i.blur(k(this,function(t){n._isDropdownHovered()||n._isContactCardHovered()||!i.is(":visible")||(n._identityPickerDropdown.isVisible()&&n._hideDropdown(t),n._options.callbacks&&n._options.callbacks.onInputBlur&&n._options.callbacks.onInputBlur())}));d.styleElementBySize(i,this._size,!0);c=o.ServiceHelpers.getDefaultIdentityImage(r);r.image&&(h=r.image);f=d.createImgElement(c,h,"user-picture-resolved",r.entityId);d.styleElementBySize(f,this._size,!1);u=$("<span>").addClass("identity-picker-watermark-name").text(s);i.append(f).append(u).insertBefore(this._$input);i.width(this._controlWidth-t.OUTER_PADDING_PX-(this._showMruExpander?t.TRIANGLE_WIDTH_PX:0));u.attr("tabindex","0");e=function(t){t.stopPropagation();i.remove();n._$input.show();n._showMruTriangle();n._recalculateInputWidth();n.focusOnSearchInput();n._setInputText("")};this._bind(u,"focus",k(this,function(t){if(n._isReadOnly())return!1;e(t)}),!0);this._bind(i,"mousedown",k(this,function(t){if(n._isReadOnly())return!1;t.preventDefault();e(t);n._showAllMruInDropdown(!1)}),!0);l&&this.focusOnSearchInput()},t.prototype._createTemporaryItem=function(n,t){var i=$("<span>").addClass("identity-picker-resolved identity-picker-temp").attr("title",y.htmlEncodeJavascriptAttribute(n)).attr("data-signin",d.replaceBackslash(t)).attr("tabindex","-1"),u,r;d.styleElementBySize(i,this._size,!0);u=d.createImgElement(o.ServiceHelpers.DefaultUserImage,"","user-picture-resolved");d.styleElementBySize(u,this._size,!1);r=$("<span>").addClass("identity-picker-resolved-name").text(y.decodeHtmlSpecialChars(n));this._options.multiIdentitySearch?(i.addClass("identity-picker-resolved-bg"),r.addClass("identity-picker-search-multiple-name").css("max-width",this._getItemNameContainerMaxWidth([]))):(i.addClass("identity-picker-resolved-single-search"),$(".identity-picker-resolved",this._element).remove());i.append(u).append(r).insertBefore(this._$input);r.attr("tabindex","0");this._options.multiIdentitySearch?this._recalculateInputWidth():this._$input.hide();this._isControlInFocus()&&this.focusOnSearchInput()},t.prototype._isControlInFocus=function(){var n=$(document.activeElement);return n.length>0&&(this._element.is(n[0])||this._element.has(n[0]).length>0)},t.prototype._createResolvedItem=function(n,t){var i=$("<span>").addClass("identity-picker-resolved").attr("title",y.htmlEncodeJavascriptAttribute(n)).attr("data-signin",d.replaceBackslash(t));return this._isReadOnly()||i.attr("tabindex","-1"),this._options.multiIdentitySearch?i.addClass("identity-picker-resolved-bg"):(i.addClass("identity-picker-resolved-single-search"),this._showMruExpander&&i.addClass("identity-picker-drop-icon-padding")),i},t.prototype._setResolvedItemRole=function(n,t){this._options.highlightResolved?n.attr("role","button").attr("aria-label",c.IdentityPicker_FocusChangeValue):n.attr("role","button").attr("aria-label",y.format(c.IdentityPicker_ButtonResolvedItemDescription,y.htmlEncodeJavascriptAttribute(t))+". "+(this._showContactCard&&!this._options.highlightResolved?c.IdentityPicker_EnterSpaceMessage+". ":"")+c.IdentityPicker_DeleteBackspaceMessage)},t.prototype._resolveItem=function(n,i,r,u){var f=this,g,h,a,e,tt,it,v,l,s,c,w,b,p;if(i===void 0&&(i=!0),r===void 0&&(r=null),u===void 0&&(u=!1),this._controlWidth=Math.max(this._$container.width(),t.DEFAULT_WIDTH),n){if(g=this._isControlInFocus(),!this._options.multiIdentitySearch&&this._selectedItems&&this._selectedItems.length>0&&this._clearSearchControl(),this._identityPickerDropdown.isVisible()&&this._hideDropdown(),(this._options.multiIdentitySearch||!this._options.highlightResolved)&&this._identityPickerDropdown.reset(),this._resetPreviousInput(),i&&this._setInputText(""),h=r?this._getSearchPrefix(r):"",h&&(this._replaceAndCleanup(h.toLowerCase()),this._removeFromUnresolved(h.toLowerCase()),this._element.find('.identity-picker-resolved[data-signin="'+d.replaceBackslash(h.toLowerCase())+'"][data-unresolved="true"]').remove()),this._options.showTemporaryDisplayName&&(this._options.multiIdentitySearch?this._element.find('.identity-picker-temp[data-signin="'+d.replaceBackslash(h.toLowerCase())+'"]').remove():$(".identity-picker-temp",this._element).remove()),this._findInSelectedItems(n)!=-1){this._fireInputValidityEvent();return}this._selectedItems.push(n);$(".ui-dialog-content",$(".idcard-dialog:visible")).dialog("close");a=nt.getUniqueIdentifierForDisambiguation(n);this._$input.width(10);e=this._createResolvedItem(d.createTooltip(n),a.toLowerCase());d.styleElementBySize(e,this._size,!0);it=o.ServiceHelpers.getDefaultIdentityImage(n);n.image&&(tt=n.image);v=d.createImgElement(it,tt,"user-picture-resolved",n.entityId);d.styleElementBySize(v,this._size,!1);l=nt.getDisplayName(n);s=$("<span>").addClass("identity-picker-resolved-close").append($("<span>").addClass("identity-picker-resolved-close-icon bowtie-icon bowtie-edit-delete"));this._options.multiIdentitySearch&&s.addClass("identity-picker-resolved-bg");d.styleElementBySize(s,this._size,!1);s.click(k(this,function(n){if(f._removeFromResolved(a.toLowerCase()),e.remove(),!f._options.multiIdentitySearch){f._resetSearchControl();return}f._recalculateInputWidth();f.focusOnSearchInput();n.stopPropagation()}));e.append(v).append(s).insertBefore(this._$input);c=$("<span>").addClass("identity-picker-resolved-name").text(y.decodeHtmlSpecialChars(l));this._options.multiIdentitySearch&&c.addClass("identity-picker-search-multiple-name").css("max-width",this._getItemNameContainerMaxWidth([v,s]));n.active===!1&&c.addClass("identity-picker-inactive-name");this._isReadOnly()?s.hide():this._setResolvedItemRole(e,l);e.append(c);this._options.multiIdentitySearch?this._recalculateInputWidth():(this._$input.hide(),this._showMruExpander&&this._hideMruTriangle(),this._options.watermark&&$(".identity-picker-resolved:has(> .identity-picker-watermark-name)",this._element).remove(),this._isReadOnly()||c.attr("tabindex","0"));w=function(t){t.stopPropagation();f._resolvedIEntity=n;f._removeFromResolved(a.toLowerCase());e.remove();f._$input.show();f._showMruTriangle();f._recalculateInputWidth();f.focusOnSearchInput();f._setInputText(l);f._identityPickerDropdown.updatePrefix(l);f._$input.select()};this._options.highlightResolved&&this._bind(c,"focus",k(this,function(n){if(f._isReadOnly())return!1;w(n)}),!0);b=function(t){if(!$.contains(s[0],t.target)){if(f._isReadOnly())return!1;if(p)return p=!1,!1;p=!0;t.preventDefault();f._options.highlightResolved?w(t):nt.isDirectoryEntityType(n)&&(t.stopPropagation(),f._showIdCardDialog({anchor:e,identity:n,leftValue:0}));f._options.highlightResolved&&f._showAllMruInDropdownWithoutDefaultSelection(!1)}};p=!1;this._bind(e,"mousedown",k(this,function(n){b(n)}),!0);this._bind(e,"click",k(this,function(n){b(n)}),!0);e.blur(k(this,function(n){f._isDropdownHovered()||f._isContactCardHovered()||!e.is(":visible")||(f._identityPickerDropdown.isVisible()&&f._hideDropdown(n),f._options.callbacks&&f._options.callbacks.onInputBlur&&f._options.callbacks.onInputBlur())}));this._isReadOnly()||!this._showContactCard||this._options.highlightResolved||e.attr("aria-haspopup","true");this._fireInputValidityEvent();this._$container[0].scrollTop=this._$container[0].scrollHeight;g&&!u&&this.focusOnSearchInput()}},t.prototype._getItemNameContainerMaxWidth=function(n){var t=this._controlWidth-d.SCROLL_BAR_WIDTH_PX;for(var i in n)n.hasOwnProperty(i)&&(t-=parseInt(n[i].css("width"),10));return t},t.prototype._getSearchPrefix=function(n){var t=/^.*[(<{\[]\s*([^\s]+@[^\s]+\.[^\s]+[^)>}\]])\s*[)>}\]]+\s*$/.exec(n);return t&&t[0]===n?t[1]:n},t.prototype._unresolveItem=function(n){var f=this,u,i,r,e;if(this._controlWidth=Math.max(this._$container.width(),t.DEFAULT_WIDTH),this._resetPreviousInput(),n){if(u=this._getSearchPrefix(n),this._unresolvedItems.indexOf(u.toLowerCase())!=-1){this._replaceAndCleanup(n.toLowerCase());return}if(!this._replaceAndCleanup(n.toLowerCase()))return;this._options.showTemporaryDisplayName&&(this._options.multiIdentitySearch?this._element.find('.identity-picker-temp[data-signin="'+d.replaceBackslash(u.toLowerCase())+'"]').remove():$(".identity-picker-temp",this._element).remove());this._fireInvalidInput();this._unresolvedItems.push(u.toLowerCase());this._$input.width(10);i=this._createResolvedItem(n,u.toLowerCase()).attr("data-unresolved","true");d.styleElementBySize(i,this._size,!0);r=$("<span>").addClass("identity-picker-resolved-close").append($("<span>").addClass("identity-picker-resolved-close-icon bowtie-icon bowtie-edit-delete"));this._options.multiIdentitySearch&&(i.addClass("identity-picker-resolved-bg"),r.addClass("identity-picker-resolved-bg"));d.styleElementBySize(r,this._size,!1);r.click(k(this,function(){f._removeFromUnresolved(n.toLowerCase());i.remove();f._recalculateInputWidth();f.focusOnSearchInput()}));i.append(r).insertBefore(this._$input);e=$("<span>").addClass("identity-picker-unresolved-name").text(y.decodeHtmlSpecialChars(n));this._options.multiIdentitySearch&&e.addClass("identity-picker-search-multiple-name").css("max-width",this._getItemNameContainerMaxWidth([r]));i.attr("role","aria-button").attr("aria-label",y.format(c.IdentityPicker_ButtonUnresolvedItemDescription,n)+". "+c.IdentityPicker_DeleteBackspaceMessage);i.append(e);this._recalculateInputWidth();this.focusOnSearchInput();this._$container[0].scrollTop=this._$container[0].scrollHeight}},t.prototype._setShowContactCard=function(){this._showContactCard=this._options.showContactCard==!1?!1:!0},t.prototype._generatePlaceHolder=function(n){return this._isInArray(o.ServiceHelpers.UserEntity,n)&&this._isInArray(o.ServiceHelpers.GroupEntity,n)?c.IdentityPicker_PlaceholderTextUserGroup:this._isInArray(o.ServiceHelpers.UserEntity,n)&&!this._isInArray(o.ServiceHelpers.GroupEntity,n)?c.IdentityPicker_PlaceholderTextUser:!this._isInArray(o.ServiceHelpers.UserEntity,n)&&this._isInArray(o.ServiceHelpers.GroupEntity,n)?c.IdentityPicker_PlaceholderTextGroup:c.IdentityPicker_PlaceholderTextPrefix},t.prototype._isInArray=function(n,t){return t.indexOf(n)>=0},t.INVALID_INPUT_EVENT="identity-picker-search-invalid-input",t.VALID_INPUT_EVENT="identity-picker-search-valid-input",t.RESOLVED_INPUT_REMOVED_EVENT="identity-picker-resolved-input-removed",t.DATA_SOURCE_FALLBACK_EVENT="identity-picker-search-data-source-fallback",t.DATA_SOURCE_REEVALUATE_EVENT="identity-picker-search-data-source-reevaluate",t.SEARCH_STARTED_EVENT="identity-picker-search-started",t.SEARCH_FINISHED_EVENT="identity-picker-search-finished",t.DIALOG_MOVE_EVENT="dialog-move",t.CSS_SEARCH_MRU_TRIANGLE="identity-picker-search-drop-icon",t.DEFAULT_WIDTH=140,t.OUTER_PADDING_PX=2,t.TRIANGLE_WIDTH_PX=19,t.NAME_PADDING_PX=8,t}(r.Control);t.IdentityPickerSearchControl=at,function(n){n[n.Small=0]="Small";n[n.Medium=1]="Medium";n[n.Large=2]="Large"}(t.IdentityPickerControlSize||(t.IdentityPickerControlSize={}));tt=t.IdentityPickerControlSize,function(n){n[n.AvatarText=0]="AvatarText";n[n.AvatarOnly=1]="AvatarOnly";n[n.TextOnly=2]="TextOnly"}(t.EDisplayControlType||(t.EDisplayControlType={}));et=t.EDisplayControlType,function(n){n[n.ExpiredAccessToken=0]="ExpiredAccessToken";n[n.IsGuestUser=1]="IsGuestUser"}(lt||(lt={}));vt=function(n){function t(t){n.call(this,t);this._displayedEntity=null;this._identityType=t.identityType?t.identityType:{User:!0};this._operationScope=t.operationScope?t.operationScope:{IMS:!0};this._size=t.size!=null?t.size:tt.Medium;this._turnOffHover=t.turnOffHover?t.turnOffHover:!1}return __extends(t,n),t.prototype.initialize=function(){var t,i;if(n.prototype.initialize.call(this),t=this._options.item,!t||(typeof t=="string"||t instanceof String)&&!t.trim()){i={source:"IdentityDisplayControl.initialize()",message:"The item argument to the IdentityDisplayControl cannot be null or empty"};throw i;}this._displayType=this._options.displayType?this._options.displayType:et.AvatarText;(typeof t=="string"||t instanceof String)&&t?(t=t.trim(),this._displayString(t),this._resolveStringToEntity(t)):this._displayEntity(t,"")},t.prototype.getDisplayedEntity=function(){if(this._displayedEntity)return this._displayedEntity;throw{source:"getResolvedEntity",message:"No resolved entity found."};},t.prototype._getEntityOperationsFacade=function(){return this._entityOperationsFacade||(this._entityOperationsFacade=l.getService(ot)),this._entityOperationsFacade},t.prototype._resolveStringToEntity=function(n){var t=this,r=function(i){if(t._element){if(!i||!i.queryToken||!i.identities)return;if(i.identities.length!=1)return;t._getEntityOperationsFacade().queryTokenEntityImageCache.set(n,i.identities[0].image);t._displayEntity(i.identities[0],n)}},i=function(n){n&&u.logWarning("_resolveStringToEntity/getIdentitiesErrorCallback:"+JSON.stringify(n))},f={identityServiceOptions:{operationScope:this._operationScope,identityType:this._identityType,httpClient:this._options.httpClient,extensionData:this._options.extensionData},identityExtensionOptions:{consumerId:this._options?this._options.consumerId:e.ConsumerId.UnknownConsumer},prefix:n,queryTypeHint:{UID:!0},sources:[ut.Directory]},o=this._getEntityOperationsFacade().search(f).then(function(n){for(var u in n.queryTokenResponse)n.queryTokenResponse[u].then(k(t,r),k(t,i))},i)},t.prototype._showIdCardDialog=function(n){r.Enhancement.enhance(st,"<div/>",{identity:n.identity,anchor:n.anchor,leftValue:n.leftValue,operationScope:this._operationScope,identityType:this._identityType,httpClient:this._options.httpClient?this._options.httpClient:null,consumerId:this._options.consumerId})},t.prototype._displayString=function(n){var i=$("<span>").addClass("identity-picker-display").attr("title",y.htmlEncodeJavascriptAttribute(this._options.friendlyDisplayName?this._options.friendlyDisplayName+" <"+n+">":n)).attr("data-item",n).attr("tabindex","-1"),t,r,u,f;d.styleElementBySize(i,this._size,!0);t=null;this._displayType!=et.TextOnly&&(r=this._getEntityOperationsFacade().queryTokenEntityImageCache.get(n),u=r?r:o.ServiceHelpers.DefaultUserImage,t=d.createImgElement(u,"","user-picture-resolved"),d.styleElementBySize(t,this._size,!1),i.append(t));this._displayType!=et.AvatarOnly?(f=$("<span>").addClass("identity-picker-resolved-name").text(y.decodeHtmlSpecialChars(this._options.friendlyDisplayName?this._options.friendlyDisplayName:n)),i.append(f)):t.attr("alt",this._options.friendlyDisplayName?this._options.friendlyDisplayName+" <"+n+">":n);i.appendTo(this._element)},t.prototype._displayEntity=function(n,i){var r=this,e,h,l,c,a,p;if(n){this._displayedEntity=n;var s=nt.getDisplayName(this._displayedEntity),w=nt.getUniqueIdentifierForDisambiguation(this._displayedEntity),f=$("<span>").addClass("identity-picker-display").attr("data-signin",d.replaceBackslash(w.toLowerCase())).attr("tabindex","-1");d.styleElementBySize(f,this._size,!0);e=null;h=null;this._displayType!=et.TextOnly&&(l=o.ServiceHelpers.getDefaultIdentityImage(this._displayedEntity),e=d.createImgElement(l,this._displayedEntity.image?this._displayedEntity.image:"","user-picture-resolved",this._displayedEntity.entityId),d.styleElementBySize(e,this._size,!1),f.append(e));this._displayType!=et.AvatarOnly?(h=$("<span>").addClass("identity-picker-resolved-name").text(y.decodeHtmlSpecialChars(s)),$('.identity-picker-display[data-item="'+i+'"]',this._element).remove(),f.append(h)):(c=nt.getSignInAddress(this._displayedEntity),e.attr("alt",s!==c?s+" <"+c+">":s));a=function(){var n=$('.idcard-dialog[data-objectid="'+r._displayedEntity.entityId+'"]');n.length&&$(".ui-dialog-content",n).dialog("close")};p=function(){r._hoverIdCardEnterTimer=new v.DelayedFunction(r,t.DEFAULT_HOVER_WAIT_ENTER_INTERVAL,"showDisplayControlContactCard",function(){r._element.parent().length>0&&r._element.is(":visible")&&r._showIdCardDialog({anchor:f,identity:r._displayedEntity,leftValue:0})})};!this._turnOffHover&&nt.isDirectoryEntityType(this._displayedEntity)?f.hover(function(){r._hoverIdCardEnterTimer?r._hoverIdCardEnterTimer.reset():(p(),r._hoverIdCardEnterTimer.start())},function(){r._hoverIdCardEnterTimer&&r._hoverIdCardEnterTimer.cancel();var n=$('.idcard-dialog[data-objectid="'+r._displayedEntity.entityId+'"]'),i=function(){r._hoverIdCardExitTimer?r._hoverIdCardExitTimer.reset():(r._hoverIdCardExitTimer=new v.DelayedFunction(r,t.DEFAULT_HOVER_WAIT_EXIT_INTERVAL,"closeDisplayControlContactCard",a),r._hoverIdCardExitTimer.start())};n&&n.length&&n.mouseenter(function(){r._hoverIdCardExitTimer.cancel();n.mouseleave(function(){i()})});i()}):f.attr("title",y.htmlEncodeJavascriptAttribute(d.createTooltip(this._displayedEntity)));this._element.empty();f.appendTo(this._element)}},t.DEFAULT_HOVER_WAIT_ENTER_INTERVAL=800,t.DEFAULT_HOVER_WAIT_EXIT_INTERVAL=200,t.MIN_WIDTH=100,t.OUTER_PADDING_PX=2,t}(r.Control);t.IdentityDisplayControl=vt;d=function(){function n(){}return n.styleElementBySize=function(n,t,i){i===void 0&&(i=!0);switch(t){case tt.Small:i?n.addClass("element-height-small"):n.addClass("element-2d-small");break;case tt.Medium:i?n.addClass("element-height-medium"):n.addClass("element-2d-medium");break;case tt.Large:i?n.addClass("element-height-large"):n.addClass("element-2d-large")}},n.createImgElement=function(n,t,i,r){t===void 0&&(t="");i===void 0&&(i="");r===void 0&&(r="");var u=$("<img>").css("background","url('"+n+"') no-repeat").css("background-size","100%").attr("src",t?t:n).attr("alt","").attr("draggable","false").on("dragstart",function(){return!1});u.on("error",function(){u.attr("src")&&u.attr("src")===n?(u.off("error"),u.css("background-color","#7d7d7d").css("background-size","100%")):u.attr("src",n)});return u.load(function(){u.attr("src")&&u.attr("src")!==n&&u.css("background-image","none")}),i&&u.addClass(i),r&&u.attr("data-objectid",r),u},n.getRandomString=function(){return Math.random().toString(36).substring(5)},n.getSizePx=function(n){switch(n){case tt.Small:return 16;case tt.Medium:return 24;case tt.Large:return 32}},n.isValidEmail=function(n){var t=n.split("@");return t.length===2&&t[0].length>=1&&t[1].length>=1?!0:!1},n.isOnPremiseEnvironment=function(){return!i.getPageContext().webAccessConfiguration.isHosted==!0},n.sortGroupMembersByName=function(n){return n.sort(function(n,t){return!n||!n.displayName?-1:!t||!t.displayName?1:n.displayName.toLocaleLowerCase().localeCompare(t.displayName.toLocaleLowerCase())})},n.createTooltip=function(t){var u=t.displayName&&t.displayName.trim()?t.displayName:"",i="",r;return n.isOnPremiseEnvironment()?t.samAccountName&&t.samAccountName.trim()&&(i="("+(t.scopeName&&t.scopeName.trim()?t.scopeName+"\\":"")+t.samAccountName+")"):t.signInAddress&&t.signInAddress.trim()&&(i="<"+t.signInAddress+">"),r="",t.active===!1&&(r=" - "+t.entityType.toLowerCase().trim()==o.ServiceHelpers.UserEntity?c.IdentityPicker_InactiveUser:c.IdentityPicker_InactiveGroup),y.decodeHtmlSpecialChars((u?u:"")+(i?" "+i:"")+r)},n.replaceBackslash=function(n){return n.replace(/\\/g,"%")},n.UserEntityType=o.ServiceHelpers.UserEntity,n.GroupEntityType=o.ServiceHelpers.GroupEntity,n.VisualStudioDirectory=o.ServiceHelpers.VisualStudioDirectory,n.AzureActiveDirectory=o.ServiceHelpers.AzureActiveDirectory,n.SourceDirectory=o.ServiceHelpers.SourceDirectory,n.CSS_FIXED_POSTIION="identity-picker-fixed-position",n.SCROLL_BAR_WIDTH_PX=20,n.IDENTITY_ITEM_BUFFER_WIDTH_PX=18,n}();ht=function(){function n(){}return n.createStringEntity=function(t,i){var r=y.htmlEncode(t),u={entityId:n.STRING_ENTITY_ID_PREFIX+"_"+r,entityType:n.STRING_ENTITY_TYPE,originDirectory:n.STRING_DIRECTORY,originId:n.STRING_ORIGIN_ID_PREFIX+"_"+r,localDirectory:n.STRING_DIRECTORY,localId:n.STRING_LOCAL_ID_PREFIX+"_"+r,isMru:!1,displayName:r};return u.image=i||o.ServiceHelpers.getDefaultIdentityImage(u),u},n.isStringEntityId=function(t){return!t||!t.trim()?!1:t.indexOf(n.STRING_ENTITY_ID_PREFIX)==0?!0:!1},n.isStringPrefixedLocalId=function(t){return!t||!t.trim()?!1:t.indexOf(n.STRING_LOCAL_ID_PREFIX)==0},n.STRING_ENTITY_TYPE="string_entitytype",n.STRING_ENTITY_ID_PREFIX="STRING_ENTITYID",n.STRING_DIRECTORY="STRING_DIRECTORY",n.STRING_ORIGIN_ID_PREFIX="STRING_ORIGINID",n.STRING_LOCAL_ID_PREFIX="STRING_LOCALID",n}();t.EntityFactory=ht;var nt=function(){function n(){}return n.isDirectoryEntityType=function(n){return n.entityType?n.entityType.toLowerCase().trim()==o.ServiceHelpers.UserEntity||n.entityType.toLowerCase().trim()==o.ServiceHelpers.GroupEntity:!1},n.getUniqueIdentifierForDisambiguation=function(n){return d.isOnPremiseEnvironment()||n.entityType.toLowerCase().trim()!=o.ServiceHelpers.UserEntity?n.entityId:n.signInAddress&&n.signInAddress.trim()?n.signInAddress:n.entityId},n.getDisplayName=function(t){return t.displayName&&t.displayName.trim()?t.displayName:n.getSignInAddress(t)},n.getSignInAddress=function(n){return d.isOnPremiseEnvironment()&&n.samAccountName&&n.samAccountName.trim()?(n.scopeName&&n.scopeName.trim()?n.scopeName+"\\":"")+n.samAccountName:n.signInAddress&&n.signInAddress.trim()?n.signInAddress:n.mail&&n.mail.trim()?n.mail:n.mailNickname&&n.mailNickname.trim()?n.mailNickname:""},n}(),wt=function(){function n(){}return n.prototype.getIdentityAttributes=function(n){if(n.entityType.trim().toLowerCase()==o.ServiceHelpers.UserEntity)return new yt(n);if(n.entityType.trim().toLowerCase()==o.ServiceHelpers.GroupEntity)return new pt(n);throw{source:"getIdentityAttributes",message:"identity entityType do not match existing type"};},n}(),ft=function(){function n(n,t,i){this._displayTitle=n;this._displayContent=t;this._needWordWrap=i?i:!1}return n.prototype.getDisplayTitle=function(){return this._displayTitle},n.prototype.getDisplayContent=function(){return this._displayContent},n.prototype.constructAttribute=function(){var i=$("<div>").addClass("identity-picker-idcard-attribute-name").text(y.decodeHtmlSpecialChars(this.getDisplayTitle())),t=y.decodeHtmlSpecialChars(this.getDisplayContent()),n=$("<div>").addClass("identity-picker-idcard-ellipsis-overflow").attr("title",y.htmlEncodeJavascriptAttribute(t)),r;return this._isValidSendEmailAttribute()?r=$("<a>").attr("href","mailto:"+t).text(t).attr("tabindex","0").appendTo(n):n.text(y.decodeHtmlSpecialChars(this.getDisplayContent())),this._needWordWrap&&n.addClass("identity-picker-idcard-word-wrap"),[i,n]},n.prototype._isValidSendEmailAttribute=function(){return c.IdentityPicker_IdCardMail.toLowerCase()==this.getDisplayTitle().toLowerCase().trim()&&d.isValidEmail(this.getDisplayContent())},n}(),bt=function(){function n(){this._withContactCard=!1;this._withContactCard=!0;this._focusElementOnContactCardClose=null}return n.prototype.withPrefix=function(n){return this._prefix=n,this},n.prototype.withEntity=function(n){return this._entity=n,this},n.prototype.withContactCard=function(n,t){return this._withContactCard=n,this._withContactCard&&(this._focusElementOnContactCardClose=t),this},n.prototype.forControlOfSize=function(n){return this._size=n,this},n.prototype.withIdentityServiceOptions=function(n){return this._identityServiceOptions=n,this},n.prototype.withIdentityExtensionOptions=function(n){return this._identityExtensionOptions=n,this},n.prototype.registerCallbacks=function(n){return this._callbacks=n,this},n.prototype.build=function(){var i=this,f,t,u,r,o,s;return!this._entity||!this._size||!this._identityServiceOptions||!this._identityServiceOptions.identityType||!this._identityServiceOptions.operationScope||!this._callbacks?null:(f=y.decodeHtmlSpecialChars(nt.getSignInAddress(this._entity)),t=$("<li>").attr("title",y.htmlEncodeJavascriptAttribute(f)).attr("role","option"),d.styleElementBySize(t,this._size,!0),n._appendImage(this._entity,t,this._size),u=this._withContactCard&&nt.isDirectoryEntityType(this._entity),this._entity.isMru&&nt.isDirectoryEntityType(this._entity)&&(r=$("<div>").addClass("bowtie-icon bowtie-edit-delete bowtie-icon-small identity-picker-delete-icon").attr("title",c.IdentityPicker_RemoveFromMru).appendTo(t),d.styleElementBySize(r,this._size,!1),u&&r.addClass("with-idcard"),r.hide(),o=k(this,function(){var n={};n[e.TelemetryProperties.entityId]=i._entity.entityId;n[e.TelemetryProperties.consumerId]=i._identityExtensionOptions?i._identityExtensionOptions.consumerId:e.ConsumerId.UnknownConsumer;w.publishEvent(new w.TelemetryEventData(e.Telemetry.Area,e.Telemetry.Feature_Click_Remove_Mru,n));i._callbacks.deleteIconClickDelegate(i._entity,t)}),this._callbacks.deleteIconClickDelegate&&r.click(o)),u&&n._appendIdCard(this._entity,t,this._size,this._identityServiceOptions,this._identityExtensionOptions,this._callbacks,this._focusElementOnContactCardClose),n._appendTextContainer(this._entity,t,this._size,this._prefix),s=function(){i._callbacks.entityListItemClickDelegate(i._entity)},this._callbacks.entityListItemClickDelegate&&t.click(s),this._entity.isMru&&t.hover(k(this,function(){t.children(".identity-picker-delete-icon").show()}),k(this,function(){t.children(".identity-picker-delete-icon").hide()})),t)},n._appendTextContainer=function(t,i,r,u){var e=$("<div>").addClass("item-text-container").append($("<div>").addClass("title").addClass(r==tt.Large?"large":"").append(n._highlightPrefix(nt.getDisplayName(t),u,!0))),f=nt.getSignInAddress(t);f=y.isGuid(f)?"":f;r!=tt.Small&&e.append($("<div>").addClass("subtitle").addClass(r==tt.Large?"large":"").append(n._highlightPrefix(f,u)));e.appendTo(i);e.height(d.getSizePx(r)+rt.IMAGE_MARGINS_PX)},n._appendImage=function(n,t,i){var f=o.ServiceHelpers.getDefaultIdentityImage(n),r,u;n.image&&(r=n.image);u=d.createImgElement(f,r,r&&r.trim()?"identity-picture":"identity-picture hidden",n.entityId).appendTo(t);d.styleElementBySize(u,i,!1)},n._appendIdCard=function(n,t,i,u,f,o,s){var h,l;h=$("<div>").addClass("bowtie-icon bowtie-contact-card identity-picker-contact-card-icon").attr("title",c.IdentityPicker_ShowContactCardTitle).appendTo(t);d.styleElementBySize(h,i,!1);l=k(this,function(t){t.stopPropagation();var o={identity:n,anchor:h,operationScope:u.operationScope,identityType:u.identityType,httpClient:u.httpClient?u.httpClient:null,focusElementOnClose:s,leftValue:h.offset().left,topValue:h.offset().top+h.outerHeight(),consumerId:f.consumerId},i={};i[e.TelemetryProperties.entityId]=n.entityId;i[e.TelemetryProperties.consumerId]=f?f.consumerId:e.ConsumerId.UnknownConsumer;w.publishEvent(new w.TelemetryEventData(e.Telemetry.Area,e.Telemetry.Feature_Click_IdCard,i));r.Enhancement.enhance(st,"<div/>",o)});h.click(l)},n._highlightPrefix=function(n,t,i){var u;if(i===void 0&&(i=!1),!n)return null;var r=n.toLowerCase().indexOf(t.toLowerCase()),f=function(n,t,i){return $("<span>").append(n.substring(0,i)).append($("<b>").text(y.decodeHtmlSpecialChars(n.substr(i,t)))).append(n.substr(i+t))},e=function(n,t,i,r){while(i>0&&n.charAt(i-1)!=r)i=n.toLowerCase().indexOf(t.toLowerCase(),i+1);return i>0?f(n,t.length,i):null};if(r){if(r>0){if(i&&(u=e(n,t,r," "),u)||d.isOnPremiseEnvironment()&&t.indexOf("\\")<0&&(u=e(n,t,r,"\\"),u))return u}else if(d.isOnPremiseEnvironment()&&t.indexOf("\\")>0)if(t=t.substring(t.indexOf("\\")+1),r=n.toLowerCase().indexOf(t.toLowerCase()),r){if(i&&(u=e(n,t,r," "),u))return u}else return f(n,t.length,r)}else return f(n,t.length,r);return $("<span>").text(y.decodeHtmlSpecialChars(n))},n}(),ut=function(){function n(){}return n.Directory="Directory",n.Mru="Mru",n.Persistent="Persistent",n.String="String",n}();t.SourceId=ut,function(n){n[n.Sync=0]="Sync";n[n.Async=1]="Async"}(t.SourceType||(t.SourceType={}));var kt=t.SourceType,ct=function(){function n(){}return n.PreferFirst="preferfirst",n.PreferSecond="prefersecond",n}(),ot=function(n){function t(){n.call(this);this._mruEntities=[];this._syncSources={};this._userMruReady=!1;this._entityRetrieverPrepComplete=null;this._mruEntitiesPromise=null;this._mruEntities=[];this.registerSyncSource({id:ut.Mru,sourceType:kt.Sync,getEntities:this._mruSourceGetEntitiesHandler,sortRank:10});this.queryTokenEntityImageCache=new s.HashCache}return __extends(t,n),t.prototype.registerSyncSource=function(n){if(!(n.id in this._syncSources)){for(var t in this._syncSources)if(this._syncSources[t].sortRank==n.sortRank)return;this._syncSources[n.id]=n}},t.prototype.search=function(n){var i=this,u;if(!n.sources||n.sources.length==0||!n.identityServiceOptions){u={source:"EntityOperationsFacade: search",message:"missing arguments"};throw u;}var r=b.defer(),e=r.promise,f=k(this,function(){var u=[],e=i._getRegisteredSyncSourcesSorted().filter(function(t){return n.sources.indexOf(t)!=-1}),f;e&&e.forEach(k(i,function(r){var f=i._syncSources[r].getEntities.bind(i),e=f(u,n);u=t.mergeEntities(e,u)}));f={entityResponse:[],queryTokenResponse:{}};n.sources.indexOf(ut.Directory)!=-1&&(f.queryTokenResponse=i._directorySourceGetEntities(u,n));u.length>0?i.getImagesForEntities(u).then(function(n){u.forEach(k(i,function(t){n.hasOwnProperty(t.entityId)&&(t.image=n[t.entityId])}));f.entityResponse=u;r.resolve(f)}):r.resolve(f)});return this.load({loadMru:n.sources.indexOf(ut.Mru)!=-1}).then(f,f),e},t.prototype.isUserMruReady=function(){return this._userMruReady},t.prototype.getMruEntitiesUnchecked=function(){return this._mruEntities},t.prototype.refreshUserMru=function(){return this._getUserMruEntities()},t.prototype.load=function(n){var t=this;return this._entityRetrieverPrepComplete&&(!n.loadMru||this._userMruReady)?this._entityRetrieverPrepComplete.promise:(this._entityRetrieverPrepComplete=b.defer(),n.loadMru?this._mruEntitiesPromise?this._mruEntitiesPromise.then(k(this,function(){t._entityRetrieverPrepComplete.resolve(!0)}),k(this,function(){t._entityRetrieverPrepComplete.resolve(!1)})):(this._mruEntitiesPromise=this._getUserMruEntities(),this._mruEntitiesPromise.then(k(this,function(){t._entityRetrieverPrepComplete.resolve(!0)}),k(this,function(){t._entityRetrieverPrepComplete.resolve(!1)}))):this._entityRetrieverPrepComplete.resolve(!0),this._entityRetrieverPrepComplete.promise)},t.filterEntities=function(n,t){return!n||n.length==0?[]:n.filter(function(n){return n.displayName&&n.displayName.trim().toLowerCase().indexOf(t)==0?!0:d.isOnPremiseEnvironment()&&n.samAccountName&&n.samAccountName.trim().toLowerCase().indexOf(t)==0||d.isOnPremiseEnvironment()&&n.scopeName&&n.samAccountName&&(n.scopeName+"\\"+n.samAccountName).trim().toLowerCase().indexOf(t)==0||n.signInAddress&&n.signInAddress.trim().toLowerCase().indexOf(t)==0||!n.signInAddress&&n.mail&&n.mail.trim().toLowerCase().indexOf(t)==0||!n.signInAddress&&!n.mail&&n.mailNickname&&n.mailNickname.trim().toLowerCase().indexOf(t)==0?!0:!1})},t.mergeEntities=function(n,i,r){var u,f,e;if(r===void 0&&(r=ct.PreferFirst),u={},f=[],!n&&!i)return[];if(!i||i.length==0)return n?n:[];if(!n||n.length==0)return i?i:[];n.forEach(function(n){var i=t._getMergingKeyFromEntity(n);u[i]=u.hasOwnProperty(i)?t._mergeSimilarEntities(u[i],n,r):n});i.forEach(function(n){var i=t._getMergingKeyFromEntity(n),f;i in u?(f=t._mergeSimilarEntities(u[i],n,r),u[i]=f):u[i]=n});for(e in u)u[e].isMru?f.unshift(u[e]):f.push(u[e]);return f},t.prototype.getImagesForEntities=function(n,i){var f=b.defer(),a=f.promise,h={},v=l.getService(o.IdentityService),e,s,c;try{e=v.getIdentityImages(n,{httpClient:i&&i.identityServiceOptions&&i.identityServiceOptions.httpClient?i.identityServiceOptions.httpClient:null});s=[];for(c in e)s.push(e[c]);b.allSettled(s).then(function(n){n.forEach(function(n){if(n.state==t.PromiseState_Fulfilled){if(!n.value||Object.keys(n.value).length!=1||!Object.keys(n.value)[0]||!Object.keys(n.value)[0].trim())return;var r=Object.keys(n.value)[0],i=n.value[r];if(!i||!i.trim())return;h[r]=i}else n.state==t.PromiseState_Rejected&&n.reason&&u.logError("_getImagesForEntities/_getImagesForEntitiesErrorCallback:"+JSON.stringify(n.reason))});f.resolve(h)},function(n){n&&u.logError("_getImagesForEntities/_getImagesForEntitiesErrorCallback:"+JSON.stringify(n));f.reject(n)})}catch(r){if(r!==Object(r)||!("source"in r)||r.source!="IdentityService")throw r;}return a},t._getMergingKeyFromEntity=function(n){var t,i;return d.isOnPremiseEnvironment()&&n&&n.entityType&&n.localId&&n.localDirectory.toLowerCase().trim()==o.ServiceHelpers.VisualStudioDirectory&&(n.entityType.toLowerCase().trim()==o.ServiceHelpers.UserEntity||n.entityType.toLowerCase().trim()==o.ServiceHelpers.GroupEntity)?n.localId:n.entityType.toLowerCase().trim()==o.ServiceHelpers.UserEntity?(t=nt.getSignInAddress(n),i=t?t:n.entityId,i):n.entityType.toLowerCase().trim()==o.ServiceHelpers.GroupEntity?n.displayName&&n.displayName.trim()?n.mailNickname&&n.mailNickname.trim()?n.displayName+n.mailNickname:n.mail&&n.mail.trim()?n.displayName+n.mail:n.displayName:n.entityId:n.entityType.toLowerCase().trim()==ht.STRING_ENTITY_TYPE?n.entityId:void 0},t._mergeSimilarEntities=function(n,i,r){var f,u,e;if(r===void 0&&(r=ct.PreferFirst),n==null)return i;if(i==null)return n;f={entityId:t._computeValue("entityId",n,i,r),entityType:t._computeValue("entityType",n,i,r),originDirectory:t._computeValue("originDirectory",n,i,r),originId:t._computeValue("originId",n,i,r),localDirectory:t._computeValue("localDirectory",n,i,r),localId:t._computeValue("localId",n,i,r)};u=["displayName","scopeName","department","jobTitle","mail","mailNickname","physicalDeliveryOfficeName","signInAddress","surname","guest","description","image","isMru","samAccountName","active"];for(e in u)f[u[e]]=t._computeValue(u[e],n,i,r);return f},t._computeValue=function(n,t,i,r){r===void 0&&(r=ct.PreferFirst);return r==ct.PreferFirst?t[n]?typeof t[n]=="string"||t[n]instanceof String?t[n].trim()?t[n]:i[n]:t[n]:i[n]:i[n]?typeof i[n]=="string"||i[n]instanceof String?i[n].trim()?i[n]:t[n]:i[n]:t[n]},t._filterMruEntitiesByIdentityType=function(n,t){if(!n.identityServiceOptions||!n.identityServiceOptions.identityType)return t;var i=o.ServiceHelpers.getIdentityTypeList(n.identityServiceOptions.identityType);return t.filter(function(n){return i.indexOf(n.entityType.trim().toLowerCase())>=0})},t.prototype._mruSourceGetEntitiesHandler=function(n,i){var r=t._filterMruEntitiesByIdentityType(i,this._mruEntities);return i.prefix&&(r=t.filterEntities(r,i.prefix)),r},t.prototype._directorySourceGetEntities=function(n,i){var s=this,h,f,a;if(!i||!i.prefix)return{};var r={},c={},v=l.getService(o.IdentityService);try{h=v.getIdentities(i.prefix,i.identityServiceOptions.operationScope,i.identityServiceOptions.identityType,{httpClient:i.identityServiceOptions.httpClient,minResults:i.identityServiceOptions.minResults?i.identityServiceOptions.minResults:n?n.length>o.IdentityService.MIN_RESULTS?0:o.IdentityService.MIN_RESULTS-n.length:o.IdentityService.MIN_RESULTS,maxResults:i.identityServiceOptions.minResults?i.identityServiceOptions.minResults:o.IdentityService.MAX_RESULTS,extensionData:i.identityServiceOptions.extensionData},i.queryTypeHint,i.identityExtensionOptions);for(f in h)a=k(this,function(f){h[f].then(k(s,function(u){i.prefix&&i.prefix.length>=1&&(u.identities=u&&u.identities?t.mergeEntities(u.identities,n):n);u.identities.length>0?s.getImagesForEntities(u.identities).then(function(n){u.identities.forEach(function(t){n.hasOwnProperty(t.entityId)&&(t.image=n[t.entityId])});r[f].resolve(u)}):r[f].resolve(u)}),k(s,function(n){n&&u.logWarning("_directorySourceGetEntities/getIdentitiesErrorCallback:"+JSON.stringify(n));r[f].reject(n?n:null)}))}),a(f),r[f]=b.defer(),c[f]=r[f].promise}catch(e){if(e!==Object(e)||!("source"in e)||e.source!="IdentityService")throw e;}return c},t.prototype._getRegisteredSyncSourcesSorted=function(){var n=this,t=Object.keys(this._syncSources);return t.sort(function(t,i){return n._syncSources[t].sortRank>n._syncSources[i].sortRank?1:-1}),t},t.prototype._getUserMruEntities=function(n,t){var r=this,u=b.defer(),f=u.promise;try{this._userMruReady=!1;var s=k(this,function(n){r._userMruReady=!0;r._mruEntities=n.filter(function(n){return n.active!==!1});r._mruEntities.forEach(function(n){n.image=o.ServiceHelpers.getDefaultIdentityImage(n)});u.resolve(!0)}),h=k(this,function(){r._mruEntities=[];u.resolve(!1)}),c=l.getService(o.MruService);return c.getMruIdentities({IMS:!0},o.MruService.DEFAULT_IDENTITY_ID,o.MruService.DEFAULT_FEATURE_ID,{httpClient:n?n.httpClient:null},{consumerId:t?t.consumerId:e.ConsumerId.UnknownConsumer}).then(s,h)}catch(i){if(i!==Object(i)||!("source"in i)||i.source!="MruService")throw i;}return f},t.PromiseState_Fulfilled="fulfilled",t.PromiseState_Rejected="rejected",t}(l.VssService);t.EntityOperationsFacade=ot;yt=function(){function n(n){this._attributes=this._mapEntityPropertiesToAttributes(n)}return n.prototype._mapEntityPropertiesToAttributes=function(n){var t=[];return n.jobTitle&&t.push(new ft(c.IdentityPicker_IdCardJobTitle,n.jobTitle)),n.mailNickname&&!y.isGuid(n.mailNickname)&&t.push(new ft(c.IdentityPicker_IdCardAlias,n.mailNickname)),n.physicalDeliveryOfficeName&&t.push(new ft(c.IdentityPicker_IdCardOffice,n.physicalDeliveryOfficeName)),n.department&&t.push(new ft(c.IdentityPicker_IdCardDepartment,n.department)),t},n.prototype.isEmpty=function(){return!(this._attributes.length>0)},n.prototype._appendAttributeBlock=function(n,t){var i=this._attributes[n].constructAttribute();for(var r in i)i[r].appendTo(t)},n.prototype.toRows=function(){var i=[],n,r,t,u,f;for(r in this._attributes)t=parseInt(r),this._isEven(t)?(n&&i.push(n),n=$("<div>").addClass("identity-picker-idcard-row"),u=$("<div>").addClass("identity-picker-idcard-left-attribute").appendTo(n),this._appendAttributeBlock(t,u)):(f=$("<div>").addClass("identity-picker-idcard-right-attribute").appendTo(n),this._appendAttributeBlock(t,f));return n&&i.push(n),i},n.prototype._isEven=function(n){return n%2==0},n}();pt=function(){function n(n){this._attributes=this._mapEntityPropertiesToAttributes(n)}return n.prototype._mapEntityPropertiesToAttributes=function(n){var t=[],i=new ft(c.IdentityPicker_IdCardDescription,n.description?n.description:"",!0);return t.push(i),n.scopeName&&t.push(new ft(c.IdentityPicker_IdCardGroupSource,this._getScopeNameByDirectoryType(n))),n.mail&&t.push(new ft(c.IdentityPicker_IdCardMail,n.mail)),n.mailNickname&&!y.isGuid(n.mailNickname)&&t.push(new ft(c.IdentityPicker_IdCardAlias,n.mailNickname)),t},n.prototype._getScopeNameByDirectoryType=function(n){var t=n.originDirectory.trim().toLowerCase()==o.ServiceHelpers.VisualStudioDirectory?c.IdentityPicker_IdCardImsGroupSource:c.IdentityPicker_IdCardAadGroupSource;return y.format(t,n.scopeName)},n.prototype.isEmpty=function(){return!(this._attributes.length>0)},n.prototype._appendAttributeBlock=function(n,t){var i=this._attributes[n].constructAttribute();for(var r in i)i[r].appendTo(t)},n.prototype.toRows=function(){var t=$("<div>").addClass("identity-picker-idcard-info"),r,n,u,f,e,o,i;if(this._isValidIndex(1))for(r=$("<div>").addClass("identity-picker-idcard-column").appendTo(t),n=1;this._isValidIndex(n);)u=$("<div>").addClass("identity-picker-idcard-row").appendTo(r),f=$("<div>").addClass("identity-picker-idcard-left-attribute").appendTo(u),this._appendAttributeBlock(n,f),n++;return this._attributes[0].getDisplayContent()&&(e=$("<div>").addClass("identity-picker-idcard-column").appendTo(t),o=$("<div>").addClass("identity-picker-idcard-left-attribute").appendTo(e),this._appendAttributeBlock(0,o)),i=[],i.push(t),i},n.prototype._isValidIndex=function(n){return typeof this._attributes[n]!="undefined"},n}()});
define("Presentation/Scripts/TFS/TFS.UI.Controls.Grid.DataAdapters",["require","exports","VSS/Diag","VSS/Events/Handlers","VSS/Utils/Array","VSS/Utils/Core","VSS/Utils/UI","VSS/Utils/String","VSS/VSS"],function(n,t,i,r,u,f,e,o,s){var v=e.domElem,c=f.delegate,a=function(){function n(n,t){this._nodes=n;this._options=$.extend({allowEmpty:!1,sort:null},t);this._isTree=n.length>0&&typeof n[0]=="object";this._events=new r.NamedEventCollection;this._isTree&&this._sortChildren({children:this._nodes},!0);this._populateNodeMappings()}return n.prototype.reparentNode=function(n,t){this.removeNode(n.id);this.addNode(n,t)},n.prototype.isValidValue=function(n){return n===""&&this._options.allowEmpty?!0:this._nodes.length===0?n!=="":(n=this._cleanupPath(n),this._pathToNodeMap.hasOwnProperty(n))},n.prototype.isTree=function(){return this._isTree},n.prototype.getNodes=function(){return this._nodes},n.prototype.getNode=function(n){return n=this._cleanupPath(n),this._pathToNodeMap[n]||null},n.prototype.getNodeFromId=function(n){return this._idToNodeMap[n]||null},n.prototype.updateNode=function(n){var t=this.getNodeFromId(n.id);return typeof t=="undefined"?null:t.parentId!==n.parentId?null:(t.text!==n.text&&(this._clearCache(t),t.text=n.text,this._addNode(t.parent,t)),t.values=n.values.slice(0),t.parent&&this._sortChildren(t.parent),this._raiseUpdateItem({node:t}),t)},n.prototype.getRootNode=function(){var n=this.getNodes(),t=null;return n&&n.length>0&&(t=n[0]),t},n.prototype.getPreviousSiblingNode=function(n){var t,f,e=null,r=this.getNodeFromId(n),u;if(r)for(u=r.parent?r.parent.children:this._nodes,t=0,f=u.length;t<f;t+=1){if(u[t]===r)break;e=u[t]}return e},n.prototype.removeNode=function(n){var t=this.getNodeFromId(n),r;return t&&(r=this._getChildrenCount(t)+1,t.parent&&t.parent.children&&(t.parent.children=u.subtract(t.parent.children,[t])),this._clearCache(t),this._raiseRemovedItem({node:t,parent:t.parent,treeSize:r})),t},n.prototype.addNode=function(n,t){var r=t.children;return this.getNodeFromId(n.id)?null:this.getNodeFromId(t.id)?(r.push(n),n.parentId=t.id,this._sortChildren(t,!1),this._sortChildren(n,!0),this._addNode(t,n),this._raiseNewItem({node:n,parent:t}),n):null},n.prototype.cloneSource=function(){return[h.cloneNode(this.getRootNode())]},n.prototype.attachNewItem=function(t){this._events.subscribe(n.EVENT_NEW_ITEM,t)},n.prototype.detachNewItem=function(t){this._events.unsubscribe(n.EVENT_NEW_ITEM,t)},n.prototype.attachRemovedItem=function(t){this._events.subscribe(n.EVENT_REMOVED_ITEM,t)},n.prototype.detachRemovedItem=function(t){this._events.unsubscribe(n.EVENT_REMOVED_ITEM,t)},n.prototype.attachUpdateItem=function(t){this._events.subscribe(n.EVENT_UPDATE_ITEM,t)},n.prototype.detachUpdateItem=function(t){this._events.unsubscribe(n.EVENT_UPDATE_ITEM,t)},n.prototype._populateNodeMappings=function(){var n,i,t=this._nodes;if(this._pathToNodeMap={},this._idToNodeMap={},this._isTree)for(n=0,i=t.length;n<i;n+=1)this._addNode(null,t[n]);else for(n=0,i=t.length;n<i;n+=1)this._pathToNodeMap[t[n]]=t[n]},n.prototype._sortChildren=function(n,t,r){var u=n.children||[],f=u.length;if(r=r||this._options.sort,$.isFunction(r)&&(u.sort(r),t))while(f>0)f-=1,this._sortChildren(u[f],!0,r)},n.prototype._addNode=function(t,r){var u,f,e=(t===null?"":t.path+n.TREE_PATH_SEPERATER_CHAR)+r.text;if(r.path=e,t,r.parent=t,this._pathToNodeMap[e]=r,this._idToNodeMap[r.id]=r,r.children)for(u=0,f=r.children.length;u<f;u+=1)this._addNode(r,r.children[u])},n.prototype._clearCache=function(n){var t,i;if(n&&(delete this._pathToNodeMap[n.path],delete this._idToNodeMap[n.id],n.children))for(t=0,i=n.children.length;t<i;t+=1)this._clearCache(n.children[t])},n.prototype._cleanupPath=function(t){var r=t;return r.length>0&&this.isTree()&&r.charAt(r.length-1)===n.TREE_PATH_SEPERATER_CHAR&&(r=r.substr(0,r.length-1)),r},n.prototype._getChildrenCount=function(n){var t,u,r=0;if($.isArray(n.children))for(r=n.children.length,t=0,u=r;t<u;t+=1)r+=this._getChildrenCount(n.children[t]);return r},n.prototype._raiseNewItem=function(t){this._events.invokeHandlers(n.EVENT_NEW_ITEM,this,t)},n.prototype._raiseRemovedItem=function(t){this._events.invokeHandlers(n.EVENT_REMOVED_ITEM,this,t)},n.prototype._raiseUpdateItem=function(t){this._events.invokeHandlers(n.EVENT_UPDATE_ITEM,this,t)},n.TREE_PATH_SEPERATER_CHAR="\\",n.EVENT_NEW_ITEM="new-item-event",n.EVENT_REMOVED_ITEM="removed-item-event",n.EVENT_UPDATE_ITEM="updated-item-event",n}(),h,l;t.FieldDataProvider=a;s.initClassPrototype(a,{_events:null,_nodes:null,_idToNodeMap:null,_pathToNodeMap:null,_isTree:!1,_options:null});h=function(){function n(n,t,r){this._grid=t;this._options=$.extend({},r);this.dataProvider=n;this.dataProvider.attachNewItem(c(this,function(n,t){this._addNewItem(t.node,t.parent)}));this.dataProvider.attachRemovedItem(c(this,function(n,t){this._removeItem(t.node,t.parent,t.treeSize)}));this.dataProvider.attachUpdateItem(c(this,function(n,t){this._updateItem(t.node)}))}return n.bindAdapter=function(n,t,r,u){var f,o,e,s=new n(t,r,u);for(e=r._options.columns,f=0,o=e.length;f<o;f++)delete e[f].index;return s.refresh(),s},n.cloneNode=function(t){var r=$.extend({},t),i,u;for(r.children=[],delete r.parent,i=0,u=t.children.length;i<u;i+=1)r.children[i]=n.cloneNode(t.children[i]);return r},n.prototype.getGrid=function(){return this._grid},n.prototype.refresh=function(n){var u=this.dataProvider.getNodes(),t=[],i=this._grid.getExpandStates(),r=[];i&&(t=i.slice(0));this._flattenedItems=[];this._createDataSource(u,this._flattenedItems,r,1);n||(this._expandStates=r,this._expandStates&&this._expandStates.length===t.length&&(this._expandStates=t),this._grid.setDataSource(this._flattenedItems,this._expandStates,this._grid._options.columns))},n.prototype.getNodeForDataIndex=function(t){var r=this._flattenedItems[t];return r?this.dataProvider.getNodeFromId(r[n._ITEM_ID_DATA_SOURCE_INDEX]):null},n.prototype.getParentNodeIndexForDataIndex=function(n){if(!n)return-1;var t=this.getNodeForDataIndex(n),r=-1;return t&&(r=this.getDataIndexFromNode(t.parent)),r},n.prototype.getDataIndexFromNode=function(n){return n.dataIndex},n.prototype.getMaxExpandLevel=function(){return this._grid._indentLevels.reduce(function(n,t){return Math.max(n,t)},1)-1},n.prototype.cloneSource=function(){return[n.cloneNode(this.fieldDataHelper.getNodes()[0])]},n.prototype._createDataSource=function(n,t,i,r){this._populateDataSource(n,t,i,r)},n.prototype._constructRow=function(t){var i=[].concat(t.values);return i[n._ITEM_ID_DATA_SOURCE_INDEX]=t.id,i},n.prototype._populateDataSource=function(n,t,i,r){for(var f,e=n.length,u=0,o=n.length;u<o;u+=1)f=t.length,n[u].dataIndex=f,t[f]=this._constructRow(n[u]),i[f]=0,typeof n[u].children!="undefined"&&(i[f]=this._populateDataSource(n[u].children,t,i,r+1),e+=i[f]);return e},n.prototype._addNewItem=function(n,t){this.refresh(!0);var i=this.getDataIndexFromNode(n),r=this.getDataIndexFromNode(t);i===0?this._expandStates.splice(this._expandStates.length,0,0):this._expandStates.splice(i,0,0);this._updateExpandStates(r,1)},n.prototype._removeItem=function(n,t,r){var u=this.getDataIndexFromNode(n),f=this.getDataIndexFromNode(t);this._expandStates.splice(u,r);this._updateExpandStates(f,-r);this.refresh(!0)},n.prototype._updateItem=function(n){var r=this.getDataIndexFromNode(n),t;this.refresh(!0);t=this.getDataIndexFromNode(n);this._moveExpandStatesForNode(r,t)},n.prototype._updateExpandStates=function(n,t){var r=n,u=this._expandStates;if(r>=0)do u[r]<0?u[r]-=t:u[r]+=t,r=this.getParentNodeIndexForDataIndex(r);while(r>=0)},n.prototype._moveExpandStatesForNode=function(n,t){var f=Math.abs(this._expandStates[n])+1,r,i,u;for(r=this._expandStates.splice(n,f),u=r.length,i=u-1;i>=0;i-=1)this._expandStates.splice(t,0,r[i])},n._ITEM_ID_DATA_SOURCE_INDEX=-1,n}();t.HierarchicalGridDataAdapter=h;s.initClassPrototype(h,{_flattenedItems:null,_grid:null,_expandStates:[],_options:{},_expandStatesManager:null,dataProvider:null,fieldDataHelper:null});l=function(n){function t(u,f,o){n.call(this,u,f);this._events=new r.NamedEventCollection;this._checkboxRangeRootId=o.rootNodeId||null;this._noCheckboxes=o.noCheckboxes;this._allEnabled=o.allEnabled===undefined?!0:o.allEnabled;var s=this,h=f._options.columns,c={canSortBy:!1,text:"",width:30,fixed:!0,name:t.CHECK_COLUMN_NAME,getCellContents:function(n,t,i,r,u){return s._createCheckboxCell(t,u)}};o.noColumn||(h.splice(t._CHECKBOX_COLUMN_INDEX,0,c),f.getElement().keyup(function(n){var i,r,t;n.keyCode===e.KeyCode.SPACE&&(i=s._grid.getSelectedDataIndex(),t=s._findCheckbox(i),t.length!==1||t.attr("disabled")||(r=!t.prop("checked"),t.prop("checked",r),s._setCheckedState(t,i,r)))}));this._disabledTooltip=o.disabledTooltip||"";this._disableChildren=o.disableChildren&&$.isFunction(o.disableChildren)?o.disableChildren:function(){return!0};this._onBeforeCheckChanged=o.onBeforeCheckChanged;this.initialize(o.checkedItemIds||[])}return __extends(t,n),t.prototype.initialize=function(n){var i,t,r;for(i={},t=0,r=n.length;t<r;t+=1)i[n[t]]=n[t];this._checkedItems=i;this._blockedCheckIds={}},t.prototype.hasCheckBox=function(n){return n>=this._checkboxRangeBegin&&n<=this._checkboxRangeEnd},t.prototype.updateCheckboxesRange=function(n){var t,r,u;this._checkboxRangeRootId?(t=this.dataProvider.getNodeFromId(this._checkboxRangeRootId),t&&(u=this.getDataIndexFromNode(t),r=Math.abs(n[u]),r>0?(this._checkboxRangeBegin=t.dataIndex+1,this._checkboxRangeEnd=t.dataIndex+r):(this._checkboxRangeBegin=-1,this._checkboxRangeEnd=-1))):this._noCheckboxes?(this._checkboxRangeBegin=-1,this._checkboxRangeEnd=-1):(this._checkboxRangeBegin=0,this._checkboxRangeEnd=this._flattenedItems.length-1)},t.prototype.getCheckboxRangeBegin=function(){return this._checkboxRangeBegin},t.prototype.getCheckboxRangeEnd=function(){return this._checkboxRangeEnd},t.prototype.isLeafNode=function(n){return this._expandStates[n.dataIndex]===0},t.prototype.blockCheck=function(n){this._blockedCheckIds[n]=!0;this._grid.updateRow(undefined,this._getDataIndexFromId(n))},t.prototype.unblockCheck=function(n){this._blockedCheckIds.hasOwnProperty(n)&&(delete this._blockedCheckIds[n],this._grid.updateRow(undefined,this._getDataIndexFromId(n)))},t.prototype.setCheckboxRangeRoot=function(n){this._checkboxRangeRootId=n;this.refresh()},t.prototype.getCheckboxRangeRoot=function(){return this._checkboxRangeRootId},t.prototype.attachCheckedItemsChanged=function(n){this._events.subscribe(t._CHECK_CHANGED,n)},t.prototype.detachCheckedItemsChanged=function(n){this._events.unsubscribe(t._CHECK_CHANGED,n)},t.prototype._createDataSource=function(i,r,u,f){var e,a,s=[],o,v,c=t._CHECKBOX_COLUMN_INDEX,l=h._ITEM_ID_DATA_SOURCE_INDEX,y;for(n.prototype._createDataSource.call(this,i,r,u,f),o=this._flattenedItems,this.updateCheckboxesRange(u),e=0,a=u.length;e<a;e++)if(this.hasCheckBox(e)){if(v=Math.abs(u[e]),s[e]=!0,this._disableChildren(o[e][l])&&o[e][c])for(y=e;e<y+v;)s[++e]=!1,o[e][c]=!1,delete this._checkedItems[o[e][l]]}else delete this._checkedItems[o[e][l]],o[e][c]=!1;this._itemStates=s},t.prototype.setItemState=function(n,t){t?this._checkedItems[n]=n:delete this._checkedItems[n]},t.prototype.getItemChecked=function(n){return this._grid.getColumnValue(n,t._CHECKBOX_COLUMN_INDEX)},t.prototype.setItemTitle=function(n,t){var r=this._getDataIndexFromId(n),u=this._findCheckbox(r);u.attr("title",t)},t.prototype.resetItemTitle=function(n){var t=this._getDataIndexFromId(n),r=this._findCheckbox(t);this._setCheckboxDefaultTitle(r)},t.prototype.getCheckedItemIds=function(){var n,f,e=[],c=t._CHECKBOX_COLUMN_INDEX,o=h._ITEM_ID_DATA_SOURCE_INDEX,i,r=this._flattenedItems,s=this._itemStates,u;for(i={},n=0,f=s.length;n<f;n++)s[n]&&r[n][c]&&(i[r[n][o]]=r[n][o]);this._checkedItems=i;for(u in i)i.hasOwnProperty(u)&&e.push(i[u]);return e},t.prototype.setCheckboxStateData=function(n,r){var u,o=Math.abs(this._expandStates[n]),f=this._grid._dataSource,e=f[n][h._ITEM_ID_DATA_SOURCE_INDEX];if(f[n][t._CHECKBOX_COLUMN_INDEX]=r,this._disableChildren(e))for(u=n+1;u<=n+o;u++)f[u][t._CHECKBOX_COLUMN_INDEX]=!1,this.setItemState(f[u][h._ITEM_ID_DATA_SOURCE_INDEX],!1),this._itemStates[u]=!r,this._grid.updateRow(undefined,u);this.setItemState(e,r);this._grid.updateRow(undefined,n)},t.prototype.setCheckboxRangeStateData=function(n,t,i){for(var r=n;r<=t;r++)this.setCheckboxStateData(r,i)},t.prototype.getCheckboxState=function(n){var r=this._grid._dataSource;return n>=0?r[n][t._CHECKBOX_COLUMN_INDEX]:!1},t.prototype.getItemEnabled=function(n){return this._allEnabled&&this._itemStates[n]&&!this._blockedCheckIds[this._getIdFromDataIndex(n)]},t.prototype.getBranchCheckedState=function(){var i=!0,e=this._grid._dataSource,u=this.dataProvider.getRootNode(),n=[],r,f;if(u&&(n=u.children),n&&n.length!==0)for(r=0,f=n.length;r<f&&i;r+=1)i=e[n[r].dataIndex][t._CHECKBOX_COLUMN_INDEX];else i=!1;return i},t.prototype._constructRow=function(r){var u=n.prototype._constructRow.call(this,r),f=this._checkedItems.hasOwnProperty(r.id);return u.splice(t._CHECKBOX_COLUMN_INDEX,0,f),u},t.prototype._getCheckboxCellId=function(n){var t=this._grid.getId()||"";return o.format("checkbox-{0}-{1}",t,n)},t.prototype._findCheckbox=function(n){var r=this._getCheckboxCellId(n),t=$("#"+r);return t},t.prototype._createCheckboxCell=function(n,r){var u,e=this._getCheckboxCellId(n),f,s,h,l;return u=$(v("div","grid-cell")),u.width(r.width||20),this.hasCheckBox(n)&&(h=this.getItemEnabled(n),l=this.getItemChecked(n),s=$("<label class='hidden' for='"+e+"'/>").text(this._grid.getColumnValue(n,t._LABEL_COLUMN_INDEX)),u.append(s),f=$("<input type='checkbox' tabindex='-1' id='"+e+"'>").data("checkbox-data-index",n).prop("checked",l).prop("disabled",!h),this._setCheckboxDefaultTitle(f),f.click(c(this,this._onCheckboxClicked)),u.append(f)),u},t.prototype._onCheckboxClicked=function(n){i.logTracePoint("TFS.UI.Controls.Data.ChecklistDataAdapter._onCheckboxClicked.start");var t=$(n.currentTarget),r,u;r=t.data("checkbox-data-index");u=t.is(":checked");this._setCheckedState(t,r,u)},t.prototype._setCheckedState=function(n,t,i){var r=!0;$.isFunction(this._onBeforeCheckChanged)&&(r=this._onBeforeCheckChanged(t,i));r?(this.setCheckboxStateData(t,i),this._raiseCheckedItemsChanged({id:this._getIdFromDataIndex(t)})):n.prop("checked",!i)},t.prototype._raiseCheckedItemsChanged=function(n){this._events.invokeHandlers(t._CHECK_CHANGED,this,n)},t.prototype._setCheckboxDefaultTitle=function(n){n.attr("title",n.attr("disabled")?this._disabledTooltip:"")},t.prototype._getIdFromDataIndex=function(n){return this._flattenedItems[n][h._ITEM_ID_DATA_SOURCE_INDEX]},t.prototype._getDataIndexFromId=function(n){var t=this.dataProvider.getNodeFromId(n);return t?t.dataIndex:undefined},t._CHECKBOX_COLUMN_INDEX=0,t._LABEL_COLUMN_INDEX=1,t._CHECK_CHANGED="checked-items-changed",t.CHECK_COLUMN_NAME="checks-column",t}(h);t.ChecklistDataAdapter=l;s.initClassPrototype(l,{_checkedItems:null,_itemStates:null,_events:null,_disabledTooltip:null,_checkboxRangeRootId:null,_checkboxRangeBegin:null,_checkboxRangeEnd:null,_allEnabled:!0,_blockedCheckIds:null,_disableChildren:null,_noCheckboxes:null});s.tfsModuleLoaded("VSS.UI.Controls.Data",t)});
define("Presentation/Scripts/TFS/TFS.UI.Controls.CheckboxSelectionGrid",["require","exports","VSS/Diag","VSS/Controls/Grids","Presentation/Scripts/TFS/TFS.UI.Controls.Grid.DataAdapters","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/UI","VSS/VSS"],function(n,t,i,r,u,f,e,o,s){var c=f.delegate,a=o.domElem,h=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(r){n.prototype.initializeOptions.call(this,$.extend({asyncInit:!1},r));this._selectAllLabel=r.selectAllLabel||"";this._labelColumnIndex=r.labelColumnIndex||t._DEFAULT_LABEL_COLUMN;this._updateOptions(r)},t.prototype.setGridItems=function(n,t){this.dataProvider=new u.FieldDataProvider(n,{sort:this._options.sort});this.gridAdapter=u.HierarchicalGridDataAdapter.bindAdapter(u.ChecklistDataAdapter,this.dataProvider,this,{noColumn:!0,checkedItemIds:t})},t.prototype.getCheckedItemIds=function(){var n=[];return this.gridAdapter&&(n=this.gridAdapter.getCheckedItemIds()),n},t.prototype._drawHeaderCellValue=function(i){var r=$("<div/>"),f,e;return i.index!==u.ChecklistDataAdapter._CHECKBOX_COLUMN_INDEX?n.prototype._drawHeaderCellValue.call(this,i):(e=!1,i.hasOwnProperty("checked")&&(e=i.checked),f=$("<input type='checkbox' id='"+t._HEADER_CHECKBOX_ID+"'>").prop("checked",e),this._bind(f,"click",c(this,this._onHeaderCheckboxClicked)),r.append(f),r.append(this._createLabel(t._HEADER_CHECKBOX_ID,this._selectAllLabel)),r)},t.prototype.setCheckboxState=function(n,t){var f,e,r;f=this.gridAdapter.getCheckboxState(n);f!==t&&(e=this._createCheckboxId(n,u.ChecklistDataAdapter._CHECKBOX_COLUMN_INDEX),r=$("#"+e,this._canvas),r.length>0&&r.prop("checked",t),this._setCheckboxStateData(n,t))},t.prototype._setCheckboxStateData=function(n,t){this.gridAdapter.setCheckboxStateData(n,t)},t.prototype._updateOptions=function(n){n.columns.splice(u.ChecklistDataAdapter._CHECKBOX_COLUMN_INDEX,0,{canSortBy:!1,text:"",width:30,fixed:!0})},t.prototype._determineIndentIndex=function(){this._indentIndex=u.ChecklistDataAdapter._CHECKBOX_COLUMN_INDEX+1},t.prototype._createLabel=function(n,t){return $("<label/>").attr("For",n).addClass("hidden").text(t)},t.prototype._drawCell=function(t,r,f,e,o,s,h){var l,v,y,p;return o.index!==u.ChecklistDataAdapter._CHECKBOX_COLUMN_INDEX?n.prototype._drawCell.call(this,t,r,f,e,o,s,h):(l=$(a("div","grid-cell")),l.width(o.width||20),p=this.getColumnValue(r,u.ChecklistDataAdapter._CHECKBOX_COLUMN_INDEX),y=this._createCheckboxId(r,u.ChecklistDataAdapter._CHECKBOX_COLUMN_INDEX),v=$("<input type='checkbox' tabindex='-1' id='"+y+"'>").data("checkbox-data-index",r).prop("checked",p),this._bind(v,"click",c(this,this._onCheckboxClicked)),l.append(v),l.append(this._createLabel(y,this.getColumnValue(r,this._labelColumnIndex))),l)},t.prototype._onHeaderCheckboxClicked=function(n){var t;t=$(n.currentTarget).is(":checked");this._setHeaderCheckboxState(t)},t.prototype._onCheckboxClicked=function(n){var t=$(n.currentTarget),i,r;i=t.data("checkbox-data-index");r=t.is(":checked");this.setCheckboxState(i,r)},t.prototype._createCheckboxId=function(n,t){return e.format("checkbox-{0}-{1}",n,t)},t.prototype._setHeaderCheckboxState=function(n){for(var f,e=this._options.columns,o,r=0,s=e.length;r<s;r+=1)if(e[r].index===u.ChecklistDataAdapter._CHECKBOX_COLUMN_INDEX){o=e[r];break}f=$("#"+t._HEADER_CHECKBOX_ID,this._headerCanvas);f.prop("checked",n);o.checked=n},t.prototype._onKeyDown=function(t){var r=n.prototype._onKeyDown.call(this,t);return t.keyCode===o.KeyCode.SPACE&&(this._onSpaceKey(t),r=!1),r},t.prototype._onSpaceKey=function(n){var t=this.getSelectedDataIndex();t>=0&&this.setCheckboxState(t,!this.gridAdapter.getCheckboxState(t))},t.enhancementTypeName="tfs.checkboxselectiongrid",t._DEFAULT_LABEL_COLUMN=1,t._HEADER_CHECKBOX_ID="header-checkbox",t}(r.GridO),l;t.CheckboxSelectionGridO=h;l=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(h);t.CheckboxSelectionGrid=l;s.initClassPrototype(h,{_labelColumnIndex:h._DEFAULT_LABEL_COLUMN,_selectAllLabel:null,dataProvider:null,gridAdapter:null})});
define("Admin/Scripts/TFS.Admin.Common",["require","exports","VSS/VSS","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Array","Admin/Scripts/Resources/TFS.Resources.Admin","VSS/Resources/VSS.Resources.Common","Presentation/Scripts/TFS/TFS.IdentityImage","VSS/Controls/Grids","VSS/Controls","VSS/Diag","VSS/Controls/Menus","VSS/Controls/Notifications","VSS/Events/Handlers","VSS/Events/Services","Presentation/Scripts/TFS/TFS.UI.Widgets","VSS/Utils/UI","Presentation/Scripts/TFS/TFS.Legacy.Ajax","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","VSS/FeatureAvailability/Services","VSS/Operations/RestClient","VSS/Operations/Contracts","Presentation/Scripts/TFS/TFS.OM.Common","VSS/Identities/Picker/Services","VSS/Identities/Picker/Controls","Presentation/Scripts/TFS/TFS.UI.Controls.CheckboxSelectionGrid","Presentation/Scripts/TFS/TFS.UI.Controls.Grid.DataAdapters","jQueryUI/core","jQueryUI/widget"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot){function pt(n,t){function r(n,t,i){for(var u=$(st("ul")).appendTo(t).addClass("dialog-errors"),r=0;r<n.length;r++)i?$(st("li")).appendTo(u).html(n[r]):$(st("li")).appendTo(u).text(n[r])}function u(n,t){for(var u,r=$(st("ul")).appendTo(t).addClass("dialog-errors"),i=0;i<n.length;i++)u=n[i],$(st("li")).appendTo(r).text(u.Errors[0])}t===void 0&&(t=!1);var i=$(st("div"));return n.GeneralErrors.length>0&&r(n.GeneralErrors,i,!1),n.LicenceErrors&&n.LicenceErrors.length>0&&r(n.LicenceErrors,i,!0),n.AADErrors&&n.AADErrors.length>0&&!t&&r(n.AADErrors,i,!0),n.StakeholderLicenceWarnings&&n.StakeholderLicenceWarnings.length>0&&r(n.StakeholderLicenceWarnings,i,!0),n.FailedAddedIdentities.length>0&&u(n.FailedAddedIdentities,i),n.FailedDeletedIdentities.length>0&&u(n.FailedDeletedIdentities,i),i}function nr(n){return n<=2147483647&&n>=-2147483648}function tr(n){return/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(n)}function ir(n){return n?n.trim():n}var st=b.domElem,bt=d.TfsContext.getDefault().configuration,at=d.TfsContext,lt=d.TfsContext.getDefault(),ct=r.delegate,pi=0,vi,kt,wi,bi,ki,vt,dt,ht,wt,ui,fi,gt,ei,oi,ni,ti,ii,ri,si,hi,yt,ci,li,ai,di,yi,gi;t.EmptyGuidString="00000000-0000-0000-0000-000000000000";vi=function(){function n(n,t){t||(t=n.scheme===kt.PersonalAccessToken||n.scheme===kt.OAuth?{parameters:{accessToken:n.passwordKey},scheme:n.scheme}:{parameters:{username:n.username,password:n.passwordKey},scheme:kt.UsernamePassword});var i={id:n.endpointId,description:"",administratorsGroup:null,authorization:t,createdBy:null,data:n.parameters,name:n.endpointName,type:n.type,url:n.url,readersGroup:null,groupScopeId:null,isReady:!1,operationStatus:null};this.endPoint=i}return n.prototype.toServiceEndpoint=function(){return this.endPoint},n.prototype.toServiceEndpointDetails=function(){return{type:this.endPoint.type,url:this.endPoint.url,authorization:this.endPoint.authorization,data:this.endPoint.data}},n}();t.ServiceEndpointDetails=vi,function(n){n.UsernamePassword="UsernamePassword";n.Certificate="Certificate";n.ServicePrincipal="ServicePrincipal";n.PersonalAccessToken="PersonalAccessToken";n.OAuth="OAuth"}(kt=t.EndpointAuthorizationSchemes||(t.EndpointAuthorizationSchemes={})),function(n){n.Azure="azure";n.AzureRM="azurerm";n.Chef="chef";n.ExternalGit="git";n.Generic="generic";n.GitHub="github";n.Jenkins="jenkins";n.Subversion="subversion";n.SSH="ssh"}(wi=t.ServiceEndpointType||(t.ServiceEndpointType={})),function(n){n.AreaName="Build";n.AzureDeploymentEnvironments="32696366-f57b-4529-aec4-61673d4c23c6";n.AzureSubscriptions="0524c91b-a145-413c-89eb-b3342b6826a4"}(bi=t.BuildResourceIds||(t.BuildResourceIds={})),function(n){n[n.Custom=0]="Custom";n[n.AzureWebsite=1]="AzureWebsite";n[n.AzureCloudApp=2]="AzureCloudApp"}(t.DeploymentEnvironmentKind||(t.DeploymentEnvironmentKind={}));ki=t.DeploymentEnvironmentKind;$("body").addClass("resizeTarget");$(window).bind("resize",function(){$("body").triggerHandler("resize")});$.widget("TFS.AutoTextArea",{_create:function(){this.element.bind("keyup scroll",ct(this,this.resize));this.element.bind("blur",ct(this,this.resize));this.resize()},resize:function(){var n=this.element.outerHeight()-this.element.innerHeight();this.element.height(0);this.element.height(this.element[0].scrollHeight+n)}});$.widget("TFS.HorizontalPanel",{_create:function(){var r=this,i,t,n;for(this.controlId=++pi,this.element.closest(".resizeTarget").bind("resize."+this.controlId,function(){r._updateLayout()}),t=0;t<this.options.panels.length;t++)n=this.options.panels[t],this.options.useExisting?n.panelElement=this.element.children("#"+n.id):(i='<div class="layoutPanelHorizontal" />',n.panelElement=$(i).appendTo(this.element),n.id&&n.panelElement.attr("id",n.id));this._updateLayout()},destroy:function(){this.element.closest(".resizeTarget").unbind("resize."+this.controlId);$.Widget.prototype.destroy.apply(this,arguments)},_getPanelSize:function(n){return n.size?{type:n.size.indexOf("%")!==n.size.length-1?"fixed":"variable",size:parseInt(n.size,10)}:n.maxsize?{type:"variable",size:parseInt(n.maxsize,10),isMaxSize:!0}:{type:"auto",size:n.panelElement.outerHeight(!0)}},_updateLayout:function(){for(var n,r,i=this.element.height(),t=0;t<this.options.panels.length;t++)n=this.options.panels[t],n.panelSize=this._getPanelSize(n),n.panelSize.type==="fixed"?(n.panelElement.height(n.panelSize.size),i-=n.panelSize.size):n.panelSize.type==="auto"&&(i-=n.panelSize.size);for(t=0;t<this.options.panels.length;t++)n=this.options.panels[t],n.panelSize.type==="variable"&&(n.panelElement.css("height",""),r=Math.min(i,n.panelSize.size*i/100),n.panelSize.isMaxSize&&(r=Math.min(r,n.panelElement.outerHeight(!0))),n.panelElement.height(r))}});$.widget("TFS.IdentityInput",{options:{filterList:!0,searchHotkey:{altKey:!1,ctrlKey:!0,which:75},searchParams:{},getItemFromIdentity:function(n){return{text:n.DisplayName||n.SubHeader,value:n.TeamFoundationId,data:n}},allowFreeType:!0,_sequenceId:0},addItem:function(n,t){this.options._dropdownControl.add({text:n,value:t})},removeItem:function(n){this.options._dropdownControl._removeItem(null,{value:n});this._inputElement.val("")},destroy:function(){$.Widget.prototype.destroy.apply(this,arguments);this.element.empty()},focus:function(n){r.delay(this,b.BrowserCheckUtils.isMsie()?50:0,function(){if(this.element.data("TFS-Dropdown")){var t=this.element.data("TFS-Dropdown").options._elements._input;n?b.Watermark(t,"focus"):t.focus()}})},getCurrentValue:function(){return this.element.find(".dropdown-input-name").val()},select:function(n,t){var i=this.element.data("TFS-Dropdown");return i.select(n,t)},disable:function(){$.Widget.prototype.disable.apply(this,arguments);this._inputElement.attr("disabled","disabled")},enable:function(){$.Widget.prototype.enable.apply(this,arguments);this._inputElement.attr("disabled",null)},getInputElement:function(){return this._inputElement},_create:function(){this.element.bind("filterItem",this,function(n,t){n.data.options.existingIdentities&&(t.deny=f.contains(n.data.options.existingIdentities,t.item.value))});w.Dropdown(this.element,this.options);this.options._dropdownControl=this.element.data("TFS-Dropdown");this.element.bind("querySearch",this,function(n,t){n.data._querySearch(n,t)});this._inputElement=this.element.find(".dropdown-input-name");this._inputElement.bind("keydown",this,function(n){if(n.keyCode===$.ui.keyCode.ENTER){var t=$(this).val();t&&(n.data.options._dropdownControl.hideList(!0),n.data.element.trigger("newItemAdded",{text:t}),n.preventDefault(),n.stopPropagation())}});this.options.inputControlId&&this._inputElement.attr("id",this.options.inputControlId);this.element.bind("newItemAdded itemSelected",this,function(n){n.data.options._dropdownControl.cancelSearch()});$(".dropdown-input-list",this.element).mousedown(this,function(n){return n.data._inputElement.focus(),!1});this.element.bind("focusout",this,function(n){r.delay(n.data,100,function(){$(document.activeElement).closest(this.element).length===0&&this.options._dropdownControl.cancelSearch()})})},_init:function(){var n,t,i;if(this.options._sequenceId++,this.options._dropdownControl.cancelSearch(),this.options._dropdownControl.clear(),this.options.items){for(this.options._dropdownControl.options.dynamicSearch=!1,n=[],t=0;t<this.options.items.length;t++)i=this.options.items[t],n.push(this.options.getItemFromIdentity(i));this._disambiguate(n);this.options._dropdownControl.add(n)}else this.options._dropdownControl.options.dynamicSearch=!0;this.options._dropdownControl._updateStateIcon()},_disambiguate:function(n){for(var t,r,f,o=!1,s,i=0;i<n.length;i++)t=n[i],r=n[i+1],f=r&&t.text.toLowerCase()===r.text.toLowerCase(),(f||o)&&(t.text=t.data.IsProjectLevel&&(f&&t.data.SubHeader.toLowerCase()===r.data.SubHeader.toLowerCase()||o&&s&&t.data.SubHeader.toLowerCase()===s.data.SubHeader.toLowerCase())?u.format("{0} <{1}> <{2}>",t.text,t.data.SubHeader,e.Project):u.format("{0} <{1}>",t.text,t.data.SubHeader),o=f,s=t)},_querySearch:function(n,t){var i=this,r=++this.options._sequenceId;l.logTracePoint("TFS.IdentityInput.SearchPending");k.getMSJSON(i.options.identityListAction,$.extend({searchQuery:t.value},i.options.searchParams),function(n){if(r===i.options._sequenceId&&i.options._dropdownControl.options._searchActive){for(var f,u=[],t=0;t<n.identities.length;t++)f=n.identities[t],u.push(i.options.getItemFromIdentity(f));i._disambiguate(u);i.options._dropdownControl.add(u);i.options._dropdownControl.completeSearch()}},null,{tracePoint:"TFS.IdentityInput.SearchComplete"})}});t.parseErrors=pt;$.widget("TFS.IdentitySearchControl",{options:{identityList:{},searchParams:{},watermarkText:e.Search},_init:function(){var n=this,t=function(n){return function(t){if(t.keyCode===$.ui.keyCode.ENTER||t.keyCode===$.ui.keyCode.SPACE)return n(),!1}};this.options.identityList._options.searchControl=this;this.element.addClass("identity-search-control");this.searchLabel=$(st("label")).addClass("hidden").attr("for","identitySearchBox").text(e.SearchIdentities);this.searchInput=$('<input class="search-input" type="text" />').attr("name","identitySearchBox");$(st("div")).addClass("search-input-wrapper").append(this.searchLabel).append(this.searchInput).appendTo(this.element);b.Watermark(this.searchInput,{watermarkText:this.options.watermarkText});this.cancelButton=$(st("span")).addClass("cancel-button").appendTo(this.element).attr("tabindex","0").hide().click(ct(this,this._onCancelButton)).keydown(t(ct(this,this._onCancelButton)));this.searchButton=$(st("span")).addClass("search-button").appendTo(this.element).attr("tabindex","0").click(ct(this,this._onSearchButton)).keydown(t(ct(this,this._onSearchButton)));this.goButton=$(st("span")).addClass("go-button").appendTo(this.element).hide().click(ct(this,this._onGoButton)).keydown(t(ct(this,this._onGoButton)));this.options.identityList._initialized?l.logTracePoint("IdentitySearchControl._init.complete"):(this.disable(),this.options.identityList._element.bind("initialized",function(){n.enable();l.logTracePoint("IdentitySearchControl._init.complete")}));this.searchInput.keydown(function(t){var i;t.keyCode===$.ui.keyCode.ESCAPE&&n.options.identityList._options.isSearching?(n.cancelSearch(),t.preventDefault(),t.stopPropagation()):t.keyCode===$.ui.keyCode.ENTER&&(n.options.identityList.hasMore&&(i=$(this).val(),i.length>0?n.fullSearch(i):n.cancelSearch()),t.preventDefault(),t.stopPropagation())});this.searchInput.bind("keyup",function(t){var i;t.keyCode!==$.ui.keyCode.ESCAPE&&t.keyCode!==$.ui.keyCode.ENTER&&(i=$(this).val(),n.options.lastSearchQuery!==i&&(n.options.lastSearchQuery=i,n.filterSearchResults()))})},fullSearch:function(n){var t=this;this.disable();this.showCancelButton();this.element.trigger("searchQueryChanged",n);k.getMSJSON(t.options.identityList._options.identityListAction,$.extend({searchQuery:n},t.options.identityList._options.searchParams),function(n){t.options.identityList.fullSearch(n.identities);t.fullSearchCallback()},null,{wait:t.options.identityList._options.waitObject})},fullSearchCallback:function(){this.enable();this.searchInput.focus()},filterSearchResults:function(){this.options.lastSearchQuery&&this.options.lastSearchQuery.length>0?this.options.identityList.hasMore?this.showGoButton():(this.showCancelButton(),this.options.identityList.localSearch(this.options.lastSearchQuery),this.element.trigger("searchQueryChanged",this.options.lastSearchQuery)):this.cancelSearch()},disable:function(){$.Widget.prototype.disable.apply(this,arguments);this.searchInput.attr("disabled","disabled")},enable:function(){$.Widget.prototype.enable.apply(this,arguments);this.searchInput.attr("disabled",null)},destroy:function(){$.Widget.prototype.destroy.apply(this,arguments);this.element.empty()},showSearchButton:function(){this.searchButton.show();this.cancelButton.hide();this.goButton.hide()},showCancelButton:function(){this.options.identityList._options.isSearching=!0;this.searchButton.hide();this.cancelButton.show();this.goButton.hide()},showGoButton:function(){this.searchButton.hide();this.cancelButton.hide();this.goButton.show()},cancelSearch:function(){this.options.identityList._options.isSearching=!1;this.searchInput.val("");this.options.lastSearchQuery="";this.cancelButton.is(":visible")&&this.options.identityList.cancelSearch();this.element.trigger("searchQueryCancelled");this.showSearchButton();this.focus()},focus:function(){b.Watermark(this.searchInput,"focus")},_onSearchButton:function(){this.options.disabled||this.searchInput.focus()},_onCancelButton:function(){this.options.disabled||(this.cancelSearch(),this.searchInput.focus())},_onGoButton:function(){var n=jQuery.Event("keydown");n.keyCode=$.ui.keyCode.ENTER;this.searchInput.trigger(n)}});vt=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({autoResize:!0},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this.redraw();this._options.autoResize&&this._element.closest(".resizeTarget").bind("resize."+this.getId(),ct(this,this.redraw))},t.prototype.redraw=function(){var t=0,i=0,n;this._header=this._element.children(".fixed-header");this._footer=this._element.children(".fixed-footer");this._content=this._element.children(".fill-content");n=this._element.css("position");n!=="relative"&&n!=="absolute"&&this._element.css("position","relative");this._header.length&&(t=this._header.outerHeight(!0));this._footer.length&&(i=this._footer.outerHeight(!0),this._footer.css({position:"absolute",right:0,bottom:0,left:0}));this._content.css({position:"absolute",top:t,right:0,bottom:i,left:0,overflow:"auto"})},t.enhancementTypeName="tfs.admin.VerticalFillLayout",t}(c.BaseControl);t.VerticalFillLayout=vt;i.initClassPrototype(vt,{_header:null,_footer:null,_content:null});c.Enhancement.registerEnhancement(vt,".vertical-fill-layout");dt=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this._infoMessage=$(st("div")).addClass("identity-info-message").appendTo($(".grid-canvas",this._element))},t.prototype.checkForNoData=function(n){this._dataSource.length===0?(this._infoMessage.show().empty(),$(st("span")).appendTo(this._infoMessage).text(n)):this._infoMessage.hide()},t.prototype.getSelectedItem=function(){return this._dataSource[this._selectedIndex]},t.enhancementTypeName="tfs.admin.AdminGrid",t}(h.GridO);t.AdminGrid=dt;i.initClassPrototype(dt,{_infoMessage:null});ht=function(){function n(){}return n.validateAdminUiFeatureFlagState=function(t){n.adminUIFeatureFlagEnabled||n._getAdminUIFeatureFlag(t)},n._getAdminUIFeatureFlag=function(t){var i=rt.Application.getConnection(t).getService(nt.FeatureAvailabilityService),u=function(t){n.adminUIFeatureFlagEnabled=t;$(".enable-new-admin-ui").length>0&&!r.parseMSJSON($(".enable-new-admin-ui").html(),!1)&&(n.adminUIFeatureFlagEnabled=!1)},f=function(){n.adminUIFeatureFlagEnabled=!1};i.beginIsFeatureEnabled(g.FeatureAvailabilityFlags.AadGroupsAdminUi,u,f)},n.isNameValid=function(n){return n&&!this._illegalEntityNameCharacterRegex.test(n)},n.isControlLabelValid=function(n){return n&&!this._illegalControlLabelCharacterRegex.test(n)},n.isGroupNameValid=function(n){return n&&!this._illegalGroupNameCharacterRegex.test(n)},n.isPageNameValid=function(n){return n&&!this._illegalPageNameCharacterRegex.test(n)},n.validateProcessName=function(n,t){if(n===e.ProvideDescription||!n)return e.NameIsRequired;if(t)for(var i in t)if(u.localeIgnoreCaseComparer(t[i].Name,n)===0)return e.NameMustBeUnique;return this.isNameValid(n)?null:e.IllegalCharacters},n.isOriginFrom=function(n,t){return n.originDirectory.trim().toLowerCase()==t},n.isIdentityTypeOf=function(n,t){return n.entityType.trim().toLowerCase()==t},n.CSS_IDENTITY_AVATAR="identity-image",n.CSS_IDENTITY_NAME="identity-name",n.USER_ENTITY_TYPE_KEY="user",n.GROUP_ENTITY_TYPE_KEY="group",n.TEAM_ENTITY_TYPE_KEY="team",n.VISUAL_STUDIO_DIRECTORY_KEY="vsd",n.AZURE_ACTIVE_DIRECTORY_KEY="aad",n.ACTIVE_DIRECTORY_KEY="ad",n.WINDOWS_MACHINE_DIRECTORY_KEY="wmd",n.ADD_MEMBERS="AddMembers",n.ADD_AS_MEMBER="AddAsMember",n.SEARCH_CONSTRAINT_MATERIALIZED_AAD_GROUPS_ONLY=ut.ServiceHelpers.ExtensionData_MaterializedAadGroupsOnlyItem,n.SEARCH_CONSTRAINT_NO_RESTRICTED_VISIBILITY_GROUPS=ut.ServiceHelpers.ExtensionData_NoServiceIdentities,n.TFS_ADMIN_IDENTITY_PICKER_SEARCH_EXTENSION_ID="F12CA7AD-00EE-424F-B6D7-9123A60F424F",n.FILTER_USERS_AND_GROUPS_CONSUMER_ID="E83867CC-1E27-479C-A222-9ED970215799",n.ADD_TEAM_ADMIN_DIALOG_CONSUMER_ID="90200E23-131F-4621-AE8C-71E2743F9177",n.ADD_MEMBER_DIALOG_CONSUMER_ID="88BE091D-67C7-4FD7-BB3C-155C25E86E27",n.CHANGE_ACCOUNT_OWNER_CONSUMER_ID="E7887735-3BA6-42EC-9A78-697C77BFCD9D",n.GRID_CONTACT_CARD_CONSUMER_ID="6A943022-7624-4740-A5CA-6D593A99BF4E",n._illegalEntityNameCharacterRegex=/[.,;'`~:\/\\\*|?"&%$!+=()\[\]{}<>-]/,n._illegalItemNameCharacterRegex=/[.,;'`~:\/\\\*|?"&%$!+=()\[\]{}-]/,n._illegalGroupNameCharacterRegex=/[&]/,n._illegalPageNameCharacterRegex=/[&]/,n._illegalControlLabelCharacterRegex=/[&]/,n}();t.AdminUIHelper=ht;wt=function(n){function t(t){n.call(this,t);this.showBuckets=!0}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({allowMultiSelect:!1,gutter:!1,cssClass:"identity-grid",sharedMeasurements:!1,source:[]},t));ht.validateAdminUiFeatureFlagState(this._options.tfsContext)},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._options.waitObject={image:bt.getResourcesFile("big-progress.gif"),message:u.htmlEncode(e.ProgressPleaseWait),target:this._options.host};this.populate()},t.prototype.populate=function(){l.logTracePoint("IdentityGrid.IdentityListAction.Pending");k.getMSJSON(this._options.identityListAction,this._options.searchParams,ct(this,this._completeInitialize),null,{tracePoint:"IdentityGrid.IdentityListAction.Complete",wait:this._options.waitObject})},t.prototype._completeInitialize=function(n){for(var i=[],r,t=0;t<n.identities.length;t++)r=n.identities[t],i[t]=[r];this._options.source=i;this._originalData=i;this.hasMore=n.hasMore;this.totalIdentityCount=n.totalIdentityCount;this.treeStructure=null;this.showBuckets=!0;this.initializeDataSource();this.getSelectedRowIntoView();this.checkForNoData(e.NoIdentitiesFound);this._element.trigger("initialized")},t.prototype.setSelectedRowIndex=function(t){n.prototype.setSelectedRowIndex.call(this,t);this.getSelectedRowIntoView()},t.prototype.fullSearch=function(n,t){t===void 0&&(t=!0);for(var r=[],i=0;i<n.length;i++)r.push([n[i]]);this._options.source=r;this.treeStructure=null;this.showBuckets=t;this.initializeDataSource();this.checkForNoData(e.NoIdentitiesMatchSearch)},t.prototype.localSearch=function(n){for(var i,r=[],u,t=0;t<this._originalData.length;t++)i=this._originalData[t][0],u=[i.FriendlyDisplayName,i.SubHeader],u.join("\n").toLocaleLowerCase().indexOf(n.toLocaleLowerCase())>-1&&r.push([i]);this._options.source=r;this.treeStructure=null;this.initializeDataSource();this.checkForNoData(e.NoIdentitiesMatchSearch)},t.prototype.cancelSearch=function(){this._options.source=this._originalData;this.treeStructure=null;this.initializeDataSource();this.checkForNoData(e.NoIdentitiesFound)},t.prototype.cacheRows=function(n,t,i){if(this.hasMore&&this._dataSource.length>0&&i.length===0&&!this._options.isSearching){var r=this,u;u=this._dataSource[this._dataSource.length-1][0];this.hasMore=!1;this._options.searchControl.disable();k.getMSJSON(this._options.identityListAction,$.extend({lastSearchResult:u.DisplayName},this._options.searchParams),function(n){for(var i=[],t=0;t<n.identities.length;t++)i[t]=[n.identities[t]];r._originalData=r._originalData.concat(i);r._options.source=r._originalData;r._resetScroll=!1;r.treeStructure=null;r.initializeDataSource();r._resetScroll=!0;r.hasMore=n.hasMore;r._options.searchControl.enable()},null,{wait:r._options.waitObject})}},t.prototype._createIdentityCell=function(n,t,i,r,f,e,h){var l,c,a,v;return c=this.getColumnValue(t,0,h),l=$(st("div")).addClass("grid-cell identity-cell"),l.width(f.width||20),ht.adminUIFeatureFlagEnabled?(h===e&&r>0&&(a=r*16-13,f.indentOffset=a,i&&(v=$(st("div","icon grid-tree-icon")).appendTo(l).css("left",a),i>0?v.addClass("icon-tree-expanded"):v.addClass("icon-tree-collapsed")),l.css("text-indent",r*16+"px")),ui.getAvatar(lt,"EntityId"in c&&c.EntityId&&c.EntityId.trim()?c.EntityId:c.TeamFoundationId).addClass(ht.CSS_IDENTITY_AVATAR).appendTo(l).attr("alt",u.format(o.ImageOf,c.DisplayName)),$(st("span")).appendTo(l).addClass(ht.CSS_IDENTITY_NAME).text(c.FriendlyDisplayName),f.maxLength=Math.max(f.maxLength||0,c.FriendlyDisplayName.length+4),c.IdentityType===ht.USER_ENTITY_TYPE_KEY&&c.SubHeader?l.attr("title",c.SubHeader):l.attr("title",c.DisplayName)):(s.identityImageElement(lt,c.TeamFoundationId).addClass("identity-image").appendTo(l).attr("alt",u.format(o.ImageOf,c.DisplayName)),$(st("span")).appendTo(l).addClass("identity-name").text(c.FriendlyDisplayName),f.maxLength=Math.max(f.maxLength||0,c.FriendlyDisplayName.length+4),c.IdentityType&&c.IdentityType.toLowerCase()==="user"&&c.SubHeader?l.attr("title",c.SubHeader):l.attr("title",c.DisplayName)),f.rowCss&&l.addClass(f.rowCss),l},t.prototype._updateRow=function(t,i,r,u,f){n.prototype._updateRow.call(this,t,i,r,u,f);this._dataSource[i][0].isRemoved?t.row.addClass("removed-identity"):t.row.removeClass("removed-identity")},t.enhancementTypeName="tfs.admin.identitygrid",t}(dt);t.IdentityGrid=wt;i.initClassPrototype(wt,{hasMore:!1,_originalData:null,totalIdentityCount:0});ui=function(){function n(){}return n.getAvatar=function(t,i,r,u,f){t||(t=at.getDefault());var e=n._createAvatarElement(r,u,f);return e.attr("src",this._getAvatarUrl(t,i)),i&&e.addClass("identity-"+i),e},n._createAvatarElement=function(n,t,i){var r;return r=$(st("img","identity-picture")),t&&r.attr("title",t),n&&r.addClass(n),i&&r.attr("alt",i),r},n._getAvatarUrl=function(n,t){return n.getActionUrl("GetDdsAvatar","common",{id:t,area:"api"})},n}();t.AvatarHelper=ui;fi=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({allowMoveColumns:!1},t));ht.validateAdminUiFeatureFlagState(this._options.tfsContext);ht.adminUIFeatureFlagEnabled&&p.getService().attachEvent(ft.IdCardDialog.IDCARD_LOADED_EVENT,ct(this,this._stopProgressCursor))},t.prototype.onDeleteKey=function(n){if(n&&n.rowInfo&&n.rowInfo.row&&n.event&&n.event.altKey===!1&&n.event.ctrlKey===!1&&n.event.shiftKey===!1){var t=n.rowInfo.row.find(".remove-identity-link");if(t.length>0)return t.click(),!1}},t.prototype.onEnterKey=function(n){if(n&&n.rowInfo&&n.rowInfo.row){var t=n.rowInfo.row.find(".add-identity-link"),i=n.rowInfo.row.find(".remove-identity-link");if(t.length>0)return t.click(),!1;if(i.length>0)return i.click(),!1}},t.prototype.onRowDoubleClick=function(n){if(ht.adminUIFeatureFlagEnabled&&(this._stopProgressCursor(),t._clickCounter=0),n&&n.rowInfo){var i=this._dataSource[n.rowInfo.dataIndex][0];!i||i.IdentityType!=="group"&&i.IdentityType!=="team"||i.IsAadGroup||i.IsWindowsGroup||this._element.trigger("open-group-details",i)}},t.prototype._completeInitialize=function(t){var i;i=[{text:e.DisplayName,index:e.DisplayName,width:200,headerCss:"identity-grid-display-name",getCellContents:this._createIdentityCell,canSortBy:!t.hasMore,comparer:function(n,t,i,r){var f=i[0],e=r[0];return u.localeIgnoreCaseComparer(f.FriendlyDisplayName,e.FriendlyDisplayName)}},{text:e.UsernameOrScope,index:e.UsernameOrScope,width:200,getColumnValue:function(n,t,i){var r=this.getColumnValue(n,0,i);return r.SubHeader},canSortBy:!t.hasMore,comparer:function(n,t,i,r){var f=i[0],e=r[0];return u.localeIgnoreCaseComparer(f.SubHeader,e.SubHeader)}},{text:"",width:100,canSortBy:!1,getCellContents:function(n,t,i,r,u,f,o){var h,c,l,s;return h=$(st("div")).addClass("grid-cell"),h.width(u.width||20),c=this.getColumnValue(t,0,o),l=$(st("div")),s=$(st("span")).appendTo(l),this._options.preventEdit||(c.isRemoved?c.inProgress?s.text(e.UndoInProgress):$(st("a")).appendTo(s).addClass("add-identity-link").text(e.Undo).click(function(n){$(n.target).trigger("add-identity-event")}):c.inProgress?s.text(e.RemoveInProgress):$(st("a")).appendTo(s).addClass("remove-identity-link").text(e.RemoveAction).click(function(n){$(n.target).trigger("remove-identity-event")})),u.maxLength=Math.max(u.maxLength||0,s.text().length+4),h.html(l),h.addClass("manage-membership-action-cell"),h}}];this._options.columns=i;n.prototype._completeInitialize.call(this,t)},t._sortIIdentitiesByName=function(n){return n.sort(function(n,t){if(!n)return-1;if(!t)return 1;var i=n.FriendlyDisplayName?n.FriendlyDisplayName:n.DisplayName?n.DisplayName:"",r=t.FriendlyDisplayName?t.FriendlyDisplayName:t.DisplayName?t.DisplayName:"";return i.toLocaleLowerCase().trim().localeCompare(r.toLocaleLowerCase().trim())})},t.prototype._createIdentityCell=function(t,i,r,u,f,e,o){var s=n.prototype._createIdentityCell.call(this,t,i,r,u,f,e,o);return ht.adminUIFeatureFlagEnabled&&this._bind(s,"click",ct(this,this.onGridCellClick)),s},t.prototype._showProgressCursor=function(){$("body").addClass("busy-cursor");$(".grid div").addClass("busy-cursor")},t.prototype._stopProgressCursor=function(){$("body").removeClass("busy-cursor");$(".grid div").removeClass("busy-cursor")},t.prototype.onGridCellClick=function(n){var i=this;if(this._showProgressCursor(),t._clickCounter!=0){t._clickCounter=0;clearTimeout(t._timer);return}t._clickCounter=1;t._timer=setTimeout(ct(this,function(){if(clearTimeout(t._timer),t._clickCounter){t._clickCounter=0;var r=i.getRowData(i._selectedIndex),u={anchor:i.getRowInfo(i._selectedIndex).row,uniqueIdentifier:r[0].IdentityType.toLowerCase().trim()=="group"||!lt.isHosted?r[0].EntityId:r[0].AccountName,leftValue:n.pageX,identityType:{User:!0,Group:!0},operationScope:{Source:!0,IMS:!0}};i._showIdCardDialog(u)}},t._clickInterval))},t.prototype._showIdCardDialog=function(n){if(ht.adminUIFeatureFlagEnabled){var t={identity:n.identity,uniqueIdentifier:n.uniqueIdentifier,anchor:n.anchor,leftValue:n.leftValue||0,operationScope:n.operationScope,identityType:n.identityType,consumerId:ht.GRID_CONTACT_CARD_CONSUMER_ID};c.Enhancement.enhance(ft.IdCardDialog,"<div/>",t)}},t.enhancementTypeName="tfs.admin.membershipidentitygrid",t._clickCounter=0,t._clickInterval=250,t}(wt);t.MembershipIdentityGrid=fi;gt=function(n){function t(t){n.call(this,t);this._delayedRefresh=null;ht.validateAdminUiFeatureFlagState(this._options.tfsContext)}return __extends(t,n),t.prototype._onMenuItemClick=function(n){var t=this,u=this._getCommandName(n),r=function(n){return n?n._commandSource._item:null},i;switch(u){case"add-members":return this._checkAddPermission(ct(this,function(){a.menuManager.executeCommand(new y.CommandEventArgs("add-members-dialog",{saveCallback:ct(this,this._saveIdentitiesCallback),isTeam:this._options.isTeam,tfsContext:this._options.tfsContext},null))})),!1;case"add-groups":return this._checkAddPermission(ct(this,function(){a.menuManager.executeCommand(new y.CommandEventArgs("add-groups-dialog",{saveCallback:ct(this,this._saveIdentitiesCallback),joinGroupTfid:this._options.joinToGroupTfid,joinGroupExpandParentScopes:this._options.joinToGroupExpandParentScopes,showAllGroupsIfCollection:this._options.showAllGroupsIfCollection,tfsContext:this._options.tfsContext},null))})),!1;case"add-Aad-groups":return this._checkAddPermission(ct(this,function(){a.menuManager.executeCommand(new y.CommandEventArgs("add-Aad-groups-dialog",{saveCallback:ct(this,this._saveAadIdentitiesCallback),joinGroupTfid:this._options.joinToGroupTfid,showAllGroupsIfCollection:this._options.showAllGroupsIfCollection,tfsContext:this._options.tfsContext},null))})),!1;case"add-identity-picker-identities":return i=function(n){a.menuManager.executeCommand(new y.CommandEventArgs("identity-picker-dialog",{saveCallback:ct(t,t._saveIdentityPickerIdentitiesCallback),tfsContext:t._options.tfsContext,groupMembershipOpType:r(n).groupMembershipOpType},null))},r(n).groupMembershipOpType==ht.ADD_MEMBERS?this._checkAddPermission(ct(this,function(){i(n)})):i(n),!1;case"join-group":return a.menuManager.executeCommand(new y.CommandEventArgs("join-group-dialog",{saveCallback:ct(this,this._saveIdentitiesCallback)},null)),!1;case"refresh":return this.refreshIdentityGrid(),!1;case"search":return this._showSearchBox(),!1}},t.prototype._getCommandName=function(n){return n.get_commandName()},t.prototype._getActionItems=function(){var n=[],t=[],i,r,u,o,f,s,h;return ht.adminUIFeatureFlagEnabled?(s=this._options.editMembers?ht.ADD_MEMBERS:ht.ADD_AS_MEMBER,f={id:"add-identity-picker-identities",showIcon:!0,icon:"bowtie-icon bowtie-math-plus-heavy",showText:!0,text:e.IdentityPickerDialog_AddUsersAndGroupsButtonText,groupMembershipOpType:s},(this._options.preventAdd||this._options.disableAdd)&&(f.disabled=!0,f.title=this._options.restrictionReason),n.push(f),n.push({separator:!0}),n.push({id:"refresh",text:e.Refresh,showText:!1,icon:"bowtie-icon bowtie-navigate-refresh"}),this._options.includeSearch!==!1&&(n.push({separator:!0}),n.push({id:"search",noIcon:!0,text:e.Search})),n):(this._options.editMembers?(i=this._options.tfsContext.isHosted?{id:"add-members",noIcon:!0,text:e.AddMembers}:{id:"add-members",noIcon:!0,text:e.AddWindowsMembers},r={id:"add-groups",noIcon:!0,text:lt.isHosted?e.AddTfsGroupHosted:e.AddTfsGroup},this._options.preventAdd&&(i.disabled=!0,r.disabled=!0,i.title=this._options.restrictionReason,r.title=this._options.restrictionReason),t.push(i),t.push(r),h=rt.Application.getConnection(this._options.tfsContext).getService(nt.FeatureAvailabilityService),lt.isHosted&&this._options.showAddAadMembers&&(o={id:"add-Aad-groups",noIcon:!0,text:e.AddAadGroup},t.push(o)),lt.isHosted&&this._options.showAddAadMembersWarning&&this._errorPane.setMessage(e.AADGroupMembersAzurePortal,v.MessageAreaType.Warning),n.push({id:"manage-actions",idIsAction:!1,text:e.AddMenuItem,noIcon:!0,childItems:t,disabled:this._options.preventAdd})):(u={id:"join-group",noIcon:!0,text:e.JoinGroup},this._options.preventJoin&&(u.disabled=!0,u.title=this._options.restrictionReason),n.push(u)),n.push({separator:!0}),n.push({id:"refresh",text:e.Refresh,showText:!1,icon:"bowtie-icon bowtie-navigate-refresh"}),this._options.includeSearch!==!1&&(n.push({separator:!0}),n.push({id:"search",noIcon:!0,text:e.Search})),n)},t.prototype.initialize=function(){var t=this,i;n.prototype.initialize.call(this);this._setupActionUrls();this._element.addClass("vertical-fill-layout");this._verticalFillLayout=c.Enhancement.ensureEnhancement(vt,this._element);i=$(st("div")).addClass("membership-control-header fixed-header").appendTo(this._element);this._errorPane=c.BaseControl.createIn(v.MessageAreaControl,i);this._errorPane._element.bind(v.MessageAreaControl.EVENT_DISPLAY_COMPLETE,function(){t._verticalFillLayout.redraw()});this._setupActions(i);this._gridContainer=$(st("div")).addClass("manage-membership-grid fill-content").appendTo(this._element).bind("initialized",ct(this,this._fireMemberCountChangedEvent)).bind("initialized",ct(this,this._gridInitialized));this._prepareInitialize();this._notificationPane=$(st("div")).appendTo(this._element).addClass("fixed-footer manage-membership-notifications");$(st("div")).appendTo(this._notificationPane).addClass("icon bowtie-icon bowtie-edit-delete").css("float","right").css("cursor","pointer").click(function(){t._closeNotification()}).hide();this._notificationContent=$(st("span")).html("&nbsp;").appendTo(this._notificationPane);this._verticalFillLayout.redraw();this._notificationPane.hide();this._element.bind("add-identity-event remove-identity-event",function(n){var i,r;i=t._options.identityGrid.getSelectedRowIndex();r=t._options.identityGrid._dataSource[i][0];t._removeIdentity(r.TeamFoundationId,i,n.type==="add-identity-event")});this.refreshIdentityGrid()},t.prototype.setFocus=function(){this._menuBar&&this._menuBar.activate()},t.prototype.refreshIdentityGrid=function(){this._options.identityGrid?($.extend(this._options.identityGrid._options,this._options.gridOptions),this._options.identityGrid.populate()):(this._options.identityGrid=c.Enhancement.enhance(fi,this._gridContainer,this._options.gridOptions),this._identitySearchControl=this._searchControl.IdentitySearchControl({identityList:this._options.identityGrid,watermarkText:e.FindMembers}).data("TFS-IdentitySearchControl"))},t.prototype._setupActionUrls=function(){this._options.actionUrls||(this._options.actionUrls={canAddMemberToGroup:this._options.tfsContext.getActionUrl("CanAddMemberToGroup","identity",{area:"api"}),readGroupMembers:this._options.tfsContext.getActionUrl("ReadGroupMembers","identity",{area:"api"}),editMembership:this._options.tfsContext.getActionUrl("EditMembership","identity",{area:"api"}),addIdentities:this._options.tfsContext.getActionUrl("AddIdentities","identity",{area:"api"})})},t.prototype._checkAddPermission=function(n){var t=this;this._options.joinToGroupTfid||this._options.customGroupId?k.getMSJSON(this._options.actionUrls.canAddMemberToGroup,{groupId:this._options.joinToGroupTfid||this._options.customGroupId},function(i){i.canEdit?n():t._errorPane.setMessage(e.MissingAddPermission,v.MessageAreaType.Warning)}):n()},t.prototype._setupActions=function(n){var t=$(st("div")).appendTo(n).addClass("membership-control-actions toolbar");return this._menuBar=c.BaseControl.createIn(a.MenuBar,t,{items:this._getActionItems(),executeAction:ct(this,this._onMenuItemClick),showIcon:!0}),this._searchControl=$(st("div")).appendTo(t).addClass("identity-grid-search").css("display","inline-block").hide(),t},t.prototype._prepareInitialize=function(){var n=this._prepareActionParams();this._options.gridOptions={identityListAction:n.actionUrl,searchParams:n.params,preventEdit:this._options.editMembers&&this._options.preventAdd||!this._options.editMembers&&this._options.preventJoin,host:this._element,adminUIFeatureFlagEnabled:ht.adminUIFeatureFlagEnabled||null}},t.prototype._prepareActionParams=function(){return{actionUrl:this._options.actionUrls.readGroupMembers,params:{scope:this._options.joinToGroupTfid||this._options.customGroupId,readMembers:this._options.editMembers}}},t.prototype._showSearchBox=function(){this._menuBar.getItem("search").hideElement();this._searchControl.show();this._identitySearchControl.focus()},t.prototype._prepareRemoveIdentity=function(){return{actionUrl:this._options.actionUrls.editMembership,params:{groupId:this._options.joinToGroupTfid||this._options.customGroupId}}},t.prototype._removeIdentity=function(n,t,i){var u=this,o=this._prepareRemoveIdentity(),f=o.params,s;f.editMembers=this._options.editMembers;i?f.addItemsJson=r.stringifyMSJSON([n]):f.removeItemsJson=r.stringifyMSJSON([n]);s=this._options.identityGrid._dataSource[t][0];s.inProgress=!0;this._options.identityGrid.updateRow(t);k.postMSJSON(o.actionUrl,f,function(r){var o,s,f;if(r.HasErrors&&(o=pt(r),u._options.editMembers?u._errorPane.setError({header:e.ErrorRemoving,content:o},null):u._errorPane.setError({header:e.ErrorLeaving,content:o},null)),u._membersModified=!0,u._options.identityGrid._dataSource[t][0].TeamFoundationId!==n)for(t=null,f=0;f<u._options.identityGrid._dataSource.length;f++)if(u._options.identityGrid._dataSource[f][0].TeamFoundationId===n){t=f;break}t!==null&&(s=u._options.identityGrid._dataSource[t][0],r.HasErrors||(s.isRemoved=!i,i?u._options.identityGrid.totalIdentityCount++:u._options.identityGrid.totalIdentityCount--),s.inProgress=!1,u._options.identityGrid.updateRow(t));u._fire("member-removed");u._fireMemberCountChangedEvent()},null,{tracePoint:"EditMembership.RemoveIdentity.Done"})},t.prototype._fireMemberCountChangedEvent=function(){this._fire("member-count-changed",{TeamFoundationId:this._options.joinToGroupTfid,MemberCount:this._options.identityGrid.totalIdentityCount})},t.prototype._gridInitialized=function(){this._options.setInitialFocus&&this.setFocus();this._options.identityGrid.totalIdentityCount===100&&(this._options.editMembers?this._setNonDisappearNotification(e.OnlyShowFirst100Members):this._setNonDisappearNotification(e.OnlyShowFirst100Memberships))},t.prototype._setNotification=function(n,t){this._notificationContent.text(n);this._notificationPane.slideDown();t===undefined&&(t=6e3);t>0&&this.delayExecute("setNotification",t,!0,function(){this._notificationPane.slideUp()})},t.prototype._setNonDisappearNotification=function(n){this._notificationContent.text(n);this._notificationPane.slideDown()},t.prototype._closeNotification=function(){this.cancelDelayedFunction("setNotification");this._notificationPane.slideUp()},t.prototype._prepareSaveIdentities=function(n){var t;return n.existingUsers=$.map(n.existingUsers,function(n){return n.tfid}),t=this._options.editMembers?ht.adminUIFeatureFlagEnabled?{newUsersJson:r.stringifyMSJSON(n.newUsers),existingUsersJson:r.stringifyMSJSON(n.existingUsers),groupsToJoinJson:r.stringifyMSJSON([this._options.joinToGroupTfid||this._options.customGroupId]),aadGroupsJson:r.stringifyMSJSON(n.aadGroups)}:{newUsersJson:r.stringifyMSJSON(n.newUsers),existingUsersJson:r.stringifyMSJSON(n.existingUsers),groupsToJoinJson:r.stringifyMSJSON([this._options.joinToGroupTfid||this._options.customGroupId])}:{newUsersJson:r.stringifyMSJSON(n.newUsers),existingUsersJson:r.stringifyMSJSON([this._options.joinToGroupTfid||this._options.customGroupId]),groupsToJoinJson:r.stringifyMSJSON(n.existingUsers)},{actionUrl:this._options.actionUrls.addIdentities,params:t}},t.prototype._saveIdentityPickerIdentitiesCallback=function(n,t){var u=[],f=[],e=[],o=[],r=new ei,i,s;n.forEach(function(n){ht.isIdentityTypeOf(n,ht.USER_ENTITY_TYPE_KEY)?(ht.isOriginFrom(n,ht.VISUAL_STUDIO_DIRECTORY_KEY)?e.push(n):ht.isOriginFrom(n,ht.AZURE_ACTIVE_DIRECTORY_KEY)&&u.push(n),r.tryAddUserOrGroupIfValid(n)):ht.isIdentityTypeOf(n,ht.GROUP_ENTITY_TYPE_KEY)&&(ht.isOriginFrom(n,ht.VISUAL_STUDIO_DIRECTORY_KEY)?o.push(n):ht.isOriginFrom(n,ht.AZURE_ACTIVE_DIRECTORY_KEY)&&f.push(n),r.tryAddUserOrGroupIfValid(n))});i={};i.newUsers=[];i.existingUsers=[];i.aadGroups=[];f.length&&f.forEach(function(n){i.aadGroups.push(n.originId)});e.length+u.length&&(s=e.concat(u),s.forEach(function(n){n.localId?i.existingUsers.push({tfid:n.localId}):i.newUsers.push(n.signInAddress)}));r.getAllExistingUsersLocalIds().forEach(function(n){i.existingUsers.push({tfid:n})});r.getAllNewUsersSamAccountNames().forEach(function(n){i.newUsers.push(n)});o.length&&o.forEach(function(n){n.localId&&i.existingUsers.push({tfid:n.localId})});t.length&&(i.newUsers=i.newUsers.concat(t));this._saveIdentitiesCallback(i)},t.prototype._saveAadIdentitiesCallback=function(n){var t=this,i=this._prepareSaveIdentities(n),r=this;this._errorPane.clear();i.actionUrl=this._options.tfsContext.getActionUrl("AddAadGroups","identity",{area:"api"});this._requestContext=k.postMSJSON(i.actionUrl,i.params,function(n){var i,r;n.HasErrors&&(i=pt(n),n.AADErrors.length>0?ht.adminUIFeatureFlagEnabled||(r=e.ConfirmUserAAD,t._errorPane.setMessage(i,v.MessageAreaType.Warning)):(r=t._options.editMembers?n.FailedAddedIdentities.length===0?e.ErrorAddingZero:n.FailedAddedIdentities.length===1?e.ErrorAddingOne:u.format(e.ErrorAdding,n.FailedAddedIdentities.length):n.FailedAddedIdentities.length===1?e.ErrorJoiningOne:u.format(e.ErrorJoining,n.FailedAddedIdentities.length),t._errorPane.setError({header:r,content:i},null)));n.AddedIdentities.length>0&&t._fire("identity-aad-added");t._menuBar.activate();t.refreshIdentityGrid()},null,{tracePoint:"AddIdentityDialog.SaveChanges.Success"})},t.prototype._saveIdentitiesCallback=function(n){var f=this,o=this._prepareSaveIdentities(n),s=this;this._requestContext=k.postMSJSON(o.actionUrl,o.params,function(n){var o,s;n.HasErrors&&(o=pt(n),n.AADErrors.length>0?ht.adminUIFeatureFlagEnabled||(s=e.ConfirmUserAAD,f._errorPane.setMessage(o,v.MessageAreaType.Warning)):(s=f._options.editMembers?n.FailedAddedIdentities.length===0?e.ErrorAddingZero:n.FailedAddedIdentities.length===1?e.ErrorAddingOne:u.format(e.ErrorAdding,n.FailedAddedIdentities.length):n.FailedAddedIdentities.length===1?e.ErrorJoiningOne:u.format(e.ErrorJoining,n.FailedAddedIdentities.length),f._errorPane.setError({header:s,content:o},null)));n.HasWarnings&&(o=pt(n,ht.adminUIFeatureFlagEnabled),n.StakeholderLicenceWarnings.length>0&&f._errorPane.setMessage(o,v.MessageAreaType.Warning));n.AddedIdentities.length>0&&f._fire("member-added");f._menuBar.activate();ht.adminUIFeatureFlagEnabled?(f._progressId=i.globalProgressIndicator.actionStarted("refreshMembershipViewDelay",!0),f._delayedRefresh?f._delayedRefresh.reset():(f._delayedRefresh=new r.DelayedFunction(f,t.MEMBERSHIP_REFRESH_DELAY,"refreshMembershipView",function(){f._element&&f.refreshIdentityGrid();i.globalProgressIndicator.actionCompleted(f._progressId)}),f._delayedRefresh.start())):f.refreshIdentityGrid()},null,{tracePoint:"AddIdentityDialog.SaveChanges.Success",wait:{image:bt.getResourcesFile("big-progress.gif"),message:u.htmlEncode(e.ProgressPleaseWait),target:this._element}})},t.enhancementTypeName="tfs.admin.membershipcontrol",t.MEMBERSHIP_REFRESH_DELAY=5e3,t}(c.BaseControl);t.MembershipControl=gt;ei=function(){function n(){this.windowsUsersAndGroups=[]}return n.prototype.tryAddUserOrGroupIfValid=function(n){return ht.isOriginFrom(n,ht.ACTIVE_DIRECTORY_KEY)||ht.isOriginFrom(n,ht.WINDOWS_MACHINE_DIRECTORY_KEY)?(this.windowsUsersAndGroups.push(n),!0):!1},n.prototype.getAllExistingUsersLocalIds=function(){var n=[];return this.windowsUsersAndGroups.forEach(function(t){t.localId&&n.push(t.localId)}),n},n.prototype.getAllNewUsersSamAccountNames=function(){var n=[];return this.windowsUsersAndGroups.forEach(function(t){t.localId||n.push(t.scopeName?t.scopeName+"\\"+t.samAccountName:t.samAccountName)}),n},n}();t.WindowsUsersAndGroups=ei;i.initClassPrototype(gt,{_menuBar:null,_verticalFillLayout:null,_identitySearchControl:null,_errorPane:null,_searchControl:null,_gridContainer:null,_notificationPane:null,_membersModified:!1,_requestContext:null,_notificationContent:null});i.classExtend(gt,at.ControlExtensions);oi=function(n){function t(t){n.call(this,t);this._refreshMembers=!0}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({header:!1,delayWindowsGroups:!1},t));ht.validateAdminUiFeatureFlagState(this._options.tfsContext)},t.prototype.initialize=function(){this._options.columns=[{text:"",width:"100%",canSortBy:!1,getCellContents:this._createIdentityCell,getColumnValue:function(n,t,i){var r=this.getColumnValue(n,0,i);return r.TeamFoundationId?r.FriendlyDisplayName:r}}];n.prototype.initialize.call(this)},t.prototype.initializeDataSource=function(t){var i,r,u=this._options.identityToSelect;if(this._options.isTeam&&!this._options.isSearching?this._populateSourceForTeams():this._populateSourceWithBuckets(),u){for(i=0;i<this._options.source.length;i++)if(r=this._options.source[i][0],r.TeamFoundationId===u){this._selectedIndex=ht.adminUIFeatureFlagEnabled&&!this._refreshMembers?this._getRowIndex(i):i;break}}else if(t)ht.adminUIFeatureFlagEnabled&&this._options.selectedIndex&&(this._selectedIndex=this._getRowIndex(this._options.selectedIndex));else for(i=0;i<this._options.source.length;i++)if(r=this._options.source[i][0],r.TeamFoundationId){this._selectedIndex=i;break}this._options.keepSelection=!0;n.prototype.initializeDataSource.call(this)},t.prototype.expandNode=function(t){var i=this,r=this._dataSource[t],u=r.hasMore,f=r.actionUrl,e=r.actionParams;u&&(r.hasMore=!1,k.getMSJSON(f,e,function(n){i.hasMore=n.hasMore;for(var u=[],r=0;r<n.identities.length;r++)u[r]=[n.identities[r]];i._originalData=i._originalData.concat(u);i._options.source=i._originalData;ht.adminUIFeatureFlagEnabled&&(i._treeIndex=t,i._newTreeNodes=u,i._options.selectedIndex=t,i._options.identityToSelect=null);i._resetScroll=!1;i.initializeDataSource(!0)}));n.prototype.expandNode.call(this,t)},t.prototype.nonAncestorFolderToggled=function(t,i){if(ht.adminUIFeatureFlagEnabled){var r=this._expandStates[t.dataIndex];r<0&&n.prototype.nonAncestorFolderToggled.call(this,t,i)}else n.prototype.nonAncestorFolderToggled.call(this,t,i)},t.prototype.ancestorFolderToggled=function(t){if(ht.adminUIFeatureFlagEnabled){var i=this._expandStates[t.dataIndex];i<0&&n.prototype.ancestorFolderToggled.call(this,t)}else n.prototype.ancestorFolderToggled.call(this,t)},t.prototype.cacheRows=function(t,i,r){this._options.canPage&&n.prototype.cacheRows.call(this,t,i,r)},t.prototype.getCurrentIdentity=function(){var n=this.getSelectedDataIndex();return n>-1&&n<this._dataSource.length?this._dataSource[n][0]:null},t.prototype.setRefreshMembers=function(n){this._refreshMembers=n},t.prototype.selectedIndexChanged=function(n,t){n>-1&&this._dataSource.length>t?!ht.adminUIFeatureFlagEnabled||this._refreshMembers?(this._fire("identitySelected",this._dataSource[t][0]),l.logTracePoint("IdentityGrid.SelectedIndexChanged")):this._refreshMembers=!0:this._fire("identitySelected",null)},t.prototype._createIdentityCell=function(t,i,r,u,f,e,o){var s,h;return h=this._dataSource[i][0],h.TeamFoundationId?this._dataSource[i].isNode?this._drawCell(t,i,r,u,f,e,o):n.prototype._createIdentityCell.call(this,t,i,r,u,f,e,o):(s=this._drawCell(t,i,r,u,f,e,o),this._dataSource[i].isEmpty&&s.addClass("empty-cell"),s)},t.prototype._populateSourceForTeams=function(){var r,u,i=[],n=[],f,o,t;if(ht.adminUIFeatureFlagEnabled)this.treeStructure?this._insertNewNodesInTheTree():this._populateTreeFromSourceForTeams();else{if(this._options.source.length>0)if(u=this._options.source[0][0],t=[u],t.isNode=!0,this.hasMore&&this._options.source.length===1)i[n.length]=-1,t.hasMore=!0,t.actionUrl=this._options.tfsContext.getActionUrl("ReadScopedTeamJson","identity",{area:"api"}),t.actionParams={force:!0},n.push(t),i[n.length]=0,f=[e.LoadingInProgress],f.isEmpty=!0,n.push(f),this._options.canPage=!1;else{if(n.push(t),this._options.source.length>1)for(i[0]=this._options.source.length-1,r=1;r<this._options.source.length;r++)u=this._options.source[r][0],n.push([u]);else i[0]=1,i[1]=0,o=[e.NoMembers],o.isEmpty=!0,n.push(o);this._options.canPage=!0}this._options.source=n;this._options.expandStates=i}},t.prototype._populateSourceWithBuckets=function(){var o,t,u=[],r=[],s=0,h,i,n,f,c;if(ht.adminUIFeatureFlagEnabled)this.treeStructure?this._insertNewNodesInTheTree():this._populateTreeFromSource();else{for(n={tfsTeams:{name:e.Teams,items:[]},tfsGroups:{name:lt.isHosted?e.TfsGroupsHosted:e.TfsGroups,items:[]},AadGroups:{name:e.AzureActiveDirectoryGroups,items:[]},windowsGroups:{name:e.WindowsGroups,items:[],hasMore:this._options.delayWindowsGroups&&!this._options.isSearching&&this.hasMore,actionUrl:this._options.tfsContext.getActionUrl("ReadIdentitiesPageJson","identity",{area:"api"}),actionParams:{membershipType:"windowsGroups"}},users:{name:e.Users,items:[],hasMore:this._options.delayUsers&&!this._options.isSearching&&this.hasMore,actionUrl:this._options.tfsContext.getActionUrl("ReadIdentitiesPageJson","identity",{area:"api"}),actionParams:{membershipType:"users"}}},o=0;o<this._options.source.length;o++)t=this._options.source[o][0],t.IdentityType==="user"?(n.users.items.push([t]),n.users.hasMore=!1):t.IsWindowsGroup?(n.windowsGroups.items.push([t]),n.windowsGroups.hasMore=!1):t.IdentityType==="team"?n.tfsTeams.items.push([t]):t.IsAadGroup?n.AadGroups.items.push([t]):n.tfsGroups.items.push([t]);this._options.canPage=this._options.delayWindowsGroups||this._options.delayUsers;for(h in n)n.hasOwnProperty(h)&&(i=n[h],i.hasMore?(s+=2,u[r.length]=-1,f=[i.name],f.hasMore=!0,f.actionUrl=i.actionUrl,f.actionParams=i.actionParams,r.push(f),u[r.length]=0,c=[e.LoadingInProgress],c.isEmpty=!0,r.push(c),this._options.canPage=!1):i.items.length&&(s++,u[r.length]=i.items.length,i.items.unshift([i.name]),r=r.concat(i.items)));s===1&&(r.shift(),u=null);this._options.source=r;this._options.expandStates=u}},t.prototype._populateTreeFromSourceForTeams=function(){var n,r=[],i=[],u,t;this._options.source.length>0&&(n=this._options.source[0][0],t=[n],n.IsAadGroup||n.IsWindowsGroup||n.IdentityType.toLowerCase()=="user"?i.push(t):(t.hasMore=!0,t.actionUrl=this._options.tfsContext.getActionUrl("ReadGroupMembers","identity",{area:"api"}),t.actionParams={scope:n.TeamFoundationId,membershipType:"groups",readMembers:!0},r[0]=-1,i.push(t),u=[e.LoadingInProgress],u.isEmpty=!0,i.push(u),r[1]=0),this._options.canPage=!1);this._options.source=i;this.treeStructure=i;this._options.expandStates=r},t.prototype._populateTreeFromSource=function(){var o,f,t,s=[],n=[],l,r,i,u,h,c;for(i={tfsTeams:{name:e.Teams,items:[]},tfsGroups:{name:lt.isHosted?e.TfsGroupsHosted:e.TfsGroups,items:[]}},c=[],o=0;o<this._options.source.length;o++)t=this._options.source[o][0],t.IsAadGroup||t.IsWindowsGroup||t.IdentityType.toLowerCase()==ht.USER_ENTITY_TYPE_KEY?c.push([t]):(u=[t],u.hasMore=!0,u.actionUrl=this._options.tfsContext.getActionUrl("ReadGroupMembers","identity",{area:"api"}),u.actionParams={scope:t.TeamFoundationId,membershipType:"groups",readMembers:!0},h=[e.LoadingInProgress],h.isEmpty=!0,t.IdentityType.toLowerCase()==ht.TEAM_ENTITY_TYPE_KEY?(i.tfsTeams.items.push(u),i.tfsTeams.items.push(h)):(i.tfsGroups.items.push(u),i.tfsGroups.items.push(h)));for(l in i)if(i.hasOwnProperty(l)&&(r=i[l],r.items.length))for(this.showBuckets?(s[n.length]=r.items.length,r.items.unshift([r.name]),f=n.length+1):f=n.length,n=n.concat(r.items);f<n.length;)s[f++]=-1,s[f++]=0;!n.length&&c.length&&(n=c);this._options.source=n;this.treeStructure=n;this._options.expandStates=s},t.prototype._insertNewNodesInTheTree=function(){var n,t,i,r=[],u,f,o;for(this.treeStructure.splice(this._treeIndex+1,1),t=this._treeIndex+1,n=0;n<this._newTreeNodes.length;n++)i=this._newTreeNodes[n][0],u=[i],i.IsAadGroup||i.IsWindowsGroup||i.IdentityType.toLowerCase()=="user"?this.treeStructure.splice(t++,0,u):(u.hasMore=!0,u.actionUrl=this._options.tfsContext.getActionUrl("ReadGroupMembers","identity",{area:"api"}),u.actionParams={scope:i.TeamFoundationId,membershipType:"groups",readMembers:!0},r[t]=-1,this.treeStructure.splice(t++,0,u),f=[e.LoadingInProgress],f.isEmpty=!0,r[t]=0,this.treeStructure.splice(t++,0,f));r[this._treeIndex]=t-this._treeIndex-1;for(o in this._options.expandStates)n=Number(o),n>this._treeIndex+1?r[n+t-this._treeIndex-2]=this._options.expandStates[n]:n<this._treeIndex&&(r[n]=this._options.expandStates[n]+n>=this._treeIndex?this._options.expandStates[n]+t-this._treeIndex-2:this._options.expandStates[n]);this._options.source=this.treeStructure;this._options.expandStates=r},t.enhancementTypeName="tfs.admin.mainidentitygrid",t}(wt);t.MainIdentityGrid=oi;i.classExtend(oi,at.ControlExtensions);ni=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({allowRemove:!0},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._membersList=$(st("div")).attr("id","members-list").appendTo(this._element)},t.prototype.addIdentity=function(n,t,i,r,u){var f,e;i?(f=$(st("div")).addClass("resolved-member existing-user"),e=$(st("span")).appendTo(f).addClass("resolved-member-name").text(n),this._drawRemoveElement(f),$('<input type="hidden" />').appendTo(f).addClass("tfid").val(i)):(f=$(st("div")).addClass("resolved-member new-user"),e=$(st("span")).appendTo(f).addClass("resolved-member-name").text(n),this._drawRemoveElement(f),$('<input type="hidden" />').appendTo(f).addClass("username").val(t));f.attr("title",r||n);u&&f.hide();this._membersList.append(f);this._fire("identityListChanged")},t.prototype.hideRemoveElement=function(){},t.prototype.clear=function(){for(var t=this.getTfids(),n=0;n<t.length;n++)this.removeIdentity(t[n]);this.quickClear()},t.prototype.quickClear=function(){this._membersList.empty()},t.prototype.getTfids=function(){var n=[];return $("input.tfid",this._membersList).each(function(){n.push($(this).val())}),n},t.prototype._onItemRemoved=function(n){var t,i,r,u;if(t=$(n.target).closest(".resolved-member"),i=t.find("input.tfid").val(),r=t.find(".resolved-member-name").text(),!$.isFunction(this._options.beforeRemove)||(u=this._options.beforeRemove.call(this,{tfid:i,name:r}),u!==!1))return this._removeIdentity(t),!1},t.prototype.removeIdentity=function(n){var t=this._membersList.find('input[value="'+n+'"]').closest(".resolved-member");t.length&&this._removeIdentity(t)},t.prototype.getDisplayNames=function(){var n=[];return this._membersList.find(".resolved-member-name").each(function(){n.push($(this).text())}),n},t.prototype.getPendingChanges=function(n){var i=[],t=[];return $("input.username",this._membersList).each(function(){i.push(this.value)}),$("input.tfid",this._membersList).each(function(i,r){if($(this).closest(".existing-user").length>0)if(n){var u={tfid:this.value,name:$(r).closest(".existing-user").find(".resolved-member-name").text()};t.push(u)}else t.push(this.value)}),{newUsers:i,existingUsers:t}},t.prototype._drawRemoveElement=function(n){var t=$(st("div")).appendTo(n).addClass("icon icon-delete").attr("id","remove-action").click(ct(this,this._onItemRemoved));b.accessible(t)},t.prototype._removeIdentity=function(n){var t,i=n.find("input.tfid").val();t=i?n.find(".resolved-member-name").text():n.find("input.username").val();n.remove();this._element.trigger("identityListChanged",{name:t,tfid:i})},t._controlType="tfs.admin.identityListControl",t}(c.BaseControl);t.IdentityListControl=ni;i.initClassPrototype(ni,{_membersList:null});ti=function(n){function t(t){n.call(this,t);this.existingGroups=t.existingGroups||[];this.host=t.host;this.currentCheckedItem=undefined;this.multiSelect=t.multiSelect===undefined||t.multiSelect?!0:!1}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({allowMultiSelect:!1,gutter:!1,sharedMeasurements:!1,columns:[{text:e.DisplayName,width:250},{text:e.UserName,width:150}]},t))},t.prototype.initialize=function(){var t=this;n.prototype.initialize.call(this);this._pendingAdds=[];this._pendingDeletes=[];this._originalDataIntitialized=!1;this._originalData=[];this._identityInfoMap=[];this.host=this._options.host;this.existingGroups=this._options.existingGroups||[];this.hasMore=!1;this._options.waitObject={image:bt.getResourcesFile("big-progress.gif"),message:u.htmlEncode(e.ProgressPleaseWait),target:this._options.host};this._options.gridItems?(t.setInitialGridItems(t._options.gridItems),t._element.trigger("initialized"),l.logTracePoint("CheckedIdentityGrid.initialize.complete")):k.getMSJSON(this._options.identityListAction,this._options.searchParams,function(n){t.hasMore=n.hasMore;t.setInitialGridItems(n.identities);t._element.trigger("initialized")},null,{tracePoint:"CheckedIdentityGrid.initialize.complete",wait:this._options.waitObject})},t.prototype.setInitialGridItems=function(n){var i,t,r,u=[],e=[],o=0;for(n||(n=$.map(this._dataSource,function(n){return{FriendlyDisplayName:n[1],TeamFoundationId:n[3],SubHeader:n[2]}})),i=0;i<n.length;i++)(t=n[i],this._options.omitWindowsGroups&&t.IsWindowsGroup)||(r=f.contains(this.existingGroups,t.TeamFoundationId),r&&u.push(o),e.push({id:o++,values:[t.FriendlyDisplayName,t.SubHeader,t.TeamFoundationId,r]}));this.setGridItems(e,u);this._originalDataIntitialized||(this._originalData=this._dataSource,this._originalDataIntitialized=!0)},t.prototype.setGridItems=function(t,i){n.prototype.setGridItems.call(this,t,i);this.setSelectedRowIndex(this.getSelectedRowIndex())},t.prototype.addToGridItems=function(n){for(var i,u,e=[],o=[],s=this._dataSource.length,r,t=0;t<this._dataSource.length;t++)r=this._dataSource[t],r[0]&&e.push(t),r.splice(0,1),o.push({id:t,values:r});for(t=0;t<n.length;t++)(i=n[t],this._options.omitWindowsGroups&&i.IsWindowsGroup)||(u=f.contains(this.existingGroups,i.TeamFoundationId),u&&e.push(s+t),o.push({id:s+t,values:[i.FriendlyDisplayName,i.SubHeader,i.TeamFoundationId,u]}));this.setGridItems(o,e);this._originalData=this._dataSource},t.prototype.fullSearch=function(n){for(var i,r,e=[],u=[],t=0;t<n.length;t++)i=n[t],r=f.contains(this.existingGroups,i.TeamFoundationId),r&&!f.contains(this._pendingDeletes,i.TeamFoundationId)?u.push(t):f.contains(this._pendingAdds,i.TeamFoundationId)&&u.push(t),e.push({id:t,values:[i.FriendlyDisplayName,i.SubHeader,i.TeamFoundationId,r]});this.setGridItems(e,u)},t.prototype.localSearch=function(n){for(var t,u=[],f=[],r=$(this._originalData),i=0;i<r.length;i++)t=r[i],t.slice(1,3).join("\n").toLocaleLowerCase().indexOf(n.toLocaleLowerCase())>-1&&(u.push({id:t[-1],values:t.slice(1)}),t[0]&&f.push(t[-1]));this.setGridItems(u,f)},t.prototype.cancelSearch=function(){for(var n,u,e=[],i=[],r=$(this._originalData),t=0;t<r.length;t++)n=r[t],e.push({id:n[-1],values:n.slice(1)}),this.hasMore?(u=n[4],u&&!f.contains(this._pendingDeletes,n[3])?i.push(t):f.contains(this._pendingAdds,n[3])&&i.push(t)):n[0]&&i.push(n[-1]);this.setGridItems(e,i)},t.prototype.cacheRows=function(n,t,i){if(this.hasMore&&i.length===0&&!this._options.isSearching){var r=this,u;u=this._dataSource[this._dataSource.length-1][1];this.hasMore=!1;this._options.searchControl.disable();k.getMSJSON(this._options.identityListAction,$.extend({lastSearchResult:u},this._options.searchParams),function(n){r.addToGridItems(n.identities);r.hasMore=n.hasMore;r._options.searchControl.enable()},null,{wait:this._options.waitObject})}},t.prototype.setCheckboxState=function(t,i){var u=!1,r;if(!this.multiSelect){if(this.currentCheckedItem&&this._dataSource[t]!==this.currentCheckedItem){for(this._pendingAdds=[],r=0;r<this._dataSource.length;r++)if(this.currentCheckedItem[-1]===this._dataSource[r][-1]&&r!==t){n.prototype.setCheckboxState.call(this,r,!1);u=!0;break}u||this.hasMore||(this._originalData[this.currentCheckedItem[-1]][0]=!1)}this.currentCheckedItem=i?this._dataSource[t]:undefined}n.prototype.setCheckboxState.call(this,t,i)},t.prototype._drawHeaderCellValue=function(t){return t.index!==ot.ChecklistDataAdapter._CHECKBOX_COLUMN_INDEX?n.prototype._drawHeaderCellValue.call(this,t):$("<div/>").addClass("title")},t.prototype._setCheckboxStateData=function(t,i){var u,r,o,f,e;n.prototype._setCheckboxStateData.call(this,t,i);u=this._dataSource[t];this.hasMore||(this._originalData[u[-1]][0]=i);o=u[4];f=u[0];r=u[3];this._identityInfoMap[r]||(this._identityInfoMap[r]=u[1]);f&&!o?this._pendingAdds.push(r):!f&&o?this._pendingDeletes.push(r):f&&o?(e=$.inArray(r,this._pendingDeletes),e>-1&&this._pendingDeletes.splice(e,1)):f||o||(e=$.inArray(r,this._pendingAdds),e>-1&&this._pendingAdds.splice(e,1));this.updateRow(t);this._fire("checkedStateChanged",{tfid:r,name:u[1],state:f});this._fire("pendingChanged",{pendingAdds:this._pendingAdds,pendingDeletes:this._pendingDeletes,totalCheckedCount:this.existingGroups.length-this._pendingDeletes.length+this._pendingAdds.length})},t.enhancementTypeName="tfs.admin.checkedidentitygrid",t}(et.CheckboxSelectionGridO);t.CheckedIdentityGrid=ti;i.initClassPrototype(ti,{currentCheckedItem:null,multiSelect:!1,hasMore:null,existingGroups:null,host:null,_pendingAdds:null,_pendingDeletes:null,_originalData:null,_identityInfoMap:null});ii=function(n){function t(t){n.call(this,t);this.existingGroups=t.existingGroups||[];this.host=t.host;this.currentCheckedItem=undefined;this.multiSelect=t.multiSelect===undefined||t.multiSelect?!0:!1}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({allowMultiSelect:!1,gutter:!1,sharedMeasurements:!1,columns:[{text:e.DisplayName,width:250},{text:e.AADName,width:150}]},t))},t.prototype.initialize=function(){var t=this;n.prototype.initialize.call(this);this._pendingAdds=[];this._pendingDeletes=[];this._originalDataIntitialized=!1;this._originalData=[];this._identityInfoMap=[];this.host=this._options.host;this.existingGroups=this._options.existingGroups||[];this.hasMore=!1;this._options.waitObject={image:bt.getResourcesFile("big-progress.gif"),message:u.htmlEncode(e.ProgressPleaseWait),target:this._options.host};k.getMSJSON(this._options.identityListAction,this._options.searchParams,function(n){t.hasMore=n.hasMore;t.lastCacheResultToken=null;t.hasMore&&(t.lastCacheResultToken=n.searchResultToken);t.setInitialGridItems(n.identities);t._element.trigger("initialized")},null,{tracePoint:"CheckedAadGroupsIdentityGrid.initialize.complete",wait:this._options.waitObject})},t.prototype.setInitialGridItems=function(n){var i,t,r,u=[],e=[],o=0;for(n||(n=$.map(this._dataSource,function(n){return{FriendlyDisplayName:n[1],TeamFoundationId:n[3],SubHeader:n[2]}})),i=0;i<n.length;i++)(t=n[i],this._options.omitWindowsGroups&&t.IsWindowsGroup)||(r=f.contains(this.existingGroups,t.TeamFoundationId),r&&u.push(o),e.push({id:o++,values:[t.FriendlyDisplayName,t.SubHeader,t.TeamFoundationId,r]}));this.setGridItems(e,u);this._originalDataIntitialized||(this._originalData=this._dataSource,this._originalDataIntitialized=!0)},t.prototype.setGridItems=function(t,i){n.prototype.setGridItems.call(this,t,i);this.setSelectedRowIndex(this.getSelectedRowIndex())},t.prototype.addToGridItems=function(n){for(var i,u,e=[],o=[],s=this._dataSource.length,r,t=0;t<this._dataSource.length;t++)r=this._dataSource[t],r[0]&&e.push(t),r.splice(0,1),o.push({id:t,values:r});for(t=0;t<n.length;t++)(i=n[t],this._options.omitWindowsGroups&&i.IsWindowsGroup)||(u=f.contains(this.existingGroups,i.TeamFoundationId),u&&e.push(s+t),o.push({id:s+t,values:[i.FriendlyDisplayName,i.SubHeader,i.TeamFoundationId,u]}));this.setGridItems(o,e);this._originalData=this._dataSource},t.prototype.fullSearch=function(n){for(var i,r,e=[],u=[],t=0;t<n.length;t++)i=n[t],r=f.contains(this.existingGroups,i.TeamFoundationId),r&&!f.contains(this._pendingDeletes,i.TeamFoundationId)?u.push(t):f.contains(this._pendingAdds,i.TeamFoundationId)&&u.push(t),e.push({id:t,values:[i.FriendlyDisplayName,i.SubHeader,i.TeamFoundationId,r]});this.setGridItems(e,u)},t.prototype.localSearch=function(n){for(var t,u=[],f=[],r=$(this._originalData),i=0;i<r.length;i++)t=r[i],t.slice(1,3).join("\n").toLocaleLowerCase().indexOf(n.toLocaleLowerCase())>-1&&(u.push({id:t[-1],values:t.slice(1)}),t[0]&&f.push(t[-1]));this.setGridItems(u,f)},t.prototype.cancelSearch=function(){for(var n,u,e=[],i=[],r=$(this._originalData),t=0;t<r.length;t++)n=r[t],e.push({id:n[-1],values:n.slice(1)}),this.hasMore?(u=n[4],u&&!f.contains(this._pendingDeletes,n[3])?i.push(t):f.contains(this._pendingAdds,n[3])&&i.push(t)):n[0]&&i.push(n[-1]);this.setGridItems(e,i)},t.prototype.cacheRows=function(n,t,i){if(this.hasMore&&i.length===0&&!this._options.isSearching){var r=this;this.hasMore=!1;this._options.searchControl.disable();k.getMSJSON(this._options.identityListAction,$.extend({searchResultToken:this.lastCacheResultToken},this._options.searchParams),function(n){r.lastCacheResultToken=null;r.addToGridItems(n.identities);r.hasMore=n.hasMore;r.hasMore&&(r.lastCacheResultToken=n.searchResultToken);r._options.searchControl.enable()},null,{wait:this._options.waitObject})}},t.prototype.setCheckboxState=function(t,i){var u=!1,r;if(!this.multiSelect){if(this.currentCheckedItem&&this._dataSource[t]!==this.currentCheckedItem){for(this._pendingAdds=[],r=0;r<this._dataSource.length;r++)if(this.currentCheckedItem[-1]===this._dataSource[r][-1]&&r!==t){n.prototype.setCheckboxState.call(this,r,!1);u=!0;break}u||this.hasMore||(this._originalData[this.currentCheckedItem[-1]][0]=!1)}this.currentCheckedItem=i?this._dataSource[t]:undefined}n.prototype.setCheckboxState.call(this,t,i)},t.prototype._drawHeaderCellValue=function(t){return t.index!==ot.ChecklistDataAdapter._CHECKBOX_COLUMN_INDEX?n.prototype._drawHeaderCellValue.call(this,t):$("<div/>").addClass("title")},t.prototype._setCheckboxStateData=function(t,i){var u,r,o,f,e;n.prototype._setCheckboxStateData.call(this,t,i);u=this._dataSource[t];this.hasMore||(this._originalData[u[-1]][0]=i);o=u[4];f=u[0];r=u[3];this._identityInfoMap[r]||(this._identityInfoMap[r]=u[1]);f&&!o?this._pendingAdds.push(r):!f&&o?this._pendingDeletes.push(r):f&&o?(e=$.inArray(r,this._pendingDeletes),e>-1&&this._pendingDeletes.splice(e,1)):f||o||(e=$.inArray(r,this._pendingAdds),e>-1&&this._pendingAdds.splice(e,1));this.updateRow(t);this._fire("checkedStateChanged",{tfid:r,name:u[1],state:f});this._fire("pendingChanged",{pendingAdds:this._pendingAdds,pendingDeletes:this._pendingDeletes,totalCheckedCount:this.existingGroups.length-this._pendingDeletes.length+this._pendingAdds.length})},t.enhancementTypeName="tfs.admin.CheckedAadGroupsIdentityGrid",t}(et.CheckboxSelectionGridO);t.CheckedAadGroupsIdentityGrid=ii;i.initClassPrototype(ii,{currentCheckedItem:null,multiSelect:!1,hasMore:null,existingGroups:null,host:null,_pendingAdds:null,_pendingDeletes:null,_originalData:null,_identityInfoMap:null});ri=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);var i,r,t,u;i=$(st("div")).appendTo(this._element).addClass("identity-browse-search-wrapper fixed-header");r=$(st("div")).appendTo(i).addClass("identity-browse-search");t=$(st("div")).appendTo(this._element).addClass("fill-content");u=$.extend({height:"100%",host:t},this._options);this._identityGrid=c.BaseControl.createIn(ti,t,u);r.IdentitySearchControl({identityList:this._identityGrid});this.setFocusOnSearchBox();c.Enhancement.enhance(vt,this._element,{autoResize:this._options.autoResize});this._identityGrid.layout()},t.prototype.getIdentityGrid=function(){return this._identityGrid},t.prototype.setCheckedIdentities=function(n){this._identityGrid.existingGroups=n||[];this._identityGrid.setInitialGridItems();this._identityGrid.getSelectedRowIntoView(!0)},t.prototype.setFocusOnSearchBox=function(){var n=$(".identity-browse-search",this._element);n.IdentitySearchControl("focus")},t._controlType="tfs.admin.BrowseIdentitiesControl",t}(c.BaseControl);t.BrowseIdentitiesControl=ri;i.initClassPrototype(ri,{_identityGrid:null});si=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);var i,r,t,u;i=$(st("div")).appendTo(this._element).addClass("identity-browse-search-wrapper fixed-header");r=$(st("div")).appendTo(i).addClass("identity-browse-search");t=$(st("div")).appendTo(this._element).addClass("fill-content");u=$.extend({height:"100%",host:t,IsBrowseAadGroupsControl:!0},this._options);this._identityGrid=c.BaseControl.createIn(ii,t,u);r.IdentitySearchControl({identityList:this._identityGrid});this.setFocusOnSearchBox();c.Enhancement.enhance(vt,this._element,{autoResize:this._options.autoResize});this._identityGrid.layout()},t.prototype.getIdentityGrid=function(){return this._identityGrid},t.prototype.setCheckedIdentities=function(n){this._identityGrid.existingGroups=n||[];this._identityGrid.setInitialGridItems();this._identityGrid.getSelectedRowIntoView(!0)},t.prototype.setFocusOnSearchBox=function(){var n=$(".identity-browse-search",this._element);n.IdentitySearchControl("focus")},t._controlType="tfs.admin.BrowseAadGroupsControl",t}(c.BaseControl);t.BrowseAadGroupsControl=si;i.initClassPrototype(si,{_identityGrid:null});hi=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({identityListAction:lt.getActionUrl("ReadIdentitiesPageJson","identity",{area:"api"}),searchParams:{membershipType:"addableUsers"},allowMultiSelect:!0,showCheckName:!0,allowCheckName:!0,allowFreeType:!0,allowArbitraryEmailAddresses:!0,constrainToTfsUsersOnly:!1,comboOnly:!1,onListRetrieved:null,onReady:null,filterList:!0,isHosted:d.TfsContext.getDefault().isHosted,watermarkTo:null},t))},t.prototype.initialize=function(){var t=this,i,r=this;n.prototype.initialize.call(this);this._element.addClass("identity-picker-control");this._mainControl=this.createMainContainer().appendTo(this._element);this._createIdentityListControl();this._identityInputWrapper=this.createIdentityInputWrapper().appendTo(this._mainControl).keyup(function(n){t._identityInputControl.option("disabled")||n.keyCode===$.ui.keyCode.ENTER||t._validate(t._identityInputControl._inputElement.val())&&t._identityListControl._fire("identityListChanged")});$('<div class="identity-input" />').appendTo(this._identityInputWrapper);i=this.createBrowseLinkElement().attr("id","browse-identities-action").attr("href","#").click(ct(this,this._onBrowseOpen));this._checkNameAction=this.createCheckNameLinkElement().attr("id","check-name-action").attr("href","#").click(ct(this,this.onCheckName));this._actionDiv=this.createActionLinks(i,this._checkNameAction).appendTo(this._mainControl);this._options.items&&$.each(this._options.items,function(n,i){var r=$(st("li")).appendTo(t._actionUl);$(st("a")).appendTo(r).attr("id",i.id).attr("href","#").addClass("linkAction").text(i.text).click(function(){return t._options.executeAction&&t._options.executeAction(i.id),!1})});this._identityInputError=this.createInputErrorContainer().addClass("identity-input-error").hide();this._options.showBrowse!==!1&&(this._browsePopup=$(st("div")).appendTo(this._element).attr("tabindex","0").addClass("browse-identities-popup").hide().click(function(n){n.preventDefault();n.stopPropagation()}).keydown(function(n){return n.keyCode===$.ui.keyCode.ESCAPE?(r._onBrowseClose(),!1):!0}),this._browseContent=$(st("div")).appendTo(this._browsePopup).addClass("browse-identities-content"),$(st("a")).appendTo(this._browsePopup).addClass("linkAction browse-identities-popup-close").attr("href","#").text(e.Close).click(ct(this,this._onBrowseClose)));$(this._element).bind("itemSelected",ct(this,this._onItemSelected));$(this._element).bind("newItemAdded",ct(this,this._onNewItemAdded));$(this._element).bind("checkedStateChanged",ct(this,this._onCheckedStateChanged));$(this._element).bind("identityListChanged",ct(this,this._onIdentityListChanged));this._options.delayInit||this.initializeIdentityList()},t.prototype.createMainContainer=function(){return $(st("div")).addClass("identity-picker-main")},t.prototype.createIdentityInputWrapper=function(){return $(st("div")).addClass("identity-input-wrapper")},t.prototype.createActionLinks=function(n,t){var i,r=$(st("div")).addClass("add-identities-actions-section actions-section");return this._actionUl=$(st("ul")).appendTo(r),i=$(st("li")).appendTo(this._actionUl),n.appendTo(i),i=$(st("li")).appendTo(this._actionUl),t.appendTo(i),r},t.prototype.createBrowseLinkElement=function(){return $(st("a")).addClass("linkAction").text(e.Browse)},t.prototype.createCheckNameLinkElement=function(){return $(st("a")).addClass("linkAction").text(e.CheckName)},t.prototype.createInputErrorContainer=function(){return $(st("div")).appendTo(this._mainControl)},t.prototype.getDefaultInput=function(){return this._identityInputControl.getInputElement()},t.prototype.clearInputSelection=function(){this._identityInputControl&&this._identityInputControl.getInputElement().val("")},t.prototype.initializeIdentityList=function(){var n=this,t;t=typeof this._options.setFocusOnInitializeList=="undefined"?!0:this._options.setFocusOnInitializeList;this._clearIdentityInputError();this._identityListControl.quickClear();this._identityListData=null;this.clearInputSelection();this._refreshIdentityInput(t);this._options.showCheckName&&this._options.allowCheckName?$("#check-name-action",this._element).closest("li").removeClass("invisible"):$("#check-name-action",this._element).closest("li").addClass("invisible");this._options.showBrowse===!1?$("#browse-identities-action",this._element).closest("li").addClass("invisible"):$("#browse-identities-action",this._element).closest("li").removeClass("invisible");l.logTracePoint("IdentityPickerControl.InitializeIdentities.Pending");k.getMSJSON(this._options.identityListAction,this._options.searchParams,function(t){var i,r;if(t.hasMore)n._identityListData=null;else for(n._identityListData=[],i=0;i<t.identities.length;i++)r=t.identities[i],n._identityListData.push(r);if(n._options.onListRetrieved)n._options.onListRetrieved(n._identityListData);if(n._refreshIdentityInput(!1),n._options.onReady)n._options.onReady(n);l.logTracePoint("IdentityPickerControl.InitializeIdentities.Complete")},null,this._options.wait)},t.prototype._onIdentityListChanged=function(n,t){if(!this._options.comboOnly&&(t&&t.tfid&&(this._identityInputControl.options.existingIdentities=this.getPendingChanges().existingUsers,this._identityInputControl.addItem(t.name,t.tfid)),!this._options.allowMultiSelect&&!this._options.comboOnly)){var i=this._getPendingChanges();i.existingUsers.length+i.newUsers.length>0?(this._identityInputWrapper.hide(),this._actionDiv.hide(),this._identityInputError.hide()):(this._identityInputWrapper.show(),this._actionDiv.show(),this._identityInputControl.focus())}},t.prototype.removeIdentity=function(n){this._identityListControl.removeIdentity(n)},t.prototype.removeAllIdentities=function(){this._identityListControl.clear()},t.prototype.addResolvedIdentity=function(n,t,i){this.removeIdentity(i||t);this._options.allowMultiSelect||this._identityListControl.clear();this._options.comboOnly||this._identityInputControl.removeItem(n);this._identityListControl.addIdentity(n,t,i,"",this._options.comboOnly);this._options.comboOnly||(this._identityInputControl.options.existingIdentities=this.getPendingChanges().existingUsers);this._clearIdentityInputError();l.logTracePoint("AddIdentityDialog.ResolvedIdentity.Added")},t.prototype.getDisplayNames=function(){return this._identityListControl.getDisplayNames()},t.prototype._getPendingChanges=function(n){var t,i=this._identityListControl.getPendingChanges(n),r;return this._identityInputControl&&!this._options.comboOnly&&(t=this._identityInputControl._inputElement.val(),t&&this._validate(t)&&(r=t)),{newUsers:i.newUsers,existingUsers:i.existingUsers,inputText:r}},t.prototype.getPendingChanges=function(n){var t=this._getPendingChanges(n);return t.inputText&&t.newUsers.push(t.inputText),t},t.prototype.getTfids=function(){return this._identityListControl.getTfids()},t.prototype.getPendingUserInput=function(){var n="";return this._identityInputControl&&(n=this._identityInputControl._inputElement.val()),n},t.prototype.select=function(n,t){return this._identityInputControl?this._identityInputControl.select(n,t):!1},t.prototype._setIdentityInputError=function(n){this._options.errorHandler?this._options.errorHandler(n,this._options.errorOptions):(this._identityInputError.show().text(n),this._identityInputControl.element.addClass("invalid"))},t.prototype._clearIdentityInputError=function(){this._identityInputError.hide();this._identityInputControl&&this._identityInputControl.element.removeClass("invalid")},t.prototype._createIdentityListControl=function(){this._identityListControl=c.BaseControl.createIn(ni,this._mainControl)},t.prototype._onItemSelected=function(n,t){var i=t.item.text,r=t.item.value;this.addResolvedIdentity(i,i,r)},t.prototype._onNewItemAdded=function(n,t){var i=t.text.trim();this._checkName(i)},t.prototype._validate=function(n){return this._options.allowFreeType?n.length===0||!this._options.isHosted||this._isEmailAddress(n)?(this._clearIdentityInputError(),!0):(this._setIdentityInputError(e.InvalidEmail),!1):!1},t.prototype._isEmailAddress=function(n){return n&&yi.validate(n.trim())&&n.indexOf(";")===-1},t.prototype._refreshIdentityInput=function(n){var t;t=this._options.watermarkTo?this._options.watermarkTo:this._options.isHosted?u.htmlEncode(e.IdentityInputWatermarkHosted):u.htmlEncode(e.IdentityInputWatermarkOnPremise);this._identityInputControl=$(".identity-input",this._identityInputWrapper).IdentityInput({inputControlId:this._options.inputControlId,watermarkText:t,items:this._identityListData,identityListAction:this._options.identityListAction,searchParams:this._options.searchParams,allowFreeType:this._options.allowFreeType,id:this._options.inputTextElementId,comboOnly:this._options.comboOnly,filterList:this._options.filterList}).data("TFS-IdentityInput");n!==!1&&this._identityInputControl.focus(n)},t.prototype._onCheckedStateChanged=function(n,t){t.state?this.addResolvedIdentity(t.name,t.name,t.tfid):this.removeIdentity(t.tfid)},t.prototype._onBrowseClose=function(){var n=$(":tabbable",this._browsePopup),t=n.filter(":first"),i=n.filter(":last");return i.unbind("keydown",this._navigateToFirst),t.unbind("keydown",this._navigateToLast),$(document).unbind("click.browse-identities-popup"),$(":tabbable",this._element).filter(":first").focus(),this._browsePopup.hide(),l.logTracePoint("IdentityPickerControl.BrowseIdentitiesPopup.Close"),!1},t.prototype._onBrowseOpen=function(n){var t=this._identityListControl.getTfids();return this._options.browseAction?this._options.browseAction.call(this,n,t):this._showBrowsePopup.call(this,n,t),!1},t.prototype._showBrowsePopup=function(n,t){var i,r,u;this._browsePopup.show();this._identityBrowser?(this._identityBrowser.setCheckedIdentities(t),this._identityBrowser.setFocusOnSearchBox()):this._identityBrowser=c.Enhancement.enhance(ri,this._browseContent,{identityListAction:this._options.identityListAction,searchParams:this._options.searchParams,existingGroups:t,gridItems:this._identityListData,multiSelect:this._options.allowMultiSelect,autoResize:!1});$(document).bind("click.browse-identities-popup",ct(this,this._onBrowseClose));i=$(":tabbable",this._browsePopup);r=i.filter(":first");u=i.filter(":last");u.keydown({target:r},this._navigateToFirst);r.keydown({target:u},this._navigateToLast);n.stopPropagation();n.preventDefault()},t.prototype._navigateToFirst=function(n){return n.keyCode===$.ui.keyCode.TAB&&!n.shiftKey&&!n.ctrlKey&&!n.altKey?(n.data.target.focus(),!1):!0},t.prototype._navigateToLast=function(n){return n.keyCode===$.ui.keyCode.TAB&&n.shiftKey?(n.data.target.focus(),!1):!0},t.prototype.onCheckName=function(n){var t=this._identityInputControl.getCurrentValue().trim();return t.length?this._checkName(t,!1,n):$.isFunction(n)&&n(),!1},t.prototype.addRecipientByName=function(n,t,i){this._checkName(n.trim(),t,i)},t.prototype._checkName=function(n,t,i){var r=this,u;if(this._options.allowCheckName&&this._checkNameAction&&!this._checkNameAction.hasClass("admin-disabled-link")&&n.length){if(this._options.allowArbitraryEmailAddresses&&this._isEmailAddress(n)){this.addResolvedIdentity(n,n);$.isFunction(i)&&i();return}this._identityInputControl.disable();this.updateCheckNameAction(this._checkNameAction,e.CheckNameInProgress,!0).addClass("admin-disabled-link");l.logTracePoint("AddIdentityDialog.checkName.pending");k.getMSJSON(lt.getActionUrl("CheckName","identity",{area:"api"}),{name:n},function(f){r.updateCheckNameAction(r._checkNameAction,e.CheckName,!1).removeClass("admin-disabled-link");r._identityInputControl.enable();r._identityInputControl.focus();f.identity?r.addResolvedIdentity(f.identity.DisplayName,f.identity.DisplayName,f.identity.TeamFoundationId):f.resolvedName?r._options.constrainToTfsUsersOnly?t||(r._setIdentityInputError(e.NoTfsUserError),u=e.NoTfsUserError):r.addResolvedIdentity(f.resolvedName,n):t||(r._setIdentityInputError(e.NoTfsUserError),u=e.NoTfsUserError);$.isFunction(i)&&i(u)},function(n){r.updateCheckNameAction(r._checkNameAction,e.CheckName,!1).removeClass("admin-disabled-link");r._identityInputControl.enable();r._identityInputControl.focus();t||r._setIdentityInputError(n.message)},{tracePoint:"AddIdentityDialog.checkName.complete"})}},t.prototype.updateCheckNameAction=function(n,t){return n.text(t)},t.enhancementTypeName="tfs.admin.identityPickerControl",t}(c.BaseControl);t.IdentityPickerControl=hi;i.classExtend(hi,at.ControlExtensions);yt=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this._createProgressElement=this._element},t.prototype.startMonitoring=function(){this._monitorProgress()},t.prototype.stopMonitoring=function(){this.cancelDelayedFunction("monitorProgress")},t.prototype.renderErrorRetrievingProgress=function(n){var i,t,r;i=$(st("div"));t=$(st("div")).addClass("create-warning-box").appendTo(i);this._options.renderImportProcessErrorText?$(st("span")).html(this._options.renderImportProcessErrorText).appendTo(t):$(st("span")).html(e.ErrorRetrievingProgressMessage).appendTo(t);n&&(r=n&&n.message||n,$(st("br")).appendTo(t),$(st("br")).appendTo(t),$(st("span")).text(e.ErrorRetrievingProgressDetailsHeader).appendTo(t),$(st("br")).appendTo(t),$(st("span")).addClass("admin-exception-message").text(r).appendTo(t));this._createProgressElement.html(i)},t.prototype._renderProgress=function(n,t){var i,r;this._createProgressElement.empty();i=$(st("div")).addClass("progress-container").appendTo(this._createProgressElement);n&&$(st("div")).addClass("completed").css("width",n+"%").appendTo(i);$(st("div")).addClass("remaining").css("width",100-n+"%").appendTo(i);r=$(st("div")).appendTo(this._createProgressElement);$(st("span")).addClass("getting-started-lighttext").text(t).appendTo(r);this._fire("render-progress");this.delayExecute("monitorProgress",5e3,!0,this._monitorProgress)},t.prototype._renderComplete=function(){var n;this._createProgressElement.empty();this._options.completeText&&(n=$(st("div")).addClass("create-done-box"),this._options.completeText&&this._options.completeTextDescription?($(st("div")).addClass("import-process-success").text(this._options.completeText).appendTo(n),$(st("div")).addClass("import-process-success").text(this._options.completeTextDescription).appendTo(n)):$(st("span")).text(this._options.completeText).appendTo(n),this._createProgressElement.append(n));this._fire("render-complete")},t.prototype._renderFailure=function(){var n,t,i;n=$(st("div"));t=$(st("div")).addClass("create-error-box").appendTo(n);$(st("span")).html(this._options.failureText).appendTo(t);$(st("br")).appendTo(n);i=$(st("div")).appendTo(n);$(st("a")).attr("href","#").text(this._options.retryActionText).appendTo(i).click(ct(this,this._onRetryAfterFailure));this._createProgressElement.html(n);this._fire("render-failure")},t.prototype._onRetryAfterFailure=function(){return this._fire("retry-after-failure"),!1},t.prototype._monitorProgress=function(){return!1},t}(c.BaseControl);t.MonitorControl=yt;i.classExtend(yt,at.ControlExtensions);ci=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype._monitorProgress=function(){return k.getMSJSON(this._options.tfsContext.getActionUrl("MonitorJobProgress","job",{area:"api"}),{jobId:this._options.jobId},ct(this,this._renderProgressResponse),ct(this,this.renderErrorRetrievingProgress),{showGlobalProgressIndicator:!1}),!1},t.prototype._renderProgressResponse=function(n){switch(n.State){case 0:this._renderProgress(0,this._options.notStartedText);break;case 1:this._renderProgress(n.PercentComplete,this._options.inProgressText);break;case 2:this._renderComplete();break;case 3:this._renderFailure()}},t._controlType="MonitorJobControl",t}(yt);t.MonitorJobControl=ci;i.classExtend(ci,at.ControlExtensions);li=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype._monitorProgress=function(){var n=this;return k.getMSJSON(this._options.tfsContext.getActionUrl("GetJobProgress","process",{area:"api"}),{jobId:this._options.jobId},function(t){n._renderProgressResponse(t)},function(t){n.renderErrorRetrievingProgress(t)},{showGlobalProgressIndicator:!1}),!1},t.prototype._renderProgressResponse=function(n){switch(n.State){case 0:this._renderProgress(0,this._options.notStartedText);break;case 1:this._renderProgress(n.PercentComplete,n.ProgressText);break;case 2:this._renderComplete();break;case 3:this._renderFailure()}},t._controlType="ImportProcessJobMonitorControl",t}(yt);t.ImportProcessJobMonitorControl=li;i.classExtend(li,at.ControlExtensions);ai=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this._httpClient=rt.ProjectCollection.getConnection(this._options.tfsContext).getHttpClient(tt.OperationsHttpClient)},t.prototype._monitorProgress=function(){var n=this;return this._httpClient.getOperation(this._options.jobId).then(function(t){n._renderProgressResponse(t)},function(t){n.renderErrorRetrievingProgress(t)}),!1},t.prototype._renderProgressResponse=function(n){switch(n.status){case it.OperationStatus.NotSet:case it.OperationStatus.Queued:this._renderProgress(0,this._options.notStartedText);break;case it.OperationStatus.InProgress:this._renderProgress(30,this._options.inProgressText);break;case it.OperationStatus.Succeeded:this._renderComplete();break;case it.OperationStatus.Failed:case it.OperationStatus.Cancelled:this._renderFailure()}},t}(yt);t.MonitorOperationControl=ai;i.classExtend(ai,at.ControlExtensions),function(n){n.ConnectedServices="connectedservices"}(di=t.CommonServicesActionIds||(t.CommonServicesActionIds={})),function(n){function i(n){return t.test(n)}var t=/^([^@\[\]\.\s]+(\.[^@\[\]\.\s]+)*)@(([^@\[\]\.\s]+(\.[^@\[\]\.\s]+)+)|(\[([0-9]{1,3}\.){3}[0-9]{1,3}\]))$/;n.validate=i}(yi=t.EmailValidator||(t.EmailValidator={})),function(n){function f(n){var f,e=!0;if((n===null||n.length===0||n.length>r||n.substring(0,1)==="_"||n.substring(0,1)==="."||n.charAt(n.length-1)===".")&&(e=!1),e)for(f=0;f<i.length;f++)if(n.indexOf(i[f])!==-1){e=!1;break}if(e)for(f=0;f<t.length;f++)if(u.ignoreCaseComparer(n,t[f])===0){e=!1;break}return e}var t=["server","bin","App_code","App_Browsers","App_Data","App_GlobalResources","App_LocalResources","App_Themes","App_WebReferences","web.config","SignalR"],i=["@","~",";","{","}","'","+","=",",","<",">","|","/","\\","?",":","&","$","*",'"',"#","[","]","&","%"],r=64;n.validate=f}(gi=t.ProjectNameValidator||(t.ProjectNameValidator={}));t.isInt32Range=nr;t.isGuid=tr;t.trim=ir;i.tfsModuleLoaded("TFS.Admin.Common",t)});
define("Admin/Scripts/TFS.Admin",["require","exports","VSS/VSS"],function(n,t,i){var u=function(){function n(){}return n.EDIT_CLASSIFICATION="VSS.Admin.AreaIterations.EditClassification",n}(),r,f;t.Actions=u;r=function(){function n(){}return n.CLASSIFICATION_CHANGED="VSS.Admin.AreaIterations.ClassificationChanged",n}();t.Notifications=r,function(n){var t="WebAccess.Admin",r=function(){function n(){}return n.AREA=t+"AreaIterations",n.AREAS_CONTROL_INITIALIZATION="AreasControlInitialization",n.ITERATIONS_CONTROL_INITIALIZATION="IterationsControlInitialization",n.CREATE_AREA="CreateArea",n.CREATE_ITERATION="CreateIteration",n.EDIT_AREA="EditArea",n.EDIT_ITERATION="EditIteration",n.DELETE_AREA="DeleteArea",n.DELETE_ITERATION="DeleteIteration",n}(),i;n.AreaIterations=r;i=function(){function n(){}return n.AREA=t+"Process",n.LAYOUT_VIEW="AdminLayout",n.ADD_GROUP_DIALOG="AddGroupDialog",n.ADD_FIELD_DIALOG="AddFieldDialog",n.EDIT_FIELD_DIALOG="EditFieldDialog",n.ADD_CONTROLCONTRIBUTION_DIALOG="AddControlContributionDialog",n.EDIT_CONTROLCONTRIBUTION_DIALOG="EditControlContributionDialog",n}();n.Process=i}(f=t.CustomerIntelligenceConstants||(t.CustomerIntelligenceConstants={}));i.tfsModuleLoaded("TFS.Admin",t)});
define("Admin/Scripts/Common/BowtieControls",["require","exports","VSS/Controls/Combos"],function(n,t,i){var u=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initialize=function(){this._$errorMessage=$('<div class="input-error-tip">').hide().insertAfter(this._element);this._hasErrorMessage=!1;n.prototype.initialize.call(this)},t.prototype.setErrorMessage=function(n,t){return t===void 0&&(t=!0),n=n==null?"":n.trim(),t=t&&n.length>0,this._$errorMessage.text(n).toggle(t),this.setInvalid(t),this._hasErrorMessage=t,t},t.prototype.hasErrorMessage=function(){return this._hasErrorMessage},t}(i.Combo),r;t.ComboWithErrorMessage=u;r=function(){function n(n,t,i){var u=this,r;this._options=t;i=i==null?function(){}:i;this.$_container=n;r=$("<fieldset>").addClass("wit-checkbox-fieldset");r.append("<legend>"+t.legend+"<\/legend>");r.append('<input type="checkbox" id='+t.id+" /><label for="+t.id+">"+t.text+"<\/label>");n.append(r);this.$_control=$("#"+this._options.id,this.$_fieldSet);this.$_control.change(function(){i(u.checked())});this.$_fieldSet=r}return n.prototype.show=function(){this.$_fieldSet.show()},n.prototype.hide=function(){this.$_fieldSet.hide()},n.prototype.checked=function(){return this.$_control.prop("checked")},n.prototype.setChecked=function(n){this.$_control.prop("checked",n)},n}();t.CheckBox=r});
define("Admin/Scripts/Common/RadioSelection",["require","exports","VSS/Controls"],function(n,t,i){var r=function(){function n(n,t){var u=this,r;t=$.extend({id:i.getId().toString(),selections:[],selectionHtmlFactory:function(n,t){return t}},t);t.groupName=t.groupName==null?t.id+"_radio":t.groupName;t.defaultSelection=t.selections.length>0&&t.defaultSelection==null?t.selections[0]:t.defaultSelection;r=$('<div id="'+t.id+'" class="radio-selection">').appendTo(n);this._element=r;this._currentSelection=t.defaultSelection;t.selections.forEach(function(n){var i='<input type="radio" id="'+t.selectionIdGetter(n)+'" name="'+t.groupName+'" />',f=$(t.selectionHtmlFactory(n,i)).appendTo(r);$("input[type=radio]",f).change(function(){u._currentSelection=n;t.change(n)}).prop("checked",t.defaultSelection===n).prop("disabled",t.disabled)});this._id=t.id;this._groupName=t.groupName;this._radios=$("input:radio[name="+t.groupName+"]",r)}return n.prototype.getId=function(){return this._id},n.prototype.getGroupName=function(){return this._groupName},n.prototype.getSelection=function(){return this._currentSelection},n.prototype.setEnabled=function(n){this._radios.prop("disabled",!n)},n.prototype.setSelection=function(n){this._radios.filter("#"+n).prop("checked",!0).change()},n.prototype.clearSelection=function(){this._radios.prop("checked",!1);this._currentSelection=null},n}();t.RadioSelection=r});
define("Presentation/Scripts/TFS/TFS.UI.Controls.ColorPicker",["require","exports","VSS/Controls","VSS/Utils/String","VSS/Utils/UI","VSS/Context"],function(n,t,i,r,u,f){var o=function(){function n(t,i,u){if(t<0||t>255)throw Error(r.format("Red value must be between {0} and {1} inclusively.",n.MinValue,n.MaxValue));if(i<0||i>255)throw Error(r.format("Green value must be between {0} and {1} inclusively.",n.MinValue,n.MaxValue));if(u<0||u>255)throw Error(r.format("Blue value must be between {0} and {1} inclusively.",n.MinValue,n.MaxValue));this.red=t;this.green=i;this.blue=u}return n.prototype.getRed=function(){return this.red},n.prototype.getGreen=function(){return this.green},n.prototype.getBlue=function(){return this.blue},n.MinValue=0,n.MaxValue=255,n}(),s,e,l,a,v,y,h,c;t.Rgb=o;s=function(){function n(n){if(n==null)throw new Error("color must be defined");if(typeof n=="string")this._convertStringColorToRgb(n);else if(n instanceof o)this.value=n;else throw new Error("color not in a known type");}return n.prototype.asHex=function(){return"#"+(16777216+(this.value.getRed()<<16)+(this.value.getGreen()<<8)+this.value.getBlue()).toString(16).slice(1)},n.prototype.asRgb=function(){return r.format("rgb({0},{1},{2})",this.value.getRed(),this.value.getGreen(),this.value.getBlue())},n.prototype._convertStringColorToRgb=function(n){var t;if(n=n.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(n,t,i,r){return t+t+i+i+r+r}),t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n),t!=null)this.value=new o(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16));else throw new Error("Color in string only support Hex format");},n.prototype.equals=function(n){return n!=null&&this.asHex()===n.asHex()},n.prototype.getRed=function(){return this.value.getRed()},n.prototype.getGreen=function(){return this.value.getGreen()},n.prototype.getBlue=function(){return this.value.getBlue()},n.prototype.convertToGrayscale=function(){var i=this.getRed()+this.getGreen()+this.getBlue(),t=Math.floor(i/3),r=new o(t,t,t);return new n(r)},n.prototype.invert=function(){return new n(new o(o.MaxValue-this.getRed(),o.MaxValue-this.getGreen(),o.MaxValue-this.getBlue()))},n.prototype.toBlackOrWhite=function(){var t=this.convertToGrayscale();return t.getRed()<o.MaxValue/2?new n("#000000"):new n("#ffffff")},n.prototype.isLightColor=function(){return this.getRed()>248&&this.getBlue()>248&&this.getGreen()>248},n}();t.Color=s;e=function(n){function t(t,i){var r;r=t instanceof s?t.asHex():t;n.call(this,r);this.displayName=i}return __extends(t,n),t.prototype.getDisplayName=function(){return this.displayName==null?n.prototype.asHex.call(this):this.displayName},t}(s);t.AccessibilityColor=e,function(n){n[n.Full=0]="Full";n[n.Muted=1]="Muted";n[n.Vibrant=2]="Vibrant"}(t.PaletteTemplate||(t.PaletteTemplate={}));l=t.PaletteTemplate;a=function(n){function t(t){if(n.call(this,t),t==null)throw new Error("ColorPickerControlOptions is required");}return __extends(t,n),t.prototype.getColor=function(){return this.selectedColor},t.prototype.setColor=function(n){this.selectedColor=n instanceof s?n:new s(n)},t}(i.Control);t.ColorPickerControl=a;v=function(n){function t(i){var u,f;if(i==null)throw new Error("PaletteColorPickerControlOptions is required");if(n.call(this,i),this._isEnabled=!0,i.palette==null||i.palette.length<=0)throw new Error("Palette must be defined with at least one entry");for(u=0;u<i.palette.length;u++)f=i.palette[u],f instanceof e||(typeof f=="string"?i.palette[u]=new e(f):f instanceof s&&(i.palette[u]=new e(f)));if(i.defaultColor!=null&&(i.allowNonPaletteDefaultColor||t.isColorPresentInPalette(i.defaultColor,i.palette))||(i.defaultColor=i.palette[0]),!this.isInColumnRange(i.maximumColumns))throw new Error(r.format("PaletteColorPicker support {0} to {1} columns inclusively",t.MinimumNumberColumn,t.MaximumNumberColumn));this.options=i}return __extends(t,n),t.prototype.initialize=function(){var u=this,r,f;n.prototype.initialize.call(this);r=$("<div>").addClass(t.CssColorPickerPaletteControl);this.getElement().append(r);this.options.triggerElement?this.options.triggerElement.click(function(){u.togglePalette()}):(f={clicked:function(){u.togglePalette()},comboWidth:this.options.comboWidth},this._comboView=i.Control.createIn(c,r,f));this._createPaletteView(r);this.setColor(this.options.defaultColor);$("html").click(function(n){u.onClickOutsideColorPicker(n)})},t.prototype._createPaletteView=function(n){this._paletteView=i.Control.createIn(h,n,{paletteControl:this,paletteControlOptions:this.options})},t.prototype.setFocus=function(){this.options.triggerElement?this.options.triggerElement.focus():this._comboView.focus()},t.prototype.enableElement=function(t){n.prototype.enableElement.call(this,t);t==!1&&this._paletteView.hide();this._isEnabled=t},t.prototype.isEnabled=function(){return this._isEnabled},t.prototype.onClickOutsideColorPicker=function(n){var i,r,u;this._paletteView.isVisible()&&(i=$(n.target),i.hasClass(c.CssNameCombo)||i.hasClass(h.CssNamePalette)||i.closest("."+c.CssNameCombo).length!==0||i.closest("."+h.CssNamePalette).length!==0||this._paletteView.toggle(),r=i.closest("."+t.CssColorPickerPaletteControl),r.length!==0&&(u=$(r.get(0)).parent().attr("id"),$("."+h.CssNamePalette).each(function(n,i){var r=$(i),f=r.closest("."+t.CssColorPickerPaletteControl),e=$(f.get(0)).parent().attr("id");u!==e&&r.parent().hide()})))},t.isColorPresentInPalette=function(n,t){if(n==null||t==null)return!1;var i=!1;return t.forEach(function(t){n.equals(t)&&(i=!0)}),i},t.prototype.isInColumnRange=function(n){return n>=t.MinimumNumberColumn&&n<=t.MaximumNumberColumn},t.prototype.togglePalette=function(){var i,n,t;this.isEnabled()&&(i=this.options.triggerElement?this.options.triggerElement:this._comboView.getElement(),n=$(this.getElement().find("."+h.CssNamePalette).get(0)),this._paletteView.toggle(),n.css("visibility","hidden"),t=this.getOffset(n,i),n.css("left",t.left),n.css("top",t.top),n.css("visibility","visible"),n.focus())},t.prototype.setColor=function(i){if(i==null)throw new Error("Color must be defined");n.prototype.setColor.call(this,i);this.options.triggerElement||this._comboView.setColor(i);t.isColorPresentInPalette(i,this.options.palette)&&this._paletteView.selectSingleColor(i)},t.prototype.getOffset=function(n,t){var o=0,r=n.outerWidth(),u=n.outerHeight(),s=t.outerHeight(),f=n[0].ownerDocument,h=f.documentElement,e=h.clientWidth+$(f).scrollLeft(),c=h.clientHeight+$(f).scrollTop(),i=t.offset();return i.top+=s,i.left-=Math.min(i.left,i.left+r>e&&e>r?Math.abs(i.left+r-e):0),i.top-=Math.min(i.top,i.top+u>c&&c>u?Math.abs(u+s-o):o),i},t.CssColorPickerPaletteControl="color-picker-control",t.MinimumNumberColumn=1,t.MaximumNumberColumn=12,t}(a);t.PaletteColorPickerControl=v;y=function(n){function t(i){if(i==null)throw new Error("DefinedPaletteColorPickerControlOptions is required");n.call(this,t.getPaletteColorPickerControlOptions(i));this._options=i}return __extends(t,n),t.getPaletteColorPickerControlOptions=function(n){var i,r;return n.template===l.Full?(i=t.FullPaletteColors,r=11):n.template===l.Muted?(i=t.MutePaletteColors,r=11):n.template===l.Vibrant&&(i=t.VibrantPaletteColors,r=12),{maximumColumns:r,palette:i,onColorSelected:n.onColorSelected,onColorHover:n.onColorHover,defaultColor:n.defaultColor,allowNonPaletteDefaultColor:n.allowNonPaletteDefaultColor,onOpen:n.onOpen,onClose:n.onClose,comboWidth:n.comboWidth,triggerElement:n.triggerElement}},t.FullPaletteColors=[new e("#222222"),new e("#292E6B"),new e("#009CCC"),new e("#00643A"),new e("#339947"),new e("#FBBC3D"),new e("#DB552C"),new e("#7F1725"),new e("#EC008C"),new e("#5C197B"),new e("#51399F"),new e("#444444"),new e("#1B478B"),new e("#43B4D5"),new e("#207752"),new e("#60AF49"),new e("#FBD144"),new e("#E87025"),new e("#B20B1E"),new e("#EF33A3"),new e("#71338D"),new e("#6951AA"),new e("#666666"),new e("#0D60AB"),new e("#86CDDE"),new e("#56987D"),new e("#8DC54B"),new e("#FBE74B"),new e("#F58B1F"),new e("#E60017"),new e("#F266BA"),new e("#9260A1"),new e("#8874C2"),new e("#888888"),new e("#007ACC"),new e("#C9E7E7"),new e("#7CAF9A"),new e("#A8CE4B"),new e("#FBFD52"),new e("#F7A24B"),new e("#EB3345"),new e("#F599D1"),new e("#AE88B9"),new e("#AA9CDF"),new e("#AAAAAA"),new e("#3F9BD8"),new e("#D6EDED"),new e("#9CC3B2"),new e("#C3D84C"),new e("#FCFD7D"),new e("#F9B978"),new e("#F06673"),new e("#F9CCE8"),new e("#C7ABD0"),new e("#C0B6E9"),new e("#CCCCCC"),new e("#7FBCE5"),new e("#E4F3F3"),new e("#BFD8CD"),new e("#D7E587"),new e("#FCFEA8"),new e("#FBD0A5"),new e("#F599A2"),new e("#FBDDEF"),new e("#E0CAE7"),new e("#DAD4F7")],t.VibrantPaletteColors=[new e("#222222"),new e("#666666"),new e("#292E6B"),new e("#009CCC"),new e("#00643A"),new e("#339947"),new e("#FBBC3D"),new e("#DB552C"),new e("#7F1725"),new e("#EC008C"),new e("#5C197B"),new e("#51399F"),new e("#FFFFFF"),new e("#CCCCCC"),new e("#007ACC"),new e("#C9E7E7"),new e("#7CAF9A"),new e("#A8CE4B"),new e("#FBFD52"),new e("#F7A24B"),new e("#E60017"),new e("#F599D1"),new e("#AE88B9"),new e("#AA9CDF")],t.MutePaletteColors=[new e("#888888"),new e("#007ACC"),new e("#C9E7E7"),new e("#7CAF9A"),new e("#A8CE4B"),new e("#FBFD52"),new e("#F7A24B"),new e("#EB3345"),new e("#F599D1"),new e("#AE88B9"),new e("#AA9CDF"),new e("#AAAAAA"),new e("#3F9BD8"),new e("#D6EDED"),new e("#9CC3B2"),new e("#C3D84C"),new e("#FCFD7D"),new e("#F9B978"),new e("#F06673"),new e("#F9CCE8"),new e("#C7ABD0"),new e("#C0B6E9"),new e("#CCCCCC"),new e("#7FBCE5"),new e("#E4F3F3"),new e("#BFD8CD"),new e("#D7E587"),new e("#FCFEA8"),new e("#FBD0A5"),new e("#F599A2"),new e("#FBDDEF"),new e("#E0CAE7"),new e("#DAD4F7"),new e("#FFFFFF"),new e("#BFDDF2"),new e("#F1F9F9"),new e("#E3F5EE"),new e("#EBF2C3"),new e("#FEFED3"),new e("#FDE7D2"),new e("#FACCD0"),new e("#FDEEF7"),new e("#F5E5FB"),new e("#EDEAFF")],t}(v);t.DefinedPaletteColorPickerControl=y;h=function(n){function t(t){n.call(this,t);this.paletteColorPickerControl=t.paletteControl;this.paletteColorPickerControlOptions=t.paletteControlOptions}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this.createHtml()},t.prototype.createHtml=function(){for(var r=$("<ul>").addClass(t.CssNamePalette).attr("tabindex",0),o=this.paletteColorPickerControlOptions.palette,s=f.isHighContrastMode(),n=0;n<o.length;n++){var u=o[n],e=u.asHex(),i=$("<li>").addClass(t.CssNameSingleColor).attr(t.DataColor,e).attr("title",u.getDisplayName()).css("background-color",e);u.isLightColor()&&i.addClass(t.CssNameSingleColorBorder);this.highContrastSingleColor(s,e,i);n%this.paletteColorPickerControlOptions.maximumColumns==0&&i.addClass(t.CssNameSingleColorLast);r.append(i)}r.css("width",this.getWidth());r.appendTo(this.getElement());this.hide()},t.prototype.highContrastSingleColor=function(n,i,r){if(n){var f=$("<canvas>").attr("width",t.SingleColorSize-1).attr("height",t.SingleColorSize-1).addClass(t.CssNameSingleColorSvg),u=f.get(0).getContext("2d");u.beginPath();u.rect(0,0,t.SingleColorSize-1,t.SingleColorSize-1);u.fillStyle=i;u.fill();r.append(f)}},t.prototype.getWidth=function(){return this.paletteColorPickerControlOptions.maximumColumns*(t.SingleColorSize+t.SingleColorBorderSize+t.SingleColorMargin)+t.PalettePadding*2+2},t.prototype.show=function(){if(this.getElement().show(),this.addEvents(),this.attachParentEvents(),this.getElement().find("."+t.CssNamePalette).get(0).focus(),this.paletteColorPickerControlOptions.onOpen)this.paletteColorPickerControlOptions.onOpen(this.paletteColorPickerControl)},t.prototype.hide=function(){if(this.getElement().hide(),this.removeEvents(),this.removeParentEvents(),this.paletteColorPickerControlOptions.onClose)this.paletteColorPickerControlOptions.onClose(this.paletteColorPickerControl)},t.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},t.prototype.attachParentEvents=function(){var n=this;this.getElement().parents().on("scroll resize",function(){return n.onScrollOrMove()})},t.prototype.removeParentEvents=function(){var n=this;this.getElement().parents().off("scroll resize",function(){return n.onScrollOrMove()})},t.prototype.onScrollOrMove=function(){this.hide()},t.prototype.isVisible=function(){return this.getElement().is(":visible")},t.prototype.onColorSelected=function(n){var t=this.getColorHtmlFromTarget($(n.target)),i=this._getColorFromAttribute(t);this.colorSelected(i)},t.prototype.getColorHtmlFromTarget=function(n){if(n.hasClass(t.CssNameSingleColor))return n;var i=n.closest("."+t.CssNameSingleColor);if(i.length!==1)throw new Error("Cannot find any color on the target");return $(i.get(0))},t.prototype.colorSelected=function(n){if(this.paletteColorPickerControl.setColor(n),this.selectSingleColor(n),this.paletteColorPickerControlOptions.onColorSelected!=null)this.paletteColorPickerControlOptions.onColorSelected(this.paletteColorPickerControl,n);this.hide();this.paletteColorPickerControl.setFocus()},t.prototype.onColorHover=function(n){var t=this.getColorHtmlFromTarget($(n.target)),i=this._getColorFromAttribute(t);if(this.paletteColorPickerControlOptions.onColorHover!=null)this.paletteColorPickerControlOptions.onColorHover(this.paletteColorPickerControl,i)},t.prototype._getColorFromAttribute=function(n){var i=n.attr(t.DataColor);return new s(i)},t.prototype.addEvents=function(){var n=this;this.getElement().on(t.EventClick,"."+t.CssNameSingleColor,function(t){n.onColorSelected(t)});this.getElement().on(t.EventHover,"."+t.CssNameSingleColor,function(t){n.onColorHover(t)});this.getElement().on(t.EventKeyDown,function(t){n.key(t)})},t.prototype.removeEvents=function(){this.getElement().off(t.EventClick);this.getElement().off(t.EventHover);this.getElement().off(t.EventKeyDown)},t.prototype.selectSingleColor=function(n){if(n==null)throw new Error("Color is required when selecting");var i=this.getElement().find(r.format('[{0}="{1}"]',t.DataColor,n.asHex()));if(i.length<=0)throw new Error("Color not found in the palette when selecting");this.selectHtmlColorElement($(i.get(0)))},t.prototype.selectHtmlColorElement=function(n){var i,r;this.getElement().find("."+t.CssNameSingleColorSelected).removeClass(t.CssNameSingleColorSelected);n.addClass(t.CssNameSingleColorSelected);this.getElement().find("."+t.CssNameSingleColorSelectedInnerBorder).not("canvas").remove();this.getElement().find("."+t.CssNameSingleColorSelectedInnerBorder).removeClass(t.CssNameSingleColorSelectedInnerBorder);i=n.find("canvas");i.length===1?i.addClass(t.CssNameSingleColorSelectedInnerBorder):(r=$("<div>").addClass(t.CssNameSingleColorSelectedInnerBorder),n.append(r))},t.prototype.key=function(n){switch(n.which){case u.KeyCode.ENTER:case u.KeyCode.SPACE:var i=$(this.getElement().find("."+t.CssNameSingleColorSelected).get(0)),r=this._getColorFromAttribute(i);this.colorSelected(r);break;case u.KeyCode.ESCAPE:n.preventDefault();n.stopPropagation();this.toggle();break;case u.KeyCode.TAB:n.preventDefault();n.stopPropagation();this.toggle();this.findNextElementToFocus().focus();break;case u.KeyCode.LEFT:this._moveSelectedColorRelative(-1,0);break;case u.KeyCode.RIGHT:this._moveSelectedColorRelative(1,0);break;case u.KeyCode.UP:this._moveSelectedColorRelative(0,1);break;case u.KeyCode.DOWN:this._moveSelectedColorRelative(0,-1);break;default:return}n.preventDefault()},t.prototype._moveSelectedColorRelative=function(n,i){if(n===0&&i!==1&&i!==-1)throw new Error("y value supported is -1 or +1");if(i===0&&n!==1&&n!==-1)throw new Error("x value supported is -1 or +1");if(n!==0&&i!==0)throw new Error("Can only move one direction at a time");var u=$(this.getElement().find("."+t.CssNameSingleColorSelected).get(0)),f=$(this.getElement().find("."+t.CssNameSingleColor)),r;n===1&&(r=this._getRightSingleColor(u,f));n===-1&&(r=this._getLeftSingleColor(u,f));i===-1&&(r=this._getDownSingleColor(u,f));i===1&&(r=this._getUpSingleColor(u,f));r!=null&&this.selectHtmlColorElement(r)},t.prototype._getRightSingleColor=function(n,t){var i=n.next();return i.length===0&&(i=$(t.get(0))),i},t.prototype._getLeftSingleColor=function(n,t){var i=n.prev();return i.length===0&&(i=$(t.get(t.length-1))),i},t.prototype._getDownSingleColor=function(n,t){var i,r,u;return n.nextAll().length>=this.paletteColorPickerControlOptions.maximumColumns?i=n.nextAll().slice(this.paletteColorPickerControlOptions.maximumColumns-1,this.paletteColorPickerControlOptions.maximumColumns):(r=t.index(n),u=r%this.paletteColorPickerControlOptions.maximumColumns,i=$(t.get(u))),i},t.prototype._getUpSingleColor=function(n,t){var i;if(n.prevAll().length>=this.paletteColorPickerControlOptions.maximumColumns)i=n.prevAll().slice(this.paletteColorPickerControlOptions.maximumColumns-1,this.paletteColorPickerControlOptions.maximumColumns);else{var r=t.index(n),u=t.length,e=u/this.paletteColorPickerControlOptions.maximumColumns,o=u%this.paletteColorPickerControlOptions.maximumColumns,f=0;r>=o&&(f=-1);i=$(t.get(r+(Math.floor(e)+f)*this.paletteColorPickerControlOptions.maximumColumns))}return i},t.prototype.findNextElementToFocus=function(){var n=$(document).find("a, button, :input, [tabindex]"),t=n.index(document.activeElement)+1;return t>=n.length&&(t=0),n.eq(t)},t.EventClick="click",t.EventHover="mouseenter",t.EventKeyDown="keydown",t.CssNamePalette="color-picker-palette",t.CssNameSingleColor="color-picker-palette-single-color",t.CssNameSingleColorSvg="color-picker-palette-single-color-svg",t.CssNameSingleColorLast="color-picker-palette-single-color-last",t.CssNameSingleColorSelected="color-picker-palette-single-color-selected",t.CssNameSingleColorSelectedInnerBorder="color-picker-palette-single-color-selected-inner",t.CssNameSingleColorBorder="color-picker-palette-single-color-border",t.DataColor="data-hex-color",t.PalettePadding=2,t.SingleColorSize=20,t.SingleColorBorderSize=1,t.SingleColorMargin=1,t}(i.Control);t.ColorPaletteView=h;c=function(n){function t(t){n.call(this,t);this.height=25;this.width=100;this.widthArrowCombo=18;this.options=t}return __extends(t,n),t.prototype.initialize=function(){var n=this.options.comboWidth||this.width,i;this.getElement().addClass(t.CssNameCombo).css("width",n).css("height",this.height).attr("tabindex",0);i=f.isHighContrastMode();i&&(this.canvasHighContrast=$("<canvas>").css("float","left").attr("width",n-this.widthArrowCombo).attr("height",this.height-1),this.getElement().append(this.canvasHighContrast));this.getElement().append($("<span>").addClass("bowtie-icon").addClass("bowtie-triangle-down"));this.attachEvents()},t.prototype.setColor=function(n){var i,r,t;if(n==null)throw new Error("Color must be defined");this.getElement().css("background-color",n.asHex());this.getElement().attr("title",n.asHex());i=f.isHighContrastMode();i&&(r=this.options.comboWidth||this.width,t=this.canvasHighContrast.get(0).getContext("2d"),t.beginPath(),t.rect(0,0,r-this.widthArrowCombo,this.height-2),t.fillStyle=n.asHex(),t.fill())},t.prototype.attachEvents=function(){var n=this;this.getElement().click(function(){n.options.clicked()});this.getElement().on("keydown",function(t){n.key(t)})},t.prototype.key=function(n){switch(n.which){case u.KeyCode.ENTER:case u.KeyCode.SPACE:this.options.clicked();default:return}},t.CssNameCombo="color-picker-combo",t}(i.Control);t.ColorComboView=c});
define("Admin/Scripts/Common/ControlFactory",["require","exports","Admin/Scripts/Common/BowtieControls","Admin/Scripts/Common/RadioSelection","Presentation/Scripts/TFS/TFS.UI.Controls.ColorPicker","VSS/Controls","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation"],function(n,t,i,r,u,f,e){function s(n,t,r,u,e,o){var s,h,c;return e===void 0&&(e=[]),o===void 0&&(o=null),s=$("<fieldset>"),s.append('<label for="'+t+'_txt">'+r+"<\/label>"),c={id:t,source:e,allowEdit:!1,maxAutoExpandDropWidth:200,change:function(){return u(h.getText(),h.getSelectedIndex())},value:o},h=f.BaseControl.createIn(i.ComboWithErrorMessage,s,c),n.append(s),h}function h(n,t,r,u,e){var s=$("<fieldset>"),o,h;return s.append('<label for="'+t+'_txt">'+r+"<\/label>"),h={mode:"text",id:t,change:function(){return e(o.getText())}},o=f.BaseControl.createIn(i.ComboWithErrorMessage,s,h),o.getInput().attr("maxLength",u),n.append(s),o}function o(n,t,i){var u=$("<fieldset>"),f;return t!=null&&t.length>0&&u.append("<legend>"+t+"<\/legend>"),f=new r.RadioSelection(u,i),n.append(u),f}function c(n,t,r,u,f){var e={id:t,text:u,legend:r};return new i.CheckBox(n,e,f)}function l(n,t){return o(n,null,t)}function a(n,t,i,r,u,f){var o=$("<fieldset>"),e;o.append('<label for="'+t+'">'+i+"<\/label>");e=$('<textarea id="'+t+'" class="process-common-textarea" rows="'+u+'" maxlength= "'+r+'"><\/textarea>').appendTo(o);n.append(o);e.on("input propertychange",function(){return f(e.val())});return e}function v(n,t,i,r){var e=$("<fieldset>"),s,o;return e.append("<label>"+t+"<\/label>"),s={tagName:"div",template:u.PaletteTemplate.Full,onColorSelected:function(n,t){return r(t.asHex().replace("#",""))},defaultColor:new u.Color(i),allowNonPaletteDefaultColor:!0},o=f.Control.createIn(u.DefinedPaletteColorPickerControl,e,s),e.find("label").click(function(){return o.getElement().find(".color-picker-combo").focus()}),n.append(e),o}function y(n,t){return $('<div class="form-section"><p><a href="'+t+'" target="_blank" rel="external">'+e.LearnMore+"<\/a><\/p><\/div>").appendTo(n)}t.createCombo=s;t.createTextInput=h;t.createRadioSelection=o;t.createCheckBox=c;t.createRadioSelectionWithoutLegend=l;t.createPrimitiveTextArea=a;t.createColorInput=v;t.createLearnMoreLinkBlock=y});
define("Presentation/Scripts/TFS/FeatureRef/TFS.AgileCommon",["require","exports","VSS/VSS","Presentation/Scripts/TFS/TFS.Legacy.Ajax","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Array","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/TFS.Service","VSS/Diag","VSS/Events/Services"],function(n,t,i,r,u,f,e,o,s,h,c){var p,w,l,a,v,y,b,k;(function(n){n[n.Proposed=1]="Proposed";n[n.InProgress=2]="InProgress";n[n.Complete=3]="Complete";n[n.Requested=4]="Requested";n[n.Received=5]="Received";n[n.Reviewed=6]="Reviewed";n[n.Declined=7]="Declined";n[n.Resolved=8]="Resolved"})(t.StateType||(t.StateType={}));p=t.StateType;w=function(){function n(n,t){var r=this,i;this.m_processSettings=n;this.m_teamSettings=t;i=[];i.push(n.requirementBacklog);t.bugsBehavior===y.AsRequirements&&i.push(n.bugWorkItems);this.requirements=new l(i,n.requirementBacklog.plural,n.requirementBacklog.defaultWorkItemType,n.portfolioBacklogs.length===0?!0:!1,this._getMappedOrDefaultVisibility(t,i[0]));i=[];i.push(n.taskBacklog);t.bugsBehavior===y.AsTasks&&i.push(n.bugWorkItems);this.tasks=new l(i,n.taskBacklog.plural,n.taskBacklog.defaultWorkItemType,!1,!0);this.portfolios=[];$.each(n.portfolioBacklogs,function(n,i){var u=new l([i],i.plural,i.defaultWorkItemType,n===0,r._getMappedOrDefaultVisibility(t,i));r.portfolios.push(u)});this.allBacklogs=this.portfolios.concat([this.requirements,this.tasks])}return n.prototype.getBacklogByName=function(n){return e.first(this.allBacklogs,function(t){return f.localeIgnoreCaseComparer(t.name,n)===0})},n.prototype.getBacklogByCategoryRefName=function(n){return e.first(this.allBacklogs,function(t){return t.categoryConfigurations.some(function(t){return f.localeIgnoreCaseComparer(t.category,n)===0})})},n.prototype._getMappedOrDefaultVisibility=function(n,t){var r,i;return r=!0,n!=null&&t!=null&&(i=e.first(n.backlogVisibilities,function(n){return!n||!n.Key||n.Value==null,f.ignoreCaseComparer(n.Key?n.Key.trim():null,t.category)===0}),i&&i.Value!=null&&(r=i.Value)),r},n.prototype.getBacklogDefaultColor=function(n){this.m_colorProvider||(this.m_colorProvider=new o.ColorsProvider(this.m_processSettings.workItemColors));var t=this.getBacklogByName(n);return t?this.m_colorProvider.getWorkItemTypeColor(t.defaultWorkItemTypeName):""},n}();t.BacklogConfiguration=w;l=function(){function n(n,t,i,r,u){this.categoryConfigurations=n;this.name=t;this.defaultWorkItemTypeName=i;this.isRootBacklog=r;this.isVisible=u}return n.prototype.getWorkItemTypes=function(){var n=[],o,i,t,r,u;for($.each(this.categoryConfigurations,function(t,i){n=n.concat(i.workItemTypeNames)}),o=e.unique(n,f.localeIgnoreCaseComparer),i=[],t=0,r=n;t<r.length;t++)u=r[t],e.contains(o,u,f.localeIgnoreCaseComparer)&&i.push(u);return i},n.prototype.getWorkItemStates=function(){for(var i,t=[],n=0;n<arguments.length;n++)t[+n]=arguments[n];return i=[],$.each(this.categoryConfigurations,function(n,r){$.each(r.states,function(n,r){(t.length<=0||e.contains(t,r.type))&&i.push(r.value)})}),e.unique(i)},n}();t.BacklogLevelConfiguration=l;a=function(){function n(n){this.plural=n.plural;this.singular=n.singular;this.category=n.category;this.parentCategory=n.parentCategory;this.workItemCountLimit=n.workItemCountLimit;this.states=n.states}return n.prototype.containsWorkItemType=function(n){return e.contains(this.workItemTypeNames,n,f.localeIgnoreCaseComparer)},n.prototype.getIntermediateBacklogs=function(n){var r=[],i,t,u;if(!n)return[];if(i=this.compare(n),i===0)return[];for(t=i===1?this:n,u=i===1?n:this;t;){if(f.ignoreCaseComparer(t.category,this.category)!==0&&r.push(t),f.ignoreCaseComparer(t.category,u.category)===0)break;t=t.child}return r},n.prototype.getIntermediateBacklogNames=function(n){var t=this.getIntermediateBacklogs(n);return $.map(t,function(n){return n.plural})},n.prototype.compare=function(n){if(!n)return 1;for(var t=this.child;t;){if(f.ignoreCaseComparer(t.category,n.category)===0)return 1;t=t.child}for(t=this.parent;t;){if(f.ignoreCaseComparer(t.category,n.category)===0)return-1;t=t.parent}return 0},n.prototype.isRootBacklog=function(){return!this.parent},n}();t.BacklogCategoryConfiguration=a;v=function(){function n(n){var t=this,i;this.taskBacklog=new a(n.taskBacklog);this.requirementBacklog=new a(n.requirementBacklog);this.portfolioBacklogs=$.map(n.portfolioBacklogs,function(n){return new a(n)});this.allBacklogs=this.portfolioBacklogs.concat([this.requirementBacklog,this.taskBacklog]);this._workItemTypeCategoryMap={};this._backlogCategoryNameMap={};this._workItemCategoryStateNameTypeMap={};this.workItemCategories=n.workItemCategories;i=null;$.each(this.allBacklogs,function(r,u){i!==null&&(i.child=u,u.parent=i);i=u;u.workItemTypeNames=n.workItemCategories[u.category];u.isRequirementCategory=u===t.requirementBacklog;u.defaultWorkItemType=n.defaultWorkItemTypes[u.category];$.each(u.workItemTypeNames||[],function(n,i){t._workItemTypeCategoryMap[i]=u.category});t._backlogCategoryNameMap[u.category]=u});this.bugWorkItems=n.bugWorkItems;this.bugWorkItems&&(this.bugWorkItems.workItemTypeNames=n.workItemCategories[this.bugWorkItems.category],$.each(this.bugWorkItems.workItemTypeNames,function(n,i){t._workItemTypeCategoryMap[i]||(t._workItemTypeCategoryMap[i]=t.bugWorkItems.category)}));this.feedbackWorkItems=n.feedbackWorkItems;this.feedbackRequestWorkItems=n.feedbackRequestWorkItems;this.feedbackResponseWorkItems=n.feedbackResponseWorkItems;this.releaseWorkItems=n.releaseWorkItems;this.signoffTaskWorkItems=n.signoffTaskWorkItems;this.stageWorkItems=n.stageWorkItems;this.typeFields=n.typeFields;this.weekends=n.weekends;n.workItemColors&&(this.workItemColors=$.map(n.workItemColors,function(n){return{PrimaryColor:n.primary,SecondaryColor:n.secondary,WorkItemTypeName:n.name}}))}return n.prototype.getCategoryForWorkItemType=function(n){return this._workItemTypeCategoryMap[n]},n.prototype.getCategoryForCategoryRefName=function(n){return this._backlogCategoryNameMap[n]},n.prototype.getTypeField=function(n){var t;return $.each(this.typeFields,function(i,r){if(r.type===n)return t=r,!1}),t},n.prototype.getStateNameTypeMap=function(n){var t=this._workItemCategoryStateNameTypeMap[n];return t||(t={},this.allBacklogs&&$.each(this.allBacklogs,function(i,r){if(f.ignoreCaseComparer(n,r.category)===0)return $.each(r.states,function(n,i){t[i.value]=i.type;t[i.value.toUpperCase()]=i.type}),!1}),this.bugWorkItems&&f.ignoreCaseComparer(n,this.bugWorkItems.category)===0&&$.each(this.bugWorkItems.states,function(n,i){t[i.value]=i.type}),this._workItemCategoryStateNameTypeMap[n]=t),t},n.prototype.getBacklogItemStateType=function(n,t){var i,r;return n&&n!==""&&(i=this.getCategoryForWorkItemType(n),i&&i!==""&&(r=this.getStateNameTypeMap(i),r))?r[t]:undefined},n.prototype.isRequirementCategory=function(n){return this.requirementBacklog&&this.requirementBacklog.containsWorkItemType(n)},n.prototype.isTaskCategory=function(n){return this.taskBacklog&&this.taskBacklog.containsWorkItemType(n)},n.prototype.isBugCategory=function(n){return this.bugWorkItems&&this.bugWorkItems.workItemTypeNames&&e.contains(this.bugWorkItems.workItemTypeNames,n,f.localeIgnoreCaseComparer)},n.StateType=p,n.FieldType={Effort:1,Order:2,RemainingWork:3,Team:4,Activity:5,Requestor:6,ApplicationType:7,ApplicationStartInformation:8,ApplicationLaunchInstructions:9,FeedbackNotes:10,ClosedDate:11},n}();t.ProjectProcessConfiguration=v,function(n){n[n.Off=0]="Off";n[n.AsRequirements=1]="AsRequirements";n[n.AsTasks=2]="AsTasks"}(t.BugsBehavior||(t.BugsBehavior={}));y=t.BugsBehavior;b=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.beginGetProcessSettings=function(n,t,u){var f=this,o=function(t){f._processSettings||(f._processSettings=new v(t));n.apply(f,[f._processSettings])},e;this._checkDataIsland();e={area:"api"};u&&(e=$.extend(u,e));i.queueRequest(this,this,"_processSettingsInternal",o,t,function(n,t){function o(t){i._fireProcessSettingsLoaded(t);n.apply(this,arguments)}var i=f,u=f.getTfsContext().getActionUrl("getProcessSettings","processConfiguration",e);r.getMSJSON(u,null,o,t)})},t.prototype._checkDataIsland=function(){var n;this._checkedForDataIsland||(this._checkedForDataIsland=!0,n=$(".process-settings-data"),n.length>0&&(this._processSettingsInternal=u.parseMSJSON(n.eq(0).html(),!1),n.eq(0).empty(),this._fireProcessSettingsLoaded(this._processSettingsInternal)))},t.prototype.getProcessSettings=function(){return this._checkDataIsland(),!this._processSettings&&this._processSettingsInternal&&(this._processSettings=new v(this._processSettingsInternal)),this._processSettings},t.prototype._fireProcessSettingsLoaded=function(n){c.getService().fire(t.PROCESS_SETTINGS_LOADED_EVENT,n)},t.PROCESS_SETTINGS_LOADED_EVENT="ProcessConfigService.SettingsLoaded",t}(s.TfsService);t.ProjectProcessConfigurationService=b;k=function(n){function t(){n.call(this);this._teamMembers={}}return __extends(t,n),t.prototype.beginGetTeamMembers=function(n,t,u,f,e){var s,o=this.getTfsContext();n||(n=o.currentTeam.identity.id);u=u||100;t=Boolean(t);s=n+"|"+u+"|"+t;i.queueRequest(this,this._teamMembers,s,f,e,function(i,f){var e=o.getActionUrl("members","teams",{area:"api"});r.getMSJSON(e,{teamId:n,maxResults:u,includeGroups:t},function(n){i(n.members)},f)})},t}(s.TfsService);t.TeamService=k});
define("Presentation/Scripts/TFS/FeatureRef/TFS.TeamAwarenessService",["require","exports","VSS/VSS","Presentation/Scripts/TFS/TFS.Legacy.Ajax","VSS/Utils/Core","Presentation/Scripts/TFS/TFS.Service","Presentation/Scripts/TFS/FeatureRef/TFS.AgileCommon","VSS/Diag"],function(n,t,i,r,u,f,e,o){var s=function(n){function t(){n.call(this)}return __extends(t,n),t.contextSupports=function(n){return Boolean(n.currentTeam)},t.prototype.beginGetTeamMembers=function(n,t,i,r){this.tfsConnection.getService(e.TeamService).beginGetTeamMembers(null,n,t,i,r)},t.prototype.beginGetTeamSettings=function(n,t,u){var e,f;e=this;this._checkDataIsland();f={area:"api"};u&&(f=$.extend(u,f));i.queueRequest(this,this,"_teamSettings",n,t,function(n,t){var i=e.getTfsContext().getActionUrl("teamSettings","teamConfiguration",f);r.getMSJSON(i,null,function(t){n(t)},t)})},t.prototype.getTeamMembers=function(){return this._checkDataIsland(),this._teamMembers},t.prototype.getTeamSettings=function(){return this._checkDataIsland(),this._teamSettings},t.prototype.beginGetBacklogConfiguration=function(n,t,i){var r=this;this.beginGetTeamSettings(function(u){r.tfsConnection.getService(e.ProjectProcessConfigurationService).beginGetProcessSettings(function(t){r._backlogConfiguration=new e.BacklogConfiguration(t,u);n(r._backlogConfiguration)},t,i)},t,i)},t.prototype.getBacklogConfiguration=function(){return this._backlogConfiguration||(this._backlogConfiguration=new e.BacklogConfiguration(this.tfsConnection.getService(e.ProjectProcessConfigurationService).getProcessSettings(),this.getTeamSettings())),this._backlogConfiguration},t.prototype._checkDataIsland=function(){var n;this._checkedForDataIsland||(this._checkedForDataIsland=!0,n=$(".team-settings-data"),n.length>0&&(this._teamSettings=u.parseMSJSON(n.eq(0).html(),!1),n.eq(0).empty()),n=$(".team-members-data"),n.length>0&&(this._teamMembers=u.parseMSJSON(n.eq(0).html(),!1),n.eq(0).empty()))},t}(f.TfsService);t.TeamAwarenessService=s});
define("TFS/Core/Contracts",["require","exports"],function(n,t){"use strict";var i,r,u,f;(function(n){n[n.Custom=0]="Custom";n[n.AzureSubscription=1]="AzureSubscription";n[n.Chef=2]="Chef";n[n.Generic=3]="Generic"})(t.ConnectedServiceKind||(t.ConnectedServiceKind={}));i=t.ConnectedServiceKind,function(n){n[n.System=0]="System";n[n.Custom=1]="Custom";n[n.Inherited=2]="Inherited"}(t.ProcessType||(t.ProcessType={}));r=t.ProcessType,function(n){n[n.Modified=0]="Modified";n[n.Deleted=1]="Deleted";n[n.Added=2]="Added"}(t.ProjectChangeType||(t.ProjectChangeType={}));u=t.ProjectChangeType,function(n){n[n.Tfvc=1]="Tfvc";n[n.Git=2]="Git"}(t.SourceControlTypes||(t.SourceControlTypes={}));f=t.SourceControlTypes;t.TypeInfo={ConnectedServiceKind:{enumValues:{custom:0,azureSubscription:1,chef:2,generic:3}},Process:{},ProcessType:{enumValues:{system:0,custom:1,inherited:2}},ProjectChangeType:{enumValues:{modified:0,deleted:1,added:2}},ProjectInfo:{},ProjectMessage:{},SourceControlTypes:{enumValues:{tfvc:1,git:2}},TemporaryDataCreatedDTO:{}};t.TypeInfo.Process.fields={type:{enumType:t.TypeInfo.ProcessType}};t.TypeInfo.ProjectInfo.fields={lastUpdateTime:{isDate:!0}};t.TypeInfo.ProjectMessage.fields={project:{typeInfo:t.TypeInfo.ProjectInfo},projectChangeType:{enumType:t.TypeInfo.ProjectChangeType}};t.TypeInfo.TemporaryDataCreatedDTO.fields={expirationDate:{isDate:!0}}});
define("TFS/Core/RestClient",["require","exports","TFS/Core/Contracts","VSS/Operations/Contracts","VSS/Service","VSS/WebApi/RestClient","VSS/WebApi/Constants"],function(n,t,i,r,u,f,e){"use strict";function w(n){return window.VSS&&window.VSS.VssSDKRestVersion&&y[window.VSS.VssSDKRestVersion]?u.getClient(y[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):u.getClient(h,undefined,undefined,undefined,n)}var o=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.updateTeam=function(n,t,i){return this._beginRequest({httpMethod:"PATCH",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",routeValues:{projectId:t,teamId:i},apiVersion:this.teamsApiVersion,data:n})},t.prototype.getTeams=function(n,t,i){var r={$top:t,$skip:i};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",responseIsCollection:!0,routeValues:{projectId:n},queryParams:r,apiVersion:this.teamsApiVersion})},t.prototype.getTeam=function(n,t){return this._beginRequest({httpMethod:"GET",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",routeValues:{projectId:n,teamId:t},apiVersion:this.teamsApiVersion})},t.prototype.deleteTeam=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",routeValues:{projectId:n,teamId:t},apiVersion:this.teamsApiVersion})},t.prototype.createTeam=function(n,t){return this._beginRequest({httpMethod:"POST",area:"core",locationId:"d30a3dd1-f8ba-442a-b86a-bd0c0c383e59",resource:"teams",routeTemplate:"_apis/projects/{projectId}/{resource}/{*teamId}",routeValues:{projectId:t},apiVersion:this.teamsApiVersion,data:n})},t.prototype.getProxies=function(n){var t={proxyUrl:n};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"ec1f4311-f2b4-4c15-b2b8-8990b80d2908",resource:"proxies",routeTemplate:"_apis/{resource}",responseIsCollection:!0,queryParams:t,apiVersion:this.proxiesApiVersion})},t.prototype.updateProject=function(n,t){return this._beginRequest({httpMethod:"PATCH",area:"core",locationId:"603fe2ac-9723-48b9-88ad-09305aa6c6e1",resource:"projects",routeTemplate:"_apis/{resource}/{*projectId}",responseType:r.TypeInfo.OperationReference,routeValues:{projectId:t},apiVersion:this.projectsApiVersion,data:n})},t.prototype.queueDeleteProject=function(n){return this._beginRequest({httpMethod:"DELETE",area:"core",locationId:"603fe2ac-9723-48b9-88ad-09305aa6c6e1",resource:"projects",routeTemplate:"_apis/{resource}/{*projectId}",responseType:r.TypeInfo.OperationReference,routeValues:{projectId:n},apiVersion:this.projectsApiVersion})},t.prototype.queueCreateProject=function(n){return this._beginRequest({httpMethod:"POST",area:"core",locationId:"603fe2ac-9723-48b9-88ad-09305aa6c6e1",resource:"projects",routeTemplate:"_apis/{resource}/{*projectId}",responseType:r.TypeInfo.OperationReference,apiVersion:this.projectsApiVersion,data:n})},t.prototype.getProjects=function(n,t,i){var r={stateFilter:n,$top:t,$skip:i};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"603fe2ac-9723-48b9-88ad-09305aa6c6e1",resource:"projects",routeTemplate:"_apis/{resource}/{*projectId}",responseIsCollection:!0,queryParams:r,apiVersion:this.projectsApiVersion})},t.prototype.getProject=function(n,t,i){var r={includeCapabilities:t,includeHistory:i};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"603fe2ac-9723-48b9-88ad-09305aa6c6e1",resource:"projects",routeTemplate:"_apis/{resource}/{*projectId}",routeValues:{projectId:n},queryParams:r,apiVersion:this.projectsApiVersion})},t.prototype.getProjectHistory=function(n){var t={minRevision:n};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"6488a877-4749-4954-82ea-7340d36be9f2",resource:"projectHistory",routeTemplate:"_apis/{resource}",responseIsCollection:!0,queryParams:t,apiVersion:this.projectHistoryApiVersion})},t.prototype.getProjectCollections=function(n,t){var i={$top:n,$skip:t};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"8031090f-ef1d-4af6-85fc-698cd75d42bf",resource:"projectCollections",routeTemplate:"_apis/{resource}/{collectionId}",responseIsCollection:!0,queryParams:i,apiVersion:this.projectCollectionsApiVersion})},t.prototype.getProjectCollection=function(n){return this._beginRequest({httpMethod:"GET",area:"core",locationId:"8031090f-ef1d-4af6-85fc-698cd75d42bf",resource:"projectCollections",routeTemplate:"_apis/{resource}/{collectionId}",routeValues:{collectionId:n},apiVersion:this.projectCollectionsApiVersion})},t.prototype.getProcesses=function(){return this._beginRequest({httpMethod:"GET",area:"core",locationId:"93878975-88c5-4e6a-8abb-7ddd77a8a7d8",resource:"processes",routeTemplate:"_apis/process/{resource}/{*processId}",responseType:i.TypeInfo.Process,responseIsCollection:!0,apiVersion:this.processesApiVersion})},t.prototype.getProcessById=function(n){return this._beginRequest({httpMethod:"GET",area:"core",locationId:"93878975-88c5-4e6a-8abb-7ddd77a8a7d8",resource:"processes",routeTemplate:"_apis/process/{resource}/{*processId}",responseType:i.TypeInfo.Process,routeValues:{processId:n},apiVersion:this.processesApiVersion})},t.prototype.getTeamMembers=function(n,t,i,r){var u={$top:i,$skip:r};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"294c494c-2600-4d7e-b76c-3dd50c3c95be",resource:"members",routeTemplate:"_apis/projects/{projectId}/teams/{teamId}/{resource}",responseIsCollection:!0,routeValues:{projectId:n,teamId:t},queryParams:u,apiVersion:this.membersApiVersion})},t.prototype.updateIdentityMru=function(n,t){return this._beginRequest({httpMethod:"PATCH",httpResponseType:"html",area:"core",locationId:"5ead0b70-2572-4697-97e9-f341069a783a",resource:"identityMru",routeTemplate:"_apis/{area}/{resource}/{mruName}",routeValues:{mruName:t},apiVersion:this.identityMruApiVersion,data:n})},t.prototype.getIdentityMru=function(n){return this._beginRequest({httpMethod:"GET",area:"core",locationId:"5ead0b70-2572-4697-97e9-f341069a783a",resource:"identityMru",routeTemplate:"_apis/{area}/{resource}/{mruName}",responseIsCollection:!0,routeValues:{mruName:n},apiVersion:this.identityMruApiVersion})},t.prototype.deleteIdentityMru=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"core",locationId:"5ead0b70-2572-4697-97e9-f341069a783a",resource:"identityMru",routeTemplate:"_apis/{area}/{resource}/{mruName}",routeValues:{mruName:t},apiVersion:this.identityMruApiVersion})},t.prototype.createIdentityMru=function(n,t){return this._beginRequest({httpMethod:"POST",httpResponseType:"html",area:"core",locationId:"5ead0b70-2572-4697-97e9-f341069a783a",resource:"identityMru",routeTemplate:"_apis/{area}/{resource}/{mruName}",routeValues:{mruName:t},apiVersion:this.identityMruApiVersion,data:n})},t.prototype.getConnectedServices=function(n,t){var i={kind:t};return this._beginRequest({httpMethod:"GET",area:"core",locationId:"b4f70219-e18b-42c5-abe3-98b07d35525e",resource:"connectedServices",routeTemplate:"_apis/projects/{projectId}/{resource}/{name}",responseIsCollection:!0,routeValues:{projectId:n},queryParams:i,apiVersion:this.connectedServicesApiVersion})},t.prototype.getConnectedServiceDetails=function(n,t){return this._beginRequest({httpMethod:"GET",area:"core",locationId:"b4f70219-e18b-42c5-abe3-98b07d35525e",resource:"connectedServices",routeTemplate:"_apis/projects/{projectId}/{resource}/{name}",routeValues:{projectId:n,name:t},apiVersion:this.connectedServicesApiVersion})},t.prototype.createConnectedService=function(n,t){return this._beginRequest({httpMethod:"POST",area:"core",locationId:"b4f70219-e18b-42c5-abe3-98b07d35525e",resource:"connectedServices",routeTemplate:"_apis/projects/{projectId}/{resource}/{name}",routeValues:{projectId:t},apiVersion:this.connectedServicesApiVersion,data:n})},t.serviceInstanceId=e.ServiceInstanceTypes.TFS,t}(f.VssHttpClient),s,h,c,l,a,v,p,y;t.CommonMethods2To3_1=o;s=function(n){function t(t,i){n.call(this,t,i);this.connectedServicesApiVersion=this.identityMruApiVersion=this.membersApiVersion=this.processesApiVersion=this.projectHistoryApiVersion=this.proxiesApiVersion=this.teamsApiVersion="3.1-preview.1";this.projectCollectionsApiVersion="3.1-preview.2";this.projectsApiVersion="3.1-preview.3"}return __extends(t,n),t}(o);t.CoreHttpClient3_1=s;h=function(n){function t(t,i){n.call(this,t,i);this.membersApiVersion=this.processesApiVersion=this.projectCollectionsApiVersion=this.projectsApiVersion=this.teamsApiVersion="3.0";this.connectedServicesApiVersion=this.identityMruApiVersion=this.projectHistoryApiVersion=this.proxiesApiVersion="3.0-preview.1"}return __extends(t,n),t}(o);t.CoreHttpClient3=h;c=function(n){function t(t,i){n.call(this,t,i);this.membersApiVersion=this.processesApiVersion=this.projectCollectionsApiVersion=this.projectsApiVersion=this.teamsApiVersion="2.3";this.connectedServicesApiVersion=this.identityMruApiVersion=this.projectHistoryApiVersion=this.proxiesApiVersion="2.3-preview.1"}return __extends(t,n),t}(o);t.CoreHttpClient2_3=c;l=function(n){function t(t,i){n.call(this,t,i);this.membersApiVersion=this.processesApiVersion=this.projectCollectionsApiVersion=this.projectsApiVersion=this.teamsApiVersion="2.2";this.connectedServicesApiVersion=this.identityMruApiVersion=this.projectHistoryApiVersion=this.proxiesApiVersion="2.2-preview.1"}return __extends(t,n),t}(o);t.CoreHttpClient2_2=l;a=function(n){function t(t,i){n.call(this,t,i);this.membersApiVersion=this.processesApiVersion=this.projectCollectionsApiVersion=this.projectsApiVersion=this.teamsApiVersion="2.1";this.connectedServicesApiVersion=this.identityMruApiVersion=this.projectHistoryApiVersion=this.proxiesApiVersion="2.1-preview.1"}return __extends(t,n),t}(o);t.CoreHttpClient2_1=a;v=function(n){function t(t,i){n.call(this,t,i);this.membersApiVersion=this.processesApiVersion=this.projectCollectionsApiVersion=this.projectsApiVersion=this.teamsApiVersion="2.0";this.connectedServicesApiVersion=this.identityMruApiVersion=this.projectHistoryApiVersion=this.proxiesApiVersion="2.0-preview.1"}return __extends(t,n),t}(o);t.CoreHttpClient2=v;p=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t}(s);t.CoreHttpClient=p;y={"3.1":s,"3.0":h,"2.3":c,"2.2":l,"2.1":a,"2.0":v};t.getClient=w});
define("Admin/Scripts/TFS.Admin.ConnectedServices",["require","exports","VSS/VSS","VSS/Service","Presentation/Scripts/TFS/TFS.Legacy.Ajax","Presentation/Scripts/TFS/TFS.Service","TFS/Core/RestClient","TFS/Core/Contracts","Presentation/Scripts/TFS/TFS.Host.TfsContext"],function(n,t,i,r,u,f,e,o,s){var c=function(n){function t(){n.call(this)}return __extends(t,n),t.prototype.getApiLocation=function(n){return this.getTfsContext().getActionUrl(n||"","services",{area:"api"})},t.prototype.beginDisconnect=function(n,t,i){u.postHTML(this.getApiLocation("Disconnect"),{name:n},t,i)},t.prototype.beginAccountUrl=function(n,t,i){u.getMSJSON(this.getApiLocation("AccountUrl"),{connectedServiceName:n},t,i)},t}(f.TfsService),h;t.ConnectedServicesManager=c;h=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeConnection=function(t){n.prototype.initializeConnection.call(this,t);this._httpClient||(this._httpClient=t.getHttpClient(e.CoreHttpClient));this._projectId=s.TfsContext.getDefault().navigation.projectId},t.prototype.beginGetConnectedServices=function(){return this._httpClient.getConnectedServices(this._projectId,o.ConnectedServiceKind.AzureSubscription)},t.prototype.beginGetConnectedService=function(n){return this._httpClient.getConnectedServiceDetails(this._projectId,n)},t.prototype.beginCreateConnectedService=function(n){return this._httpClient.createConnectedService(n,this._projectId)},t}(r.VssService);t.ConnectedServicesService=h;i.tfsModuleLoaded("TFS.Admin.ConnectedServices",t)});
define("VSS/Common/Contracts/FormInput",["require","exports"],function(n,t){"use strict";var i,r,u;(function(n){n[n.None=0]="None";n[n.String=10]="String";n[n.Number=20]="Number";n[n.Boolean=30]="Boolean";n[n.Guid=40]="Guid";n[n.Uri=50]="Uri"})(t.InputDataType||(t.InputDataType={}));i=t.InputDataType,function(n){n[n.Equals=0]="Equals";n[n.NotEquals=1]="NotEquals"}(t.InputFilterOperator||(t.InputFilterOperator={}));r=t.InputFilterOperator,function(n){n[n.None=0]="None";n[n.TextBox=10]="TextBox";n[n.PasswordBox=20]="PasswordBox";n[n.Combo=30]="Combo";n[n.RadioButtons=40]="RadioButtons";n[n.CheckBox=50]="CheckBox";n[n.TextArea=60]="TextArea"}(t.InputMode||(t.InputMode={}));u=t.InputMode;t.TypeInfo={InputDataType:{enumValues:{none:0,string:10,number:20,boolean:30,guid:40,uri:50}},InputDescriptor:{},InputFilter:{},InputFilterCondition:{},InputFilterOperator:{enumValues:{equals:0,notEquals:1}},InputMode:{enumValues:{none:0,textBox:10,passwordBox:20,combo:30,radioButtons:40,checkBox:50,textArea:60}},InputValidation:{}};t.TypeInfo.InputDescriptor.fields={inputMode:{enumType:t.TypeInfo.InputMode},validation:{typeInfo:t.TypeInfo.InputValidation}};t.TypeInfo.InputFilter.fields={conditions:{isArray:!0,typeInfo:t.TypeInfo.InputFilterCondition}};t.TypeInfo.InputFilterCondition.fields={operator:{enumType:t.TypeInfo.InputFilterOperator}};t.TypeInfo.InputValidation.fields={dataType:{enumType:t.TypeInfo.InputDataType}}});
define("TFS/DistributedTask/Contracts",["require","exports","VSS/Common/Contracts/FormInput"],function(n,t,i){"use strict";var r,u,f,e,o,s,h,c,l,a,v,y;(function(n){n[n.Error=1]="Error";n[n.Warning=2]="Warning"})(t.IssueType||(t.IssueType={}));r=t.IssueType,function(n){n[n.None=0]="None";n[n.Manage=2]="Manage";n[n.Use=16]="Use"}(t.MachineGroupActionFilter||(t.MachineGroupActionFilter={}));u=t.MachineGroupActionFilter,function(n){n[n.Variable=1]="Variable";n[n.Regex=2]="Regex"}(t.MaskType||(t.MaskType={}));f=t.MaskType,function(n){n[n.None=0]="None";n[n.Manage=2]="Manage";n[n.Use=16]="Use"}(t.TaskAgentPoolActionFilter||(t.TaskAgentPoolActionFilter={}));e=t.TaskAgentPoolActionFilter,function(n){n[n.Automation=1]="Automation";n[n.Deployment=2]="Deployment"}(t.TaskAgentPoolType||(t.TaskAgentPoolType={}));o=t.TaskAgentPoolType,function(n){n[n.None=0]="None";n[n.Manage=2]="Manage";n[n.Use=16]="Use"}(t.TaskAgentQueueActionFilter||(t.TaskAgentQueueActionFilter={}));s=t.TaskAgentQueueActionFilter,function(n){n[n.Offline=1]="Offline";n[n.Online=2]="Online"}(t.TaskAgentStatus||(t.TaskAgentStatus={}));h=t.TaskAgentStatus,function(n){n[n.Preinstalled=1]="Preinstalled";n[n.ReceivedInstallOrUpdate=2]="ReceivedInstallOrUpdate";n[n.Installed=3]="Installed";n[n.ReceivedUninstall=4]="ReceivedUninstall";n[n.Uninstalled=5]="Uninstalled";n[n.RequestedUpdate=6]="RequestedUpdate";n[n.Updated=7]="Updated";n[n.AlreadyUpToDate=8]="AlreadyUpToDate";n[n.InlineUpdateReceived=9]="InlineUpdateReceived"}(t.TaskDefinitionStatus||(t.TaskDefinitionStatus={}));c=t.TaskDefinitionStatus,function(n){n[n.Container=0]="Container";n[n.Job=1]="Job"}(t.TaskOrchestrationItemType||(t.TaskOrchestrationItemType={}));l=t.TaskOrchestrationItemType,function(n){n[n.InProgress=1]="InProgress";n[n.Queued=2]="Queued";n[n.Completed=4]="Completed"}(t.TaskOrchestrationPlanState||(t.TaskOrchestrationPlanState={}));a=t.TaskOrchestrationPlanState,function(n){n[n.Succeeded=0]="Succeeded";n[n.SucceededWithIssues=1]="SucceededWithIssues";n[n.Failed=2]="Failed";n[n.Canceled=3]="Canceled";n[n.Skipped=4]="Skipped";n[n.Abandoned=5]="Abandoned"}(t.TaskResult||(t.TaskResult={}));v=t.TaskResult,function(n){n[n.Pending=0]="Pending";n[n.InProgress=1]="InProgress";n[n.Completed=2]="Completed"}(t.TimelineRecordState||(t.TimelineRecordState={}));y=t.TimelineRecordState;t.TypeInfo={AgentChangeEvent:{},AgentJobRequestMessage:{},AgentPoolEvent:{},AgentRequestEvent:{},DeploymentMachine:{},DeploymentMachineGroup:{},Issue:{},IssueType:{enumValues:{error:1,warning:2}},JobAssignedEvent:{},JobCompletedEvent:{},JobEnvironment:{},JobRequestMessage:{},MachineGroupActionFilter:{enumValues:{none:0,manage:2,use:16}},MaskHint:{},MaskType:{enumValues:{variable:1,regex:2}},PackageMetadata:{},PlanEnvironment:{},ServerJobRequestMessage:{},ServiceEndpointAuthenticationScheme:{},ServiceEndpointRequestResult:{},ServiceEndpointType:{},TaskAgent:{},TaskAgentJobRequest:{},TaskAgentPool:{},TaskAgentPoolActionFilter:{enumValues:{none:0,manage:2,use:16}},TaskAgentPoolType:{enumValues:{automation:1,deployment:2}},TaskAgentQueueActionFilter:{enumValues:{none:0,manage:2,use:16}},TaskAgentReference:{},TaskAgentSession:{},TaskAgentStatus:{enumValues:{offline:1,online:2}},TaskAttachment:{},TaskDefinitionStatus:{enumValues:{preinstalled:1,receivedInstallOrUpdate:2,installed:3,receivedUninstall:4,uninstalled:5,requestedUpdate:6,updated:7,alreadyUpToDate:8,inlineUpdateReceived:9}},TaskLog:{},TaskOrchestrationContainer:{},TaskOrchestrationItem:{},TaskOrchestrationItemType:{enumValues:{container:0,job:1}},TaskOrchestrationJob:{},TaskOrchestrationPlan:{},TaskOrchestrationPlanState:{enumValues:{inProgress:1,queued:2,completed:4}},TaskResult:{enumValues:{succeeded:0,succeededWithIssues:1,failed:2,canceled:3,skipped:4,abandoned:5}},Timeline:{},TimelineRecord:{},TimelineRecordState:{enumValues:{pending:0,inProgress:1,completed:2}}};t.TypeInfo.AgentChangeEvent.fields={agent:{typeInfo:t.TypeInfo.TaskAgent},timeStamp:{isDate:!0}};t.TypeInfo.AgentJobRequestMessage.fields={environment:{typeInfo:t.TypeInfo.JobEnvironment},lockedUntil:{isDate:!0}};t.TypeInfo.AgentPoolEvent.fields={pool:{typeInfo:t.TypeInfo.TaskAgentPool}};t.TypeInfo.AgentRequestEvent.fields={result:{enumType:t.TypeInfo.TaskResult},timeStamp:{isDate:!0}};t.TypeInfo.DeploymentMachine.fields={agent:{typeInfo:t.TypeInfo.TaskAgentReference}};t.TypeInfo.DeploymentMachineGroup.fields={machines:{isArray:!0,typeInfo:t.TypeInfo.DeploymentMachine}};t.TypeInfo.Issue.fields={type:{enumType:t.TypeInfo.IssueType}};t.TypeInfo.JobAssignedEvent.fields={request:{typeInfo:t.TypeInfo.TaskAgentJobRequest}};t.TypeInfo.JobCompletedEvent.fields={result:{enumType:t.TypeInfo.TaskResult}};t.TypeInfo.JobEnvironment.fields={mask:{isArray:!0,typeInfo:t.TypeInfo.MaskHint}};t.TypeInfo.JobRequestMessage.fields={environment:{typeInfo:t.TypeInfo.JobEnvironment}};t.TypeInfo.MaskHint.fields={type:{enumType:t.TypeInfo.MaskType}};t.TypeInfo.PackageMetadata.fields={createdOn:{isDate:!0}};t.TypeInfo.PlanEnvironment.fields={mask:{isArray:!0,typeInfo:t.TypeInfo.MaskHint}};t.TypeInfo.ServerJobRequestMessage.fields={environment:{typeInfo:t.TypeInfo.JobEnvironment}};t.TypeInfo.ServiceEndpointAuthenticationScheme.fields={inputDescriptors:{isArray:!0,typeInfo:i.TypeInfo.InputDescriptor}};t.TypeInfo.ServiceEndpointRequestResult.fields={};t.TypeInfo.ServiceEndpointType.fields={authenticationSchemes:{isArray:!0,typeInfo:t.TypeInfo.ServiceEndpointAuthenticationScheme},inputDescriptors:{isArray:!0,typeInfo:i.TypeInfo.InputDescriptor}};t.TypeInfo.TaskAgent.fields={assignedRequest:{typeInfo:t.TypeInfo.TaskAgentJobRequest},createdOn:{isDate:!0},status:{enumType:t.TypeInfo.TaskAgentStatus},statusChangedOn:{isDate:!0}};t.TypeInfo.TaskAgentJobRequest.fields={assignTime:{isDate:!0},finishTime:{isDate:!0},lockedUntil:{isDate:!0},matchedAgents:{isArray:!0,typeInfo:t.TypeInfo.TaskAgentReference},queueTime:{isDate:!0},receiveTime:{isDate:!0},reservedAgent:{typeInfo:t.TypeInfo.TaskAgentReference},result:{enumType:t.TypeInfo.TaskResult}};t.TypeInfo.TaskAgentPool.fields={createdOn:{isDate:!0},poolType:{enumType:t.TypeInfo.TaskAgentPoolType}};t.TypeInfo.TaskAgentReference.fields={status:{enumType:t.TypeInfo.TaskAgentStatus}};t.TypeInfo.TaskAgentSession.fields={agent:{typeInfo:t.TypeInfo.TaskAgentReference}};t.TypeInfo.TaskAttachment.fields={createdOn:{isDate:!0},lastChangedOn:{isDate:!0}};t.TypeInfo.TaskLog.fields={createdOn:{isDate:!0},lastChangedOn:{isDate:!0}};t.TypeInfo.TaskOrchestrationContainer.fields={children:{isArray:!0,typeInfo:t.TypeInfo.TaskOrchestrationItem},itemType:{enumType:t.TypeInfo.TaskOrchestrationItemType},rollback:{typeInfo:t.TypeInfo.TaskOrchestrationContainer}};t.TypeInfo.TaskOrchestrationItem.fields={itemType:{enumType:t.TypeInfo.TaskOrchestrationItemType}};t.TypeInfo.TaskOrchestrationJob.fields={itemType:{enumType:t.TypeInfo.TaskOrchestrationItemType}};t.TypeInfo.TaskOrchestrationPlan.fields={environment:{typeInfo:t.TypeInfo.PlanEnvironment},finishTime:{isDate:!0},implementation:{typeInfo:t.TypeInfo.TaskOrchestrationContainer},result:{enumType:t.TypeInfo.TaskResult},startTime:{isDate:!0},state:{enumType:t.TypeInfo.TaskOrchestrationPlanState}};t.TypeInfo.Timeline.fields={lastChangedOn:{isDate:!0},records:{isArray:!0,typeInfo:t.TypeInfo.TimelineRecord}};t.TypeInfo.TimelineRecord.fields={finishTime:{isDate:!0},issues:{isArray:!0,typeInfo:t.TypeInfo.Issue},lastModified:{isDate:!0},result:{enumType:t.TypeInfo.TaskResult},startTime:{isDate:!0},state:{enumType:t.TypeInfo.TimelineRecordState}}});
define("TFS/DistributedTask/TaskAgentRestClient",["require","exports","TFS/DistributedTask/Contracts","VSS/Service","VSS/WebApi/RestClient"],function(n,t,i,r,u){"use strict";function w(n){return window.VSS&&window.VSS.VssSDKRestVersion&&y[window.VSS.VssSDKRestVersion]?r.getClient(y[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):r.getClient(s,undefined,undefined,undefined,n)}var h=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.updateAgentUserCapabilities=function(n,t,r){return this._beginRequest({httpMethod:"PUT",area:"distributedtask",locationId:"30ba3ada-fedf-4da8-bbb5-dacf2f82e176",resource:"usercapabilities",routeTemplate:"_apis/{area}/pools/{poolId}/agents/{agentId}/{resource}",responseType:i.TypeInfo.TaskAgent,routeValues:{poolId:t,agentId:r},apiVersion:this.usercapabilitiesApiVersion,data:n})},t.prototype.deleteAgentSession=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"distributedtask",locationId:"134e239e-2df3-4794-a6f6-24f1f19ec8dc",resource:"sessions",routeTemplate:"_apis/{area}/pools/{poolId}/{resource}/{sessionId}",routeValues:{poolId:n,sessionId:t},apiVersion:this.sessionsApiVersion})},t.prototype.createAgentSession=function(n,t){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"134e239e-2df3-4794-a6f6-24f1f19ec8dc",resource:"sessions",routeTemplate:"_apis/{area}/pools/{poolId}/{resource}/{sessionId}",requestType:i.TypeInfo.TaskAgentSession,responseType:i.TypeInfo.TaskAgentSession,routeValues:{poolId:t},apiVersion:this.sessionsApiVersion,data:n})},t.prototype.getServiceEndpointTypes=function(n,t){var r={type:n,scheme:t};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"7c74af83-8605-45c1-a30b-7a05d5d7f8c1",resource:"serviceendpointtypes",routeTemplate:"_apis/{area}/{resource}",responseType:i.TypeInfo.ServiceEndpointType,responseIsCollection:!0,queryParams:r,apiVersion:this.serviceendpointtypesApiVersion})},t.prototype.getAgentQueues=function(n,t,i){var r={queueName:t,actionFilter:i};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"900fa995-c559-4923-aae7-f8424fe4fbea",resource:"queues",routeTemplate:"{project}/_apis/{area}/{resource}/{queueId}",responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:this.queuesApiVersion})},t.prototype.getAgentQueue=function(n,t,i){var r={actionFilter:i};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"900fa995-c559-4923-aae7-f8424fe4fbea",resource:"queues",routeTemplate:"{project}/_apis/{area}/{resource}/{queueId}",routeValues:{project:t,queueId:n},queryParams:r,apiVersion:this.queuesApiVersion})},t.prototype.deleteAgentQueue=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"distributedtask",locationId:"900fa995-c559-4923-aae7-f8424fe4fbea",resource:"queues",routeTemplate:"{project}/_apis/{area}/{resource}/{queueId}",routeValues:{project:t,queueId:n},apiVersion:this.queuesApiVersion})},t.prototype.createTeamProject=function(n){return this._beginRequest({httpMethod:"PUT",httpResponseType:"html",area:"distributedtask",locationId:"900fa995-c559-4923-aae7-f8424fe4fbea",resource:"queues",routeTemplate:"{project}/_apis/{area}/{resource}/{queueId}",routeValues:{project:n},apiVersion:this.queuesApiVersion})},t.prototype.addAgentQueue=function(n,t){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"900fa995-c559-4923-aae7-f8424fe4fbea",resource:"queues",routeTemplate:"{project}/_apis/{area}/{resource}/{queueId}",routeValues:{project:t},apiVersion:this.queuesApiVersion,data:n})},t.prototype.updateAgentPool=function(n,t){return this._beginRequest({httpMethod:"PATCH",area:"distributedtask",locationId:"a8c47e17-4d56-4a56-92bb-de7ea7dc65be",resource:"pools",routeTemplate:"_apis/{area}/{resource}/{poolId}",requestType:i.TypeInfo.TaskAgentPool,responseType:i.TypeInfo.TaskAgentPool,routeValues:{poolId:t},apiVersion:this.poolsApiVersion,data:n})},t.prototype.getAgentPools=function(n,t,r,u){var f={poolName:n,properties:t&&t.join(","),poolType:r,actionFilter:u};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"a8c47e17-4d56-4a56-92bb-de7ea7dc65be",resource:"pools",routeTemplate:"_apis/{area}/{resource}/{poolId}",responseType:i.TypeInfo.TaskAgentPool,responseIsCollection:!0,queryParams:f,apiVersion:this.poolsApiVersion})},t.prototype.getAgentPool=function(n,t,r){var u={properties:t&&t.join(","),actionFilter:r};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"a8c47e17-4d56-4a56-92bb-de7ea7dc65be",resource:"pools",routeTemplate:"_apis/{area}/{resource}/{poolId}",responseType:i.TypeInfo.TaskAgentPool,routeValues:{poolId:n},queryParams:u,apiVersion:this.poolsApiVersion})},t.prototype.deleteAgentPool=function(n){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"distributedtask",locationId:"a8c47e17-4d56-4a56-92bb-de7ea7dc65be",resource:"pools",routeTemplate:"_apis/{area}/{resource}/{poolId}",routeValues:{poolId:n},apiVersion:this.poolsApiVersion})},t.prototype.addAgentPool=function(n){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"a8c47e17-4d56-4a56-92bb-de7ea7dc65be",resource:"pools",routeTemplate:"_apis/{area}/{resource}/{poolId}",requestType:i.TypeInfo.TaskAgentPool,responseType:i.TypeInfo.TaskAgentPool,apiVersion:this.poolsApiVersion,data:n})},t.prototype.sendMessage=function(n,t,i){var r={requestId:i};return this._beginRequest({httpMethod:"POST",httpResponseType:"html",area:"distributedtask",locationId:"c3a054f6-7a8a-49c0-944e-3a8e5d7adfd7",resource:"messages",routeTemplate:"_apis/{area}/pools/{poolId}/{resource}/{messageId}",routeValues:{poolId:t},queryParams:r,apiVersion:this.messagesApiVersion,data:n})},t.prototype.refreshAgents=function(n){return this._beginRequest({httpMethod:"POST",httpResponseType:"html",area:"distributedtask",locationId:"c3a054f6-7a8a-49c0-944e-3a8e5d7adfd7",resource:"messages",routeTemplate:"_apis/{area}/pools/{poolId}/{resource}/{messageId}",routeValues:{poolId:n},apiVersion:this.messagesApiVersion})},t.prototype.refreshAgent=function(n,t){var i={agentId:t};return this._beginRequest({httpMethod:"POST",httpResponseType:"html",area:"distributedtask",locationId:"c3a054f6-7a8a-49c0-944e-3a8e5d7adfd7",resource:"messages",routeTemplate:"_apis/{area}/pools/{poolId}/{resource}/{messageId}",routeValues:{poolId:n},queryParams:i,apiVersion:this.messagesApiVersion})},t.prototype.getMessage=function(n,t,i){var r={sessionId:t,lastMessageId:i};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"c3a054f6-7a8a-49c0-944e-3a8e5d7adfd7",resource:"messages",routeTemplate:"_apis/{area}/pools/{poolId}/{resource}/{messageId}",routeValues:{poolId:n},queryParams:r,apiVersion:this.messagesApiVersion})},t.prototype.deleteMessage=function(n,t,i){var r={sessionId:i};return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"distributedtask",locationId:"c3a054f6-7a8a-49c0-944e-3a8e5d7adfd7",resource:"messages",routeTemplate:"_apis/{area}/pools/{poolId}/{resource}/{messageId}",routeValues:{poolId:n,messageId:t},queryParams:r,apiVersion:this.messagesApiVersion})},t.prototype.updateAgentRequest=function(n,t,r,u){var f={lockToken:u};return this._beginRequest({httpMethod:"PATCH",area:"distributedtask",locationId:"fc825784-c92a-4299-9221-998a02d1b54f",resource:"jobrequests",routeTemplate:"_apis/{area}/pools/{poolId}/{resource}/{requestId}",requestType:i.TypeInfo.TaskAgentJobRequest,responseType:i.TypeInfo.TaskAgentJobRequest,routeValues:{poolId:t,requestId:r},queryParams:f,apiVersion:this.jobrequestsApiVersion,data:n})},t.prototype.queueAgentRequest=function(n,t){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"fc825784-c92a-4299-9221-998a02d1b54f",resource:"jobrequests",routeTemplate:"_apis/{area}/pools/{poolId}/{resource}/{requestId}",requestType:i.TypeInfo.TaskAgentJobRequest,responseType:i.TypeInfo.TaskAgentJobRequest,routeValues:{poolId:t},apiVersion:this.jobrequestsApiVersion,data:n})},t.prototype.getAgentRequestsForPlan=function(n,t,r){var u={planId:t,jobId:r};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"fc825784-c92a-4299-9221-998a02d1b54f",resource:"jobrequests",routeTemplate:"_apis/{area}/pools/{poolId}/{resource}/{requestId}",responseType:i.TypeInfo.TaskAgentJobRequest,responseIsCollection:!0,routeValues:{poolId:n},queryParams:u,apiVersion:this.jobrequestsApiVersion})},t.prototype.getAgentRequestsForAgents=function(n,t,r){var u={agentIds:t&&t.join(","),completedRequestCount:r};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"fc825784-c92a-4299-9221-998a02d1b54f",resource:"jobrequests",routeTemplate:"_apis/{area}/pools/{poolId}/{resource}/{requestId}",responseType:i.TypeInfo.TaskAgentJobRequest,responseIsCollection:!0,routeValues:{poolId:n},queryParams:u,apiVersion:this.jobrequestsApiVersion})},t.prototype.getAgentRequestsForAgent=function(n,t,r){var u={agentId:t,completedRequestCount:r};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"fc825784-c92a-4299-9221-998a02d1b54f",resource:"jobrequests",routeTemplate:"_apis/{area}/pools/{poolId}/{resource}/{requestId}",responseType:i.TypeInfo.TaskAgentJobRequest,responseIsCollection:!0,routeValues:{poolId:n},queryParams:u,apiVersion:this.jobrequestsApiVersion})},t.prototype.getAgentRequest=function(n,t){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"fc825784-c92a-4299-9221-998a02d1b54f",resource:"jobrequests",routeTemplate:"_apis/{area}/pools/{poolId}/{resource}/{requestId}",responseType:i.TypeInfo.TaskAgentJobRequest,routeValues:{poolId:n,requestId:t},apiVersion:this.jobrequestsApiVersion})},t.prototype.deleteAgentRequest=function(n,t,i){var r={lockToken:i};return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"distributedtask",locationId:"fc825784-c92a-4299-9221-998a02d1b54f",resource:"jobrequests",routeTemplate:"_apis/{area}/pools/{poolId}/{resource}/{requestId}",routeValues:{poolId:n,requestId:t},queryParams:r,apiVersion:this.jobrequestsApiVersion})},t.prototype.queryEndpoint=function(n){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"f223b809-8c33-4b7d-b53f-07232569b5d6",resource:"endpoint",routeTemplate:"_apis/{area}/{resource}",responseIsCollection:!0,apiVersion:this.endpointApiVersion,data:n})},t.prototype.getAzureSubscriptions=function(){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"bcd6189c-0303-471f-a8e1-acb22b74d700",resource:"azurermsubscriptions",routeTemplate:"_apis/{area}/serviceendpointproxy/{resource}",apiVersion:this.azurermsubscriptionsApiVersion})},t.prototype.updateAgent=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"distributedtask",locationId:"e298ef32-5878-4cab-993c-043836571f42",resource:"agents",routeTemplate:"_apis/{area}/pools/{poolId}/{resource}/{agentId}",requestType:i.TypeInfo.TaskAgent,responseType:i.TypeInfo.TaskAgent,routeValues:{poolId:t,agentId:r},apiVersion:this.agentsApiVersion,data:n})},t.prototype.replaceAgent=function(n,t,r){return this._beginRequest({httpMethod:"PUT",area:"distributedtask",locationId:"e298ef32-5878-4cab-993c-043836571f42",resource:"agents",routeTemplate:"_apis/{area}/pools/{poolId}/{resource}/{agentId}",requestType:i.TypeInfo.TaskAgent,responseType:i.TypeInfo.TaskAgent,routeValues:{poolId:t,agentId:r},apiVersion:this.agentsApiVersion,data:n})},t.prototype.getAgents=function(n,t,r,u,f,e){var o={agentName:t,includeCapabilities:r,includeAssignedRequest:u,propertyFilters:f&&f.join(","),demands:e&&e.join(",")};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"e298ef32-5878-4cab-993c-043836571f42",resource:"agents",routeTemplate:"_apis/{area}/pools/{poolId}/{resource}/{agentId}",responseType:i.TypeInfo.TaskAgent,responseIsCollection:!0,routeValues:{poolId:n},queryParams:o,apiVersion:this.agentsApiVersion})},t.prototype.getAgent=function(n,t,r,u,f){var e={includeCapabilities:r,includeAssignedRequest:u,propertyFilters:f&&f.join(",")};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"e298ef32-5878-4cab-993c-043836571f42",resource:"agents",routeTemplate:"_apis/{area}/pools/{poolId}/{resource}/{agentId}",responseType:i.TypeInfo.TaskAgent,routeValues:{poolId:n,agentId:t},queryParams:e,apiVersion:this.agentsApiVersion})},t.prototype.deleteAgent=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"distributedtask",locationId:"e298ef32-5878-4cab-993c-043836571f42",resource:"agents",routeTemplate:"_apis/{area}/pools/{poolId}/{resource}/{agentId}",routeValues:{poolId:n,agentId:t},apiVersion:this.agentsApiVersion})},t.prototype.addAgent=function(n,t){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"e298ef32-5878-4cab-993c-043836571f42",resource:"agents",routeTemplate:"_apis/{area}/pools/{poolId}/{resource}/{agentId}",requestType:i.TypeInfo.TaskAgent,responseType:i.TypeInfo.TaskAgent,routeValues:{poolId:t},apiVersion:this.agentsApiVersion,data:n})},t}(u.VssHttpClient),f,e,o,s,c,l,a,v,p,y;t.CommonMethods2To3_1=h;f=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.getTaskDefinitions=function(n,t,i){var r={visibility:t,scopeLocal:i};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"60aac929-f0cd-4bc8-9ce4-6b30e8f1b1bd",resource:"tasks",routeTemplate:"_apis/{area}/{resource}/{taskId}/{versionString}",responseIsCollection:!0,routeValues:{taskId:n},queryParams:r,apiVersion:this.tasksApiVersion})},t.prototype.getTaskDefinition=function(n,t,i,r){var u={visibility:i,scopeLocal:r};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"60aac929-f0cd-4bc8-9ce4-6b30e8f1b1bd",resource:"tasks",routeTemplate:"_apis/{area}/{resource}/{taskId}/{versionString}",routeValues:{taskId:n,versionString:t},queryParams:u,apiVersion:this.tasksApiVersion})},t.prototype.getTaskContentZip=function(n,t,i,r){var u={visibility:i,scopeLocal:r};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"distributedtask",locationId:"60aac929-f0cd-4bc8-9ce4-6b30e8f1b1bd",resource:"tasks",routeTemplate:"_apis/{area}/{resource}/{taskId}/{versionString}",routeValues:{taskId:n,versionString:t},queryParams:u,apiVersion:this.tasksApiVersion})},t.prototype.deleteTaskDefinition=function(n){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"distributedtask",locationId:"60aac929-f0cd-4bc8-9ce4-6b30e8f1b1bd",resource:"tasks",routeTemplate:"_apis/{area}/{resource}/{taskId}/{versionString}",routeValues:{taskId:n},apiVersion:this.tasksApiVersion})},t.prototype.getAgentQueueRoles=function(n){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"b0c6d64d-c9fa-4946-b8de-77de623ee585",resource:"queueroles",routeTemplate:"_apis/{area}/{resource}/{queueId}",responseIsCollection:!0,routeValues:{queueId:n},apiVersion:this.queuerolesApiVersion})},t.prototype.getAgentPoolRoles=function(n){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"381dd2bb-35cf-4103-ae8c-3c815b25763c",resource:"poolroles",routeTemplate:"_apis/{area}/{resource}/{poolId}",responseIsCollection:!0,routeValues:{poolId:n},apiVersion:this.poolrolesApiVersion})},t}(h);t.CommonMethods2_1To3_1=f;e=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.updateTaskGroup=function(n,t){return this._beginRequest({httpMethod:"PUT",area:"distributedtask",locationId:"6c08ffbf-dbf1-4f9a-94e5-a1cbd47005e7",resource:"taskgroups",routeTemplate:"{project}/_apis/{area}/{resource}/{taskGroupId}",routeValues:{project:t},apiVersion:this.taskgroupsApiVersion,data:n})},t.prototype.getTaskGroups=function(n,t,i){var r={expanded:i};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"6c08ffbf-dbf1-4f9a-94e5-a1cbd47005e7",resource:"taskgroups",routeTemplate:"{project}/_apis/{area}/{resource}/{taskGroupId}",responseIsCollection:!0,routeValues:{project:n,taskGroupId:t},queryParams:r,apiVersion:this.taskgroupsApiVersion})},t.prototype.deleteTaskGroup=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"distributedtask",locationId:"6c08ffbf-dbf1-4f9a-94e5-a1cbd47005e7",resource:"taskgroups",routeTemplate:"{project}/_apis/{area}/{resource}/{taskGroupId}",routeValues:{project:n,taskGroupId:t},apiVersion:this.taskgroupsApiVersion})},t.prototype.addTaskGroup=function(n,t){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"6c08ffbf-dbf1-4f9a-94e5-a1cbd47005e7",resource:"taskgroups",routeTemplate:"{project}/_apis/{area}/{resource}/{taskGroupId}",routeValues:{project:t},apiVersion:this.taskgroupsApiVersion,data:n})},t.prototype.updateServiceEndpoint=function(n,t,i){return this._beginRequest({httpMethod:"PUT",area:"distributedtask",locationId:"dca61d2f-3444-410a-b5ec-db2fc4efb4c5",resource:"serviceendpoints",routeTemplate:"{project}/_apis/{area}/{resource}/{endpointId}",routeValues:{project:t,endpointId:i},apiVersion:this.serviceendpointsApiVersion,data:n})},t.prototype.getServiceEndpoints=function(n,t,i,r,u){var f={type:t,authSchemes:i&&i.join(","),endpointIds:r&&r.join(","),includeFailed:u};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"dca61d2f-3444-410a-b5ec-db2fc4efb4c5",resource:"serviceendpoints",routeTemplate:"{project}/_apis/{area}/{resource}/{endpointId}",responseIsCollection:!0,routeValues:{project:n},queryParams:f,apiVersion:this.serviceendpointsApiVersion})},t.prototype.getServiceEndpointDetails=function(n,t){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"dca61d2f-3444-410a-b5ec-db2fc4efb4c5",resource:"serviceendpoints",routeTemplate:"{project}/_apis/{area}/{resource}/{endpointId}",routeValues:{project:n,endpointId:t},apiVersion:this.serviceendpointsApiVersion})},t.prototype.deleteServiceEndpoint=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"distributedtask",locationId:"dca61d2f-3444-410a-b5ec-db2fc4efb4c5",resource:"serviceendpoints",routeTemplate:"{project}/_apis/{area}/{resource}/{endpointId}",routeValues:{project:n,endpointId:t},apiVersion:this.serviceendpointsApiVersion})},t.prototype.createServiceEndpoint=function(n,t){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"dca61d2f-3444-410a-b5ec-db2fc4efb4c5",resource:"serviceendpoints",routeTemplate:"{project}/_apis/{area}/{resource}/{endpointId}",routeValues:{project:t},apiVersion:this.serviceendpointsApiVersion,data:n})},t.prototype.queryServiceEndpoint=function(n,t){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"f956a7de-d766-43af-81b1-e9e349245634",resource:"serviceendpointproxy",routeTemplate:"{project}/_apis/{area}/{resource}",responseIsCollection:!0,routeValues:{project:t},apiVersion:this.serviceendpointproxyApiVersion,data:n})},t.prototype.executeServiceEndpointRequest=function(n,t,r){var u={endpointId:r};return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"f956a7de-d766-43af-81b1-e9e349245634",resource:"serviceendpointproxy",routeTemplate:"{project}/_apis/{area}/{resource}",responseType:i.TypeInfo.ServiceEndpointRequestResult,routeValues:{project:t},queryParams:u,apiVersion:this.serviceendpointproxyApiVersion,data:n})},t.prototype.getPackages=function(n,t,r){var u={$top:r};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"8ffcd551-079c-493a-9c02-54346299d144",resource:"packages",routeTemplate:"_apis/{area}/{resource}/{packageType}/{platform}/{version}",responseType:i.TypeInfo.PackageMetadata,responseIsCollection:!0,routeValues:{packageType:n,platform:t},queryParams:u,apiVersion:this.packagesApiVersion})},t.prototype.getPackage=function(n,t,r){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"8ffcd551-079c-493a-9c02-54346299d144",resource:"packages",routeTemplate:"_apis/{area}/{resource}/{packageType}/{platform}/{version}",responseType:i.TypeInfo.PackageMetadata,routeValues:{packageType:n,platform:t,version:r},apiVersion:this.packagesApiVersion})},t.prototype.updateDeploymentMachines=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"distributedtask",locationId:"966c3874-c347-4b18-a90c-d509116717fd",resource:"machines",routeTemplate:"{project}/_apis/{area}/machinegroups/{machineGroupId}/{resource}",requestType:i.TypeInfo.DeploymentMachine,responseType:i.TypeInfo.DeploymentMachine,responseIsCollection:!0,routeValues:{project:t,machineGroupId:r},apiVersion:this.machinesApiVersion,data:n})},t.prototype.getDeploymentMachines=function(n,t,r){var u={tagFilters:r&&r.join(",")};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"966c3874-c347-4b18-a90c-d509116717fd",resource:"machines",routeTemplate:"{project}/_apis/{area}/machinegroups/{machineGroupId}/{resource}",responseType:i.TypeInfo.DeploymentMachine,responseIsCollection:!0,routeValues:{project:n,machineGroupId:t},queryParams:u,apiVersion:this.machinesApiVersion})},t.prototype.updateDeploymentMachineGroup=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"distributedtask",locationId:"d4adf50f-80c6-4ac8-9ca1-6e4e544286e9",resource:"machinegroups",routeTemplate:"{project}/_apis/{area}/{resource}/{machineGroupId}",requestType:i.TypeInfo.DeploymentMachineGroup,responseType:i.TypeInfo.DeploymentMachineGroup,routeValues:{project:t,machineGroupId:r},apiVersion:this.machinegroupsApiVersion,data:n})},t.prototype.getDeploymentMachineGroups=function(n,t,r){var u={machineGroupName:t,actionFilter:r};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"d4adf50f-80c6-4ac8-9ca1-6e4e544286e9",resource:"machinegroups",routeTemplate:"{project}/_apis/{area}/{resource}/{machineGroupId}",responseType:i.TypeInfo.DeploymentMachineGroup,responseIsCollection:!0,routeValues:{project:n},queryParams:u,apiVersion:this.machinegroupsApiVersion})},t.prototype.getDeploymentMachineGroup=function(n,t,r){var u={actionFilter:r};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"d4adf50f-80c6-4ac8-9ca1-6e4e544286e9",resource:"machinegroups",routeTemplate:"{project}/_apis/{area}/{resource}/{machineGroupId}",responseType:i.TypeInfo.DeploymentMachineGroup,routeValues:{project:n,machineGroupId:t},queryParams:u,apiVersion:this.machinegroupsApiVersion})},t.prototype.deleteDeploymentMachineGroup=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"distributedtask",locationId:"d4adf50f-80c6-4ac8-9ca1-6e4e544286e9",resource:"machinegroups",routeTemplate:"{project}/_apis/{area}/{resource}/{machineGroupId}",routeValues:{project:n,machineGroupId:t},apiVersion:this.machinegroupsApiVersion})},t.prototype.addDeploymentMachineGroup=function(n,t){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"d4adf50f-80c6-4ac8-9ca1-6e4e544286e9",resource:"machinegroups",routeTemplate:"{project}/_apis/{area}/{resource}/{machineGroupId}",requestType:i.TypeInfo.DeploymentMachineGroup,responseType:i.TypeInfo.DeploymentMachineGroup,routeValues:{project:t},apiVersion:this.machinegroupsApiVersion,data:n})},t.prototype.updateTaskHubLicenseDetails=function(n,t){return this._beginRequest({httpMethod:"PUT",area:"distributedtask",locationId:"f9f0f436-b8a1-4475-9041-1ccdbf8f0128",resource:"hublicense",routeTemplate:"_apis/{area}/{resource}/{hubName}",routeValues:{hubName:t},apiVersion:this.hublicenseApiVersion,data:n})},t.prototype.getTaskHubLicenseDetails=function(n,t){var i={includeEnterpriseUsersCount:t};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"f9f0f436-b8a1-4475-9041-1ccdbf8f0128",resource:"hublicense",routeTemplate:"_apis/{area}/{resource}/{hubName}",routeValues:{hubName:n},queryParams:i,apiVersion:this.hublicenseApiVersion})},t}(f);t.CommonMethods3To3_1=e;o=function(n){function t(t,i){n.call(this,t,i);this.agentsApiVersion=this.azurermsubscriptionsApiVersion=this.endpointApiVersion=this.hublicenseApiVersion=this.jobrequestsApiVersion=this.machinegroupsApiVersion=this.machinesApiVersion=this.messagesApiVersion=this.poolrolesApiVersion=this.poolsApiVersion=this.queuerolesApiVersion=this.queuesApiVersion=this.serviceendpointtypesApiVersion=this.sessionsApiVersion=this.taskgroupsApiVersion=this.tasksApiVersion=this.usercapabilitiesApiVersion="3.1-preview.1";this.packagesApiVersion=this.serviceendpointproxyApiVersion=this.serviceendpointsApiVersion="3.1-preview.2"}return __extends(t,n),t}(e);t.TaskAgentHttpClient3_1=o;s=function(n){function t(t,i){n.call(this,t,i);this.agentsApiVersion=this.endpointApiVersion=this.jobrequestsApiVersion=this.messagesApiVersion=this.packagesApiVersion=this.poolsApiVersion=this.sessionsApiVersion=this.tasksApiVersion=this.usercapabilitiesApiVersion="3.0";this.azurermsubscriptionsApiVersion=this.hublicenseApiVersion=this.machinegroupsApiVersion=this.machinesApiVersion=this.poolrolesApiVersion=this.queuerolesApiVersion=this.queuesApiVersion=this.serviceendpointtypesApiVersion=this.taskgroupsApiVersion="3.0-preview.1";this.serviceendpointproxyApiVersion=this.serviceendpointsApiVersion="3.0-preview.2"}return __extends(t,n),t.prototype.addMetaTaskDefinition=function(n,t){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"71aa53a2-0ce0-46f2-856b-8cbc1cdffa4e",resource:"metatask",routeTemplate:"{project}/_apis/{area}/{resource}/{metaTaskDefinitionId}",routeValues:{project:t},apiVersion:"3.0-preview.1",data:n})},t.prototype.deleteMetaTaskDefinition=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"distributedtask",locationId:"71aa53a2-0ce0-46f2-856b-8cbc1cdffa4e",resource:"metatask",routeTemplate:"{project}/_apis/{area}/{resource}/{metaTaskDefinitionId}",routeValues:{project:n,metaTaskDefinitionId:t},apiVersion:"3.0-preview.1"})},t.prototype.getMetaTaskDefinitions=function(n,t,i){var r={expanded:i};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"71aa53a2-0ce0-46f2-856b-8cbc1cdffa4e",resource:"metatask",routeTemplate:"{project}/_apis/{area}/{resource}/{metaTaskDefinitionId}",responseIsCollection:!0,routeValues:{project:n,metaTaskDefinitionId:t},queryParams:r,apiVersion:"3.0-preview.1"})},t.prototype.updateMetaTaskDefinition=function(n,t){return this._beginRequest({httpMethod:"PUT",area:"distributedtask",locationId:"71aa53a2-0ce0-46f2-856b-8cbc1cdffa4e",resource:"metatask",routeTemplate:"{project}/_apis/{area}/{resource}/{metaTaskDefinitionId}",routeValues:{project:t},apiVersion:"3.0-preview.1",data:n})},t}(e);t.TaskAgentHttpClient3=s;c=function(n){function t(t,i){n.call(this,t,i);this.agentsApiVersion=this.endpointApiVersion=this.jobrequestsApiVersion=this.messagesApiVersion=this.poolsApiVersion=this.sessionsApiVersion=this.tasksApiVersion=this.usercapabilitiesApiVersion="2.3";this.azurermsubscriptionsApiVersion=this.poolrolesApiVersion=this.queuerolesApiVersion=this.queuesApiVersion=this.serviceendpointtypesApiVersion="2.3-preview.1"}return __extends(t,n),t.prototype.addMetaTaskDefinition=function(n,t){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"71aa53a2-0ce0-46f2-856b-8cbc1cdffa4e",resource:"metatask",routeTemplate:"{project}/_apis/{area}/{resource}/{metaTaskDefinitionId}",routeValues:{project:t},apiVersion:"2.3-preview.1",data:n})},t.prototype.deleteMetaTaskDefinition=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"distributedtask",locationId:"71aa53a2-0ce0-46f2-856b-8cbc1cdffa4e",resource:"metatask",routeTemplate:"{project}/_apis/{area}/{resource}/{metaTaskDefinitionId}",routeValues:{project:n,metaTaskDefinitionId:t},apiVersion:"2.3-preview.1"})},t.prototype.getMetaTaskDefinitions=function(n,t,i){var r={expanded:i};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"71aa53a2-0ce0-46f2-856b-8cbc1cdffa4e",resource:"metatask",routeTemplate:"{project}/_apis/{area}/{resource}/{metaTaskDefinitionId}",responseIsCollection:!0,routeValues:{project:n,metaTaskDefinitionId:t},queryParams:r,apiVersion:"2.3-preview.1"})},t.prototype.updateMetaTaskDefinition=function(n,t){return this._beginRequest({httpMethod:"PUT",area:"distributedtask",locationId:"71aa53a2-0ce0-46f2-856b-8cbc1cdffa4e",resource:"metatask",routeTemplate:"{project}/_apis/{area}/{resource}/{metaTaskDefinitionId}",routeValues:{project:t},apiVersion:"2.3-preview.1",data:n})},t.prototype.getPackage=function(n){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"8ffcd551-079c-493a-9c02-54346299d144",resource:"packages",routeTemplate:"_apis/{area}/{resource}/{packageType}/{platform}/{version}",routeValues:{packageType:n},apiVersion:"2.3"})},t.prototype.getPackages=function(){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"8ffcd551-079c-493a-9c02-54346299d144",resource:"packages",routeTemplate:"_apis/{area}/{resource}/{packageType}/{platform}/{version}",responseIsCollection:!0,apiVersion:"2.3"})},t.prototype.getPackageZip=function(n){return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"distributedtask",locationId:"8ffcd551-079c-493a-9c02-54346299d144",resource:"packages",routeTemplate:"_apis/{area}/{resource}/{packageType}/{platform}/{version}",routeValues:{packageType:n},apiVersion:"2.3"})},t.prototype.executeServiceEndpointRequest=function(n,t,r){var u={endpointId:r};return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"e3a44534-7b94-4add-a053-8af449589c62",resource:"serviceendpointproxy",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}",responseType:i.TypeInfo.ServiceEndpointRequestResult,routeValues:{scopeIdentifier:t},queryParams:u,apiVersion:"2.3-preview.1",data:n})},t.prototype.queryServiceEndpoint=function(n,t){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"e3a44534-7b94-4add-a053-8af449589c62",resource:"serviceendpointproxy",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}",responseIsCollection:!0,routeValues:{scopeIdentifier:t},apiVersion:"2.3-preview.1",data:n})},t.prototype.createServiceEndpoint=function(n,t){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"ca373c13-fec3-4b30-9525-35a117731384",resource:"serviceendpoints",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}/{endpointId}",routeValues:{scopeIdentifier:t},apiVersion:"2.3-preview.1",data:n})},t.prototype.deleteServiceEndpoint=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"distributedtask",locationId:"ca373c13-fec3-4b30-9525-35a117731384",resource:"serviceendpoints",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}/{endpointId}",routeValues:{scopeIdentifier:n,endpointId:t},apiVersion:"2.3-preview.1"})},t.prototype.getServiceEndpointDetails=function(n,t){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"ca373c13-fec3-4b30-9525-35a117731384",resource:"serviceendpoints",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}/{endpointId}",routeValues:{scopeIdentifier:n,endpointId:t},apiVersion:"2.3-preview.1"})},t.prototype.getServiceEndpoints=function(n,t,i,r,u){var f={type:t,authSchemes:i&&i.join(","),endpointIds:r&&r.join(","),includeFailed:u};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"ca373c13-fec3-4b30-9525-35a117731384",resource:"serviceendpoints",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}/{endpointId}",responseIsCollection:!0,routeValues:{scopeIdentifier:n},queryParams:f,apiVersion:"2.3-preview.1"})},t.prototype.updateServiceEndpoint=function(n,t,i){return this._beginRequest({httpMethod:"PUT",area:"distributedtask",locationId:"ca373c13-fec3-4b30-9525-35a117731384",resource:"serviceendpoints",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}/{endpointId}",routeValues:{scopeIdentifier:t,endpointId:i},apiVersion:"2.3-preview.1",data:n})},t}(f);t.TaskAgentHttpClient2_3=c;l=function(n){function t(t,i){n.call(this,t,i);this.agentsApiVersion=this.endpointApiVersion=this.jobrequestsApiVersion=this.messagesApiVersion=this.poolsApiVersion=this.sessionsApiVersion=this.tasksApiVersion=this.usercapabilitiesApiVersion="2.2";this.azurermsubscriptionsApiVersion=this.poolrolesApiVersion=this.queuerolesApiVersion=this.queuesApiVersion=this.serviceendpointtypesApiVersion="2.2-preview.1"}return __extends(t,n),t.prototype.addMetaTaskDefinition=function(n,t){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"71aa53a2-0ce0-46f2-856b-8cbc1cdffa4e",resource:"metatask",routeTemplate:"{project}/_apis/{area}/{resource}/{metaTaskDefinitionId}",routeValues:{project:t},apiVersion:"2.2-preview.1",data:n})},t.prototype.deleteMetaTaskDefinition=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"distributedtask",locationId:"71aa53a2-0ce0-46f2-856b-8cbc1cdffa4e",resource:"metatask",routeTemplate:"{project}/_apis/{area}/{resource}/{metaTaskDefinitionId}",routeValues:{project:n,metaTaskDefinitionId:t},apiVersion:"2.2-preview.1"})},t.prototype.getMetaTaskDefinitions=function(n,t,i){var r={expanded:i};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"71aa53a2-0ce0-46f2-856b-8cbc1cdffa4e",resource:"metatask",routeTemplate:"{project}/_apis/{area}/{resource}/{metaTaskDefinitionId}",responseIsCollection:!0,routeValues:{project:n,metaTaskDefinitionId:t},queryParams:r,apiVersion:"2.2-preview.1"})},t.prototype.updateMetaTaskDefinition=function(n,t){return this._beginRequest({httpMethod:"PUT",area:"distributedtask",locationId:"71aa53a2-0ce0-46f2-856b-8cbc1cdffa4e",resource:"metatask",routeTemplate:"{project}/_apis/{area}/{resource}/{metaTaskDefinitionId}",routeValues:{project:t},apiVersion:"2.2-preview.1",data:n})},t.prototype.getPackage=function(n){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"8ffcd551-079c-493a-9c02-54346299d144",resource:"packages",routeTemplate:"_apis/{area}/{resource}/{packageType}/{platform}/{version}",routeValues:{packageType:n},apiVersion:"2.2"})},t.prototype.getPackages=function(){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"8ffcd551-079c-493a-9c02-54346299d144",resource:"packages",routeTemplate:"_apis/{area}/{resource}/{packageType}/{platform}/{version}",responseIsCollection:!0,apiVersion:"2.2"})},t.prototype.getPackageZip=function(n){return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"distributedtask",locationId:"8ffcd551-079c-493a-9c02-54346299d144",resource:"packages",routeTemplate:"_apis/{area}/{resource}/{packageType}/{platform}/{version}",routeValues:{packageType:n},apiVersion:"2.2"})},t.prototype.executeServiceEndpointRequest=function(n,t,r){var u={endpointId:r};return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"e3a44534-7b94-4add-a053-8af449589c62",resource:"serviceendpointproxy",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}",responseType:i.TypeInfo.ServiceEndpointRequestResult,routeValues:{scopeIdentifier:t},queryParams:u,apiVersion:"2.2-preview.1",data:n})},t.prototype.queryServiceEndpoint=function(n,t){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"e3a44534-7b94-4add-a053-8af449589c62",resource:"serviceendpointproxy",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}",responseIsCollection:!0,routeValues:{scopeIdentifier:t},apiVersion:"2.2-preview.1",data:n})},t.prototype.createServiceEndpoint=function(n,t){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"ca373c13-fec3-4b30-9525-35a117731384",resource:"serviceendpoints",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}/{endpointId}",routeValues:{scopeIdentifier:t},apiVersion:"2.2-preview.1",data:n})},t.prototype.deleteServiceEndpoint=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"distributedtask",locationId:"ca373c13-fec3-4b30-9525-35a117731384",resource:"serviceendpoints",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}/{endpointId}",routeValues:{scopeIdentifier:n,endpointId:t},apiVersion:"2.2-preview.1"})},t.prototype.getServiceEndpointDetails=function(n,t){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"ca373c13-fec3-4b30-9525-35a117731384",resource:"serviceendpoints",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}/{endpointId}",routeValues:{scopeIdentifier:n,endpointId:t},apiVersion:"2.2-preview.1"})},t.prototype.getServiceEndpoints=function(n,t,i,r,u){var f={type:t,authSchemes:i&&i.join(","),endpointIds:r&&r.join(","),includeFailed:u};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"ca373c13-fec3-4b30-9525-35a117731384",resource:"serviceendpoints",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}/{endpointId}",responseIsCollection:!0,routeValues:{scopeIdentifier:n},queryParams:f,apiVersion:"2.2-preview.1"})},t.prototype.updateServiceEndpoint=function(n,t,i){return this._beginRequest({httpMethod:"PUT",area:"distributedtask",locationId:"ca373c13-fec3-4b30-9525-35a117731384",resource:"serviceendpoints",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}/{endpointId}",routeValues:{scopeIdentifier:t,endpointId:i},apiVersion:"2.2-preview.1",data:n})},t}(f);t.TaskAgentHttpClient2_2=l;a=function(n){function t(t,i){n.call(this,t,i);this.agentsApiVersion=this.endpointApiVersion=this.jobrequestsApiVersion=this.messagesApiVersion=this.poolsApiVersion=this.sessionsApiVersion=this.tasksApiVersion=this.usercapabilitiesApiVersion="2.1";this.azurermsubscriptionsApiVersion=this.poolrolesApiVersion=this.queuerolesApiVersion=this.queuesApiVersion=this.serviceendpointtypesApiVersion="2.1-preview.1"}return __extends(t,n),t.prototype.addMetaTaskDefinition=function(n,t){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"71aa53a2-0ce0-46f2-856b-8cbc1cdffa4e",resource:"metatask",routeTemplate:"{project}/_apis/{area}/{resource}/{metaTaskDefinitionId}",routeValues:{project:t},apiVersion:"2.1-preview.1",data:n})},t.prototype.deleteMetaTaskDefinition=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"distributedtask",locationId:"71aa53a2-0ce0-46f2-856b-8cbc1cdffa4e",resource:"metatask",routeTemplate:"{project}/_apis/{area}/{resource}/{metaTaskDefinitionId}",routeValues:{project:n,metaTaskDefinitionId:t},apiVersion:"2.1-preview.1"})},t.prototype.getMetaTaskDefinitions=function(n,t,i){var r={expanded:i};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"71aa53a2-0ce0-46f2-856b-8cbc1cdffa4e",resource:"metatask",routeTemplate:"{project}/_apis/{area}/{resource}/{metaTaskDefinitionId}",responseIsCollection:!0,routeValues:{project:n,metaTaskDefinitionId:t},queryParams:r,apiVersion:"2.1-preview.1"})},t.prototype.updateMetaTaskDefinition=function(n,t){return this._beginRequest({httpMethod:"PUT",area:"distributedtask",locationId:"71aa53a2-0ce0-46f2-856b-8cbc1cdffa4e",resource:"metatask",routeTemplate:"{project}/_apis/{area}/{resource}/{metaTaskDefinitionId}",routeValues:{project:t},apiVersion:"2.1-preview.1",data:n})},t.prototype.getPackage=function(n){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"8ffcd551-079c-493a-9c02-54346299d144",resource:"packages",routeTemplate:"_apis/{area}/{resource}/{packageType}/{platform}/{version}",routeValues:{packageType:n},apiVersion:"2.1"})},t.prototype.getPackages=function(){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"8ffcd551-079c-493a-9c02-54346299d144",resource:"packages",routeTemplate:"_apis/{area}/{resource}/{packageType}/{platform}/{version}",responseIsCollection:!0,apiVersion:"2.1"})},t.prototype.getPackageZip=function(n){return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"distributedtask",locationId:"8ffcd551-079c-493a-9c02-54346299d144",resource:"packages",routeTemplate:"_apis/{area}/{resource}/{packageType}/{platform}/{version}",routeValues:{packageType:n},apiVersion:"2.1"})},t.prototype.executeServiceEndpointRequest=function(n,t,r){var u={endpointId:r};return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"e3a44534-7b94-4add-a053-8af449589c62",resource:"serviceendpointproxy",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}",responseType:i.TypeInfo.ServiceEndpointRequestResult,routeValues:{scopeIdentifier:t},queryParams:u,apiVersion:"2.1-preview.1",data:n})},t.prototype.queryServiceEndpoint=function(n,t){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"e3a44534-7b94-4add-a053-8af449589c62",resource:"serviceendpointproxy",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}",responseIsCollection:!0,routeValues:{scopeIdentifier:t},apiVersion:"2.1-preview.1",data:n})},t.prototype.createServiceEndpoint=function(n,t){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"ca373c13-fec3-4b30-9525-35a117731384",resource:"serviceendpoints",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}/{endpointId}",routeValues:{scopeIdentifier:t},apiVersion:"2.1-preview.1",data:n})},t.prototype.deleteServiceEndpoint=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"distributedtask",locationId:"ca373c13-fec3-4b30-9525-35a117731384",resource:"serviceendpoints",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}/{endpointId}",routeValues:{scopeIdentifier:n,endpointId:t},apiVersion:"2.1-preview.1"})},t.prototype.getServiceEndpointDetails=function(n,t){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"ca373c13-fec3-4b30-9525-35a117731384",resource:"serviceendpoints",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}/{endpointId}",routeValues:{scopeIdentifier:n,endpointId:t},apiVersion:"2.1-preview.1"})},t.prototype.getServiceEndpoints=function(n,t,i,r,u){var f={type:t,authSchemes:i&&i.join(","),endpointIds:r&&r.join(","),includeFailed:u};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"ca373c13-fec3-4b30-9525-35a117731384",resource:"serviceendpoints",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}/{endpointId}",responseIsCollection:!0,routeValues:{scopeIdentifier:n},queryParams:f,apiVersion:"2.1-preview.1"})},t.prototype.updateServiceEndpoint=function(n,t,i){return this._beginRequest({httpMethod:"PUT",area:"distributedtask",locationId:"ca373c13-fec3-4b30-9525-35a117731384",resource:"serviceendpoints",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}/{endpointId}",routeValues:{scopeIdentifier:t,endpointId:i},apiVersion:"2.1-preview.1",data:n})},t}(f);t.TaskAgentHttpClient2_1=a;v=function(n){function t(t,i){n.call(this,t,i);this.agentsApiVersion=this.endpointApiVersion=this.jobrequestsApiVersion=this.messagesApiVersion=this.poolsApiVersion=this.sessionsApiVersion=this.usercapabilitiesApiVersion="2.0";this.azurermsubscriptionsApiVersion=this.queuesApiVersion=this.serviceendpointtypesApiVersion="2.0-preview.1"}return __extends(t,n),t.prototype.getPackage=function(n){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"8ffcd551-079c-493a-9c02-54346299d144",resource:"packages",routeTemplate:"_apis/{area}/{resource}/{packageType}/{platform}/{version}",routeValues:{packageType:n},apiVersion:"2.0"})},t.prototype.getPackages=function(){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"8ffcd551-079c-493a-9c02-54346299d144",resource:"packages",routeTemplate:"_apis/{area}/{resource}/{packageType}/{platform}/{version}",responseIsCollection:!0,apiVersion:"2.0"})},t.prototype.getPackageZip=function(n){return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"distributedtask",locationId:"8ffcd551-079c-493a-9c02-54346299d144",resource:"packages",routeTemplate:"_apis/{area}/{resource}/{packageType}/{platform}/{version}",routeValues:{packageType:n},apiVersion:"2.0"})},t.prototype.executeServiceEndpointRequest=function(n,t,r){var u={endpointId:r};return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"e3a44534-7b94-4add-a053-8af449589c62",resource:"serviceendpointproxy",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}",responseType:i.TypeInfo.ServiceEndpointRequestResult,routeValues:{scopeIdentifier:t},queryParams:u,apiVersion:"2.0-preview.1",data:n})},t.prototype.queryServiceEndpoint=function(n,t){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"e3a44534-7b94-4add-a053-8af449589c62",resource:"serviceendpointproxy",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}",responseIsCollection:!0,routeValues:{scopeIdentifier:t},apiVersion:"2.0-preview.1",data:n})},t.prototype.createServiceEndpoint=function(n,t){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"ca373c13-fec3-4b30-9525-35a117731384",resource:"serviceendpoints",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}/{endpointId}",routeValues:{scopeIdentifier:t},apiVersion:"2.0-preview.1",data:n})},t.prototype.deleteServiceEndpoint=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"distributedtask",locationId:"ca373c13-fec3-4b30-9525-35a117731384",resource:"serviceendpoints",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}/{endpointId}",routeValues:{scopeIdentifier:n,endpointId:t},apiVersion:"2.0-preview.1"})},t.prototype.getServiceEndpointDetails=function(n,t){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"ca373c13-fec3-4b30-9525-35a117731384",resource:"serviceendpoints",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}/{endpointId}",routeValues:{scopeIdentifier:n,endpointId:t},apiVersion:"2.0-preview.1"})},t.prototype.getServiceEndpoints=function(n,t,i,r,u){var f={type:t,authSchemes:i&&i.join(","),endpointIds:r&&r.join(","),includeFailed:u};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"ca373c13-fec3-4b30-9525-35a117731384",resource:"serviceendpoints",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}/{endpointId}",responseIsCollection:!0,routeValues:{scopeIdentifier:n},queryParams:f,apiVersion:"2.0-preview.1"})},t.prototype.updateServiceEndpoint=function(n,t,i){return this._beginRequest({httpMethod:"PUT",area:"distributedtask",locationId:"ca373c13-fec3-4b30-9525-35a117731384",resource:"serviceendpoints",routeTemplate:"{scopeIdentifier}/_apis/{area}/{resource}/{endpointId}",routeValues:{scopeIdentifier:t,endpointId:i},apiVersion:"2.0-preview.1",data:n})},t}(h);t.TaskAgentHttpClient2=v;p=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t}(o);t.TaskAgentHttpClient=p;y={"3.1":o,"3.0":s,"2.3":c,"2.2":l,"2.1":a,"2.0":v};t.getClient=w});
define("Admin/Scripts/TFS.Admin.ServiceEndpoints",["require","exports","VSS/VSS","VSS/Service","TFS/DistributedTask/TaskAgentRestClient","Presentation/Scripts/TFS/TFS.Host.TfsContext"],function(n,t,i,r,u,f){var e=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeConnection=function(t){n.prototype.initializeConnection.call(this,t);this._httpClient||(this._httpClient=t.getHttpClient(u.TaskAgentHttpClient));this._projectId=f.TfsContext.getDefault().navigation.projectId},t.prototype.beginGetServiceEndPoints=function(n,t){return this._httpClient.getServiceEndpoints(this._projectId,n,null,null,t)},t.prototype.beginGetServiceEndPoint=function(n){return this._httpClient.getServiceEndpointDetails(this._projectId,n)},t.prototype.beginDisconnect=function(n){return this._httpClient.deleteServiceEndpoint(this._projectId,n)},t.prototype.beginCreateServiceEndpoint=function(n){return this._httpClient.createServiceEndpoint(n,this._projectId)},t.prototype.beginUpdateServiceEndpoint=function(n){return this._httpClient.updateServiceEndpoint(n,this._projectId,n.id)},t.prototype.beginGetServiceEndpointTypes=function(n,t){return this._httpClient.getServiceEndpointTypes(n,t)},t.prototype.beginGetAzureSubscriptions=function(){return this._httpClient.getAzureSubscriptions()},t.prototype.beginExecuteServiceEndpointRequest=function(n,t){return this._httpClient.executeServiceEndpointRequest(n,this._projectId,t)},t}(r.VssService);t.ServiceEndPointService=e;i.tfsModuleLoaded("TFS.Admin.ServiceEndpoints",t)});
define("Presentation/Scripts/TFS/Generated/TFS.WebApi.Constants",["require","exports"],function(n,t){var i,r,u;(function(n){n.ProjectCollectionsLocationId="8031090f-ef1d-4af6-85fc-698cd75d42bf";n.ProjectsLocationId="603fe2ac-9723-48b9-88ad-09305aa6c6e1";n.ProcessLocationId="93878975-88c5-4e6a-8abb-7ddd77a8a7d8";n.ProjectHistoryLocationId="6488a877-4749-4954-82ea-7340d36be9f2";n.TeamsLocationId="d30a3dd1-f8ba-442a-b86a-bd0c0c383e59";n.TeamMembersLocationId="294c494c-2600-4d7e-b76c-3dd50c3c95be";n.ConnectedServicesId="b4f70219-e18b-42c5-abe3-98b07d35525e";n.ProxyId="ec1f4311-f2b4-4c15-b2b8-8990b80d2908";n.AreaId="79134C72-4A58-4B42-976C-04E7115F32BF";n.AreaName="core";n.ProcessAreaName="process";n.ApiString="_apis";n.ProcessResource="processes";n.ProjectsResource="projects";n.ProjectHistoryResource="projectHistory";n.ProjectCollectionsResource="projectCollections";n.TeamsResource="teams";n.TeamMembersResource="members";n.ConnectedServicesResource="connectedServices";n.ProxyResource="proxies";n.ProjectCollectionsRouteName="ProjectCollections";n.ProjectsRouteName="Projects";n.ProjectHistoryRouteName="ProjectHistory";n.ProcessesRouteName="Processes";n.TeamsRouteName="Teams";n.TeamMembersRouteName="TeamMembers";n.ConnectedServicesRouteName="ConnectedServices";n.ProxyRouteName="Proxies"})(i=t.CoreConstants||(t.CoreConstants={})),function(n){n[n.Deleting=2]="Deleting";n[n.New=0]="New";n[n.WellFormed=1]="WellFormed";n[n.CreatePending=3]="CreatePending";n[n.All=-1]="All";n[n.Unchanged=-2]="Unchanged";n[n.Deleted=4]="Deleted"}(t.ProjectState||(t.ProjectState={}));r=t.ProjectState,function(n){n.VersionControlCapabilityName="versioncontrol";n.VersionControlCapabilityAttributeName="sourceControlType";n.VersionControlGitEnabledAttributeName="gitEnabled";n.VersionControlTfvcEnabledAttributeName="tfvcEnabled";n.ProcessTemplateCapabilityName="processTemplate";n.ProcessTemplateCapabilityTemplateNameAttributeName="templateName";n.ProcessTemplateCapabilityTemplateTypeIdAttributeName="templateTypeId"}(u=t.TeamProjectCapabilitiesConstants||(t.TeamProjectCapabilitiesConstants={}))});
define("Presentation/Scripts/TFS/TFS.Project.WebApi",["require","exports","VSS/WebApi/RestClient","Presentation/Scripts/TFS/Generated/TFS.WebApi.Constants"],function(n,t,i,r){var u=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.beginGetProjects=function(){return this._beginRequest({area:r.CoreConstants.AreaName,locationId:r.CoreConstants.ProjectsLocationId,responseIsCollection:!0})},t.prototype.beginGetProject=function(n){return this._beginRequest({area:r.CoreConstants.AreaName,locationId:r.CoreConstants.ProjectsLocationId,responseIsCollection:!0,routeValues:{projectId:n}})},t.prototype.beginUpdateProject=function(n,t){return this._beginRequest({httpMethod:"PATCH",area:r.CoreConstants.AreaName,locationId:r.CoreConstants.ProjectsLocationId,routeValues:{projectId:n},data:t})},t}(i.VssHttpClient);t.ProjectHttpClient=u});
define("VSS/Controls/TreeView",["require","exports","VSS/Controls/Combos","VSS/Contributions/Services","VSS/Controls","VSS/Diag","VSS/Controls/Menus","VSS/Resources/VSS.Resources.Platform","VSS/Service","VSS/Telemetry/Services","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/UI","VSS/VSS","jQueryUI/droppable","VSS/Utils/Draggable","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){function ct(n){return n=n||l.localeIgnoreCaseComparer,function(t,i){return n(t.text,i.text)}}function d(n,t,i){var r,e,u,f=n.children;if(f&&(e=f.length))for(r=0;r<e;r++)u=f[r],t[t.length]=u,(i||u.expanded)&&d(u,t,i)}function ot(n){return $.map(n,function(n){if(n.id)t=new k(n.text,n.config,[],n.id);else var t=new k(n.text,n.config);return n.children&&n.children.length&&t.addRange(ot(n.children)),t})}function lt(n){return n?n.length&&!(n[0]instanceof k)?ot(n):n:[]}function st(n,t){n.expanded=!0;t&&n.hasChildren()&&$.each(n.children,function(n,i){st(i,t-1)})}var at=f.log,vt=f.LogVerbosity.Verbose,b=c.delegate,yt=v.getErrorMessage,p=a.KeyCode,y=a.domElem,et="TFSUICommonControls",ht=0,g=function(n){function t(t){n.call(this,$.extend({sepChar:"\\"},t));this._initRoot()}return __extends(t,n),t.prototype.setSource=function(t){this._initRoot();this.root.clear();n.prototype.setSource.call(this,t)},t.prototype.prepareSource=function(n){var t=lt(n);this.root.addRange(t);this._options.sorted&&this.root.sort(!0,ct(this._options.comparer));this._options.treeLevel&&st(this.root,this._options.treeLevel);this.updateItemsFromSource()},t.prototype.updateItemsFromSource=function(){var t=[],n;d(this.root,t,!0);n=[];d(this.root,n,!1);this.setItems(n,t)},t.prototype.getItemText=function(n,t,i){return i===!0?this.getItem(n,t).text:this.getItem(n,t).path(!1,this._options.sepChar)},t.prototype.getItemIndex=function(t,i,r){var f=n.prototype.getItemIndex.call(this,t,i,!0),u,e;if(f>=0){for(u=this.getItem(f,!0);u.parent;)u=u.parent,u.expanded||(e=!0),u.expanded=!0;return e&&this._prepareCurrentItems(),n.prototype.getItemIndex.call(this,t,i,r)}return f},t.prototype.expandNode=function(n){n.expanded||(n.expanded=!0,this._prepareCurrentItems())},t.prototype.collapseNode=function(n){n.expanded&&(n.expanded=!1,this._prepareCurrentItems())},t.prototype._initRoot=function(){this.root||(this.root=new k(""),this.root.expanded=!0,this.root.root=!0)},t.prototype._prepareCurrentItems=function(){var n=[];d(this.root,n,!1);this.setItems(n,this.getItems(!0))},t}(u.BaseDataSource),k,tt,w,nt,it,rt,ut,ft;t.TreeDataSource=g;v.initClassPrototype(g,{root:null});k=function(){function n(n,t,i,r){r?this.id=r:this._ensureNodeId();this.text=n;this.config=t||{};this.children=[];this.addRange(i)}return n.create=function(t,i,r){return new n(t,i,r)},n.prototype.hasChildren=function(){return this.children.length>0},n.prototype.clear=function(){this.children=[]},n.prototype.remove=function(){var n=this;this.parent&&(this.parent.children=$.map(this.parent.children,function(t){if(t!==n)return t}))},n.prototype.add=function(n){this.children.push(n);n.parent=this},n.prototype.moveTo=function(n){this.remove();n.add(this)},n.prototype.addRange=function(n){var t,i;if(n)for(t=0,i=n.length;t<i;t++)this.add(n[t])},n.prototype.findNode=function(n,t,i){return a.findTreeNode.call(this,n,t||"/",i||l.localeIgnoreCaseComparer,"text")},n.prototype.sort=function(n,t){this._sort(n,t)},n.prototype.path=function(n,t){return a.calculateTreePath.call(this,n,t||"/","text","root")},n.prototype.level=function(n){for(var i=0,t=this.parent;t;){if(n&&t.root)break;i++;t=t.parent}return i},n.prototype.getContributionContext=function(){return this},n.prototype._ensureNodeId=function(){(this.id<0||this.id===undefined||this.id===null)&&(this.id=""+ht++)},n.prototype._sort=function(n,t){var r,u,i=this.children;if(i&&i.length&&(i.sort(t),n))for(r=0,u=i.length;r<u;r++)i[r]._sort(n,t)},n}();t.TreeNode=k;v.initClassPrototype(k,{id:-1,root:!1,text:null,parent:null,children:null,config:null,expanded:!1,selected:!1,icon:null,tag:null,noFocus:!1,noContextMenu:!1,noTreeIcon:!1,folder:null,type:null,link:"",title:"",droppable:null,iterationPath:null,definition:null,linkDelegate:null,hasExpanded:!1,owner:null,application:null,isSearchHit:null});tt=function(n){function t(t){n.call(this,t);this.rootNode=new k("root");this.rootNode.root=!0;this._droppable=this._options.droppable;this._draggable=this._options.draggable;this._focusDelegate=b(this,this._onFocus);this._blurDelegate=b(this,this._onBlur);this._dragStartDelegate=b(this,this._onDragStart)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({role:"tree",coreCssClass:"tree-view",showIcons:!0,clickToggles:!1,clickSelects:!0,contextMenu:!1,styleFocusElement:!0,useEmptyFolderNodes:!0,sortMenuItems:!0},t))},t.prototype.initialize=function(){var t=this,i;n.prototype.initialize.call(this);this._bind("mouseover",function(n){var u=$(n.target),i,r;i=u.closest("div.node-content, div.node-context-menu-container");i.length>0&&(r=i.closest("li.node"),t._setFocusElement(r))});this._bind("mouseout",function(){t._setFocusElement(null)});this._bind("click",b(this,this._click));this._bind("contextmenu",b(this,this._onContextMenu));this._bind("keydown",b(this,this._onInputKeyDown));$.isArray(this._options.nodes)&&this.rootNode.addRange(this._options.nodes);this._options.contextMenu&&this._options.contextMenu.contributionIds&&s.getService(r.ExtensionService).getContributionsForTargets(this._options.contextMenu.contributionIds);i=this._options.useBowtieStyle?"bowtie-tree":"basic-tree";this.getElement().addClass(i);this._draw();f.logTracePoint("TreeView.initialize.complete")},t.prototype._draw=function(){var n,t,i;this._focusedNode&&(n=this._getNode(this._focusedNode),t=$("<button>").appendTo("body").focus());this.getElement().empty();this._drawNode(this.rootNode,this.getElement(),-1);n&&(i=this._getNodeElement(n),i.length>0&&this._getFirstTabbableChild(i).focus());t&&t.remove()},t.prototype._getNodeElement=function(n){return this.getElement().find("#tfs_tnli"+n.id).eq(0)},t.prototype._getNode=function(n){return n.data(w.NODE_DATA_NAME)},t.prototype.getSelectedNode=function(){return this._selectedNode},t.prototype.setSelectedNode=function(n,t){n&&n.config&&n.config.unselectable||(this._selectedNode&&(this._selectedNode.selected=!1),this._selectedNode=n,n&&(n.selected=!0,t||this._fire("selectionchanged",{selectedNode:n}),this._expandNodeParents(n,t)),this._updateSelections())},t.prototype.focus=function(){this._selectedNode&&this._getNodeElement(this._selectedNode).children(".node-link").focus()},t.prototype._expandNodeParents=function(n,t){for(var i=n,f=this.rootNode,r,u;i.parent;)i=i.parent,i===f||i.expanded||(i.expanded=!0,r=i);r&&(r.expanded=!1,u=this._getNodeElement(r),this._toggle(r,u,t))},t.prototype._updateSelections=function(){var n=this;this.getElement().find("li.node").each(function(){var i=$(this),t;t=n._getNode(i);t&&i.toggleClass("selected",t.selected)})},t.prototype._updateNode=function(n,t,i){var r,u,f,e;if(n.addClass("node"),!t.root){if(n.attr("title",t.title||t.text||"").attr("id","tfs_tnli"+t.id),t.draggable&&this._draggable&&n.draggable(this._draggable),t.droppable&&this._droppable&&n.droppable(this._droppable),this._draggable&&this._bind(n,"selectstart",function(n){n.preventDefault()}),t.selected&&n.addClass("selected"),t.noFocus&&n.addClass("nofocus"),t.folder&&n.addClass("folder"),t.config&&t.config.css&&n.addClass(t.config.css),this._options.contextMenu&&!t.noContextMenu){var o=$(y("div","node-context-menu-container node-context-menu")).attr("title",""),s=$(y("span","node-context-menu-icon")),h=this._options.useBowtieStyle?"bowtie-icon bowtie-ellipsis":"icon icon-drop";s.addClass(h);o.append(s);n.append(o)}else t.noContextMenu&&n.append($(y("div","node-context-menu-container node-no-context-menu")));r=$("<a />").addClass("node-link").attr("role","treeitem");this._draggable&&this._bind(r,"dragstart",this._dragStartDelegate);t.link&&r.attr("href",t.link);t.linkDelegate&&$.isFunction(t.linkDelegate)&&this._bind(r,"click",t.linkDelegate);r.attr("aria-level",i+1);t.noFocus||(r.attr("tabindex",0),this._bind(r,"focus",this._focusDelegate),this._bind(r,"blur",this._blurDelegate));u=$("<div />").addClass("node-content").text(t.text||"");this._draggable&&this._bind(u,"dragstart",this._dragStartDelegate);f=4;this._options.showIcons&&t.icon&&(f=0,$("<span />").addClass("icon tree-node-img").addClass(t.icon).prependTo(u));t.noTreeIcon||(f=0,e="icon",this._options.useBowtieStyle&&(e="bowtie-icon",(t.hasChildren()||t.folder&&this._options.useEmptyFolderNodes)&&(e+=" bowtie-chevron-right")),$(y("span","node-img "+e)).prependTo(u));f=this._options.useBowtieStyle?f+4:f;u.css("padding-left",f+i*12);r.append(u);n.append(r)}return n.data(w.NODE_DATA_NAME,t),n.data(w.LEVEL_DATA_NAME,i),(t.hasChildren()||t.folder&&this._options.useEmptyFolderNodes)&&this._drawChildren(t,n,i),u},t.prototype._drawChildren=function(n,t,i){var r,u,f;if(n.root||n.expanded){if(f=n.children.length,this._setNodeElementExpandState(t,!0,f>0),r=$(y("ul","tree-children")).attr("id","tfs_tnul"+n.id).attr("role","group"),typeof i=="undefined"&&(i=t.data(w.LEVEL_DATA_NAME)),i=i+1,f===0)this._drawEmptyFolderNode(r,i,n.emptyFolderNodeText||this._options.defaultEmptyFolderNodeText||o.NoItemsInThisFolder);else for(u=0;u<f;u++)this._drawNode(n.children[u],r,i);t.append(r)}else this._setNodeElementExpandState(t,!1)},t.prototype._toggle=function(n,t){return n&&(n.folder||n.hasChildren())?(n.expanded?(n.expanded=!1,t.find("ul.tree-children:first").remove()):(n.expanded=!0,this._drawChildren(n,t)),this._setNodeElementExpandState(t,n.expanded),!0):!1},t.prototype._setNodeExpansion=function(n,t,i){return n.expanded!==i?this._toggle(n,t):!1},t.prototype.removeNode=function(n){this._getNodeElement(n).remove();n.remove()},t.prototype.updateNode=function(n){var t,i;n.root?(t=this.getElement(),i=-1):(t=this._getNodeElement(n),i=t.data(w.LEVEL_DATA_NAME),t.removeClass());t.data("ui-draggable")&&t.draggable("destroy");t.data("ui-droppable")&&t.droppable("destroy");t.empty();this._updateNode(t,n,i)},t.prototype.onItemClick=function(n,t){if(this._options.clickToggles&&this._toggle(n,t))return!1;this._options.clickSelects&&this.setSelectedNode(n)},t.prototype.onShowPopupMenu=function(n,t){var r,i,f,o,s;if(t&&t.items&&t.items.length){if(i=this._getNodeElement(n),f=this._getFirstTabbableChild(i)[0],o=i.find("div.node-context-menu"),this._popupMenu){if(i.hasClass("context-menu-active")){this._popupMenu.popup(f,o);return}this._popupMenu.dispose();this._popupMenu=null}r=t.items.slice(0);t.sortMenuItems&&r.sort(function(n,t){return(n.rank||9999)-(t.rank||9999)});s=$.extend({},n);this._popupMenu=u.BaseControl.createIn(e.PopupMenu,i,{align:t.align||(this._options.useBowtieStyle?"right-bottom":"left-bottom"),useBowtieStyle:this._options.useBowtieStyle,executeAction:t.executeAction||t.clickHandler,items:[{childItems:r}],onActivate:function(){i.addClass("context-menu-active")},onDeactivate:function(){i.removeClass("context-menu-active")},onPopupEscaped:function(){i.removeClass("context-menu-active")},getCommandState:t.getCommandState,updateCommandStates:t.updateCommandStates,arguments:t.arguments,contributionIds:t.contributionIds,contextInfo:{item:s,menu:this._popupMenu}});this._popupMenu.getElement().prependTo(i);c.delay(this,10,function(){this._popupMenu.popup(f,o)})}},t.prototype.enableFocusStyling=function(n){this._options.styleFocusElement!==n&&(this._options.styleFocusElement=n,this._setFocusElement(this._focusedNode))},t.prototype._setFocusElement=function(n){var t=this._options.styleFocusElement;this._focusedNode&&this._focusedNode.length&&this._focusedNode.removeClass("focus");this._focusedNode=n;t&&this._focusedNode&&this._focusedNode.length&&(this._focusedNode.hasClass("nofocus")||this._focusedNode.addClass("focus"))},t.prototype.getNodeFromElement=function(n){var t=$(n);return this._getNode(t)},t.prototype._drawNode=function(n,t,i){var r;r=n.root?t:$("<li />").appendTo(t);this._updateNode(r,n,i)},t.prototype._drawEmptyFolderNode=function(n,t,i){var r,u;u=$("<li />").appendTo(n);r=new k(i);r.isEmptyFolderChildNode=!0;r.config.css="info";r.config.unselectable=!0;r.noFocus=!0;r.noContextMenu=!0;this._updateNode(u,r,t)},t.prototype._click=function(n){var t=$(n.target),i=t.closest("li.node");if(i.length>0){if(this._setFocusElement(i),t.closest("span.node-img").length>0)return this._onToggle(n);if(t.closest("div.node-content").length>0)return this._itemClick(n);if(t.closest("div.node-context-menu").length>0)return this._onContextMenu(n)}},t.prototype._onInputKeyDown=function(n){var r=$(n.target),t=r.closest("li.node"),i;switch(n.keyCode){case p.RIGHT:return this._setNodeExpansion(this._getNode(t),t,!0);case p.LEFT:return this._setNodeExpansion(this._getNode(t),t,!1);case p.ENTER:if(!$(".node-link",t).attr("href")){i=this._getNode(t);this.onItemClick(i,t,n);return!1}break;case 121:return n.shiftKey?this._onContextMenu():void 0}},t.prototype._onToggle=function(n){var t=$(n.target).parents("li.node:first");return this._toggle(this._getNode(t),t),!1},t.prototype._itemClick=function(n){var t=$(n.target).closest("li.node"),i=this._getNode(t);return this.onItemClick(i,t,n)},t.prototype._onContextMenu=function(){if(this._options.contextMenu&&this._focusedNode&&this._focusedNode.length>0)return this._showPopupMenu(this._getNode(this._focusedNode)),!1},t.prototype._showPopupMenu=function(n){var t,i;if(n){t=n.contextMenu;i=typeof t!="undefined"?$.isFunction(t)?t.call(this,n):t:this._options.contextMenu;this.onShowPopupMenu(n,i)}},t.prototype._onFocus=function(n){var t=$(n.target).closest("li.node");t.length>0&&this._setFocusElement(t);this.getElement().toggleClass("focus",!0);this._hasFocus=!0},t.prototype._onBlur=function(){this._setFocusElement(null);this._clearFocusOnElement()},t.prototype._clearFocusOnElement=function(){this.getElement().toggleClass("focus",!1);this._hasFocus=!1},t.prototype._onDragStart=function(){return!1},t.prototype.setDroppable=function(n){this._droppable=n},t.prototype._getFirstTabbableChild=function(n){return n.children("a.node-link, div.node-content[tabIndex]").first()},t.prototype._setNodeElementExpandState=function(n,t,i){i===void 0&&(i=!0);n.removeClass(w.EXPANDED_CLASS+" "+w.COLLAPSED_CLASS);n.addClass(t?w.EXPANDED_CLASS:w.COLLAPSED_CLASS);var r=this._getFirstTabbableChild(n);r.length>0&&i&&r.prop("aria-expanded",t)},t._typeName="tfs.treeView",t.NODE_DATA_NAME="node-data",t.LEVEL_DATA_NAME="node-level",t.EXPANDED_CLASS="expanded",t.COLLAPSED_CLASS="collapsed",t}(u.Control);t.TreeViewO=tt;w=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(tt);t.TreeView=w;v.initClassPrototype(w,{rootNode:null,_focusDelegate:null,_blurDelegate:null,_dragStartDelegate:null,_hasFocus:!1,_selectedNode:null,_draggable:null,_droppable:null,_focusedNode:null,_popupMenu:null});u.Enhancement.registerJQueryWidget(w,"treeView");nt=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({cssClass:"tree",createItem:b(this,this._createItem),itemClick:b(this,this._onItemClick)},t))},t.prototype.expandNode=function(){var n=this._getSelectedNode();return n&&n.hasChildren()&&!n.expanded?(this.getDataSource().expandNode(n),this.virtualizingListView.update(),!0):!1},t.prototype.collapseNode=function(){var n=this._getSelectedNode();return n&&n.hasChildren()&&n.expanded?(this.getDataSource().collapseNode(n),this.virtualizingListView.update(),!0):!1},t.prototype._createItem=function(n){var t=this.getDataSource().getItem(n),r=$(y("li",this._options.nodeCss)),i,f;return r.attr({id:u.getId(),role:"option"}),t.hasChildren()&&(r.addClass(t.expanded?"expanded":"collapsed"),r.attr("aria-expanded",String(t.expanded))),i=$(y("div","node-content")).css("padding-left",t.level(!0)*10),$(y("span","node-img icon")).appendTo(i),this._options.showIcons&&t.icon&&$(y("span",t.icon)).appendTo(i),f=$(y("span","text")).text(t.text||""),this._options.setTitleOnlyOnOverflow?a.tooltipIfOverflow(i[0],{titleTarget:f[0]}):f.attr("title",t.text||""),t.isSearchHit&&f.addClass("searchHit"),i.append(f),r.append(i),r},t.prototype._onItemClick=function(n,t,i){var r,u;return i.hasClass("node-img")&&(u=this.getDataSource(),r=u.getItem(t),r.hasChildren())?(r.expanded?(u.collapseNode(r),this.combo._fire("treeNodeCollapsed")):(u.expandNode(r),this.combo._fire("treeNodeExpanded")),this.virtualizingListView.update(),!1):!0},t.prototype._getSelectedNode=function(){return this.getDataSource().getItem(this.virtualizingListView.getSelectedIndex())},t}(i.ComboListDropPopup);t.ComboTreeDropPopup=nt;it=function(n){function t(t,i){n.call(this,t,$.extend({dropControlType:nt,sepChar:"\\",treeLevel:2},i))}return __extends(t,n),t.prototype.canType=function(){return!this.isDropVisible()},t.prototype.leftKey=function(){var n=this.getDropPopup();if(n)return n.collapseNode(),!1},t.prototype.rightKey=function(){var n=this.getDropPopup();if(n)return n.expandNode(),!1},t.prototype.keyUp=function(t){return this.isDropVisible()?!1:n.prototype.keyUp.call(this,t)},t.prototype._createDataSource=function(){return new g(this._options)},t}(i.ComboListBehavior);t.ComboTreeBehavior=it;t.ComboTreeBehaviorName="tree";i.Combo.registerBehavior(t.ComboTreeBehaviorName,it);rt=function(n){function t(t){n.call(this,t);this._checkStates={}}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({cssClass:"tree",createItem:b(this,this._createItem),itemClick:b(this,this._onItemClick)},t))},t.prototype.initialize=function(){this._options.id||(this._options.id="ctmvdp_"+u.getId());var t=this.combo.getText().split(this._options.multiJoinChar),i=this;$.each(t,function(n,t){t=$.trim(t);t&&(i._checkStates[t]=!0)});n.prototype.initialize.call(this)},t.prototype.expandNode=function(){var n=this._getSelectedNode();return n&&n.hasChildren()&&!n.expanded?(this.getDataSource().expandNode(n),this.virtualizingListView.update(),!0):!1},t.prototype.collapseNode=function(){var n=this._getSelectedNode();return n&&n.hasChildren()&&n.expanded?(this.getDataSource().collapseNode(n),this.virtualizingListView.update(),!0):!1},t.prototype.getCheckedItems=function(){var t=this,n=this.getDataSource();return $.map(n.getItems(!0),function(i,r){return i=n.getItemText(r,!0),t._checkStates[i]?i:void 0})},t.prototype.getValue=function(){return this.getCheckedItems().join(this._options.multiJoinChar)},t.prototype._createItem=function(n){var f=this.getDataSource(),t=f.getItem(n),r,i,e=this._options.id+"_cb"+n,u,o;return r=$(y("li",this._options.nodeCss)),t.hasChildren()&&r.addClass(t.expanded?"expanded":"collapsed"),i=$(y("div","node-content")).css("padding-left",t.level(!0)*10),$(y("span","node-img icon")).appendTo(i),this._options.showIcons&&t.icon&&$(y("span",t.icon)).appendTo(i),u=$(y("input","cb")).data("value",t.text||"").attr("title",t.text||"").attr("type","checkbox").attr("id",e).data("index",n),o=$(y("label","text")).attr("for",e).text(t.text||"").attr("title",t.text||""),this._checkStates[f.getItemText(n)]&&u.prop("checked",!0),t.isSearchHit&&u.addClass("searchHit"),i.append(u),i.append(o),r.append(i),r},t.prototype._onItemClick=function(n,t,i,r){var u=this.getDataSource(),f=u.getItem(t);if(i.hasClass("node-img")&&(this._fireDropPopupChange(u,t,r),f.hasChildren()))return f.expanded?u.collapseNode(f):u.expandNode(f),this.virtualizingListView.update(),!1;(i.hasClass("text")||i.hasClass("cb"))&&this._fireDropPopupChange(u,t,r)},t.prototype._fireDropPopupChange=function(n,t,i){var u,r,f=n.getItemText(t);u=Boolean(this._checkStates[f]);r=Boolean(i.find("input").prop("checked"));this._checkStates[f]=r;u!==r&&this._fireChange()},t.prototype._getSelectedNode=function(){return this.getDataSource().getItem(this.virtualizingListView.getSelectedIndex())},t.prototype.toggleCheckbox=function(n){var r=this._options.id+"_cb"+n,t,i;i=this.getDataSource().getItemText(n);t=$("#"+r);t.prop("checked")?(t.prop("checked",!1),this._checkStates[i]=!1):(t.prop("checked",!0),this._checkStates[i]=!0)},t}(i.ComboListDropPopup);t.MultiSelectTreeComboDropPopup=rt;ut=function(n){function t(t,i){n.call(this,t,$.extend({dropControlType:rt,sepChar:"\\",joinChar:"\\",multiJoinChar:"; ",treeLevel:2},i))}return __extends(t,n),t.prototype.canType=function(){return!this.isDropVisible()},t.prototype.getDropOptions=function(){return $.extend(n.prototype.getDropOptions.call(this),{sepChar:this._options.sepChar,joinChar:this._options.joinChar,multiJoinChar:this._options.multiJoinChar,selectedIndex:-1,selectionChange:!1,change:b(this,this._onChange)})},t.prototype.leftKey=function(){var n=this.getDropPopup();if(n)return n.collapseNode(),!1},t.prototype.rightKey=function(){var n=this.getDropPopup();if(n)return n.expandNode(),!1},t.prototype.keyUp=function(t){return this.isDropVisible()?!1:n.prototype.keyUp.call(this,t)},t.prototype.keyDown=function(n){var t=this.getDropPopup(),i;t&&n.keyCode===p.SPACE&&(i=t.getSelectedIndex(),i>=0&&(t.toggleCheckbox(i),this.setText(t.getValue(),!0)))},t.prototype._createDataSource=function(){return new g(this._options)},t.prototype._onChange=function(){var n=this.getDropPopup();return this.setText(n.getValue(),!0),!1},t.prototype.setSource=function(t){if(JSON.stringify(t)===JSON.stringify(this.getDataSource().getSource())){this._maxItemLength=null;return}n.prototype.setSource.call(this,t)},t}(i.ComboListBehavior);t.MultiSelectTreeComboBehavior=ut;t.ComboTreeMultivalueBehaviorName="treeMultiValue";i.Combo.registerBehavior(t.ComboTreeMultivalueBehaviorName,ut);ft=function(n){function t(t,i){n.call(this,t,$.extend({dropControlType:nt,sepChar:"\\",treeLevel:2},i));this.hitText=[];this.selectedHitIndex=-1;this.originalNodes=null;this.lastSearchText="";this.debounceWaitTime=300;this.textHasChanged=!1}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this.combo._bind(this.combo.getInput(),"mouseup",b(this,this.mouseUp))},t.prototype.canType=function(){return!0},t.prototype.getAriaAutocomplete=function(){return"list"},t.prototype.getAriaDescription=function(){return o.ComboSearchTreeScreenReaderHelp},t.prototype.leftKey=function(){var n=this.getDropPopup();if(n)return n.collapseNode(),!1},t.prototype.rightKey=function(){var n=this.getDropPopup();if(n)return n.expandNode(),!1},t.prototype.keyDown=function(t){var i=t.keyCode||t.charCode,r;return this.isDropVisible()&&(i===p.ENTER||i===p.TAB)&&!this.searchDebounceTimeout&&(r=this.combo.getText(),r===this.lastSearchText)?(this.acceptSelectedIndex(),!0):i===p.TAB&&this.searchDebounceTimeout?(this.clearSearchDebounce(),!0):n.prototype.keyDown.call(this,t)},t.prototype.keyUp=function(t){var i=t.keyCode||t.charCode,r=n.prototype.keyUp.call(this,t);if(this._options.mode!=="text"&&!this.isComboTextPath()){if(i===p.ENTER)return this.debounceSearch(0),!0;if(i===p.UP||i===p.DOWN||i===p.PAGE_UP||i===p.PAGE_DOWN||i===p.ESCAPE||this.isDropVisible()&&(i===p.LEFT||i===p.RIGHT))return this.clearSearchDebounce(),!0;this.debounceSearch(this.debounceWaitTime)}return r},t.prototype._createDataSource=function(){return new g(this._options)},t.prototype.mouseUp=function(){if($.isFunction(this._options.onMouseUp)){this._options.onMouseUp.call(this);return}if(!this.textHasChanged){this.lastSearchText=this.combo.getText();this.textHasChanged=!0;return}this.debounceSearch(this.debounceWaitTime)},t.prototype.clearSearchDebounce=function(){clearTimeout(this.searchDebounceTimeout);this.searchDebounceTimeout=null},t.prototype.debounceSearch=function(n){var t=this,i=function(){t.searchDebounceTimeout=null;t.searchNodes()};clearTimeout(this.searchDebounceTimeout);this.searchDebounceTimeout=setTimeout(i,n)},t.prototype.isComboTextPath=function(){var n=this.combo.getText();return n.indexOf("\\")>=0},t.prototype.searchNodes=function(){var n=this.combo.getText(),i,t,r;if(this._ensureOriginalNodesStored(),this.lastSearchText!==n){i=Date.now();this.hitText=[];this.selectedHitIndex=-1;t=!1;n===""||this.isComboTextPath()||(r=this.getNodesToSearch(n),t=this.createCopyOfSubtreeWhichMatchesSearch(n,r));this.modifyDatasourceAndDropdownWithResults(t);var u=Date.now(),f={SearchText:n,SearchTimeTaken:u-i};h.publishEvent(new h.TelemetryEventData(et,"TreeSearch",f));this.lastSearchText=n}},t.prototype._ensureOriginalNodesStored=function(){if(!this.originalNodes){var n=this._dataSource;this.originalNodes=n.getItems(!0)}},t.prototype.getNodesToSearch=function(n){var t=this._dataSource;return this.lastSearchText!==""&&l.startsWith(n,this.lastSearchText)?t.getItems(!1):this.originalNodes},t.prototype.createCopyOfSubtreeWhichMatchesSearch=function(n,t){var r=this._dataSource,o=[],s=!1,u,f,e,i,c,l,a;for(r.root=this.copyNodeToArray(o,r.root),r.root.root=!0,u=t.length,e=0,i=0;i<u;i++)f=t[i],c=f.text,this.stringContains(c,n)&&(s=!0,this.performSearchHitProcessing(o,f),e++);return l={SearchText:n,SearchResultCount:e.toString(),CountOfItemsSearched:u.toString()},a="TreeSearch",h.publishEvent(new h.TelemetryEventData(et,a,l)),s},t.prototype.stringContains=function(n,t){return l.caseInsensitiveContains(n,t)},t.prototype.modifyDatasourceAndDropdownWithResults=function(n){var t=this._dataSource,i,r,u;n||(this.hideDropPopup(),this.selectedHitIndex=-1,t.root=this.originalNodes[0].parent);i=[];r=[];d(t.root,i,!1);d(t.root,r,!0);t.setItems(i,r);n&&(this.showDropPopup(),u=this.getDropPopup(),u.virtualizingListView.update(),this.selectedHitIndex=0,this.setHit(this.selectedHitIndex))},t.prototype.expandAncestors=function(n){for(n=n.parent;n&&!n.expanded;)n.expanded=!0,n=n.parent},t.prototype.performSearchHitProcessing=function(n,t){this.copyNodeAndAncestorsToArray(n,t);this.copyDecendantsToArray(n,t);this.hitText[this.hitText.length]=t.path(!1,"\\");t=n[t.id];t.expanded=!1;this.expandAncestors(t);t.isSearchHit=!0},t.prototype.copyNodeToArray=function(n,t){var i=new k(t.text,t.config);return i.id=t.id,n[i.id]=i,i},t.prototype.copyNodeAndAncestorsToArray=function(n,t){if(!n[t.id]){var i=this.copyNodeToArray(n,t);t.parent&&(this.copyNodeAndAncestorsToArray(n,t.parent),n[t.parent.id].add(i))}n[t.id].expanded=!0},t.prototype.copyDecendantsToArray=function(n,t){var u,i,r;if(t.hasChildren)for(u in t.children)i=t.children[u],n[i.id]||(r=this.copyNodeToArray(n,i),r.expanded=!1,n[i.parent.id].add(r),this.copyDecendantsToArray(n,i))},t.prototype.setHit=function(n){if(n<0||n>=this.hitText.length)return!1;var i=this.hitText[n],t=this.getDropPopup();return t&&t.setSelectedValue(i),!0},t.prototype.acceptSelectedIndex=function(){this.selectedHitIndex>=0&&this.selectedHitIndex<this.hitText.length&&this.setText(this.hitText[this.selectedHitIndex],!0)},t}(i.ComboListBehavior);t.SearchComboTreeBehavior=ft;t.SearchComboTreeBehaviorName="treeSearch";i.Combo.registerBehavior(t.SearchComboTreeBehaviorName,ft);t.flatten=d;v.tfsModuleLoaded("VSS.UI.Controls.TreeView",t)});
/*!
 * jQuery UI Tabs 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/tabs/
 */
(function (n) { typeof define == "function" && define.amd ? define("jQueryUI/tabs",["jquery", "./core", "./widget"], n) : n(jQuery) })(function (n) { return n.widget("ui.tabs", { version: "1.11.4", delay: 300, options: { active: null, collapsible: !1, event: "click", heightStyle: "content", hide: null, show: null, activate: null, beforeActivate: null, beforeLoad: null, load: null }, _isLocal: function () { var n = /#.*$/; return function (t) { var i, r; t = t.cloneNode(!1); i = t.href.replace(n, ""); r = location.href.replace(n, ""); try { i = decodeURIComponent(i) } catch (u) { } try { r = decodeURIComponent(r) } catch (u) { } return t.hash.length > 1 && i === r } }(), _create: function () { var i = this, t = this.options; this.running = !1; this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible", t.collapsible); this._processTabs(); t.active = this._initialActive(); n.isArray(t.disabled) && (t.disabled = n.unique(t.disabled.concat(n.map(this.tabs.filter(".ui-state-disabled"), function (n) { return i.tabs.index(n) }))).sort()); this.active = this.options.active !== !1 && this.anchors.length ? this._findActive(t.active) : n(); this._refresh(); this.active.length && this.load(t.active) }, _initialActive: function () { var t = this.options.active, i = this.options.collapsible, r = location.hash.substring(1); return t === null && (r && this.tabs.each(function (i, u) { if (n(u).attr("aria-controls") === r) return t = i, !1 }), t === null && (t = this.tabs.index(this.tabs.filter(".ui-tabs-active"))), (t === null || t === -1) && (t = this.tabs.length ? 0 : !1)), t !== !1 && (t = this.tabs.index(this.tabs.eq(t)), t === -1 && (t = i ? !1 : 0)), !i && t === !1 && this.anchors.length && (t = 0), t }, _getCreateEventData: function () { return { tab: this.active, panel: this.active.length ? this._getPanelForTab(this.active) : n() } }, _tabKeydown: function (t) { var r = n(this.document[0].activeElement).closest("li"), i = this.tabs.index(r), u = !0; if (!this._handlePageNav(t)) { switch (t.keyCode) { case n.ui.keyCode.RIGHT: case n.ui.keyCode.DOWN: i++; break; case n.ui.keyCode.UP: case n.ui.keyCode.LEFT: u = !1; i--; break; case n.ui.keyCode.END: i = this.anchors.length - 1; break; case n.ui.keyCode.HOME: i = 0; break; case n.ui.keyCode.SPACE: t.preventDefault(); clearTimeout(this.activating); this._activate(i); return; case n.ui.keyCode.ENTER: t.preventDefault(); clearTimeout(this.activating); this._activate(i === this.options.active ? !1 : i); return; default: return } t.preventDefault(); clearTimeout(this.activating); i = this._focusNextTab(i, u); t.ctrlKey || t.metaKey || (r.attr("aria-selected", "false"), this.tabs.eq(i).attr("aria-selected", "true"), this.activating = this._delay(function () { this.option("active", i) }, this.delay)) } }, _panelKeydown: function (t) { this._handlePageNav(t) || t.ctrlKey && t.keyCode === n.ui.keyCode.UP && (t.preventDefault(), this.active.focus()) }, _handlePageNav: function (t) { return t.altKey && t.keyCode === n.ui.keyCode.PAGE_UP ? (this._activate(this._focusNextTab(this.options.active - 1, !1)), !0) : t.altKey && t.keyCode === n.ui.keyCode.PAGE_DOWN ? (this._activate(this._focusNextTab(this.options.active + 1, !0)), !0) : void 0 }, _findNextTab: function (t, i) { function u() { return t > r && (t = 0), t < 0 && (t = r), t } for (var r = this.tabs.length - 1; n.inArray(u(), this.options.disabled) !== -1;) t = i ? t + 1 : t - 1; return t }, _focusNextTab: function (n, t) { return n = this._findNextTab(n, t), this.tabs.eq(n).focus(), n }, _setOption: function (n, t) { if (n === "active") { this._activate(t); return } if (n === "disabled") { this._setupDisabled(t); return } this._super(n, t); n === "collapsible" && (this.element.toggleClass("ui-tabs-collapsible", t), t || this.options.active !== !1 || this._activate(0)); n === "event" && this._setupEvents(t); n === "heightStyle" && this._setupHeightStyle(t) }, _sanitizeSelector: function (n) { return n ? n.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&") : "" }, refresh: function () { var t = this.options, i = this.tablist.children(":has(a[href])"); t.disabled = n.map(i.filter(".ui-state-disabled"), function (n) { return i.index(n) }); this._processTabs(); t.active !== !1 && this.anchors.length ? this.active.length && !n.contains(this.tablist[0], this.active[0]) ? this.tabs.length === t.disabled.length ? (t.active = !1, this.active = n()) : this._activate(this._findNextTab(Math.max(0, t.active - 1), !1)) : t.active = this.tabs.index(this.active) : (t.active = !1, this.active = n()); this._refresh() }, _refresh: function () { this._setupDisabled(this.options.disabled); this._setupEvents(this.options.event); this._setupHeightStyle(this.options.heightStyle); this.tabs.not(this.active).attr({ "aria-selected": "false", "aria-expanded": "false", tabIndex: -1 }); this.panels.not(this._getPanelForTab(this.active)).hide().attr({ "aria-hidden": "true" }); this.active.length ? (this.active.addClass("ui-tabs-active ui-state-active").attr({ "aria-selected": "true", "aria-expanded": "true", tabIndex: 0 }), this._getPanelForTab(this.active).show().attr({ "aria-hidden": "false" })) : this.tabs.eq(0).attr("tabIndex", 0) }, _processTabs: function () { var t = this, i = this.tabs, r = this.anchors, u = this.panels; this.tablist = this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role", "tablist").delegate("> li", "mousedown" + this.eventNamespace, function (t) { n(this).is(".ui-state-disabled") && t.preventDefault() }).delegate(".ui-tabs-anchor", "focus" + this.eventNamespace, function () { n(this).closest("li").is(".ui-state-disabled") && this.blur() }); this.tabs = this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({ role: "tab", tabIndex: -1 }); this.anchors = this.tabs.map(function () { return n("a", this)[0] }).addClass("ui-tabs-anchor").attr({ role: "presentation", tabIndex: -1 }); this.panels = n(); this.anchors.each(function (i, r) { var f, u, e, s = n(r).uniqueId().attr("id"), o = n(r).closest("li"), h = o.attr("aria-controls"); t._isLocal(r) ? (f = r.hash, e = f.substring(1), u = t.element.find(t._sanitizeSelector(f))) : (e = o.attr("aria-controls") || n({}).uniqueId()[0].id, f = "#" + e, u = t.element.find(f), u.length || (u = t._createPanel(e), u.insertAfter(t.panels[i - 1] || t.tablist)), u.attr("aria-live", "polite")); u.length && (t.panels = t.panels.add(u)); h && o.data("ui-tabs-aria-controls", h); o.attr({ "aria-controls": e, "aria-labelledby": s }); u.attr("aria-labelledby", s) }); this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role", "tabpanel"); i && (this._off(i.not(this.tabs)), this._off(r.not(this.anchors)), this._off(u.not(this.panels))) }, _getList: function () { return this.tablist || this.element.find("ol,ul").eq(0) }, _createPanel: function (t) { return n("<div>").attr("id", t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy", !0) }, _setupDisabled: function (t) { n.isArray(t) && (t.length ? t.length === this.anchors.length && (t = !0) : t = !1); for (var i = 0, r; r = this.tabs[i]; i++) t === !0 || n.inArray(i, t) !== -1 ? n(r).addClass("ui-state-disabled").attr("aria-disabled", "true") : n(r).removeClass("ui-state-disabled").removeAttr("aria-disabled"); this.options.disabled = t }, _setupEvents: function (t) { var i = {}; t && n.each(t.split(" "), function (n, t) { i[t] = "_eventHandler" }); this._off(this.anchors.add(this.tabs).add(this.panels)); this._on(!0, this.anchors, { click: function (n) { n.preventDefault() } }); this._on(this.anchors, i); this._on(this.tabs, { keydown: "_tabKeydown" }); this._on(this.panels, { keydown: "_panelKeydown" }); this._focusable(this.tabs); this._hoverable(this.tabs) }, _setupHeightStyle: function (t) { var i, r = this.element.parent(); t === "fill" ? (i = r.height(), i -= this.element.outerHeight() - this.element.height(), this.element.siblings(":visible").each(function () { var t = n(this), r = t.css("position"); r !== "absolute" && r !== "fixed" && (i -= t.outerHeight(!0)) }), this.element.children().not(this.panels).each(function () { i -= n(this).outerHeight(!0) }), this.panels.each(function () { n(this).height(Math.max(0, i - n(this).innerHeight() + n(this).height())) }).css("overflow", "auto")) : t === "auto" && (i = 0, this.panels.each(function () { i = Math.max(i, n(this).height("").height()) }).height(i)) }, _eventHandler: function (t) { var u = this.options, r = this.active, c = n(t.currentTarget), i = c.closest("li"), f = i[0] === r[0], e = f && u.collapsible, o = e ? n() : this._getPanelForTab(i), s = r.length ? this._getPanelForTab(r) : n(), h = { oldTab: r, oldPanel: s, newTab: e ? n() : i, newPanel: o }; (t.preventDefault(), i.hasClass("ui-state-disabled") || i.hasClass("ui-tabs-loading") || this.running || f && !u.collapsible || this._trigger("beforeActivate", t, h) === !1) || (u.active = e ? !1 : this.tabs.index(i), this.active = f ? n() : i, this.xhr && this.xhr.abort(), s.length || o.length || n.error("jQuery UI Tabs: Mismatching fragment identifier."), o.length && this.load(this.tabs.index(i), t), this._toggle(t, h)) }, _toggle: function (t, i) { function e() { u.running = !1; u._trigger("activate", t, i) } function o() { i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"); r.length && u.options.show ? u._show(r, u.options.show, e) : (r.show(), e()) } var u = this, r = i.newPanel, f = i.oldPanel; this.running = !0; f.length && this.options.hide ? this._hide(f, this.options.hide, function () { i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"); o() }) : (i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"), f.hide(), o()); f.attr("aria-hidden", "true"); i.oldTab.attr({ "aria-selected": "false", "aria-expanded": "false" }); r.length && f.length ? i.oldTab.attr("tabIndex", -1) : r.length && this.tabs.filter(function () { return n(this).attr("tabIndex") === 0 }).attr("tabIndex", -1); r.attr("aria-hidden", "false"); i.newTab.attr({ "aria-selected": "true", "aria-expanded": "true", tabIndex: 0 }) }, _activate: function (t) { var r, i = this._findActive(t); i[0] !== this.active[0] && (i.length || (i = this.active), r = i.find(".ui-tabs-anchor")[0], this._eventHandler({ target: r, currentTarget: r, preventDefault: n.noop })) }, _findActive: function (t) { return t === !1 ? n() : this.tabs.eq(t) }, _getIndex: function (n) { return typeof n == "string" && (n = this.anchors.index(this.anchors.filter("[href$='" + n + "']"))), n }, _destroy: function () { this.xhr && this.xhr.abort(); this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"); this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"); this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(); this.tablist.unbind(this.eventNamespace); this.tabs.add(this.panels).each(function () { n.data(this, "ui-tabs-destroy") ? n(this).remove() : n(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role") }); this.tabs.each(function () { var t = n(this), i = t.data("ui-tabs-aria-controls"); i ? t.attr("aria-controls", i).removeData("ui-tabs-aria-controls") : t.removeAttr("aria-controls") }); this.panels.show(); this.options.heightStyle !== "content" && this.panels.css("height", "") }, enable: function (t) { var i = this.options.disabled; i !== !1 && (t === undefined ? i = !1 : (t = this._getIndex(t), i = n.isArray(i) ? n.map(i, function (n) { return n !== t ? n : null }) : n.map(this.tabs, function (n, i) { return i !== t ? i : null })), this._setupDisabled(i)) }, disable: function (t) { var i = this.options.disabled; if (i !== !0) { if (t === undefined) i = !0; else { if (t = this._getIndex(t), n.inArray(t, i) !== -1) return; i = n.isArray(i) ? n.merge([t], i).sort() : [t] } this._setupDisabled(i) } }, load: function (t, i) { t = this._getIndex(t); var u = this, r = this.tabs.eq(t), e = r.find(".ui-tabs-anchor"), f = this._getPanelForTab(r), o = { tab: r, panel: f }, s = function (n, t) { t === "abort" && u.panels.stop(!1, !0); r.removeClass("ui-tabs-loading"); f.removeAttr("aria-busy"); n === u.xhr && delete u.xhr }; this._isLocal(e[0]) || (this.xhr = n.ajax(this._ajaxSettings(e, i, o)), this.xhr && this.xhr.statusText !== "canceled" && (r.addClass("ui-tabs-loading"), f.attr("aria-busy", "true"), this.xhr.done(function (n, t, r) { setTimeout(function () { f.html(n); u._trigger("load", i, o); s(r, t) }, 1) }).fail(function (n, t) { setTimeout(function () { s(n, t) }, 1) }))) }, _ajaxSettings: function (t, i, r) { var u = this; return { url: t.attr("href"), beforeSend: function (t, f) { return u._trigger("beforeLoad", i, n.extend({ jqXHR: t, ajaxSettings: f }, r)) } } }, _getPanelForTab: function (t) { var i = n(t).attr("aria-controls"); return this.element.find(this._sanitizeSelector("#" + i)) } }) });
// Copyright (C) Microsoft Corporation. All rights reserved.
define("Admin/Scripts/TFS.Admin.Dialogs",["require","exports","VSS/VSS","Admin/Scripts/TFS.Admin","Admin/Scripts/Common/ControlFactory","Admin/Scripts/Resources/TFS.Resources.Admin","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation","VSS/Resources/VSS.Resources.Common","VSS/Utils/Clipboard","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Array","Presentation/Scripts/TFS/TFS.IdentityImage","VSS/Diag","VSS/Controls","VSS/Controls/Dialogs","VSS/Controls/Menus","VSS/Controls/Notifications","VSS/Controls/Combos","VSS/Controls/StatusIndicator","VSS/Service","VSS/Navigation/Services","Admin/Scripts/TFS.Admin.Common","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/FeatureRef/TFS.TeamAwarenessService","VSS/Utils/UI","Presentation/Scripts/TFS/TFS.Legacy.Ajax","Presentation/Scripts/TFS/TFS.OM.Common","Admin/Scripts/TFS.Admin.ConnectedServices","Admin/Scripts/TFS.Admin.ServiceEndpoints","Presentation/Scripts/TFS/TFS.Project.WebApi","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","TFS/Core/RestClient","VSS/FeatureAvailability/Services","VSS/Utils/Html","VSS/Identities/Picker/Controls","VSS/Telemetry/Services","VSS/Controls/TreeView","VSS/Locations","VSS/Context","VSS/Events/Action","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","Presentation/Scripts/TFS/TFS.MyExperiences.UrlHelper","jQueryUI/core","jQueryUI/button","jQueryUI/dialog","jQueryUI/tabs","VSS/LoaderPlugins/Css!Areas","VSS/LoaderPlugins/Css!Site"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,dt,gt,ni){function ui(n,t){p.preventClickingDisabledButtons(n,t);n.dialog("option","buttons",t)}function wi(n,t,i){return n.getActionUrl(t,"process",{area:i})}var fi=it.TfsContext.getDefault(),ii=it.TfsContext.getDefault().configuration,ri=it.TfsContext,ti=ut.domElem,cr,hi,lu,ci,vi,oi,lr,ar,si,au,bi,yi,vr,yr,vu,pr,wr,ki,di,br,kr,dr,gr,nu,tu,gi,yu,iu,li,pu,nr,tr,pi,ir,rr,ru,uu,ur,fu,ai,fr,eu,er,or,ou,sr,su,wu,bu,hu,ei,ku,du,gu,cu,hr,nf,tf;(function(n){n.SshKeysPath="_details/security/Keys/"})(cr||(cr={})),function(n){function t(n,t){return n.configuration.getRootPath()+cr.SshKeysPath+t+"?__v="+n.configuration.getWebApiVersion()}n.getActionUrl=t}(hi||(hi={}));lu=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initialize=function(){this._element.addClass("identity-header");this._element.append(a.identityImageElement(null,this._options.teamFoundationId,{t:$.now()}));$(ti("div")).appendTo(this._element).addClass("identity-header-name").text(this._options.header);$(ti("div")).appendTo(this._element).addClass("identity-header-subheader").text(this._options.subHeader)},t._controlType="IdentityHeaderControl",t}(y.BaseControl);ci=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(i){var u,r;this._groupMembershipOpType=i.groupMembershipOpType?i.groupMembershipOpType:tt.AdminUIHelper.ADD_MEMBERS;u=f.IdentityPickerDialog_AddUsersAndGroupsTitle;r=f.IdentityPickerDialog_SearchInstructions;this._groupMembershipOpType==tt.AdminUIHelper.ADD_AS_MEMBER&&(r=f.IdentityPickerDialog_SearchInstructions_AsMember);n.prototype.initializeOptions.call(this,$.extend({width:t.DIALOG_WIDTH,minWidth:t.DIALOG_WIDTH-200,height:t.DIALOG_HEIGHT,minHeight:t.DIALOG_HEIGHT-200,tableLabel:f.IdentityPickerDialog_UserOrGroupPrompt,contentHeader:u,contentDescription:r},i))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._isHosted=fi.isHosted;this._isHostedMsaAccount=this._isHosted&&!fi.isAADAccount;this._constructDialog();var t=$.Event("");t.type=yt.IdentityPickerSearchControl.INVALID_INPUT_EVENT;this._setSaveButtonState(t);this._addEvents();this._addDialogOptions()},t.prototype._constructDialog=function(){var u=this,i,e,o,v="identityPicker"+y.getId(),s,n,h,l,a,r;this._saveButton={id:t.CSS_OK_BUTTON,text:c.htmlEncode(f.SaveChanges),click:function(){u._onSaveClick()},"class":"cta"};this._cancelButton={id:t.CSS_CANCEL_BUTTON,text:c.htmlEncode(f.Cancel),click:function(){u._onCancelClick()}};this._closeButton={id:t.CSS_CLOSE_BUTTON,text:c.htmlEncode(f.Close),click:function(){u._onCloseClick()}};ui(this._element,[this._saveButton,this._cancelButton]);this._$data=$(ti("div")).css("height","100%").addClass(t.CSS_IDENTITY_DIALOG);this._$wrapper=$(ti("div")).append(this._$data).addClass(t.CSS_ADMIN_DIALOG).css("height","100%");this._element.html(this._$wrapper);this._element.mousedown(function(n){n.stopPropagation()});this.setTitle(this._options.contentHeader);this._$dataDiv=$(ti("div")).appendTo(this._$data).attr("id","main-context");this._options.mainTitle&&$(ti("div")).appendTo(this._$dataDiv).addClass(t.CSS_DIALOG_HEADER).text(this._options.mainTitle);this._$contentDescriptionElement=$(ti("div")).appendTo(this._$dataDiv).addClass(t.CSS_DESCRIPTION).text(this._options.contentDescription||"");e=$(ti("table")).appendTo(this._$dataDiv).addClass(t.CSS_MAIN_TABLE).innerWidth(t.DIALOG_WIDTH-100);o=$(ti("tr")).attr("overflow","scroll").appendTo(e);i=$(ti("td")).appendTo(o).outerWidth(150);$(ti("label")).appendTo(i).attr("for",v).addClass(t.CSS_ADD_ENTITY).text(this._options.tableLabel);i=$(ti("td")).addClass(t.CSS_SEARCH_CONTAINER).appendTo(o);this._isHostedMsaAccount&&(s=$(ti("tr")).attr("overflow","scroll").appendTo(e),$(ti("td")).appendTo(s).outerWidth(150),$(ti("td")).appendTo(s).addClass(t.CSS_MSA_HELPER_TEXT).text(f.IdentityPickerDialog_SeparateBySemicolons));n={IMS:!0};this._groupMembershipOpType&&this._groupMembershipOpType!=tt.AdminUIHelper.ADD_MEMBERS||(this._isHosted?n.Source=!0:(n.AD=!0,n.WMD=!0));h={Group:!0};this._groupMembershipOpType&&this._groupMembershipOpType!=tt.AdminUIHelper.ADD_MEMBERS||(h.User=!0);l=[];this._groupMembershipOpType&&this._groupMembershipOpType==tt.AdminUIHelper.ADD_AS_MEMBER&&l.push(tt.AdminUIHelper.SEARCH_CONSTRAINT_NO_RESTRICTED_VISIBILITY_GROUPS);a=it.TfsContext.getDefault().contextData&&it.TfsContext.getDefault().contextData.project?it.TfsContext.getDefault().contextData.project.name:null;r=it.TfsContext.getDefault().contextData&&it.TfsContext.getDefault().contextData.collection?it.TfsContext.getDefault().contextData.collection.name:null;this._groupMembershipOpType&&this._groupMembershipOpType==tt.AdminUIHelper.ADD_AS_MEMBER&&a&&r&&(r=null);this._identityPickerSearchControl=y.create(yt.IdentityPickerSearchControl,i,{operationScope:this._options.operationScope?this._options.operationScope:n,identityType:this._options.identityType?this._options.identityType:h,consumerId:this._options.consumerId?this._options.consumerId:tt.AdminUIHelper.ADD_MEMBER_DIALOG_CONSUMER_ID,multiIdentitySearch:!0,showContactCard:!0,pageSize:5,extensionData:{extensionId:tt.AdminUIHelper.TFS_ADMIN_IDENTITY_PICKER_SEARCH_EXTENSION_ID,projectScopeName:a,collectionScopeName:r,constraints:l}});this._identityPickerSearchControl.focusOnSearchInput()},t.prototype.saveIdentities=function(){var r=this,n=this._identityPickerSearchControl.getIdentitySearchResult(),t=this._options.saveCallback,i;t&&(this._isHostedMsaAccount?(i=$("input",this.getElement()).val().trim(),t(n.resolvedEntities,n.unresolvedQueryTokens.concat(i?[i]:[]))):t(n.resolvedEntities,[]),this.close(),v.logTracePoint("IdentityPickerDialog.SaveChanges.Success"),v.logTracePoint("IdentityPickerDialog.CloseDialog"));n.resolvedEntities.forEach(function(n){n.localId&&r._identityPickerSearchControl.addIdentitiesToMru([n])})},t.prototype._addDialogOptions=function(){var n=this;this._element.dialog("option","beforeClose",function(){return!n._requestContext||n._requestContext.isComplete})},t.prototype._addEvents=function(){var n=this;this._bind(yt.IdentityPickerSearchControl.INVALID_INPUT_EVENT,function(t){n._setSaveButtonState(t)});this._bind(yt.IdentityPickerSearchControl.VALID_INPUT_EVENT,function(t){n._setSaveButtonState(t)})},t.prototype._onCloseClick=function(){this.close();v.logTracePoint("IdentityPickerDialog.CloseDialog")},t.prototype._onCancelClick=function(){this.close()},t.prototype._onSaveClick=function(){v.logTracePoint("IdentityPickerDialog.SaveChanges.Click.Start");this.saveIdentities()},t.prototype._setSaveButtonState=function(n){var t=this._identityPickerSearchControl.getIdentitySearchResult();this._isHostedMsaAccount?this._element.siblings(".ui-dialog-buttonpane").find("#"+this._saveButton.id).button("enable"):n&&n.type==yt.IdentityPickerSearchControl.VALID_INPUT_EVENT?this._element.siblings(".ui-dialog-buttonpane").find("#"+this._saveButton.id).button("enable"):this._element.siblings(".ui-dialog-buttonpane").find("#"+this._saveButton.id).button("disable")},t.DIALOG_WIDTH=700,t.DIALOG_HEIGHT=350,t.CSS_OK_BUTTON="add-identity-dialog-main-ok-button",t.CSS_CANCEL_BUTTON="add-identity-dialog-main-cancel-button",t.CSS_CLOSE_BUTTON="add-identity-dialog-main-close-button",t.CSS_ADMIN_DIALOG="admin-dialog",t.CSS_IDENTITY_DIALOG="add-identity-dialog",t.CSS_SEARCH_CONTAINER="ip-dialog-search-container",t.CSS_MSA_HELPER_TEXT="dialog-add-user-helper-text",t.CSS_DIALOG_HEADER="dialog-header",t.CSS_MAIN_TABLE="main-table",t.CSS_ADD_ENTITY="add-user",t.CSS_DESCRIPTION="description",t}(p.ModalDialogO);t.IdentityPickerDialog=ci;i.initClassPrototype(ci,{_$data:null,_$wrapper:null,_$contentDescriptionElement:null,_identityPickerSearchControl:null,_saveButton:null,_$dataDiv:null,_cancelButton:null,_closeButton:null,_requestContext:null});i.classExtend(ci,ri.ControlExtensions);vi=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({width:665,minWidth:665,height:300,minHeight:300,allowMultiSelect:!0,allowArbitraryEmailAddresses:!0,constrainToTfsUsersOnly:!1,tableLabel:f.AddUserTableText,contentHeader:it.TfsContext.getDefault().isHosted?f.AddMemberHeaderHosted:f.AddMemberHeaderOnPremise,contentDescription:it.TfsContext.getDefault().isHosted?f.AddMemberDescriptionHosted:f.AddMemberDescriptionOnPremise,useLegacyStyle:!0},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._decorate();this._addEvents();this._addDialogOptions()},t.prototype._dataElement=function(){return this._data},t.prototype._decorate=function(){var t=this,r,o,e,l,n=this,u,s,i,h="identityPicker"+y.getId();this._saveButton={id:"add-identity-dialog-main-ok-button",text:c.htmlEncode(f.SaveChanges),click:function(){t._onSaveClick()},"class":"cta"};this._cancelButton={id:"add-identity-dialog-main-cancel-button",text:c.htmlEncode(f.Cancel),click:function(){t._onCancelClick()}};this._closeButton={id:"add-identity-dialog-main-close-button",text:c.htmlEncode(f.Close),click:function(){t._onCloseClick()}};this._backButton={id:"add-identity-dialog-back-button",text:c.htmlEncode(f.Back),click:function(){t._backToMain()}};this._addMembersButton={id:"add-identity-dialog-browse-users-ok-button",text:c.htmlEncode(f.Add),click:function(){t._onAddMembersClick()},"class":"cta",disabled:!0};ui(this._element,[this._saveButton,this._cancelButton]);this._data=$(ti("div")).css("height","100%").addClass("add-identity-dialog");this._wrapper=$(ti("div")).append(this._data).addClass("admin-dialog").css("height","100%");this._element.html(this._wrapper);this.setTitle(this._options.contentHeader);this._dataDiv=$(ti("div")).appendTo(this._data).attr("id","main-context");this._options.mainTitle&&$(ti("div")).appendTo(this._dataDiv).addClass("dialog-header").text(this._options.mainTitle);this._contentDescriptionElement=$(ti("div")).appendTo(this._dataDiv).addClass("description").text(this._options.contentDescription||"");o=$(ti("table")).appendTo(this._dataDiv).addClass("main-table");e=$(ti("tr")).appendTo(o);r=$(ti("td")).appendTo(e);$(ti("label")).appendTo(r).attr("for",h).addClass("add-user").text(this._options.tableLabel);r=$(ti("td")).appendTo(e);i={};this._options.browseGroups?(u=this._options.tfsContext.getActionUrl("ReadAddableGroups","identity",{area:"api",joinGroupTfid:this._options.joinGroupTfid,joinGroupExpandParentScopes:this._options.joinGroupExpandParentScopes,showAllGroupsIfCollection:this._options.showAllGroupsIfCollection}),i.joinGroups=this._options.joinGroups):it.TfsContext.getDefault().isHosted&&this._options.browseAadGroups?(u=this._options.tfsContext.getActionUrl("ReadAddableAadGroups","identity",{area:"api",joinGroupTfid:this._options.joinGroupTfid}),s=this._options.tfsContext.getActionUrl("ReadAddableAadGroups","identity",{area:"api",joinGroupTfid:this._options.joinGroupTfid,localAadGroups:!1}),i.joinGroups=this._options.joinGroups,this._isAadGroupDailog=!0):(u=this._options.tfsContext.getActionUrl("ReadIdentitiesPageJson","identity",{area:"api",filterServiceIdentities:this._options.isTeam}),i.membershipType="addableUsers");this._identityPickerControl=y.BaseControl.createIn(tt.IdentityPickerControl,r,{inputControlId:h,delayInit:this._options.delayInit,allowMultiSelect:this._options.allowMultiSelect,identityListAction:u,searchParams:i,allowFreeType:!this._options.browseGroups&&!this._isAadGroupDailog,allowCheckName:!this._options.browseGroups&&!this._isAadGroupDailog,allowArbitraryEmailAddresses:this._options.allowArbitraryEmailAddresses,constrainToTfsUsersOnly:this._options.constrainToTfsUsersOnly,AadidentityBrowseListAction:s,browseAction:function(t,i){var r=$(".browse-context",n._element);$("#main-context",n._element).hide();n._element.dialog("option","buttons",[n._addMembersButton,n._backButton]);r.show();n._identityBrowser?n._identityBrowser.setCheckedIdentities(i):n._identityBrowser=n._isAadGroupDailog?y.Enhancement.enhance(tt.BrowseAadGroupsControl,r,{identityListAction:this._options.AadidentityBrowseListAction,searchParams:this._options.searchParams,existingGroups:i,gridItems:this._identityListData,multiSelect:this._options.allowMultiSelect}):y.Enhancement.enhance(tt.BrowseIdentitiesControl,r,{identityListAction:this._options.identityListAction,searchParams:this._options.searchParams,existingGroups:i,gridItems:this._identityListData,multiSelect:this._options.allowMultiSelect})}});l=$(ti("div")).appendTo(this._data).addClass("browse-context").hide();this._backToMain()},t.prototype._evaluateSaveButtonState=function(){var n=this._getPendingChanges();n.newUsers.length+n.existingUsers.length>0?(this._element.siblings(".ui-dialog-buttonpane").find("#"+this._saveButton.id).button("enable"),it.TfsContext.getDefault().isHosted&&this._options.browseAadGroups&&this._contentDescriptionElement.html(f.AadGroupUsersAutoAssignLicense)):this._element.siblings(".ui-dialog-buttonpane").find("#"+this._saveButton.id).button("disable")},t.prototype._getPendingChanges=function(n){return this._identityPickerControl.getPendingChanges(n)},t.prototype._addDialogOptions=function(){var n=this;this._element.dialog("option","beforeClose",function(){return!n._requestContext||n._requestContext.isComplete})},t.prototype._addEvents=function(){var n=this;$(".browse-context",this._element).bind("pendingChanged",function(t,i){i.pendingAdds.length+i.pendingDeletes.length===0||i.totalCheckedCount===0?n._element.siblings(".ui-dialog-buttonpane").find("#"+n._addMembersButton.id).button("disable"):n._element.siblings(".ui-dialog-buttonpane").find("#"+n._addMembersButton.id).button("enable")});this._identityPickerControl._element.bind("identityListChanged",function(){n._evaluateSaveButtonState()})},t.prototype._backToMain=function(){$(".browse-context",this._element).hide();$("#main-context",this._element).show();ui(this._element,[this._saveButton,this._cancelButton]);this._evaluateSaveButtonState();$("#main-context",this._element).find("input").focus()},t.prototype._onAddMembersClick=function(){for(var t,r,i=this._identityBrowser.getIdentityGrid(),n=0;n<i._pendingDeletes.length;n++)t=i._pendingDeletes[n],this._identityPickerControl.removeIdentity(t);for(n=0;n<i._pendingAdds.length;n++)t=i._pendingAdds[n],r=i._identityInfoMap[t],this._identityPickerControl.addResolvedIdentity(r,r,t);this._backToMain()},t.prototype._onCloseClick=function(){this.close();v.logTracePoint("AddIdentityDialog.CloseDialog")},t.prototype._onCancelClick=function(){this.close()},t.prototype._onSaveClick=function(){v.logTracePoint("AddIdentityDialog.SaveChanges.Click.Start");this._saveIdentities()},t.prototype._saveIdentities=function(){var n=this._options.saveCallback;n&&(n(this._getPendingChanges(!0)),this.close(),v.logTracePoint("AddIdentityDialog.SaveChanges.Success"),v.logTracePoint("AddIdentityDialog.CloseDialog"))},t}(p.ModalDialogO);t.IdentitiesDialogO=vi;oi=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(vi);t.IdentitiesDialog=oi;i.initClassPrototype(oi,{_addMembersButton:null,_backButton:null,_cancelButton:null,_closeButton:null,_data:null,_identityBrowser:null,_requestContext:null,_saveButton:null,_wrapper:null,_dataDiv:null,_contentDescriptionElement:null,_identityPickerControl:null});i.classExtend(oi,ri.ControlExtensions);lr=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){var i=this;n.prototype.initializeOptions.call(this,$.extend({width:580,minWidth:580,height:390,minHeight:390,allowMultiSelect:!1,contentHeader:f.RenameAccountUrlHeader,contentDescription:f.RenameAccountDescription,buttons:{saveButton:{id:"ok",text:f.SaveChanges,disabled:!0,click:function(){i._onSaveClick()}},cancelButton:{id:"cancel",text:f.Cancel,click:function(){i.onCancelClick()}}}},t))},t.prototype.initialize=function(){var t=this;n.prototype.initialize.call(this);this._existingAccountURL=$(".display-Advance-Url").text();this._maxLength=50;this.buildDialogElements();$(document).bind("click.confirmCheck",function(){t._onConfirmCheck()})},t.prototype.buildDialogElements=function(){this._data=$(ti("div")).addClass("rename-account-dialog");this._wrapper=$(ti("div")).append(this._data).addClass("admin-dialog").css("height","100%");this._element.html(this._wrapper);this._waitControl=y.create(d.WaitControl,this.getElement(),{target:this._data,cancellable:!1,message:f.ProgressPleaseWait});this._headerSection=$(ti("div")).appendTo(this._data).addClass("rename-account-header-section");this._options.mainTitle&&$(ti("div")).appendTo(this._headerSection).addClass("dialog-header").text(this._options.mainTitle);this.setTitle(this._options.contentHeader);this._dataDiv=$(ti("div")).appendTo(this._data).attr("id","main-context");this._warningTextDiv=$(ti("div")).appendTo(this._dataDiv).addClass("message-warning");this._createWarningHeader();this._createWarningText();this._createCheckboxText();this._createUrlInputArea();this._createErrorFooter();this._hideError()},t.prototype._onConfirmCheck=function(){var n=$(this._confirmCheckbox).prop("checked");n?(this._updateRenameButtons(!0),$(this._accountUrlInputTable).removeAttr("disabled"),$(this._accountName).removeAttr("disabled"),$(this._accountName).focus()):($(this._accountUrlInputTable).attr("disabled","disabled"),$(this._accountName).attr("disabled","disabled"),this._updateRenameButtons(!1))},t.prototype._updateRenameButtons=function(n){this.updateOkButton(n)},t.prototype._onCloseClick=function(){this.close()},t.prototype._onCancelClick=function(){this.close()},t.prototype._onSaveClick=function(){var n=this,t;this._hideError();this._validate()&&(t=$(this._accountName).val().trim(),this._updateRenameButtons(!1),this._accountName.attr("disabled","disabled"),$(this._accountUrlInputTable).attr("disabled","disabled"),this._waitControl.startWait(),ft.postMSJSON(fi.getActionUrl("UpdateAccountAdvancedSettings","account",{area:"api"}),{newAccountName:t},function(t){n._postRenameSuccess(t)},function(t){n._postRenameFailure(t)}))},t.prototype._validate=function(){var n=$(this._accountName).val().trim();return n.length===0?($(this._accountName).focus(),this._showError(f.RequiredField),!1):!0},t.prototype._postRenameSuccess=function(n){n.Status=="true"&&h.delay(this,2e4,function(){this._waitControl.endWait();window.location.href=n.NewAccountUrl})},t.prototype._postRenameFailure=function(n){$(this._accountUrlInputTable).removeAttr("disabled");this._updateRenameButtons(!0);this._waitControl.endWait();switch(n.type){case"Microsoft.VisualStudio.Services.Account.AccountPropertyException":case"Microsoft.VisualStudio.Services.Account.AccountNameTemporarilyReservedException":case"Microsoft.TeamFoundation.Framework.Server.TeamFoundationSecurityServiceException":this._showError(n.message);break;case"System.Web.HttpRequestValidationException":this._showError(f.InvalidAccountName);break;default:this._showError(f.SorryNoUpdate)}},t.prototype._showError=function(n){this._errorMessageDiv.show();this._errorMessageImg.show();this._errorMessageText.show();this._errorMessageText.text(n)},t.prototype._hideError=function(){this._errorMessageDiv.hide();this._errorMessageImg.hide();this._errorMessageText.hide()},t.prototype._createErrorFooter=function(){this._errorMessageDiv=$(ti("div")).appendTo($("#main-context")).attr("id","account-error-rename").addClass("error-message-div");this._errorMessageImgDiv=$(ti("div")).appendTo(this._errorMessageDiv).addClass("rename-err-footer-img");this._errorMessageImg=$("<span/>").appendTo(this._errorMessageImgDiv).addClass("rename-error-message-icon icon").attr("align","bottom");this._errorMessageText=$(ti("div")).appendTo(this._errorMessageDiv).addClass("error-message-accountRename")},t.prototype._createWarningHeader=function(){var t,n,i,r;this._renameWarningHeaderDiv=$(ti("div")).appendTo(this._warningTextDiv).addClass("rename-warning-header-div");t=$(ti("table")).appendTo(this._warningTextDiv).addClass("rename-warning-header-div");n=$(ti("tr")).appendTo(t);i=$(ti("td")).appendTo(n).addClass("rename-warning-tbl-img");r=$(ti("td")).appendTo(n).addClass("rename-warning-tbl-txt");$("<span/>").appendTo(i).addClass("rename-warning-icon");$(ti("div")).appendTo(r).addClass("description-rename").html(this._options.contentDescription)},t.prototype._createUrlInputArea=function(){var n;this._accountUrlInputDiv=$(ti("div")).appendTo(this._dataDiv);this._accountUrlInputTable=$(ti("table")).appendTo(this._accountUrlInputDiv).addClass("inputAccountUrl");this._accountUrlInputTableRow=$(ti("tr")).appendTo(this._accountUrlInputTable);this._accountUrl=$(ti("td")).appendTo(this._accountUrlInputTableRow).addClass("accountUrl-text").text(f.NewAccountUrl);this._newNameInput=$(ti("td")).appendTo(this._accountUrlInputTableRow).addClass("new-url-input");this._accountName=$(ti("input")).addClass("requiredInfoLight").addClass("textbox").attr("id","account-newname").attr("type","text").attr("maxlength",this._maxLength).appendTo(this._newNameInput);n=fi.navigation.publicAccessPoint.authority;$(ti("td")).appendTo(this._accountUrlInputTableRow).addClass("tfs-domain").text(n.substr(n.indexOf(".")))},t.prototype._createCheckboxText=function(){this._checkboxDiv=$(ti("div")).addClass("rename-warning-list").appendTo(this._dataDiv);this._confirmCheckbox=$("<input type=checkbox>").addClass("rename-checkbox").attr("align","bottom").attr("name","confirmCheck");this._confirmCheckbox.appendTo(this._checkboxDiv);$(ti("span")).appendTo(this._checkboxDiv).addClass("rename-checkbox-text").text(f.RenameWarning5)},t.prototype._createWarningText=function(){$(ti("div")).appendTo(this._warningTextDiv).addClass("rename-warning-list").text(f.RenameWarning1);$(ti("div")).appendTo(this._warningTextDiv).addClass("rename-warning-list").html(f.RenameWarning3+this._existingAccountURL+f.RenameWarning4+this._existingAccountURL+f.RenameWarning6);$(ti("div")).appendTo(this._warningTextDiv).addClass("rename-warning-list").html(f.RenameWarning2)},t}(p.ModalDialogO);t.RenameAccountDialog=lr;i.initClassPrototype(lr,{_data:null,_requestContext:null,_saveButton:null,_cancelButton:null,_closeButton:null,_wrapper:null,_dataDiv:null,_contentDescriptionElement:null});ar=function(n){function t(t){n.call(this,t);var i=$("#subscriptionId").text();this._isAccountLinkedToSubscription=i!=="null"&&i!==""}return __extends(t,n),t.prototype.initializeOptions=function(t){var u=this,i,r;this._existingAccountName=t.AccountName;i=c.format(f.DeletingYourAccountHeader,this._existingAccountName);r={id:"ok",text:f.DeleteAccount,"class":"warning",click:function(){u._onSaveClick()}};this._isAccountLinkedToSubscription&&(i=f.DeletingYourAccountErrorHeader,r.disabled=!0);n.prototype.initializeOptions.call(this,$.extend({width:580,minWidth:580,height:450,minHeight:450,allowMultiSelect:!1,contentHeader:f.DeleteAccountHeader,contentDescription:i,buttons:{saveButton:r,cancelButton:{id:"cancel",text:f.Cancel,click:function(){u.onCancelClick()}}}},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this._maxLength=50;this._accountDeleteReasonMaxLength=200;this.buildDialogElements()},t.prototype.buildDialogElements=function(){this._data=$(ti("div")).addClass("delete-account-dialog");this._wrapper=$(ti("div")).append(this._data).addClass("admin-dialog").css("height","100%");this._element.html(this._wrapper);this._waitControl=y.create(d.WaitControl,this.getElement(),{target:this._data,cancellable:!1,message:f.DeletingAccount});this._headerSection=$(ti("div")).appendTo(this._data).addClass("delete-account-header-section");this._options.mainTitle&&$(ti("div")).appendTo(this._headerSection).addClass("dialog-header").text(this._options.mainTitle);this.setTitle(this._options.contentHeader);this._dataDiv=$(ti("div")).appendTo(this._data).attr("id","main-context");this._errorPane=y.BaseControl.createIn(b.MessageAreaControl,this._dataDiv,{message:{type:b.MessageAreaType.Error}});this._warningTextDiv=$(ti("div")).appendTo(this._dataDiv).addClass("message-warning");this._dataDivContent=$(ti("div")).appendTo(this._dataDiv).addClass("delete-dailog-messagebox");this._createDailogContent();this._createErrorFooter();this._hideError();$(ti("div")).appendTo(this._wrapper).addClass("delete-warning-tos").html(f.DeleteAccountTermsOfService);this._isAccountLinkedToSubscription&&($(".delete-dailog-messagebox").css({opacity:.5}),$(".delete-warning-tos").css({opacity:.5}));$(".message-area-control").hide()},t.prototype._onCloseClick=function(){this.close()},t.prototype._onCancelClick=function(){this.close()},t.prototype._onSaveClick=function(){var i=this,n,t,r;this._hideError();this._validate()&&(n=this._whyDeleteAccountCombo.getSelectedIndex(),t=n>0&&n<this._allAccountDeleteReasons.length?this._allAccountDeleteReasons[n].DisplayText:"",t===f.AccountDeleteReason6&&(t=this._whyDeleteAccountTextbox.val()),r=$(this._accountName).val().trim(),this.updateOkButton(!1),this._accountName.attr("disabled","disabled"),this._waitControl.startWait(),ft.postMSJSON(fi.getActionUrl("MarkAccountForDelete","account",{area:"api"}),{accountName:r,accountDeleteReason:t},function(n){i._postDeleteSuccess(n)},function(n){i._postDeleteFailure(n)}))},t.prototype._validate=function(){var n=$(this._accountName).val().trim();return n.length===0?($(this._accountName).focus(),this._showError(f.RequiredField),!1):!0},t.prototype._postDeleteSuccess=function(n){n.Status=="true"?h.delay(this,2e4,function(){this._waitControl.endWait();window.location.href=n.redirectUrl}):(this._accountName.removeAttr("disabled"),this.updateOkButton(!0),this._waitControl.endWait(),n.Html?this._showHtmlError(n.ErrorMessage):n.ErrorMessage?this._showError(n.ErrorMessage):this._showError(f.SorryNoDelete))},t.prototype._postDeleteFailure=function(n){this._accountName.removeAttr("disabled");this.updateOkButton(!0);this._waitControl.endWait();n.ErrorMessage?this._showError(n.ErrorMessage):this._showError(f.SorryNoDelete)},t.prototype._showError=function(n){this._errorMessageDiv.show();this._errorMessageImg.show();this._errorMessageText.show();this._errorMessageText.text(n)},t.prototype._showHtmlError=function(n){this._errorPane.setMessage({header:$("<div>"+n+"<\/div>"),type:b.MessageAreaType.Error})},t.prototype._hideError=function(){this._errorMessageDiv.hide();this._errorMessageImg.hide();this._errorMessageText.hide();this._errorPane.clear()},t.prototype._createErrorFooter=function(){this._errorMessageDiv=$(ti("div")).appendTo(this._dataDivContent).attr("id","account-error-delete").addClass("delete-error-message-div");this._errorMessageImgDiv=$(ti("div")).appendTo(this._errorMessageDiv).addClass("delete-err-footer-img");this._errorMessageImg=$("<span/>").appendTo(this._errorMessageImgDiv).addClass("delete-error-message-icon icon").attr("align","bottom");this._errorMessageText=$(ti("div")).appendTo(this._errorMessageDiv).addClass("error-message-accountDelete")},t.prototype._createDailogContent=function(){var s=this,r,t,u,e,o,n,i;r=$(ti("table")).appendTo(this._warningTextDiv).addClass("delete-warning-header-div");t=$(ti("tr")).appendTo(r);u=$(ti("td")).appendTo(t).addClass("delete-warning-tbl-img");e=$(ti("td")).appendTo(t).addClass("delete-warning-tbl-txt");$("<span/>").appendTo(u).addClass("delete-warning-icon");$(ti("div")).appendTo(e).addClass("description-delete-p1").html(this._options.contentDescription);$(ti("div")).appendTo(this._warningTextDiv).addClass("deleteHeaderdivider");$(ti("div")).appendTo(this._dataDivContent).addClass("description-delete-p2").html(f.DeletingYourAccountHeader1);$(ti("div")).appendTo(this._dataDivContent).text(f.WhyDeleteAccount);o=this._accountUrlInputDiv=$(ti("div")).appendTo(this._dataDivContent).addClass("delete-account-combo");this._whyDeleteAccountCombo=y.BaseControl.createIn(k.Combo,o,{allowEdit:!1,comparer:c.defaultComparer,indexChanged:function(n){s._whyDeleteAccountComboChanged(n)}});this._whyDeleteAccountReasonDiv=$(ti("div")).appendTo(this._dataDivContent).attr("id","account-delete-reason").addClass("account-delete-reason-div");$(ti("div")).appendTo(this._whyDeleteAccountReasonDiv).addClass("description-delete-custom-reason").text(f.AccountDeleteCustomReason);this._whyDeleteAccountTextbox=$("<textarea />").addClass("").addClass("whyDeleteAccountTextboxinvisible").attr("id","whyDeleteAccountTextbox").appendTo(this._whyDeleteAccountReasonDiv).attr("value","").attr("rows","2").attr("maxlength",this._accountDeleteReasonMaxLength);this._whyDeleteAccountReasonDiv.hide();n=this;ft.getMSJSON(fi.getActionUrl("GetAccountDeleteReason","account",{area:"api"}),null,function(t){if(n._allAccountDeleteReasons=[{key:"0",DisplayText:f.PleaseSelect}],t.data&&t.data.length>0)for(var i=0;i<t.data.length;i++)n._allAccountDeleteReasons.push(t.data[i]);n._whyDeleteAccountCombo.setSource($.map(n._allAccountDeleteReasons,function(n){return n.DisplayText}));n._whyDeleteAccountCombo.setSelectedIndex(0,!1)},null,{wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:n._element.closest(".modal-dialog")}});$(ti("div")).appendTo(this._dataDivContent).addClass("delete-warning-warningtext").html(f.TypeInTheAccountName);this._accountUrlInputDiv=$(ti("div")).appendTo(this._dataDivContent);this._accountUrlInputTable=$(ti("table")).appendTo(this._accountUrlInputDiv).addClass("inputAccountUrl");this._accountUrlInputTableRow=$(ti("tr")).appendTo(this._accountUrlInputTable);this._accountUrl=$(ti("td")).appendTo(this._accountUrlInputTableRow).addClass("deleteaccountUrl-text").text(f.Account);this._newNameInput=$(ti("td")).appendTo(this._accountUrlInputTableRow).addClass("new-url-input");this._accountName=$(ti("input")).addClass("requiredInfoLight").addClass("textbox").attr("id","account-newname").attr("type","text").attr("maxlength",this._maxLength).appendTo(this._newNameInput);i=fi.navigation.publicAccessPoint.authority;$(ti("td")).appendTo(this._accountUrlInputTableRow).addClass("tfs-domain").text(i.substr(i.indexOf(".")))},t.prototype._whyDeleteAccountComboChanged=function(){var n=this._whyDeleteAccountCombo.getSelectedIndex(),t=n>0&&n<this._allAccountDeleteReasons.length?this._allAccountDeleteReasons[n].DisplayText:"";t===f.AccountDeleteReason6?this._whyDeleteAccountReasonDiv.show():this._whyDeleteAccountReasonDiv.hide()},t}(p.ModalDialogO);t.DeleteAccountDialog=ar;i.initClassPrototype(ar,{_data:null,_requestContext:null,_saveButton:null,_cancelButton:null,_closeButton:null,_wrapper:null,_dataDiv:null,_contentDescriptionElement:null});si=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({oldCustomText:null,defaultCustomText:null,showActions:!0,inputType:"text",editText:f.Edit},t))},t.prototype.initialize=function(){var t=this;n.prototype.initialize.call(this);this._isDirty=!1;this._isReset=!1;this._currentTextSpan=$(ti("span")).appendTo(this._element).addClass("custom-text");this._customTextInput=$(ti("input")).attr("type",this._options.inputType).attr("maxlength","256").appendTo(this._element).addClass("custom-text-input").keydown(function(){t._onInputKeyDown()}).keyup(function(){t._onInputKeyUp()});this._actionsControlDiv=$(ti("div")).appendTo(this._element).addClass("custom-text-actions");this._editAction=$(ti("a")).appendTo(this._actionsControlDiv).attr("href","#").text(this._options.editText).click(function(){t._onEditAction()});this._resetAction=$(ti("a")).appendTo(this._actionsControlDiv).attr("href","#").text(f.Reset).click(function(){t._onResetAction()});this._element.click(function(n){n.preventDefault();n.stopPropagation()});this._setCustomText(this._options.oldCustomText)},t.prototype.getCustomText=function(){return this._options.newCustomText},t.prototype.isDirty=function(){return this._isDirty},t.prototype.isReset=function(){return this._isReset},t.prototype._onInputKeyDown=function(n){n.keyCode===ut.KeyCode.ENTER&&(n.preventDefault(),n.stopPropagation(),this._hideEdit())},t.prototype._onInputKeyUp=function(){this._changeCustomText(this._customTextInput.val())},t.prototype._onEditAction=function(n){var t=this;this._showEdit();this._isDirty=!0;this._isReset=!1;$(document).bind("click.custom-text-edit",function(){t._hideEdit()});n.stopPropagation();n.preventDefault()},t.prototype._onResetAction=function(){this._isReset=!0;this._isDirty=!1;this._options.oldCustomText=null;$(document).unbind("click.custom-text-edit");this._setCustomText()},t.prototype._showEdit=function(){this._currentTextSpan.hide();this._customTextInput.val(this._options.newCustomText||this._options.defaultCustomText);this._customTextInput.show();this._customTextInput.focus();this._customTextInput.select();this._editAction.hide();this._options.showActions&&this._resetAction.show()},t.prototype._hideEdit=function(){$(document).unbind("click.custom-text-edit");this._setCustomText(this._customTextInput.val())},t.prototype._changeCustomText=function(n){n&&n!==this._options.defaultCustomText?(this._options.newCustomText=n,this._currentTextSpan.text(n)):(this._options.newCustomText="",this._currentTextSpan.text(this._options.defaultCustomText));this._element.trigger("change")},t.prototype._setCustomText=function(n){this._options.showActions&&this._editAction.show();this._resetAction.hide();this._changeCustomText(n);this._currentTextSpan.show();this._customTextInput.hide()},t._controlType="CustomTextInputControl",t}(y.BaseControl);i.initClassPrototype(si,{_actionsControlDiv:null,_currentTextSpan:null,_customTextInput:null,_editAction:null,_resetAction:null,_isDirty:null,_isReset:null});au=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype._setCustomText=function(t){n.prototype._setCustomText.call(this,t);t?this._editAction.removeClass("empty-input").text(f.Edit):this._editAction.addClass("empty-input").text(f.SetSecondaryUsername)},t}(si);bi=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({inputType:"password",editText:f.ChangePassword},t))},t.prototype.initialize=function(){this._defaultHtml="&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;";n.prototype.initialize.call(this)},t.prototype.showEdit=function(){this._showEdit()},t.prototype._changeCustomText=function(n){n&&n!==this._options.defaultCustomText?(this._options.newCustomText=n,this._currentTextSpan.html(this._defaultHtml)):(this._options.newCustomText="",this._currentTextSpan.html(this._defaultHtml));this._element.trigger("change")},t.prototype._showEdit=function(){this._currentTextSpan.hide();this._customTextInput.val("");this._customTextInput.show();this._customTextInput.focus();this._customTextInput.select();this._editAction.hide();this._options.showActions&&this._resetAction.show()},t._controlType="CustomPasswordInputControl",t}(si);i.initClassPrototype(bi,{_defaultHtml:null});yi=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype._addRow=function(n,t,i,r){var f,u;return f=$(ti("tr")).appendTo(r).bind("mouseover mouseout",function(n){n.type==="mouseover"?$(this).closest("table").find(".active").length===0&&$(this).addClass("hover"):$(this).removeClass("hover")}),u=$(ti("td")).appendTo(f).addClass("min-column-width"),$(ti("span")).appendTo(u).text(n),u=$(ti("td")).appendTo(f),t.appendTo(u),u=$(ti("td")).appendTo(f).addClass("min-column-width"),i&&$(ti("div")).appendTo(u).addClass("user-profile-hint").text(i),f},t._controlType="UserPaneBase",t}(y.BaseControl);vr=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this._currentIdentity=this._options.currentIdentity;this._customDisplayName=this._options.customDisplayName;this._providerDisplayName=this._options.providerDisplayName;this._preferredEmail=this._options.preferredEmail;this._defaultEmail=this._options.defaultEmail;this._themes=this._options.themes;this._originalTheme=this._options.originalTheme;this._decorate();this._populate()},t.prototype.getResults=function(){var n,t,f,r,i=!1,e=!1,u=!1,o,s;return n=this._customDisplayNameInput.getCustomText(),o=this._customDisplayNameInput.isDirty()||this._customDisplayNameInput.isReset(),o&&n!==this._customDisplayName&&(n===""&&this._customDisplayNameInput._customTextInput[0].value!==""&&(e=!0),i=!0),s=this._preferredEmailInput.isDirty()||this._preferredEmailInput.isReset(),t=this._preferredEmailInput.getCustomText(),s&&t!==this._preferredEmail&&(u=this._preferredEmailInput.isReset(),t===""&&this._preferredEmailInput._customTextInput[0].value!==""&&(u=!0),i=!0),f=this._themesCombo.getSelectedIndex(),r=this._themes[f].ThemeName,r!==this._originalTheme&&(i=!0),{isValid:!0,errorMessage:null,CustomDisplayName:n||undefined,PreferredEmail:t||undefined,Theme:r||undefined,isDirty:i,resetEmail:u,resetDisplayName:e}},t.prototype._decorate=function(){var r,i,n,t,u=this._options.isEmailConfirmationPending===!0;this._actionsControlDiv=$(ti("div")).appendTo(this._element);$(ti("div")).appendTo(this._element).addClass("user-profile-header").text(f.UserInformation);r=$(ti("div")).appendTo(this._element).addClass("properties-section user-profile-properties");i=$(ti("table")).appendTo(r);n=$(ti("tr")).appendTo(i);$(ti("td")).appendTo(n).text(f.DisplayName);t=$(ti("td")).appendTo(n).addClass("custom-text-input-cell");this._customDisplayInputDiv=$(ti("div")).appendTo(t);n=$(ti("tr")).appendTo(i);$(ti("td")).appendTo(n).text(f.PreferredEmail);t=$(ti("td")).appendTo(n).addClass("custom-text-input-cell");this._preferredEmailInputDiv=$(ti("div")).appendTo(t);u&&(n.closest("table").addClass("fit"),n.siblings().append("<td><\/td>"),n.addClass("pending"),t=$(ti("td")).appendTo(n).addClass("pending"),$(ti("span")).text(f.ConfirmationPendingMessage).appendTo(t),$(ti("span")).addClass("icon icon-warning").appendTo(t));$(ti("div")).appendTo(this._element).addClass("user-profile-header").text(f.UISettings);this._profileTable=$(ti("table")).appendTo(this._element).addClass("user-profile-table");this._themesElem=$(ti("div")).addClass("settings-combo");this._addRow(f.Theme,this._themesElem,f.ThemeHint,this._profileTable)},t.prototype._populate=function(){var t=this,i=0,n;for(y.BaseControl.createIn(w.MenuBar,this._actionsControlDiv,{items:[{id:"change-picture",text:f.ChangePicture}],executeAction:function(){p.show(li,{tfid:t._currentIdentity.TeamFoundationId,isGroup:t._currentIdentity.IdentityType!=="user"})},showIcon:!1,cssClass:"user-profile-change-picture-link"}),this._customDisplayNameInput=it.TfsContext.getDefault().isHosted&&this._customDisplayName!=null?y.Enhancement.enhance(si,this._customDisplayInputDiv,{oldCustomText:this._customDisplayName,defaultCustomText:this._customDisplayName}):y.Enhancement.enhance(si,this._customDisplayInputDiv,{oldCustomText:this._customDisplayName,defaultCustomText:this._providerDisplayName}),this._preferredEmailInput=y.Enhancement.enhance(si,this._preferredEmailInputDiv,{oldCustomText:this._preferredEmail,defaultCustomText:this._defaultEmail}),n=0;n<this._themes.length;n++)this._themes[n].ThemeName===this._originalTheme&&(i=n);this._themesCombo=y.BaseControl.createIn(k.Combo,this._themesElem,{source:$.map(this._themes,function(n){return n.DisplayName}),allowEdit:!1});this._themesCombo.setSelectedIndex(i,!0)},t._controlType="UserProfilePane",t}(yi);i.initClassPrototype(vr,{_actionsControlDiv:null,_currentIdentity:null,_customDisplayInputDiv:null,_customDisplayName:null,_defaultEmail:null,_originalTheme:null,_preferredEmail:null,_preferredEmailInput:null,_preferredEmailInputDiv:null,_profileTable:null,_providerDisplayName:null,_themes:null,_themesCombo:null,_themesElem:null,_customDisplayNameInput:null});yr=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this._timeZones=this._options.timeZones;this._originalTimeZone=this._options.originalTimeZone;this._cultures=this._options.cultures;this._originalCulture=this._options.originalCulture;this._originalDatePattern=this._options.originalDatePattern;this._originalTimePattern=this._options.originalTimePattern;this._originalCalendar=this._options.originalCalendar;this._decorate();this._populate()},t.prototype.getResults=function(){var t,i,r,u,f,n=!1,e,o,s,h,c;return e=this._timeZonesCombo.getSelectedIndex(),t=e===0?null:this._timeZones[e].Id,t!==this._originalTimeZone&&(n=!0),o=this._culturesCombo.getSelectedIndex(),i=o===0?null:this._cultures[o].LCID,i!==this._originalCulture&&(n=!0),s=this._calendarsCombo.getSelectedIndex(),r=s===0?null:this._calendars[s].DisplayName,r!==this._originalCalendar&&(n=!0),h=this._datePatternsCombo.getSelectedIndex(),u=h===0?null:this._datePatterns[h].Format,u!==this._originalDatePattern&&(n=!0),c=this._timePatternsCombo.getSelectedIndex(),f=c===0?null:this._timePatterns[c].Format,f!==this._originalTimePattern&&(n=!0),{isValid:!0,errorMessage:null,TimeZoneId:t||undefined,LCID:i||undefined,Calendar:r||undefined,DatePattern:u||undefined,TimePattern:f||undefined,isDirty:n}},t.prototype._decorate=function(){$(ti("div")).appendTo(this._element).addClass("user-profile-header").text(f.Settings);this._localeTable=$(ti("table")).appendTo(this._element).addClass("user-profile-table");this._culturesElem=$(ti("div")).addClass("settings-combo");this._addRow(f.Language,this._culturesElem,f.LanguageHint,this._localeTable);this._calendarsElem=$(ti("div")).addClass("settings-combo");this._calendarsRow=this._addRow(f.CalendarType,this._calendarsElem,f.CalendarTypeHint,this._localeTable);this._datePatternsElem=$(ti("div")).addClass("settings-combo");this._addRow(f.DateFormat,this._datePatternsElem,f.DateFormatHint,this._localeTable);this._timePatternsElem=$(ti("div")).addClass("settings-combo");this._addRow(f.TimeFormat,this._timePatternsElem,f.TimeFormatHint,this._localeTable);this._timeZonesElem=$(ti("div")).addClass("settings-combo");this._addRow(f.TimeZone,this._timeZonesElem,f.TimeZoneHint,this._localeTable)},t.prototype._populate=function(){var t=this,n,i=0,r=0,u=0,f=0,e=0;for(this._timeZonesCombo=y.BaseControl.createIn(k.Combo,this._timeZonesElem,{allowEdit:!1}),this._culturesCombo=y.BaseControl.createIn(k.Combo,this._culturesElem,{allowEdit:!1,change:function(n){var i=n.getSelectedIndex();t._changeCulture(i)}}),this._calendarsCombo=y.BaseControl.createIn(k.Combo,this._calendarsElem,{allowEdit:!1,change:function(n){var i=n.getSelectedIndex();t._changeCalendar(i)}}),this._datePatternsCombo=y.BaseControl.createIn(k.Combo,this._datePatternsElem,{allowEdit:!1}),this._timePatternsCombo=y.BaseControl.createIn(k.Combo,this._timePatternsElem,{allowEdit:!1}),this._timeZonesCombo.setSource($.map(this._timeZones,function(n){return n.DisplayName})),this._culturesCombo.setSource($.map(this._cultures,function(n){return n.DisplayName})),n=0;n<this._timeZones.length;n++)this._timeZones[n].Id===this._originalTimeZone&&(i=n);for(this._timeZonesCombo.setSelectedIndex(i,!0),n=0;n<this._cultures.length;n++)this._cultures[n].LCID===this._originalCulture&&(r=n);for(this._culturesCombo.setSelectedIndex(r,!0),n=0;n<this._calendars.length;n++)if(this._calendars[n].DisplayName===this._originalCalendar){u=n;break}for(this._calendarsCombo.setSelectedIndex(u,!0),n=0;n<this._datePatterns.length;n++)if(this._datePatterns[n].Format===this._originalDatePattern){f=n;break}for(this._datePatternsCombo.setSelectedIndex(f,!0),n=0;n<this._timePatterns.length;n++)if(this._timePatterns[n].Format===this._originalTimePattern){e=n;break}this._timePatternsCombo.setSelectedIndex(e,!0)},t.prototype._changeCulture=function(n){n===0?(this._calendarsCombo.setEnabled(!1),this._datePatternsCombo.setEnabled(!1),this._timePatternsCombo.setEnabled(!1)):(this._calendarsCombo.setEnabled(!0),this._datePatternsCombo.setEnabled(!0),this._timePatternsCombo.setEnabled(!0));this._calendars=this._cultures[n].OptionalCalendars;this._calendarsCombo.setSource($.map(this._calendars,function(n){return n.DisplayName}));this._calendarsCombo.setSelectedIndex(0,!1);this._changeCalendar(0);this._calendars.length===1?this._calendarsRow.hide():this._calendarsRow.show()},t.prototype._changeCalendar=function(n){var t=this._calendars[n];this._datePatterns=t.DateFormats;this._datePatternsCombo.setSource($.map(this._datePatterns,function(n){return n.DisplayFormat}));this._datePatternsCombo.setSelectedIndex(0,!0);this._timePatterns=t.TimeFormats;this._timePatternsCombo.setSource($.map(this._timePatterns,function(n){return n.DisplayFormat}));this._timePatternsCombo.setSelectedIndex(0,!0)},t._controlType="UserLocalePane",t}(yi);i.initClassPrototype(yr,{_calendars:null,_calendarsCombo:null,_calendarsElem:null,_calendarsRow:null,_cultures:null,_culturesCombo:null,_culturesElem:null,_datePatterns:null,_datePatternsCombo:null,_datePatternsElem:null,_localeTable:null,_originalCalendar:null,_originalCulture:null,_originalDatePattern:null,_originalTimePattern:null,_originalTimeZone:null,_timePatterns:null,_timePatternsCombo:null,_timePatternsElem:null,_timeZones:null,_timeZonesCombo:null,_timeZonesElem:null});vu=function(){function n(){}return n}();t.PublicKeyModel=vu;pr=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this._decorate();this._populate()},t.prototype.getResults=function(){var n;return this._keyDescription.val()!==""&&(n={},n.Description=this._keyDescription.val(),n.Data=this._keyData.val()),n},t.prototype._hideForm=function(){this._addKeyTable.hide();this._primaryKeyPane.show()},t.prototype._showForm=function(){this._primaryKeyPane.hide();this._addKeyTable.show()},t.prototype._removeKey=function(n){var t=this,i=hi.getActionUrl(this._options.tfsContext,"Revoke")+"&authorizationId="+n,r=ft.beginRequest(i,null,{wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:t._element}});$.ajax(i,{type:"DELETE",success:function(n){ft.endRequest(n,null,null,null,r);t._populateKeyTable()},error:function(n){ft.endRequest(null,null,null,null,r);t._options.errorPane.setError(n)}})},t.prototype._constructPublicKeyRow=function(n){var t=this;return $(ti("tr")).append($(ti("td")).addClass("key-name").text(n.Description)).append($(ti("td")).addClass("key-fingerprint").text(n.Fingerprint)).append($(ti("td")).addClass("key-remove").text(f.Remove).click(function(){t._removeKey(n.AuthorizationId)}))},t.prototype._populateKeyTable=function(){var n=this,t=new Date;ft.getMSJSON(hi.getActionUrl(n._options.tfsContext,"List"),{_t:t.getTime()},function(t){var r=n._keysBody.html(""),i;if(t&&t!=null)for(i=0;i<t.length;i++)r.append(n._constructPublicKeyRow(t[i]))},function(t){n._options.errorPane.setError(t)},{wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:n._element}})},t.prototype._decorate=function(){var n=this;this._primaryKeyPane=$(ti("div")).appendTo(this._element);this._sshFingerprintHeader=$(ti("div")).appendTo(this._primaryKeyPane).addClass("user-profile-header");this._sshFingerprintMsg=$(ti("div")).appendTo(this._primaryKeyPane).addClass("ssh-fingerprint-msg");this._fingerprintPane=$(ti("div")).appendTo(this._primaryKeyPane);$(ti("div")).appendTo(this._primaryKeyPane).addClass("user-profile-header").text(f.YourPublicKeys);this._keysDescription=$(ti("div")).appendTo(this._primaryKeyPane).addClass("keys-description").text(f.PublicKeysDescription);$(ti("a")).appendTo(this._keysDescription).addClass("learn-more").attr("href",f.PublicKeysLearnMoreLink).attr("target","_blank").text(f.PublicKeysLearnMoreText);this._keysBody=$(ti("div")).appendTo(this._primaryKeyPane).addClass("keys-body").text("Placeholder");$(ti("div")).appendTo(this._primaryKeyPane).addClass("action").text(f.AddSshKey).click(function(){n._showForm()});this._addKeyTable=$(ti("table")).appendTo(this._element).addClass("add-key-table").hide();this._keyDescription=$(ti("input")).attr("type","text").addClass("keys-description-text custom-text-input");this._addRow(f.Description,this._keyDescription,null,this._addKeyTable);this._keyData=$(ti("textarea")).addClass("keys-value-text custom-text-input");this._addRow(f.KeyData,this._keyData,null,this._addKeyTable);this._addKeyTable.append($(ti("div")).addClass("action hide-form").text(f.Back).click(function(){n._hideForm();n._keyDescription.val("");n._keyData.text("")}))},t.prototype._populate=function(){this._keyDescription.val("");this._keyData.text("");this._populateKeyTable();this._getServerFingerprint()},t.prototype._getServerFingerprint=function(){var n=this,t=new Date;ft.getMSJSON(hi.getActionUrl(n._options.tfsContext,"GetServerFingerprint"),{_t:t.getTime()},function(t){var i=n._fingerprintPane.html(""),r,u;t&&t[0]&&t[0].Fingerprint&&(r=c.format(f.SshServerFingerprint,t[0].HashAlgorithm,t[0].Fingerprint,t[0].Encryption),i.append(r));t&&t[1]&&t[1].Fingerprint&&(u=c.format(f.SshServerFingerprint,t[1].HashAlgorithm,t[1].Fingerprint,t[1].Encryption),i.append(u));i.html()&&(n._sshFingerprintHeader.text(f.ServerFingerprint),n._sshFingerprintMsg.text(f.SshFingerprintMessage))},null,{wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:n._fingerprintPane}})},t._controlType="SshKeysPane",t}(yi);i.initClassPrototype(pr,{});wr=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this._accountName=this._options.accountName;this._configured=this._options.isConfigured;this._disabled=this._options.isDisabled;this._username=this._options.username;this._disabledOnAccount=this._options.isDisabledOnAccount;this._configured&&(this._password="************");this._decorate();this._populate()},t.prototype._checkPasswordStrength=function(n){for(var s,r=!1,u=!1,f=!1,e=!1,i=0;i<n.length;++i){var t=n.charAt(i),o=t.toUpperCase(),h=t.toLowerCase();t>="0"&&t<="9"?r=!0:t==o&&t==h?e=!0:t==o?u=!0:f=!0}return s=(r?1:0)+(u?1:0)+(f?1:0)+(e?1:0),n.length>=8&&n.length<=32&&s>=3},t.prototype.getResults=function(){var r=this._usernameInput.getCustomText(),n=this._customPasswordInput.getCustomText(),u=this._customConfirmPasswordInput.getCustomText(),t=!0,i=null;return this._configured&&(this._customPasswordInput.isDirty()||this._customConfirmPasswordInput.isDirty()||this._configured!==this._options.isConfigured)?u!==n?(t=!1,i=f.PasswordsDoNotMatchErrorMessage):this._checkPasswordStrength(n)||(t=!1,i=f.WeakPasswordErrorMessage):n=null,{isValid:t,errorMessage:i,isDirty:this._configured!==this._options.isConfigured||this._disabled!==this._options.isDisabled||r!==this._username||this._customPasswordInput.isDirty(),basicAuthenticationConfigured:this._configured,basicAuthenticationUsername:r||undefined,basicAuthenticationPassword:n,basicAuthenticationDisabled:this._disabled}},t.prototype._decorate=function(){var t=this,n;this._disabledOnAccountWarning=$(ti("div")).appendTo(this._element).addClass("user-profile-basic-auth-disabled-on-account-warning").hide();this._disabledOnAccount&&this._disabledOnAccountWarning.show();$(ti("div")).appendTo(this._disabledOnAccountWarning).text(f.BasicAuthDisabledOnAccount);$(ti("div")).appendTo(this._element).addClass("user-profile-header").text(f.CredentialsHeader);this._credentialsBody=$(ti("div")).appendTo(this._element);this._credentialsDisabledBody=$(ti("div")).appendTo(this._element);this._disabled?this._credentialsBody.hide():this._credentialsDisabledBody.hide();$(ti("div")).appendTo(this._credentialsBody).addClass("credentials-body").html(f.CredentialsExplanation);this._credentialsTable=$(ti("table")).appendTo(this._credentialsBody).addClass("user-profile-table");this._accountNameElem=$(ti("div")).addClass("credentials-username-text");this._addRow(f.CredentialsUsernamePrimary,this._accountNameElem,null,this._credentialsTable);this._usernameElem=$(ti("div"));this._addRow(f.CredentialsUsernameSecondary,this._usernameElem,null,this._credentialsTable);this._passwordElem=$(ti("div")).addClass("custom-text-input-cell");this._addRow(f.CredentialsPassword,this._passwordElem,null,this._credentialsTable);this._confirmPasswordElem=$(ti("div")).addClass("custom-text-input-cell");this._addRow(f.CredentialsConfirmPassword,this._confirmPasswordElem,null,this._credentialsTable);n=$(ti("div")).appendTo(this._credentialsBody).addClass("credentials-enable-link");this._enableElem=$(ti("a")).appendTo(n).attr("href","#").text(f.CredentialsEnable).click(function(){t._onEnableAction()});$(ti("div")).appendTo(this._credentialsDisabledBody).addClass("credentials-body").text(f.BasicAuthDisabled);n=$(ti("div")).appendTo(this._credentialsDisabledBody).addClass("credentials-enable-link");$(ti("a")).appendTo(n).attr("href","#").text(f.BasicAuthEnableCredentials).click(function(){t._onEnableDisabledAccount()})},t.prototype._populate=function(){this._accountNameElem.text(this._accountName);this._usernameInput=y.Enhancement.enhance(au,this._usernameElem,{oldCustomText:this._username,defaultCustomText:""});this._customPasswordInput=y.Enhancement.enhance(bi,this._passwordElem,{oldCustomText:this._password,defaultCustomText:this._password,showActions:this._configured});this._customConfirmPasswordInput=y.Enhancement.enhance(bi,this._confirmPasswordElem,{oldCustomText:this._password,defaultCustomText:this._password,showActions:this._configured});this._configuredChanged()},t.prototype._onEnableDisabledAccount=function(){return this._disabled=!1,this._credentialsBody.show(),this._credentialsDisabledBody.hide(),this._element.trigger("change"),!1},t.prototype._onEnableAction=function(){return this._configured?this._configured=!1:(this._configured=!0,this._customPasswordInput.showEdit(),this._customConfirmPasswordInput.showEdit()),this._configuredChanged(),!1},t.prototype._configuredChanged=function(){this._configured?(this._credentialsTable.show(),this._enableElem.text(f.CredentialsDisable),this._element.trigger("change")):(this._credentialsTable.hide(),this._enableElem.text(f.CredentialsEnable),this._element.trigger("change"))},t._controlType="UserCredentialsPane",t}(yi);i.initClassPrototype(wr,{_credentialsTable:null,_credentialsBody:null,_credentialsDisabledBody:null,_usernameElem:null,_passwordElem:null,_customPasswordInput:null,_enableElem:null,_username:null,_password:null,_configured:null,_disabled:null,_disabledOnAccount:null});ki=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);var t=this;ft.getMSJSON(t._options.tfsContext.getActionUrl("GetUserProfile","common",{area:"api"}),{},function(n){t._currentIdentity=n.identity;t._basicAuthEnabled=n.basicAuthenticationEnabled;t._sshInstalled=n.sshEnabled;t._decorate();t._populate(n);t._element.trigger("change")},null,{wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:t._element.closest(".modal-dialog")}})},t.prototype._decorate=function(){this._element.css("position","relative");this._identityHeader=$(ti("div")).appendTo(this._element);y.BaseControl.createIn(lu,this._identityHeader,{header:this._currentIdentity.FriendlyDisplayName,subHeader:this._currentIdentity.Domain+"\\"+this._currentIdentity.AccountName,teamFoundationId:this._currentIdentity.TeamFoundationId});var n,u,e,o,r,t,s=this;n=this.getId();u="profile_"+n;e="locale_"+n;o="ssh_"+n;r="credentials_"+n;this._tabsControlDiv=$(ti("div")).appendTo(this._element);t=$(ti("ul")).appendTo(this._tabsControlDiv);this._errorPane=y.BaseControl.createIn(b.MessageAreaControl,this._tabsControlDiv);this._profileContent=$(ti("div")).attr("id",u).appendTo(this._tabsControlDiv);this._localeContent=$(ti("div")).attr("id",e).appendTo(this._tabsControlDiv);this._tabsControlDiv.tabs({select:function(){s._errorPane.clear()}});t.append($('<li><a href="#'+u+'">'+f.General+"<\/a><\/li>"));t.append($('<li><a href="#'+e+'">'+f.Locale+"<\/a><\/li>"));this._basicAuthEnabled&&(this._credentialsContent=$(ti("div")).attr("id",r).appendTo(this._tabsControlDiv),t.append($('<li><a href="#'+r+'">'+f.Credentials+"<\/a><\/li>")),this._options.startOnCredentialsTab&&(this._tabsControlDiv.tabs("refresh"),this._tabsControlDiv.tabs("option","active",this._tabIdToindex(this._tabsControlDiv,"#"+r))));this._options.tfsContext.isHosted&&(t.append($('<li><a href="'+this._options.tfsContext.getActionUrl("ManageTokens","oauth",{area:"api"})+'">'+f.Connections+"<\/a><\/li>")),this._tabsControlDiv.tabs("option",{load:function(n,t){i.using(["OAuth/Scripts/TFS.OAuth.Controls"],function(){y.Enhancement.ensureEnhancements(t.panel)})},cache:!0}));this._tabsControlDiv.tabs("option","active")||(this._tabsControlDiv.tabs("refresh"),this._tabsControlDiv.tabs("option","active",0))},t.prototype._populate=function(n){this._profilePane=y.BaseControl.createIn(vr,this._profileContent,{currentIdentity:this._currentIdentity,customDisplayName:n.userPreferences.CustomDisplayName,providerDisplayName:n.providerDisplayName,preferredEmail:n.userPreferences.PreferredEmail,isEmailConfirmationPending:n.userPreferences.IsEmailConfirmationPending,defaultEmail:n.defaultMailAddress,themes:n.allThemes,originalTheme:n.userPreferences.Theme});this._localePane=y.BaseControl.createIn(yr,this._localeContent,{timeZones:n.allTimeZones,cultures:n.allCultures,originalTimeZone:n.userPreferences.TimeZoneId,originalCulture:n.userPreferences.LCID,originalCalendar:n.userPreferences.Calendar,originalDatePattern:n.userPreferences.DatePattern,originalTimePattern:n.userPreferences.TimePattern});this._sshInstalled&&(this._sshKeysPane=y.BaseControl.createIn(pr,this._sshKeysContent,{tfsContext:this._options.tfsContext,errorPane:this._errorPane}));this._basicAuthEnabled&&(this._credentialsPane=y.BaseControl.createIn(wr,this._credentialsContent,{accountName:this._currentIdentity.AccountName,username:n.userPreferences.BasicAuthenticationUsername,isConfigured:n.userPreferences.BasicAuthenticationConfigured,isDisabled:n.userPreferences.BasicAuthenticationDisabled,isDisabledOnAccount:n.userPreferences.BasicAuthenticationDisabledOnAccount}));this._element.find(".combo").bind("focusin focusout",function(n){n.type==="focusin"?$(n.target).closest("tr").addClass("active"):$(n.target).closest("tr").removeClass("active")})},t.prototype._getPendingKeyAdd=function(){if(this._sshKeysPane){var n=this._sshKeysPane.getResults();if(n)return n}return null},t.prototype._getDiff=function(){var t,i,r,n;return this._profilePane&&this._localePane?(t=this._profilePane.getResults(),i=this._localePane.getResults(),this._basicAuthEnabled&&this._credentialsPane&&(r=this._credentialsPane.getResults()),t.isDirty||i.isDirty||r&&r.isDirty?(n=$.extend(t,i,r),n.isDirty=!0,t.isValid?i.isValid||(n.isValid=i.isValid,n.errorMessage=i.errorMessage):(n.isValid=t.isValid,n.errorMessage=t.errorMessage),n):null):null},t.prototype._tabIdToindex=function(n,t){for(var r=-1,u=n.find("li a"),i=0;i<u.length;i++)$(u[i]).attr("href").search(t)>0&&(r=i);return r},t._controlType="UserProfileControl",t}(y.BaseControl);i.initClassPrototype(ki,{_currentIdentity:null,_errorPane:null,_identityHeader:null,_localeContent:null,_localePane:null,_credentialsContent:null,_credentialsPane:null,_profileContent:null,_profilePane:null,_tabsControlDiv:null,_basicAuthEnabled:null});i.classExtend(ki,ri.ControlExtensions);di=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){var i=this;n.prototype.initializeOptions.call(this,$.extend({cssClass:"admin-dialog",resizable:!0,width:600,height:500,minWidth:600,minHeight:300,title:f.UserProfile,buttons:{saveButton:{id:"ok",text:f.SaveChanges,disabled:!0,click:function(){i._onSaveAction()}},cancelButton:{id:"cancel",text:f.Cancel,click:function(){i.onCancelClick()}}}},t))},t.prototype.initialize=function(){var t=this;n.prototype.initialize.call(this);this._element.focus();this._element.bind("change",function(){t._updateSaveButton()});this._userProfileControl=y.Enhancement.enhance(ki,this._element,$.extend({},this._options.profileOptions))},t.prototype.setError=function(n){this._userProfileControl._errorPane.setError(n)},t.prototype._onSaveAction=function(){this.updateOkButton(!1);var n=this._userProfileControl._getDiff(),i=this._userProfileControl._getPendingKeyAdd(),t=this;i&&ft.postMSJSON(hi.getActionUrl(this._options.tfsContext,"Edit"),i,function(){t._userProfileControl._sshKeysPane._hideForm();t._userProfileControl._sshKeysPane._populateKeyTable()},function(n){t.setError(n.message)},{wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:this._element}});n&&(n.isValid?ft.postHTML(this._options.tfsContext.getActionUrl("UpdateUserProfile","common",{area:"api"}),{updatePackage:h.stringifyMSJSON(n)},function(){window.location.reload()},function(n){t.setError(n.message)},{wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:this._element}}):this.setError(n.errorMessage))},t.prototype._updateSaveButton=function(){this._userProfileControl._getDiff()||this._userProfileControl._getPendingKeyAdd()?this.updateOkButton(!0):this.updateOkButton(!1)},t._controlType="UserProfileDialog",t}(p.ModalDialogO);t.UserProfileDialog=di;i.initClassPrototype(di,{_userProfileControl:null});i.classExtend(di,ri.ControlExtensions);br=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){var i;i=it.TfsContext.getDefault().isHosted?{contentHeader:f.AddMemberHeaderHosted,contentDescription:f.AddMemberDescriptionHosted}:{contentHeader:f.AddMemberHeaderOnPremise,contentDescription:f.AddMemberDescriptionOnPremise};n.prototype.initializeOptions.call(this,$.extend(i,t))},t.prototype.initialize=function(){var t=this;n.prototype.initialize.call(this)},t}(oi);t.AddUserDialog=br;kr=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({contentHeader:it.TfsContext.getDefault().isHosted?f.AddGroupHeaderHosted:f.AddGroupHeaderOnPremise,contentDescription:it.TfsContext.getDefault().isHosted?f.AddGroupDescriptionHosted:f.AddGroupDescriptionOnPremise,browseGroups:!0},t))},t}(oi);t.AddGroupDialog=kr;dr=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({contentHeader:f.ADDANAADGROUP,contentDescription:f.TypeAADGroupName,browseAadGroups:!0},t))},t}(oi);t.AddAadGroupDialog=dr;gr=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({contentHeader:it.TfsContext.getDefault().isHosted?f.JoinGroupHeaderHosted:f.JoinGroupHeaderOnPremise,contentDescription:it.TfsContext.getDefault().isHosted?f.JoinGroupDescriptionHosted:f.JoinGroupDescriptionOnPremise,browseGroups:!0,joinGroups:!0},t))},t}(oi);t.JoinGroupDialog=gr;nu=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){var i;i={};t&&t.browseGroups?it.TfsContext.getDefault().isHosted?(i.contentHeader=f.AddGroupHeaderHosted,i.contentDescription=f.AddGroupPermissionsDescriptionHosted):(i.contentHeader=f.AddGroupHeaderOnPremise,i.contentDescription=f.AddGroupPermissionsDescriptionOnPremise):i.contentDescription=it.TfsContext.getDefault().isHosted?f.AddMemberPermissionsDescriptionHosted:f.AddMemberPermissionsDescriptionOnPremise;i.cssClass="add-permissions-host";i.allowMultiSelect=!1;i.tableLabel=f.AddPermissionsUserTableText;t.tfsContext||(t.tfsContext=fi);n.prototype.initializeOptions.call(this,$.extend(i,t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);v.logTracePoint("AddMembersForPermissionsDialog.OpenDialog")},t.prototype._decorate=function(){n.prototype._decorate.call(this);this._errorPane=y.BaseControl.createIn(b.MessageAreaControl,this._dataDiv)},t.prototype._saveIdentities=function(){var t,n=this,i=this._getPendingChanges();t={newUsersJson:h.stringifyMSJSON(i.newUsers),existingUsersJson:h.stringifyMSJSON(i.existingUsers)};this._requestContext=ft.postMSJSON(this._options.tfsContext.getActionUrl("AddIdentityForPermissions","security",{area:"api"}),t,function(t){var r,i,u=!1,f;for(tt.AdminUIHelper.adminUIFeatureFlagEnabled?n._options.identitySearchControl.clear():n._options.identitySearchControl.cancelSearch(),i=n._options.identityGrid,f=t.AddedIdentity.TeamFoundationId===tt.EmptyGuidString,r=0;r<i._dataSource.length;r++)if(t.AddedIdentity.IdentityType==="InternetIdentity"||f){if(i._dataSource[r][0].DisplayName===t.AddedIdentity.DisplayName&&i._dataSource[r][0].TeamFoundationId===t.AddedIdentity.TeamFoundationId){u=!0;break}}else if(i._dataSource[r][0].TeamFoundationId===t.AddedIdentity.TeamFoundationId){u=!0;break}u?i.setSelectedRowIndex(r):(i._originalData.unshift([t.AddedIdentity]),i._options.source=i._originalData,i._options.identityToSelect=t.AddedIdentity.TeamFoundationId,i.treeStructure=null,i.initializeDataSource());n._element.dialog("close")},function(t){n._errorPane.setError(t.message)},{tracePoint:"AddIdentityDialog.SaveChanges.Success",wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:this._element.closest(".ui-dialog")}})},t}(vi);t.AddMembersForPermissionsDialog=nu;i.initClassPrototype(nu,{_errorPane:null});tu=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({cssClass:"add-team-admin-host"},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);v.logTracePoint("AddTeamAdminDialog.OpenDialog")},t.prototype._saveIdentities=function(){var n=this,t=this._getPendingChanges();this._requestContext=ft.postMSJSON(this._options.tfsContext.getActionUrl("AddTeamAdmins","identity",{area:"api"}),{teamId:this._options.joinToGroupTfid,newUsersJson:h.stringifyMSJSON(t.newUsers),existingUsersJson:h.stringifyMSJSON(t.existingUsers)},function(t){if(t)if(t.admins&&n._options&&n._options.successCallback&&$.isFunction(n._options.successCallback)&&n._options.successCallback.call(n,t.admins),t.membershipModel&&t.membershipModel.HasErrors){$(".admin-dialog",n._element).empty();var i=!1;it.TfsContext.getDefault().isHosted&&t.membershipModel.AADErrors.length>0&&t.membershipModel.GeneralErrors.length==0?y.BaseControl.createIn(b.MessageAreaControl,$(".admin-dialog",n._element),{closeable:!1,expanded:!0,showDetailsLink:!1,showHeader:!1,message:{header:"",content:tt.parseErrors(t.membershipModel),type:b.MessageAreaType.Warning}}):i=!0;i&&y.BaseControl.createIn(b.MessageAreaControl,$(".admin-dialog",n._element),{closeable:!1,expanded:!0,message:{header:f.ErrorAddingTeamAdmin,content:tt.parseErrors(t.membershipModel)}});n._element.dialog("option","buttons",[n._closeButton]);v.logTracePoint("AddIdentityDialog.SaveChanges.Error");v.logTracePoint("Dialog.initialize.complete")}else v.logTracePoint("AddIdentityDialog.SaveChanges.Success"),v.logTracePoint("AddIdentityDialog.CloseDialog"),n.close()},null,{wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:this._element.closest(".ui-dialog")}})},t}(vi);t.AddTeamAdminDialog=tu;i.classExtend(tu,ri.ControlExtensions);gi=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({identityType:{User:!0,Group:!0},operationScope:this._isHosted?{IMS:!0}:{IMS:!0,AD:!0,WMD:!0},consumerId:tt.AdminUIHelper.ADD_TEAM_ADMIN_DIALOG_CONSUMER_ID,tableLabel:f.AddUserTableText,contentDescription:f.TeamAdminIdentityPickerDialog_SearchInstructions},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this)},t.prototype.saveIdentities=function(){var n=this,t=this._getPendingChanges();this._requestContext=ft.postMSJSON(this._options.tfsContext.getActionUrl("AddTeamAdmins","identity",{area:"api"}),{teamId:this._options.joinToGroupTfid,newUsersJson:h.stringifyMSJSON(t.newUsers),existingUsersJson:h.stringifyMSJSON(t.existingUsers)},function(t){t&&(t.admins&&t.admins.length&&n._options&&n._options.successCallback&&$.isFunction(n._options.successCallback)&&n._options.successCallback.call(n,t.admins),t.membershipModel&&t.membershipModel.HasErrors?($(".message-area-control",n._element).remove(),y.BaseControl.createIn(b.MessageAreaControl,$(".admin-dialog",n._element),{closeable:!1,expanded:!0,message:{header:f.ErrorAddingTeamAdmin,content:tt.parseErrors(t.membershipModel)},prepend:!0}),ui(n._element,[n._saveButton,n._closeButton]),v.logTracePoint("IdentityPickerTeamAdminDialog.SaveChanges.Error"),v.logTracePoint("Dialog.initialize.complete")):(v.logTracePoint("IdentityPickerTeamAdminDialog.SaveChanges.Success"),v.logTracePoint("IdentityPickerTeamAdminDialog.CloseDialog"),n.close()))},null,{wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:this._element.closest(".ui-dialog")}})},t.prototype._getPendingChanges=function(){var f=this,n=[],t=[],i=new tt.WindowsUsersAndGroups,r=this._identityPickerSearchControl.getIdentitySearchResult(),u;return r.resolvedEntities.forEach(function(r){tt.AdminUIHelper.isOriginFrom(r,tt.AdminUIHelper.VISUAL_STUDIO_DIRECTORY_KEY)?t.push(r.localId):tt.AdminUIHelper.isOriginFrom(r,tt.AdminUIHelper.AZURE_ACTIVE_DIRECTORY_KEY)&&n.push(r.signInAddress);i.tryAddUserOrGroupIfValid(r)}),this._isHostedMsaAccount&&(u=$("input",this.getElement()).val().trim(),n=n.concat(r.unresolvedQueryTokens).concat(u?[u]:[])),r.resolvedEntities.forEach(function(n){n.localId&&f._identityPickerSearchControl.addIdentitiesToMru([n])}),i.getAllExistingUsersLocalIds().forEach(function(n){t.push(n)}),i.getAllNewUsersSamAccountNames().forEach(function(t){n.push(t)}),{newUsers:n,existingUsers:t}},t}(ci);t.IdentityPickerTeamAdminDialog=gi;i.initClassPrototype(gi,{_$data:null,_$wrapper:null,_$contentDescriptionElement:null,_identityPickerSearchControl:null,_saveButton:null,_$dataDiv:null,_cancelButton:null,_closeButton:null,_requestContext:null});i.classExtend(gi,ri.ControlExtensions);yu=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){var i=this;n.prototype.initializeOptions.call(this,$.extend({cssClass:"admin-dialog",url:fi.getActionUrl("TracePermission","security",{area:"api",includeLanguage:!0}),width:650,minWidth:550,height:550,minHeight:450,open:function(){v.logTracePoint("TracePermissionDialog.OpenDialog")},buttons:[{id:"closeButton",text:f.Close,click:function(){i.onCancelClick()}}],close:function(){v.logTracePoint("TracePermissionDialog.CloseDialog")},title:c.htmlEncode(f.TracePermissionDialogTitle)},t))},t._controlType="TracePermissionDialog",t}(p.ModalDialog);t.TracePermissionDialog=yu;iu=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){var i=this;n.prototype.initializeOptions.call(this,$.extend({cssClass:"admin-dialog",width:650,minWidth:550,height:550,minHeight:450,open:function(){v.logTracePoint("TraceLicenseDialog.OpenDialog")},buttons:[{id:"closeButton",text:f.Close,click:function(){i.onCancelClick()}}],close:function(){v.logTracePoint("TraceLicenseDialog.CloseDialog")},title:f.TraceLicenseDialogTitle},t))},t.prototype.initialize=function(){this._options.url=this._options.tfsContext.getActionUrl("Trace","licenses",{area:"api",serviceHost:null,project:null,team:null});this._options.urlParams={teamFoundationId:this._options.tfid};n.prototype.initialize.call(this)},t._controlType="TraceLicenseDialog",t}(p.ModalDialogO);t.TraceLicenseDialog=iu;i.classExtend(iu,ri.ControlExtensions);li=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){var i=this;n.prototype.initializeOptions.call(this,$.extend({width:450,height:350,minWidth:450,minHeight:350,imageSize:2,open:function(){v.logTracePoint("ChangeImageDialog.OpenDialog")},beforeClose:function(){return!this._requestContext||this._requestContext.isComplete},close:function(){v.logTracePoint("ChangeImageDialog.CloseDialog")},buttons:{saveButton:{id:"btnChangeImage",text:c.htmlEncode(f.SaveChanges),disabled:!0,click:function(){i._onSaveAction()}},cancelButton:{id:"btnCancel",text:c.htmlEncode(f.Cancel),click:function(){i._onCancelAction()}}},title:c.htmlEncode(f.ProfileImage)},t))},t.prototype.initialize=function(){var t=this;this._options.url=this._options.tfsContext.getActionUrl("ChangeImage","image",{area:"api"});this._options.urlParams={id:this._options.tfid};this._options.success=function(n){t._populateDialog(n)};n.prototype.initialize.call(this)},t.prototype._onSaveAction=function(){var i=$("#actionIdHidden").val(),r=this._options.tfid,t,n=this;t=i==="reset"?this._options.tfsContext.getActionUrl("RemoveImage","image",{area:"api"}):this._options.tfsContext.getActionUrl("CommitCandidateImage","image",{area:"api"});this._requestContext=ft.postHTML(t,{tfid:r},function(){it.setImageTimestamp();var t=n._options.tfsContext.getIdentityImageUrl(n._options.tfid,{size:n._options.imageSize});$("img.identity-"+n._options.tfid).attr("src",t);n._element.dialog("close")},function(t){n._errorPane.setError(t.message)},{tracePoint:"ChangeImageDialog.SaveChanges.Success",wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:n._element}})},t.prototype._onCancelAction=function(){var t=this._options.tfid,n=this;$("#imageUploadedHidden").val()?this._requestContext=ft.postHTML(this._options.tfsContext.getActionUrl("CancelImageUpload","image",{area:"api"}),{tfid:t},function(){n._element.dialog("close")},function(t){n._errorPane.setError(t.message)},{tracePoint:"ChangeImageDialog.CancelChanges.Success",wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:n._element}}):this._element.dialog("close")},t.prototype._populateDialog=function(){var n=this;this._errorPane=y.Enhancement.enhance(b.MessageAreaControl,$(".change-image-error-pane",this._element));$("#idImage",this._element).bind("propertychange change",function(){var t;$("#idImage").val()&&($(".image-upload-div").addClass("loading"),$("#btnChangeImage").button("disable"),n._errorPane.clear(),t=$("#frmImageUpload"),ft.setAntiForgeryToken(t),t.submit())});$(".profile-image-reset",this._element).click(function(){return n._element.find("#idImage").val(""),n._element.find("#actionIdHidden").val("reset"),n._element.find(".preview-image").attr("src",n._options.isGroup?ii.getResourcesFile("Team.svg"):ii.getResourcesFile("User.svg")),n._element.siblings(".ui-dialog-buttonpane").find("#"+n._options.buttons.saveButton.id).button("enable"),!1})},t._controlType="ChangeImageDialog",t}(p.ModalDialogO);t.ChangeImageDialog=li;i.initClassPrototype(li,{_errorPane:null,_requestContext:null});i.classExtend(li,ri.ControlExtensions);pu=function(){function n(n,t){var i,r;$(".image-upload-div").removeClass("loading");t?($("#btnChangeImage").button("disable"),i=y.Enhancement.enhance(b.MessageAreaControl,$(".change-image-error-pane")),i.setError(c.htmlDecode(t))):(r=it.TfsContext.getDefault().getIdentityImageUrl(n,{previewCandidateImage:!0,t:$.now()}),$("#btnChangeImage").button("enable"),$(".preview-image").attr("src",r),$("#imageUploadedHidden").val("true"),$("#actionIdHidden").val("1"))}return n}();t.ImageUploadComplete=pu;nr=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){var i=this;n.prototype.initializeOptions.call(this,$.extend({resizable:!1,width:450,height:250,minWidth:400,minHeight:200,modal:!0,open:function(){v.logTracePoint("DeleteIdentityDialog.OpenDialog")},beforeClose:function(){i._beforeClose()},close:function(){v.logTracePoint("DeleteIdentityDialog.CloseDialog")},title:t.titleText},t))},t.prototype.initialize=function(){var u,e;n.prototype.initialize.call(this);var t=$(ti("div")).appendTo(this._element).addClass("admin-dialog").attr("id","delete-identity-dialog"),i=$(ti("table")).appendTo(t).addClass("ui-dialog-warning-header"),r=$(ti("tr")).appendTo(i),o=$(ti("td")).appendTo(r).addClass("ui-dialog-warning-header-img");$("<span/>").appendTo(o).addClass("ui-dialog-warning-icon");u=$(ti("td")).appendTo(r).addClass("ui-dialog-warning-header-txt");$(ti("div")).appendTo(u).text(f.CannotBeUndone);t.append(i);e=$("<p>").html(this._options.bodyText).addClass("ui-dialog-warning-body");t.append(e);this._initializeButtons();this.$removeButton.focus()},t.prototype._initializeButtons=function(){var n=this;this._closeButton={id:"exitDialog",text:c.htmlEncode(f.Close),click:function(){$(this).dialog("close")}};this._cancelButton={id:"cancel",text:c.htmlEncode(f.Cancel),click:function(){$(this).dialog("close")}};this._removeButton={id:"removeGroup",text:this._options.deleteButtonText,"class":"warning",click:function(){n._removeIdentity()}};ui(this._element,[this._removeButton,this._cancelButton]);this.$removeButton=this._element.siblings(".ui-dialog-buttonpane").find("#removeGroup")},t.prototype._beforeClose=function(){return!this._requestContext||this._requestContext.isComplete},t.prototype._removeIdentity=function(){var n=this;this._requestContext=ft.postHTML(this._options.tfsContext.getActionUrl("DeleteIdentity","identity",{area:"api"}),{tfid:this._options.tfid},function(){$.isFunction(n._options.successCallback)&&n._options.successCallback.call(n);n._element.dialog("close")},function(t){$(".admin-dialog",n._element).empty();y.BaseControl.createIn(b.MessageAreaControl,$(".admin-dialog",n._element),{closeable:!1,message:t.message});n._element.dialog("option","buttons",[n._closeButton])},{tracePoint:"DeleteIdentityDialog.DeleteIdentity.Success",wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:this._element.closest(".ui-dialog")}})},t._controlType="DeleteIdentityDialog",t}(p.ModalDialogO);t.DeleteIdentityDialog=nr;i.initClassPrototype(nr,{_requestContext:null,_closeButton:null,_cancelButton:null,_removeButton:null,$removeButton:null});i.classExtend(nr,ri.ControlExtensions);tr=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){var i=this;n.prototype.initializeOptions.call(this,$.extend({resizable:!1,width:450,height:250,minWidth:400,minHeight:200,modal:!0,open:function(){v.logTracePoint("RemoveTeamAdminDialog.OpenDialog")},beforeClose:function(){i._beforeClose()},close:function(){v.logTracePoint("RemoveTeamAdminDialog.CloseDialog")},title:c.htmlEncode(f.RemoveTeamAdminTitle)},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);$(ti("div")).appendTo(this._element).addClass("admin-dialog").attr("id","remove-team-admin-dialog").text(this._options.text);this._initializeButtons();this.$removeButton.focus()},t.prototype._initializeButtons=function(){var n=this;this._cancelButton={id:"remove-team-admin-dialog-cancel-button",text:c.htmlEncode(f.Cancel),click:function(){$(this).dialog("close")}};this._closeButton={id:"remove-team-admin-dialog-close-button",text:c.htmlEncode(f.Close),click:function(){$(this).dialog("close")}};this._removeButton={id:"remove-team-admin-dialog-remove-button",text:c.htmlEncode(f.Remove),"class":"warning",click:function(){n._removeIdentity()}};ui(this._element,[this._removeButton,this._cancelButton]);this.$removeButton=this._element.siblings(".ui-dialog-buttonpane").find("#remove-team-admin-dialog-remove-button")},t.prototype._beforeClose=function(){return!this._requestContext||this._requestContext.isComplete},t.prototype._removeIdentity=function(){var n=this;this._requestContext=ft.postHTML(this._options.tfsContext.getActionUrl("RemoveTeamAdmin","identity",{area:"api"}),{teamId:this._options.teamTfId,tfidToRemove:this._options.tfid},function(){$.isFunction(n._options.successCallback)&&n._options.successCallback.call(n,{tfid:n._options.tfid});n._element.dialog("close")},function(t){$(".admin-dialog",n._element).empty();y.BaseControl.createIn(b.MessageAreaControl,$(".admin-dialog",n._element),{closeable:!1,message:t.message});n._element.dialog("option","buttons",[n._closeButton])},{tracePoint:"RemoveTeamAdminDialog.RemoveAdmin.Success",wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:this._element.closest(".ui-dialog")}})},t._controlType="RemoveTeamAdminDialog",t}(p.ModalDialogO);t.RemoveTeamAdminDialog=tr;i.initClassPrototype(tr,{_requestContext:null,_closeButton:null,_cancelButton:null,_removeButton:null,$removeButton:null});i.classExtend(tr,ri.ControlExtensions);pi=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){var i=this;n.prototype.initializeOptions.call(this,$.extend({width:600,minWidth:600,height:500,minHeight:400,modal:!0,okText:this._getSaveButtonText(t),open:function(){v.logTracePoint("ManageGroupDialog.OpenDialog")},beforeClose:function(){i._beforeClose()},title:t.dialogTitle},t))},t.prototype.initialize=function(){var t=this,i,r;n.prototype.initialize.call(this);this._groupTfid=this._options.identity?this._options.identity.TeamFoundationId:undefined;this._isForEdit=this._groupTfid!==undefined;this.$mainDiv=$(ti("div")).appendTo(this._element).addClass("admin-dialog").attr("id","manage-group-dialog");i=this.getId();this._profileTabId="profile_"+i;this._tabsControlDiv=$(ti("div")).appendTo(this.$mainDiv);r=$(ti("ul")).addClass("manage-group-tabs").appendTo(this._tabsControlDiv);this._errorPane=y.BaseControl.createIn(b.MessageAreaControl,this._tabsControlDiv);this._tabsControlDiv.tabs();r.append($('<li><a href="#'+this._profileTabId+'">'+f.Profile+"<\/a><\/li>"));this._profileTab=$('a[href="#'+this._profileTabId+'"]');this._focusClass="enter"+this._profileTabId;this._profileTab.bind("blur",function(){t._profileTab.hasClass(t._focusClass)&&(t._profileTab.focus(),t._profileTab.removeClass(t._focusClass))});this._profileTab.bind("keydown",function(n){n.keyCode===ut.KeyCode.ENTER&&t._profileTab.addClass(t._focusClass)});this._profileTab.bind("keyup",function(n){n.keyCode===ut.KeyCode.ENTER&&t._profileTab.hasClass(t._focusClass)&&t._profileTab.removeClass(t._focusClass)});this._loadForm()},t.prototype._decorate=function(n){var r=this,t,i;this._element&&(this.$profileContainer=$(ti("div")).attr("id",this._profileTabId).addClass("profile-container").appendTo(this._tabsControlDiv),this._tabsControlDiv.tabs("refresh"),this._tabsControlDiv.tabs("option","active",0),t=$(ti("div")).addClass("manage-group-image").appendTo(this.$profileContainer),n?(a.identityImageElement(this._options.tfsContext,this._groupTfid).addClass("large-identity-picture").appendTo(t),$(ti("a")).appendTo(t).text(f.ChangePicture).attr("href","#").bind("click",function(){r._changePicture()})):$(ti("img")).addClass("large-identity-picture").attr("src",ii.getResourcesFile("ip-content-vso-group-default.png")).attr("alt",this._options.imageAltText||f.NewGroupAltText).appendTo(t),i=$(ti("div")).addClass("manage-group-data request-user-info-control").appendTo(this.$profileContainer),this.$groupData=i,this._addNameElement(n,i),this._addDescriptionElement(n,i),this.$name.focus(),this.updateOkButton(!0));v.logTracePoint("Dialog.initialize.complete");v.logTracePoint("ManageGroup.Ready")},t.prototype._addNameElement=function(n,t){var r=this,i;$(ti("label")).addClass("manage-group-label").attr("for","groupName").appendTo(t).text(this._getNameLabel(n));i=$(ti("div")).appendTo(t);this.$name=$(ti("input")).attr("type","text").attr("id","groupName").addClass("requiredInfoLight").val(n?n.FriendlyDisplayName:"").appendTo(i);this.$name.bind("keyup",function(n){r._validateName(n)});this.$nameError=$(ti("div")).appendTo(i);this.$nameError.hide()},t.prototype._validateCharCount=function(n,t,i,r){$(n).removeClass("invalid");!$(n).val()||$(n).val().length<i?r.hide():(r.show(),$(n).val().length>t&&$(n).val($(n).val().substr(0,t)),r.text(c.format(f.CharactersRemaining,t-$(n).val().length)))},t.prototype._evaluateSaveButtonState=function(){var n=!1;return this.$name.val()&&$.trim(this.$name.val()).length&&(n=!0),this.updateOkButton(n),n},t.prototype._beforeClose=function(){return!this._requestContext||this._requestContext.isComplete},t.prototype.onOkClick=function(){var n=this;this._requestContext=ft.postMSJSON(this._options.tfsContext.getActionUrl("ManageGroup","identity",{area:"api"}),{name:this.$name.val(),description:this.$description.val(),tfid:this._groupTfid},function(t){$.isFunction(n._options.successCallback)&&n._options.successCallback(t);n.close();v.logTracePoint("ManageGroup.dialog-closed")},function(t){n._errorPane.setError(t.message);n.updateOkButton(!1)},{tracePoint:"ManageGroup.btnSaveGroupChanges.Success",wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:this._element.closest(".ui-dialog")}})},t.prototype._getSaveButtonText=function(n){return n.identity?c.htmlEncode(f.SaveChanges):c.htmlEncode(f.CreateGroup)},t.prototype._loadForm=function(){var n=this;this._groupTfid?ft.getMSJSON(this._options.tfsContext.getActionUrl("ManageGroup","identity",{area:"api"}),{tfid:this._groupTfid},function(t){n._decorate(t)},null,{wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:this._element}}):this._decorate()},t.prototype._getNameLabel=function(n){return n&&n.IsTeam?f.TeamName:f.GroupName},t.prototype._addDescriptionElement=function(n,t){var u=this,i,r=this;$(ti("label")).addClass("manage-group-label").attr("for","groupDesc").appendTo(t).text(f.Description);i=$(ti("div")).appendTo(t);this.$description=$("<textarea />").addClass("requiredInfoLight").attr("id","groupDesc").appendTo(i).val(n?n.Description:"").attr("rows","6");this.$description.bind("keyup paste",function(){u._validateDesc()});this.$description.bind("paste",function(){h.delay(r,100,function(){r._validateDesc()})});this.$descError=$(ti("div")).appendTo(i).addClass("team-desc-error");this.$descError.hide();this.$description.trigger("keyup")},t.prototype._validateName=function(n){n.keyCode!==$.ui.keyCode.ENTER&&(this._validateCharCount(this.$name,256,200,this.$nameError),this._evaluateSaveButtonState())},t.prototype._validateDesc=function(){this._validateCharCount(this.$description,256,200,this.$descError);this._evaluateSaveButtonState()},t.prototype._changePicture=function(){p.show(li,{tfid:this._groupTfid,isGroup:!0})},t._controlType="ManageGroupDialog",t}(p.ModalDialogO);t.ManageGroupDialog=pi;i.initClassPrototype(pi,{_requestContext:null,_groupTfid:null,_isForEdit:null,_cancelButton:null,_saveButton:null,$groupData:null,$profileContainer:null,$mainDiv:null,$description:null,$name:null,$nameError:null,$descError:null,_identityHeader:null,_tabsControlDiv:null,_errorPane:null,_profileTabId:null});i.classExtend(pi,ri.ControlExtensions);ir=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeOptions=function(t,i,r,u,f){var e=this;n.prototype.initializeOptions.call(this,$.extend({width:f,minWidth:f,height:u,minHeight:u,modal:!0,open:function(){v.logTracePoint(i)},close:function(){e._onDialogClose()},title:c.htmlEncode(r)},t))},t.prototype.initialize=function(t){var i=this;this._okButton={id:"ok",text:t,click:function(){i.onOkClick()}};this._cancelButton={id:"cancel",text:f.Cancel,click:function(){i.onCancelClick()}};this._closeButton={id:"close",text:f.Close,click:function(){i.onCancelClick()}};this._options.buttons=[this._okButton,this._cancelButton];this._container=$("<div>").addClass("confirm-dialog-container").appendTo(this._element);n.prototype.initialize.call(this);this.renderMainPage()},t.prototype._createCheckboxConfirmationArea=function(n,t){var r=this,i=$("<div>").addClass("update-confirm"),u=$("<input type=checkbox>").addClass("update-confirmation-checkbox").attr("align","bottom").attr("name","confirmCheck").appendTo(i).bind("change",function(n){return r.updateOkButton($(n.target).prop("checked"))});$(ti("span")).appendTo(i).addClass("confirmation-checkbox-text").text(t).appendTo(i);n.append(i)},t.prototype._createTextConfirmationArea=function(n,t,i){var f=this,r=$("<div>").addClass("delete-confirm"),e,u;$(ti("span")).appendTo(r).addClass("destroy-textbox-text").text(t);e=this;u=$(ti("input")).attr("type","text").addClass("textbox").addClass("destroy-textbox-text").appendTo(r).bind("input keyup",function(n){if(n.keyCode!==ut.KeyCode.ENTER){var t=c.equals(u.val(),i,!0);f.updateOkButton(t);u.toggleClass("destroy-confirmation-match",t)}});n.append(r)},t.prototype.renderMainPage=function(){var n,r;this._container.empty();this._updatedValidationError=y.BaseControl.createIn(b.MessageAreaControl,this._container,{closeable:!1});n=$("<div>").addClass("destroy-info").appendTo(this._container);var t=$(ti("table")).appendTo(n).addClass("ui-dialog-warning-header"),i=$(ti("tr")).appendTo(t),u=$(ti("td")).appendTo(i).addClass("ui-dialog-warning-header-img");$("<span/>").appendTo(u).addClass("ui-dialog-warning-icon");r=$(ti("td")).appendTo(i).addClass("ui-dialog-warning-header-txt");$(ti("div")).appendTo(r).addClass("destroy-description").text(f.CannotBeUndone);n.append(t);ui(this._element,[this._okButton,this._cancelButton]);this.updateOkButton(!1);this._createInfoArea(n);this._createConfirmationArea(n)},t}(p.ModalDialogO);t.ConfirmDestroyDialogBase=ir;rr=function(n){function t(){n.apply(this,arguments);this.handleWait={wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:this._element}}}return __extends(t,n),t.prototype._createInfoArea=function(n){var t=c.format("<a href='{0}' target='_blank'>{1}<\/a>",this._informationLink,this._urlText),i=$("<div>").addClass("update-project-text").text(this._infoText),r=$("<div>").addClass("update-project-text").html(c.format(this._infoText2,t));n.append(i).append(r)},t.prototype.renderProgressPage=function(n){var t=this;this._container.empty();$(ti("h2")).addClass("getting-started-header").text(this._gettingStartedHeaderText).appendTo(this._container);this._updateProjectProgress=$(ti("div")).addClass("update-project-progress").appendTo(this._container);this.createMonitorControl(n);this._monitorJobControl._element.bind("render-complete",function(){t._onRenderComplete()});this._monitorJobControl._element.bind("retry-after-failure",function(){t._onRetryAfterFailure()});this._monitorJobControl.startMonitoring()},t.prototype._onRenderComplete=function(){this._projectUpdated=!0},t.prototype._onRetryAfterFailure=function(){this.renderMainPage()},t.prototype.handleSuccess=function(n){ui(this._element,[this._closeButton]);this.renderProgressPage(n)},t.prototype.handleError=function(n){this._updatedValidationError.setError($("<span />").html(n.message))},t.prototype.createMonitorControl=function(n){this._monitorJobControl=y.Enhancement.enhance(tt.MonitorJobControl,this._updateProjectProgress,{jobId:n,notStartedText:this._notStartedText,inProgressText:this._inProgressText,completeText:this._completeText,failureText:this._failureText,retryActionText:this._retryActionText})},t}(ir);t.ProjectDialogBase=rr;ru=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,t,"DeleteProjectDialog.OpenDialog",f.DeleteProjectDialogTitle,300,500)},t.prototype._onDialogClose=function(){this._projectUpdated&&$.isFunction(this._options.successCallback)&&this._options.successCallback.call(this)},t.prototype.initialize=function(){this._projectName=this._options.projectName;this._projectId=this._options.projectId;this._urlText=f.DeleteProjectUrlText;this._infoText=c.format(f.DeleteProjectInfo,this._projectName);this._confirmationText=f.DeleteProjectConfirmationText;this._projectName;this._gettingStartedHeaderText=c.format(f.DeleteProjectInformationHeader,this._projectName);this._completeText=c.format(f.ProjectDeleteSuccess,this._projectName);this._notStartedText=f.DeleteProjectNotStarted;this._inProgressText=f.ProjectDeleting;this._failureText=f.GettingStartedErrorDeletingProject;this._retryActionText=f.GettingStartedRetryTeamProjectDeletionLink;this._httpClient=et.ProjectCollection.getConnection(this._options.tfsContext).getHttpClient(lt.CoreHttpClient);n.prototype.initialize.call(this,f.DeleteProject)},t.prototype._createConfirmationArea=function(n){this._createTextConfirmationArea(n,this._confirmationText,this._options.projectName)},t.prototype._createInfoArea=function(n){var t=$("<div>").addClass("update-project-text").html(this._infoText);n.append(t)},t.prototype.onOkClick=function(){var n=this;this.updateOkButton(!1);this._httpClient.queueDeleteProject(this._projectId).then(function(t){n.handleSuccess(t.id)},function(t){n.handleError(t)})},t}(rr);t.DeleteProjectDialog=ru;i.classExtend(ru,ri.ControlExtensions);uu=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.onOkClick=function(){this.updateOkButton(!1);this._options.onOkCallback&&this._options.onOkCallback();this.close()},t.prototype.initialize=function(){n.prototype.initialize.call(this,f.DestroyWitConfirmDialogOkText)},t.prototype._createConfirmationArea=function(n){this._createTextConfirmationArea(n,f.DestroyWitConfirmDialogConfirmation,this._options.workItemTypeName)},t.prototype._createInfoArea=function(n){var t=c.format(f.DestroyWitConfirmDialogInfo,this._options.workItemTypeName),i=$("<div>").addClass("destroy-wit-text").html(t);n.append(i)},t.prototype._onDialogClose=function(){},t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,t,"DestroyWorkItemConfirmationDialog.OpenDialog",f.DestroyWitConfirmDialogTitle,300,500)},t}(ir);t.DestroyWorkItemConfirmationDialog=uu;i.classExtend(uu,ri.ControlExtensions);ur=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,t,"RenameProjectConfirmationDialog.OpenDialog",f.RenameProject,490,600)},t.prototype._onDialogClose=function(){this._projectUpdated&&$.isFunction(this._options.successCallback)?this._options.successCallback.call(this):!this._projectUpdated&&$.isFunction(this._options.cancelCallback)&&this._options.cancelCallback.call(this)},t.prototype._createConfirmationArea=function(n){this._createCheckboxConfirmationArea(n,this._confirmationText)},t.prototype.initialize=function(){this._informationLink=t.INFORMATION_LINK;this._newProjectName=$.trim(this._options.newProjectName);this._oldProjectName=this._options.oldProjectName;this._urlText=f.RenameProjectUrlText;this._infoText=c.format(f.RenameProjectInfo,this._oldProjectName,this._newProjectName);this._infoText2=f.RenameProjectInfo3;this._confirmationText=c.format(f.RenameProjectConfirmationText,this._oldProjectName,this._newProjectName);this._gettingStartedHeaderText=c.format(f.RenameProjectInformationHeader,this._oldProjectName,this._newProjectName);this._completeText=c.format(f.ProjectRenameSuccess,this._oldProjectName,this._newProjectName);this._notStartedText=f.RenameProjectNotStarted;this._inProgressText=f.ProjectRenaming;this._failureText=f.GettingStartedErrorRenamingProject;this._retryActionText=f.GettingStartedRetryTeamProjectRenameLink;this._httpClient=et.ProjectCollection.getConnection(this._options.tfsContext).getHttpClient(ht.ProjectHttpClient);n.prototype.initialize.call(this,f.RenameProject)},t.prototype.onOkClick=function(){var n=this,t={name:this._newProjectName};this._options.updateDescription&&(t.description=this._options.description);this._httpClient.beginUpdateProject(this._options.projectId,t).then(function(t){n.handleSuccess(t.id)},function(t){n.handleError(t)})},t.prototype.onCancelClick=function(){!this._projectUpdated&&$.isFunction(this._options.cancelCallback)&&this._options.cancelCallback();this.close()},t.prototype.createMonitorControl=function(n){this._monitorJobControl=y.Enhancement.enhance(tt.MonitorOperationControl,this._updateProjectProgress,{jobId:n,notStartedText:this._notStartedText,inProgressText:this._inProgressText,completeText:this._completeText,failureText:this._failureText,retryActionText:this._retryActionText})},t.prototype._createInfoArea=function(n){var e=c.format("<a href='{0}' target='_blank'>{1}<\/a>",this._informationLink,this._urlText),o=c.format("<a href='{0}' target='_blank'>{1}<\/a>",t.LOCAL_WORKSPACKES_LINK,f.RenameProjectLocalWorkspacesLinkText),s=$("<div>").addClass("update-project-text").text(this._infoText),i=$("<ul>"),r,u;i.append($("<li />").text(f.RenameProjectBullet1));i.append($("<li />").text(f.RenameProjectBullet2));i.append($("<li />").text(f.RenameProjectBullet3));i.append($("<li />").text(f.RenameProjectBullet4));r=$("<div>").addClass("update-project-text").html(c.format(f.RenameProjectInfo2,o));u=$("<div>").addClass("update-project-text").html(c.format(this._infoText2,e));n.append(s).append(i).append(r).append(u)},t.INFORMATION_LINK="https://go.microsoft.com/fwlink/p?LinkId=528893",t.LOCAL_WORKSPACKES_LINK="https://msdn.microsoft.com/en-us/library/bb892960.aspx#local",t}(rr);t.RenameProjectConfirmationDialog=ur;i.classExtend(ur,ri.ControlExtensions);fu=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({width:400,minWidth:400,height:225,minHeight:225,modal:!0,open:function(){v.logTracePoint("RenameProjectDialog.OpenDialog")},title:c.htmlEncode(f.RenameProject)},t))},t.prototype.initialize=function(){var t=this,i,r,u;n.prototype.initialize.call(this);i=$(ti("div")).addClass("admin-project-rename-dialog").appendTo(this._element);this._renameProjectValidationError=y.BaseControl.createIn(b.MessageAreaControl,i,{closeable:!1});r="projectName"+y.getId();$(ti("label")).attr("for",r).text(f.RenameProject).appendTo(i);u=$(ti("div")).appendTo(i);this._$projectNameInput=$(ti("input","project-name")).addClass("requiredInfoLight").addClass("textbox").attr("type","text").attr("id",r).appendTo(u).bind("input keyup",function(n){if(n.keyCode!==ut.KeyCode.ENTER){var i=t._validateProjectName();t.updateOkButton(i&&$.trim(t._$projectNameInput.val())!==t._options.projectName);i&&t._clearError()}});this._$projectNameInput.val(this._options.projectName);this._$projectNameInput.select()},t.prototype._validateProjectName=function(){var n=$.trim(this._$projectNameInput.val()),t=tt.ProjectNameValidator.validate(n);return t?this._clearError():n.length>0&&this._setError(c.format(f.CreateProjectProjectNameInvalid,n)),t},t.prototype.onOkClick=function(){var n=this,t=$.trim(this._$projectNameInput.val()),i=et.ProjectCollection.getConnection(fi).getHttpClient(ht.ProjectHttpClient);i.beginGetProject(t).then(function(i){n._options.projectId!==i.id?n._setError(c.format(f.RenameProjectNameExists,t)):n._showConfirmationDialog()},function(){n._showConfirmationDialog()})},t.prototype._setError=function(n){this._renameProjectValidationError.setError($("<span />").html(n))},t.prototype._clearError=function(){this._renameProjectValidationError.clear()},t.prototype._showConfirmationDialog=function(){var n=this;p.show(ur,{tfsContext:this._options.tfsContext,newProjectName:this._$projectNameInput.val(),oldProjectName:this._options.projectName,projectId:this._options.projectId,successCallback:function(){n._onRenameConfirmed()},cancelCallback:function(){n._onRenameCanceled()}})},t.prototype._onRenameConfirmed=function(){this.processResult(!0)},t.prototype._onRenameCanceled=function(){this.close()},t}(p.ModalDialogO);t.RenameProjectDialog=fu;i.classExtend(fu,ri.ControlExtensions);ai=function(n){function t(t){n.call(this,t);this._versionControlSystems=[{id:"Git",name:e.SourceControlSystemNameGit,description:e.SourceControlSystemDescriptionGit,isDefault:!0},{id:"TfVc",name:e.SourceControlSystemNameTFVC,description:e.SourceControlSystemDescriptionTFVC,isDefault:!1}];t.templateTypeId&&(this._processTypeId=t.templateTypeId);this._projectVisibilityOptions=[{id:ct.ProjectVisibilityConstants.EveryoneInTenant,name:e.ProjectVisibilityNameEveryoneInTenant,description:e.ProjectVisibilityDescriptionEveryoneInTenant,isDefault:!0},{id:ct.ProjectVisibilityConstants.TeamMembers,name:e.ProjectVisibilityNameTeamMembers,description:e.ProjectVisibilityDescriptionTeamMembers,isDefault:!1}]}return __extends(t,n),t.prototype.initializeOptions=function(t){var i=this;n.prototype.initializeOptions.call(this,$.extend({width:550,resizable:!1,modal:!0,open:function(){v.logTracePoint("CreateProjectDialog.OpenDialog")},close:function(){i._onDialogClose()},title:c.htmlEncode(f.CreateProjectDialogTitle),cssClass:"create-project-dialog"},t))},t.prototype.initialize=function(){var t=this,i;this._okButton={id:"ok",text:e.CreateProject,click:function(){t.onOkClick()},"class":"cta",disabled:"disabled"};this._navigateButton={id:"navigate",text:f.NavigateToProject,click:function(){t.onNavigateClick()},"class":"cta",disabled:"disabled"};this._cancelButton={id:"cancel",text:f.Cancel,click:function(){t.onCancelClick()}};this._closeButton={id:"close",text:f.Close,click:function(){t.onCancelClick()}};this._options.buttons=[this._okButton,this._cancelButton];n.prototype.initialize.call(this);i=fi.getActionUrl("ProjectCreateOptions","project",{area:"api",project:null});ft.getMSJSON(i,null,function(n){t._isReportingOrSharePointConfigured=n.IsReportingOrSharePointConfigured;t._showProjectVisibilitySelector=n.ShowNewProjectVisibilityDropDown;t._renderPageAndFocus()},function(){t._renderPageAndFocus()})},t.prototype.validate=function(){var t=this._projectNameInput.val(),n=tt.ProjectNameValidator.validate(t);return n?this._createProjectValidationError.clear():t.length>0&&this._createProjectValidationError.setError({header:c.format(f.CreateProjectProjectNameInvalid,t),content:$(ti("div")).html(e.CreateProjectProjectNameInvalidDescription)}),n=n&&this._selectedProcessTemplate!==null&&this._selectedVersionControlSystem!==null,this.updateOkButton(n),n},t.prototype.renderMainPage=function(){var f=this,o='\n            <div class="bowtie">\n                <div id="createProjectDialogMessageArea" class="newproject-message-area"><\/div>\n                <fieldset class="first">\n                    <label for="projectNameInput">'+e.CreateProjectNameLabel+'<\/label>\n                    <input type="text" id="projectNameInput" />\n\n                    <label for="projectDescriptionInput">'+e.CreateProjectDescriptionLabel+'<\/label>\n                    <textarea id="projectDescriptionInput"><\/textarea>\n\n                    <label for="processTemplateInput">'+e.CreateProjectProcessTemplateLabel+'<\/label>\n                    <div id="processTemplateCombo"><\/div>\n                    <p id="processTemplateDescription" class="muted"><\/p>\n\n                    <div id="versionControlContainer">\n                        <label for="versionControlInput">'+e.SourceControlSystemLabel+'<\/label>\n                        <div id="versionControlCombo"><\/div>\n                        <p id="versionControlDescription" class="muted"><\/p>\n                    <\/div>\n\n                    <div id="sharedWithContainer" class="hide">\n                        <label for="sharedWithInput">'+e.ProjectVisibilityLabel+'<\/label>\n                        <div id="sharedWithCombo"><\/div>\n                        <p id="sharedWithDescription" class="muted"><\/p>\n                    <\/div>\n                <\/fieldset>\n            <\/div>\n        ',n=$(o),t=n.find("#createProjectDialogMessageArea"),i,r,u;return this._projectNameInput=n.find("#projectNameInput"),this._processTemplatesElem=n.find("#processTemplateCombo"),this._$versionControlSystemsElem=n.find("#versionControlCombo"),this._processTemplateDescription=n.find("#processTemplateDescription"),this._$versionControlSystemsDescription=n.find("#versionControlDescription"),i=n.find("#sharedWithContainer"),this._$projectVisibilityElem=n.find("#sharedWithCombo"),this._$projectVisibilityDescription=n.find("#sharedWithDescription"),this._options.tfsContext.isHosted||(r=$('<input type="text" id="collectionNameInput" disabled="disabled"><\/input>').attr("value",this._options.tfsContext.navigation.collection.name),u=$('<label id="collectionNameLabel" for="collectionNameInput"><\/label>').text(e.CreateProjectCollectionLabel),n.find("fieldset.first").prepend(r).prepend(u),this._isReportingOrSharePointConfigured&&(this._createProjectInformationMessage=y.BaseControl.createIn(b.MessageAreaControl,t,{type:b.MessageAreaType.Info}),this._createProjectInformationMessage.setMessage({header:e.InfoCustomProcessesShort,content:$("<span />").html(e.InfoCustomProcesses),type:b.MessageAreaType.Info,closeable:!1}))),this._createProjectValidationError=y.BaseControl.createIn(b.MessageAreaControl,t,{closeable:!1}),this._populateProcessTemplates(),this._populateVersionControlSystems(),this._showProjectVisibilitySelector&&(i.show(),this._populateProjectVisibility()),this._projectNameInput.keyup(function(n){n.keyCode!==ut.KeyCode.ENTER&&f.validate()}),this._element.empty(),n.appendTo(this._element),this._options.buttons={ok:this._okButton,cancel:this._cancelButton},ui(this._element,this._options.buttons),!1},t.prototype.renderProgressPage=function(n){var s=this,r,h,u,i,t,c=this._projectNameInput.val();r=$(ti("div")).addClass("create-project-page");h=$(ti("div")).addClass("properties-section").appendTo(r);u=$(ti("table")).addClass("properties-list").appendTo(h);i=$(ti("tr")).appendTo(u);t=$(ti("td")).appendTo(i);$(ti("span")).text(e.CreateProjectNameLabel).appendTo(t);t=$(ti("td")).appendTo(i);$(ti("span")).text(c).appendTo(t);i=$(ti("tr")).appendTo(u);t=$(ti("td")).appendTo(i);$(ti("span")).text(e.CreateProjectProcessTemplateLabel).appendTo(t);t=$(ti("td")).appendTo(i);$(ti("span")).text(this._selectedProcessTemplate.Name).appendTo(t);this._createProjectProgress=$(ti("div")).addClass("create-project-progress").appendTo(r);this._monitorJobControl=y.Enhancement.enhance(tt.MonitorJobControl,this._createProjectProgress,{jobId:n,notStartedText:f.CreateProjectNotStarted,inProgressText:f.CreateProjectCreatingProject,completeText:f.CreateProjectProjectCreated,failureText:o.GettingStartedErrorCreatingProject,retryActionText:o.GettingStartedRetryTeamProjectCreationLink});this._monitorJobControl._element.bind("render-complete",function(){s._onRenderComplete()});this._monitorJobControl._element.bind("retry-after-failure",function(){s._onRetryAfterFailure()});this._element.html(r);this._monitorJobControl.startMonitoring()},t.prototype.onNavigateClick=function(){window.location.href=this.projectUrl},t.prototype.onOkClick=function(){var i=$.trim(this._projectNameInput.val()),r=this._selectedProcessTemplate.TypeId,n=this,u=$("#projectDescriptionInput",this._element).val(),t={};this.validate()&&(this.updateOkButton(!1),t.VersionControlOption=this._selectedVersionControlSystem.id,t.ProjectVisibilityOption=this._selectedProjectVisibilityOption?this._selectedProjectVisibilityOption.id:null,ft.postMSJSON(this._options.tfsContext.getActionUrl("CreateProject","project",{area:"api",project:null}),{projectName:i,projectDescription:u,processTemplateTypeId:r,collectionId:this._options.collectionId,source:this._options.source||"AdminPage",projectData:h.stringifyMSJSON(t)},function(t){n._element.dialog("option","buttons",[n._navigateButton,n._closeButton]);n._collectionHost=t.CollectionHost;var r={area:null,serviceHost:t.CollectionHost,project:i,team:null};n.projectUrl=n._options.tfsContext.getActionUrl("index","home",r);n.renderProgressPage(t.JobId)},function(t){var i=n._options.tfsContext.getActionUrl(null,null,{area:"admin"}),r=n._options.tfsContext.isHosted===!0?f.AccountOverviewPage:f.CollectionOverviewPage,u=c.format('<a href="{0}">{1}<\/a>',i,r),e=c.format(f.MessageToAdminPage,u);n._createProjectValidationError.setError($("<span />").html(t.message+" "+e));n.updateOkButton(!1)},{wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:this._element}}))},t.prototype._onDialogClose=function(){this._monitorJobControl&&this._monitorJobControl.stopMonitoring();this._projectCreated&&$.isFunction(this._options.successCallback)&&this._options.successCallback.call(this)},t.prototype._onRenderComplete=function(){this._projectCreated=!0;this.isDisposed()||(this._navigateButton.disabled=null,ui(this._element,[this._navigateButton,this._closeButton]))},t.prototype._onRetryAfterFailure=function(){this.renderMainPage()},t.prototype._processTemplateChanged=function(){for(var i=this._processTemplatesCombo.getInputText(),t=i.split("\\"),r=t[t.length-1],n=0;n<this._processTemplates.length;n++)if(this._processTemplates[n].Name===r){this._selectedProcessTemplate=this._processTemplates[n];break}this._processTemplateDescription.text(this._selectedProcessTemplate.Description);this.validate()},t._buildProcessTemplateTree=function(n){for(var f=[],e={},r,o,t,s,u,i=0;i<n.length;i++)t=n[i],t.Inherits!==c.EmptyGuidString&&t.Inherits||(r={text:t.Name},f.push(r),e[t.TypeId]=r);for(o=n.length,i=0;i<o;i++)t=n[i],t.Inherits!==c.EmptyGuidString&&t.Inherits&&(r=e[t.Inherits],r?(u=r.children,u==null&&(r.children=u=[]),u.push({text:t.Name})):(s={text:t.Name},f.push(s)));return f},t._getIndexOfProcess=function(n,t,i){for(var e={},u,f,r=0;r<t.length;r++)e[t[r].Name]=t[r].TypeId;if(!n)for(r=0;r<t.length;r++)if(t[r].IsDefault){n=t[r].TypeId;break}if(u=0,n)n:for(r=0;r<i.length;r++){if(e[i[r].text]===n)break n;if(u++,i[r].children)for(f=0;f<i[r].children.length;f++){if(e[i[r].children[f].text]===n)break n;u++}}return u},t.prototype._populateProcessTemplates=function(){var r=this,n,i;this._processTemplates?this._processTemplates.length<1?(this._createProjectValidationError.setError(e.CreateProjectNoTemplates),this.updateOkButton(!1)):(n=t._buildProcessTemplateTree(this._processTemplates),i=t._getIndexOfProcess(this._processTypeId,this._processTemplates,n),this._processTemplatesCombo=y.BaseControl.createIn(k.Combo,this._processTemplatesElem,{type:wt.ComboTreeBehaviorName,source:n,allowEdit:!1,sepChar:"\\",indexChanged:function(n){r._processTemplateChanged(n)},id:"combolist-box",dropOptions:{id:"drop-menu"},dropShow:function(){$("#drop-menu",this._processTemplatesElem).width($("#combolist-box",this._processTemplatesElem).width()).offset({left:$("#combolist-box",this._processTemplatesElem).offset().left,top:$("#drop-menu",this._processTemplatesElem).offset().top})}}),this._processTemplatesCombo.setSelectedIndex(i),this._processTemplateChanged(i),this.centerDialog()):this._getProcessTemplates()},t.prototype._getProcessTemplates=function(){var n=this;ft.getMSJSON(this._options.tfsContext.getActionUrl("ProcessTemplates","project",{area:"api",project:null}),null,function(t){n._disposed||(n._processTemplates=t.Templates,n._populateProcessTemplates())},function(t){n._createProjectValidationError.setError({header:e.GetProcessTemplatesError,content:t.message,closeable:!1})})},t.prototype._populateProjectVisibility=function(){var t=this,i=[],n=-1;$.each(this._projectVisibilityOptions,function(r,u){i.push(u.name);(t._options.projectVisibility&&t._options.projectVisibility===u.id||n===-1&&u.isDefault)&&(n=r)});this._selectedProjectVisibilityOption=this._projectVisibilityOptions[n];this._projectVisibilityCombo=y.BaseControl.createIn(k.Combo,this._$projectVisibilityElem,{source:i,allowEdit:!1,indexChanged:function(n){t._projectVisibilityChanged(n)}});n>=0&&(this._projectVisibilityCombo.setSelectedIndex(n,!1),this._projectVisibilityChanged(n))},t.prototype._projectVisibilityChanged=function(n){this._selectedProjectVisibilityOption=this._projectVisibilityOptions[n];this._$projectVisibilityDescription.text(this._selectedProjectVisibilityOption.description);this.validate()},t.prototype._populateVersionControlSystems=function(){var n=this,i,r=[],t=-1;$.each(this._versionControlSystems,function(i,u){r.push(u.name);(n._options.versionControlSystem&&n._options.versionControlSystem===u.id||t===-1&&u.isDefault)&&(t=i)});this._selectedVersionControlSystem=this._versionControlSystems[t];i=et.Application.getConnection(this._options.tfsContext).getService(at.FeatureAvailabilityService);i.beginIsFeatureEnabled(ct.FeatureAvailabilityFlags.SourceControlGit,function(i){i&&(n._element.addClass("multiple-providers"),n._versionControlSystemsCombo=y.create(k.Combo,n._$versionControlSystemsElem,{source:r,allowEdit:!1,id:"processTemplateCombo",label:"processTemplateCombo",indexChanged:function(t){n._versionControlSystemChanged(t)}}),t>=0&&(n._versionControlSystemsCombo.setSelectedIndex(t,!1),n._versionControlSystemChanged(t)))})},t.prototype._versionControlSystemChanged=function(n){this._selectedVersionControlSystem=this._versionControlSystems[n];this._$versionControlSystemsDescription.text(this._selectedVersionControlSystem.description);this.validate()},t.prototype._renderPageAndFocus=function(){this.renderMainPage();this._projectNameInput.focus()},t}(p.ModalDialogO);t.CreateProjectDialog=ai;i.initClassPrototype(ai,{_selectedProcessTemplate:null,_okButton:null,projectUrl:null,_cancelButton:null,_closeButton:null,_navigateButton:null,_projectCreated:!1,_collectionHost:null,_monitorJobControl:null,_projectNameInput:null,_createProjectProgress:null,_createProjectValidationError:null,_processTemplatesElem:null,_processTemplateDescription:null,_processTemplates:null,_processTemplatesCombo:null,_selectedVersionControlSystem:null});i.classExtend(ai,ri.ControlExtensions);fr=function(n){function t(t){n.call(this,t);this._mainPage='<div class= "import-process-page process-main-page"><h1 class= "getting-started-header">${templateHeader}<\/h1><div class="main-page-info import-process-headersubtext" >${templateDescription}<\/div><div class="main-page-info import-process-learn">${learnImportLinkDescription}<\/div><div class="main-page-info import-process-learn-link">{{html learnImportLink}}<\/div><label for="${fileUploadId}" class="label import-process-uploadlabel" >${uploadLabel}<\/label><form method= "POST" enctype= "multipart/form-data" encoding= "multipart/form-data" ><input type="file" id= "${fileUploadId}" name= "templateZipFile" contenteditable= "false" class="file textbox import-process-textbox" accept=".zip"><\/form><\/div>';this._errorPage='<div class= "import-process-page process-error-page" ><h2 class= "getting-started-header" >${templateHeader}<\/h2><div class="import-process-warning"><table><tr><td class="import-process-warning-img"><span class="ui-dialog-warning-icon"><\/span><\/td><td> <div class="import-process-warning-info">${warningDescription}<\/div> <\/td><\/tr><\/table><\/div><div class="main-page-info error-page-main-description" >${templateDescription}<\/div><div class="error-page-info" ><div class= "error-description-info"><table class="error-table-list"><tr class="error-description-row"><th class="error-description-header"><\/th><th class="error-description-header"> '+f.Message+' <\/th><th class="error-description-header"> '+f.FileName+' <\/th><th class="error-description-header"> '+f.LineNumber+' <\/th><th class="error-description-header"> '+f.HelpLink+' <\/th><\/tr>{{each errors}}<tr class="error-description-row"><td class="error-description"><span class= "${$value.Class}"><\/span><\/td><td class="error-description">${$value.Message}<\/td><td class="error-description">${$value.File}<\/td><td class="error-description-linenumber">${$value.LineNumber}<\/td><td class="error-description"> <a href="${$value.FixLink}" target="_blank">${$value.FixLink}<\/a> <\/td><\/tr>{{/each}}<\/table><\/div><\/div><div class="confirm-page-info" ><input type="checkbox" class="update-process-checkbox" name= "confirmCheck" ><span class="confirmation-checkbox-text">{{html confirmMessage}}<\/span><\/div><div class="copy-to-clipboard"><button type="button" id="copytoClipboard" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only"  role="button" aria-disabled="false"><span class= "ui-button-text" > '+f.CopyToClipboard+" <\/span><\/button><\/div><\/div>";this._successPage='<div class= "import-process-page"><h2 class= "getting-started-header">${templateHeader}<\/h2><div class="import-success-congrats">${templateMessage1}<\/div><div class="render-page-info">{{html templateMessage2}}<\/div><div class="next-step-info">${moreinfo}<\/div><div class="next-step-info"> <a href="${moreinfoLink1}" target="_blank">${moreinfo1}<\/a>  <\/div><div class="next-step-info"> <a href="${moreinfoLink2}" target="_blank">${moreinfo2}<\/a>  <\/div><\/div>';this._progressPage='<div><h2 class= "getting-started-header update-process-completed">${templateHeader}<\/h2><div class="upload-progress-list"><div class="upload-progress-section update-progress-description" >${uploadDescription1}<\/div><div class="upload-progress-section">${uploadDescription2}<\/div><\/div><div class="upload-progress-info">  <\/div><\/div>'}return __extends(t,n),t.prototype.initializeOptions=function(t){var i=this;n.prototype.initializeOptions.call(this,$.extend({width:560,minWidth:560,height:430,minHeight:430,modal:!0,open:function(){v.logTracePoint("ImportProcessTemplateDialog.OpenDialog")},close:function(){i._onDialogClose()},title:c.htmlEncode(f.ImportProcessTemplateTitle)},t));t.ProgressJobId&&t.TemplateName&&(this._showJobProgress=!0,this._progressJobId=t.ProgressJobId,this._uploadedTemplateName=t.TemplateName)},t.prototype.initialize=function(){var t=this;this._okButton={id:"ok",text:f.ImportProcess,click:function(){t.onOkClick()},disabled:"disabled"};this._closeButton={id:"closeProcess",text:f.Close,click:function(){t.onCancelClick()}};this._retryButton={id:"retry",text:f.ExportRetryButtonText,"class":"cta",click:function(){t._onRetryAfterFailure()}};this._options.buttons=[this._okButton];this._element.addClass("process-modal-dialog");n.prototype.initialize.call(this);this._showJobProgress?(this.renderProgressPage(this._progressJobId),this.setPageOptions(ei.Progress)):this.renderMainPage()},t.prototype.validate=function(n){var t=this._fileUpload.val(),i;return t&&(i=n&&n.validator&&$.isFunction(n.validator.validate)?n.validator.validate(t,n):!0),i},t.prototype.renderMainPage=function(){var t=this,n="ImportProcessTemplateFileUpload"+y.getId();this._targetName="tgt"+n;this._callbackName="cb"+this._targetName;this._element.empty();this._importProcessTemplateValidationError=y.BaseControl.createIn(b.MessageAreaControl,this._element,{closeable:!1});this._data={templateHeader:f.SelectProcess,templateDescription:f.SelectProcessText,uploadLabel:f.ImportProcessAttachmentText,fileUploadId:n,learnImportLinkDescription:f.ImportProcessLearnLinkDescription,learnImportLink:f.ImportProcessLearnLink};this._currentElement=$(vt.TemplateEngine.tmpl(this._mainPage,this._data));this._currentElement.appendTo(this._element);ft.setAntiForgeryToken($("form"));this._fileUpload=$("#"+n);this._fileUpload.keydown(function(n){if(n.keyCode===ut.KeyCode.ENTER&&ut.BrowserCheckUtils.isMsie())return!1});this.updateOkButton(!1);this._fileUpload.change(function(){$(this).val()&&t.updateOkButton(!0)});this.setPageOptions(ei.Main)},t.prototype.renderErrorPage=function(n){var u=this;if(n){var i=n.Errors,r=n.ConfirmationsNeeded,t,e=[];if($.isArray(i))for(t=0;t<i.length;t++)e.push({Message:i[t].Message===null?"":i[t].Message,Class:"icon icon-tfs-vc-status-failed",LineNumber:i[t].LineNumber===null?"":i[t].LineNumber,File:i[t].File===null?"":i[t].File,FixLink:i[t].HelpLink===null?"":i[t].HelpLink});if($.isArray(r))for(t=0;t<r.length;t++)e.push({Message:r[t].Message===null?"":r[t].Message,Class:"icon icon-warning",LineNumber:r[t].LineNumber===null?"":r[t].LineNumber,File:r[t].File===null?"":r[t].File,FixLink:r[t].HelpLink===null?"":r[t].HelpLink});this._data={templateHeader:f.ProcessValidationFailed,templateDescription:c.format(f.ProcessValidationFailedErrorDescription,this._uploadedTemplateName),errors:e,confirmMessage:c.format(f.ProcessValidationFailedWarning,fi.getActionUrl(null,null,{team:null,area:"admin"}),this._uploadedTemplateName),warningDescription:c.format(f.ProcessValidationWarningDescription,this._uploadedTemplateName)};this._currentElement=$(vt.TemplateEngine.tmpl(this._errorPage,this._data));this._currentElement.appendTo(this._element);$(".update-process-checkbox").bind("change",function(){var n=$(".update-process-checkbox").prop("checked")?!0:!1;n?(u.updateOkButton(!0),u._byPassWarnings=!0):u.updateOkButton(!1)});i.length==0&&r.length>0?($(".confirm-page-info").show(),$(".import-process-warning").show(),$(".error-page-main-description").hide(),this._importOnWarning=!0,this.setPageOptions(ei.Warning)):($(".confirm-page-info").hide(),$(".import-process-warning").hide(),$(".error-page-main-description").show(),this.setPageOptions(ei.Error));$("#copytoClipboard").bind("click",function(){s.copyToClipboard(u._getFormattedTextToCopy())})}},t.prototype.renderSuccessPage=function(){var n=this,t;this._element.empty();t=[f.ImportProcessNextStep,f.ImportProcessNextStepModify,f.ImportProcessNextStepUnderstandCustomization];this._data={templateHeader:f.UploadProcessSuccessful,templateMessage1:f.Congratulations,templateMessage2:c.format(f.ImportProcessName,this._uploadedTemplateName),moreinfo:f.ImportProcessNextStep,moreinfo1:f.ImportProcessNextStepModify,moreinfo2:f.ImportProcessNextStepUnderstandCustomization,moreinfoLink1:f.UpdateSuccessMoreInformationLink1,moreinfoLink2:f.UpdateSuccessMoreInformationLink2};this._currentElement=$(vt.TemplateEngine.tmpl(this._successPage,this._data));this._currentElement.appendTo(this._element);$(".process-new-project").click(function(t){t.preventDefault();at.FeatureAvailabilityService.isFeatureEnabled(gt.FeatureAvailabilityFlags.WebAccessMyExperiencesNewProjectCreation)?ni.MyExperiencesUrls.getCreateNewProjectUrl(fi.navigation.collection.name,{source:"ImportProcess.SucceededScenario",processTemplate:n._uploadedTemplateName}).then(function(n){window.location.href=n}):p.show(ai,{successCallback:function(){n._onDialogClose()},templateTypeId:n._uploadedTypeId});n.close()})},t.prototype.renderProgressPage=function(n){var t=this,i;this._data={templateHeader:f.ProcessUploadDescription,processName:this._uploadedTemplateName,uploadDescription1:c.format(f.ImportProcessUpdateDescription,this._uploadedTemplateName),uploadDescription2:f.ImportProcessUpdateCloseDescription};this._currentElement=$(vt.TemplateEngine.tmpl(this._progressPage,this._data));this._currentElement.appendTo(this._element);i=$(".upload-progress-info");this._monitorJobControl=y.Enhancement.enhance(tt.ImportProcessJobMonitorControl,i,{jobId:n,renderImportProcessErrorText:c.format(f.ErrorRetrievingImportProcessProgressMessage,this._uploadedTemplateName),notStartedText:f.PromoteProcessNotStarted,inProgressText:f.PromoteProcessStarted,completeTextDescription:f.PromoteProcessSuccessDescription,completeText:c.format(f.PromoteProcessSuccess,this._uploadedTemplateName),failureText:c.format(f.PromoteProcessError,this._uploadedTemplateName),retryActionText:f.PromoteProcessRetry});this._monitorJobControl._element.bind("render-complete",function(){t._onRenderComplete()});this._monitorJobControl._element.bind("retry-after-failure",function(){t._onRetryAfterFailure()});this._monitorJobControl._element.bind("render-failure",function(){t._onRenderFailure()});this._monitorJobControl.startMonitoring()},t.prototype.setPageOptions=function(n){var t;n==ei.Main?(this._options.buttons={ok:this._okButton},ui(this._element,this._options.buttons),this._resetDialogOptions(),this._fileUpload.focus(),this._dialogCloseButton=$(".ui-dialog-titlebar-close"),this._dialogCloseButton&&this._dialogCloseButton.show()):n==ei.Error?($(".process-main-page").hide(),t={width:1e3,height:550,minHeight:550,minWidth:650},this.getElement().dialog(t),ui(this._element,[this._retryButton,this._closeButton])):n==ei.Warning?($(".process-main-page").hide(),t={width:1e3,height:550,minHeight:550,minWidth:650},this.getElement().dialog(t),ui(this._element,[this._retryButton,this._okButton,this._closeButton])):n==ei.Success?(ui(this._element,[this._closeButton]),$(".process-main-page").hide(),this._resetDialogOptions()):n==ei.Progress&&(ui(this._element,[this._closeButton]),$(".process-main-page").hide(),$(".process-error-page").hide(),this._resetDialogOptions(),this.$closeButton=this._element.siblings(".ui-dialog-buttonpane").find("#closeProcess"),this.$closeButton.focus())},t.prototype._resetDialogOptions=function(){this.getElement().dialog({width:560,height:430,minHeight:430,minWidth:560})},t.prototype.onOkClick=function(){var n=this,t,u=["zip"],r;this._dialogCloseButton&&this._dialogCloseButton.hide();r={validator:{validate:function(n){var t=new RegExp("^.*("+u.join("|")+")$");return t.test(n.toLowerCase())},errorString:f.InvalidFileType}};n._importProcessTemplateValidationError.clear();this._uploadResult={callback:function(t){var r;n._progressId&&(i.globalProgressIndicator.actionCompleted(n._progressId),n._progressId=null);t&&t.extractSuccess?(t.isTemplateExist?(n.updateOkButton(!0),p.show(eu,{TemplateName:t.TemplateName,ExistingTemplateName:t.ExistingTemplateName,okCallback:function(){n._importProcess(t.TemplateTypeId)},cancelCallback:function(){n.initialize()}})):n._importProcess(t.TemplateTypeId),n._uploadedTemplateName=t.TemplateName,n._uploadedTypeId=t.TemplateTypeId):t&&t.success?(t.isNew?(n._templateUploaded=!0,n._element.dialog("option","buttons",[n._okButton,n._closeButton]),n.renderSuccessPage(),n.setPageOptions(ei.Success)):(n._jobId=t.promoteJobId,n.renderProgressPage(n._jobId),n.setPageOptions(ei.Progress)),n._dialogCloseButton&&n._dialogCloseButton.show()):t&&t.validationFailed?(n.renderErrorPage(t.validationResult.Data),n._dialogCloseButton&&n._dialogCloseButton.show()):(n.updateOkButton(!0),n._dialogCloseButton&&n._dialogCloseButton.show(),r=t&&t.clientError?t.clientError:t&&t.error&&t.error.message?new Error(t.error.message):new Error(f.ExtensionUploadError),n._importProcessTemplateValidationError.setError($("<span />").html(r.message)))}};this.validate(r)?(this._iframe=$("<iframe />",{name:this._targetName,id:this._targetName}).hide().bind("error",function(n){alert(n)}).appendTo(this._element),this._uploadForm=$("form"),this._uploadResult.isCallback=!0,window[this._callbackName]=this._uploadResult,this._importOnWarning&&n._uploadedTypeId?this._importProcess(n._uploadedTypeId):(t=this._options.tfsContext.getActionUrl("ProcessTemplateDescription","process",{callback:this._callbackName,area:"api"}),this._uploadForm.attr("target",this._targetName).attr("action",t),this._postUploadContent())):this._uploadResult.callback({success:!1,clientError:{message:f.InvalidFileType}})},t.prototype._getFormattedTextToCopy=function(){var n=new c.StringBuilder,t=0;return $(".error-table-list").each(function(){$(this).find("tr").each(function(){$(this).children().each(function(){t!=0&&(n.append($(this).text()),n.append(c.tab));t++});t=0;n.appendNewLine()})}),n.toString()},t.prototype._importProcess=function(n){var t=this._options.tfsContext.getActionUrl("ImportProcessTemplate","process",{callback:this._callbackName,templateTypeId:n,byPassWarnings:this._byPassWarnings,area:"api"});this._uploadForm.attr("target",this._targetName).attr("action",t);this._postUploadContent()},t.prototype._postUploadContent=function(){this.updateOkButton(!1);h.delay(this,0,function(){try{this._progressId=i.globalProgressIndicator.actionStarted("add-attachment-attempt"+y.getId());this._uploadForm.submit()}catch(n){this._uploadResult.callback({success:!1,clientError:n})}})},t.prototype._onDialogClose=function(){this._monitorJobControl&&this._monitorJobControl.stopMonitoring();this._templateUploaded&&$.isFunction(this._options.successCallback)&&this._options.successCallback.call()},t.prototype._onRenderComplete=function(){this._templateUploaded=!0;$(".upload-progress-list",this._element).hide();$(".update-process-completed",this._element).html(f.ProcessUploadCompletedDescription)},t.prototype._onRetryAfterFailure=function(){this.renderMainPage();this._importOnWarning=!1;this._templateUploaded=!1},t.prototype._onRenderFailure=function(){$(".upload-progress-list",this._element).hide();$(".update-process-completed",this._element).html(f.ProcessUploadFailedDescription);this._templateUploaded=!1;this._importOnWarning=!1},t.prototype.dispose=function(){this._iframe&&this._iframe.remove();window[this._callbackName]=undefined;try{delete window[this._callbackName]}catch(t){}n.prototype.dispose.call(this)},t}(p.ModalDialogO);t.ImportProcessTemplateDialog=fr;i.initClassPrototype(fr,{_okButton:null,_cancelButton:null,_closeButton:null,_importProcessTemplateProgress:null,_importProcessTemplateValidationError:null,_form:null,_fileUpload:null,_iframe:null,_targetName:null,_callbackName:null,_templateUploaded:!1,_uploadedTemplateName:null,_mainPageDiv:null,_validationPageDiv:null,_successPageDiv:null,_errorWarningDiv:null,_confirmationDiv:null,_retryButton:null,_byPassWarnings:!1,_monitorJobControl:null,_uploadResult:null,_uploadForm:null,_jobId:null,_importOnWarning:!1,_uploadedTypeId:null,_showJobProgress:!1,_progressJobId:null,_progressId:null});i.classExtend(fr,ri.ControlExtensions);eu=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({title:f.ImportProcessConfirmation,okText:f.Yes,cancelText:f.No,height:"auto"},t))},t.prototype.initialize=function(){this._options.ExistingTemplateName?$(ti("div")).addClass("import-process-confirmation").html(c.format(f.ProcessOverrideDetailedDescription,this._options.ExistingTemplateName,this._options.TemplateName)).appendTo(this._element):$(ti("div")).addClass("import-process-confirmation").text(c.format(f.ProcessOverrideDescription,this._options.TemplateName)).appendTo(this._element);$(ti("div")).addClass("import-process-confirmation").text(f.ProcessOverrideDescriptionReplace).appendTo(this._element);n.prototype.initialize.call(this)},t.prototype.getDialogResult=function(){return!0},t}(p.ConfirmationDialogO);t.ImportProcessConfirmationDialog=eu;er=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){var i=this;n.prototype.initializeOptions.call(this,$.extend({width:560,minWidth:560,height:550,minHeight:550,modal:!0,open:function(){v.logTracePoint("Dialog.initialize.complete")},beforeClose:function(){i._beforeClose()},title:c.htmlEncode(f.CreateNewTeam),imageAltText:f.NewTeamAltText},t))},t.prototype.initialize=function(){this._existingAdmins=[];this._newAdmins=[];n.prototype.initialize.call(this);this._closeButton={id:"exitDialog",text:f.Close,click:function(){$(this).dialog("close")}};this.$name.focus()},t.prototype._evaluateSaveButtonState=function(){var t=!1;n.prototype._evaluateSaveButtonState.call(this)&&this._existingAdmins.length+this._newAdmins.length>0&&(t=!0);this.updateOkButton(t)},t.prototype._addNameElement=function(t,i){n.prototype._addNameElement.call(this,t,i);this.$name.attr("maxlength","64")},t.prototype.onOkClick=function(){var i=this,n=t.NoParentGroupGuid;this._parentGroupIdentityListControl.getPendingUserInput().length>0&&this._parentGroupIdentityListControl.getPendingChanges(!1).existingUsers.length>0&&(n=this._parentGroupIdentityListControl.getPendingChanges(!1).existingUsers[0]);n===t.NoParentGroupGuid?p.show(hu,{okCallback:function(){i._createTeam(n)}}):this._createTeam(n)},t.prototype._createTeam=function(n){var t=this;this._requestContext=ft.postMSJSON(this._options.tfsContext.getActionUrl("CreateTeam","identity",{area:"api",team:null}),{teamName:this.$name.val(),teamDesc:this.$description.val(),newUsersJson:h.stringifyMSJSON(this._newAdmins),existingUsersJson:h.stringifyMSJSON(this._existingAdmins),createArea:this.$createArea!==null&&this.$createArea.prop("checked"),parentGroupGuid:n},function(n){var r,i,u;$.isFunction(t._options.successCallback)&&t._options.successCallback.call(t,{identity:n});n.Warnings&&n.Warnings.length>0?(r=t._createWarningMessage(f.TeamCreatedSuccessFullyWithWarnings,n.Warnings),$(".admin-dialog",t._element).empty(),$(".admin-dialog",t._element).html(r),t._element.dialog("option","buttons",[t._closeButton])):(t._element.dialog("close"),v.logTracePoint("CreateTeamAdminDialog.Create.Success"),t._options.navigateToTeamOnSuccess&&(i=kt.getPageContext(),u=bt.urlHelper.getMvcUrl({action:"RedirectMru",controller:"Mru",area:"",level:i.webContext.host.hostType,webContext:i.webContext,project:i.webContext.project.name,team:n.FriendlyDisplayName,queryParams:{toController:i.navigation.currentController,toRouteArea:i.navigation.area,toAction:i.navigation.currentAction,toParameters:i.navigation.currentParameters}}),dt.getService().performAction(dt.CommonActions.ACTION_WINDOW_NAVIGATE,{url:u})))},function(n){t._errorPane.setError(n.message);t.updateOkButton(!1);v.logTracePoint("CreateTeamAdminDialog.Create.Error")},{wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:this._element.closest(".ui-dialog")}})},t.prototype._getSaveButtonText=function(){return c.htmlEncode(f.CreateTeam)},t.prototype._decorate=function(){var u=this,a,e,o,p,r=this;n.prototype._decorate.call(this);var w=!1,b=!1,k=!1,s=function(){w&&b&&k&&v.logTracePoint("CreateNewTeamDialog.Complete")};$(ti("div")).addClass("manage-group-label").appendTo(this.$groupData).text(f.Permissions);$(ti("div")).addClass("manage-group-label").appendTo(this.$groupData).text(f.Permissions_Description);p=$(ti("div")).addClass("parent-group-identity").appendTo(this.$groupData);this._parentGroupIdentityListControl=y.BaseControl.createIn(tt.IdentityPickerControl,p,{delayInit:!1,filterList:!1,allowMultiSelect:!1,allowFreeType:!1,showBrowse:!1,comboOnly:!0,allowCheckName:!1,identityListAction:this._options.tfsContext.getActionUrl("ReadAddableGroups","identity",{area:"api"}),searchParams:{joinGroups:!0,excludeTeams:!0},wait:{wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:this._element}},onListRetrieved:function(n){n.push({DisplayName:f.DoNotAddToSecurityGroup,TeamFoundationId:t.NoParentGroupGuid})},onReady:function(n){var t=c.format("[{0}]\\{1}",r._options.tfsContext.navigation.project,f.ContributorsGroupName);n.select(t,!1)||n.select(f.DoNotAddToSecurityGroup,!1);h.delay(r,100,function(){r.$name.focus();w=!0;s()})}});i.using(["Presentation/Scripts/TFS/TFS.UI.Controls.Accessories"],function(){var n=et.ProjectCollection.getConnection(u._options.tfsContext).getService(rt.TeamAwarenessService);n.beginGetTeamSettings(function(n){n.teamFieldName==="System.AreaPath"&&($(ti("div")).addClass("manage-group-label").appendTo(r.$groupData).text(f.TeamArea),r.$createArea=$("<input id='create-area' type='checkbox' />").prop("checked",!0).appendTo(r.$groupData),$(ti("label")).appendTo(r.$groupData).attr("for","create-area").addClass("create-team-area-label").text(f.CreateAreaPath),b=!0,s())})});this._settingsTabId="settings_"+this.getId();this.$settingsContainer=$(ti("div")).attr("id",this._settingsTabId).addClass("settings-container").appendTo(this._tabsControlDiv);this._tabsControlDiv.find("ul.manage-group-tabs").append($('<li><a href="#'+this._settingsTabId+'">'+f.Settings+"<\/a><\/li>"));this._tabsControlDiv.tabs("refresh");this._tabsControlDiv.tabs("option","active",0);this._settingsTab=$('a[href="#'+this._settingsTabId+'"]');this._focusClass="enter"+this._settingsTabId;this._settingsTab.bind("blur",function(){u._settingsTab.hasClass(u._focusClass)&&(u._settingsTab.focus(),u._settingsTab.removeClass(u._focusClass))});this._settingsTab.bind("keydown",function(n){n.keyCode==ut.KeyCode.ENTER&&u._settingsTab.addClass(u._focusClass)});this._settingsTab.bind("keyup",function(n){n.keyCode==ut.KeyCode.ENTER&&u._settingsTab.hasClass(u._focusClass)&&u._settingsTab.removeClass(u._focusClass)});a=$(ti("div")).addClass("admin-header").appendTo(this.$settingsContainer);$(ti("span")).addClass("manage-group-label").appendTo(a).text(f.Administrators);e=$(ti("div")).appendTo(this.$settingsContainer);this._identityListControl=y.BaseControl.createIn(tt.IdentityListControl,e);e.bind("identityListChanged",function(n,t){t&&(t.tfid?r._existingAdmins=l.subtract(r._existingAdmins,[t.tfid]):r._newAdmins=l.subtract(r._newAdmins,[t.name]));r._existingAdmins.length+r._newAdmins.length===0&&(r.$teamAdminError.show(),r.$teamAdminError.text(f.AdminRequired),r._evaluateSaveButtonState())});e=$(ti("div")).appendTo(this.$settingsContainer).addClass("admin-actions");$(ti("a")).appendTo(e).text(f.PlusAdd).attr("href","#").bind("click",function(){u._addAdminClicked()});this.$teamAdminError=$(ti("div")).appendTo(this.$settingsContainer).addClass("team-admin-error").addClass("team-error").hide();o=this._options.tfsContext.currentIdentity;this._addAdmin(o.displayName,o.id);k=!0;s()},t.prototype._addAdminClicked=function(){var n=this;return p.show(oi,{mainTitle:this.$name.val()||f.NewTeam,saveCallback:function(t){n._saveAdminCallback(t)},contentHeader:f.AddTeamAdministrator,tfsContext:this._options.tfsContext}),!1},t.prototype._validateName=function(n){n.keyCode!==$.ui.keyCode.ENTER&&(this._validateCharCount(this.$name,64,54,this.$nameError),this._evaluateSaveButtonState())},t.prototype._addAdmin=function(n,t){this._identityListControl.addIdentity(n,n,t);t?this._existingAdmins.push(t):this._newAdmins.push(n);this.$teamAdminError.hide();this._evaluateSaveButtonState()},t.prototype._getNameLabel=function(){return f.TeamName},t.prototype._saveAdminCallback=function(n){for(var t=0;t<n.newUsers.length;t++)jQuery.inArray(n.newUsers[t],this._newAdmins)===-1&&this._addAdmin(n.newUsers[t]);for(t=0;t<n.existingUsers.length;t++)jQuery.inArray(n.existingUsers[t].tfid,this._existingAdmins)===-1&&this._addAdmin(n.existingUsers[t].name,n.existingUsers[t].tfid)},t.prototype._createWarningMessage=function(n,t){var i,o,u,f,r,e;if(i=$(ti("div")).addClass("team-warning-section"),o=$(ti("div")).addClass("header").appendTo(i).text(n),u=$(ti("div")).addClass("content").appendTo(i),f=$(ti("ul")).appendTo(u),t)for(r=0,e=t.length;r<e;r++)$(ti("li")).appendTo(f).text(t[r]);return i},t._controlType="CreateTeamDialog",t.NoParentGroupGuid="",t}(pi);t.CreateTeamDialog=er;i.initClassPrototype(er,{_identityListControl:null,_parentGroupdIdentityListControl:null,$settingsContainer:null,$teamAdminError:null,$createArea:null,_existingAdmins:null,_newAdmins:null,_closeButton:null,_parentGroupIdentityListControl:null,_settingsTabId:null});i.classExtend(er,ri.ControlExtensions);or=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({resizable:!1,width:650,height:500,modal:!0,open:function(){v.logTracePoint("JumpList.OpenDialog")},title:f.BrowseServer},t))},t.prototype.initialize=function(){var i=this,t=this._options.tfsContext.navigation,r=!(t.area&&t.area.toLowerCase()==="admin");this._options.url=this._options.tfsContext.getActionUrl("BrowseControl","browse",{area:"api",hideDefaultTeam:r,selectedTeam:this._options.selectedTeam,ignoreDefaultLoad:!0});n.prototype.initialize.call(this);this._initializeButtons();this._element.bind("definitionchange",function(n,t){i.setCurrentJumpPoint(n,t)})},t.prototype.setCurrentJumpPoint=function(n,t){t&&t.selectedNode&&t.selectedNode.type!=="collection"?(this._jumpUrl=t.selectedNode.model.url,this._element.siblings(".ui-dialog-buttonpane").find("#"+this._connectButton.id).button("enable")):(this._jumpUrl=null,this._element.siblings(".ui-dialog-buttonpane").find("#"+this._connectButton.id).button("disable"))},t.prototype._jumpToDestination=function(){var n,t;t=this._element.siblings(".ui-dialog-buttonpane").find("#"+this._connectButton.id).button("option","disabled");n=t===!1;this._jumpUrl&&n&&(window.location.href=this._jumpUrl)},t.prototype._initializeButtons=function(){var n=this;this._connectButton={id:"jump-list-dialog-connect-button",disabled:!0,text:c.htmlEncode(f.Navigate),"class":"cta",click:function(){n._jumpToDestination()}};this._closeButton={id:"jump-list-dialog-close-button",text:c.htmlEncode(f.Close),click:function(){$(this).dialog("close")}};ui(this._element,[this._connectButton,this._closeButton])},t._controlType="JumpListDialog",t}(p.ModalDialogO);t.JumpListDialog=or;i.initClassPrototype(or,{_jumpUrl:null,_closeButton:null,_connectButton:null});i.classExtend(or,ri.ControlExtensions);ou=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({resizable:!0,width:650,height:500,modal:!0,title:f.BrowseTeam},t))},t.prototype.initialize=function(){var t=this,i={area:"api",hideDefaultTeam:!0,showTeamsOnly:!0,selectedTeam:this._options.selectedTeam};this._options.url=this._options.tfsContext.getActionUrl("BrowseControl","browse",i);n.prototype.initialize.call(this);this._element.bind("definitionchange",function(n,i){t._onSelectionChange(n,i)});this.updateOkButton(!1)},t.prototype._onSelectionChange=function(n,t){t&&t.selectedNode&&(t.selectedNode.type==="team"||t.selectedNode.type==="project")?(this._selectedTeam=t.selectedNode.type==="team"?t.selectedNode.model:t.selectedNode.model.defaultTeam,this.updateOkButton(!0)):(this._selectedTeam=null,this.updateOkButton(!1))},t.prototype.getDialogResult=function(){return this._selectedTeam},t._controlType="TeamPickerDialog",t}(p.ModalDialogO);t.TeamPickerDialog=ou;i.classExtend(ou,ri.ControlExtensions);sr=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({width:600,height:450,modal:!0,open:function(){v.logTracePoint("ManageTeamMembersDialog.OpenDialog")},title:c.format(f.ManageTeamMembersDialogTitle,t.teamName||t.groupName||"")},t));tt.AdminUIHelper.validateAdminUiFeatureFlagState(this._options.tfsContext)},t.prototype.initialize=function(){var r=this,i,u;this._options.buttons=[{id:"manage-team-members-close-button",text:f.Close,click:function(){$(this).dialog("close")}}];n.prototype.initialize.call(this);this._element.siblings(".ui-dialog-buttonpane").find("#manage-team-members-close-button").focus();i=$("<div class='team-members-container' />").appendTo(this._element).bind("member-added member-removed",function(){r._membersModified=!0});u=y.Enhancement.enhance(tt.MembershipControl,i,{editMembers:this._options.editMembers!==!1,joinToGroupTfid:this._options.joinToGroupTfid,joinToGroupExpandParentScopes:this._options.joinToGroupExpandParentScopes,setInitialFocus:!0,isTeam:this._options.isTeam,preventRemove:this._options.editMembers===!1,preventJoin:this._options.preventJoin,showAddAadMembers:fi.isHosted&&fi.isAADAccount?!0:!1,adminUIFeatureFlagEnabled:tt.AdminUIHelper.adminUIFeatureFlagEnabled||null});t.bindIdentityGridOpenGroup(i)},t.prototype.onClose=function(t){$.isFunction(this._options.dialogClosed)&&this._options.dialogClosed(this._membersModified===!0);n.prototype.onClose.call(this,t)},t.bindIdentityGridOpenGroup=function(n){n.bind("open-group-details",function(n,i){p.show(t,{joinToGroupTfid:i.TeamFoundationId,groupName:i.FriendlyDisplayName,isTeam:i.IsTeam,editMembers:!i.RestrictEditingMembership,preventJoin:i.RestrictEditingMembership})})},t}(p.ModalDialogO);t.ManageGroupMembersDialog=sr;i.classExtend(sr,ri.ControlExtensions);su=function(n){function t(t){n.call(this,$.extend(t,{isTeam:!0}))}return __extends(t,n),t._controlType="ManageTeamMembersDialog",t}(sr);t.ManageTeamMembersDialog=su;i.classExtend(su,ri.ControlExtensions);wu=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({title:f.DeleteServiceEndpointDialogTitle,okText:f.Disconnect,resizable:!0,height:150},t))},t.prototype.initialize=function(){var t='<div id="confirmation-message"> <strong>'+f.DisconnectServiceEndpointConfirm+"<\/strong> <\/div>";this._element.html(c.format(t,c.htmlEncode(this._options.connectedService.name),this._options.tfsContext.navigation.publicAccessPoint.uri));n.prototype.initialize.call(this)},t.prototype.getDialogResult=function(){var n=this,t=new g.VssConnection(this._options.tfsContext.contextData),i=t.getService(st.ServiceEndPointService);return i.beginDisconnect(this._options.connectedService.id).then(function(t){n._onSuccess(t)},function(t){n._onError(t)}),null},t}(p.ConfirmationDialogO);t.DeleteServiceEndpointConfirmationDialog=wu;bu=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({title:f.DeleteConnectedServiceDialogTitle,okText:f.Disconnect,height:250},t))},t.prototype.initialize=function(){this._element.html(c.format(f.DisconnectServiceConfirmation,c.htmlEncode(this._options.connectedService.friendlyName),this._options.tfsContext.navigation.publicAccessPoint.uri));n.prototype.initialize.call(this)},t.prototype.getDialogResult=function(){var n=this,t=et.ProjectCollection.getConnection(this._options.tfsContext).getService(ot.ConnectedServicesManager);return t.beginDisconnect(this._options.connectedService.id,function(t){n._onSuccess(t)},function(t){n._onError(t)}),null},t}(p.ConfirmationDialogO);t.DeleteAzureConnectedServiceConfirmationDialog=bu;hu=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({title:f.NoParentGroupForTeamConfirmationTitle,okText:f.Yes,cancelText:f.No,height:200},t))},t.prototype.initialize=function(){this._element.html(f.NoParentGroupForTeamConfirmation);n.prototype.initialize.call(this)},t.prototype.getDialogResult=function(){return!0},t}(p.ConfirmationDialog);t.NoParentGroupForTeamConfirmationDialog=hu;w.menuManager.attachExecuteCommand(function(n,t){var i=t.get_commandArgument();if(i)switch(t.get_commandName()){case"add-members-dialog":return p.show(br,i),!1;case"add-groups-dialog":return p.show(kr,i),!1;case"add-Aad-groups-dialog":return p.show(dr,i),!1;case"join-group-dialog":return p.show(gr,i),!1;case"identity-picker-dialog":return p.show(ci,i),!1}}),function(n){n[n.Main=1]="Main";n[n.Error=2]="Error";n[n.Warning=3]="Warning";n[n.Progress=4]="Progress";n[n.Success=5]="Success"}(t.ImportProcessPageType||(t.ImportProcessPageType={}));ei=t.ImportProcessPageType;ku=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initialize=function(){var t=this;this._options.url=this._tfsContext.getActionUrl("ChildProcessCreationDialog","process",{area:"admin"});this._options.urlParams={};this._options.success=function(){t._populateDialog()};n.prototype.initialize.call(this)},t.prototype.initializeOptions=function(t){var i=this;this._parentName=t.parentName;this._parentId=t.parentId;this._populate=t.populate;this._getProcesses=t.getProcesses;this._canCreate=t.canCreate;this._accountName=t.accountName;this._tfsContext=t.tfsContext;this._successCallback=t.successCallback;this._createButtonId="create-process";this._startTime=(new Date).getTime();pt.publishEvent(new pt.TelemetryEventData(r.CustomerIntelligenceConstants.Process.AREA,"ChildProcessCreationDialog",{event:"opened"},this._startTime));n.prototype.initializeOptions.call(this,$.extend({dialogClass:"child-process-creation-dialog",title:c.format(f.CreateInheritedProcess,this._parentName),buttons:{nextButton:{id:this._createButtonId,text:f.CreateProcess,click:function(){i._createProcess()}},cancelButton:{id:"cancel",text:f.Cancel,click:function(){i._cancel()}}},height:525,minHeight:385,minWidth:580,resizable:!1},t))},t.prototype._cancel=function(n){var t=(new Date).getTime(),i=t-this._startTime;pt.publishEvent(new pt.TelemetryEventData(r.CustomerIntelligenceConstants.Process.AREA,"ChildProcessCreationDialog",{event:"canceled"},t,i));this.onCancelClick(n)},t.prototype._populateDialog=function(){var e=this,n,t,i;$("#parent-name-label").text(c.htmlEncode(this._parentName));this._errorPanel=y.BaseControl.createIn(b.MessageAreaControl,$("#warning-wrapper"));this._nameError=$("#error-message",this._element);this._nameField=$("#inheritedProcessName",this._element);this._descriptionField=$("#inheritedProcessDescription",this._element);u.createLearnMoreLinkBlock($(".create-inherited-input-section",this._element),f.ProcessInheritanceLink);n=function(n){e.validateNameAndUpdateUI(n)};t=$("#"+this._createButtonId,this._element.parent());this._nameField.focus().change(n).keyup(n).keyup(function(n){n.which!==ut.KeyCode.ENTER||t.attr("disabled")||t.click()});this._descriptionField.change(n).keyup(n);i=this;$(".help-box",this._element).first().find("a").click(function(){var n=(new Date).getTime(),t=n-i._startTime;pt.publishEvent(new pt.TelemetryEventData(r.CustomerIntelligenceConstants.Process.AREA,"ChildProcessCreationDialog",{event:"help"},n,t))});t.button("disable")},t.prototype.validateNameAndUpdateUI=function(n){var i,t,r,u;if(n.which!==ut.KeyCode.ENTER){if(i=tt.AdminUIHelper.validateProcessName(this._nameField.val(),this._getProcesses()),t=$("#"+this._createButtonId,this._element.parent()),i){this._setNameError(i);t.button("disable");return}this._setNameError("");t.button("enable");r=this._getProcesses();for(u in r)if(r[u].Name.toLowerCase()===this._nameField.val().toLowerCase()){this._setNameError(f.NameMustBeUnique);t.button("disable");return}if(!tt.AdminUIHelper.isNameValid(this._nameField.val())){this._setNameError(f.IllegalCharacters);t.button("disable");return}this._setNameError("");t.button("enable")}},t.prototype._setNameError=function(n){n?(this._nameError.text(n),this._nameField.addClass("errored-field")):(this._nameError.text(""),this._nameField.removeClass("errored-field"))},t.isExistingReferenceName=function(n,t){for(var i in n)if(t===n[i].ReferenceName)return!0;return!1},t.makeReferenceName=function(n,i,r,u){n=n.replace(/[ \-]|[^\x00-\x7F]/g,"")||"Custom";i=i.replace(/[ \-]|[^\x00-\x7F]/g,"");u=u||0;i||(i="Process",u=u||1);for(var f=n+"."+i,e=r();t.isExistingReferenceName(e,f+(u?"_"+u:""));)u++;return f+(u?"_"+u:"")},t.prototype._createProcess=function(){var n=this,e;$("#"+this._createButtonId,this._element.parent()).button("disable");var i=this._nameField.val(),o=this._descriptionField.val(),s=t.makeReferenceName(this._accountName,this._nameField.val(),this._getProcesses),h=!0,u=this._getProcesses();for(e in u)if(u[e].Name===this._parentName&&u[e].SubscribedProjectCount===0){h=!1;break}ft.postHTML(this._tfsContext.getActionUrl("AddInheritedProcess","process",{area:"api"}),{name:i,referenceName:s,description:o,parentTypeId:this._parentId},function(){var t,u,e;n._populate(i);n.onClose();t=(new Date).getTime();u=t-n._startTime;pt.publishEvent(new pt.TelemetryEventData(r.CustomerIntelligenceConstants.Process.AREA,"ChildProcessCreationDialog",{event:"completed"},t,u));e={title:f.CreateProcess,header:f.InheritedProcessCreated,description:c.format(f.ProcessCreated,i),processName:i,getProcesses:n._getProcesses,populate:n._populate,buttons:null,tfsContext:n._tfsContext};n._successCallback(i);p.Dialog.show(hr,e)},function(t){n._errorPanel.setMessage(t.message,b.MessageAreaType.Error);t.event="error";pt.publishEvent(new pt.TelemetryEventData(r.CustomerIntelligenceConstants.Process.AREA,"ChildProcessCreationDialog",t,(new Date).getTime()))},{wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:this.getElement()}})},t}(p.ModalDialog);t.ChildProcessCreationDialog=ku;du=function(){function n(){}return n.beginGetProcessPermissions=function(n,t,i,r,u){var o=this,e;if(this._permissionsCache[t]){i(this._permissionsCache[t]);return}return e=null,u&&(e={wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:u}}),ft.getMSJSON(n.getActionUrl("GetPermissions","Process",{area:"api"}),{templateTypeId:t},function(n){if(n.errorMessage)throw n.errorMessage;o._permissionsCache[t]=n;i(n)},r,e)},n._permissionsCache={},n}();t.ProcessPermissions=du;t.getCollectionProcessActionUrl=wi;gu=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initialize=function(){var t=this;this._options.url=wi(this._tfsContext,"SelectMigrateTargetDialog","admin");this._options.urlParams={projectId:t._projectId};this._options.success=function(){t._beginPopulateDialog()};n.prototype.initialize.call(this)},t.prototype._beginPopulateDialog=function(){var n=this;ft.getMSJSON(wi(this._tfsContext,"GetMigrateTargetDialogInfo","admin"),{projectId:this._projectId},function(t){n._systemProcessName=t.SystemProcessName;n._toSystem=t.ToSystem;n._processIdToNameMap=t.ProcessIdToNameMap;n._populateDialog()},function(n){this._errorPanel.setMessage(n.message,b.MessageAreaType.Error)},{wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:n._element.closest(".modal-dialog")}})},t.prototype.initializeOptions=function(t){var i=this;this._processName=t.processName;this._projectId=t.projectId;this._projectName=t.projectName;this._tfsContext=t.tfsContext;this._refresh=t.refresh;t.processNameCallback&&(this._processNameCallback=t.processNameCallback);this._startTime=(new Date).getTime();pt.publishEvent(new pt.TelemetryEventData(r.CustomerIntelligenceConstants.Process.AREA,"SelectMigrateTargetDialog",{event:"open"},this._startTime));n.prototype.initializeOptions.call(this,$.extend({dialogClass:"select-migrate-target-dialog",title:f.ChangeProcess,buttons:{migrateSelected:{id:"change",text:f.DialogOkButton,click:function(){i._change()}},cancelButton:{id:"cancel",text:f.Cancel,click:function(){i._cancel()}}},height:300,minHeight:290,minWidth:600},t))},t.prototype._populateDialog=function(){var n=this,t;this._errorPanel=y.BaseControl.createIn(b.MessageAreaControl,$("#warning-box-wrapper",this._element));$("#parent-name",this._element).text(c.htmlEncode(this._systemProcessName));u.createLearnMoreLinkBlock($(".admin-dialog-pad-sides",this._element),f.ProjectMigrationLink);this._names=[];for(t in this._processIdToNameMap)this._names.push(this._processIdToNameMap[t].Value);this._toSystem||(this._selectProcess=y.BaseControl.createIn(k.Combo,$("#project-selector",this._element),{source:this._names,id:"combolist-box",dropOptions:{id:"drop-menu"},dropShow:function(){$("#drop-menu",this._element).width($("#combolist-box",this._element).width()).offset({left:$("#combolist-box",this._element).offset().left,top:$("#drop-menu",this._element).offset().top})},dataSource:new k.ListDataSource(this._names)}),this._selectProcess._bind("change",function(){n._selectProcess.getSelectedIndex()>=0?$("#change",n._element.parent()).button("enable"):$("#change",n._element.parent()).button("disable")}),this._selectProcess.setSelectedIndex(0));this._names.length==0&&$("#change",this._element.parent()).button("disable");$(".help-box",this._element).first().find("a").click(function(){var t=(new Date).getTime(),i=t-n._startTime;pt.publishEvent(new pt.TelemetryEventData(r.CustomerIntelligenceConstants.Process.AREA,"SelectMigrateTargetDialog",{event:"help"},t,i))});$("#cancel",this._element.parent()).focus()},t.prototype._change=function(n){var t,e,i,u,f,o;this._toSystem?t=this._systemProcessName:(i=this._selectProcess.getSelectedIndex(),console.log("idx: "+i),t=this._names[i]);for(u in this._processIdToNameMap)if(this._processIdToNameMap[u].Value==t){e=this._processIdToNameMap[u].Key;break}this._changeProcess(n,t,e);this.onCancelClick(n);f=(new Date).getTime();o=f-this._startTime;pt.publishEvent(new pt.TelemetryEventData(r.CustomerIntelligenceConstants.Process.AREA,"SelectMigrateTargetDialog",{event:"completed"},f,o))},t.prototype._cancel=function(){var n=(new Date).getTime(),t=n-this._startTime;pt.publishEvent(new pt.TelemetryEventData(r.CustomerIntelligenceConstants.Process.AREA,"SelectMigrateTargetDialog",{event:"canceled"},n,t));this.onCancelClick()},t.prototype._changeProcess=function(n,t,i){var u=this,e=[];e.push({newProcessTypeId:i,projectId:this._projectId});ft.postMSJSON(wi(this._tfsContext,"MigrateProjectsProcess","api"),{migratingProjects:h.stringifyMSJSON(e)},function(i){var e,h,o,s;if(u._refresh(),e=(new Date).getTime(),h=e-u._startTime,pt.publishEvent(new pt.TelemetryEventData(r.CustomerIntelligenceConstants.Process.AREA,"MigrateProjectsDialog",{event:"completed"},e,h)),i&&i.length>0){o=c.format(f.MigrationFailedMessage,i.length);for(s in i)o+=i[s].projectName+": "+i[s].exception.message+" ";u._errorPanel.setMessage(o,b.MessageAreaType.Error)}else{u.onCancelClick(n);u._processNameCallback&&u._processNameCallback(t)}},function(n){this._errorPanel.setMessage(n.message,b.MessageAreaType.Error)},{wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:this.getElement()}})},t}(p.ModalDialogO);t.SelectMigrateTargetDialog=gu;cu=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initialize=function(){var t=this;this._options.url=this._options.tfsContext.getActionUrl("MigrateProjectsDialog","process",{area:"admin"});this._options.urlParams={targetProcessId:this._targetId};this._options.success=function(){t._populateDialog()};n.prototype.initialize.call(this)},t.prototype.initializeOptions=function(t){var i=this;this._targetName=t.targetName;this._targetId=t.targetId;this._populate=t.populate;this._tfsContext=t.tfsContext;this._migrateButtonId="migrate-project";this._startTime=(new Date).getTime();pt.publishEvent(new pt.TelemetryEventData(r.CustomerIntelligenceConstants.Process.AREA,"MigrateProjectsDialog",{event:"open"},this._startTime));n.prototype.initializeOptions.call(this,$.extend({dialogClass:"migrate-project-dialog",title:f.ChangeProcess,buttons:{migrateProjectButton:{id:this._migrateButtonId,text:f.DialogOkButton,click:function(){i._migrate()}},cancelButton:{id:"cancel",text:f.Cancel,click:function(){i._cancel()}}},minHeight:525,minWidth:600,resizable:!1},t))},t.prototype._populateDialog=function(){var n=this,t;this.errorPanel=y.BaseControl.createIn(b.MessageAreaControl,$("#warning-box-wrapper",this._element));u.createLearnMoreLinkBlock($(".admin-dialog-pad-sides",this._element),f.ProjectMigrationLink).addClass("bowtie");t=function(){n.checkButtons()};this._aProjectList=$("#available-list",this._element).change(t);this._sProjectList=$("#selected-list",this._element).change(t);this._leftButton=$("#left-button",this._element).click(function(){n.moveRight()}).keyup(function(t){t.which===ut.KeyCode.ENTER&&n.moveRight()});this._rightButton=$("#right-button",this._element).click(function(){n.moveLeft()}).keyup(function(t){t.which===ut.KeyCode.ENTER&&n.moveLeft()});this._aProjectList.dblclick(function(i){n._sProjectList.append(n._aProjectList.children()[i.currentTarget.selectedIndex]);t()});this._aProjectList.keyup(function(){n._keyPressed()});this._sProjectList.dblclick(function(i){n._aProjectList.append(n._sProjectList.children()[i.currentTarget.selectedIndex]);t()});this._sProjectList.keyup(function(){n._keyPressed()});$(".help-box",this._element).first().find("a").click(function(){var t=(new Date).getTime(),i=t-n._startTime;pt.publishEvent(new pt.TelemetryEventData(r.CustomerIntelligenceConstants.Process.AREA,"MigrateProjectsDialog",{event:"help"},t,i))});this.checkButtons()},t.prototype._keyPressed=function(n){var t=this,i=$(n.target).attr("id")==="available-list"?function(){t.moveRight()}:function(){t.moveLeft()};switch(n.which){case 13:i();return;case 32:i();return;case 39:this._sProjectList.focus();return;case 37:this._aProjectList.focus();return}console.log(n)},t.prototype.checkButtons=function(){var n=this._aProjectList.children().toArray(),r=!1,i;for(var t in n)n[t].selected&&(r=!0);r?this._leftButton.removeAttr("disabled"):this._leftButton.attr("disabled","");i=!1;n=this._sProjectList.children().toArray();for(t in n)n[t].selected&&(i=!0);i?this._rightButton.removeAttr("disabled"):this._rightButton.attr("disabled","");$("#"+this._migrateButtonId,this._element.parent()).button(this._sProjectList.children().length>0?"enable":"disable")},t.prototype.moveRight=function(){var n=this._aProjectList.children().toArray();for(var t in n)n[t].selected&&$(n[t]).appendTo(this._sProjectList);this._sProjectList.focus();this.checkButtons()},t.prototype.moveLeft=function(){var n=this._sProjectList.children().toArray();for(var t in n)n[t].selected&&$(n[t]).appendTo(this._aProjectList);this._aProjectList.focus();this.checkButtons()},t.prototype._postMSJSON=function(n,t,i,r,u){return ft.postMSJSON(this._tfsContext.getActionUrl("MigrateProjectsProcess","process",{area:"api"}),n,t,i,r,u)},t.prototype._showSuccessDialog=function(n){return p.show(hr,n)},t.prototype._migrate=function(n){var t=this,i,u,e;$("#"+this._migrateButtonId,this._element.parent()).button("disable");i=[];u=this._sProjectList.children().toArray();for(e in u)i.push({newProcessTypeId:this._targetId,projectId:u[e].value});this._postMSJSON({migratingProjects:h.stringifyMSJSON(i)},function(u){var e,h,o,s,l;if(t._populate(),e=(new Date).getTime(),h=e-t._startTime,pt.publishEvent(new pt.TelemetryEventData(r.CustomerIntelligenceConstants.Process.AREA,"MigrateProjectsDialog",{event:"completed"},e,h)),u&&u.length>0){o=c.format(f.MigrationFailedMessage,u.length);for(s in u)o+=u[s].projectName+": "+u[s].exception.message+" ";t.errorPanel.setMessage(o,b.MessageAreaType.Error)}else{t.onCancelClick(n);l={title:f.ChangeProcess,processName:t._targetName,header:f.ProjectMigrationSuccessful,description:c.format(f.MigrationSucessDescription,i.length,t._targetName),populate:t._populate,buttons:{},processTypeId:t._targetId,tfsContext:t._tfsContext};t._showSuccessDialog(l)}},function(n){t.errorPanel.setMessage(n.message,b.MessageAreaType.Error);var i=(new Date).getTime(),u=i-t._startTime;n.event="error";pt.publishEvent(new pt.TelemetryEventData(r.CustomerIntelligenceConstants.Process.AREA,"MigrateProjectsDialog",n,i,u))},{wait:{image:ii.getResourcesFile("big-progress.gif"),message:c.htmlEncode(f.ProgressPleaseWait),target:this.getElement()}})},t.prototype._cancel=function(){var n=(new Date).getTime(),t=n-this._startTime;pt.publishEvent(new pt.TelemetryEventData(r.CustomerIntelligenceConstants.Process.AREA,"MigrateProjectsDialog",{event:"canceled"},n,t));this.onCancelClick()},t}(p.ModalDialogO);t.MigrateProjectsDialog=cu;hr=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initialize=function(){var t=this;this._options.url=wi(this._tfsContext,"ProcessSuccessDialog","admin");this._options.urlParams={processName:t._processName};this._options.success=function(){t._populateDialog()};n.prototype.initialize.call(this)},t.prototype.initializeOptions=function(t){var s=this,i,u,e,o;this._processName=t.processName;t.getProcesses&&(this._getProcesses=t.getProcesses);t.processTypeId&&(this._processTypeId=t.processTypeId);this._populate=t.populate;this._header=t.header;this._description=t.description;this._tfsContext=t.tfsContext;this._startTime=(new Date).getTime();pt.publishEvent(new pt.TelemetryEventData(r.CustomerIntelligenceConstants.Process.AREA,"ProcessSuccessDialog",{event:"open"},this._startTime));i=t.buttons||{};for(u in i)e=this,o=i[u].click,i[u].click=function(){e.onClose();o(e._startTime)};i.cancelButton={id:"close",text:f.Close,click:function(){s._close()}};n.prototype.initializeOptions.call(this,$.extend(t,{buttons:i,height:525,minHeight:300,minWidth:450}))},t.prototype._getProcessTypeId=function(){var n,i,t;if(!this._processTypeId&&(this._populate&&this._populate(),this._getProcesses)){n=this._getProcesses();for(i in n)if(t=n[i],t.Name===this._processName){this._processTypeId=t.TemplateTypeId;break}}return this._processTypeId},t.prototype._populateDialog=function(){var n=this;$("#dialog-header",this._element).text(c.htmlEncode(this._header));$("#dialog-description",this._element).text(c.htmlEncode(this._description));$("#create-project",this._element)&&$("#create-project",this._element).click(function(){var t=(new Date).getTime(),i=t-n._startTime;pt.publishEvent(new pt.TelemetryEventData(r.CustomerIntelligenceConstants.Process.AREA,"ProcessSuccessDialog",{event:"create-project"},t,i));n._processTypeId||(n._processTypeId=n._getProcessTypeId());at.FeatureAvailabilityService.isFeatureEnabled(gt.FeatureAvailabilityFlags.WebAccessMyExperiencesNewProjectCreation)?ni.MyExperiencesUrls.getCreateNewProjectUrl(n._tfsContext.navigation.collection.name,{source:"ProcessCreation.SucceededScenario",processTemplate:n._processName}).then(function(n){window.location.href=n}):p.show(ai,{successCallback:n._populate,templateTypeId:n._processTypeId})});$("#change-projects",this._element)&&$("#change-projects",this._element).click(function(){n._processTypeId||(n._processTypeId=n._getProcessTypeId());var t={targetName:n._processName,targetId:n._processTypeId,populate:n._populate,tfsContext:n._tfsContext};p.Dialog.show(cu,t);n.onClose()});$("#customize-process",this._element).attr("href",nt.getHistoryService().getFragmentActionLink("overview",{process:this._processName})).click(function(){var t=(new Date).getTime(),i=t-n._startTime;pt.publishEvent(new pt.TelemetryEventData(r.CustomerIntelligenceConstants.Process.AREA,"ProcessSuccessDialog",{event:"customize-project"},t,i));n.onClose()})},t.prototype._close=function(){var n=(new Date).getTime(),t=n-this._startTime;pt.publishEvent(new pt.TelemetryEventData(r.CustomerIntelligenceConstants.Process.AREA,"ProcessSuccessDialog",{event:"close"},n,t));this.onClose()},t}(p.ModalDialog);t.ProcessSuccessDialog=hr;i.tfsModuleLoaded("TFS.Admin.Dialogs",t);nf=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this)},t.prototype.initializeOptions=function(i){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"errorMessage-dialog",dynamicSize:!1,resizable:!1,width:t.DIALOG_WIDTH,defaultButton:"ok",buttons:{ok:{id:"ok",text:i&&i.okText||f.DialogOkButton,click:h.delegate(this,this.onOkClick)}}},i))},t.prototype.onOkClick=function(){this.close()},t.DIALOG_WIDTH=400,t}(p.Dialog);t.ErrorMessageDialog=nf;tf=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({height:"auto",minHeight:"auto",width:500,minWidth:500},t))},t.prototype.initialize=function(){var i,r;n.prototype.initialize.call(this);var u=this.getElement(),f=$("<table>").appendTo(u),t=$("<tr>").appendTo(f),e=$("<td>").appendTo(t).addClass("remove-dialog-warning-td");if($("<span/>").appendTo(e).addClass("remove-dialog-warning-icon"),i=$("<td>").appendTo(t).addClass("remove-dialog-warning-td"),this._options&&this._options.dialogTextStrings)for(r in this._options.dialogTextStrings)$("<div>").addClass("admin-confirm-dialog-text").text(this._options.dialogTextStrings[r]).appendTo(i);this.updateOkButton(!0)},t.prototype.onOkClick=function(){this.onClose();this._options&&$.isFunction(this._options.okCallback)&&this._options.okCallback()},t.prototype.onCancelClick=function(n){this.onClose();this._options&&$.isFunction(this._options.cancelCallback)&&this._options.cancelCallback(n)},t}(p.ConfirmationDialogO);t.ConfirmRemoveDialog=tf});
define("Admin/Scripts/TFS.Admin.Security",["require","exports","VSS/VSS","VSS/Controls/Panels","VSS/SDK/Shim","VSS/Utils/Core","VSS/Utils/String","Admin/Scripts/Resources/TFS.Resources.Admin","VSS/Events/Document","VSS/Controls","VSS/Controls/Dialogs","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.Legacy.Ajax","VSS/Controls/Menus","VSS/Diag","VSS/Controls/Notifications","Admin/Scripts/TFS.Admin.Common","Admin/Scripts/TFS.Admin.Dialogs","VSS/Utils/UI","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/TFS.Service","VSS/Identities/Picker/Services","VSS/Identities/Picker/Controls","jQueryUI/core","jQueryUI/button","VSS/LoaderPlugins/Css!Site"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt){var ht=l.TfsContext.getDefault().configuration,ct=l.TfsContext,lt=l.TfsContext.getDefault(),it=k.domElem,rt=f.delegate,at=function(){function n(n){this.permissionSetId=n.permissionSetId;this.token=n.token;this.tokenDisplayName=n.tokenDisplayName;this.canManageGroups=n.canManageGroups;this.inheritPermissions=n.inheritPermissions;this.canTokenInheritPermissions=n.canTokenInheritPermissions;this.showAllGroupsIfCollection=n.showAllGroupsIfCollection}return n.parseContext=function(t){var i,r;return(i=$(".permissions-context",t||document),i.length>0&&(r=i.eq(0).html(),r))?new n(f.parseMSJSON(r,!1)):null},n}(),ot,st,vt,yt,ut,ft,et,pt,bt,wt;t.PermissionsContext=at;i.initClassPrototype(at,{permissionSetId:null,token:null,tokenDisplayName:null,canManageGroups:null,inheritPermissions:null,canTokenInheritPermissions:null});ot=function(){function n(n,t,i,r,u){this.IsRemovingIdentity=!1;this.TeamFoundationId=n;this.DescriptorIdentityType=t;this.DescriptorIdentifier=i;this.PermissionSetId=r;this.PermissionSetToken=u;this.RefreshIdentities=!1}return n.prototype.setUpdates=function(n){this.Updates=n},n}();i.initClassPrototype(ot,{TeamFoundationId:null,DescriptorIdentityType:null,DescriptorIdentifier:null,PermissionSetId:null,PermissionSetToken:null,TokenDisplayName:null,Updates:null});st=function(){function n(n,t,i,r){this.PermissionId=n;this.PermissionBit=t;this.NamespaceId=i;this.Token=r}return n}();i.initClassPrototype(st,{PermissionId:null,PermissionBit:null,NamespaceId:null,Token:null});vt=function(){function n(n){this.canEdit=n.canEdit;this.displayName=n.displayName;this.explicitPermissionId=n.explicitPermissionId;this.inheritDenyOverride=n.inheritDenyOverride;this.namespaceId=n.namespaceId;this.originalPermissionId=n.originalPermissionId;this.permissionBit=n.permissionBit;this.permissionDisplayString=n.permissionDisplayString;this.permissionId=n.permissionId;this.permissionToken=n.permissionToken}return n}();i.initClassPrototype(vt,{canEdit:null,displayName:null,explicitPermissionId:null,inheritDenyOverride:null,namespaceId:null,originalPermissionId:null,permissionBit:null,permissionDisplayString:null,permissionId:null,permissionToken:null});yt=function(n){function t(){n.call(this)}return __extends(t,n),t.prototype.beginGetSecurityInfo=function(n,t,i,r,u){var h=this,f,s;f=t.permissionSetId;s=t.token;a.getMSJSON(this.getTfsContext().getActionUrl("DisplayPermissions","security",{area:"api"}),{tfid:n.TeamFoundationId,descriptorIdentityType:n.DescriptorIdentityType,descriptorIdentifier:n.DescriptorIdentifier,permissionSetId:f,permissionSetToken:s},function(n){$.isFunction(r)&&r.call(h,n)},u,{wait:{image:ht.getResourcesFile("big-progress.gif"),message:e.htmlEncode(o.ProgressPleaseWait),target:i}})},t}(g.TfsService);t.SecurityServer=yt;ut=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({cssClass:"permission-info vertical-fill-layout"},t))},t.prototype.initialize=function(){var t;n.prototype.initialize.call(this);this._createWrapper();t=this._element.find(".permission-content");this._createPermissionsContent(t.find(".content"));this._createClearButton(t.find(".permission-link-buttons"));this._createActionButtons(this._element.find(".permission-actions"));this._element.closest(".resizeTarget").resize();this._setupButtons();this._element.find(".trace-permission-action").css("visibility","hidden");this._bindEvents();this._runningDocumentsEntry=s.getRunningDocumentsTable().add("PermissionsView",this);y.logTracePoint("DisplayPermissions.Ready")},t.prototype._dispose=function(){s.getRunningDocumentsTable().remove(this._runningDocumentsEntry)},t.prototype.isDirty=function(){return this._getPermissionsChanges().length>0},t.prototype.getTeamFoundationId=function(){return this._options.TeamFoundationId},t.prototype.getHeader=function(){return this._options.header},t.prototype.setPermissionsContext=function(n){this._permissionsContext=n},t.prototype._createWrapper=function(){var n;this._options.header&&$(it("div")).addClass("description fixed-header").appendTo(this._element).text(this._options.header);n=$(it("div")).addClass("permission-content").addClass("fill-content").appendTo(this._element);$(it("div")).addClass("display-permissions-error-pane").appendTo(n);$(it("div")).addClass("content").appendTo(n);$(it("div")).addClass("permission-link-buttons").appendTo(n);$(it("div")).addClass("permission-actions").addClass("fixed-footer").appendTo(this._element)},t.prototype._createActionButtons=function(n){var t;this._options.removeEnabled===!0&&(t=this._createButtonContainer().appendTo(n),this._removeButton=$(it("button")).addClass("submit-button").addClass("btn-remove").attr("type","button").text(o.RemoveAction).appendTo(t));t=this._createButtonContainer().appendTo(n);this._saveButton=$(it("button")).addClass("submit-button").addClass("btn-save-permissions").attr("type","button").text(o.SaveChanges).appendTo(t);t=this._createButtonContainer().appendTo(n);this._undoButton=$(it("button")).addClass("submit-button").addClass("btn-undo-changes").attr("type","button").text(o.UndoChanges).appendTo(t);t=this._createButtonContainer().appendTo(n);this._closeButton=$(it("button")).addClass("submit-button").addClass("btn-close").attr("type","button").text(o.Close).appendTo(t)},t.prototype._createButtonContainer=function(){return $(it("div")).addClass("permission-button")},t.prototype._createClearButton=function(n){this._clearButton=$(it("a")).addClass("link-clear-permissions").text(o.ClearExplicitPermissions).attr("title",o.ClearExplicitPermissions).attr("tabindex",0).appendTo(n)},t.prototype._createPermissionsContent=function(n){var s,i,r,h,c,f,u,l;if(this._options.autoGrantCurrentIdentity?$(it("div")).addClass("permission-warning").text(o.UnableToEditAdminGroup).appendTo(n):this._options.isAadGroup?$(it("div")).addClass("permission-warning").text(o.PermissionsCannotSetAADGroup).appendTo(n):this._options.isAbleToEditAtLeastOnePermission||$(it("div")).addClass("permission-warning").text(o.DoNotHavePermissions).appendTo(n),l=$(it("div")).addClass("ace-control").addClass(this._options.canEditPermissions?"permissions-explicit":"permissions-effective").appendTo(n),s=$(it("table")).addClass("permissions-table"),this._options.permissions){for(f=0,c=this._options.permissions.length;f<c;f++)u=this._options.permissions[f],i=$(it("tr")).addClass("permission-row").appendTo(s),i.data(t.PERMISSIONDATA,new vt(u)),this._options.canEditPermissions&&u.canEdit||i.addClass("permission-not-editable"),r=$(it("td")).addClass("permission-name-column").text(u.displayName).appendTo(i),r=$(it("td")).addClass("permission-value-column").addClass("accessible").text(u.permissionDisplayString).attr("tabindex",0).appendTo(i),u.inheritDenyOverride?(r.addClass("permissions-inherit-deny"),r=$(it("td")).addClass("trace-permission-column").attr("tabindex",0).appendTo(i),h=$(it("a")).addClass("trace-permission-action").text(e.format("{0}",o.TracePermissionTextForExplicitAllow)).appendTo(r)):u.displayTrace&&(r=$(it("td")).addClass("trace-permission-column").appendTo(i),h=$(it("a")).addClass("trace-permission-action").appendTo(r),$(it("span")).attr("tabindex",0).text(o.TracePermissionText).appendTo(h));s.appendTo(l)}},t.prototype._bindEvents=function(){this._element.find(".ace-control.permissions-explicit tr:not(.permission-not-editable) .permission-value-column").click(rt(this,this._permissionClickEvent));this._element.find(".trace-permission-column").bind("keyup",rt(this,this._traceKeySupport));this._element.find(".trace-permission-action").click(rt(this,this._traceClicked));this._element.find(".permission-value-column").bind("focus",rt(this,this._showTraceColumn));this._element.find(".ace-control tr").bind("mouseover mouseout",rt(this,this._showTraceColumn));this._element.find("td.trace-permission-column span").bind("blur",rt(this,this._showTraceColumn));this._element.find(".ace-control tr:not(.permission-not-editable)").bind("mouseover mouseout",rt(this,this._showButtonBorder));this._element.find(".permission-value-column").bind("keyup",rt(this,this._permissionKeySupport))},t.prototype._clearPermissionsClicked=function(){var n=this;this._element.find(".ace-control tr:not(.permission-not-editable) .permission-value-column").each(function(){var i=$(this).closest("tr").data(t.PERMISSIONDATA);(i.permissionId===1||i.permissionId===2||i.explicitPermissionId===1||i.explicitPermissionId===2)&&($(this).text(o.NotSet),i.permissionId=0,i.originalPermissionId===0?$(this).removeClass("permission-changed-background"):$(this).addClass("permission-changed-background"),n._saveButton.button("enable"),n._undoButton.button("enable"))})},t.prototype._removeButtonClick=function(){confirm(o.PermissionsDialogRemoveUserConfirmation)&&(this._element.find(".ace-control tr:not(.permission-not-editable) .permission-value-column").each(function(){var n=$(this).closest("tr").data(t.PERMISSIONDATA);(n.permissionId===1||n.permissionId===2||n.explicitPermissionId===1||n.explicitPermissionId===2)&&(n.permissionId=0)}),this._performSave(!0,!0))},t.prototype._closeButtonClicked=function(){window.external&&"Close"in window.external&&window.external.Close()},t.prototype._permissionClickEvent=function(n){var r=$(n.target),i=r.closest("tr").data(t.PERMISSIONDATA),u=!1;switch(i.permissionId){case 1:r.html(o.Deny);i.permissionId=2;break;case 2:i.originalPermissionId===3?(r.html(o.InheritedAllow),i.permissionId=3):i.originalPermissionId===4?(r.html(o.InheritedDeny),i.permissionId=4):(r.html(o.NotSet),i.permissionId=0);break;case 0:case 3:case 4:r.html(o.Allow);i.permissionId=1}i.permissionId!==i.originalPermissionId?r.addClass("permission-changed-background"):r.removeClass("permission-changed-background");this._element.find(".ace-control .permission-row").each(function(){var n=$(this).data(t.PERMISSIONDATA);n.originalPermissionId!==n.permissionId&&(u=!0)});u?(this._saveButton.button("enable"),this._undoButton.button("enable")):(this._saveButton.button("disable"),this._undoButton.button("disable"))},t.prototype._permissionKeySupport=function(n){var t=$(n.target);(n.keyCode===$.ui.keyCode.ENTER||n.keyCode===$.ui.keyCode.SPACE)&&t.click()},t.prototype._saveButtonClicked=function(){this._performSave()},t.prototype._performSave=function(n,t){var i=new ot(this._options.currentTeamFoundationId,this._options.descriptorIdentityType,this._options.descriptorIdentifier,this._permissionsContext.permissionSetId,this._permissionsContext.token);i.setUpdates(this._getPermissionsChanges());i.RefreshIdentities=n||!1;i.IsRemovingIdentity=t||!1;this._fire("savePermissions",i)},t.prototype._getPermissionsChanges=function(){var n=[],i=0;return this._element.find(".ace-control .permission-row").each(function(){var r=$(this).closest("tr").data(t.PERMISSIONDATA),u;r.originalPermissionId!==r.permissionId&&(u=new st(r.permissionId,r.permissionBit,r.namespaceId,r.permissionToken),n[i]=u,i++)}),n},t.prototype._setupButtons=function(){var n,t,i;this._undoButton&&(this._undoButton.button(),this._undoButton.button("disable"),this._undoButton.click(rt(this,this._undoButtonClicked)));this._saveButton&&(this._saveButton.button(),this._saveButton.button("disable"),this._saveButton.click(rt(this,this._saveButtonClicked)));this._clearButton&&(n=this._options.canEditPermissions,t=this._options.areExplicitPermissionsSet,n&&t?(this._clearButton.click(rt(this,this._clearPermissionsClicked)),this._clearButton.bind("keydown",rt(this,this._clearButtonKeyDown))):this._clearButton.addClass("admin-disabled-link"));this._closeButton&&(this._closeButton.click(rt(this,this._closeButtonClicked)),this._closeButton.button());this._removeButton&&(this._removeButton.button(),n=this._options.canEditPermissions,i=this._options.isEligibleForRemove,n&&i?(this._removeButton.button("enable"),this._removeButton.click(rt(this,this._removeButtonClick))):this._removeButton.button("disable"))},t.prototype._clearButtonKeyDown=function(n){(n.keyCode===$.ui.keyCode.ENTER||n.keyCode===$.ui.keyCode.SPACE)&&this._clearPermissionsClicked()},t.prototype._showButtonBorder=function(n){var t=$(n.target).closest("tr");n.type==="mouseover"?t.find(".permission-value-column").addClass("hovered"):t.find(".permission-value-column").removeClass("hovered")},t.prototype._showTraceColumn=function(n){var u=$(n.target),i=u.closest("tr"),r=i.data(t.PERMISSIONDATA);$(".trace-permission-action").css("visibility","hidden");(n.type==="mouseover"||n.type==="focus")&&(r.permissionId===3||r.permissionId===4)&&i.find(".trace-permission-action").css("visibility","visible")},t.prototype._traceClicked=function(n){var o=$(n.target),r,i,u,e;r=new ot(this._options.TeamFoundationId,this._options.descriptorIdentityType,this._options.descriptorIdentifier,this._permissionsContext.permissionSetId,this._permissionsContext.token);r.TokenDisplayName=this._permissionsContext.tokenDisplayName;e=o.closest(".permission-row");i=e.data(t.PERMISSIONDATA);u=new st(i.permissionId,i.permissionBit,i.namespaceId,i.permissionToken);r.Updates=[u];c.show(b.TracePermissionDialog,{urlParams:{data:f.stringifyMSJSON(r)}})},t.prototype._traceKeySupport=function(n){var i=$(n.target),t;(n.keyCode===$.ui.keyCode.ENTER||n.keyCode===$.ui.keyCode.SPACE)&&(t=i.closest("a.trace-permission-action"),t.click(),t.css("visibility","hidden"))},t.prototype._undoButtonClicked=function(){this._fire("identitySelected",this.currentIdentity)},t.enhancementTypeName="tfs.security.permissionsview",t.PERMISSIONDATA="permission-data",t}(h.BaseControl);t.PermissionsView=ut;i.initClassPrototype(ut,{_saveButton:null,_undoButton:null,_clearButton:null,_closeButton:null,_runningDocumentsEntry:null,_permissionsContext:null,currentIdentity:null});i.classExtend(ut,ct.ControlExtensions);ft=function(n){function t(t){n.call(this,t);w.AdminUIHelper.validateAdminUiFeatureFlagState(this._options.tfsContext)}return __extends(t,n),t.prototype.initialize=function(){var t=this;n.prototype.initialize.call(this);this._permissionsContext=at.parseContext(this._element);this._bind(this._element,"identitySelected",function(n,i){t._onIdentitySelected(i);y.logTracePoint("FetchIdentityData")});this._bind(this._element,"savePermissions",function(n,i){t._savePermissions(i)});this._identityInfoDiv=this._element.find("#identityInfo");this._mainIdentityGridDiv=this._element.find(".main-identity-grid");this._securityServer=d.ProjectCollection.getConnection(this._options.tfsContext).getService(yt)},t.prototype._fetchSecurityInfo=function(n){function f(n){u===r._requestId&&r._completePermissionsUpdate(i,n)}var t,i=n,u=++this._requestId,r=this;this._identityInfoDiv.empty();i?(t=this._mainIdentityGrid.getCurrentIdentity(),this._securityServer.beginGetSecurityInfo(t,this._permissionsContext,this._identityInfoDiv,f)):this._noIdentitySelected()},t.prototype._completePermissionsUpdate=function(n,t,i,r){var u;this._identityInfoDiv.empty();this._permissionsView=h.BaseControl.createIn(ut,this._identityInfoDiv,$.extend({header:i,removeEnabled:this._options.removeEnabled},t));this._permissionsView.setPermissionsContext(this._permissionsContext);u=this._mainIdentityGrid.getCurrentIdentity();u&&u.TeamFoundationId===n&&(n=this._permissionsView.getTeamFoundationId(),n&&(u.TeamFoundationId=n),this._permissionsView.currentIdentity=u,this._mainIdentityGrid.updateRow(this._mainIdentityGrid._selectedIndex),r&&this._mainIdentityGrid.focus());this._element.closest(".no-chrome").length&&h.Enhancement.ensureEnhancement(w.VerticalFillLayout,this._identityInfoDiv)},t.prototype._setIdentityList=function(n){var t=this,i;if(this._mainIdentityGrid)$.extend(this._mainIdentityGrid._options,n),this._mainIdentityGrid.populate(),w.AdminUIHelper.adminUIFeatureFlagEnabled?this._identityPickerSearchControl.clear():this._identitySearchControl.cancelSearch();else if(i={host:$(".hub-splitter",this._element),isTeam:this._options.isTeam},$.extend(i,n),this._mainIdentityGrid=h.Enhancement.enhance(w.MainIdentityGrid,this._mainIdentityGridDiv,i),w.AdminUIHelper.adminUIFeatureFlagEnabled){var r=$(".identity-search-box .ip-groups-search-container",this._element),u=function(n){return{Description:n.description,DescriptorIdentityType:null,DescriptorIdentifier:null,DisplayName:n.displayName,Domain:n.scopeName,AccountName:n.signInAddress,IsWindowsUser:(n.originDirectory.toLowerCase().trim()==w.AdminUIHelper.ACTIVE_DIRECTORY_KEY||n.originDirectory.toLowerCase().trim()==w.AdminUIHelper.WINDOWS_MACHINE_DIRECTORY_KEY)&&n.entityType.toLowerCase()==w.AdminUIHelper.USER_ENTITY_TYPE_KEY?!0:!1,IsWindowsGroup:(n.originDirectory.toLowerCase().trim()==w.AdminUIHelper.ACTIVE_DIRECTORY_KEY||n.originDirectory.toLowerCase().trim()==w.AdminUIHelper.WINDOWS_MACHINE_DIRECTORY_KEY)&&n.entityType.toLowerCase()!=w.AdminUIHelper.USER_ENTITY_TYPE_KEY?!0:!1,Errors:[],FriendlyDisplayName:n.displayName,IdentityType:n.entityType.toLowerCase(),IsProjectLevel:null,IsTeam:null,MemberCountText:null,Scope:n.scopeName,SubHeader:n.signInAddress,TeamFoundationId:n.localDirectory&&n.localId?n.localId:n.originId,Warnings:[],IsAadGroup:n.originDirectory.toLowerCase().trim()==w.AdminUIHelper.AZURE_ACTIVE_DIRECTORY_KEY&&n.entityType.toLowerCase()!=w.AdminUIHelper.USER_ENTITY_TYPE_KEY?!0:!1,RestrictEditingMembership:null}},f=function(){t._mainIdentityGrid.cancelSearch()};this._identityPickerSearchControl=h.create(wt,r,{operationScope:{IMS:!0,Source:!0},identityType:{User:!0,Group:!0},pageSize:10,callbacks:{onItemSelect:function(n){n?t._mainIdentityGrid.fullSearch([u(n)],!1):t._mainIdentityGrid.populate()}}})}else this._identitySearchControl=$(".identity-search-box .identity-search-control",this._element).IdentitySearchControl({identityList:this._mainIdentityGrid}).data("TFS-IdentitySearchControl")},t.prototype._savePermissions=function(n){var t=this,i=++this._requestId;a.postMSJSON(this._options.tfsContext.getActionUrl("ManagePermissions","security",{area:"api"}),{updatePackage:f.stringifyMSJSON(n)},function(r){if(i===t._requestId){if(r.licenseErrors[0]){h.Enhancement.enhance(p.MessageAreaControl,$(".display-permissions-error-pane",t._element)).setMessage($("<div>"+r.licenseErrors[0]+"<\/div>"));n.IsRemovingIdentity===!0&&t._completePermissionsUpdate(n.TeamFoundationId,r,t._permissionsView&&t._permissionsView.getHeader(),!0,n.RefreshIdentities);return}t._completePermissionsUpdate(n.TeamFoundationId,r,t._permissionsView&&t._permissionsView.getHeader(),!0,n.RefreshIdentities);r.aadErrors[0]&&h.Enhancement.enhance(p.MessageAreaControl,$(".display-permissions-error-pane",t._element)).setMessage($("<div>"+r.aadErrors[0]+"<\/div>"),p.MessageAreaType.Warning)}},function(n){i===t._requestId&&h.Enhancement.enhance(p.MessageAreaControl,$(".display-permissions-error-pane",t._element)).setMessage(n.message)},{tracePoint:"ExplicitPermissions.BtnSavePermissions.Success",wait:{image:ht.getResourcesFile("big-progress.gif"),message:o.ProgressPleaseWait,target:this._element}})},t.prototype._noIdentitySelected=function(){},t.prototype._onIdentitySelected=function(n){this._fetchSecurityInfo(n?n.TeamFoundationId:null)},t.enhancementTypeName="tfs.admin.SecurityBaseView",t}(h.BaseControl);t.SecurityBaseView=ft;i.initClassPrototype(ft,{_securityServer:null,_requestId:0,_permissionsView:null,_permissionsContext:null,_identityInfoDiv:null,_mainIdentityGrid:null,_mainIdentityGridDiv:null,_identitySearchControl:null,_identityPickerSearchControl:null});i.classExtend(ft,ct.ControlExtensions);et=function(n){function t(t){n.call(this,$.extend({removeEnabled:!0},t));this._options.collectionServiceHost&&(this._options.tfsContext=this._options.tfsContext.getCollectionTfsContext(this._options.collectionServiceHost))}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this._toolBar=this._initializeActions();this._setInheritanceMenu();this._setSecurityIdentityList();this._bind(window.document,"keydown",rt(this,this._onCloseCheck),!0);this._onExecuteCommandDelegate=rt(this,this._onExecuteCommand);v.menuManager.attachExecuteCommand(this._onExecuteCommandDelegate)},t.prototype._completePermissionsUpdate=function(t,i,r,u,f){f===!0?this._setSecurityIdentityList():n.prototype._completePermissionsUpdate.call(this,t,i,r,u)},t.prototype._dispose=function(){v.menuManager.detachExecuteCommand(this._onExecuteCommandDelegate);n.prototype._dispose.call(this)},t.prototype._onCloseCheck=function(n){n.keyCode&&window.external&&(n.keyCode===$.ui.keyCode.ESCAPE&&"Close"in window.external?window.external.Close():n.keyCode===k.KeyCode.F1&&"Help"in window.external&&window.external.Help())},t.prototype._onExecuteCommand=function(n,t){switch(t.get_commandName()){case"admin-explicit-member-permissions":c.show(b.AddMembersForPermissionsDialog,{mainTitle:this._options.identityTitle,permissionSetId:this._permissionsContext.permissionSetId,permissionSetToken:this._permissionsContext.token,identityPrefix:this._options.identityPrefix,identityGrid:this._mainIdentityGrid,identitySearchControl:w.AdminUIHelper.adminUIFeatureFlagEnabled?this._identityPickerSearchControl:this._identitySearchControl,tfsContext:this._options.tfsContext});break;case"admin-explicit-tfsgroup-permissions":c.show(b.AddMembersForPermissionsDialog,{mainTitle:this._options.identityTitle,permissionSetId:this._permissionsContext.permissionSetId,permissionSetToken:this._permissionsContext.token,identityPrefix:this._options.identityPrefix,browseGroups:!0,identityGrid:this._mainIdentityGrid,identitySearchControl:w.AdminUIHelper.adminUIFeatureFlagEnabled?this._identityPickerSearchControl:this._identitySearchControl,showAllGroupsIfCollection:this._permissionsContext.showAllGroupsIfCollection,tfsContext:this._options.tfsContext});break;case"inheritance-on":this._changeInheritance(!0);break;case"inheritance-off":this._changeInheritance(!1)}},t.prototype._identitySelected=function(n,t){this._closeButton=null;this._fetchSecurityInfo(t)},t.prototype._noIdentitySelected=function(){if(this._element.closest(".no-chrome").length){var n,t,i,r;n=$(it("table")).appendTo(this._identityInfoDiv).addClass("no-permission-info");t=$(it("tr")).appendTo(n);i=$(it("td")).appendTo(t);r=$(it("div")).appendTo(i).addClass("permission-button");this._closeButton=$(it("button")).appendTo(r).addClass("submit-button").attr("class","btn-close").text(o.Close);this._closeButton.click(rt(this,this._closeButtonClicked));this._closeButton.button()}},t.prototype._closeButtonClicked=function(){window.external&&"Close"in window.external&&window.external.Close()},t.prototype._initializeActions=function(){var n=[],t=[];return t.push({id:"admin-explicit-member-permissions",text:this._options.tfsContext.isHosted?o.AddUser:o.AddWindowsIdentity,noIcon:!0,disabled:!this._permissionsContext.canManageGroups}),t.push({id:"admin-explicit-tfsgroup-permissions",text:l.TfsContext.getDefault().isHosted?o.AddTfsGroupHosted:o.AddTfsGroup,noIcon:!0,disabled:!this._permissionsContext.canManageGroups}),n.push({id:"permissions-actions",idIsAction:!1,text:o.AddMenuItem,noIcon:!0,childItems:t}),this._permissionsContext.canTokenInheritPermissions&&n.push({id:"inheritance-settings",idIsAction:!1,noIcon:!0,childItems:this._createInheritanceMenuItems(),text:o.Inheritance}),h.BaseControl.createIn(v.MenuBar,$(".toolbar",this._element),{items:n})},t.prototype._createInheritanceMenuItems=function(){var n=[];return n.push({id:"inheritance-on",text:o.On,icon:this._permissionsContext.inheritPermissions?"icon-tick":"",disabled:!this._permissionsContext.canManageGroups}),n.push({id:"inheritance-off",text:o.Off,icon:this._permissionsContext.inheritPermissions?"":"icon-tick",disabled:!this._permissionsContext.canManageGroups}),n},t.prototype._setInheritanceMenu=function(){var n=this._toolBar.getItem("inheritance-settings"),t=this._permissionsContext.inheritPermissions?o.InheritanceEnabled:o.InheritanceDisabled;n&&(n.updateTitle(t),n.updateItems(this._createInheritanceMenuItems()))},t.prototype._setSecurityIdentityList=function(){y.logTracePoint("SecurityView._setSecurityIdentityList.started");this._setIdentityList({identityListAction:this._options.tfsContext.getActionUrl("ReadExplicitIdentitiesJson","security",{area:"api"}),searchParams:{permissionSetId:this._permissionsContext.permissionSetId,permissionSetToken:this._permissionsContext.token}});y.logTracePoint("SecurityView._setSecurityIdentityList.complete")},t.prototype._changeInheritance=function(n){var t=this,r,u,i;r=this._permissionsContext.permissionSetId;u=this._permissionsContext.token;i=!this._permissionsContext.inheritPermissions;n!==this._permissionsContext.inheritPermissions&&a.postHTML(this._options.tfsContext.getActionUrl("ChangeInheritance","security",{area:"api"}),{permissionSet:r,token:u,inheritPermissions:i},function(){t._setSecurityIdentityList();t._permissionsContext.inheritPermissions=i;t._setInheritanceMenu()},null,{wait:{image:ht.getResourcesFile("big-progress.gif"),message:o.ProgressPleaseWait,target:this._element}})},t.enhancementTypeName="tfs.admin.SecurityView",t}(ft);t.SecurityView=et;i.initClassPrototype(et,{_closeButton:null,_onExecuteCommandDelegate:null,_toolBar:null});i.classExtend(et,ct.ControlExtensions);pt=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({cssClass:"admin-dialog",width:800,height:650,minWidth:600,minHeight:400,modal:!0,open:function(){y.logTracePoint("SecurityDialog.OpenDialog")},cancelText:o.Close},t))},t.prototype.initialize=function(){var t=this;this._options.tokenDisplayVal||(this._options.tokenDisplayVal=this._options.token);this._options.title||(this._options.title=e.format(o.SecurityDialogTitle,this._options.tokenDisplayVal));this._options.buttons=[this._options.buttons.cancel];this._element.closest(".ui-dialog").addClass(".resizeTarget");this._options.url=this._options.tfsContext?this._options.tfsContext.getActionUrl("index","security",{area:"admin",useApiUrl:!0}):lt.getActionUrl("index","security",{area:"admin",useApiUrl:!0});this._options.urlParams={permissionSet:this._options.permissionSet,token:this._options.token,tokenDisplayVal:this._options.tokenDisplayVal,style:"min",showAllGroupsIfCollection:this._options.showAllGroupsIfCollection};this._options.error=function(n){t.onError(n);return!0};n.prototype.initialize.call(this);$(".ui-dialog .ui-dialog-content").css("position","relative")},t.prototype.onError=function(n){this.getElement().empty();var t=f.tryParseMSJSON(n.responseText,!1);t&&t.message&&$(it("div","error")).appendTo(this.getElement()).text(t.message)},t._controlType="SecurityDialog",t}(c.ModalDialogO);t.SecurityDialog=pt;u.registerContent("tfs.admin.security-dialog-content",function(n){h.create(r.AjaxPanel,n.$container,{url:lt.getActionUrl("index","security",{area:"admin",useApiUrl:!0}),urlParams:{permissionSet:n.options.permissionSet,token:n.options.token,tokenDisplayVal:n.options.tokenDisplayVal,style:"min",showAllGroupsIfCollection:n.options.showAllGroupsIfCollection}})});bt=function(){function n(n,t){this._permissionSet=n;this._options=t||{}}return n.create=function(t,i){return new n(t,i)},n.prototype.showPermissions=function(n,t,i,r){var u="",e=this._permissionSet,f=this._options;f.scope&&(u+=f.scope);n&&(u&&(u+=f.separator||"/"),u+=n);r||(r=lt);c.show(pt,{permissionSet:e,token:u,tokenDisplayVal:t,title:i,tfsContext:r,showAllGroupsIfCollection:f.showAllGroupsIfCollection})},n}();t.SecurityManager=bt;wt=function(n){function t(t){n.call(this,t);this._doneTypingInterval=300;this._minimumPrefixSize=3}return __extends(t,n),t.prototype.initialize=function(){var i=this,f,e;n.prototype.initialize.call(this);this._searchTerm="";var r=Math.max(this._element.innerHeight(),t.DEFAULT_HEIGHT),o=Math.max(this._element.innerWidth(),t.DEFAULT_WIDTH),u=$("<div>").addClass("identity-picker-search-box").height(r).appendTo(this._element);u.bind("click",rt(this,function(n){$(n.target).hasClass("identity-picker-input")||$(n.target).hasClass("identity-picker-search-drop-icon")||i._$input.focus()}));f=nt.ServiceHelpers.getIdentityTypeList(this._options.identityType);e=this._generatePlaceHolder(f);this._$input=$("<input>").attr("type","text").attr("autocomplete","off").attr("placeholder",e).addClass("identity-picker-input");this._$input.height(r).width(o).appendTo(u);this._bind(this._$input,"keyup",rt(this,this._onInputKeyUp));this._bind(this._$input,"blur",rt(this,this._onInputBlur));this._bind(this._$input,"input",rt(this,this._onInputChange));this._bind(this._$input,"click",rt(this,this._onInputClick));this._identityPickerDropdown=h.create(tt.IdentityPickerDropdownControl,this._element,{pageSize:this._options.pageSize,onItemSelect:function(n){if(i._options.callbacks&&i._options.callbacks.onItemSelect)i._options.callbacks.onItemSelect(n);i._identityPickerDropdown.hide()},identityType:this._options.identityType,operationScope:this._options.operationScope,httpClient:this._options.httpClient?this._options.httpClient:null,showContactCard:!0,showMru:!1,consumerId:w.AdminUIHelper.FILTER_USERS_AND_GROUPS_CONSUMER_ID,extensionData:{extensionId:w.AdminUIHelper.TFS_ADMIN_IDENTITY_PICKER_SEARCH_EXTENSION_ID,projectScopeName:l.TfsContext.getDefault().contextData&&l.TfsContext.getDefault().contextData.project?l.TfsContext.getDefault().contextData.project.name:null,collectionScopeName:l.TfsContext.getDefault().contextData&&l.TfsContext.getDefault().contextData.collection?l.TfsContext.getDefault().contextData.collection.name:null,constraints:[w.AdminUIHelper.SEARCH_CONSTRAINT_MATERIALIZED_AAD_GROUPS_ONLY]}})},t.prototype.clear=function(){this._$input.val("")},t.prototype.isDropdownVisible=function(){return this._identityPickerDropdown.isVisible()},t.prototype._generatePlaceHolder=function(n){return this._isInArray(nt.ServiceHelpers.UserEntity,n)&&this._isInArray(nt.ServiceHelpers.GroupEntity,n)?o.SecurityIdentitySearchControl_FilterUsersGroups:this._isInArray(nt.ServiceHelpers.UserEntity,n)&&!this._isInArray(nt.ServiceHelpers.GroupEntity,n)?o.SecurityIdentitySearchControl_FilterUsers:!this._isInArray(nt.ServiceHelpers.UserEntity,n)&&this._isInArray(nt.ServiceHelpers.GroupEntity,n)?o.SecurityIdentitySearchControl_FilterGroups:o.SecurityIdentitySearchControl_Filter},t.prototype._isInArray=function(n,t){return t.indexOf(n)>=0},t.prototype._showProgressCursor=function(){this._fire(t.SEARCH_STARTED_EVENT,null);$(".identity-picker-input",this._element).addClass("busy-cursor")},t.prototype._stopProgressCursor=function(){this._fire(t.SEARCH_FINISHED_EVENT,null);$(".identity-picker-input",this._element).removeClass("busy-cursor")},t.prototype._onInputChange=function(n){var i=this,t=this._getInputText(),r;if(!t||t.length<this._minimumPrefixSize){if(this._identityPickerDropdown.hide(),this._identityPickerDropdown.getIdentities(t?t:""),this._searchTerm=t?t:"",!t&&this._options.callbacks&&this._options.callbacks.onItemSelect)this._options.callbacks.onItemSelect(null);return!0}r=rt(this,function(){var n=i._getInputText();n&&n.length>=i._minimumPrefixSize?i._getIdentities(n):i._stopProgressCursor()});clearTimeout(this._typingTimer);r.bind(this);this._typingTimer=setTimeout(r,this._doneTypingInterval);this._showProgressCursor();n.stopPropagation()},t.prototype._onInputClick=function(){var n=this._getInputText();n&&n.length>=this._minimumPrefixSize&&this._identityPickerDropdown.show()},t.prototype._isDropdownHovered=function(){return this._identityPickerDropdown.getElement()&&$(this._identityPickerDropdown.getElement()).filter(":hover").length>0},t.prototype._isContactCardHovered=function(){return $(".idcard-dialog").length>0&&$(".idcard-dialog").filter(":hover").length>0},t.prototype._onInputBlur=function(){!this._isDropdownHovered()&&!this._isContactCardHovered()&&this._$input.is(":visible")&&this._identityPickerDropdown.isVisible()&&this._identityPickerDropdown.hide()},t.prototype._onInputKeyUp=function(n){if(n.keyCode===$.ui.keyCode.ENTER){var t=this._identityPickerDropdown.getSelectedItem();if(t&&this._options.callbacks&&this._options.callbacks.onItemSelect){this._options.callbacks.onItemSelect(t);return n.stopPropagation(),this._identityPickerDropdown.hide(),!1}}return this._identityPickerDropdown.handleKeyEvent(n),!0},t.prototype._getInputText=function(){return this._$input.val().trim()},t.prototype._getIdentities=function(n){var t=this;this._identityPickerDropdown.getIdentities(n).then(function(){return t._stopProgressCursor()},function(){return t._stopProgressCursor()})},t.SEARCH_STARTED_EVENT="identity-picker-search-started",t.SEARCH_FINISHED_EVENT="identity-picker-search-finished",t.DEFAULT_HEIGHT=24,t.DEFAULT_WIDTH=140,t}(h.Control);t.SecurityIdentitySearchControl=wt;h.Enhancement.registerEnhancement(et,".security-view");i.tfsModuleLoaded("TFS.Admin.Security",t)});
define("Presentation/Scripts/TFS/TFS.Core.Utils",["require","exports","VSS/Diag","VSS/Utils/Core"],function(n,t,i,r){function o(n,t){var u,f,e,i,o,r=!1,s=t||[];for(e=0,i=0,o=0,u=0;u<n.length;u++){if(i=n[u],i==="r")if(r)i=2,r=!1;else{r=!0;continue}else r?r=!1:(o=i,i=1);for(f=0;f<i;f++)e+=o,s[s.length]=e}return s}function s(n){return n.length===0?n:o(n)}function h(n,t){var r=[],i;if(t)for(i in n)r.push(i);else for(i in n)n.hasOwnProperty(i)&&r.push(i);return r}function c(n){var t,i;return document.cookie.length>0&&(t=document.cookie.indexOf(n+"="),t!==-1)?(t=t+n.length+1,i=document.cookie.indexOf(";",t),i===-1&&(i=document.cookie.length),decodeURIComponent(document.cookie.substring(t,i))):""}function l(n,t,i){i===void 0&&(i="/");var r="";window.location.protocol.indexOf("https")!==-1&&(r=";secure");document.cookie=n+"="+encodeURIComponent(t)+";path="+i+r}function b(n,t,i){var u=null,r;if(typeof t!="string"&&!$.isFunction(t))throw new Error("Invalid argument type: 'messageOrTransform'.");return $.isFunction(n)&&(u=function(u){typeof t=="string"?(r=new Error(t),i&&$.each(i,function(n,t){r[n]=t}),r.innerException=u):r=t(u);n(r)}),u}function k(n){return typeof n=="string"}function d(n){var r=[],t,i;return k(n)&&(t=n.split(","),$.each(t,function(n){i=t[n].split(";");$.each(i,function(n){r.push($.trim(i[n]))})})),r}function g(){return typeof QUnit!="undefined"}var e=function(){function n(n,t,r){switch(n){case Number:n="number";break;case String:n="string";break;case"number":case"string":break;default:throw new Error("Dictionary only supports keys of type string or number");}this._TKey=n;this._TValue=t;this._items={};this._count=0;r&&r.allowNullKey===!0&&(this._allowNullKey=!0);r&&r.throwOnKeyMissing===!0&&(this._throwOnKeyMissing=!0)}return n.prototype.count=function(){return this._count},n.prototype.item=function(n,t){if(this._checkKey(n),arguments.length>1)this._set(n,t);else{if(this._throwOnKeyMissing&&!this._items.hasOwnProperty(n))throw new Error("KeyNotFound: "+n);return this._items[n]}},n.prototype.keys=function(){var t=this._items,n=[];for(var i in t)t.hasOwnProperty(i)?n.push(i):n.push(null);return n},n.prototype.values=function(){var n=this._items,t=[];for(var i in n)t.push(n[i]);return t},n.prototype.add=function(n,t){if(this._checkKey(n),this._items.hasOwnProperty(n))throw new Error("An element with the same key already exists in the dictionary");this._set(n,t)},n.prototype.clear=function(){this._items={};this._count=0},n.prototype.containsKey=function(n){return this._checkKey(n),this._items.hasOwnProperty(n)},n.prototype.get=function(n){return this.item(n)},n.prototype.remove=function(n){this._checkKey(n);this._items.hasOwnProperty(n)&&(this._count-=1);delete this._items[n]},n.prototype.set=function(n,t){this.item(n,t)},n.prototype.tryGetValue=function(n,t){return this.containsKey(n)?(t.value=this.get(n),!0):(t.value=undefined,!1)},n.prototype._checkKey=function(n){if((n===null||n===undefined)&&!this._allowNullKey)throw new Error("Null key not allowed");},n.prototype._set=function(n,t){this._items.hasOwnProperty(n)||(this._count+=1);this._items[n]=t},n}(),u,a,f,v,y,p,w;t.Dictionary=e;t.unpackIntegerArray=s;t.keys=h;t.getCookie=c;t.setCookie=l;u=function(){function n(){this._operationQueue=[]}return n.prototype.queueOperation=function(n){this._operationQueue.push(n);this._processQueue()},n.prototype._processQueue=function(){var n=this;!this._isProcessingOperation&&this._operationQueue.length>0&&(this._isProcessingOperation=!0,r.delay(this,0,function(){function u(){t||(t=!0,n._isProcessingOperation=!1,n._processQueue())}var r,t=!1;r=n._operationQueue.shift();r(u)}))},n}();t.OperationQueue=u,function(n){function i(){return t().toLowerCase().indexOf("windows nt")>=0}function t(){return window.navigator.userAgent}n.isWindowsClient=i;n.getUserAgent=t}(a=t.UserAgentUtils||(t.UserAgentUtils={}));f=function(){function n(){}return n.prototype.registerConstructor=function(n,t){this._ctors||(this._ctors={});this._ctors[n]=t},n.prototype.getConstructor=function(n){return this._ctors&&this._ctors[n]},n.prototype.createInstance=function(n,t){function f(){}var r=this.getConstructor(n),u;return r&&(f.prototype=r.prototype,u=new f,r.apply(u,t)),u},n}();t.TypeFactory=f,function(n){function t(n,t){var i=null,u=t.find("#"+n),r;return u.length>0?i=$(u[0]):(r=t.find("a[name='"+n+"']"),r.length>0?i=$(r[0]):n.toLowerCase()==="top"&&(i=t)),i}n.findAnchorInContainer=t}(v=t.AnchorLinkUtils||(t.AnchorLinkUtils={})),function(n){function t(n){return(n||"").trim().toLowerCase()==="true"}function i(n){var t=(n||"").trim().toLowerCase();return t==="true"||t==="false"}n.parse=t;n.isValid=i}(y=t.BoolUtils||(t.BoolUtils={})),function(n){function i(){var n=(128+Math.floor(Math.random()*64)).toString(16);return t(8)+"-"+t(4)+"-4"+t(3)+"-"+n+t(2)+"-"+t(12)}function t(n){var i,r;if(!n)return Math.floor(Math.random()*16).toString(16);for(i="",r=0;r<n;r++)i+=t();return i}n.newGuid=i}(p=t.GUIDUtils||(t.GUIDUtils={}));w=Array.prototype.slice;t.transformError=b;t.parseEmailAddressesStringToArray=d;t.isRunningUnderTest=g});
define("Chat/Chat/Scripts/TFS.ChatRoom.Utils",["require","exports","VSS/VSS","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/TFS.WebSettingsService","VSS/Diag"],function(n,t,i,r,u,f){function o(n,t){return Math.floor(Math.random()*(t-n+1)+n)}var e=function(){function n(){}return n.initializeChatPreferences=function(t){t.UserChatPreferences&&(n.audioNotificationState=t.UserChatPreferences.AudioNotificationState)},n.isAudioNotificationOn=function(){return n.audioNotificationState},n.toggleAudioNotificationState=function(t,i){i===void 0&&(i=!0);r.ProjectCollection.getConnection(t).getService(u.WebSettingsService).beginWriteSetting("/"+n.audioStateRegistryName,i,u.WebSettingsScope.User);n.audioNotificationState=i},n.audioNotificationState=!0,n.audioStateRegistryName="ChatRoomAudioNotificationState",n}();t.ChatPreferences=e;t.getRandomNumberBetweenRange=o;i.tfsModuleLoaded("TFS.ChatRoom.Utils",t)});
define("Chat/Chat/Scripts/TFS.ChatRoom",["require","exports","VSS/VSS","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Date","VSS/Diag","Presentation/Scripts/TFS/TFS.Core.Utils","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Navigation/Services","Presentation/Scripts/TFS/TFS.Legacy.Ajax","VSS/Utils/UI","Chat/Chat/Scripts/Resources/TFS.Resources.Chat","VSS/Events/Handlers","VSS/Service","VSS/Serialization","Chat/Chat/Scripts/TFS.ChatRoom.Utils","VSS/Telemetry/Services"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b){function at(n){it=n}function ut(){var n=h.getHistoryService().getCurrentState();return n&&n.collectionName}function g(n){return l.BrowserCheckUtils.isLessThanOrEqualToIE9()&&(n=encodeURIComponent(n)),n}function vt(n){return l.BrowserCheckUtils.isLessThanOrEqualToIE9()&&(n=encodeURI(n)),n}function yt(){var t=this.getEncodedUriComponentForIE(ut()),n=it[t];return n}function pt(n,t){ot(ut(),n,t)}function ot(n,t,i){var r,u,f;if(r=it[n],r){t(r);return}u=s.TfsContext.getDefault();f=u.getCollectionActionUrl(n,"GetCollectionProperties","Browse",{area:"api"});c.getMSJSON(f,{},function(i){r=u.getCollectionTfsContext(i.serviceHost);r.currentIdentity=i.currentIdentity;it[n]=r;t(r)},i)}var d,k,rt,nt,ft,st,ht,ct,lt;t.tfsContext=s.TfsContext.getDefault();var wt=r.delegate,tt=f,et=i.queueRequest,it={};t.setCollectionScopedTfsContexts=at;t.getCurrentCollectionName=ut;t.getEncodedUriComponentForIE=g;t.getEncodedUriForIE=vt;t.getCurrentTfsContext=yt;t.beginGetCurrentTfsContext=pt;t.beginGetTfsContext=ot;d=function(){function n(){}return n.NOTIFICATION="notification",n.TEXT="text",n.ONLINE="online",n.OFFLINE="offline",n.IDLE="idle",n.MINRECONNECTDELAYMS=5e3,n.MAXRECONNECTDELAYMS=6e4,n.CHAT_TRANSPORT_OVERRIDE="chat.transport",n.PAGE_SIZE=100,n}();t.ChatConstants=d;k=function(){function n(){}return n.MEMBER_ADDED="ChatRoom.MemberAdded",n.MEMBER_REMOVED="ChatRoom.MemberRemoved",n.MEMBER_ENTERED="ChatRoom.MemberEnterIntoRoom",n.MEMBER_LEFT="ChatRoom.MemberLeftRoom",n.MESSAGE_READY="ChatRoom.MessageReady",n.MESSAGE_RECEIVED="ChatRoom.MessageReceived",n.MESSAGE_SEND_FAILURE="ChatRoom.MessageSendFailure",n.MESSAGE_SEND_SUCCESS="ChatRoom.MessageSendSuccess",n.MESSAGE_RETRY_FAILED="ChatRoom.MessageRetryFailed",n.CONNECTION_SUCCESS="ChatRoom.ConnectionSuccess",n.CONNECTION_FAILURE="ChatRoom.ConnectionFailure",n.MEMBERS_RETRIEVED="ChatRoom.MembersRetrieved",n.MEMBERS_RETRIEVE_FAILURE="ChatRoom.MembersRetrieveFailure",n.CHAT_LOAD_SUCCESS="ChatRoom.ChatLoadSuccess",n.CHAT_LOAD_FAILURE="ChatRoom.ChatLoadFailure",n.TRANSCRIPT_LOAD_SUCCESS="ChatRoom.TranscriptLoadSuccess",n.TRANSCRIPT_LOAD_FAILURE="ChatRoom.TranscriptLoadFailure",n.READY_FOR_MESSAGE_STREAMING="ChatRoom.ReadyForMessageStreaming",n.NOTIFY_ROOM="ChatRoom.NotifyRoom",n.ROOM_NOTIFICATION_UPDATE="ChatRoom.NotificationUpdate",n.ON_NEW_DAY_BEGIN="ChatRoom.NewDayBegin",n.ROOM_RENAMED="ChatRoom.RoomRenamed",n}();t.ChatRoomEvent=k,function(n){n[n.Online=0]="Online";n[n.Offline=1]="Offline";n[n.Idle=2]="Idle"}(t.MemberPresence||(t.MemberPresence={}));rt=t.MemberPresence;t.TypeInfo={MessageType:{enumValues:{normal:0,system:1,notification:2,error:3}},IMessage:{fields:null}};t.TypeInfo.IMessage.fields={messageType:{enumType:t.TypeInfo.MessageType}};nt=function(){function n(){}return n.GetInstance=function(){return this._instance||(this._instance=new n),this._instance},n.dispose=function(){delete this._instance;this._instance=null},n.prototype.fireEvent=function(n,t,i){this._events.invokeHandlers(n,t,i)},n.prototype.attachEvent=function(n,t){this._events||(this._events=new v.NamedEventCollection);this._events.subscribe(n,t)},n.prototype.detachEvent=function(n,t){this._events&&this._events.unsubscribe(n,t)},n}();t.ChatRoomEventManager=nt;ft=function(){function n(){}return n.GetInstance=function(){return this._instance||(this._instance=new n),this._instance},n.prototype.showError=function(n){var t=this;$(".initial-load-container",".rooms-view-right-pane").remove();this.$_errorNode=this._getErrorNode();this.$_contentNode=this.$_errorNode.find(".content:first");$(".error-dismiss",this.$_errorNode).click(function(){return t.hideError()});this.$_contentNode.html(n);this.$_errorNode.show();b.publishEvent(b.TelemetryEventData.fromProperty("ChatService","ChatClientErrorManager","ErrorMessage",n))},n.prototype.hideError=function(){this.$_errorNode&&this.$_errorNode.remove()},n.prototype._getErrorNode=function(){var t=$(".rightPane:first"),n=t.find(".chat-error-section");return n.length===0&&(n=$('<div class="chat-error-section" style="display:none"><div class="content"><\/div><span class="icon icon-close-small error-dismiss" title="'+a.ErrorDismiss+'"><\/span><\/div>'),t.prepend(n)),n},n}();t.ChatRoomErrorManager=ft;st=function(){function n(t){this._isConnected=!1;this._connecting=!1;this._forceKill=!1;this._silent=!1;t.test||(this._options=t,this._eventManager=nt.GetInstance(),this.roomId=this._options.RoomId,this.roomName=this._options.RoomName,n.currentChatRoomModel=this)}return n.getNavigationContextPackage=function(){var n=t.tfsContext.navigation;return r.stringifyMSJSON({Action:n.currentAction,Area:n.area,Level:n.topMostLevel,Controller:n.currentController})},n.invalidatePromises=function(){this._collectionPromise=null},n.getCollectionsData=function(){if(!n._collectionPromise){var i=$.Deferred();c.getMSJSON(t.tfsContext.getActionUrl("GetJumpList","common",{area:"api",showTeamsOnly:!1}),{showStoppedCollections:!1,navigationContextPackage:n.getNavigationContextPackage(),ignoreDefaultLoad:!1},function(n){i.resolve(n)});n._collectionPromise=i.pipe()}return n._collectionPromise},n.getCollectionIdFromName=function(t){var r=this,i;return i=$.Deferred(),n.getCollectionsData().done(function(f){var e,o;f&&f.length!==0||(o=nt.GetInstance(),o.fireEvent(k.CONNECTION_FAILURE,r,{error:a.ErrorChatRoomConnectionFailure,stopConnection:!0}));$.each(f,function(i,r){if(u.localeIgnoreCaseComparer(r.name,t)===0)return e=r.collectionId,n.selectedCollectionName=r.name,!1});e||(e=f[0].collectionId);i.resolve(e)}),i.pipe()},n.initializeConnectionHub=function(){n.chatHub=$.connection.chatHub;var i=n.chatHub.client;$.connection.hub.reconnected(function(){n.currentChatRoomModel&&n.currentChatRoomModel.onReconnect()});$.connection.hub.disconnected(function(){if(n.currentChatRoomModel){var t=w.getRandomNumberBetweenRange(d.MINRECONNECTDELAYMS,d.MAXRECONNECTDELAYMS);n.currentChatRoomModel.onDisconnect("Dropped the connection from the server. Restarting in "+t+" seconds.",t)}});$.connection.hub.error(function(t){if(n.currentChatRoomModel){var i=w.getRandomNumberBetweenRange(d.MINRECONNECTDELAYMS,d.MAXRECONNECTDELAYMS);n.currentChatRoomModel.onDisconnect("Hub error "+t+". Restarting in "+i+" seconds.",i)}});i.messageReceived=function(i,r){i===n.currentChatRoomModel.roomId&&(p.ContractSerializer.deserialize(r,t.TypeInfo.IMessage,!1),n.currentChatRoomModel.messageReceived(r))};i.memberEntered=function(t,i){t===n.currentChatRoomModel.roomId&&n.currentChatRoomModel.memberEntered(i)};i.memberLeft=function(t,i){t===n.currentChatRoomModel.roomId&&n.currentChatRoomModel.memberLeft(i)};i.memberAdded=function(t,i){t===n.currentChatRoomModel.roomId&&n.currentChatRoomModel.memberAdded(i)};i.memberRemoved=function(t,i){t===n.currentChatRoomModel.roomId&&n.currentChatRoomModel.memberRemoved(i)};i.readyForMessageStreaming=function(i,r){i===n.currentChatRoomModel.roomId&&($.each(r||[],function(n,i){p.ContractSerializer.deserialize(i,t.TypeInfo.IMessage,!1)}),n.currentChatRoomModel.readyForMessageStreaming(r))};i.rejoin=function(t,i,r){t===n.currentChatRoomModel.roomId&&n.currentChatRoomModel.rejoin(i,r)};i.stop=function(t){t===n.currentChatRoomModel.roomId&&n.currentChatRoomModel.stop()}},n.prototype._joinRoom=function(){var i=this;this._connecting||n.chatHub.server.joinRoom(this.roomId).done(function(r){var f,e;r?(i._isConnected=!0,i._eventManager.fireEvent(k.CONNECTION_SUCCESS,i),f=t.tfsContext.getActionUrl("AddRoomToMruList","ChatRoom",{area:"api",serviceHost:null,project:null,team:null}),n.getCollectionIdFromName(n.selectedCollectionName).done(function(n){c.postMSJSON(f,{collectionId:n,roomId:i.roomId},null,null)}),i._joinInitiatedTime=new Date):(e=u.format(a.ErrorChatRoomJoinPermissions,t.tfsContext.currentIdentity.displayName,i.roomName),i._eventManager.fireEvent(k.CONNECTION_FAILURE,i,{error:e,silent:i._silent}))}).fail(function(n){var t=n;typeof n=="object"&&n.message&&(t=n.message);i._eventManager.fireEvent(k.CONNECTION_FAILURE,i,{error:t,silent:i._silent});i.stop(!0)}).always(function(){i._connecting=!1})},n.prototype.leaveRoom=function(t,i){n.chatHub.server.leaveRoom(this.roomId).done(t).fail(i)},n.prototype._startConnectionAndJoinRoom=function(n){var t=this,i,r;n===void 0&&(n=!1);i={};i.withCredentials=!1;$.connection.hub.qs="contextToken="+this._collectionIdToConnect;$.connection.hub.logging=!0;r=o.getCookie(d.CHAT_TRANSPORT_OVERRIDE);r&&(i.transport=r.split(","));$.connection.hub.socket=null;$.connection.hub.start(i).done(function(){t._joinRoom()}).fail(function(){var i=t.getPendingMessageToRetry();n||i?t._eventManager.fireEvent(k.MESSAGE_RETRY_FAILED,t,{messageText:i.messageText,silent:t._silent}):t._eventManager.fireEvent(k.CONNECTION_FAILURE,t,{error:a.ErrorChatRoomConnectionFailure,silent:t._silent})});this._reconnectTimeout&&(clearTimeout(this._reconnectTimeout),this._reconnectTimeout=null)},n.prototype.getUserDate=function(n){var u=n.getTime(),t=n.getTimezoneOffset()/60,i=-tt.getOffsetForDate(n)/36e5,r=i-t;return tt.addDays(n,r/24,!0)},n.prototype.isConnected=function(){return this._isConnected},n.prototype.isConnectionSilent=function(){return this._silent},n.sendMessageOnRetryClick=function(n){if(n){var t=$(".message-rawText",$(n)).html(),i=nt.GetInstance();i.fireEvent(k.MESSAGE_READY,this,{messageText:t,messageUiId:"a unique id or the jquery object of the message",retryNode:$(n)})}},n.prototype.getPendingMessageToRetry=function(){return this._pendingMessageToRetry},n.prototype.clearPendingMessageToRetry=function(){this._pendingMessageToRetry=null},n.prototype.connect=function(n){this._collectionIdToConnect=n;this._isConnected||this._startConnectionAndJoinRoom()},n.prototype.onDisconnect=function(n,t){var i=this;this._isConnected=!1;this._reconnectTimeout||this._forceKill||($.connection.hub.log(n),this._reconnectTimeout=setTimeout(function(){i._startConnectionAndJoinRoom()},t))},n.prototype.onReconnect=function(){this._isConnected=!1;this._forceKill||this._joinRoom()},n.prototype.rejoin=function(t,i){n.chatHub.server.joinRoom(this.roomId,t,i)},n.prototype.stop=function(n){n===void 0&&(n=!1);this._forceKill=!0;this._silent=n;this._reconnectTimeout&&(clearTimeout(this._reconnectTimeout),this._reconnectTimeout=null);$.connection.hub.stop();n||(this._isConnected=!1,ft.GetInstance().showError(a.DisconnectedByServer))},n.prototype.sendMessage=function(i,r,u,f){var e=this;if(u===void 0&&(u=!1),this._isConnected)try{this._pendingMessageToRetry=null;n.chatHub.server.sendMessage(this.roomId,i).done(function(n){f&&$(f).hide();p.ContractSerializer.deserialize(n,t.TypeInfo.IMessage,!1);e._eventManager.fireEvent(k.MESSAGE_SEND_SUCCESS,e,{message:n})}).fail(function(){u?e._eventManager.fireEvent(k.MESSAGE_SEND_FAILURE,e,{messageUiId:r,error:a.ErrorChatRoomSendMessageFailure,silent:e._silent}):(e._pendingMessageToRetry=null,e._eventManager.fireEvent(k.MESSAGE_RETRY_FAILED,e,{messageText:i,silent:e._silent}))})}catch(o){this._pendingMessageToRetry={messageText:i,messageUiId:r};this._startConnectionAndJoinRoom(!0)}else u?(this._pendingMessageToRetry=null,this._eventManager.fireEvent(k.MESSAGE_RETRY_FAILED,this,{messageText:i,silent:this._silent})):(this._pendingMessageToRetry={messageText:i,messageUiId:r},this._startConnectionAndJoinRoom(!0))},n.prototype.fetchRecentChat=function(){var i=this;n.chatHub.server.getRecentMessages(this.roomId).done(function(n){$.each(n||[],function(n,i){p.ContractSerializer.deserialize(i,t.TypeInfo.IMessage,!1)});i._eventManager.fireEvent(k.CHAT_LOAD_SUCCESS,i,{chat:n})}).fail(function(){i._eventManager.fireEvent(k.CHAT_LOAD_FAILURE,i,{error:a.ErrorChatRoomMessageLoadFailure,silent:i._silent})})},n.prototype.fetchTranscript=function(i){var r=this,f=this.getUserDate(i),u=new Date(i.toString());n.chatHub.server.getMessages(this.roomId,f,null).done(function(n){$.each(n||[],function(n,i){p.ContractSerializer.deserialize(i,t.TypeInfo.IMessage,!1)});r._eventManager.fireEvent(k.TRANSCRIPT_LOAD_SUCCESS,r,{chat:n,currentDate:tt.addDays(u,-1,!0)})}).fail(function(){r._eventManager.fireEvent(k.TRANSCRIPT_LOAD_FAILURE,r,{error:a.ErrorChatRoomMessageLoadFailure,currentDate:tt.addDays(u,-1,!0),silent:r._silent})})},n.prototype.fetchOnlineMembers=function(){var t=this;n.chatHub.server.getOnlineMembers(this.roomId).done(function(n){t._eventManager.fireEvent(k.MEMBERS_RETRIEVED,t,{members:n})}).fail(function(){t._eventManager.fireEvent(k.MEMBERS_RETRIEVE_FAILURE,t,{error:a.ErrorChatRoomMemberLoadFailure,silent:t._silent})})},n.prototype.messageReceived=function(n){this._eventManager.fireEvent(k.MESSAGE_RECEIVED,this,{message:n})},n.prototype.memberAdded=function(n){this._eventManager.fireEvent(k.MEMBER_ADDED,this,{member:n})},n.prototype.memberRemoved=function(n){this._eventManager.fireEvent(k.MEMBER_REMOVED,this,{member:n})},n.prototype.memberEntered=function(n){this._eventManager.fireEvent(k.MEMBER_ENTERED,this,{member:n})},n.prototype.memberLeft=function(n){this._eventManager.fireEvent(k.MEMBER_LEFT,this,{member:n})},n.prototype.readyForMessageStreaming=function(n){this._eventManager.fireEvent(k.READY_FOR_MESSAGE_STREAMING,this,{messages:n})},n}();t.ChatRoomModel=st;ht=function(){function n(n,t,i,r){r===void 0&&(r=!0);this.Name=n;this.TfId=t;i!==undefined?this.updatePresence(i):this.Presence=null;this.HasAvatar=r}return n.prototype.updatePresence=function(n){this.Presence=u.localeIgnoreCaseComparer(n,d.ONLINE)===0?rt.Online:u.localeIgnoreCaseComparer(n,d.OFFLINE)===0?rt.Offline:rt.Idle},n}();t.Member=ht;ct=function(){function n(n,i,r,e,o,s){var h=this;s===void 0&&(s=[]);this.Id=n;this.Content=i;this.PostedBy=o;this.Mentions=s;this.PostedTime=f.convertClientTimeToUserTimeZone(new Date(e),!0);this.Type=r;this.CurrentUserMentioned=!1;$.each(s,function(n,i){if(u.ignoreCaseComparer(i.targetId,t.tfsContext.currentIdentity.id)===0)return h.CurrentUserMentioned=!0,!1})}return n}();t.Message=ct;lt=function(n){function i(){n.apply(this,arguments);this._beginGetCollectionPropertiesData={}}return __extends(i,n),i.prototype.beginGetTeamDefaultsForRoom=function(n,i,r,u){var f=t.tfsContext.getCollectionActionUrl(n,"GetTeamDefaultsForRoom","ChatRoom",{area:"api"});c.getMSJSON(f,{roomId:i},function(n){return r(n.teamDefaults)},u)},i.prototype.beginGetCollectionProperties=function(n,i,r){n=g(n);et(this,this._beginGetCollectionPropertiesData,n,i,r,function(i,r){var u=t.tfsContext.getCollectionActionUrl(n,"GetCollectionProperties","Browse",{area:"api"});c.getMSJSON(u,{},function(n){return i(n)},r)})},i.prototype.beginGetRooms=function(n,i,r,u,f,e){et(this,i,r,u,f,function(i,r){n=g(n);var u=t.tfsContext.getCollectionActionUrl(n,"RoomsInfo","ChatRoom",{area:"api"});c.getMSJSON(u,{},function(n){return i(n.roomsInfo)},r,e)})},i.prototype.beginGetRoomModel=function(n,i,r,u,f){n=g(n);var e=t.tfsContext.getCollectionActionUrl(n,"GetRoomModel","ChatRoom",{area:"api"});c.getMSJSON(e,{roomId:i},function(n){return r(n.roomModel)},u,f)},i.prototype.updateRoom=function(n,i,r,u){var f=g(i.collectionName),e=t.tfsContext.getCollectionActionUrl(f,n,"ChatRoom",{area:"api"});c.postMSJSON(e,i,r,u)},i.prototype.deleteRoom=function(n,i,r){var u=g(n.collectionName),f=t.tfsContext.getCollectionActionUrl(u,"deleteRoom","ChatRoom",{area:"api"});c.postMSJSON(f,n,i,r)},i.prototype.hasReadPermissionsToRoom=function(n,i,r,u,f){var e=t.tfsContext.getCollectionActionUrl(i,"HasReadPermissionsToRoom","ChatRoom",{area:"api"});c.getMSJSON(e,{roomId:n},function(n){return r(n)},u,f)},i}(y.VssService);t.ChatRoomService=lt;i.tfsModuleLoaded("TFS.ChatRoom",t)});
define("VersionControl/Scripts/Resources/TFS.Resources.VersionControl",["require","exports"],function(require,exports){var e=exports;e.PullRequest_RefreshDueToDiscussion="Discussion messages have changed for this pull request.";e.HistoryList_MessageColumnHeader="Message";e.NoDiscussionComments="No discussion comments";e.InlineDiffText="Inline diff";e.EmptyGitRepoGetStartedAndroidStudioLink="https://go.microsoft.com/fwlink/?LinkId=723132";e.Summary="Summary";e.PullRequest_CompleteMergeDialog_DeleteSourceCheckboxDefaultTooltip="Default branch cannot be deleted when merging a pull request";e.RepositoriesFilterWatermark="Filter repositories";e.PullRequest_IterationSelector_UpdateN="Update {0}";e.PullRequest_ReviewerClearVote="{0} has rescinded their feedback";e.PullRequest_CompleteMergeDialog_DeleteSourceCheckboxLabelText="Delete {0} after merging";e.MergeCommit="Merge Commit";e.CreateBranchDialogInvalidCharacterMessage="A branch name cannot contain \u0027{0}\u0027.";e.PullRequest_Merging="Merging";e.BranchNameTooLong="Branch name too long.";e.PullRequest_QuickStart_Overview_Title="Welcome to the new pull request experience";e.MergeStrategyPolicyOptionNoSquash="Merge changes using a no fast-forward merge";e.PullRequest_Details_Title_CompletedWithSquash="Completed with a squash merge on {0}";e.KeyboardShortcutDescription_CreatePullRequest="Create pull request";e.AddGitIgnoreSelector_NoneValue="None";e.PullRequest_EmailSubject="{0} Pull Request {1}: {2}";e.AddFileDialogNewFileFormat="[+] {0}";e.ChangeExplorerCommentsModeOff="Hide comments";e.KeyboardShortcutDescription_History="History";e.CodePolicyRESTAPILinkContent="https://go.microsoft.com/fwlink/?LinkId=526702";e.RepoTypeGitName="Git";e.PullRequest_ResultsPageTitle_Format_MoreThanResultCount="Pull Requests ({0}+ {1})";e.HistoryResultByText="{0} by {1}";e.PullRequest_ActivityFeed_CommentPrompt="Comment on this Pull Request...";e.FilterNoFilterApplied="No filter applied";e.ImportRepository="...or import a repository...";e.PullRequest_Vote_ResetFeedback="Reset feedback";e.CommitOwnerDisplayNameFormat="{0} \u003c{1}\u003e";e.CreateBranchDialogBranchExistsMessage="The specified branch name already exists.";e.PullRequest_ApproveButtonLabel="Approve";e.RenameDialogTitle="Rename item";e.ChangeTypeUndelete="undelete";e.BranchSecurityTitleFormat="Security for {1} branch in {0}";e.RetainedLowerCase="retained";e.PullRequest_TFSTitle="Microsoft Visual StudioÂ® Team Foundation Server";e.RenameDialogFilenameLabel="Filename";e.Fullscreen="Fullscreen";e.MergeCommitTitleAlternate="Showing: \u003cstrong\u003econtents of {0} (Changes made as you merged)\u003c/strong\u003e";e.FileCountTooltipSingular="1 file affected";e.PullRequest_HelpCmdUpdatePR="Then, after building and testing your code, update the pull request with the latest changes:";e.ChangesetListCreatedDate="Created date";e.KeyboardShortcutDescription_Explorer="Explorer";e.ChangeDetailsCommittedOn="Committed on {0}";e.PullRequest_IterationSelector_UpdateBasetoM="Comparing base to {0}";e.HistoryListFormatToggleText="Toggle compact and traditional history list view";e.InitRepoWithDefaultFileMessage="Added {0} file";e.VersionControlCommitDetailsHideFullComment="Hide message";e.ChangeExplorerDisplayModeTooltip="Change the display mode for the tree";e.Repositories="Repositories";e.TwoUpDiffTitleText="Two-up";e.EditFileCheckinToShelveset="Create shelveset...";e.PullRequest_Policy_BuildPolicyBroken="Unable to queue {0}";e.PullRequest_PullRequestDetailsMergeStatus_ChangesMerged="Changes merged";e.AsyncGitOperationTracker_Close="Close";e.PullRequest_ChangeExplorer_CommentFilter_AllFilesHideCommentsLong="Hide comments";e.PullRequest_HelpDialogVSMergeAndResolve="Next, \u003ca  href=\"https://go.microsoft.com/fwlink/?LinkId=399000\" target=\"_blank\"\u003emerge\u003c/a\u003e \u003cem\u003e{0}\u003c/em\u003e into \u003cem\u003e{1}\u003c/em\u003e and \u003ca  href=\"https://go.microsoft.com/fwlink/?LinkId=399001\" target=\"_blank\"\u003eresolve\u003c/a\u003e any conflicts.";e.LearnMoreAboutSshLinkText="Learn more about SSH";e.FailedToCreateGitCredentials="Failed to create Git credentials.";e.InlineDiffTitle="Showing \"inline\" diff mode. Click to switch to side-by-side mode.";e.ImagesAreSameMessage="The selected images are the same.";e.HistoryResultHeaderMessage="Message";e.ChangeTypeFileType="encoding";e.LinesDeletedHeader="-{0}";e.EditFileDiffInline="Show diff inline";e.NextFile="Next file";e.Navigation_ContributedTabError="Could not find specified extension: {0}";e.PullRequest_Admin_MergeStrategyPolicyHeading="Merge requirements";e.ExploreLatestVersionMenuText="Explore latest version";e.InitRepoReadMeLinkName="Create a README file";e.SetDefaultBranchMenuItem="Set as default branch";e.PullRequest_RelatedWorkItemsTitle="Add work items";e.RequiredReviewersControlAddNewPath="Add a new path";e.ViewHistory="View history";e.PullRequest_PolicyMergeStrategyName="Merge Strategy Policy";e.LabelVersionDisplayText="Label \u0027{0}\u0027";e.CommentWithFileInfoFormat="{0}\r\n[{1}]";e.LinkDialogCommitIdTitle="Commit";e.PullRequest_Pivot_AllMine="Mine";e.PullRequest_QuickStart_Iterations_Title="See how the code is changing";e.PullRequest_SourceBranchDeletionFailed="Failed to delete the source branch.";e.Status_StatusMain_Success="Success";e.PullRequest_CallToAction_AutoComplete_SetBy="{0} set the pull request to automatically complete when all policies succeed.";e.RepoTypeTfvcName="TFVC";e.GitRepositoryDeleteDialogPrompt="This repository will be permanently deleted. This is a destructive operation. Please type the repository\u0027s name ({0}) to confirm.";e.NoRepositoryByIdError="No repository found in this project with ID \"{0}\".";e.PullRequest_SourceBranchDeletionSuccess="The source branch has been deleted.";e.PullRequest_Discussions="Discussions";e.PreviousDifference="Previous difference";e.HistoryCommentsTooltipShelveset="Comments have been left on this shelveset";e.PullRequest_RetryMergePullRequest="re-evaluate";e.PullRequest_Policy_BuildPolicyNotRun="{0} not run";e.EditModeRevertToEditMode="Switch back to edit mode";e.PullRequest_ActivityFeed_VoteNoResponse="No response by {0}";e.ChangeCountAdds="{0} adds";e.ChangeCountEdit="{0} edit";e.SharingDiscussionCommentName="[{0}]";e.WorkItemDetailNotAssigned="Current state is {0}. Currently not assigned to anyone.";e.GitStatusStateSetupBuildCaption="Set up build";e.DeleteCommentAction="Delete comment";e.PullRequest_ChangeExplorer_TreeFilter_FullTreeLong="Full tree";e.CommitSuccessLinkFormat="{0}: {1}";e.DownloadRepositoryAsZip="Download the repository contents as of this commit";e.PullRequest_CallToAction_CompletedWithSquash="{0} completed the pull request with a squash merge {1}.";e.EditFileContextMenuText="Edit";e.FileVersionIndexBehindLatest="{0} (latest) | {1} (indexed)";e.FilterFromDateText="From date";e.SinglePullRequest_RelatedArtifactsDisplayString="1 Pull Request";e.PullRequest_QuickStart_Overview_Cancel="I\u0027ll explore myself";e.PullRequest_ActivityFeed_VoteReset="{0} reset their vote";e.PullRequest_Activity_Description_Static="";e.CreatePatButtonText="Generate Git credentials";e.GitToolsForWindowsLink="https://go.microsoft.com/fwlink/?LinkID=278817\u0026clcid=0x409";e.BranchPolicyControl_UndoChanges="Undo changes";e.PersonalAccessTokenDescriptionText="Personal access tokens provide more security because they\u0027re individually revokable and auditable.";e.RevertDialog_Title_Commit="Revert commit {0}";e.PullRequest_Comment="{0} comment";e.Revert_Dialog_Oktext="Revert";e.ParentCommitAnnotationFormat="Parent {0}";e.PathExplorer_NavigateIconTooltip="Navigate";e.PullRequest_PolicyCodeAnalysisSingleNewIssue="1 new issue found in this pull request";e.ImageTitle="{0} ({1})";e.Folder="Folder";e.FileViewerClickToDownloadContentDisbled="Download file feature is disabled for this file item.";e.PullRequest_HelpDialogCmdCreateLocalBranch="\u003cstrong\u003egit checkout -b \u003c/strong\u003e {0} {1}";e.PushRefCreatedFormat="{0} created at {1}";e.UserPasswordText="Password";e.PullRequest_HelpCmdMergeAndResolve="Next, merge the changes in \u003cem\u003e{0}\u003c/em\u003e into \u003cem\u003e{1}\u003c/em\u003e and resolve conflicts:";e.PullRequest_Policies_NotApplicable="{0} is not applicable";e.CodePolicyDescriptionContent="To protect the {0} branch with a gate that blocks inadvertent and low quality commits, enable one or more branch policies. Enabling branch policies will require changes to be submitted using pull requests.";e.AdminView_BranchesAdminBannerMessage="To manage the security and policies for a branch, go to the {0} page and select \"Branch security\" or \"Branch policies\" in the context menu.";e.PullRequest_Updated="Updated {0}";e.PullRequest_Policy_UnknownError="This policy encountered an unknown error.";e.PullRequest_PolicyMergeStrategySquashRequired="Squash merge is required by policy";e.HasExternalChanges="Policies have been updated by someone else. Please click ";e.FileViewerEditFileMenuText="Edit";e.PullRequest_IterationSelector_AllChangesSecondary="Update {0} and earlier";e.NoChangesInCommitMessage="This commit contains no changes.";e.CherryPick_Completed="Cherry-pick succeeded in creating the new branch \u003ca target=\"_blank\" href=\"{1}\"\u003e{0}\u003c/a\u003e.";e.CommitsWithIdStartsWithTitleFormat="Commits with ID starting with \"{0}\"";e.InitRepoWithReadMeError="Unable to initialize repo with README.md";e.PullRequest_SystemRefUpdatedNoCommit="Branch {0} updated";e.Manage="Manage";e.AddFileDialogDefaultCommentMultipleFiles="Added {0} files to {1}";e.ShelvesetVersionDisplayText="Shelveset \u0027{0};{1}\u0027";e.NoFilesWithActiveDiscussionComments="No files with active discussion comments";e.PullRequest_CommitsTab_NoCommits="This pull request does not have any commits.";e.FilterPushedByText="Pushed by";e.PullRequest_Filter_AllPullRequests="All";e.ShowMoreCommentTooltip="Click to show the full comment";e.PullRequest_ReviewerUpVote="{0} has approved the code";e.ShelvesetMoreItemsMessage="Only the first {0} items in this shelveset are included.";e.VersionControlCommitDetailsCopyShaToolTip="Copy full SHA to clipboard";e.ChangeTypeLock="lock";e.ChangeTypeNone="none";e.CloneAction="Clone";e.ChangeTypeEdit="edit";e.GitStatusStateNonBuildCaption="status";e.DeleteRepositoryMenuItem="Delete repository";e.PendingCommitProcessingWarning="We are currently processing some of your commits.  This result set may not be complete.  Please try again later.";e.PullRequest_CreatePullRequestButtonCaption="New pull request";e.Browse="Browse";e.GitToolsForWindowsDownloadText="Download Git for Windows";e.VersionControlCommitDetailsShowFullComment="See full message";e.AndroidStudioName="Android Studio";e.Status_Tooltip_Primary_Failure_Plural="Failures reported";e.AccountServerResources_AlternateCredentialsUsernamePrimary="User name (primary)";e.AffectedFilesSingular="1 item affected";e.CloneInYourFavoriteIDE="Clone in your favorite IDE";e.WorkItems="Work items";e.ChangesetMoreItemsMessage="Only the first {0} items in this changeset are included.";e.ChangeDetailsPushedOn="Pushed on {0}";e.PullRequest_UpdatePullRequestButtonCaption="Update Pull Request";e.PullRequest_IterationSelector_NotSupported="This pull request does not support iterations";e.ChangesetListNoHistoryEntriesFound="No history entries were found for the specified item.";e.IntelliJName="IntelliJ IDEA";e.FileVersionLabel="Version";e.PullRequest_MentionWorkItems="#{0}";e.DiffMenusSeparatorTooltipFormat="Comparing {0};{1} to {2};{3}";e.HistoryList_DateColumnHeader="Date";e.PullRequest_EmptyListMessage="Let the rest of your team know your code is ready to review with a pull request.";e.PullRequest_MultipleComments_Tooltip="There are {0} comments in this pull request.";e.pluginAndCredentialManagersInstruction="These provide the best experience with single sign in, multi-factor auth, and integration with pull requests.";e.HistoryList_BuildTooltip="Build status: {0}";e.HistoryList_PullRequestColumnHeader="Pull Request";e.FileVersionIndexCommitsBehindMessage="This file is {0} commits behind \u003ca/\u003e";e.PullRequest_ActivityFeed_PostComment_Label="Post";e.RelatedArtifactPullRequestTitle="Pull Request";e.EditFileDiscardChangesTitle="Discard changes";e.PullRequests_RelatedArtifacts_FailToDelete_NoWorkItemClient="Failed to delete the link. Could not load the work item service.";e.MaxFileSizeExceededGit="This file\u0027s content exceeds the maximum size allowed to be edited through the web. To change this file\u0027s content you will need to clone the repository and edit the file locally.";e.PullRequest_DiscussionCodeCommentMsg="{0} commented on the file {1}";e.FilesSummaryExpandAll="Show all changes";e.RelatedArtifactViewPullRequest="View pull request";e.PullRequest_ActivityFeed_ViewUpdates="View code updates";e.PullRequest_NoRelatedWorkItems="No related work items";e.PullRequest_ResultsPageTitle_Format_ResultCount="Pull Requests ({0} {1})";e.CloneCommand="git clone";e.DiffCommitTitleFormat="Diff commits {0} â†” {1}";e.AsyncRef_Dialog_Cancel="Cancel";e.TooManyCommitsStartWithError="Multiple commits were found with commit ID starting with \"{0}\". Enter a more specific commit ID.";e.AddFileDialogDefaultCommentMultipleFilesWithEdits="Updated {0} files in {1}";e.PushRefDeletedShortFormat="Deleted";e.PullRequest_NoPermissionToDelete="You do not have permission to delete this branch.";e.PullRequest_Reviewers_Waiting="Reviewer(s) waiting for the author to respond";e.PullRequest_CherryPick_CalloutButton="Cherry-pick";e.PullRequest_Push_Singular="{0} push";e.Someone="Someone";e.Status_Tooltip_Secondary_Failure_Singular="{0} failure";e.PullRequest_Policy_BuildPolicyQueued="{0} queued";e.PullRequest_PullRequestLinkTextSimple="Pull Request {0}";e.EditFileCommitToNewBranchTitle="Commit changes to a new branch";e.DeleteItemsDialogOKText="Delete";e.NextCommentTooltip="Go to next comment";e.BranchSummaryUpdatedDateColumn="Last Updated";e.PullRequest_Reviewers_Optional="Optional";e.DeleteItemMenuItem="Delete...";e.DefaultDeleteCommentFormat="Deleted {0}";e.VersionSelectorNoBranches="There are no branches in this repository";e.PullRequest_ChangeExplorer_CommentFilter_FilesWithComments="Only files with comments";e.PullRequest_Successfully_Merged="Successfully merged";e.PullRequest_New_Comment_Singular="{0} new comment";e.DiffFilesAreLargeBinaryFiles="The difference between files {0} and {1} could not be computed.";e.PullRequest_IterationSelector_AllChangesNewSecondary="Includes newest changes";e.GravatarEnabledOption="Show \u003ca href=\"https://go.microsoft.com/fwlink/?LinkId=313945\" target=\"_blank\"\u003eGravatar\u003c/a\u003e images for users outside of your organization. This setting applies to all repositories in this project collection.";e.Status_Tooltip_Secondary_AllSuccess="All statuses are successful";e.ShelvesetPickerDialogTitle="Shelveset picker";e.CherryPick_Dialog_Description="Use the git cherry-pick operation to port changes to another branch.  A new topic branch will be created with the ported changes, and then you will be prompted to create a pull request to the target branch.â€‹";e.PushRefUpdateFormat="{0} updated to {1}";e.AccountServerResources_AlternateCredentialsPassword="Password";e.CommitsGroupTitle_Plural="{0} commits";e.PullRequest_SystemRefUpdateSingleCommit="Commit {0} added to {1} branch";e.CredentialHelperInformationLink="https://go.microsoft.com/fwlink/?LinkId=690147";e.PullRequest_HelpReturnHereToFinish="Return here to finish the Pull Request.";e.PullRequsete_SystemMergeConflictsStatusDisplay="Conflicts prevent automatic merging";e.CommitsGroupTitle_Singular="{0} commit";e.CherryPick_CommitDescriptionAppendFormat="Cherry-picked from commit \u0027{0}\u0027.";e.PullRequest_Comment_Plural="{0} comments";e.LinkDialogVersionedItemTitle="Item";e.CreatePersonalAccessTokenText="Create a Personal access token";e.PullRequest_SuggestionCloseIcon_Tooltip="Dismiss this message";e.EditModeShowDiff="Show diff";e.DiffFilesAreIdentical="Identical Binary Content\r\n\r\nFiles {0} and {1} are identical in content.";e.AsyncRef_Dialog_OntoRefText="Target branch";e.AddFileDialogNewItemLabel="Create and edit a new file";e.LinkDialogSpecifyItemPath="Specify item path.";e.CreateBranchDialogWatermark="Enter your branch name";e.HistoryCommentsTooltipChangeset="Comments have been left on this changeset";e.Branches="Branches";e.PullRequest_ActivityFeed_VoteApproveWithComment="Approved with suggestions by {0}";e.ExploreThisVersionMenuText="Explore as of this version";e.HideRenameHistoryFileName="Hide rename history for {0}";e.CloneUrlLabelText="Clone URL";e.VersionSelectorNoMyBranches="You have not created or added any branches in this repository to your favorites";e.PushedByFormat="Pushed by {0}";e.HistoryList_Authored="{0} authored {1}, {2}";e.PullRequest_Status_Abandoned="Abandoned";e.FilterTooltipFormat="{0}: {1}";e.PullRequest_Admin_MergeStrategyPolicyCheckBox="Require a specific type of merge when pull requests are completed";e.PullRequest_HelpDialogIntroduction="This Pull Request cannot be merged on the server.  In order to complete the merge and close the pull request, you will need to use your local Git tools to perform the merge manually, resolving conflicts as necessary.  Use the following steps to help you complete the process.";e.PullRequest_ActivityFilter_Label="Show items";e.RepoStatsCommitsTitle="commits";e.BrowseFiles="Browse files";e.PullRequest_PullRequestDetailsMergeStatus_Abandoned="Merge abandoned";e.PushesPageTitleBranchUpdates="branch updates";e.CherryPick_FailureMessage="Failed to cherry-pick changes.  This operation needs to be performed manually.";e.CodePolicyNoBuildError="No build definition specified. Choose a build definition from the list.";e.PathExplorer_LoadingResultsFooterMessage="Loading results...";e.Status_Tooltip_Secondary_Failure_Plural="{0} failures";e.ClickForMoreChangesText="Click here to download more changes.";e.WitMentionsEnabledOption="Automatically create links for work items mentioned in a commit comment.";e.PullRequest_QuickStart_Features_OverviewLink="Overview";e.ImageDimensions="({0}x{1})";e.ChangeTypeSourceRename="source rename";e.PullRequest_QuickStart_Overview_Desc="The Overview shows you the latest status and changes to the pull request. It\u0027s easier than ever to add comments and reply to active discussions. New code and comments will appear immediately.";e.AutoComplete="Auto-complete";e.PullRequest_ActivityFeed_Pushed="{0} pushed {1} commits";e.BranchesPageEmptyMessage="No changes between these branches.";e.PullRequest_DelegateReviewerThreePlusPeople="{0} and {1} others";e.PullRequest_HelpDialogTitle="Manually merging a Pull Request";e.CredentialHelperDownloadDescriptionText="Download the Visual Studio Team Services credential helper.";e.PullRequest_AnActivePullRequestExistLink="View Pull Request {0}";e.CreatePullRequestModified="You have modified this pull request. Switch branches and lose changes?";e.CreateBranch_RelatedArtifacts_ZeroDataText="No linked work items";e.ChangesetListChangesetNumber="Changeset number";e.CompareToPrev="Compare to previous version";e.DownloadFile="Download";e.CreateBranchDialogNoBranchesMessage="No branches";e.LinkDialogChangesetIdTitle="Changeset";e.PullRequest_Policy_ApproverApprovedByMultiple="{0} reviewers approved";e.HistoryList_PushesList_Merged="{0} merged {1}, {2}";e.PullRequest_ActivityFeed_Reviewer_Reviewer="reviewer";e.Status_Tooltip_Primary_Pending="Status pending";e.PullRequest_Activity_Description_Edit="Enter a description here";e.PullRequest_HelpDialogCmdPushToServer="\u003cstrong\u003egit push \u003c/strong\u003e origin {0}";e.PullRequest_Filter_CreatedByMe="Created by me";e.PullRequest_Status_Completed="Completed";e.DiffSelectorItemSecondaryText="{0} - {1} by {2}";e.PullRequest_ActivityFeed_Reviewer_AddedOne="{0} added {1} as a reviewer";e.ElidedTextAtEnd="{0} â€¦";e.CherryPickButton_HistoryCommits="Cherry-pick";e.PullRequest_Revert_Button="Revert";e.Status_Tooltip_Primary_Failure_Singular="Failure reported";e.ViewContents="View";e.LockedBranchTooltipFormat="{0} (locked by {1})";e.PullRequest_ActivityFeed_Reviewer_RemovedOne="{0} removed {1} from the reviewers";e.CommitsAddedTabWithCountFormat="Commits added ({0})";e.ShelvesetListNoEntriesFound="No shelvesets found for the specified owner.";e.PullRequest_ActivityFeed_VoteApprove="Approved by {0}";e.MyBranchesTabLabel="Mine";e.FileVersionIndexedDisplayName="indexed {0}";e.PullRequest_Vote_Approve="Approve";e.PullRequest_UnsavedCommentsSingle="1 unsaved comment will be saved when voting";e.MultiplePullRequests_RelatedArtifactsDisplayString="{0} Pull Requests";e.CreateBranchDialogCreateButton="Create branch";e.ChangeExplorerCommentsModeTooltip="Change how comments are displayed";e.OpenInVisualStudioTooltip="Open in Visual Studio";e.RevertButton_HistoryCommits="Revert";e.PullRequest_ChangeExplorer_TreeFilter_FilesOnly="List";e.RenameItemsDialogOKText="Rename";e.pluginAndCredentialManagersTitle="Plug-ins and credential managers";e.PullRequest_AutoCompleteMergeDialog_Title="Enable automatic completion";e.PullRequest_Filter_AssignedToTeam="Assigned to the team";e.AllCommits="All commits";e.PullRequest_Push_Plural="{0} pushes";e.PushNewRefActionsHeader="Actions:";e.PullRequest_PullRequestDetailsMergeStatus_PendingNoComma="Merge in progress";e.PullRequest_FetchingChanges="Fetching changes...";e.InvalidCommitId="Invalid commit ID. Valid characters are numbers from 0-9 and letters a-f.";e.PullRequest_ChangeExplorer_TreeFilter_FullTree="Tree";e.ChangesetSearchWatermark="Changeset ID";e.EmptyRepoGitCloneHeader="Clone this repository";e.PullRequest_RefreshDueToSourcePush="New changes have been pushed to the source branch of this pull request.";e.CodePolicyTitleFormat="{0} ({1}) Branch Policies";e.AddGitIgnoreSelector_PrefixText="Add a .gitignore: ";e.NoUniqueChangeInMergeCommitMsgFormat="This is a merge commit and contains no unique changes.\u003cbr\u003e\u003cbr\u003eClick the Diff Parent links below to view the cumulative changes that were merged in each case:\u003cbr\u003e";e.Readme="README";e.GitStatusTitle="Build";e.PullRequest_LearnMoreLink="http://go.microsoft.com/fwlink/?LinkId=800672";e.PullRequest_LearnMoreText="Learn more about Pull Requests";e.PullRequest_CreatePullRequestTitle="Create Pull Request";e.PullRequest_ActivityFeed_Reviewers_RemovedBy="{0} was removed as a reviewer by {1}.";e.InitializeWithReadMe="...or initialize with a README...";e.VisitParent="Visit parent";e.Status_Tooltip_Primary_Success="Success!";e.FileVersionViewLatestTitle="Click to view the latest version of this file";e.ChangeCountDelete="{0} delete";e.PullRequest_PullRequestDetailsStatusCompleted="Completed";e.MyPullRequestsViewTitle="My pull requests";e.MyUpdates="My updates";e.PullRequest_PolicyBuildSubStatusRebuildAction="rebuild";e.AddShelvesetOverallComment="Add an overall comment for this shelveset";e.PullRequest_ChangeExplorer_TreeFilter_FilesOnlyLong="List files";e.PullRequest_invalidID="Pull request IDs only consist of numbers.";e.RequiredReviewersControlReviewers="Reviewers";e.AdvancedSearchFilterText="Advanced search";e.FileVersionNewFile="new file";e.PullRequest_NewChanges="Updates were pushed to this pull request ({0} new)";e.PullRequest_Admin_CommentRequirementsPolicyHeading="Comment requirements";e.MergeCommitAnnotation="Changes made as you merged";e.PullRequest_CallToAction_Completed="{0} completed the pull request {1}.";e.PushDeletedRefActionsHeader="Actions:";e.AnnotateUnprocessedHistoryWarningFormat="Warning: Commits are still be processed. Only showing annotation blocks for commits that have been fully processed.";e.TagVersionDisplayText="Tag {0}";e.GitRepositories="Repositories";e.Revert_FailureMessage="Failed to revert changes. This operation needs to be performed manually.";e.RenameItemMenuItem="Rename...";e.PolicyAdvanced="Advanced";e.CheckinComment="Checkin comment";e.PushBranchRefFormat="branch {0}";e.PathSearch_GlobalResultsDefaultMessage="Or, were you looking for...";e.PullRequest_Vote_ApproveWithComment="Approve with suggestions";e.EnterFullScreenModeTooltip="Enter full screen mode";e.CloneInAction="Clone in {0}";e.PullRequest_RefreshData="Refresh";e.CherryPickDialog_Title_Commit="Cherry-pick commit {0}";e.Status_Tooltip_Secondary_Pending="{0} pending";e.ErrorInvalidValidDuration="Invalid input. Build expiration time must be expressed in hours.";e.PathExplorer_SearchWatermarkText="Type to find a file or folder...";e.CommitToNewBranchSuccessMessageHtml="Created branch {0} and committed ";e.NewBranchTitle="Create a new branch...";e.Preview="Preview";e.EmptyGitRepoGetStartedWindowsLink="https://go.microsoft.com/fwlink/?LinkID=723024";e.PullRequest_CommitsSectionTitleAboveMax="Commits (1000+)";e.PullRequest_Admin_WorkItemPolicyHeading="Work item linking requirements";e.RelatedArtifactCommitTitle="Commit";e.PullRequest_CompleteMergeDialog_SquashMergeLearnMoreText="Learn more about squash merging";e.PullRequest_ActivityFeed_VoteNotReady="Waiting for the author by {0}";e.PullRequest_NumberOfPullRequests_Count="({0})";e.ChangesetDetailsTitle="Changeset {0}";e.DiffCommitTitleAlternateOneParentFormat="Showing: \u003cstrong\u003ediff to {0} ({1})\u003c/strong\u003e";e.RelatedArtifacts_FailedToFindBranch="Failed to find the branch";e.PullRequest_PullRequestDetailsMergeStatus_Pending="Merge in progress";e.LinkDialogCommitRepoTitle="Repository";e.PreviousFileTooltip="Go to previous file";e.BranchesFilterWatermark="Filter branches";e.InvalidFileName="\u0027{0}\u0027 is not a valid file name. The file name cannot contain any of the following characters: \" / : \u003c \u003e \\ * ?";e.PullRequest_CompleteMergeDialog_Oktext="Complete merge";e.PushRefDeletedFormat="{0} deleted";e.PullRequest_Created="Created {0}";e.PullRequest_SystemMergeSucceeded="Pull request can be automatically merged";e.BranchSummaryBehindColumn="Behind";e.ChangesetPending="Changeset pending";e.DownloadAsZip="Download as Zip";e.ProjectSecurityTitle="Security for {0}";e.HistoryChangesSearchFilterInvalidDateFormat="Invalid date format. Enter a valid date or choose from the date picker.";e.PullRequests_ResultHeader_CreatedByMe="Created by me";e.CodeReviewAutoCompleteSet="{0} set the pull request to automatically complete when all policies succeed.";e.PullRequest_AbandonPullRequest="Abandon";e.PolicyWarningsHeader="Checkin policy warnings";e.ItemCompareContentTrimmedSwitchTo="Displayed content is truncated due to maximum viewable content limit.  Please switch to {0} mode to view the full content.";e.PullRequest_EmptyListDescription="Looks like you havenâ€™t pushed any changes yet. After you \u003ca href=\"http://go.microsoft.com/fwlink/?LinkId=800674\" target=\"_blank\"\u003epush changes\u003c/a\u003e come back here to start a pull request.";e.MyBranchesFilterWatermark="Filter my branches";e.VersionSelectorNoMatchingTags="No tags contain the filter text";e.PathSearch_FooterMessageResultsCount="Showing {0} results";e.EmptyGitHistoryResultTitle="No results matched your filter criteria";e.LinkDialogChangesetZeroNotExists="TF14019: The changeset 0 does not exist.";e.GitRepositoryCreateDialogWatermark="Enter your repository name";e.RepoStatsBranchesTitle="branches";e.FilterRangeText="Range";e.ChangeCountEdits="{0} edits";e.SuccessfullyCreatedGitCredentials="Successfully saved Git credentials!";e.GitRepositoryCreateDialogTitle="Create a Git repository";e.PullRequest_DeleteSourceBranch="Delete source branch";e.FileViewerDefaultCommitMessageForAdd="Added file {0}";e.AllChanges="All changes";e.FileListColumnLastChange="Last Change";e.PullRequest_PolicyBuildSubStatusTargetUpdated="Target branch updated";e.PullRequest_SystemStatusUpdateClosedBy="{0} closed the pull request";e.PullRequest_ChangeExplorer_CommentFilter_AllFilesAllCommentsLong="All comments";e.ShelvesetDetailsTitle="Shelveset {0}";e.PullRequest_InvalidRefName="The branch may have been deleted already.";e.PullRequest_HelpCmdEnsureBranchUptodate="First, you\u0027ll need to ensure that \u003cem\u003e{0}\u003c/em\u003e and \u003cem\u003e{1}\u003c/em\u003e branches are up to date:";e.PullRequest_CherryPick="Cherry-pick...";e.ShelvesetLinkText="Shelveset {0}";e.AddNewItemsDialogOKText="OK";e.PullRequest_SystemMergedStatus="Merged";e.PullRequest_SuggestStartPullRequest=" {0}. Start a pull request?";e.GitRepositoryRenameDialogTitle="Rename the {0} repository";e.AddPathDialogTitle="Select path";e.PullRequest_CannotComplete_MergeInProgress="Merge must finish before the pull request can be completed";e.RefDeletedFormat="{0} (previously at {1}) was deleted";e.Commits="Commits";e.PullRequest_Policies_Awaiting="Awaiting {0}";e.Compare="Compare";e.ContextMenuCodeSearchToReferenceLabel="Search for references";e.ImportRepositoryLinkText="Import repository";e.ChangesetListRange="Range";e.FilesSummaryListByChurn="List by churn";e.AssociatedWorkItemsFormat="{0} associated work items";e.ChangeExplorerDisplayModeTree="Full tree";e.ChangeExplorerDisplayModeFlat="Flat list of files";e.PullRequest_DelegateReviewerVia="via ";e.Overview="Overview";e.HistoryList_AuthoredOn="{0} authored {1} on {2}";e.CredentialHelperDescription="This helps you easily and securely authenticate.";e.ChangesetsGroupTitle_Singular="{0} changeset";e.PullRequest_Policy_BuildDefinitionNotFoundError="The build definition was not found. Please contact your administrator. Once the build definition is fixed please abandon and reactivate your pull request to re-attempt the build.";e.LinesAddedHeader="+{0}";e.PullRequest_DiffViewer_FileModified="The comment could not be displayed because the file was modified.";e.CommitDetailsTitle="commit {0}";e.CommitsRemovedTabName="Commits removed";e.PullRequest_CommentsCount_MoreThanThreshold="{0}+";e.AllItemsText="All";e.PullRequest_Activity_None="There are no activities to display";e.Pending="Pending";e.CherryPick_Dialog_Title_PullRequest="Cherry-pick pull request {0}";e.PullRequest_ActivityFeed_Iteration_Commits_Removed_Singular_Title="{0} removed {1} commit creating {2}";e.PullRequest_Title_Completed="completed";e.DiffFilesAreDifferent="Different Binary Content\r\n\r\nFiles {0} and {1} are different in content.";e.CommitsRemovedTabWithCountFormat="Commits removed ({0})";e.RequiredReviewersAddLink="+Add user";e.GitRemoteAddOrigin="git remote add origin {0}";e.PullRequest_NoCommitsToMergeNotification="There are no changes to merge between the selected branches.";e.PullRequest_PolicyWorkItemLinkingPolicySucceeded="Work items linked";e.ViewContentsMenu="View contents";e.MergedLowerCase="merged";e.ShelvesetListFind="Find";e.SideBySideDiffText="Side-by-side diff";e.EmptyGitRepoCommandLineSetupTitle="Command line instructions";e.ErrorWebPathTooLong="Error: The path entered is too long. This web browser does not support urls longer than {0} characters in length.";e.PullRequest_Revert="Revert...";e.PullRequest_Reject="Rejected";e.InvalidateInput="Invalid number of reviewers. The minimum number of reviewers must be between 1 and 10 reviewers.";e.FileListColumnComments="Comments";e.ChangeTypeProperty="property";e.CommitTooltipMessage="View commit details";e.CherryPick_ProgressMessage="Cherry-picked commit {0}";e.Revert_Completed="Revert succeeded in creating the new branch \u003ca target=\"_blank\" href=\"{1}\"\u003e{0}\u003c/a\u003e.";e.PullRequest_CompleteMergeDialog_SquashMergeWarning="Deleting the source branch when squashing is recommended";e.PullRequest_PolicyOptionalReviewerVerb="should approve";e.CreateRepoNameLabel="Name";e.PathSearch_FooterMessageNoResults="No results found for \"{0}\".";e.OtherComments="Other comments";e.AddFileDialogDefaultCommentMultipleFilesWithAddsAndEdits="Added and updated {0} files in {1}";e.FilterToDateText="To date";e.PullRequest_Filter_AssignedToMe="Assigned to me";e.PullRequest_Policies_Approved="{0} approved";e.PullRequest_ActivityFeed_Reviewer_Removed="{0} removed {1} reviewers";e.FileViewerClickToDownloadContent="Click to download file to your computer.";e.PullRequest_PullRequestDetailsStatusAbandoned="Abandoned";e.GitRepositoryDeleteErrorTitle="Error deleting {0}";e.HideRenameHistory="Hide rename history";e.ABFlipTitleText="A|B Flip";e.UserDefaultBranchDeletedErrorMessage_WithoutVersionInUrl="Branch {0} was deleted so weâ€™ve switched you to {1}, the default branch.";e.ItemCompareContentTrimmedSxS="Displayed content is truncated due to maximum viewable content limit.  Side-by-side diff view may show full content.";e.ChangesetLinkTextSimple="Changeset {0}";e.PullRequest_CompleteMergeDialog_Title="Complete pull request";e.PullRequest_ActivityFilter_Everything="Everything";e.DeleteItemDialogTitle="Delete item";e.ShowCodeReviewComments="Show code review comments";e.ComparingFilesLoadMessage="Comparing files...";e.BranchSummaryAheadColumn="Ahead";e.PushRefCreatedShortFormat="Created at {0}";e.PullRequest_FilesSectionTitle="Files ({0})";e.FileViewerContentIsTrimmed="Displayed content is truncated due to maximum viewable content limit. Download file to your computer to view all of the file contents.";e.CreatePullRequestLabel="Create a pull request";e.PixelDiffCanvasTitle="RGB Subtraction Diff";e.PullRequest_ActivityFilter_VoteChanges="Vote Changes";e.PullRequest_SaveAllComments="Save all comments";e.PullRequest_Title_Edit="A title is required";e.VersionSelectorNoGitRepositoriesInProject="No Git repositories were found in this project.";e.AnnotateMaxHistoryWarningFormat="Warning: Only showing annotation blocks for the most recent {0} changes to this file.";e.VersionSelectorNoMatchingBranches="No branches contain the filter text";e.LinksControlDuplicateGitRefBranch="The selected branch is already linked to this item.";e.ChangesetAuthorDescriptionFormat="{0} checked in changeset {1}";e.ExplorerPathNotFoundInVersion="Can not find path {0} at version {1}";e.HistoryExpandChildLinkFormat="Show {0} history";e.OriginalImageDimensions="(Originally {0}x{1})";e.ShowOriginalImageButtonText="Show original image";e.PullRequest_Policy_MissingTypeError="The type of this policy no longer exists.";e.ManageRepositoriesLinkText="Manage repositories";e.RepositoryName="Repository name";e.PushesListNoCommitsPushedMessage="No commits pushed";e.InitializeText="Initialize";e.HistoryList_ChangeTypeColumnHeader="Change";e.ChangesetListTo="To";e.CommitLinkText="Commit {0}";e.AddFileDialogTitle="Add or update file(s)";e.ChangeCountRenames="{0} renames";e.EngagementExplorerViewElipsisTitle="Quick file operations";e.ShelvesetListOwnerName="Owner";e.PullRequest_BranchHasOpenPullRequest="Branch {0} has an open pull request";e.ShowModifiedImageButtonText="Show modified image";e.EditFileSaveDropTitle="{0}...";e.CreateRepoTypeLabel="Type";e.RelatedArtifactTagTitle="Tag";e.Deleted="Deleted";e.CreateNewRepositoryDialogTitle="Create a new repository";e.FilesSummaryListByName="List by name";e.PullRequest_New_Vote_Plural="{0} new votes";e.GitProjectSecurityTitleFormat="Security for all Git repositories";e.ChangeCountRename="{0} rename";e.HistoryResultHeaderPusher="Pusher";e.RelatedWorkItemsRemoveToolTip="Don\u0027t link this work item";e.PullRequest_RelatedWorkItems="Related work items: ";e.PullRequest_ActivityFeed_Reviewer_Reviewers="reviewers";e.CherryPick_PullRequestDescriptionAppendFormat="Cherry picked from Pull request {0}.";e.CheckinSuccessLinkFormat="{0}: {1}";e.PullRequest_PolicyApproverCountName="Approver Count Policy";e.PullRequest_PullRequestDetailsStatusUnKnown="Unknown";e.PushTitleFormatWithComment="{0} â†’ {1}: {2}";e.EmptyGitHistoryResultMessage="Try a different filter criteria to search commits most relevant to you.";e.PullRequest_Status="Status";e.PreviousFile="Previous file";e.Changed="Changed";e.Changes="Changes";e.PullRequest_PullRequestDetailsStatusActive="Active";e.Revert_Dialog_Description="Revert the changes of this commit in a target branch. A topic branch will be created with the reverted changes, and then you will be prompted to create a pull request to the target branch.";e.PullRequest_ChangeExplorer_TreeFilter_FilesByFolder="Group";e.CreateRepoPlaceholder="Enter a name for your Git repository";e.CreateRepoHybridVSMessage="Reminder: Visual Studio users will need Visual Studio 2015 Update 1 or later to view TFVC and Git repositories in team projects that include both types.";e.GitPushOriginAll="git push -u origin --all";e.TagGroupControlToolTipTitle="Tags";e.AddCommentAction="Add comment";e.VisitRepositoryRoot="Visit repository root";e.PullRequest_Details_Title_Abandoned="Abandoned on {0}";e.CreateRepositoryDialog_AddReadMeCheckboxText="Add a README to describe your repository";e.ItemCompareContentTrimmed="Displayed content is truncated due to maximum viewable content limit.";e.ChangeTypeAdd="add";e.CommitHistoryTitleFormat="{0} commits";e.KeyboardShortcutDescription_CreateBranch="Create branch";e.FilterShelvesetOwnerText="Shelveset Owner";e.BranchRefsCompareShowingCount="Showing ahead and behind for the first {0} branches out of {1} ({2})";e.PullRequest_ActivityFeed_Pushed_Zero="{0} updated the pull request";e.HiddenComments="{0} other comments";e.RefUpdatesSectionHeaderFormat="{0} refs updated in this push";e.TagControlToolTipText="Tag name: {0}";e.HideCodeReviewComments="Hide code review comments";e.PullRequest_ReviewerFeedback_AwaitingResponse="No response";e.OptionUpdatedSuccessfullyMessage="Option was updated successfully.";e.EditFileRefreshTitle="File updated";e.KeyboardShortcutDescription_SelectRepository="Select repository";e.LinkDialogBranchRepoTitle="Repository";e.PullRequest_Title_Active="active";e.SelectBuildDefinition="Select build definition to require";e.CredentialHelperDownloadButtonText="Download credential helper";e.DiffSummaryShowingFilesWithFilter="Showing {0} in {1}:";e.PullRequest_ActivityFeed_Iteration_Singular_Title="{0} pushed {1} commit creating {2}";e.PullRequest_Comment_Singular="{0} comment";e.LinksControlDuplicateChangeset="Duplicate changeset.";e.PullRequest_SystemMergeFailed="Pull request cannot be automatically merged";e.PullRequest_New_Push_Singular="{0} new push";e.DefaultBranchTooltipFormat="{0} (default branch)";e.PullRequest_PolicyActionQueueBuild="Queue build";e.PullRequest_GrammaticalSeparator="and ";e.PullRequest_AnActivePullRequestExistNotification="An active pull request already exists between these branches.";e.HideComment="less";e.EditFileCheckinToShelvesetTitle="Save changes to a new shelveset";e.PullRequest_Pivot_Updates="Updates";e.PullRequest_Activity_Description_Label="Description";e.PullRequest_ReviewerUpWithCommentVote="{0} has approved and left suggestions";e.DiffHistoryEntryTextFormat="{0}: {1} ({2})";e.LinksControlDuplicatePullRequest="Duplicate pull request.";e.PullRequest_Pivot_Active="Active";e.HistoryList_AuthorColumnHeader="Author";e.Status_StatusMain_Failure="Failure";e.AssociatedWorkItemFormat="{0} associated work item";e.RepositorySecurityTitleFormat="Security for {0} repository";e.BranchesWithMineTabLabel="All branches";e.GitRepositoryRenameDialogOktext="Rename";e.PolicyWarningsLabel="The following checkin policies were not satisfied:";e.MultipleBranches_RelatedArtifactsDisplayString="{0} Branches";e.ShowAnnotations="Show Annotation blocks for this file";e.ChangeExplorerCommentsModeActiveCommentsUnderFiles="Show active comments under files";e.PathSearch_FooterMessageStartTyping="Start typing to find a file or folder.";e.GitStatusStatePending="in progress";e.BranchUpdates_FailedToGetPullRequests="Failed to get pull request data";e.PullRequest_Pivot_Commits="Commits";e.PullRequest_Pivot_Compare="Compare - {0}";e.ShelvesetSearchTooltip="View a shelveset by entering its ID. You can enter just the shelveset name to find shelvesets that you own. To go to a shelveset owned by another user, enter its ID in the form: ShelvesetName;ShelvesetOwner.";e.PullRequest_Pivot_Content="Content - {0}";e.PullRequest_EmailTitle="{0} is requesting your attention";e.NoPermissionReadBranches="Unable to get branches.";e.In="in";e.To="to";e.RequiredReviewersControlPath="Path";e.ElidedTextAtStart="â€¦ {0}";e.PullRequest_PolicyActionRebuild="Rebuild";e.FilesSummaryGroupByPath="Group by path";e.HideAdvancedSearchText="Hide advanced search";e.HideCompleteMessage="Hide complete message";e.CodePolicyHelpFWLink="https://go.microsoft.com/fwlink/?LinkID=615252";e.ProjectOptionsTitle="Options for {0}";e.PullRequest_Policy_ApproverCountStatus="{0} of {1} reviewers approved";e.PullRequest_QuickStart_Overview_OK="Learn about the new features";e.LinkDialogBranchTitle="Branch";e.PullRequest_Policy_BuildPolicyExpiresInHrs="{0} expires in {1} hours";e.PullRequest_Policy_BuildPolicySucceeded="{0} succeeded";e.PullRequsete_SystemMergeSucceededStatusDisplay="Changes merge without conflicts";e.PullRequest_Details_Title_Completed="Completed on {0}";e.ChangeDetailsTitleCommit="Commit";e.PullRequest_HelpMergeWithVS="Complete the merge in Visual Studio";e.CommitVersionDisplayText="Commit {0}";e.CodePolicyBuildExpireOptionStrict="Always require a new build";e.PathExplorer_ClearIconTooltip="Clear";e.CommitSuccessMessageHtml="Committed ";e.CompleteNow="Complete now";e.CreateBranchDialogWorkItemsLabel="Work items to link";e.PullRequest_Details_Title_Created="Created on {0}";e.PullRequest_PingEmail="{0} is requesting your attention for {1}";e.CreateBranchDialogInvalidTrailCharacterMessage="A branch name cannot end with \u0027{0}\u0027.";e.PullRequest_BranchHasBeenDeleted="Branch {0} has been deleted";e.UpdatingOptionMessage="Updating option...";e.PullRequest_CommitsSectionTitle="Commits ({0})";e.CommentLineInfoMultiLine="Lines {0} to {1}";e.DiffICOFileWarning="This ICO file may contain multiple sizes of this image. Only one will be shown below.";e.AppleName="Mac \u0026 Linux terminal";e.RelatedArtifactBranchTitle="Branch";e.ChangesetVersionDisplayText="as of changeset {0}";e.PullRequest_RollupStatus_MergeConflicts="Merge conflicts";e.EditFileCommit="Commit";e.PullRequest_ActivityFeed_Reviewer_RemovedStatus="Removed";e.PullRequest_ActivityFeed_PR_AbandonedBy="{0} abandoned the pull request";e.CommentLineInfoSingleLine="Line {0}";e.NoPushesFound="No pushes were found that matched the specified criteria.";e.PullRequest_PolicyCodeAnalysisNewIssuesCount="{0} new issues found in this pull request";e.EditFileCancel="Cancel";e.ChangeDetailsRelatedWorkItems="Related work items";e.ExploreSpecificVersionMenuText="Explore as of this version ({0})";e.PullRequest_HelpDialogCmdSwitchBranch="\u003cstrong\u003egit checkout \u003c/strong\u003e {0}";e.HistoryList_PushesList_Pushed="{0} pushed {1}, {2}";e.RefUpdateFromToFormat="{0} updated from {1} to {2}";e.CodePolicyMinimalReviewerRowText="Require a minimum number of reviewers per pull request";e.ExploreLatestVersionMenuTooltip="Open source explorer to browse the latest version of this item";e.TagsFilterWatermark="Filter tags";e.EmptyRenameHistory="No results in rename history matched the filter criteria. Try a different filter criteria to view this fileâ€™s rename history.";e.CommitSearchWatermark="Commit ID";e.EditFileCheckin="Checkin";e.PullRequestSummary_PullRequest_Created="{0} requested #{1} into {2} {3}";e.UserNameText="User Name";e.PullRequest_ActivityFeed_Reviewer_AddedRemoved="{0} added {1} {2} and removed {3} {4}";e.ShowMore="Show more";e.All="All";e.EmptyRepoHeader="{0} is empty. Add some code!";e.Refs_RelatedArtifactsDescription="Latest commit {0}";e.AddFileDialogUploadFilesLabel="Upload existing files";e.EngagementExplorerViewElipsisContent="Add files, rename files, or more quick actions can be found right here!";e.BranchNotFoundError="Branch not found";e.Blame="Blame";e.PreviousDifferenceTooltip="Go to previous difference";e.MyCommits="My commits";e.EditFileExtendedCommitMessageWatermark="Add an optional extended description";e.LatestVersionDisplayText="Latest";e.PullRequest_CallToAction_Ready="Your pull request can be completed.";e.LinkedArtifactsTfvcCreated="Created {0}";e.Hours="hours";e.AddNewFileMenuItem="Add file(s)...";e.TagGroupControlDisplayText="{0} tags";e.VoteButtonLabel="Vote";e.PullRequest_QuickStart_Iterations_OK="Keep going";e.NewBranchText="New branch...";e.PullRequest_Details_Title="Pull request details";e.PullRequest_ActivityFilter_PREvents="Pull Request Events";e.CodePolicyBuildExpireOptionBuddy="Don\u0027t require a new build";e.ChangeTypeRollback="rollback";e.PullRequest_Pivot_Files="Files";e.SideBySide="side-by-side";e.PullRequest_Admin_WorkItemPolicyIsBlocking="Block pull request completion if there are no linked work items";e.CodePolicyBuildExpireOptionTitle="When the {0} branch is updated";e.KeyboardShortcutGroup_Explorer="Explorer";e.BranchesContextMenuCompareBaseToTarget="Compare {0} to {1}";e.ReviewersWhyLink="Why?";e.CheckinSuccessfulMessage="View checkin details";e.PullRequest_CannotComplete_MergeConflicts="This pull request has merge conflicts";e.FileCountTooltipFormat="{0} files affected";e.CommitDiffSummaryControlFailedToGetCommits="Failed to retrieve commits for summary information. {0}";e.PullRequest_TargetBranchDeleted="The target branch has been deleted.";e.WebEditLimitWorkaroundGit=" This limitation does not apply to using your favorite IDE or git.exe for this operation.";e.PullRequest_DefaultPullRequestTitle="Merge {0} to {1}";e.PullRequest_BranchHasUnmergedChange="Branch {0} has unmerged changes";e.ChangesetsGroupTitle_Plural="{0} changesets";e.EditFileDiffSideBySide="Show diff side-by-side";e.CommitSearchTooltip="View the details of a commit by entering its commit ID.";e.SccShortItemTitleForImageNoPath="{0} ({1}x{2})";e.SelectTag="Select a tag...";e.ManageSshKeys="Manage SSH keys";e.SccItemTitle="{0} Version:{1}";e.PullRequest_QuickStart_Files_Title="Show me the code";e.PullRequest_HelpDialogCmdMerge="\u003cstrong\u003egit merge \u003c/strong\u003e {0}";e.PullRequest_Reviewers_Approved="Approved by reviewer(s)";e.AddFileDialogDefaultCommentSingleFile="Added {0}";e.Contents="Contents";e.ExploreThisVersionMenuTooltip="Open source explorer to browse the repository as of this version ";e.MyChanges="My changes";e.PullRequest_CreatePullRequestButtonToolTip="Create new pull request";e.PullRequest_HelpDialogCmdFetch="\u003cstrong\u003egit fetch \u003c/strong\u003e origin";e.CreateBranchDialogFromCommitTitle="Commit to new branch";e.GitStatusStateBuildCaption="build";e.PullRequests_ResultHeader_AssignedToTeamWithName="Assigned to team: {0}";e.VersionedItemLinkDialogTitle="Link to";e.ChangeExplorerCommentsModeCommentsOnly="List comments only";e.PullRequest_ChangeExplorer_TreeFilter_FilesByFolderLong="Group files by folder";e.PullRequest_QuickStart_Vote_Desc_2="You\u0027ve got the basics down. Get back to your review on the {0}.";e.Actions="Actions";e.HistoryResultHeaderAuthor="Author";e.CommitFailedMessageFormat="Failed to commit changes: {0}";e.Status_Tooltip_Primary_Error_Plural="Errors reported";e.PullRequest_HelpCompleteMerge="Manual merge help";e.PullRequest_PullRequestDetailsMergeStatus_Success_Completed="Merged successfully";e.CreateBranchDialogTitle="Create a branch";e.ChangeExplorerCommentsModeOnlyFiles="Only show files with comments";e.PullRequestSearchToolTip="Go to a pull request by entering its ID.";e.BranchCreateError="Failed to create {0}";e.FilePathInvalidEnding="Invalid file name. The file name cannot end with a dot (.) or a space";e.DiffSummaryChangedSingleFile="{0} file change";e.CommitPickerDialogTitle="Find commits";e.QuickSetupUsingAnotherGitClient="Command line or another Git client";e.CreateRepoAlreadyHasTfvcMessage="A TFVC repository already exists for {0} project";e.PullRequest_ActivityFeed_PRCreatedCardText="Created by {0}";e.PullRequest_SystemStatusUpdateReactivedBy="{0} reactivated the pull request";e.PullRequest_PolicyWorkItemLinkingLinkedWorkItemsAtCommitTime="When the pull request was completed, the following work items were linked to commits in this pull request:";e.Status_Tooltip_Secondary_Error_Singular="{0} error";e.PushTitleFormat="{0} â†’ {1}";e.PullRequest_PolicyWorkItemLinkingName="Work Item Linking Policy";e.PullRequest_UnsavedComments="{0} unsaved comments will be saved when voting";e.AliasLabelText="Alias (optional)";e.ChangesetHistoryTitleFormat="{0} history";e.PullRequest_CompleteMergeDialog_UnableToDetermineBranchStatus="Unable to determine branch status.";e.MultiPoliciesWarning1="This policy was configured using the";e.MultiPoliciesWarning2="and takes advantage of features that are not yet available to configure from this page. You must continue to use the";e.MultiPoliciesWarning3="to change this policy.";e.PreviewOffTooltip="Show raw content";e.KeyboardShortcutDescription_PullRequests="Pull requests";e.PullRequest_PullRequestDetailsMergeStatus_TargetOutOfDate="Target branch updated";e.InitRepoTitle="Describe your repository";e.AddCommitOverallComment="Add an overall comment for this commit";e.PullRequest_Reviewers_Required="Required";e.FilteredListQueryingMessage="Query in progress...";e.PullRequest_Policy_BuildPolicyDefaultName="Build";e.CommitDetails_BranchIndicator_Tooltip="This commit exists in the default branch {0}.";e.PullRequest_FilesSectionTitleAboveMax="Files (1000+)";e.DeletedLowerCase="deleted";e.PullRequest_Pivot_Discussion="Discussion";e.PullRequest_CompleteMergeDialog_MergeTitleWatermark="Enter a short description of the pull request";e.PullRequest_HubName="Pull Requests";e.MergeSourceVersionDisplayText="Merge source for changeset {0}";e.CodePolicyInValidRequiredReviewersError="To require a reviewer, you must specify both a path and a reviewer.";e.FilesDifferOnlyInWhitespaceMessage="The selected files differ only in whitespace.";e.DiffParentCommitTitleFormat="Diff Parent {0} ({1})";e.NoFavoritesFound="No favorites found";e.CodePolicyBuildBlocking="Block pull request completion unless there is a valid build";e.PullRequest_PolicyMergeStrategySquashForbidden="Squash merge is forbidden by policy";e.PixelDiffTitleText="Pixel Diff";e.PullRequest_SuggestionBranchPushed1="You updated ";e.PullRequest_SuggestionBranchPushed2="{0} â€” ";e.ChangesetListFind="Find";e.ChangesetListFrom="From";e.ShelvesetSearchWatermark="Shelveset ID";e.ChangesetListPath="Path";e.ChangesetListUser="User";e.KeyboardShortcutDescription_Branches="Branches";e.IterationSelectorTitle="Pull request updates";e.BranchFindError="Failed to find {0}";e.PullRequest_ReviewerFeedback_NoResponse="No response";e.PushNewRefExplore="Explore the repository at this version";e.AddChangesetOverallComment="Add an overall comment for this changeset";e.RenameRepositoryMenuItem="Rename repository...";e.RelatedArtifactCreatePullRequest="Create a pull request";e.CodePolicyBuildExpireOptionExpiringWindow="Require a new build if older than";e.ChildHistoryLabelFormat="History for {0}";e.BinaryContentAdded="Binary content added";e.LinkDialogLatestVersion="Latest Version";e.PullRequest_SystemRefUpdatePushedBy="Pushed by {0}";e.CreateNewRepositoryLinkText="New repository";e.PullRequests_RelatedArtifactsDescription="Created {0}";e.PullRequest_PullRequestDetailsMergeStatus_SourceOutOfDate="Source branch updated";e.FileListColumnName="Name";e.PullRequest_IterationSelector_AllChanges="All changes";e.PullRequest_DelegateReviewerViaFormat="via {0}";e.KeyboardShortcutDescription_SelectBranch="Select branch";e.VersionSelectorNoGitRepositoriesInCollection="No Git repositories were found in this project collection.";e.CommitComment="Commit comment";e.PullRequest_PingEmail_UnableToRetrieve="Unable to retrieve ping email body";e.SinglePushPageTitleFormat="{0} update";e.PullRequest_ActivityFeed_VoteReject="Rejected by {0}";e.PullRequest_NewChangesNoIterations="Updates were pushed to this pull request.";e.InvalidPullRequestId="The provided Pull Request ID is invalid. The Pull Request ID should be a whole number.";e.CommitDetailsParentSelectorDiffTo="Diff to";e.CreateDiscussionCommentHtmlFormat="From \u003ca\u003ediscussion\u003c/a\u003e on {0}.";e.GitStatusStateSucceeded="succeeded";e.EditFileSelectDiffMode="Select diff mode";e.LearnMore="Learn more";e.HistoryCollapseChildLinkFormat="Hide {0} history";e.CherryPick_Dialog_Oktext="Cherry-pick";e.PullRequest_CompleteMergeDialog_MergeTitle="PR {0}: {1}";e.CreateRepoHybridLearnMoreHtml="\u003ca href=\"https://go.microsoft.com/fwlink/?LinkId=699398\" target=\"_blank\"\u003eLearn more\u003c/a\u003e.";e.CompareToLatest="Compare to latest version";e.PullRequestSearchWaterMark="Pull request ID";e.PullRequest_CallToAction_AutoCompletion_Options="Changes will be {0} into {1}. Branch {2} will be {3}.";e.PullRequest_Reviewers="Reviewers";e.HideOtherCommentsFormat="Hide other comments ({0})";e.PreviewOnTooltip="Show content preview";e.TipVersionDisplayText="Tip version of {0}";e.FileViewerDefaultCommitMessage="Updated {0}";e.EmptyRepoGitPushHeader="Push an existing repository";e.PullRequest_Policy_BuildPolicyWaitingForMerge="{0} waiting for merge";e.FileVersionIndexCommitBehindMessage="This file is {0} commit behind \u003ca/\u003e";e.ContextMenuCodeSearchToTextLabel="Search for text";e.LearnMoreAboutFormat="Learn more about {0}";e.PullRequest_NounSeparator=", ";e.GitStatusStateNeverBuilt="never built";e.PullRequest_MergeFailedRejectedByPolicy="This merge cannot be completed on the server. You will need to merge locally then push to the server.";e.CreateBranchDialogFromGitRefLabel="Based on";e.PullRequest_SystemRefUpdateMultipleCommitsPushed="commits pushed";e.HistoryList_Changeset_Created="{0} created #{1}, {2}";e.PullRequest_PullRequestDetailsTitle="Pull Request {0}: {1}";e.PushDeletedRefExplore="Explore the repository at the deleted version";e.WebEditLimitWorkaroundTfvc=" This limitation does not apply to using your favorite IDE or tf.exe for this operation.";e.PullRequest_IterationSelector_UpdateNow="View latest changes";e.PullRequest_CallToAction_Reactivate="This pull request was abandoned {0}.";e.CreateNewRepository="Create new repository";e.PullRequest_ActivityFeed_Reviewer_Added="{0} added {1} reviewers";e.RequiredReviewersControlEnabled="Enabled";e.CommentPositionInfoWithLine="{0}: line {1}";e.HistoryList_CommitColumnHeader="Commit";e.FilterUnresolvedIdentityErrorMessage="The identity could not be resolved.";e.PullRequest_Vote_Reject="Reject";e.PullRequest_Reviewers_Rejected="Rejected by reviewer(s)";e.SingleCommit_RelatedArtifactsDisplayString="1 Commit";e.PullRequest_Merge="Merge";e.DiffHistoryEntryTitleFormat="{0} on {1} by {2}\r\n\r\n{3}";e.NextFileTooltip="Go to next file";e.PullRequest_DelegateReviewerTwoPeople="{0} and 1 other";e.PullRequest_SystemStatusUpdateClosedByWithCommit="{0} closed the pull request with commit {1}";e.Changeset="Changeset";e.EditFileUpdatedAfterEditAlert="This file has been updated by another client since it was initially loaded for editing, and your changes cannot be saved.  Please copy your edited version for merging offline or try again later.";e.PullRequest_RefreshPullRequestStatus="re-attempt";e.PullRequest_ActivityFilter_NewCode="New Code Pushed";e.PullRequest_Title="Title";e.PullRequest_PullRequestDetailsMergeStatus_Success="No merge conflicts";e.CommitSearchInvalidText="Invalid commit ID. Please enter the full 40 character commit ID/hash, or 1 or more characters from the beginning of a commit ID. Valid characters are numbers from 0-9 and letters a-f.";e.PullRequest_Share="Share Pull Request";e.LockBranchMenuItem="Lock branch";e.PreviousVersionDisplayText="Previous version of {0}";e.BranchSummaryUpdatedByColumn="Updated By";e.PullRequest_Vote_Plural="{0} votes";e.AffectedFilesPluralFormat="{0} items affected";e.CommittedByAlternateFormat="\u003cstrong\u003e{0}\u003c/strong\u003e committed {1}";e.PushDeletedRefDownload="Download the contents of the repository at the deleted version";e.RestartMerge="Restart merge";e.NoCommitsStartsWithError="No commits were found with commit ID starting with \"{0}\"";e.LoadingText="Loading...";e.WorkItemDetail="Current state is {0}. Currently assigned to {1}.";e.PullRequest_ReviewerNotReadyVote="{0} is waiting for the author to respond";e.HistoryCommentsTooltipCommit="Comments have been left on this commit";e.PullRequest_ActivityFeed_PostComment_Tip="Click here to post a comment";e.ItemCompareContentTrimmedShort="File is truncated";e.PullRequests_RelatedArtifacts_FailToCreate_NoWorkItemClient="Failed to create the link. Could not load the work item service.";e.GitRepositoryDeleteDialogTitle="Delete {0} repository";e.RefDeletedTitleFormat="{0} deleted";e.PullRequest_RollupStatus_Waiting="Waiting";e.TagsTabLabel="Tags";e.PullRequest_AddReviewer="Add Reviewer";e.PullRequest_PullRequestDetailsMergeStatus_Conflicts="Merge conflicts";e.CodePolicyBuildRowText="When team members create or update a pull request into the {0} branch, queue this build: ";e.PullRequest_Policies_Broken="{0} is broken";e.CommitDescriptionFormat="commit {0}";e.IdenticalFilesMessage="The files are identical in content.";e.PathSearch_ErrorMessageRepositoryTooLarge="Enter a path to navigate to a file or folder. Repository too large to search.";e.PullRequest_Policy_BuildPolicyExpired="{0} expired";e.BranchDeleteError="Failed to delete {0}";e.RefreshButton="refresh";e.PullRequest_CommentRequirementsPolicyFailed="Comments are still active";e.RequiredReviewersControlBlocking="Required";e.PullRequest_NotReady="Waiting for the author";e.CheckinSuccessMessageHtml="Checked in changeset ";e.XAuthoredY="\u003cstrong\u003e{0}\u003c/strong\u003e authored {1}";e.DefaultRenameCommentFormat="Renamed {0}";e.PullRequest_QuickStart_Vote_Title="Give your approval when the code is ready";e.BranchNameCannotBeEmpty="Branch name cannot be empty.";e.CreateRepositoryDialog_FilesToInclude="Files to include";e.PullRequest_Pivot_Completed="Completed";e.PullRequest_NotFound="That pull request doesn\u0027t exist.";e.ChangeTypeRename="rename";e.ChangesetSearchTooltip="View the details of a changeset by entering its changeset ID.";e.EmptyGitRepoGetStartedIntellJLink="https://go.microsoft.com/fwlink/?LinkID=723021";e.PullRequest_PolicyWorkItemLinkingPolicyBypassed="When this pull request was completed, no work items were linked to commits in this pull request.";e.NextDifferenceTooltip="Go to next difference";e.Annotate="Annotate";e.DiffSummaryChangedFiles="{0} file changes";e.EclipseName="Eclipse";e.LearMoreAboutSshLinkHref="https://go.microsoft.com/fwlink/?LinkID=715524";e.CodePolicyRequiredReviewersPathWatermark="/path/to/review";e.HistoryList_PushesList_PushedOn="{0} pushed {1} on {2}";e.Revert_Conflict="Encountered conflicts when reverting commit \u0027{0}\u0027. This operation needs to be performed manually.";e.PullRequest_Admin_WorkItemPolicyCheckbox="Check all pull requests for linked work items";e.IllegalGitFolder="Invalid file name. Cannot add a \".git\" file or folder at the root of the repository.";e.FileNamesListSeparator="and ";e.CancelAutoComplete="Cancel auto-complete";e.PullRequest_ClosePullRequest="Close";e.RenameDialogFoldernameLabel="Folder name";e.CredentialHelperDownloadLink="https://go.microsoft.com/fwlink/?LinkId=690149";e.PullRequest_HelpDialogVSPushToServer="Then, after building and testing your code, \u003ca href=\"https://go.microsoft.com/fwlink/?LinkId=399002\" target=\"_blank\"\u003epush\u003c/a\u003e the changes in \u003cem\u003e{0}\u003c/em\u003e back to the server.";e.BranchLabelText="Branch/Tag";e.AddRequiredReviewers="Add Required Reviewers";e.FilesSummaryGroupByChangeType="Group by change type";e.PullRequest_RelatedArtifactsTitle="Work Items";e.PullRequest_ActivityFilter_CodeComments="Code Comments";e.LinkDialogPullRequestIdTitle="Pull Request";e.ChangeExplorerDisplayModeByFolder="Files by folder";e.PullRequest_PolicyBuildSubStatusQueueAction="queue";e.EditFileDiscard="Discard";e.LinkDialogTagTitle="Tag";e.GitRepositorySelectorTfvcTooltip="{0} (Team Foundation Version Control)";e.PullRequest_CommentRequirementsPolicySucceeded="No active comments";e.PullRequest_RelatedArtifactsAddWatermark="Search work items by ID or title";e.PullRequest_Completed="Completed {0}";e.PullRequest_ChangeExplorer_CommentFilter_AllFilesActiveComments="Active";e.ShowRenameHistory="Show rename history";e.HistoryList_Shelveset_Created_Tooltip="{0}, {1}";e.UnsavedFileNavigateAwayFormat="You have unsaved changes made to file \u0027{0}\u0027 which will be lost if you navigate away. Are you sure you wish to discard these changes?";e.ShowMoreComment="more...";e.AddFileDialogDefaultComment="Added files";e.CodePolicyDescriptionLearnMore="Learn more";e.RequiredReviewersGroupsAddLink="+Add group";e.CreateBranchDialogInvalidLeadCharacterMessage="A branch name cannot start with \u0027{0}\u0027.";e.DownloadVisualStudio="Download Visual Studio";e.FilesSummaryCollapseAll="Hide all changes";e.GitPersonalAccessTokenFormat="Git: {0} on the website.";e.Revert_ProgressMessage="Reverted commit \u0027{0}\u0027";e.PushNewRefDownload="Download the contents of the repository at this version";e.PullRequest_Approve="Approved";e.ShelvesetsGroupTitle_Singular="{0} shelveset";e.PullRequest_LoadMore="Load more";e.PullRequest_SourceBranchDeleted="The source branch has been deleted.";e.HideAnnotations="Hide Annotation blocks for this file";e.CreateBranchDialogNewBranchLabel="Name";e.CreateBranchDialogFailedToCreateBranchFromRefMessage="Failed to create branch {0} from {1} with error: {2}";e.RefUpdateNotFoundFormat="ref {0} was not updated in the current push";e.PullRequest_ActivityFeed_Commented="{0} commented";e.PullRequest_ActivityFeed_Update_Name="update {0}";e.OKLabel="OK";e.VersionedItemLinkText="Version {0} of {1}";e.FilePathInvalidCharacter="Invalid file name. The file name cannot contain any of the following characters: \" / : \u003c \u003e \\ * ?";e.LinkDialogSpecifyChangesetId="Specify changeset ID.";e.PixelDiffDisabledTitle="Pixel Diff (only available for same-size images)";e.VersionControlCommitDetailsCopyTitleToolTip="Copy title to clipboard";e.PullRequest_CallToAction_Completing_Other="{0} is completing the pull request...";e.PullRequest_DiscussionAndCodeComments="All comments";e.PullRequest_TFSLink="https://go.microsoft.com/fwlink/?LinkID=129550";e.AddFileDialogAlreadyExistsErrorFormat="Item at path \u0027{0}\u0027 already exists. Please provide a unique filename.";e.PullRequest_OK="";e.SwitchBaseTargetBranches="Switch base and target branches";e.ShowOtherCommentsFormat="Show other comments ({0})";e.FileViewerUnableToShowContent="This file contains non-printable characters and no other viewer was found for file extension \"{0}\". ";e.SccShortItemTitleForImage="{0} ({1}x{2}); {3}";e.FilterClearFilters="Clear filters";e.ShelvesetAuthorDescriptionFormat="{0} shelved {1}";e.PullRequest_ActivityFeed_Voted="{0} voted \"{1}\"";e.PreviousCommentTooltip="Go to previous comment";e.PushesPageTitleFormat="{0} updates";e.PullRequest_CompleteMergeDialog_SquashMergeCheckboxLabelText="{0}Squash{1} changes when merging";e.UnlockBranchMenuItem="Unlock branch";e.PullRequest_Admin_CommentRequirementsPolicyIsBlocking="Block pull request completion if there are active comments";e.AnnotateActionMenuItemText="Annotate this file";e.PullRequest_ChangeExplorer_CommentFilter_FilesWithActiveComments="Only files with active comments";e.ChangesetSearchInvalidText="Invalid changeset ID. Please enter a number greater than 0.";e.GitStatusStateSetupNow="setup now";e.PullRequest_MergePolicies_Section_Title="Policies";e.DefaultRenameCommentFormatFromTo="Renamed {0} to {1}";e.KeyboardShortcutGroup_Code="Code";e.PullRequest_SystemRefUpdateSingleCommitPushed="commit pushed";e.PullRequest_CreatePullRequest="Create a new pull request...";e.HistoryList_Changeset_CreatedOn="{0} created #{1} on {2}";e.FileViewerEditFileMenuToolTip="Click to edit the file";e.PushesPageTitleAllRefs="All branch updates";e.EmptyGitRepoGetStartedNewEclipseLink="https://go.microsoft.com/fwlink/?LinkID=723023";e.LinkDialogPullRequestRepoTitle="Repository";e.PullRequest_NoDescription="No description";e.Revert_Dialog_Title_PullRequest="Revert pull request {0}";e.CodeReviewAutoCompleteCleared="{0} cancelled automatic completion of the pull request.";e.PullRequest_PolicyCodeAnalysisName="Code Analysis Policy";e.KeyboardShortcutDescription_Shelvesets="Shelvesets";e.PullRequest_QuickStart_Iterations_Desc="Active pull requests are often updated to incorporate the suggestions made by others. See the changes from all updates or just the changes introduced in a specific update.";e.ChangeCountAdd="{0} add";e.RenamedFromFormat="renamed from {0}";e.VersionSelectorNoMatchingMyBranches="Press Enter to search in \u0027All branches\u0027";e.DiffSummaryShowingFiles="Showing {0}:";e.CreatePersonalAccessTokenOneTimeWarning="Copy the password now. We don\u0027t store it and you won\u0027t be able to see it again.";e.ShelvesetResultsForOwner="Shelvesets for owner: {0}";e.LinksControlDuplicateVersionedItem="Duplicate versioned item.";e.Status_Tooltip_Primary_Error_Singular="Error reported";e.CodePolicyBuildDescriptionTitle="Automatically build pull requests";e.CommitFailedUsePullRequest="Could not update {0}. Commit to a new branch, then use a pull request to update {0}.";e.DateVersionDisplayText="As of \u0027{0}\u0027";e.ChangeDetailsPageTitle="Commit {0}: {1}";e.PullRequest_ActivityFeed_Reviewer_DeclinedStatus="Declined to review";e.LinkDialogChangeset="Changeset";e.VersionSelectorNoTags="There are no tags in this repository";e.PullRequest_ReviewerFeedback="Reviewers";e.ChangedByTooltip="Changed by {0}";e.ChangeDetailsAuthoredOn="Authored on {0}";e.BranchPolicyControl_SaveChanges="Save changes";e.InitRepoWithDefaultFilesMessage="Added {0} files";e.PullRequest_Complete="Complete";e.PullRequest_IterationSelector_UpdateNtoM="Comparing {0} to {1}";e.PullRequest_Policy_BuildPolicyExpiresIn1Min="{0} expires in 1 minute";e.PullRequest_Policy_BuildPolicyExpiresInDays="{0} expires in {1} days";e.PullRequest_Policy_BuildPolicyExpiresInMins="{0} expires in {1} minutes";e.PullRequest_ChangeExplorer_CommentFilter_AllFilesHideComments="Hide";e.SaveGitCredentials="Save Git Credentials";e.Status_Tooltip_Secondary_Success="{0} successful";e.PullRequest_New_Vote_Singular="{0} new vote";e.PullRequsete_SystemMergeFailedStatusDisplay="The merge cannot be completed.  Changes must be \u003ca  href=\"https://go.microsoft.com/fwlink/?LinkId=399000\"\u003emerged\u003c/a\u003e manually";e.PullRequest_SourceAndTargetBranchDeleted="Source and target branches have been deleted.";e.PullRequest_New_Push_Plural="{0} new pushes";e.RepoStatsActivePullRequestsTitle="active pull requests";e.ShelvesetsGroupTitle_Plural="{0} shelvesets";e.InitRepoWithReadMeMessage="Added file README.md";e.AddReadMeCheckboxText="Add a README";e.PullRequest_Policies_Rejected="{0} rejected";e.HistoryList_Shelveset_CreatedOn="{0} created on {1}";e.Status_StatusMain_Error="Error";e.SccShortItemTitle="{0}; {1}";e.ImportRepositoryText="Import";e.GitRepositoryDeleteDialogOkText="Delete";e.CodePolicyMinimalReviewerSubRowText="Minimum number of reviewers ";e.CodePolicyMinimalReviewerApproveOwn="Allow users to approve their own changes";e.PullRequest_CallToAction_ExternallyMerged="All changes in pull request have been merged to {0}.";e.PullRequest_AllCommentsAndEvents="Everything";e.RefCreatedFormat="{0} created at {1}";e.SideBySideDiffTitle="Showing \"side-by-side\" diff mode. Click to switch to inline mode.";e.AddFileDialogReplaceFileFormat="[Replace] {0}";e.PullRequest_IterationSelector_UpdateTooltip="Update {0}: {1} - Pushed {2}";e.PushRefUpdateShortFormat="Updated to {0}";e.CommitsTabWithCountFormat="Commits ({0})";e.BranchesTabLabel="Branches";e.CodeReviewRequirementsTitle="Code review requirements";e.PullRequest_PolicyRequiredReviewersFiles_3="\"{0}\" and {1} other files";e.PullRequest_PolicyRequiredReviewersFiles_2="\"{0}\" and 1 other file";e.PullRequest_PolicyRequiredReviewersFiles_1="\"{0}\"";e.ChangeTypeBranch="branch";e.PullRequest_PolicyCodeAnalysisNoIssueFound="No new issues found";e.ModalDialogCreateButton="Create";e.PullRequest_Vote_NotReady="Wait for author";e.CommitsAddedTabName="Commits added";e.CherryPick_Dialog_PollingFailed="Failed to cherry-pick due to conflicts. This operation needs to be performed manually.";e.HistoryList_Shelveset_Created="{0} created {1}";e.FilterApplyFiltersButtonText="Apply";e.EditFileRefreshConfirmation="This file has been updated since it was initially loaded.  Would you like to get the latest version and continue the edit?";e.FilterApplyFiltersButtonTooltip="Apply filters";e.Revert_PullRequestTitleFormat="Revert \"{0}\"";e.ParentLinksMultipleParentFormat="Parents: \u003cstrong\u003e{0}\u003c/strong\u003e";e.CheckinNotesSectionHeader="Checkin notes";e.HistoryResultHeaderID="ID";e.PullRequest_DiscussionOnly="Discussion";e.CherryPick_Conflict="There were conflicts when cherry-picking commit {0}. This operation needs to be done manually.";e.Shelveset="Shelveset";e.PullRequest_ZeroComments_Tooltip="There are no comments in this pull request.";e.FetchingResultsText="Fetching results...";e.NextDifference="Next difference";e.PullRequests_ResultHeader_AssignedToTeam="Assigned to my team";e.PolicyOverrideReasonLabel="Override reason";e.PullRequest_DiscussionFilterTitle="Showing";e.PushTagRefFormat="tag {0}";e.PullRequest_PolicyWorkItemLinkingPolicyFailed="No work items linked";e.VersionSelectorNoMatchingRepositories="No repository names contain the filter text";e.PullRequest_UpdatesTab_NotSupported="This pull request does not support iterations.";e.BranchSummaryBranchColumn="Branch";e.ChangeTypeDelete="delete";e.ChangeVersionDisplayText="Changeset {0}";e.PullRequest_PolicyRequiredReviewersMessage2="{0} and 1 other {1} changes to {2}";e.PullRequest_PolicyRequiredReviewersMessage3="{0} and {1} others {2} changes to {3}";e.PullRequest_PolicyRequiredReviewersMessage1="{0} {1} changes to {2}";e.AsyncRef_Dialog_GeneratedRefText="Topic branch name";e.PullRequest_MergeStrategyPolicySucceeded="Merge selected matches policy";e.DeletedBuildDefinition="The build definition used by the build policy has been deleted.";e.PullRequest_ActivityFeed_Reviewer_Joined="{0} joined as a reviewer";e.PullRequests_RelatedArtifacts_FailToCreate="Failed to create the link.";e.SingleBranch_RelatedArtifactsDisplayString="1 Branch";e.RelatedArtifacts_DefaultZeroDataText="No work items selected";e.PullRequest_ActivityFeed_Reviewers_AddedBy="{0} was added as a reviewer by {1}.";e.PullRequest_ActivityFeed_Pushed_One="{0} pushed a commit";e.CommitDetailsParentSelectorMergeText="Changes while merging";e.LinesAddedToolTip="{0} lines added";e.Shelvesets="Shelvesets";e.PullRequest_Vote_Singular="{0} vote";e.PullRequest_EmailMore="More...";e.ChangeDetailsAuthorDetailsTitle="Author details";e.PullRequest_ActivityFeed_Iteration_Commits_Removed_Title="{0} removed {1} commits creating {2}";e.MultipleCommits_RelatedArtifactsDisplayString="{0} Commits";e.MergeStrategyPolicyOptionSquash="Squash changes when merging";e.CodePolicyRequiredReviewersDescriptionContent="To require specific reviewers for portions of your code base, specify the path and add the reviewers you want to require.";e.FileIsEmpty="The file is empty.";e.LinesDeletedToolTip="{0} lines deleted";e.PullRequest_ActivityFeed_PR_ReactivatedBy="{0} reactivated the pull request";e.Status_StatusMain_Pending="Pending";e.SquashedLowerCase="squashed";e.HiddenCommentsSingle="1 other comment";e.LatestVersionedItemLinkText="Latest version of {0}";e.VersionSpecPathFormat="{0} ({1})";e.RelatedArtifactChangesetTitle="Changeset";e.BranchesContextMenuCompareTo="Compare this branch to";e.PullRequest_SystemAbandonedStatus="Abandoned";e.CommentPositionInfoWithLines="{0}: lines {1}-{2}";e.Status_Tooltip_Secondary_Error_Plural="{0} errors";e.PullRequest_PullRequestDetailsMergeStatus_Failure="Merge failed";e.HistoryList_PushesList_MergedOn="{0} merged {1} on {2}";e.FileVersionNoLatestVersion="(latest not found) | {0} (indexed)";e.CodePolicyNoReviewerError="Please enter a number of reviewers between 1 and 10.";e.PullRequest_RollupStatus_MergeFailure="Merge failed";e.FileVersionNoIndexVersion="{0} (latest) | (indexed not found)";e.PullRequest_NumberOfPullRequests_MoreThanCount="({0}+)";e.ContextMenuCodeSearchToDefinitionLabel="Search for definition";e.OverallComments="Overall comments";e.PullRequest_Pivot_Abandoned="Abandoned";e.DownloadFileMenuText="Download";e.PullRequest_QuickStart_Files_Name="Files";e.PullRequest_QuickStart_Files_Desc="Click on the {0} tab to view the code under review in this pull request.";e.PullRequest_IterationSelector_SinceLastVote="Since my last vote";e.HistoryChangesSearchFilterInvalidChangesetNumberFormat="{0} is not a valid changeset number. Please specify a number between 1 and 2147483647.";e.DiffCommitTitleShortFormat="Diff {0} â†” {1}";e.PullRequest_Policy_ApproverApprovedBy1="1 reviewer approved";e.PullRequest_ReactivatePullRequest="Reactivate";e.PullRequest_ChangeExplorer_CommentFilter_AllFilesAllComments="All";e.Revert_Dialog_PollingFailed="Failed to revert changes due to conflicts. This operation needs to be performed manually.";e.ExitFullScreenMode="Exit full screen mode";e.MaxFileSizeExceededTfvc="This file\u0027s content exceeds the maximum size allowed to be edited through the web.";e.History="History";e.PullRequests_RelatedArtifacts_FailToDelete="Failed to delete the link.";e.PullRequest_ActivityFeed_Iteration_Title="{0} pushed {1} commits creating {2}";e.PullRequest_CannotDeleteSourceWarning="Delete is disabled for the following reason: {0}";e.PullRequests_ResultHeader_AssignedToMe="Assigned to me";e.LinkDialogInvalidChangesetId="The following number is not a valid changeset ID: \u0027{0}\u0027. Specify a number between 1 and 2147483647.";e.HistoryResultHeaderAuthoredDate="Authored Date";e.PullRequest_Showing="Showing";e.PullRequest_MergeStrategyPolicyFailed="Merge selected does not match policy";e.PullRequest_HelpMergeWithCmd="Complete the merge from command line";e.PullRequest_MoreItemsMessage="Showing {0} files";e.OpenFolderMenuItem="Open Folder";e.PullRequest_ActivityFeed_SinceYourLast="{0} since your last visit.";e.WorkItem="Work item";e.PullRequest_CallToAction_MergeRunning="Merge in progress.";e.XAuthoredYWithAnnotationText="{0} authored {1} ({2})";e.BinaryContentDeleted="Binary content deleted";e.XAuthoredYWithAnnotationHtml="\u003cstrong\u003e{0}\u003c/strong\u003e authored {1} ({2})";e.FileVersionViewIndexedTitle="Click to view the indexed version of this file";e.PushesListPullRequestTitleFormat="Pull Request {0}: {1}";e.PushedByAlternateFormat="\u003cstrong\u003e{0}\u003c/strong\u003e pushed {1}";e.PullRequest_CompleteMergeDialog_MergeDetailsWatermark="Enter more details about the pull request";e.ChangeExplorerCommentsModeInline="Show comments under files";e.CommitMoreItemsMessage="Only the first {0} items in this commit are included.";e.PushesListPullRequestFormat="Pull request created by {0}";e.LinksControlDuplicateCommit="Duplicate commit.";e.PullRequest_HelpDialogVSPullCreate="After opening the repository in Visual Studio, please \u003ca href=\"https://go.microsoft.com/fwlink/?LinkId=398998\" target=\"_blank\"\u003epull\u003c/a\u003e the latest changes into \u003cem\u003e{0}\u003c/em\u003e and \u003cem\u003e{1}\u003c/em\u003e, or \u003ca href=\"https://go.microsoft.com/fwlink/?LinkId=398999\" target=\"_blank\"\u003ecreate\u003c/a\u003e them if you don\u0027t have them.";e.ContentJsonParseErrorTFS="Failed to parse the file contents. This is likely caused by the file encoding type set on this file in TFS not matching the actual encoding of the file. You can use the tf checkout command on this file with the /encoding argument to change the file encoding used by TFS.";e.PullRequest_Admin_CommentRequirementsPolicyCheckBox="Check that none of the code review comments are active";e.GitRepositoriesTreeProjectNodeTitleFormat="Git repositories";e.PullRequest_New_Comment_Plural="{0} new comments";e.PullRequest_ActivityFeed_Reviewer_Declined="{0} declined to review";e.NoOtherBranches="No other branches available";e.PullRequest_PolicyRequiredReviewerName="Required Reviewers Policy";e.PullRequest_PolicyRequiredReviewerVerb="must approve";e.PullRequest_Title_Abandoned="abandoned";e.PullRequest_SystemRefUpdateMultipleCommits="Commits {0} and {1} added to {2} branch";e.HistoryList_BuildStatusHeader="Build";e.PullRequest_QuickStart_Vote_Desc="Approving code changes is a one-click gesture, accessible at all times. See everyone that\u0027s signed off in one concise view.";e.PullRequest_PolicyBuildName="Build Policy";e.PullRequest_OneComment_Tooltip="There is 1 comment in this pull request.";e.KeyboardShortcutDescription_Changesets="Changesets";e.PullRequest_MergeFailedWhy="Why?";e.LinksControlDuplicateGitRefTag="The selected tag is already linked to this item.";e.AllUpdates="All updates";e.GitStatusStateFailed="failed";e.SelectBranch="Select a branch...";e.WindowsName="Windows command line";e.GitStatusStateError="error";e.PullRequest_ReviewerDownVote="{0} has rejected the code changes";e.PullRequests_RelatedArtifacts_FailToDelete_IndexChanged="Failed to delete the link because the work item\u0027s links were modified at the same time.";e.CheckinFailedMessageFormat="Failed to checkin changes: {0}";e.ShowCompleteMessage="Show complete message";e.PullRequest_NoCommitsToMergeDueToUnCalculatedHistoryNotification="We are currently processing some of your commits. There are no changes to merge between the selected branches right now. Please try again later.";e.ChangesetPickerDialogTitle="Changeset picker";e.CreateRepoInvalidNameMessage="Invalid Git repository name";e.ShowLatest="Show latest";e.PullRequest_PolicyWorkItemLinkingPolicySeparator=", ";e.PullRequest_ChangeExplorer_CommentFilter_AllFilesActiveCommentsLong="Active comments";e.PullRequest_Policies_InProgress="{0} in progress";e.EmptyGitRepoGetStartedAppleLink="https://go.microsoft.com/fwlink/?LinkID=723025";e.CodePolicyRESTAPILink="REST APIs";e.PullRequest_MergedInCommit="Commit {0}";e.ChangeCountDeletes="{0} deletes";e.PullRequest_CallToAction_Completing_Myself="Completing the pull request...";e.PullRequest_NumWorkItemsLimitExceeded="Only the first {0} work items will be linked";e.ParentLinksSingleParentFormat="Parent: \u003cstrong\u003e{0}\u003c/strong\u003e";e.More="more";e.Code="Code";e.Into="into";e.Item="Item";e.Repo="repo";e.AccountServerResources_AlternateCredentialsConfirmPassword="Confirm Password";e.EditFileCommitToNewBranch="Commit to new branch...";e.AddFileDialogDefaultCommentSingleFileWithEdit="Updated {0}";e.PullRequest_Ping="Ping";e.CodePolicyRequiredReviewersPathToolTip="Specify the path to the files that require these reviewers. You can specify absolute paths and wildcards (for example: /WebApp/Models/Data.cs, /WebApp/*, or *.cs). You can specify multiple paths using â€œ;â€ as a separator (for example: /WebApp/Models/Data.cs;ClientApp/Models/Data.cs).";e.PullRequest_ApproveWithComment="Approved with suggestions";e.BranchUpdates="Branch Updates";e.EditFileDiscardChangesConfirmation="You have unsaved changes made to file \u0027{0}\u0027. Are you sure you wish to discard these changes?";e.PullRequest_Policy_BuildPolicyFailed="{0} failed";e.ChangeTypeMerge="merge";e.NoChangesMessage="No files have changed.";e.PullRequest_RemoveReviewer="Remove {0}";e.AddFileDialogFilenameLabel="New file name";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Presentation/Scripts/TFS/Generated/TFS.ChatRoom.Constants",["require","exports"],function(n,t){var i,r;(function(n){n.WorkItemChangedEvent="WorkItemChangedEvent";n.BuildCompletedEvent="BuildCompletedEvent";n.CheckinEvent="CheckinEvent";n.CodeReviewChangedEvent="CodeReviewChangedEvent";n.GitPushEvent="GitPushEvent";n.GitPullRequestEvent="GitPullRequestEvent";n.MaxChatMessageLength=2500})(i=t.ChatConstants||(t.ChatConstants={})),function(n){n[n.Normal=0]="Normal";n[n.System=1]="System";n[n.Notification=2]="Notification";n[n.Error=3]="Error"}(t.MessageType||(t.MessageType={}));r=t.MessageType});
define("Build.Common/Scripts/Resources/TFS.Resources.Build.Common",["require","exports"],function(require,exports){var e=exports;e.BuildStatusSucceeded="Succeeded";e.BuildResultNone="None";e.BuildDetailViewDurationFormatMinutes="{0} minutes";e.BuildCompletedAgoFormat="Completed {0}";e.BuildDurationNoQueueName="[no queue]";e.BuildStatusStopped="Stopped";e.BuildDetailViewUnknownDefinition="\u003cUnknown Definition\u003e";e.QueueBuildPriorityHigh="High";e.BuildDetailViewPrivateCompletedFormat="Validated shelveset {0} for {1} using {2} ({3})";e.BuildStatusNone="None";e.BuildDurationCompletedAgoQueueFormat="Ran for {0} ({1}), completed {2} ago";e.BuildDurationCompletedSimpleFormat="[{0}]";e.BuildReasonScheduleForced="Scheduled (forced)";e.BuildDetailViewBatchedGatedNoChanges="No gated check-ins for {0} requests in {1} ({2})";e.BuildDetailViewChangesetFormat="changeset {0}";e.BuildStatusPostponed="Postponed";e.BuildStatusNotStarted="Not started";e.BuildReasonSchedule="Scheduled";e.BuildDetailViewGatedRejectedFormat="Rejected gated check-in by {0} in {1} ({2})";e.BuildInProgressDuration="Build {0} is in progress and has been running for {1}";e.BuildDetailViewReasonFormatWithoutVersionText="{0} triggered {1} ({2})";e.BuildDetailViewDurationFormatDays="{0} days";e.BuildDetailViewGatedNoChangesFormat="No changes found for gated check-in by {0} in {1} ({2})";e.BuildReasonBatchedCI="Batched continuous integration";e.BuildReasonValidateShelveset="Private";e.BuildStatusCompleted="Completed";e.BuildResultCanceled="Canceled";e.BuildCompletedDuration="Build {0} {1} and ran for {2}";e.BuildDetailViewNoQualityAssignedText="\u003cNo quality assigned\u003e";e.BuildDurationInProgressQueueFormat="Running for {0} ({1})";e.QueueBuildPriorityBelowNormal="Below normal";e.BuildReasonCheckInShelveset="Check in shelveset";e.BuildResultPartiallySucceeded="Partially succeeded";e.BuildDetailViewGatedInProgressFormat="Validating gated check-in by {0} using {1} ({2})";e.BuildStatusFailed="Failed";e.BuildDetailViewDefaultReasonFormat="{0} triggered {1} ({2}) for {3}";e.BuildReasonManual="Manual";e.BuildDetailViewBatchedGatedCommitted="Committed {0} out of {1} gated check-ins in {2} ({3})";e.BuildResultFailed="Failed";e.BuildReasonUserCreated="User created";e.NoBuildExistsForDefinition="No build exists";e.BuildStatusPartiallySucceeded="Partially succeeded";e.QueueBuildPriorityLow="Low";e.BuildTestPassedResults="{0}/{1} test(s) passed.";e.BuildDetailViewBatchedGatedRejected="Rejected {0} out of {1} gated check-ins in {2} ({3})";e.BuildArtifactTitle="Build {0}";e.BuildDurationInProgressFormat="Running for {0}";e.BuildResultSucceeded="Succeeded";e.BuildDetailViewPrivateInProgressFormat="Validating shelveset {0} for {1} using {2} ({3})";e.BuildStatusInProgress="In progress";e.BuildDetailViewDurationFormatHours="{0} hours";e.BuildDetailViewDurationFormatSeconds="{0} seconds";e.BuildReasonPullRequest="Pull request";e.QueueBuildPriorityNormal="Normal";e.QueueBuildPriorityAboveNormal="Above normal";e.BuildDetailViewGatedCommittedFormat="Committed gated check-in by {0} as {1} in {2} ({3})";e.BuildReasonIndividualCI="Individual continuous integration";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("TFS/Build/ExtensionContracts",["require","exports"],function(n,t){t.BuildResultsViewTabIds={Summary:"summary",Console:"console",Logs:"details",Timeline:"timeline",Artifacts:"artifacts",XamlLog:"xamllog",XamlDiagnostics:"xamldiagnostics"};t.BuildResultsSummaryTabSectionIds={BuildDetails:"BuildDetails",BuildIssues:"BuildIssues",AssociatedChangeset:"AssociatedChangeset",DeploymentInformation:"DeploymentInformation",BuildTags:"BuildTags",TestSummary:"TestSummary",CodeCoverageSummary:"CodeCoverageSummary",AssociatedWorkItem:"AssociatedWorkItem"}});
define("Build.Common/Scripts/Linking",["require","exports","Presentation/Scripts/TFS/TFS.Host.TfsContext","TFS/Build/ExtensionContracts","VSS/FeatureAvailability/Services"],function(n,t,i,r,u){function e(n){var t={};return Object.keys(n||{}).forEach(function(i){t[i]=n[i]}),t}var f,o,h,s,l,c,a,v,y;(function(n){n.Controller="build";n.DefaultAction="index";n.DetailAction="detail";n.DesignerAction="definitionEditor"})(f=t.Mvc||(t.Mvc={})),function(n){n.Mine="mine";n.All="allDefinitions";n.Queued="queued";n.Xaml="xaml"}(o=t.DefinitionsActions||(t.DefinitionsActions={})),function(n){n.Summary="summary";n.History="history"}(h=t.DefinitionActions||(t.DefinitionActions={})),function(n){n.General="general";n.SimpleProcess="simple-process";n.Triggers="triggers";n.Repositories="repositories";n.Variables="variables";n.Settings="settings";n.History="history";n.Retention="retention"}(s=t.DesignerActions||(t.DesignerActions={})),function(n){n.QueuedBuilds="queued";n.CompletedBuilds="completed";n.DeletedBuilds="deleted"}(l=t.ExplorerActions||(t.ExplorerActions={})),function(n){n.Artifacts=r.BuildResultsViewTabIds.Artifacts;n.Console=r.BuildResultsViewTabIds.Console;n.Logs=r.BuildResultsViewTabIds.Logs;n.Summary=r.BuildResultsViewTabIds.Summary;n.Timeline=r.BuildResultsViewTabIds.Timeline;n.Details="details";n.Diagnostics="diagnostics";n.Drop="drop"}(c=t.BuildActions||(t.BuildActions={})),function(n){n.Log=r.BuildResultsViewTabIds.XamlLog;n.Diagnostics=r.BuildResultsViewTabIds.XamlDiagnostics}(a=t.XamlBuildActions||(t.XamlBuildActions={})),function(n){n.QueueNewBuild="queuebuild";n.NewDefinition="new"}(v=t.UserActions||(t.UserActions={})),function(n){function t(n){return i.TfsContext.getDefault().getActionUrl(f.DefaultAction,f.Controller,{_a:o.All,path:n})}function r(n,t,r){return r=e(r),r.buildId=n,r._a=t||h.Summary,i.TfsContext.getDefault().getActionUrl(f.DefaultAction,f.Controller,r)}function l(n,t,r){r=e(r);r.definitionId=n;var o=c.Summary;return u.FeatureAvailabilityService.isFeatureEnabled("WebAccess.Build.Definitions",!1)||(o="completed"),r._a=t||o,i.TfsContext.getDefault().getActionUrl(f.DefaultAction,f.Controller,r)}function a(n,t,r){return r=e(r),r.cloneId||(r.definitionId=n),r._a=t||s.SimpleProcess,i.TfsContext.getDefault().getActionUrl(f.DesignerAction,f.Controller,r)}function v(){var n={_a:o.Mine};return i.TfsContext.getDefault().getActionUrl(f.DefaultAction,f.Controller,n)}function y(n,t){return t=e(t),t._a=n||s.SimpleProcess,i.TfsContext.getDefault().getActionUrl(f.DesignerAction,f.Controller,t)}function p(n){var t=i.TfsContext.getDefault();return t.getActionUrl(null,"AgentQueue",{project:t.navigation.project,area:"admin",queueId:n})}n.getAllDefinitionsLink=t;n.getBuildDetailLink=r;n.getDefinitionLink=l;n.getDefinitionEditorLink=a;n.getMyDefinitionsLink=v;n.getNewDefinitionLink=y;n.getQueueLink=p}(y=t.BuildLinks||(t.BuildLinks={}));t.copy=e});
define("Build.Common/Scripts/BuildArtifacts",["require","exports","Build.Common/Scripts/Resources/TFS.Resources.Build.Common","Build.Common/Scripts/Linking","VSS/Artifacts/Constants","VSS/Artifacts/Services","VSS/Locations","VSS/Utils/String"],function(n,t,i,r,u,f,e,o){var h=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.getUrl=function(n){return e.urlHelper.getMvcUrl({webContext:n,action:r.Mvc.DetailAction,controller:r.Mvc.Controller,queryParams:{id:this.getId()}})},t.prototype.getTitle=function(){return o.format(i.BuildArtifactTitle,this.getId())},t}(f.Artifact),s;t.BuildArtifact=h;s=function(){function n(){}return n.beginResolve=function(n,t,i){for(var e,s=[],r=0,c=n.length;r<c;r+=1)e=n[r],s[s.length]=o.ignoreCaseComparer(e.type,u.ArtifactTypeNames.Build)===0?new h(e):new f.Artifact(e);$.isFunction(i)&&i({success:!0,artifacts:s})},n}();t.BuildArtifactResolver=s;f.ClientLinking.registerArtifactResolver(u.ToolNames.TeamBuild,function(n,t,i,r){s.beginResolve(n,t,i,r)})});
define("Build.Common/Scripts/Xaml/Xaml.Legacy",["require","exports","Build.Common/Scripts/Resources/TFS.Resources.Build.Common","VSS/Utils/Date","VSS/Utils/String","VSS/VSS"],function(n,t,i,r,u,f){function c(n,t){var r=[],u=$.extend({},t||{},{selectedQuality:""});return r.push({rank:0,id:"build-quality",text:i.BuildDetailViewNoQualityAssignedText,title:i.BuildDetailViewNoQualityAssignedText,showText:!0,arguments:u,select:!0,noIcon:!0}),$.each(n,function(n,i){var u=$.extend({},t||{},{selectedQuality:i});r.push({rank:n+1,id:"build-quality",text:i,title:i,showText:!0,noIcon:!0,arguments:u,select:!0})}),r}var o=function(){function n(){}return n._ensureNames=function(){var t;n._names||(t={},t[n.None]={name:"none",displayName:""},t[n.InProgress]={name:"inprogress",displayName:i.BuildStatusInProgress},t[n.Succeeded]={name:"succeeded",displayName:i.BuildStatusSucceeded},t[n.PartiallySucceeded]={name:"partiallysucceeded",displayName:i.BuildStatusPartiallySucceeded},t[n.Failed]={name:"failed",displayName:i.BuildStatusFailed},t[n.Stopped]={name:"stopped",displayName:i.BuildStatusStopped},t[n.NotStarted]={name:"notstarted",displayName:i.BuildStatusNotStarted},n._names=t)},n.getName=function(t,i){n._ensureNames();var r=n._names[t];return r||(r=n._names[n.None]),r[i===!0?"displayName":"name"]},n._names=null,n.None=0,n.InProgress=1,n.Succeeded=2,n.PartiallySucceeded=4,n.Failed=8,n.Stopped=16,n.NotStarted=32,n.All=63,n}(),s,h,e;t.BuildStatus=o;s=function(){function n(){}return n.getBuildReasonDescriptionText=function(t){var o,r,h,c,s,f;return s=t.requests.length,r=n.getBuildDefinitionText(t),f=t.requestedFor,o=t.vc&&t.vc.versionText?u.format(i.BuildDetailViewDefaultReasonFormat,f,r,t.project,t.vc.versionText):u.format(i.BuildDetailViewReasonFormatWithoutVersionText,f,r,t.project),t.reason===e.CheckInShelveset?t.finished?s>1?(c=(t.vc.successCs||0)+(t.vc.failCs||0),o=c?t.vc.successCs>0?u.format(i.BuildDetailViewBatchedGatedCommitted,t.vc.successCs,s,r,t.project):u.format(i.BuildDetailViewBatchedGatedRejected,t.vc.failCs,s,r,t.project):u.format(i.BuildDetailViewBatchedGatedNoChanges,s,r,t.project)):t.vc.csId>0?(h=u.format(i.BuildDetailViewChangesetFormat,t.vc.csId),o=u.format(i.BuildDetailViewGatedCommittedFormat,f,h,r,t.project)):o=t.vc.csId===0?u.format(i.BuildDetailViewGatedNoChangesFormat,f,r,t.project):u.format(i.BuildDetailViewGatedRejectedFormat,f,r,t.project):o=u.format(i.BuildDetailViewGatedInProgressFormat,f,r,t.project):t.reason===e.ValidateShelveset&&(o=t.finished?u.format(i.BuildDetailViewPrivateCompletedFormat,t.vc.shelvesetName,f,r,t.project):u.format(i.BuildDetailViewPrivateInProgressFormat,t.vc.shelvesetName,f,r,t.project)),o},n.getBuildDefinitionText=function(n){var t=i.BuildDetailViewUnknownDefinition;return n&&n.definition&&(t=n.definition),t},n.getBuildDurationTextSimple=function(t){var f=new Date,e=new Date;return t.status===o.NotStarted?(f=new Date,e=new Date):t.finished?r.isMinDate(t.finishTime)?(f=t.startTime,e=t.startTime):(f=t.startTime,e=t.finishTime):(f=t.startTime,e=new Date),u.format(i.BuildDurationCompletedSimpleFormat,n.getDuration(f,e))},n.getDuration=function(n,t){var e,r,f,o,s;return(s=Math.abs(n-t),e=s/1e3,r=e/60,r<2)?u.format(i.BuildDetailViewDurationFormatSeconds,Math.round(e)):(f=r/60,f<2)?u.format(i.BuildDetailViewDurationFormatMinutes,Math.round(r*10)/10):(o=f/24,o<2)?u.format(i.BuildDetailViewDurationFormatHours,Math.round(f*10)/10):u.format(i.BuildDetailViewDurationFormatDays,Math.round(o))},n.getTestRunInformation=function(n){var t,r;if(n.information)for(t=0;t<n.information.length;t++)if(n.information[t].type===h.ConfigurationSummary&&n.information[t].testRuns&&n.information[t].testRuns.length>0)return r=n.information[t].testRuns[0],u.format(i.BuildTestPassedResults,r.passed,r.total);return""},n}();t.BuildTextConverter=s;h=function(){function n(){}return n.ConfigurationSummary="ConfigurationSummary",n}();e=function(){function n(){}return n._ensureNames=function(){var t;n._names||(t={},t[n.None]={name:"none",displayName:""},t[n.Manual]={name:"manual",displayName:i.BuildReasonManual},t[n.IndividualCI]={name:"individualci",displayName:i.BuildReasonIndividualCI},t[n.BatchedCI]={name:"batchedci",displayName:i.BuildReasonBatchedCI},t[n.Schedule]={name:"schedule",displayName:i.BuildReasonSchedule},t[n.ScheduleForced]={name:"scheduleforced",displayName:i.BuildReasonScheduleForced},t[n.UserCreated]={name:"usercreated",displayName:i.BuildReasonUserCreated},t[n.ValidateShelveset]={name:"validateshelveset",displayName:i.BuildReasonValidateShelveset},t[n.CheckInShelveset]={name:"checkinshelveset",displayName:i.BuildReasonCheckInShelveset},n._names=t)},n.getName=function(t,i){n._ensureNames();var r=n._names[t];return r||(r=n._names[n.None]),r[i===!0?"displayName":"name"]},n.containsFlag=function(n,t){return(n&t)===t},n._names=null,n.None=0,n.Manual=1,n.IndividualCI=2,n.BatchedCI=4,n.Schedule=8,n.ScheduleForced=16,n.UserCreated=32,n.ValidateShelveset=64,n.CheckInShelveset=128,n.Triggered=191,n.All=255,n}();t.convertQualitiesToMenuItems=c;f.tfsModuleLoaded("Xaml.Legacy",t)});
// Knockout JavaScript library v2.2.1
// (c) Steven Sanderson - http://knockoutjs.com/
// License: MIT (http://www.opensource.org/licenses/mit-license.php)

(function() {function j(w){throw w;}var m=!0,p=null,r=!1;function u(w){return function(){return w}};var x=window,y=document,ga=navigator,F=window.jQuery,I=void 0;
function L(w){function ha(a,d,c,e,f){var g=[];a=b.j(function(){var a=d(c,f)||[];0<g.length&&(b.a.Ya(M(g),a),e&&b.r.K(e,p,[c,a,f]));g.splice(0,g.length);b.a.P(g,a)},p,{W:a,Ka:function(){return 0==g.length||!b.a.X(g[0])}});return{M:g,j:a.pa()?a:I}}function M(a){for(;a.length&&!b.a.X(a[0]);)a.splice(0,1);if(1<a.length){for(var d=a[0],c=a[a.length-1],e=[d];d!==c;){d=d.nextSibling;if(!d)return;e.push(d)}Array.prototype.splice.apply(a,[0,a.length].concat(e))}return a}function S(a,b,c,e,f){var g=Math.min,
h=Math.max,k=[],l,n=a.length,q,s=b.length,v=s-n||1,G=n+s+1,J,A,z;for(l=0;l<=n;l++){A=J;k.push(J=[]);z=g(s,l+v);for(q=h(0,l-1);q<=z;q++)J[q]=q?l?a[l-1]===b[q-1]?A[q-1]:g(A[q]||G,J[q-1]||G)+1:q+1:l+1}g=[];h=[];v=[];l=n;for(q=s;l||q;)s=k[l][q]-1,q&&s===k[l][q-1]?h.push(g[g.length]={status:c,value:b[--q],index:q}):l&&s===k[l-1][q]?v.push(g[g.length]={status:e,value:a[--l],index:l}):(g.push({status:"retained",value:b[--q]}),--l);if(h.length&&v.length){a=10*n;var t;for(b=c=0;(f||b<a)&&(t=h[c]);c++){for(e=
0;k=v[e];e++)if(t.value===k.value){t.moved=k.index;k.moved=t.index;v.splice(e,1);b=e=0;break}b+=e}}return g.reverse()}function T(a,d,c,e,f){f=f||{};var g=a&&N(a),g=g&&g.ownerDocument,h=f.templateEngine||O;b.za.vb(c,h,g);c=h.renderTemplate(c,e,f,g);("number"!=typeof c.length||0<c.length&&"number"!=typeof c[0].nodeType)&&j(Error("Template engine must return an array of DOM nodes"));g=r;switch(d){case "replaceChildren":b.e.N(a,c);g=m;break;case "replaceNode":b.a.Ya(a,c);g=m;break;case "ignoreTargetNode":break;
default:j(Error("Unknown renderMode: "+d))}g&&(U(c,e),f.afterRender&&b.r.K(f.afterRender,p,[c,e.$data]));return c}function N(a){return a.nodeType?a:0<a.length?a[0]:p}function U(a,d){if(a.length){var c=a[0],e=a[a.length-1];V(c,e,function(a){b.Da(d,a)});V(c,e,function(a){b.s.ib(a,[d])})}}function V(a,d,c){var e;for(d=b.e.nextSibling(d);a&&(e=a)!==d;)a=b.e.nextSibling(e),(1===e.nodeType||8===e.nodeType)&&c(e)}function W(a,d,c){a=b.g.aa(a);for(var e=b.g.Q,f=0;f<a.length;f++){var g=a[f].key;if(e.hasOwnProperty(g)){var h=
e[g];"function"===typeof h?(g=h(a[f].value))&&j(Error(g)):h||j(Error("This template engine does not support the '"+g+"' binding within its templates"))}}a="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+b.g.ba(a)+" } })()})";return c.createJavaScriptEvaluatorBlock(a)+d}function X(a,d,c,e){function f(a){return function(){return k[a]}}function g(){return k}var h=0,k,l;b.j(function(){var n=c&&c instanceof b.z?c:new b.z(b.a.d(c)),q=n.$data;e&&b.eb(a,n);if(k=("function"==typeof d?
d(n,a):d)||b.J.instance.getBindings(a,n)){if(0===h){h=1;for(var s in k){var v=b.c[s];v&&8===a.nodeType&&!b.e.I[s]&&j(Error("The binding '"+s+"' cannot be used with virtual elements"));if(v&&"function"==typeof v.init&&(v=(0,v.init)(a,f(s),g,q,n))&&v.controlsDescendantBindings)l!==I&&j(Error("Multiple bindings ("+l+" and "+s+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.")),l=s}h=2}if(2===h)for(s in k)(v=b.c[s])&&"function"==
typeof v.update&&(0,v.update)(a,f(s),g,q,n)}},p,{W:a});return{Nb:l===I}}function Y(a,d,c){var e=m,f=1===d.nodeType;f&&b.e.Ta(d);if(f&&c||b.J.instance.nodeHasBindings(d))e=X(d,p,a,c).Nb;e&&Z(a,d,!f)}function Z(a,d,c){for(var e=b.e.firstChild(d);d=e;)e=b.e.nextSibling(d),Y(a,d,c)}function $(a,b){var c=aa(a,b);return c?0<c.length?c[c.length-1].nextSibling:a.nextSibling:p}function aa(a,b){for(var c=a,e=1,f=[];c=c.nextSibling;){if(H(c)&&(e--,0===e))return f;f.push(c);B(c)&&e++}b||j(Error("Cannot find closing comment tag to match: "+
a.nodeValue));return p}function H(a){return 8==a.nodeType&&(K?a.text:a.nodeValue).match(ia)}function B(a){return 8==a.nodeType&&(K?a.text:a.nodeValue).match(ja)}function P(a,b){for(var c=p;a!=c;)c=a,a=a.replace(ka,function(a,c){return b[c]});return a}function la(){var a=[],d=[];this.save=function(c,e){var f=b.a.i(a,c);0<=f?d[f]=e:(a.push(c),d.push(e))};this.get=function(c){c=b.a.i(a,c);return 0<=c?d[c]:I}}function ba(a,b,c){function e(e){var g=b(a[e]);switch(typeof g){case "boolean":case "number":case "string":case "function":f[e]=
g;break;case "object":case "undefined":var h=c.get(g);f[e]=h!==I?h:ba(g,b,c)}}c=c||new la;a=b(a);if(!("object"==typeof a&&a!==p&&a!==I&&!(a instanceof Date)))return a;var f=a instanceof Array?[]:{};c.save(a,f);var g=a;if(g instanceof Array){for(var h=0;h<g.length;h++)e(h);"function"==typeof g.toJSON&&e("toJSON")}else for(h in g)e(h);return f}function ca(a,d){if(a)if(8==a.nodeType){var c=b.s.Ua(a.nodeValue);c!=p&&d.push({sb:a,Fb:c})}else if(1==a.nodeType)for(var c=0,e=a.childNodes,f=e.length;c<f;c++)ca(e[c],
d)}function Q(a,d,c,e){b.c[a]={init:function(a){b.a.f.set(a,da,{});return{controlsDescendantBindings:m}},update:function(a,g,h,k,l){h=b.a.f.get(a,da);g=b.a.d(g());k=!c!==!g;var n=!h.Za;if(n||d||k!==h.qb)n&&(h.Za=b.a.Ia(b.e.childNodes(a),m)),k?(n||b.e.N(a,b.a.Ia(h.Za)),b.Ea(e?e(l,g):l,a)):b.e.Y(a),h.qb=k}};b.g.Q[a]=r;b.e.I[a]=m}function ea(a,d,c){c&&d!==b.k.q(a)&&b.k.T(a,d);d!==b.k.q(a)&&b.r.K(b.a.Ba,p,[a,"change"])}var b="undefined"!==typeof w?w:{};b.b=function(a,d){for(var c=a.split("."),e=b,f=0;f<
c.length-1;f++)e=e[c[f]];e[c[c.length-1]]=d};b.p=function(a,b,c){a[b]=c};b.version="2.2.1";b.b("version",b.version);b.a=new function(){function a(a,d){if("input"!==b.a.u(a)||!a.type||"click"!=d.toLowerCase())return r;var c=a.type;return"checkbox"==c||"radio"==c}var d=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,c={},e={};c[/Firefox\/2/i.test(ga.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"];c.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" ");
for(var f in c){var g=c[f];if(g.length)for(var h=0,k=g.length;h<k;h++)e[g[h]]=f}var l={propertychange:m},n,c=3;f=y.createElement("div");for(g=f.getElementsByTagName("i");f.innerHTML="\x3c!--[if gt IE "+ ++c+"]><i></i><![endif]--\x3e",g[0];);n=4<c?c:I;return{Na:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],o:function(a,b){for(var d=0,c=a.length;d<c;d++)b(a[d])},i:function(a,b){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(a,b);for(var d=0,c=a.length;d<
c;d++)if(a[d]===b)return d;return-1},lb:function(a,b,d){for(var c=0,e=a.length;c<e;c++)if(b.call(d,a[c]))return a[c];return p},ga:function(a,d){var c=b.a.i(a,d);0<=c&&a.splice(c,1)},Ga:function(a){a=a||[];for(var d=[],c=0,e=a.length;c<e;c++)0>b.a.i(d,a[c])&&d.push(a[c]);return d},V:function(a,b){a=a||[];for(var d=[],c=0,e=a.length;c<e;c++)d.push(b(a[c]));return d},fa:function(a,b){a=a||[];for(var d=[],c=0,e=a.length;c<e;c++)b(a[c])&&d.push(a[c]);return d},P:function(a,b){if(b instanceof Array)a.push.apply(a,
b);else for(var d=0,c=b.length;d<c;d++)a.push(b[d]);return a},extend:function(a,b){if(b)for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return a},ka:function(a){for(;a.firstChild;)b.removeNode(a.firstChild)},Hb:function(a){a=b.a.L(a);for(var d=y.createElement("div"),c=0,e=a.length;c<e;c++)d.appendChild(b.A(a[c]));return d},Ia:function(a,d){for(var c=0,e=a.length,g=[];c<e;c++){var f=a[c].cloneNode(m);g.push(d?b.A(f):f)}return g},N:function(a,d){b.a.ka(a);if(d)for(var c=0,e=d.length;c<e;c++)a.appendChild(d[c])},
Ya:function(a,d){var c=a.nodeType?[a]:a;if(0<c.length){for(var e=c[0],g=e.parentNode,f=0,h=d.length;f<h;f++)g.insertBefore(d[f],e);f=0;for(h=c.length;f<h;f++)b.removeNode(c[f])}},bb:function(a,b){7>n?a.setAttribute("selected",b):a.selected=b},D:function(a){return(a||"").replace(d,"")},Rb:function(a,d){for(var c=[],e=(a||"").split(d),f=0,g=e.length;f<g;f++){var h=b.a.D(e[f]);""!==h&&c.push(h)}return c},Ob:function(a,b){a=a||"";return b.length>a.length?r:a.substring(0,b.length)===b},tb:function(a,b){if(b.compareDocumentPosition)return 16==
(b.compareDocumentPosition(a)&16);for(;a!=p;){if(a==b)return m;a=a.parentNode}return r},X:function(a){return b.a.tb(a,a.ownerDocument)},u:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},n:function(b,d,c){var e=n&&l[d];if(!e&&"undefined"!=typeof F){if(a(b,d)){var f=c;c=function(a,b){var d=this.checked;b&&(this.checked=b.nb!==m);f.call(this,a);this.checked=d}}F(b).bind(d,c)}else!e&&"function"==typeof b.addEventListener?b.addEventListener(d,c,r):"undefined"!=typeof b.attachEvent?b.attachEvent("on"+
d,function(a){c.call(b,a)}):j(Error("Browser doesn't support addEventListener or attachEvent"))},Ba:function(b,d){(!b||!b.nodeType)&&j(Error("element must be a DOM node when calling triggerEvent"));if("undefined"!=typeof F){var c=[];a(b,d)&&c.push({nb:b.checked});F(b).trigger(d,c)}else"function"==typeof y.createEvent?"function"==typeof b.dispatchEvent?(c=y.createEvent(e[d]||"HTMLEvents"),c.initEvent(d,m,m,x,0,0,0,0,0,r,r,r,r,0,b),b.dispatchEvent(c)):j(Error("The supplied element doesn't support dispatchEvent")):
"undefined"!=typeof b.fireEvent?(a(b,d)&&(b.checked=b.checked!==m),b.fireEvent("on"+d)):j(Error("Browser doesn't support triggering events"))},d:function(a){return b.$(a)?a():a},ua:function(a){return b.$(a)?a.t():a},da:function(a,d,c){if(d){var e=/[\w-]+/g,f=a.className.match(e)||[];b.a.o(d.match(e),function(a){var d=b.a.i(f,a);0<=d?c||f.splice(d,1):c&&f.push(a)});a.className=f.join(" ")}},cb:function(a,d){var c=b.a.d(d);if(c===p||c===I)c="";if(3===a.nodeType)a.data=c;else{var e=b.e.firstChild(a);
!e||3!=e.nodeType||b.e.nextSibling(e)?b.e.N(a,[y.createTextNode(c)]):e.data=c;b.a.wb(a)}},ab:function(a,b){a.name=b;if(7>=n)try{a.mergeAttributes(y.createElement("<input name='"+a.name+"'/>"),r)}catch(d){}},wb:function(a){9<=n&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},ub:function(a){if(9<=n){var b=a.style.width;a.style.width=0;a.style.width=b}},Lb:function(a,d){a=b.a.d(a);d=b.a.d(d);for(var c=[],e=a;e<=d;e++)c.push(e);return c},L:function(a){for(var b=[],d=0,c=a.length;d<
c;d++)b.push(a[d]);return b},Pb:6===n,Qb:7===n,Z:n,Oa:function(a,d){for(var c=b.a.L(a.getElementsByTagName("input")).concat(b.a.L(a.getElementsByTagName("textarea"))),e="string"==typeof d?function(a){return a.name===d}:function(a){return d.test(a.name)},f=[],g=c.length-1;0<=g;g--)e(c[g])&&f.push(c[g]);return f},Ib:function(a){return"string"==typeof a&&(a=b.a.D(a))?x.JSON&&x.JSON.parse?x.JSON.parse(a):(new Function("return "+a))():p},xa:function(a,d,c){("undefined"==typeof JSON||"undefined"==typeof JSON.stringify)&&
j(Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js"));return JSON.stringify(b.a.d(a),d,c)},Jb:function(a,d,c){c=c||{};var e=c.params||{},f=c.includeFields||this.Na,g=a;if("object"==typeof a&&"form"===b.a.u(a))for(var g=a.action,h=f.length-1;0<=h;h--)for(var k=b.a.Oa(a,f[h]),l=k.length-1;0<=l;l--)e[k[l].name]=k[l].value;d=b.a.d(d);var n=y.createElement("form");
n.style.display="none";n.action=g;n.method="post";for(var w in d)a=y.createElement("input"),a.name=w,a.value=b.a.xa(b.a.d(d[w])),n.appendChild(a);for(w in e)a=y.createElement("input"),a.name=w,a.value=e[w],n.appendChild(a);y.body.appendChild(n);c.submitter?c.submitter(n):n.submit();setTimeout(function(){n.parentNode.removeChild(n)},0)}}};b.b("utils",b.a);b.b("utils.arrayForEach",b.a.o);b.b("utils.arrayFirst",b.a.lb);b.b("utils.arrayFilter",b.a.fa);b.b("utils.arrayGetDistinctValues",b.a.Ga);b.b("utils.arrayIndexOf",
b.a.i);b.b("utils.arrayMap",b.a.V);b.b("utils.arrayPushAll",b.a.P);b.b("utils.arrayRemoveItem",b.a.ga);b.b("utils.extend",b.a.extend);b.b("utils.fieldsIncludedWithJsonPost",b.a.Na);b.b("utils.getFormFields",b.a.Oa);b.b("utils.peekObservable",b.a.ua);b.b("utils.postJson",b.a.Jb);b.b("utils.parseJson",b.a.Ib);b.b("utils.registerEventHandler",b.a.n);b.b("utils.stringifyJson",b.a.xa);b.b("utils.range",b.a.Lb);b.b("utils.toggleDomNodeCssClass",b.a.da);b.b("utils.triggerEvent",b.a.Ba);b.b("utils.unwrapObservable",
b.a.d);Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments);a=c.shift();return function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}});b.a.f=new function(){var a=0,d="__ko__"+(new Date).getTime(),c={};return{get:function(a,d){var c=b.a.f.la(a,r);return c===I?I:c[d]},set:function(a,d,c){c===I&&b.a.f.la(a,r)===I||(b.a.f.la(a,m)[d]=c)},la:function(b,f){var g=b[d];if(!g||!("null"!==g&&c[g])){if(!f)return I;g=b[d]="ko"+
a++;c[g]={}}return c[g]},clear:function(a){var b=a[d];return b?(delete c[b],a[d]=p,m):r}}};b.b("utils.domData",b.a.f);b.b("utils.domData.clear",b.a.f.clear);b.a.F=new function(){function a(a,d){var e=b.a.f.get(a,c);e===I&&d&&(e=[],b.a.f.set(a,c,e));return e}function d(c){var e=a(c,r);if(e)for(var e=e.slice(0),k=0;k<e.length;k++)e[k](c);b.a.f.clear(c);"function"==typeof F&&"function"==typeof F.cleanData&&F.cleanData([c]);if(f[c.nodeType])for(e=c.firstChild;c=e;)e=c.nextSibling,8===c.nodeType&&d(c)}
var c="__ko_domNodeDisposal__"+(new Date).getTime(),e={1:m,8:m,9:m},f={1:m,9:m};return{Ca:function(b,d){"function"!=typeof d&&j(Error("Callback must be a function"));a(b,m).push(d)},Xa:function(d,e){var f=a(d,r);f&&(b.a.ga(f,e),0==f.length&&b.a.f.set(d,c,I))},A:function(a){if(e[a.nodeType]&&(d(a),f[a.nodeType])){var c=[];b.a.P(c,a.getElementsByTagName("*"));for(var k=0,l=c.length;k<l;k++)d(c[k])}return a},removeNode:function(a){b.A(a);a.parentNode&&a.parentNode.removeChild(a)}}};b.A=b.a.F.A;b.removeNode=
b.a.F.removeNode;b.b("cleanNode",b.A);b.b("removeNode",b.removeNode);b.b("utils.domNodeDisposal",b.a.F);b.b("utils.domNodeDisposal.addDisposeCallback",b.a.F.Ca);b.b("utils.domNodeDisposal.removeDisposeCallback",b.a.F.Xa);b.a.ta=function(a){var d;if("undefined"!=typeof F)if(F.parseHTML)d=F.parseHTML(a);else{if((d=F.clean([a]))&&d[0]){for(a=d[0];a.parentNode&&11!==a.parentNode.nodeType;)a=a.parentNode;a.parentNode&&a.parentNode.removeChild(a)}}else{var c=b.a.D(a).toLowerCase();d=y.createElement("div");
c=c.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!c.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!c.indexOf("<td")||!c.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""];a="ignored<div>"+c[1]+a+c[2]+"</div>";for("function"==typeof x.innerShiv?d.appendChild(x.innerShiv(a)):d.innerHTML=a;c[0]--;)d=d.lastChild;d=b.a.L(d.lastChild.childNodes)}return d};b.a.ca=function(a,d){b.a.ka(a);d=b.a.d(d);if(d!==p&&d!==I)if("string"!=typeof d&&(d=d.toString()),
"undefined"!=typeof F)F(a).html(d);else for(var c=b.a.ta(d),e=0;e<c.length;e++)a.appendChild(c[e])};b.b("utils.parseHtmlFragment",b.a.ta);b.b("utils.setHtml",b.a.ca);var R={};b.s={ra:function(a){"function"!=typeof a&&j(Error("You can only pass a function to ko.memoization.memoize()"));var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);R[b]=a;return"\x3c!--[ko_memo:"+b+"]--\x3e"},hb:function(a,b){var c=R[a];c===I&&j(Error("Couldn't find any memo with ID "+
a+". Perhaps it's already been unmemoized."));try{return c.apply(p,b||[]),m}finally{delete R[a]}},ib:function(a,d){var c=[];ca(a,c);for(var e=0,f=c.length;e<f;e++){var g=c[e].sb,h=[g];d&&b.a.P(h,d);b.s.hb(c[e].Fb,h);g.nodeValue="";g.parentNode&&g.parentNode.removeChild(g)}},Ua:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:p}};b.b("memoization",b.s);b.b("memoization.memoize",b.s.ra);b.b("memoization.unmemoize",b.s.hb);b.b("memoization.parseMemoText",b.s.Ua);b.b("memoization.unmemoizeDomNodeAndDescendants",
b.s.ib);b.Ma={throttle:function(a,d){a.throttleEvaluation=d;var c=p;return b.j({read:a,write:function(b){clearTimeout(c);c=setTimeout(function(){a(b)},d)}})},notify:function(a,d){a.equalityComparer="always"==d?u(r):b.m.fn.equalityComparer;return a}};b.b("extenders",b.Ma);b.fb=function(a,d,c){this.target=a;this.ha=d;this.rb=c;b.p(this,"dispose",this.B)};b.fb.prototype.B=function(){this.Cb=m;this.rb()};b.S=function(){this.w={};b.a.extend(this,b.S.fn);b.p(this,"subscribe",this.ya);b.p(this,"extend",
this.extend);b.p(this,"getSubscriptionsCount",this.yb)};b.S.fn={ya:function(a,d,c){c=c||"change";var e=new b.fb(this,d?a.bind(d):a,function(){b.a.ga(this.w[c],e)}.bind(this));this.w[c]||(this.w[c]=[]);this.w[c].push(e);return e},notifySubscribers:function(a,d){d=d||"change";this.w[d]&&b.r.K(function(){b.a.o(this.w[d].slice(0),function(b){b&&b.Cb!==m&&b.ha(a)})},this)},yb:function(){var a=0,b;for(b in this.w)this.w.hasOwnProperty(b)&&(a+=this.w[b].length);return a},extend:function(a){var d=this;if(a)for(var c in a){var e=
b.Ma[c];"function"==typeof e&&(d=e(d,a[c]))}return d}};b.Qa=function(a){return"function"==typeof a.ya&&"function"==typeof a.notifySubscribers};b.b("subscribable",b.S);b.b("isSubscribable",b.Qa);var C=[];b.r={mb:function(a){C.push({ha:a,La:[]})},end:function(){C.pop()},Wa:function(a){b.Qa(a)||j(Error("Only subscribable things can act as dependencies"));if(0<C.length){var d=C[C.length-1];d&&!(0<=b.a.i(d.La,a))&&(d.La.push(a),d.ha(a))}},K:function(a,b,c){try{return C.push(p),a.apply(b,c||[])}finally{C.pop()}}};
var ma={undefined:m,"boolean":m,number:m,string:m};b.m=function(a){function d(){if(0<arguments.length){if(!d.equalityComparer||!d.equalityComparer(c,arguments[0]))d.H(),c=arguments[0],d.G();return this}b.r.Wa(d);return c}var c=a;b.S.call(d);d.t=function(){return c};d.G=function(){d.notifySubscribers(c)};d.H=function(){d.notifySubscribers(c,"beforeChange")};b.a.extend(d,b.m.fn);b.p(d,"peek",d.t);b.p(d,"valueHasMutated",d.G);b.p(d,"valueWillMutate",d.H);return d};b.m.fn={equalityComparer:function(a,
b){return a===p||typeof a in ma?a===b:r}};var E=b.m.Kb="__ko_proto__";b.m.fn[E]=b.m;b.ma=function(a,d){return a===p||a===I||a[E]===I?r:a[E]===d?m:b.ma(a[E],d)};b.$=function(a){return b.ma(a,b.m)};b.Ra=function(a){return"function"==typeof a&&a[E]===b.m||"function"==typeof a&&a[E]===b.j&&a.zb?m:r};b.b("observable",b.m);b.b("isObservable",b.$);b.b("isWriteableObservable",b.Ra);b.R=function(a){0==arguments.length&&(a=[]);a!==p&&(a!==I&&!("length"in a))&&j(Error("The argument passed when initializing an observable array must be an array, or null, or undefined."));
var d=b.m(a);b.a.extend(d,b.R.fn);return d};b.R.fn={remove:function(a){for(var b=this.t(),c=[],e="function"==typeof a?a:function(b){return b===a},f=0;f<b.length;f++){var g=b[f];e(g)&&(0===c.length&&this.H(),c.push(g),b.splice(f,1),f--)}c.length&&this.G();return c},removeAll:function(a){if(a===I){var d=this.t(),c=d.slice(0);this.H();d.splice(0,d.length);this.G();return c}return!a?[]:this.remove(function(d){return 0<=b.a.i(a,d)})},destroy:function(a){var b=this.t(),c="function"==typeof a?a:function(b){return b===
a};this.H();for(var e=b.length-1;0<=e;e--)c(b[e])&&(b[e]._destroy=m);this.G()},destroyAll:function(a){return a===I?this.destroy(u(m)):!a?[]:this.destroy(function(d){return 0<=b.a.i(a,d)})},indexOf:function(a){var d=this();return b.a.i(d,a)},replace:function(a,b){var c=this.indexOf(a);0<=c&&(this.H(),this.t()[c]=b,this.G())}};b.a.o("pop push reverse shift sort splice unshift".split(" "),function(a){b.R.fn[a]=function(){var b=this.t();this.H();b=b[a].apply(b,arguments);this.G();return b}});b.a.o(["slice"],
function(a){b.R.fn[a]=function(){var b=this();return b[a].apply(b,arguments)}});b.b("observableArray",b.R);b.j=function(a,d,c){function e(){b.a.o(z,function(a){a.B()});z=[]}function f(){var a=h.throttleEvaluation;a&&0<=a?(clearTimeout(t),t=setTimeout(g,a)):g()}function g(){if(!q)if(n&&w())A();else{q=m;try{var a=b.a.V(z,function(a){return a.target});b.r.mb(function(c){var d;0<=(d=b.a.i(a,c))?a[d]=I:z.push(c.ya(f))});for(var c=s.call(d),e=a.length-1;0<=e;e--)a[e]&&z.splice(e,1)[0].B();n=m;h.notifySubscribers(l,
"beforeChange");l=c}finally{b.r.end()}h.notifySubscribers(l);q=r;z.length||A()}}function h(){if(0<arguments.length)return"function"===typeof v?v.apply(d,arguments):j(Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.")),this;n||g();b.r.Wa(h);return l}function k(){return!n||0<z.length}var l,n=r,q=r,s=a;s&&"object"==typeof s?(c=s,s=c.read):(c=c||{},s||(s=c.read));"function"!=typeof s&&j(Error("Pass a function that returns the value of the ko.computed"));
var v=c.write,G=c.disposeWhenNodeIsRemoved||c.W||p,w=c.disposeWhen||c.Ka||u(r),A=e,z=[],t=p;d||(d=c.owner);h.t=function(){n||g();return l};h.xb=function(){return z.length};h.zb="function"===typeof c.write;h.B=function(){A()};h.pa=k;b.S.call(h);b.a.extend(h,b.j.fn);b.p(h,"peek",h.t);b.p(h,"dispose",h.B);b.p(h,"isActive",h.pa);b.p(h,"getDependenciesCount",h.xb);c.deferEvaluation!==m&&g();if(G&&k()){A=function(){b.a.F.Xa(G,arguments.callee);e()};b.a.F.Ca(G,A);var D=w,w=function(){return!b.a.X(G)||D()}}return h};
b.Bb=function(a){return b.ma(a,b.j)};w=b.m.Kb;b.j[w]=b.m;b.j.fn={};b.j.fn[w]=b.j;b.b("dependentObservable",b.j);b.b("computed",b.j);b.b("isComputed",b.Bb);b.gb=function(a){0==arguments.length&&j(Error("When calling ko.toJS, pass the object you want to convert."));return ba(a,function(a){for(var c=0;b.$(a)&&10>c;c++)a=a();return a})};b.toJSON=function(a,d,c){a=b.gb(a);return b.a.xa(a,d,c)};b.b("toJS",b.gb);b.b("toJSON",b.toJSON);b.k={q:function(a){switch(b.a.u(a)){case "option":return a.__ko__hasDomDataOptionValue__===
m?b.a.f.get(a,b.c.options.sa):7>=b.a.Z?a.getAttributeNode("value").specified?a.value:a.text:a.value;case "select":return 0<=a.selectedIndex?b.k.q(a.options[a.selectedIndex]):I;default:return a.value}},T:function(a,d){switch(b.a.u(a)){case "option":switch(typeof d){case "string":b.a.f.set(a,b.c.options.sa,I);"__ko__hasDomDataOptionValue__"in a&&delete a.__ko__hasDomDataOptionValue__;a.value=d;break;default:b.a.f.set(a,b.c.options.sa,d),a.__ko__hasDomDataOptionValue__=m,a.value="number"===typeof d?
d:""}break;case "select":for(var c=a.options.length-1;0<=c;c--)if(b.k.q(a.options[c])==d){a.selectedIndex=c;break}break;default:if(d===p||d===I)d="";a.value=d}}};b.b("selectExtensions",b.k);b.b("selectExtensions.readValue",b.k.q);b.b("selectExtensions.writeValue",b.k.T);var ka=/\@ko_token_(\d+)\@/g,na=["true","false"],oa=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i;b.g={Q:[],aa:function(a){var d=b.a.D(a);if(3>d.length)return[];"{"===d.charAt(0)&&(d=d.substring(1,d.length-1));a=[];for(var c=
p,e,f=0;f<d.length;f++){var g=d.charAt(f);if(c===p)switch(g){case '"':case "'":case "/":c=f,e=g}else if(g==e&&"\\"!==d.charAt(f-1)){g=d.substring(c,f+1);a.push(g);var h="@ko_token_"+(a.length-1)+"@",d=d.substring(0,c)+h+d.substring(f+1),f=f-(g.length-h.length),c=p}}e=c=p;for(var k=0,l=p,f=0;f<d.length;f++){g=d.charAt(f);if(c===p)switch(g){case "{":c=f;l=g;e="}";break;case "(":c=f;l=g;e=")";break;case "[":c=f,l=g,e="]"}g===l?k++:g===e&&(k--,0===k&&(g=d.substring(c,f+1),a.push(g),h="@ko_token_"+(a.length-
1)+"@",d=d.substring(0,c)+h+d.substring(f+1),f-=g.length-h.length,c=p))}e=[];d=d.split(",");c=0;for(f=d.length;c<f;c++)k=d[c],l=k.indexOf(":"),0<l&&l<k.length-1?(g=k.substring(l+1),e.push({key:P(k.substring(0,l),a),value:P(g,a)})):e.push({unknown:P(k,a)});return e},ba:function(a){var d="string"===typeof a?b.g.aa(a):a,c=[];a=[];for(var e,f=0;e=d[f];f++)if(0<c.length&&c.push(","),e.key){var g;a:{g=e.key;var h=b.a.D(g);switch(h.length&&h.charAt(0)){case "'":case '"':break a;default:g="'"+h+"'"}}e=e.value;
c.push(g);c.push(":");c.push(e);e=b.a.D(e);0<=b.a.i(na,b.a.D(e).toLowerCase())?e=r:(h=e.match(oa),e=h===p?r:h[1]?"Object("+h[1]+")"+h[2]:e);e&&(0<a.length&&a.push(", "),a.push(g+" : function(__ko_value) { "+e+" = __ko_value; }"))}else e.unknown&&c.push(e.unknown);d=c.join("");0<a.length&&(d=d+", '_ko_property_writers' : { "+a.join("")+" } ");return d},Eb:function(a,d){for(var c=0;c<a.length;c++)if(b.a.D(a[c].key)==d)return m;return r},ea:function(a,d,c,e,f){if(!a||!b.Ra(a)){if((a=d()._ko_property_writers)&&
a[c])a[c](e)}else(!f||a.t()!==e)&&a(e)}};b.b("expressionRewriting",b.g);b.b("expressionRewriting.bindingRewriteValidators",b.g.Q);b.b("expressionRewriting.parseObjectLiteral",b.g.aa);b.b("expressionRewriting.preProcessBindings",b.g.ba);b.b("jsonExpressionRewriting",b.g);b.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",b.g.ba);var K="\x3c!--test--\x3e"===y.createComment("test").text,ja=K?/^\x3c!--\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*--\x3e$/:/^\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*$/,ia=K?/^\x3c!--\s*\/ko\s*--\x3e$/:
/^\s*\/ko\s*$/,pa={ul:m,ol:m};b.e={I:{},childNodes:function(a){return B(a)?aa(a):a.childNodes},Y:function(a){if(B(a)){a=b.e.childNodes(a);for(var d=0,c=a.length;d<c;d++)b.removeNode(a[d])}else b.a.ka(a)},N:function(a,d){if(B(a)){b.e.Y(a);for(var c=a.nextSibling,e=0,f=d.length;e<f;e++)c.parentNode.insertBefore(d[e],c)}else b.a.N(a,d)},Va:function(a,b){B(a)?a.parentNode.insertBefore(b,a.nextSibling):a.firstChild?a.insertBefore(b,a.firstChild):a.appendChild(b)},Pa:function(a,d,c){c?B(a)?a.parentNode.insertBefore(d,
c.nextSibling):c.nextSibling?a.insertBefore(d,c.nextSibling):a.appendChild(d):b.e.Va(a,d)},firstChild:function(a){return!B(a)?a.firstChild:!a.nextSibling||H(a.nextSibling)?p:a.nextSibling},nextSibling:function(a){B(a)&&(a=$(a));return a.nextSibling&&H(a.nextSibling)?p:a.nextSibling},jb:function(a){return(a=B(a))?a[1]:p},Ta:function(a){if(pa[b.a.u(a)]){var d=a.firstChild;if(d){do if(1===d.nodeType){var c;c=d.firstChild;var e=p;if(c){do if(e)e.push(c);else if(B(c)){var f=$(c,m);f?c=f:e=[c]}else H(c)&&
(e=[c]);while(c=c.nextSibling)}if(c=e){e=d.nextSibling;for(f=0;f<c.length;f++)e?a.insertBefore(c[f],e):a.appendChild(c[f])}}while(d=d.nextSibling)}}}};b.b("virtualElements",b.e);b.b("virtualElements.allowedBindings",b.e.I);b.b("virtualElements.emptyNode",b.e.Y);b.b("virtualElements.insertAfter",b.e.Pa);b.b("virtualElements.prepend",b.e.Va);b.b("virtualElements.setDomNodeChildren",b.e.N);b.J=function(){this.Ha={}};b.a.extend(b.J.prototype,{nodeHasBindings:function(a){switch(a.nodeType){case 1:return a.getAttribute("data-bind")!=
p;case 8:return b.e.jb(a)!=p;default:return r}},getBindings:function(a,b){var c=this.getBindingsString(a,b);return c?this.parseBindingsString(c,b,a):p},getBindingsString:function(a){switch(a.nodeType){case 1:return a.getAttribute("data-bind");case 8:return b.e.jb(a);default:return p}},parseBindingsString:function(a,d,c){try{var e;if(!(e=this.Ha[a])){var f=this.Ha,g,h="with($context){with($data||{}){return{"+b.g.ba(a)+"}}}";g=new Function("$context","$element",h);e=f[a]=g}return e(d,c)}catch(k){j(Error("Unable to parse bindings.\nMessage: "+
k+";\nBindings value: "+a))}}});b.J.instance=new b.J;b.b("bindingProvider",b.J);b.c={};b.z=function(a,d,c){d?(b.a.extend(this,d),this.$parentContext=d,this.$parent=d.$data,this.$parents=(d.$parents||[]).slice(0),this.$parents.unshift(this.$parent)):(this.$parents=[],this.$root=a,this.ko=b);this.$data=a;c&&(this[c]=a)};b.z.prototype.createChildContext=function(a,d){return new b.z(a,this,d)};b.z.prototype.extend=function(a){var d=b.a.extend(new b.z,this);return b.a.extend(d,a)};b.eb=function(a,d){if(2==
arguments.length)b.a.f.set(a,"__ko_bindingContext__",d);else return b.a.f.get(a,"__ko_bindingContext__")};b.Fa=function(a,d,c){1===a.nodeType&&b.e.Ta(a);return X(a,d,c,m)};b.Ea=function(a,b){(1===b.nodeType||8===b.nodeType)&&Z(a,b,m)};b.Da=function(a,b){b&&(1!==b.nodeType&&8!==b.nodeType)&&j(Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node"));b=b||x.document.body;Y(a,b,m)};b.ja=function(a){switch(a.nodeType){case 1:case 8:var d=b.eb(a);if(d)return d;
if(a.parentNode)return b.ja(a.parentNode)}return I};b.pb=function(a){return(a=b.ja(a))?a.$data:I};b.b("bindingHandlers",b.c);b.b("applyBindings",b.Da);b.b("applyBindingsToDescendants",b.Ea);b.b("applyBindingsToNode",b.Fa);b.b("contextFor",b.ja);b.b("dataFor",b.pb);var fa={"class":"className","for":"htmlFor"};b.c.attr={update:function(a,d){var c=b.a.d(d())||{},e;for(e in c)if("string"==typeof e){var f=b.a.d(c[e]),g=f===r||f===p||f===I;g&&a.removeAttribute(e);8>=b.a.Z&&e in fa?(e=fa[e],g?a.removeAttribute(e):
a[e]=f):g||a.setAttribute(e,f.toString());"name"===e&&b.a.ab(a,g?"":f.toString())}}};b.c.checked={init:function(a,d,c){b.a.n(a,"click",function(){var e;if("checkbox"==a.type)e=a.checked;else if("radio"==a.type&&a.checked)e=a.value;else return;var f=d(),g=b.a.d(f);"checkbox"==a.type&&g instanceof Array?(e=b.a.i(g,a.value),a.checked&&0>e?f.push(a.value):!a.checked&&0<=e&&f.splice(e,1)):b.g.ea(f,c,"checked",e,m)});"radio"==a.type&&!a.name&&b.c.uniqueName.init(a,u(m))},update:function(a,d){var c=b.a.d(d());
"checkbox"==a.type?a.checked=c instanceof Array?0<=b.a.i(c,a.value):c:"radio"==a.type&&(a.checked=a.value==c)}};b.c.css={update:function(a,d){var c=b.a.d(d());if("object"==typeof c)for(var e in c){var f=b.a.d(c[e]);b.a.da(a,e,f)}else c=String(c||""),b.a.da(a,a.__ko__cssValue,r),a.__ko__cssValue=c,b.a.da(a,c,m)}};b.c.enable={update:function(a,d){var c=b.a.d(d());c&&a.disabled?a.removeAttribute("disabled"):!c&&!a.disabled&&(a.disabled=m)}};b.c.disable={update:function(a,d){b.c.enable.update(a,function(){return!b.a.d(d())})}};
b.c.event={init:function(a,d,c,e){var f=d()||{},g;for(g in f)(function(){var f=g;"string"==typeof f&&b.a.n(a,f,function(a){var g,n=d()[f];if(n){var q=c();try{var s=b.a.L(arguments);s.unshift(e);g=n.apply(e,s)}finally{g!==m&&(a.preventDefault?a.preventDefault():a.returnValue=r)}q[f+"Bubble"]===r&&(a.cancelBubble=m,a.stopPropagation&&a.stopPropagation())}})})()}};b.c.foreach={Sa:function(a){return function(){var d=a(),c=b.a.ua(d);if(!c||"number"==typeof c.length)return{foreach:d,templateEngine:b.C.oa};
b.a.d(d);return{foreach:c.data,as:c.as,includeDestroyed:c.includeDestroyed,afterAdd:c.afterAdd,beforeRemove:c.beforeRemove,afterRender:c.afterRender,beforeMove:c.beforeMove,afterMove:c.afterMove,templateEngine:b.C.oa}}},init:function(a,d){return b.c.template.init(a,b.c.foreach.Sa(d))},update:function(a,d,c,e,f){return b.c.template.update(a,b.c.foreach.Sa(d),c,e,f)}};b.g.Q.foreach=r;b.e.I.foreach=m;b.c.hasfocus={init:function(a,d,c){function e(e){a.__ko_hasfocusUpdating=m;var f=a.ownerDocument;"activeElement"in
f&&(e=f.activeElement===a);f=d();b.g.ea(f,c,"hasfocus",e,m);a.__ko_hasfocusUpdating=r}var f=e.bind(p,m),g=e.bind(p,r);b.a.n(a,"focus",f);b.a.n(a,"focusin",f);b.a.n(a,"blur",g);b.a.n(a,"focusout",g)},update:function(a,d){var c=b.a.d(d());a.__ko_hasfocusUpdating||(c?a.focus():a.blur(),b.r.K(b.a.Ba,p,[a,c?"focusin":"focusout"]))}};b.c.html={init:function(){return{controlsDescendantBindings:m}},update:function(a,d){b.a.ca(a,d())}};var da="__ko_withIfBindingData";Q("if");Q("ifnot",r,m);Q("with",m,r,function(a,
b){return a.createChildContext(b)});b.c.options={update:function(a,d,c){"select"!==b.a.u(a)&&j(Error("options binding applies only to SELECT elements"));for(var e=0==a.length,f=b.a.V(b.a.fa(a.childNodes,function(a){return a.tagName&&"option"===b.a.u(a)&&a.selected}),function(a){return b.k.q(a)||a.innerText||a.textContent}),g=a.scrollTop,h=b.a.d(d());0<a.length;)b.A(a.options[0]),a.remove(0);if(h){c=c();var k=c.optionsIncludeDestroyed;"number"!=typeof h.length&&(h=[h]);if(c.optionsCaption){var l=y.createElement("option");
b.a.ca(l,c.optionsCaption);b.k.T(l,I);a.appendChild(l)}d=0;for(var n=h.length;d<n;d++){var q=h[d];if(!q||!q._destroy||k){var l=y.createElement("option"),s=function(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c},v=s(q,c.optionsValue,q);b.k.T(l,b.a.d(v));q=s(q,c.optionsText,v);b.a.cb(l,q);a.appendChild(l)}}h=a.getElementsByTagName("option");d=k=0;for(n=h.length;d<n;d++)0<=b.a.i(f,b.k.q(h[d]))&&(b.a.bb(h[d],m),k++);a.scrollTop=g;e&&"value"in c&&ea(a,b.a.ua(c.value),m);b.a.ub(a)}}};
b.c.options.sa="__ko.optionValueDomData__";b.c.selectedOptions={init:function(a,d,c){b.a.n(a,"change",function(){var e=d(),f=[];b.a.o(a.getElementsByTagName("option"),function(a){a.selected&&f.push(b.k.q(a))});b.g.ea(e,c,"value",f)})},update:function(a,d){"select"!=b.a.u(a)&&j(Error("values binding applies only to SELECT elements"));var c=b.a.d(d());c&&"number"==typeof c.length&&b.a.o(a.getElementsByTagName("option"),function(a){var d=0<=b.a.i(c,b.k.q(a));b.a.bb(a,d)})}};b.c.style={update:function(a,
d){var c=b.a.d(d()||{}),e;for(e in c)if("string"==typeof e){var f=b.a.d(c[e]);a.style[e]=f||""}}};b.c.submit={init:function(a,d,c,e){"function"!=typeof d()&&j(Error("The value for a submit binding must be a function"));b.a.n(a,"submit",function(b){var c,h=d();try{c=h.call(e,a)}finally{c!==m&&(b.preventDefault?b.preventDefault():b.returnValue=r)}})}};b.c.text={update:function(a,d){b.a.cb(a,d())}};b.e.I.text=m;b.c.uniqueName={init:function(a,d){if(d()){var c="ko_unique_"+ ++b.c.uniqueName.ob;b.a.ab(a,
c)}}};b.c.uniqueName.ob=0;b.c.value={init:function(a,d,c){function e(){h=r;var e=d(),f=b.k.q(a);b.g.ea(e,c,"value",f)}var f=["change"],g=c().valueUpdate,h=r;g&&("string"==typeof g&&(g=[g]),b.a.P(f,g),f=b.a.Ga(f));if(b.a.Z&&("input"==a.tagName.toLowerCase()&&"text"==a.type&&"off"!=a.autocomplete&&(!a.form||"off"!=a.form.autocomplete))&&-1==b.a.i(f,"propertychange"))b.a.n(a,"propertychange",function(){h=m}),b.a.n(a,"blur",function(){h&&e()});b.a.o(f,function(c){var d=e;b.a.Ob(c,"after")&&(d=function(){setTimeout(e,
0)},c=c.substring(5));b.a.n(a,c,d)})},update:function(a,d){var c="select"===b.a.u(a),e=b.a.d(d()),f=b.k.q(a),g=e!=f;0===e&&(0!==f&&"0"!==f)&&(g=m);g&&(f=function(){b.k.T(a,e)},f(),c&&setTimeout(f,0));c&&0<a.length&&ea(a,e,r)}};b.c.visible={update:function(a,d){var c=b.a.d(d()),e="none"!=a.style.display;c&&!e?a.style.display="":!c&&e&&(a.style.display="none")}};b.c.click={init:function(a,d,c,e){return b.c.event.init.call(this,a,function(){var a={};a.click=d();return a},c,e)}};b.v=function(){};b.v.prototype.renderTemplateSource=
function(){j(Error("Override renderTemplateSource"))};b.v.prototype.createJavaScriptEvaluatorBlock=function(){j(Error("Override createJavaScriptEvaluatorBlock"))};b.v.prototype.makeTemplateSource=function(a,d){if("string"==typeof a){d=d||y;var c=d.getElementById(a);c||j(Error("Cannot find template with ID "+a));return new b.l.h(c)}if(1==a.nodeType||8==a.nodeType)return new b.l.O(a);j(Error("Unknown template type: "+a))};b.v.prototype.renderTemplate=function(a,b,c,e){a=this.makeTemplateSource(a,e);
return this.renderTemplateSource(a,b,c)};b.v.prototype.isTemplateRewritten=function(a,b){return this.allowTemplateRewriting===r?m:this.makeTemplateSource(a,b).data("isRewritten")};b.v.prototype.rewriteTemplate=function(a,b,c){a=this.makeTemplateSource(a,c);b=b(a.text());a.text(b);a.data("isRewritten",m)};b.b("templateEngine",b.v);var qa=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi,ra=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;b.za={vb:function(a,
d,c){d.isTemplateRewritten(a,c)||d.rewriteTemplate(a,function(a){return b.za.Gb(a,d)},c)},Gb:function(a,b){return a.replace(qa,function(a,e,f,g,h,k,l){return W(l,e,b)}).replace(ra,function(a,e){return W(e,"\x3c!-- ko --\x3e",b)})},kb:function(a){return b.s.ra(function(d,c){d.nextSibling&&b.Fa(d.nextSibling,a,c)})}};b.b("__tr_ambtns",b.za.kb);b.l={};b.l.h=function(a){this.h=a};b.l.h.prototype.text=function(){var a=b.a.u(this.h),a="script"===a?"text":"textarea"===a?"value":"innerHTML";if(0==arguments.length)return this.h[a];
var d=arguments[0];"innerHTML"===a?b.a.ca(this.h,d):this.h[a]=d};b.l.h.prototype.data=function(a){if(1===arguments.length)return b.a.f.get(this.h,"templateSourceData_"+a);b.a.f.set(this.h,"templateSourceData_"+a,arguments[1])};b.l.O=function(a){this.h=a};b.l.O.prototype=new b.l.h;b.l.O.prototype.text=function(){if(0==arguments.length){var a=b.a.f.get(this.h,"__ko_anon_template__")||{};a.Aa===I&&a.ia&&(a.Aa=a.ia.innerHTML);return a.Aa}b.a.f.set(this.h,"__ko_anon_template__",{Aa:arguments[0]})};b.l.h.prototype.nodes=
function(){if(0==arguments.length)return(b.a.f.get(this.h,"__ko_anon_template__")||{}).ia;b.a.f.set(this.h,"__ko_anon_template__",{ia:arguments[0]})};b.b("templateSources",b.l);b.b("templateSources.domElement",b.l.h);b.b("templateSources.anonymousTemplate",b.l.O);var O;b.wa=function(a){a!=I&&!(a instanceof b.v)&&j(Error("templateEngine must inherit from ko.templateEngine"));O=a};b.va=function(a,d,c,e,f){c=c||{};(c.templateEngine||O)==I&&j(Error("Set a template engine before calling renderTemplate"));
f=f||"replaceChildren";if(e){var g=N(e);return b.j(function(){var h=d&&d instanceof b.z?d:new b.z(b.a.d(d)),k="function"==typeof a?a(h.$data,h):a,h=T(e,f,k,h,c);"replaceNode"==f&&(e=h,g=N(e))},p,{Ka:function(){return!g||!b.a.X(g)},W:g&&"replaceNode"==f?g.parentNode:g})}return b.s.ra(function(e){b.va(a,d,c,e,"replaceNode")})};b.Mb=function(a,d,c,e,f){function g(a,b){U(b,k);c.afterRender&&c.afterRender(b,a)}function h(d,e){k=f.createChildContext(b.a.d(d),c.as);k.$index=e;var g="function"==typeof a?
a(d,k):a;return T(p,"ignoreTargetNode",g,k,c)}var k;return b.j(function(){var a=b.a.d(d)||[];"undefined"==typeof a.length&&(a=[a]);a=b.a.fa(a,function(a){return c.includeDestroyed||a===I||a===p||!b.a.d(a._destroy)});b.r.K(b.a.$a,p,[e,a,h,c,g])},p,{W:e})};b.c.template={init:function(a,d){var c=b.a.d(d());if("string"!=typeof c&&!c.name&&(1==a.nodeType||8==a.nodeType))c=1==a.nodeType?a.childNodes:b.e.childNodes(a),c=b.a.Hb(c),(new b.l.O(a)).nodes(c);return{controlsDescendantBindings:m}},update:function(a,
d,c,e,f){d=b.a.d(d());c={};e=m;var g,h=p;"string"!=typeof d&&(c=d,d=c.name,"if"in c&&(e=b.a.d(c["if"])),e&&"ifnot"in c&&(e=!b.a.d(c.ifnot)),g=b.a.d(c.data));"foreach"in c?h=b.Mb(d||a,e&&c.foreach||[],c,a,f):e?(f="data"in c?f.createChildContext(g,c.as):f,h=b.va(d||a,f,c,a)):b.e.Y(a);f=h;(g=b.a.f.get(a,"__ko__templateComputedDomDataKey__"))&&"function"==typeof g.B&&g.B();b.a.f.set(a,"__ko__templateComputedDomDataKey__",f&&f.pa()?f:I)}};b.g.Q.template=function(a){a=b.g.aa(a);return 1==a.length&&a[0].unknown||
b.g.Eb(a,"name")?p:"This template engine does not support anonymous templates nested within its templates"};b.e.I.template=m;b.b("setTemplateEngine",b.wa);b.b("renderTemplate",b.va);b.a.Ja=function(a,b,c){a=a||[];b=b||[];return a.length<=b.length?S(a,b,"added","deleted",c):S(b,a,"deleted","added",c)};b.b("utils.compareArrays",b.a.Ja);b.a.$a=function(a,d,c,e,f){function g(a,b){t=l[b];w!==b&&(z[a]=t);t.na(w++);M(t.M);s.push(t);A.push(t)}function h(a,c){if(a)for(var d=0,e=c.length;d<e;d++)c[d]&&b.a.o(c[d].M,
function(b){a(b,d,c[d].U)})}d=d||[];e=e||{};var k=b.a.f.get(a,"setDomNodeChildrenFromArrayMapping_lastMappingResult")===I,l=b.a.f.get(a,"setDomNodeChildrenFromArrayMapping_lastMappingResult")||[],n=b.a.V(l,function(a){return a.U}),q=b.a.Ja(n,d),s=[],v=0,w=0,B=[],A=[];d=[];for(var z=[],n=[],t,D=0,C,E;C=q[D];D++)switch(E=C.moved,C.status){case "deleted":E===I&&(t=l[v],t.j&&t.j.B(),B.push.apply(B,M(t.M)),e.beforeRemove&&(d[D]=t,A.push(t)));v++;break;case "retained":g(D,v++);break;case "added":E!==I?
g(D,E):(t={U:C.value,na:b.m(w++)},s.push(t),A.push(t),k||(n[D]=t))}h(e.beforeMove,z);b.a.o(B,e.beforeRemove?b.A:b.removeNode);for(var D=0,k=b.e.firstChild(a),H;t=A[D];D++){t.M||b.a.extend(t,ha(a,c,t.U,f,t.na));for(v=0;q=t.M[v];k=q.nextSibling,H=q,v++)q!==k&&b.e.Pa(a,q,H);!t.Ab&&f&&(f(t.U,t.M,t.na),t.Ab=m)}h(e.beforeRemove,d);h(e.afterMove,z);h(e.afterAdd,n);b.a.f.set(a,"setDomNodeChildrenFromArrayMapping_lastMappingResult",s)};b.b("utils.setDomNodeChildrenFromArrayMapping",b.a.$a);b.C=function(){this.allowTemplateRewriting=
r};b.C.prototype=new b.v;b.C.prototype.renderTemplateSource=function(a){var d=!(9>b.a.Z)&&a.nodes?a.nodes():p;if(d)return b.a.L(d.cloneNode(m).childNodes);a=a.text();return b.a.ta(a)};b.C.oa=new b.C;b.wa(b.C.oa);b.b("nativeTemplateEngine",b.C);b.qa=function(){var a=this.Db=function(){if("undefined"==typeof F||!F.tmpl)return 0;try{if(0<=F.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(a){}return 1}();this.renderTemplateSource=function(b,c,e){e=e||{};2>a&&j(Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later."));
var f=b.data("precompiled");f||(f=b.text()||"",f=F.template(p,"{{ko_with $item.koBindingContext}}"+f+"{{/ko_with}}"),b.data("precompiled",f));b=[c.$data];c=F.extend({koBindingContext:c},e.templateOptions);c=F.tmpl(f,b,c);c.appendTo(y.createElement("div"));F.fragments={};return c};this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"};this.addTemplate=function(a,b){y.write("<script type='text/html' id='"+a+"'>"+b+"\x3c/script>")};0<a&&(F.tmpl.tag.ko_code=
{open:"__.push($1 || '');"},F.tmpl.tag.ko_with={open:"with($1) {",close:"} "})};b.qa.prototype=new b.v;w=new b.qa;0<w.Db&&b.wa(w);b.b("jqueryTmplTemplateEngine",b.qa)}"function"===typeof require&&"object"===typeof exports&&"object"===typeof module?L(module.exports||exports):"function"===typeof define&&define.amd?define("knockout",["exports"],L):L(x.ko={});m;
})();
// Copyright (C) Microsoft Corporation. All rights reserved.
define("Build.Common/Scripts/Generated/TFS.Build.Xaml.Common",["require","exports"],function(n,t){var i;(function(n){n.Builds="0cd358e1-9217-4d94-8269-1c1ee6f93dcf";n.Definitions="dbeaf647-6167-421a-bda9-c9327b25e2e6";n.Requests="de3e9770-c7ef-4697-983e-f4b5bab3c016";n.Details="9f094d42-b41c-4920-95aa-597581a79821";n.Queues="09f2a4b8-08c9-4991-85c3-d698937568be";n.Qualities="82fba9f8-4198-4ab6-b719-6a363880c19e";n.AzureDeployments="7985e151-1f22-4344-9173-1a663ee1eb4d";n.AzureDeploymentDefinitions="2f00bd4f-422d-417c-b429-f588ded6486f";n.AzureDeploymentEnvironments="32696366-f57b-4529-aec4-61673d4c23c6";n.AzureSubscriptions="0524c91b-a145-413c-89eb-b3342b6826a4";n.Content="29ddf488-1550-4956-977c-7706034d781d";n.ProcessTemplates="f188fc3e-967c-4290-b9e1-a2df5b7b6abc";n.Drop="051feb46-15bd-4067-be5a-6c314c8de59e";n.Agents="b27af3f2-aa0c-4ca9-85cf-493b25fe12db";n.BuildServiceHosts="83db2197-1fa4-4097-90d3-bd408adc4bf9";n.Symbols="e251c89a-e968-4284-a739-6224e3dae39d";n.TestResults="29570641-fe78-46de-a13a-d7bc3d1d20a1";n.Label="7edd2690-527a-41f5-9ffa-2515e9cf22c6";n.AreaId="965220D5-5BB9-42CF-8D67-9B146DF2A5A4";n.AreaName="Build";n.BuildsLocationString="{0CD358E1-9217-4D94-8269-1C1EE6F93DCF}";n.BuildsResource="Builds";n.DefinitionsLocationString="{dbeaf647-6167-421a-bda9-c9327b25e2e6}";n.DefinitionsResource="Definitions";n.RequestsLocationString="{DE3E9770-C7EF-4697-983E-F4B5BAB3C016}";n.RequestsResource="Requests";n.DetailsLocationString="{9F094D42-B41C-4920-95AA-597581A79821}";n.DetailsResource="Details";n.QueuesLocationString="{09F2A4B8-08C9-4991-85C3-D698937568BE}";n.QueuesResource="Queues";n.QualitiesLocationString="{82FBA9F8-4198-4AB6-B719-6A363880C19E}";n.QualitiesResource="Qualities";n.AzureDeploymentsLocationString="{7985E151-1F22-4344-9173-1A663EE1EB4D}";n.AzureDeploymentsResource="Deployments";n.AzureDeploymentDefinitionsLocationString="{2F00BD4F-422D-417C-B429-F588DED6486F}";n.AzureDeploymentDefinitionsResource="DeploymentDefinitions";n.AzureDeploymentEnvironmentsLocationString="{32696366-F57B-4529-AEC4-61673D4C23C6}";n.AzureDeploymentEnvironmentsResource="DeploymentEnvironments";n.AzureSubscriptionsLocationString="{0524C91B-A145-413C-89EB-B3342B6826A4}";n.AzureSubscriptionsResource="AzureSubscriptions";n.ContentLocationString="{29DDF488-1550-4956-977C-7706034D781D}";n.ContentResource="Content";n.ProcessTemplatesLocationString="{F188FC3E-967C-4290-B9E1-A2DF5B7B6ABC}";n.ProcessTemplatesResource="ProcessTemplates";n.DropLocationString="{051FEB46-15BD-4067-BE5A-6C314C8DE59E}";n.DropResource="Drop";n.AgentsLocationString="{B27AF3F2-AA0C-4CA9-85CF-493B25FE12DB}";n.AgentsResource="Agents";n.BuildServiceHostsLocationString="{83DB2197-1FA4-4097-90D3-BD408ADC4BF9}";n.BuildServiceHostsResource="Servers";n.SymbolsLocationString="{E251C89A-E968-4284-A739-6224E3DAE39D}";n.SymbolsResource="Symbols";n.TestResultsLocationString="{29570641-FE78-46DE-A13A-D7BC3D1D20A1}";n.TestResultsResource="TestResults";n.LabelLocationString="{7EDD2690-527A-41F5-9FFA-2515E9CF22C6}";n.LabelResource="Label"})(i=t.BuildResourceIds||(t.BuildResourceIds={}))});
define("Build.Common/Scripts/Generated/TFS.Build.Xaml.Contracts",["require","exports"],function(n,t){"use strict";var i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g;(function(n){n[n.Unavailable=0]="Unavailable";n[n.Available=1]="Available";n[n.Offline=2]="Offline"})(t.AgentStatus||(t.AgentStatus={}));i=t.AgentStatus,function(n){n[n.Unknown=0]="Unknown";n[n.Failed=1]="Failed";n[n.Succeeded=2]="Succeeded"}(t.BuildPhaseStatus||(t.BuildPhaseStatus={}));r=t.BuildPhaseStatus,function(n){n[n.None=0]="None";n[n.Manual=1]="Manual";n[n.IndividualCI=2]="IndividualCI";n[n.BatchedCI=4]="BatchedCI";n[n.Schedule=8]="Schedule";n[n.ScheduleForced=16]="ScheduleForced";n[n.UserCreated=32]="UserCreated";n[n.ValidateShelveset=64]="ValidateShelveset";n[n.CheckInShelveset=128]="CheckInShelveset";n[n.Triggered=191]="Triggered";n[n.All=255]="All"}(t.BuildReason||(t.BuildReason={}));u=t.BuildReason,function(n){n[n.None=0]="None";n[n.InProgress=1]="InProgress";n[n.Succeeded=2]="Succeeded";n[n.PartiallySucceeded=4]="PartiallySucceeded";n[n.Failed=8]="Failed";n[n.Stopped=16]="Stopped";n[n.NotStarted=32]="NotStarted";n[n.All=63]="All"}(t.BuildStatus||(t.BuildStatus={}));f=t.BuildStatus,function(n){n[n.Unavailable=0]="Unavailable";n[n.Available=1]="Available";n[n.Offline=2]="Offline"}(t.ControllerStatus||(t.ControllerStatus={}));e=t.ControllerStatus,function(n){n[n.Enabled=0]="Enabled";n[n.Paused=1]="Paused";n[n.Disabled=2]="Disabled"}(t.DefinitionQueueStatus||(t.DefinitionQueueStatus={}));o=t.DefinitionQueueStatus,function(n){n[n.None=1]="None";n[n.ContinuousIntegration=2]="ContinuousIntegration";n[n.BatchedContinuousIntegration=4]="BatchedContinuousIntegration";n[n.Schedule=8]="Schedule";n[n.ScheduleForced=16]="ScheduleForced";n[n.GatedCheckIn=32]="GatedCheckIn";n[n.BatchedGatedCheckIn=64]="BatchedGatedCheckIn";n[n.All=127]="All"}(t.DefinitionTriggerType||(t.DefinitionTriggerType={}));s=t.DefinitionTriggerType,function(n){n[n.Xaml=1]="Xaml"}(t.DefinitionType||(t.DefinitionType={}));h=t.DefinitionType,function(n){n[n.None=0]="None";n[n.DropLocation=1]="DropLocation";n[n.TestResults=2]="TestResults";n[n.Label=4]="Label";n[n.Details=8]="Details";n[n.Symbols=16]="Symbols";n[n.All=31]="All"}(t.DeleteOptions||(t.DeleteOptions={}));c=t.DeleteOptions,function(n){n[n.Custom=0]="Custom";n[n.AzureWebsite=1]="AzureWebsite";n[n.AzureCloudApp=2]="AzureCloudApp"}(t.DeploymentEnvironmentKind||(t.DeploymentEnvironmentKind={}));l=t.DeploymentEnvironmentKind,function(n){n[n.Unknown=0]="Unknown";n[n.LocalPath=1]="LocalPath";n[n.VersionControl=2]="VersionControl";n[n.Container=3]="Container"}(t.DropLocationReferenceType||(t.DropLocationReferenceType={}));a=t.DropLocationReferenceType,function(n){n[n.LatestOnQueue=0]="LatestOnQueue";n[n.LatestOnBuild=1]="LatestOnBuild";n[n.Custom=2]="Custom"}(t.GetOption||(t.GetOption={}));v=t.GetOption,function(n){n[n.Custom=0]="Custom";n[n.Default=1]="Default";n[n.Upgrade=2]="Upgrade"}(t.ProcessTemplateType||(t.ProcessTemplateType={}));y=t.ProcessTemplateType,function(n){n[n.Low=5]="Low";n[n.BelowNormal=4]="BelowNormal";n[n.Normal=3]="Normal";n[n.AboveNormal=2]="AboveNormal";n[n.High=1]="High"}(t.QueuePriority||(t.QueuePriority={}));p=t.QueuePriority,function(n){n[n.None=0]="None";n[n.InProgress=1]="InProgress";n[n.Retry=2]="Retry";n[n.Queued=4]="Queued";n[n.Postponed=8]="Postponed";n[n.Completed=16]="Completed";n[n.Canceled=32]="Canceled";n[n.All=63]="All"}(t.QueueStatus||(t.QueueStatus={}));w=t.QueueStatus,function(n){n[n.BuildController=1]="BuildController"}(t.QueueType||(t.QueueType={}));b=t.QueueType,function(n){n[n.None=0]="None";n[n.Monday=1]="Monday";n[n.Tuesday=2]="Tuesday";n[n.Wednesday=4]="Wednesday";n[n.Thursday=8]="Thursday";n[n.Friday=16]="Friday";n[n.Saturday=32]="Saturday";n[n.Sunday=64]="Sunday";n[n.All=127]="All"}(t.ScheduleDays||(t.ScheduleDays={}));k=t.ScheduleDays,function(n){n[n.Online=1]="Online";n[n.Offline=2]="Offline"}(t.ServiceHostStatus||(t.ServiceHostStatus={}));d=t.ServiceHostStatus,function(n){n[n.Map=0]="Map";n[n.Cloak=1]="Cloak"}(t.WorkspaceMappingType||(t.WorkspaceMappingType={}));g=t.WorkspaceMappingType;t.TypeInfo={AgentStatus:{enumValues:{unavailable:0,available:1,offline:2}},Build:{},BuildAgent:{},BuildCompletedEvent:{},BuildController:{},BuildDefinition:{},BuildDefinitionSourceProvider:{},BuildDeployment:{},BuildPhaseStatus:{enumValues:{unknown:0,failed:1,succeeded:2}},BuildProcessTemplate:{},BuildReason:{enumValues:{none:0,manual:1,individualCI:2,batchedCI:4,schedule:8,scheduleForced:16,userCreated:32,validateShelveset:64,checkInShelveset:128,triggered:191,all:255}},BuildRequest:{},BuildServer:{},BuildStatus:{enumValues:{none:0,inProgress:1,succeeded:2,partiallySucceeded:4,failed:8,stopped:16,notStarted:32,all:63}},BuildSummary:{},ControllerStatus:{enumValues:{unavailable:0,available:1,offline:2}},DefinitionQueueStatus:{enumValues:{enabled:0,paused:1,disabled:2}},DefinitionReference:{},DefinitionTriggerType:{enumValues:{none:1,continuousIntegration:2,batchedContinuousIntegration:4,schedule:8,scheduleForced:16,gatedCheckIn:32,batchedGatedCheckIn:64,all:127}},DefinitionType:{enumValues:{xaml:1}},DeleteOptions:{enumValues:{none:0,dropLocation:1,testResults:2,label:4,details:8,symbols:16,all:31}},DeploymentEnvironmentKind:{enumValues:{custom:0,azureWebsite:1,azureCloudApp:2}},DeploymentEnvironmentMetadata:{},DropLocationReference:{},DropLocationReferenceType:{enumValues:{unknown:0,localPath:1,versionControl:2,container:3}},GetOption:{enumValues:{latestOnQueue:0,latestOnBuild:1,custom:2}},InformationNode:{},LogLocationReference:{},ProcessTemplateType:{enumValues:{custom:0,"default":1,upgrade:2}},PropertyValue:{},QueuePriority:{enumValues:{low:5,belowNormal:4,normal:3,aboveNormal:2,high:1}},QueueReference:{},QueueStatus:{enumValues:{none:0,inProgress:1,retry:2,queued:4,postponed:8,completed:16,canceled:32,all:63}},QueueType:{enumValues:{buildController:1}},RetentionPolicy:{},Schedule:{},ScheduleDays:{enumValues:{none:0,monday:1,tuesday:2,wednesday:4,thursday:8,friday:16,saturday:32,sunday:64,all:127}},ServiceHostStatus:{enumValues:{online:1,offline:2}},WorkspaceMapping:{},WorkspaceMappingType:{enumValues:{map:0,cloak:1}},WorkspaceTemplate:{}};t.TypeInfo.Build.fields={compilationStatus:{enumType:t.TypeInfo.BuildPhaseStatus},drop:{typeInfo:t.TypeInfo.DropLocationReference},finishTime:{isDate:!0},lastChangedDate:{isDate:!0},log:{typeInfo:t.TypeInfo.LogLocationReference},queue:{typeInfo:t.TypeInfo.QueueReference},reason:{enumType:t.TypeInfo.BuildReason},startTime:{isDate:!0},status:{enumType:t.TypeInfo.BuildStatus},testStatus:{enumType:t.TypeInfo.BuildPhaseStatus}};t.TypeInfo.BuildAgent.fields={createdDate:{isDate:!0},status:{enumType:t.TypeInfo.AgentStatus},updatedDate:{isDate:!0}};t.TypeInfo.BuildCompletedEvent.fields={buildStatus:{enumType:t.TypeInfo.BuildStatus}};t.TypeInfo.BuildController.fields={createdDate:{isDate:!0},queueType:{enumType:t.TypeInfo.QueueType},status:{enumType:t.TypeInfo.ControllerStatus},updatedDate:{isDate:!0}};t.TypeInfo.BuildDefinition.fields={dateCreated:{isDate:!0},definitionType:{enumType:t.TypeInfo.DefinitionType},properties:{isArray:!0,typeInfo:t.TypeInfo.PropertyValue},propertyCollection:{isArray:!0,typeInfo:t.TypeInfo.PropertyValue},queue:{typeInfo:t.TypeInfo.QueueReference},queueStatus:{enumType:t.TypeInfo.DefinitionQueueStatus},retentionPolicies:{isArray:!0,typeInfo:t.TypeInfo.RetentionPolicy},schedules:{isArray:!0,typeInfo:t.TypeInfo.Schedule},sourceProviders:{isArray:!0,typeInfo:t.TypeInfo.BuildDefinitionSourceProvider},supportedReasons:{enumType:t.TypeInfo.BuildReason},triggerType:{enumType:t.TypeInfo.DefinitionTriggerType},workspaceTemplate:{typeInfo:t.TypeInfo.WorkspaceTemplate}};t.TypeInfo.BuildDefinitionSourceProvider.fields={lastModified:{isDate:!0},supportedTriggerTypes:{enumType:t.TypeInfo.DefinitionTriggerType}};t.TypeInfo.BuildDeployment.fields={deployment:{typeInfo:t.TypeInfo.BuildSummary}};t.TypeInfo.BuildProcessTemplate.fields={supportedReasons:{enumType:t.TypeInfo.BuildReason},templateType:{enumType:t.TypeInfo.ProcessTemplateType}};t.TypeInfo.BuildRequest.fields={definitionStatus:{enumType:t.TypeInfo.DefinitionQueueStatus},getOption:{enumType:t.TypeInfo.GetOption},priority:{enumType:t.TypeInfo.QueuePriority},queue:{typeInfo:t.TypeInfo.QueueReference},queueTime:{isDate:!0},reason:{enumType:t.TypeInfo.BuildReason},status:{enumType:t.TypeInfo.QueueStatus}};t.TypeInfo.BuildServer.fields={status:{enumType:t.TypeInfo.ServiceHostStatus},statusChangedDate:{isDate:!0}};t.TypeInfo.BuildSummary.fields={finishTime:{isDate:!0},reason:{enumType:t.TypeInfo.BuildReason},startTime:{isDate:!0},status:{enumType:t.TypeInfo.BuildStatus}};t.TypeInfo.DefinitionReference.fields={definitionType:{enumType:t.TypeInfo.DefinitionType},queueStatus:{enumType:t.TypeInfo.DefinitionQueueStatus}};t.TypeInfo.DeploymentEnvironmentMetadata.fields={kind:{enumType:t.TypeInfo.DeploymentEnvironmentKind}};t.TypeInfo.DropLocationReference.fields={type:{enumType:t.TypeInfo.DropLocationReferenceType}};t.TypeInfo.InformationNode.fields={lastModifiedDate:{isDate:!0}};t.TypeInfo.LogLocationReference.fields={type:{enumType:t.TypeInfo.DropLocationReferenceType}};t.TypeInfo.PropertyValue.fields={changedDate:{isDate:!0}};t.TypeInfo.QueueReference.fields={queueType:{enumType:t.TypeInfo.QueueType}};t.TypeInfo.RetentionPolicy.fields={buildReason:{enumType:t.TypeInfo.BuildReason},buildStatus:{enumType:t.TypeInfo.BuildStatus},deleteOptions:{enumType:t.TypeInfo.DeleteOptions}};t.TypeInfo.Schedule.fields={utcDaysToBuild:{enumType:t.TypeInfo.ScheduleDays}};t.TypeInfo.WorkspaceMapping.fields={mappingType:{enumType:t.TypeInfo.WorkspaceMappingType}};t.TypeInfo.WorkspaceTemplate.fields={lastModifiedDate:{isDate:!0},mappings:{isArray:!0,typeInfo:t.TypeInfo.WorkspaceMapping}}});
define("Build.Common/Scripts/Generated/TFS.Build.Xaml.WebApi",["require","exports","Build.Common/Scripts/Generated/TFS.Build.Xaml.Contracts","VSS/WebApi/RestClient","VSS/WebApi/Constants"],function(n,t,i,r,u){"use strict";var f=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.deleteBuild=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"Builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",routeValues:{project:t,buildId:n},apiVersion:"1.0"})},t.prototype.getBuild=function(n,t){return this._beginRequest({httpMethod:"GET",area:"Build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"Builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",responseType:i.TypeInfo.Build,routeValues:{project:t,buildId:n},apiVersion:"1.0"})},t.prototype.getBuilds=function(n,t,r,u,f,e,o,s,h,c,l){var a={projectName:t,requestedFor:r,definition:u,maxBuildsPerDefinition:f,$skip:e,$top:o,ids:s,minFinishTime:h,quality:c,status:l};return this._beginRequest({httpMethod:"GET",area:"Build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"Builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",responseType:i.TypeInfo.Build,responseIsCollection:!0,routeValues:{project:n},queryParams:a,apiVersion:"1.0"})},t.prototype.updateBuild=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"Build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"Builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",requestType:i.TypeInfo.Build,responseType:i.TypeInfo.Build,routeValues:{project:r,buildId:t},apiVersion:"1.0",data:n})},t.prototype.getDefinition=function(n,t){return this._beginRequest({httpMethod:"GET",area:"Build",locationId:"dbeaf647-6167-421a-bda9-c9327b25e2e6",resource:"Definitions",routeTemplate:"{project}/_apis/build/{resource}/{definitionId}",responseType:i.TypeInfo.BuildDefinition,routeValues:{project:t,definitionId:n},apiVersion:"1.0"})},t.prototype.getDefinitions=function(n,t){var r={projectName:t};return this._beginRequest({httpMethod:"GET",area:"Build",locationId:"dbeaf647-6167-421a-bda9-c9327b25e2e6",resource:"Definitions",routeTemplate:"{project}/_apis/build/{resource}/{definitionId}",responseType:i.TypeInfo.BuildDefinition,responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:"1.0"})},t.prototype.createDeploymentEnvironments=function(n,t){return this._beginRequest({httpMethod:"PUT",area:"Build",locationId:"32696366-f57b-4529-aec4-61673d4c23c6",resource:"DeploymentEnvironments",routeTemplate:"{project}/_apis/{area}/{resource}/{serviceName}",responseType:i.TypeInfo.DeploymentEnvironmentMetadata,routeValues:{project:t},apiVersion:"1.0",data:n})},t.prototype.getDeploymentEnvironments=function(n,t){return this._beginRequest({httpMethod:"GET",area:"Build",locationId:"32696366-f57b-4529-aec4-61673d4c23c6",resource:"DeploymentEnvironments",routeTemplate:"{project}/_apis/{area}/{resource}/{serviceName}",responseType:i.TypeInfo.DeploymentEnvironmentMetadata,responseIsCollection:!0,routeValues:{project:n,serviceName:t},apiVersion:"1.0"})},t.prototype.getDetails=function(n,t,r,u,f){var e={types:t,$top:u,$skip:f};return this._beginRequest({httpMethod:"GET",area:"Build",locationId:"9f094d42-b41c-4920-95aa-597581a79821",resource:"Details",routeTemplate:"{project}/_apis/build/Builds/{buildId}/{resource}",responseType:i.TypeInfo.InformationNode,responseIsCollection:!0,routeValues:{project:r,buildId:n},queryParams:e,apiVersion:"1.0"})},t.prototype.createQuality=function(n,t,i){var r={projectId:i};return this._beginRequest({httpMethod:"PUT",httpResponseType:"html",area:"Build",locationId:"82fba9f8-4198-4ab6-b719-6a363880c19e",resource:"Qualities",routeTemplate:"{project}/_apis/{area}/{resource}/{quality}",routeValues:{project:t,quality:n},queryParams:r,apiVersion:"1.0"})},t.prototype.deleteQuality=function(n,t,i){var r={projectId:i};return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Build",locationId:"82fba9f8-4198-4ab6-b719-6a363880c19e",resource:"Qualities",routeTemplate:"{project}/_apis/{area}/{resource}/{quality}",routeValues:{project:t,quality:n},queryParams:r,apiVersion:"1.0"})},t.prototype.getQualities=function(n,t){var r={projectId:t};return this._beginRequest({httpMethod:"GET",area:"Build",locationId:"82fba9f8-4198-4ab6-b719-6a363880c19e",resource:"Qualities",routeTemplate:"{project}/_apis/{area}/{resource}/{quality}",responseType:i.TypeInfo.InformationNode,responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:"1.0"})},t.prototype.getQueue=function(n){return this._beginRequest({httpMethod:"GET",area:"Build",locationId:"09f2a4b8-08c9-4991-85c3-d698937568be",resource:"Queues",routeTemplate:"_apis/build/{resource}/{controllerId}",responseType:i.TypeInfo.BuildController,routeValues:{controllerId:n},apiVersion:"1.0"})},t.prototype.getQueues=function(n,t){var r={controllerName:n,serviceHost:t};return this._beginRequest({httpMethod:"GET",area:"Build",locationId:"09f2a4b8-08c9-4991-85c3-d698937568be",resource:"Queues",routeTemplate:"_apis/build/{resource}/{controllerId}",responseType:i.TypeInfo.BuildController,responseIsCollection:!0,queryParams:r,apiVersion:"1.0"})},t.prototype.createRequest=function(n,t){return this._beginRequest({httpMethod:"POST",area:"Build",locationId:"de3e9770-c7ef-4697-983e-f4b5bab3c016",resource:"Requests",routeTemplate:"{project}/_apis/build/{resource}/{requestId}",requestType:i.TypeInfo.BuildRequest,responseType:i.TypeInfo.BuildRequest,routeValues:{project:t},apiVersion:"1.0",data:n})},t.prototype.deleteRequest=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Build",locationId:"de3e9770-c7ef-4697-983e-f4b5bab3c016",resource:"Requests",routeTemplate:"{project}/_apis/build/{resource}/{requestId}",routeValues:{project:t,requestId:n},apiVersion:"1.0"})},t.prototype.getRequest=function(n,t){return this._beginRequest({httpMethod:"GET",area:"Build",locationId:"de3e9770-c7ef-4697-983e-f4b5bab3c016",resource:"Requests",routeTemplate:"{project}/_apis/build/{resource}/{requestId}",responseType:i.TypeInfo.BuildRequest,routeValues:{project:t,requestId:n},apiVersion:"1.0"})},t.prototype.getRequests=function(n,t,r,u,f,e,o,s,h,c,l,a){var v={projectName:t,requestedFor:r,queueId:u,controllerName:f,definitionId:e,definitionName:o,$skip:s,$top:h,ids:c,maxCompletedAge:l,status:a};return this._beginRequest({httpMethod:"GET",area:"Build",locationId:"de3e9770-c7ef-4697-983e-f4b5bab3c016",resource:"Requests",routeTemplate:"{project}/_apis/build/{resource}/{requestId}",responseType:i.TypeInfo.BuildRequest,responseIsCollection:!0,routeValues:{project:n},queryParams:v,apiVersion:"1.0"})},t.prototype.updateRequestStatus=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",httpResponseType:"html",area:"Build",locationId:"de3e9770-c7ef-4697-983e-f4b5bab3c016",resource:"Requests",routeTemplate:"{project}/_apis/build/{resource}/{requestId}",requestType:i.TypeInfo.BuildRequest,routeValues:{project:r,requestId:t},apiVersion:"1.0",data:n})},t.serviceInstanceId=u.ServiceInstanceTypes.TFS,t}(r.VssHttpClient);t.BuildHttpClient=f});
define("Build.Common/Scripts/Generated/TFS.Build2.Common",["require","exports"],function(n,t){var i,r,u,f,e,o,s,h,c,l,a,v;(function(n){n.Builds="0cd358e1-9217-4d94-8269-1c1ee6f93dcf";n.Definitions="dbeaf647-6167-421a-bda9-c9327b25e2e6";n.Templates="e884571e-7f92-4d6a-9274-3f5649900835";n.Settings="aa8c1c9c-ef8b-474a-b8c4-785c7b191d0d";n.DefinitionRevisions="7c116775-52e5-453e-8c5d-914d9762d8c4";n.DefinitionMetrics="d973b939-0ce0-4fec-91d8-da3940fa1827";n.Folders="a906531b-d2da-4f55-bda7-f3e676cc50d9";n.Options="591cb5a4-2d46-4f3a-a697-5cd42b6bd332";n.Queues="09f2a4b8-08c9-4991-85c3-d698937568be";n.Artifacts="1db06c96-014e-44e1-ac91-90b2d4b3e984";n.BuildChangesBetweenBuilds="f10f0ea5-18a1-43ec-a8fb-2042c7be9b43";n.BuildChanges="54572c7b-bbd3-45d4-80dc-28be08941620";n.BuildDeployments="f275be9a-556a-4ee9-b72f-f9c8370ccaee";n.BuildReport="45bcaa88-67e1-4042-a035-56d3b4a7d44c";n.BuildWorkItemsBetweenBuilds="52ba8915-5518-42e3-a4bb-b0182d159e2d";n.BuildWorkItems="5a21f5d2-5642-47e4-a0bd-1356e6731bee";n.BuildLogs="35a80daf-7f30-45fc-86e8-6b813d9c90df";n.Tags="d84ac5c6-edc7-43d5-adc9-1b34be5dea09";n.BuildTags="6e6114b2-8161-44c8-8f6c-c5505782427f";n.InputValuesQuery="2182a7f0-b363-4b2d-b89e-ed0a0b721e95";n.BuildDefinitionBadge="de6a4df8-22cd-44ee-af2d-39f6aa7a4261";n.BuildBadge="21b3b9ce-fad5-4567-9ad0-80679794e003";n.Controllers="fcac1932-2ee1-437f-9b6f-7f696be858f6";n.Timelines="8baac422-4c6e-4de5-8532-db96d92acffa";n.Usage="3813d06c-9e36-4ea1-aac3-61a485d60e3d";n.Metrics="104ad424-b758-4699-97b7-7e7da427f9c2";n.InformationNodes="9f094d42-b41c-4920-95aa-597581a79821";n.AreaId="5D6898BB-45EC-463F-95F9-54D49C71752E";n.AreaName="build";n.BuildsResource="builds";n.DefinitionsResource="definitions";n.TemplatesResource="templates";n.SettingsResource="settings";n.DefinitionRevisionsResource="revisions";n.DefinitionMetricsResource="metrics";n.FoldersResource="folders";n.OptionsResource="options";n.QueuesResource="queues";n.ArtifactsResource="artifacts";n.BuildChangesLocationId="54572C7B-BBD3-45D4-80DC-28BE08941620";n.BuildChangesResource="changes";n.BuildDeploymentsResource="deployments";n.BuildReportResource="report";n.BuildWorkItemsLocationId="5A21F5D2-5642-47E4-A0BD-1356E6731BEE";n.BuildWorkItemsResource="workitems";n.BuildLogsResource="logs";n.TagsLocationIdString="D84AC5C6-EDC7-43D5-ADC9-1B34BE5DEA09";n.BuildTagsLocationIdString="6E6114B2-8161-44C8-8F6C-C5505782427F";n.BuildTagsResource="tags";n.InputValuesQueryResource="InputValuesQuery";n.BuildDefinitionBadgeResource="badge";n.BuildBadgeResource="buildbadge";n.ControllersLocationString="{FCAC1932-2EE1-437F-9B6F-7F696BE858F6}";n.ControllersResource="Controllers";n.TimelinesResource="Timeline";n.UsageResource="ResourceUsage";n.MetricsResource="Metrics"})(i=t.Build2ResourceIds||(t.Build2ResourceIds={})),function(n){n.Drop="drop";n.SourceLabel="build.SourceLabel"}(r=t.BuildArtifactConstants||(t.BuildArtifactConstants={})),function(n){n.BuildOptionAdditionalFieldsName="additionalFields"}(u=t.BuildConstants||(t.BuildConstants={})),function(n){n.Area="Build";n.FeatureBuildDefinition="BuildDefinition";n.FeatureBuildCompletion="BuildCompletion";n.FeatureBuildPollingSummary="BuildPollingSummary";n.FeatureBuildCommittersDetails="BuildCommittersDetails";n.KeyBuildType="BuildType";n.KeyBuildUri="BuildUri";n.KeyStartTime="StartTime";n.KeyFinishTime="FinishTime";n.KeyDuration="Duration";n.KeyReason="Reason";n.KeyStatus="Status";n.KeyBuildNumber="BuildNumber";n.KeyDefinitionId="DefinitionId";n.KeySourceBranch="SourceBranch";n.KeyArtifactCount="ArtifactCount";n.KeyArtifactCountFormat="ArtifactCount_{0}";n.KeySourceVersion="SourceVersion";n.KeyQueueId="QueueId";n.KeyChangeType="ChangeType";n.KeyDefinitionUri="DefinitionUri";n.KeyDefinitionType="DefinitionType";n.KeyDefinitionQuality="DefinitionQuality";n.KeyBadgeEnabled="BadgeEnabled";n.KeyBuildNumberFormat="BuildNumberFormat";n.KeyDropLocation="DropLocation";n.KeyRepositoryType="RepositoryType";n.KeyRetentionRuleCount="RetentionRuleCount";n.KeyPollingEnabled="PollingEnabled";n.KeyPollingInterval="PollingInterval";n.KeyCIEnabled="CIEnabled";n.KeyCIBranchFilterCount="CIBranchFilterCount";n.KeyScheduledEnabled="ScheduledEnabled";n.KeyScheduledTimeCount="ScheduledTimeCount";n.KeyScheduledBranchFilterCount="ScheduledBranchFilterCount";n.KeyStepCount="StepCount";n.KeyVariableCount="VariableCount";n.KeyDefinitionName="DefinitionName";n.KeyBatchedCIEnabled="BatchedCIEnabled";n.KeyProjectId="ProjectId";n.KeyNumberOfBuildsQueued="NumberOfBuildsQueued";n.KeyNumberOfCommitsToBuild="NumberOfCommitsToBuild";n.KeyNumberOfLogItems="NumberOfLogItems";n.KeyRepositoryUrl="RepositoryUrl";n.KeyPollingElapsedMilliseconds="PollingElapsedMilliseconds";n.KeyLastVersionBuilt="LastVersionBuilt";n.KeyLastVersionInResults="LastVersionInResults";n.KeyNumberOfRevisionsInResults="NumberOfRevisionsInResults";n.KeyRetryAttempts="RetryAttempts";n.KeyBuildId="BuildId";n.KeyBuildCommitterHash="BuildCommitterHash";n.KeyBuildChangeType="BuildChangeType"}(f=t.BuildCustomerIntelligenceInfo||(t.BuildCustomerIntelligenceInfo={})),function(n){n.Build=1;n.Cleanup=2}(e=t.BuildOrchestrationType||(t.BuildOrchestrationType={})),function(n){n.FilePath="FilePath";n.SymbolStore="SymbolStore";n.VersionControl="VersionControl";n.Container="Container";n.GitRef="GitRef";n.TfvcLabel="TfvcLabel"}(o=t.WellKnownArtifactResourceTypes||(t.WellKnownArtifactResourceTypes={})),function(n){n.RepoUri="build.repository.uri";n.System="system";n.CollectionId="system.collectionId";n.TeamProject="system.teamProject";n.TeamProjectId="system.teamProjectId";n.DefinitionId="system.definitionId";n.HostType="system.hosttype";n.DefinitionName="build.definitionName";n.DefinitionVersion="build.definitionVersion";n.QueuedBy="build.queuedBy";n.QueuedById="build.queuedById";n.RequestedFor="build.requestedFor";n.RequestedForId="build.requestedForId";n.RequestedForEmail="build.requestedForEmail";n.SourceBranch="build.sourceBranch";n.SourceBranchName="build.sourceBranchName";n.SourceVersion="build.sourceVersion";n.SourceVersionAuthor="build.sourceVersionAuthor";n.SourceVersionMessage="build.sourceVersionMessage";n.SourceTfvcShelveset="build.sourceTfvcShelveset";n.BuildId="build.buildId";n.BuildUri="build.buildUri";n.BuildNumber="build.buildNumber";n.ContainerId="build.containerId";n.SyncSources="build.syncSources";n.JobAuthorizeAs="Job.AuthorizeAs";n.JobAuthorizeAsId="Job.AuthorizeAsId"}(s=t.WellKnownBuildVariables||(t.WellKnownBuildVariables={})),function(n){n.MyDefinitions="TFS.Build.MyDefinitions";n.AllDefinitions="TFS.Build.AllDefinitions";n.QueuedDefinitions="TFS.Build.QueuedDefinitions";n.DefinitionSummary="TFS.Build.DefinitionSummary";n.DefinitionHistory="TFS.Build.DefinitionHistory";n.DefinitionDeletedHistory="TFS.Build.DefinitionDeletedHistory";n.Builds="TFS.Build.Builds";n.Changes="TFS.Build.Changes";n.Definitions="TFS.Build.Definitions";n.Folders="TFS.Build.Folders";n.Queues="TFS.Build.Queues";n.BuildHistory="TFS.Build.BuildHistory";n.AllDefinitionIds="TFS.Build.AllDefinitions.DefinitionIds";n.BuildIds="TFS.Build.Mine.BuildIds";n.HasMyBuilds="TFS.Build.Mine.HasMyBuilds";n.MyFavoriteDefinitionIds="TFS.Build.MyFavoriteDefinitionIds";n.TeamFavoriteDefinitionIds="TFS.Build.TeamFavoriteDefinitionIds";n.BuildsContinuationToken="TFS.Build.Builds.ContinuationToken";n.DefinitionsContinuationToken="TFS.Build.Definitions.ContinuationToken"}(h=t.WellKnownDataProviderKeys||(t.WellKnownDataProviderKeys={})),function(n){n.SuccessfulBuilds="SuccessfulBuilds";n.FailedBuilds="FailedBuilds";n.PartiallySuccessfulBuilds="PartiallySuccessfulBuilds";n.CanceledBuilds="CanceledBuilds";n.TotalBuilds="TotalBuilds";n.CurrentBuildsInQueue="CurrentBuildsInQueue";n.CurrentBuildsInProgress="CurrentBuildsInProgress"}(c=t.WellKnownDefinitionMetrics||(t.WellKnownDefinitionMetrics={})),function(n){n.Html="Html"}(l=t.WellKnownReportTypes||(t.WellKnownReportTypes={})),function(n){n.ApiUrl="apiUrl";n.BranchesUrl="branchesUrl";n.CloneUrl="cloneUrl";n.ConnectedServiceId="connectedServiceId";n.GitLfsSupport="gitLfsSupport";n.FetchDepth="fetchDepth";n.Fullname="fullName";n.LabelSources="labelSources";n.LabelSourcesFormat="labelSourcesFormat";n.Password="password";n.SvnMapping="svnMapping";n.TfvcMapping="tfvcMapping";n.TokenType="tokenType";n.Username="username";n.ReportBuildStatus="reportBuildStatus"}(a=t.WellKnownRepositoryProperties||(t.WellKnownRepositoryProperties={})),function(n){n.TfsVersionControl="TfsVersionControl";n.TfsGit="TfsGit";n.Git="Git";n.GitHub="GitHub";n.Svn="Svn"}(v=t.WellKnownRepositoryTypes||(t.WellKnownRepositoryTypes={}))});
define("Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants",["require","exports"],function(n,t){var i,r,u,f,e,o,s,h,c,l,a,v;(function(n){n[n.Id=-3]="Id";n[n.Rev=8]="Rev";n[n.Title=1]="Title";n[n.Description=52]="Description";n[n.WorkItemType=25]="WorkItemType";n[n.TeamProject=-42]="TeamProject";n[n.State=2]="State";n[n.Reason=22]="Reason";n[n.CreatedBy=33]="CreatedBy";n[n.AssignedTo=24]="AssignedTo";n[n.ChangedBy=9]="ChangedBy";n[n.ChangedDate=-4]="ChangedDate";n[n.CreatedDate=32]="CreatedDate";n[n.RevisedDate=-5]="RevisedDate";n[n.AuthorizedDate=3]="AuthorizedDate";n[n.AuthorizedAs=-1]="AuthorizedAs";n[n.History=54]="History";n[n.AreaPath=-7]="AreaPath";n[n.AreaId=-2]="AreaId";n[n.IterationPath=-105]="IterationPath";n[n.IterationId=-104]="IterationId";n[n.NodeName=-12]="NodeName";n[n.RelatedLinkCount=75]="RelatedLinkCount";n[n.HyperLinkCount=-32]="HyperLinkCount";n[n.AttachedFileCount=-31]="AttachedFileCount";n[n.ExternalLinkCount=-57]="ExternalLinkCount";n[n.LinkType=100]="LinkType";n[n.Tags=80]="Tags";n[n.Watermark=7]="Watermark";n[n.BoardColumn=90]="BoardColumn";n[n.BoardColumnDone=91]="BoardColumnDone";n[n.BoardLane=92]="BoardLane";n[n.IsDeleted=-404]="IsDeleted"})(t.CoreField||(t.CoreField={}));i=t.CoreField,function(n){n.AreaId="System.AreaId";n.AreaPath="System.AreaPath";n.AssignedTo="System.AssignedTo";n.AttachedFileCount="System.AttachedFileCount";n.AuthorizedAs="System.AuthorizedAs";n.BoardColumn="System.BoardColumn";n.BoardColumnDone="System.BoardColumnDone";n.BoardLane="System.BoardLane";n.ChangedBy="System.ChangedBy";n.ChangedDate="System.ChangedDate";n.CreatedBy="System.CreatedBy";n.CreatedDate="System.CreatedDate";n.Description="System.Description";n.ExternalLinkCount="System.ExternalLinkCount";n.History="System.History";n.HyperLinkCount="System.HyperLinkCount";n.Id="System.Id";n.IterationId="System.IterationId";n.IterationPath="System.IterationPath";n.LinkType="System.Links.LinkType";n.NodeName="System.NodeName";n.Reason="System.Reason";n.RelatedLinkCount="System.RelatedLinkCount";n.Rev="System.Rev";n.RevisedDate="System.RevisedDate";n.State="System.State";n.AuthorizedDate="System.AuthorizedDate";n.TeamProject="System.TeamProject";n.Tags="System.Tags";n.Title="System.Title";n.WorkItemType="System.WorkItemType";n.Watermark="System.Watermark";n.IsDeleted="System.IsDeleted"}(r=t.CoreFieldRefNames||(t.CoreFieldRefNames={})),function(n){n.Related="System.LinkTypes.Related";n.Hierarchy="System.LinkTypes.Hierarchy";n.Dependency="System.LinkTypes.Dependency";n.Duplicate="System.LinkTypes.Duplicate"}(u=t.CoreLinkTypeReferenceNames||(t.CoreLinkTypeReferenceNames={})),function(n){n.IDId=-3;n.RevId=8;n.TitleId=1;n.DescriptionId=52;n.WorkItemTypeId=25;n.PortfolioProjectId=-42;n.WorkItemFormIDId=-14;n.WorkItemFormId=-15;n.StateId=2;n.ReasonId=22;n.CreatedById=33;n.WatermarkId=7;n.AssignedToId=24;n.LastChangedById=9;n.LastChangedDateId=-4;n.AuthorizedDateId=3;n.CreatedDateId=32;n.RevisedDateId=-5;n.PersonNameId=-1;n.HistoryId=54;n.AreaPathId=-7;n.AreaIDId=-2;n.IterationPathId=-105;n.IterationIDId=-104;n.NodeNameId=-12;n.RelatedLinkCountId=75;n.LinkedFileCountId=-32;n.AttachedFileCountId=-31;n.BISURICountId=-57;n.Tags=80;n.BoardColumnId=90;n.BoardColumnDoneId=91;n.BoardLaneId=92;n.RelatedLinks=37;n.PersonID=-6;n.LinkedFiles=51;n.BISURI=58;n.AttachedFiles=50;n.HiddenAttachedFiles=49;n.AreaLevel1=-43;n.AreaLevel2=-44;n.AreaLevel3=-45;n.AreaLevel4=-46;n.AreaLevel5=-47;n.AreaLevel6=-48;n.AreaLevel7=-49;n.IterationLevel1=-50;n.IterationLevel2=-51;n.IterationLevel3=-52;n.IterationLevel4=-53;n.IterationLevel5=-54;n.IterationLevel6=-55;n.IterationLevel7=-56;n.IsDeleted=-404}(f=t.DalFields||(t.DalFields={})),function(n){n[n.Internal=0]="Internal";n[n.String=1]="String";n[n.Integer=2]="Integer";n[n.DateTime=3]="DateTime";n[n.PlainText=5]="PlainText";n[n.Html=7]="Html";n[n.TreePath=8]="TreePath";n[n.History=9]="History";n[n.Double=10]="Double";n[n.Guid=11]="Guid";n[n.Boolean=12]="Boolean";n[n.PicklistInteger=14]="PicklistInteger";n[n.PicklistString=15]="PicklistString"}(t.FieldType||(t.FieldType={}));e=t.FieldType,function(n){n.ArtifactType="WorkItem";n.UnfollowResult="UnfollowResult"}(o=t.FollowsConstants||(t.FollowsConstants={})),function(n){n.BacklogPriority="Microsoft.VSTS.Common.BacklogPriority";n.StackRank="Microsoft.VSTS.Common.StackRank";n.ActivatedBy="Microsoft.VSTS.Common.ActivatedBy";n.ActivatedDate="Microsoft.VSTS.Common.ActivatedDate";n.ClosedBy="Microsoft.VSTS.Common.ClosedBy";n.ClosedDate="Microsoft.VSTS.Common.ClosedDate";n.ResolvedBy="Microsoft.VSTS.Common.ResolvedBy";n.ResolvedDate="Microsoft.VSTS.Common.ResolvedDate";n.StateChangeDate="Microsoft.VSTS.Common.StateChangeDate"}(s=t.OobFieldRefNames||(t.OobFieldRefNames={})),function(n){n[n.unfollowFailed=0]="unfollowFailed";n[n.unfollowSuccess=1]="unfollowSuccess"}(t.UnfollowResultStatus||(t.UnfollowResultStatus={}));h=t.UnfollowResultStatus,function(n){n.HtmlControl="HtmlFieldControl";n.PlainTextControl="PlainTextControl";n.FreshnessIndicatorControl="FreshnessIndicatorControl";n.FieldControl="FieldControl";n.DateControl="DateTimeControl";n.ClassificationControl="WorkItemClassificationControl";n.WorkItemLogControl="WorkItemLogControl";n.WorkItemHistoryControl="WorkItemHistoryControl";n.WorkItemStateGraphControl="WorkItemStateGraphControl";n.LinksControl="LinksControl";n.AttachmentsControl="AttachmentsControl";n.WebpageControl="WebpageControl";n.LabelControl="LabelControl";n.TagFieldControl="TagFieldControl";n.TestStepsControl="TestStepsControl";n.AssociatedAutomationControl="AssociatedAutomationControl";n.StageControl="StageControl";n.StageBuildControl="StageBuildControl";n.ReleaseBuildControl="ReleaseBuildControl";n.AcceptanceCriteriaControl="AcceptanceCriteriaControl";n.DevelopmentControl="DevelopmentControl";n.WorkItemDiscussionControl="WorkItemDiscussionControl"}(c=t.WellKnownControlNames||(t.WellKnownControlNames={})),function(n){n.LinkTypes="LinkTypes";n.WorkItemTypes="WorkItemTypes";n.Nodes="Nodes";n.Fields="Fields";n.AllowedValues="AllowedValues";n.ConstantSets="ConstantSets";n.WorkItemTypeCategories="WorkItemTypeCategories";n.TeamProjects="TeamProjects"}(l=t.WITCommonConstants||(t.WITCommonConstants={})),function(n){n.ShowOnDeletedWorkItem="showOnDeletedWorkItem";n.Height="height";n.Name="name";n.Inputs="inputs";n.InputId="id";n.InputRequired="isRequired";n.InputMode="inputMode";n.InputValidation="validation";n.InputDataType="dataType";n.InputDescription="description";n.InputType="type";n.InputProperties="properties";n.InputType_WorkItemField="WorkItemField";n.FieldType="Field";n.InputProperties_WorkItemFieldTypes="workItemFieldTypes"}(a=t.WorkItemFormContributionProperties||(t.WorkItemFormContributionProperties={})),function(n){n.ContributionDefaultHeight_Group=150;n.ContributionDefaultHeight_Control=75;n.ContributionTarget_Form="ms.vss-work-web.work-item-form";n.ContributionType_Page="ms.vss-work-web.work-item-form-page";n.ContributionType_Group="ms.vss-work-web.work-item-form-group";n.ContributionType_Control="ms.vss-work-web.work-item-form-control";n.ContributionType_Notifications="ms.vss-work-web.work-item-notifications"}(v=t.WorkItemFormExtensionsConstants||(t.WorkItemFormExtensionsConstants={}))});
define("TFS/Build/Contracts",["require","exports"],function(n,t){"use strict";var i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht;(function(n){n[n.Unavailable=0]="Unavailable";n[n.Available=1]="Available";n[n.Offline=2]="Offline"})(t.AgentStatus||(t.AgentStatus={}));i=t.AgentStatus,function(n){n[n.Add=1]="Add";n[n.Update=2]="Update";n[n.Delete=3]="Delete"}(t.AuditAction||(t.AuditAction={}));r=t.AuditAction,function(n){n[n.ProjectCollection=1]="ProjectCollection";n[n.Project=2]="Project"}(t.BuildAuthorizationScope||(t.BuildAuthorizationScope={}));u=t.BuildAuthorizationScope,function(n){n[n.String=0]="String";n[n.Boolean=1]="Boolean";n[n.StringList=2]="StringList";n[n.Radio=3]="Radio";n[n.PickList=4]="PickList";n[n.MultiLine=5]="MultiLine"}(t.BuildOptionInputType||(t.BuildOptionInputType={}));f=t.BuildOptionInputType,function(n){n[n.Unknown=0]="Unknown";n[n.Failed=1]="Failed";n[n.Succeeded=2]="Succeeded"}(t.BuildPhaseStatus||(t.BuildPhaseStatus={}));e=t.BuildPhaseStatus,function(n){n[n.FinishTimeAscending=2]="FinishTimeAscending";n[n.FinishTimeDescending=3]="FinishTimeDescending"}(t.BuildQueryOrder||(t.BuildQueryOrder={}));o=t.BuildQueryOrder,function(n){n[n.None=0]="None";n[n.Manual=1]="Manual";n[n.IndividualCI=2]="IndividualCI";n[n.BatchedCI=4]="BatchedCI";n[n.Schedule=8]="Schedule";n[n.UserCreated=32]="UserCreated";n[n.ValidateShelveset=64]="ValidateShelveset";n[n.CheckInShelveset=128]="CheckInShelveset";n[n.PullRequest=256]="PullRequest";n[n.Triggered=431]="Triggered";n[n.All=495]="All"}(t.BuildReason||(t.BuildReason={}));s=t.BuildReason,function(n){n[n.None=0]="None";n[n.Succeeded=2]="Succeeded";n[n.PartiallySucceeded=4]="PartiallySucceeded";n[n.Failed=8]="Failed";n[n.Canceled=32]="Canceled"}(t.BuildResult||(t.BuildResult={}));h=t.BuildResult,function(n){n[n.None=0]="None";n[n.InProgress=1]="InProgress";n[n.Completed=2]="Completed";n[n.Cancelling=4]="Cancelling";n[n.Postponed=8]="Postponed";n[n.NotStarted=32]="NotStarted";n[n.All=47]="All"}(t.BuildStatus||(t.BuildStatus={}));c=t.BuildStatus,function(n){n[n.Unavailable=0]="Unavailable";n[n.Available=1]="Available";n[n.Offline=2]="Offline"}(t.ControllerStatus||(t.ControllerStatus={}));l=t.ControllerStatus,function(n){n[n.Definition=1]="Definition";n[n.Draft=2]="Draft"}(t.DefinitionQuality||(t.DefinitionQuality={}));a=t.DefinitionQuality,function(n){n[n.None=0]="None";n[n.LastModifiedAscending=1]="LastModifiedAscending";n[n.LastModifiedDescending=2]="LastModifiedDescending";n[n.DefinitionNameAscending=3]="DefinitionNameAscending";n[n.DefinitionNameDescending=4]="DefinitionNameDescending"}(t.DefinitionQueryOrder||(t.DefinitionQueryOrder={}));v=t.DefinitionQueryOrder,function(n){n[n.Enabled=0]="Enabled";n[n.Paused=1]="Paused";n[n.Disabled=2]="Disabled"}(t.DefinitionQueueStatus||(t.DefinitionQueueStatus={}));y=t.DefinitionQueueStatus,function(n){n[n.None=1]="None";n[n.ContinuousIntegration=2]="ContinuousIntegration";n[n.BatchedContinuousIntegration=4]="BatchedContinuousIntegration";n[n.Schedule=8]="Schedule";n[n.GatedCheckIn=16]="GatedCheckIn";n[n.BatchedGatedCheckIn=32]="BatchedGatedCheckIn";n[n.All=63]="All"}(t.DefinitionTriggerType||(t.DefinitionTriggerType={}));p=t.DefinitionTriggerType,function(n){n[n.Xaml=1]="Xaml";n[n.Build=2]="Build"}(t.DefinitionType||(t.DefinitionType={}));w=t.DefinitionType,function(n){n[n.None=0]="None";n[n.DropLocation=1]="DropLocation";n[n.TestResults=2]="TestResults";n[n.Label=4]="Label";n[n.Details=8]="Details";n[n.Symbols=16]="Symbols";n[n.All=31]="All"}(t.DeleteOptions||(t.DeleteOptions={}));b=t.DeleteOptions,function(n){n[n.None=0]="None";n[n.FolderAscending=1]="FolderAscending";n[n.FolderDescending=2]="FolderDescending"}(t.FolderQueryOrder||(t.FolderQueryOrder={}));k=t.FolderQueryOrder,function(n){n[n.LatestOnQueue=0]="LatestOnQueue";n[n.LatestOnBuild=1]="LatestOnBuild";n[n.Custom=2]="Custom"}(t.GetOption||(t.GetOption={}));d=t.GetOption,function(n){n[n.Error=1]="Error";n[n.Warning=2]="Warning"}(t.IssueType||(t.IssueType={}));g=t.IssueType,function(n){n[n.Custom=0]="Custom";n[n.Default=1]="Default";n[n.Upgrade=2]="Upgrade"}(t.ProcessTemplateType||(t.ProcessTemplateType={}));nt=t.ProcessTemplateType,function(n){n[n.ExcludeDeleted=0]="ExcludeDeleted";n[n.IncludeDeleted=1]="IncludeDeleted";n[n.OnlyDeleted=2]="OnlyDeleted"}(t.QueryDeletedOption||(t.QueryDeletedOption={}));tt=t.QueryDeletedOption,function(n){n[n.None=0]="None";n[n.DoNotRun=1]="DoNotRun"}(t.QueueOptions||(t.QueueOptions={}));it=t.QueueOptions,function(n){n[n.Low=5]="Low";n[n.BelowNormal=4]="BelowNormal";n[n.Normal=3]="Normal";n[n.AboveNormal=2]="AboveNormal";n[n.High=1]="High"}(t.QueuePriority||(t.QueuePriority={}));rt=t.QueuePriority,function(n){n[n.None=0]="None";n[n.Monday=1]="Monday";n[n.Tuesday=2]="Tuesday";n[n.Wednesday=4]="Wednesday";n[n.Thursday=8]="Thursday";n[n.Friday=16]="Friday";n[n.Saturday=32]="Saturday";n[n.Sunday=64]="Sunday";n[n.All=127]="All"}(t.ScheduleDays||(t.ScheduleDays={}));ut=t.ScheduleDays,function(n){n[n.Online=1]="Online";n[n.Offline=2]="Offline"}(t.ServiceHostStatus||(t.ServiceHostStatus={}));ft=t.ServiceHostStatus,function(n){n[n.Succeeded=0]="Succeeded";n[n.SucceededWithIssues=1]="SucceededWithIssues";n[n.Failed=2]="Failed";n[n.Canceled=3]="Canceled";n[n.Skipped=4]="Skipped";n[n.Abandoned=5]="Abandoned"}(t.TaskResult||(t.TaskResult={}));et=t.TaskResult,function(n){n[n.Pending=0]="Pending";n[n.InProgress=1]="InProgress";n[n.Completed=2]="Completed"}(t.TimelineRecordState||(t.TimelineRecordState={}));ot=t.TimelineRecordState,function(n){n[n.OK=0]="OK";n[n.Warning=1]="Warning";n[n.Error=2]="Error"}(t.ValidationResult||(t.ValidationResult={}));st=t.ValidationResult,function(n){n[n.Map=0]="Map";n[n.Cloak=1]="Cloak"}(t.WorkspaceMappingType||(t.WorkspaceMappingType={}));ht=t.WorkspaceMappingType;t.TypeInfo={AgentStatus:{enumValues:{unavailable:0,available:1,offline:2}},AuditAction:{enumValues:{add:1,update:2,"delete":3}},Build:{},BuildAgent:{},BuildArtifactAddedEvent:{},BuildAuthorizationScope:{enumValues:{projectCollection:1,project:2}},BuildChangesCalculatedEvent:{},BuildCompletedEvent:{},BuildController:{},BuildDefinition:{},BuildDefinitionChangedEvent:{},BuildDefinitionChangingEvent:{},BuildDefinitionReference:{},BuildDefinitionRevision:{},BuildDefinitionSourceProvider:{},BuildDefinitionTemplate:{},BuildDeletedEvent:{},BuildDeployment:{},BuildDestroyedEvent:{},BuildLog:{},BuildMetric:{},BuildOptionDefinition:{},BuildOptionInputDefinition:{},BuildOptionInputType:{enumValues:{string:0,boolean:1,stringList:2,radio:3,pickList:4,multiLine:5}},BuildPhaseStatus:{enumValues:{unknown:0,failed:1,succeeded:2}},BuildProcessTemplate:{},BuildQueryOrder:{enumValues:{finishTimeAscending:2,finishTimeDescending:3}},BuildQueuedEvent:{},BuildReason:{enumValues:{none:0,manual:1,individualCI:2,batchedCI:4,schedule:8,userCreated:32,validateShelveset:64,checkInShelveset:128,pullRequest:256,triggered:431,all:495}},BuildReference:{},BuildRequestValidationResult:{},BuildResult:{enumValues:{none:0,succeeded:2,partiallySucceeded:4,failed:8,canceled:32}},BuildServer:{},BuildStartedEvent:{},BuildStatus:{enumValues:{none:0,inProgress:1,completed:2,cancelling:4,postponed:8,notStarted:32,all:47}},BuildSummary:{},BuildTrigger:{},BuildUpdatedEvent:{},Change:{},ContinuousIntegrationTrigger:{},ControllerStatus:{enumValues:{unavailable:0,available:1,offline:2}},DefinitionQuality:{enumValues:{definition:1,draft:2}},DefinitionQueryOrder:{enumValues:{none:0,lastModifiedAscending:1,lastModifiedDescending:2,definitionNameAscending:3,definitionNameDescending:4}},DefinitionQueueStatus:{enumValues:{enabled:0,paused:1,disabled:2}},DefinitionReference:{},DefinitionTriggerType:{enumValues:{none:1,continuousIntegration:2,batchedContinuousIntegration:4,schedule:8,gatedCheckIn:16,batchedGatedCheckIn:32,all:63}},DefinitionType:{enumValues:{xaml:1,build:2}},DeleteOptions:{enumValues:{none:0,dropLocation:1,testResults:2,label:4,details:8,symbols:16,all:31}},Folder:{},FolderQueryOrder:{enumValues:{none:0,folderAscending:1,folderDescending:2}},GatedCheckInTrigger:{},GetOption:{enumValues:{latestOnQueue:0,latestOnBuild:1,custom:2}},InformationNode:{},Issue:{},IssueType:{enumValues:{error:1,warning:2}},ProcessTemplateType:{enumValues:{custom:0,"default":1,upgrade:2}},PropertyValue:{},QueryDeletedOption:{enumValues:{excludeDeleted:0,includeDeleted:1,onlyDeleted:2}},QueueOptions:{enumValues:{none:0,doNotRun:1}},QueuePriority:{enumValues:{low:5,belowNormal:4,normal:3,aboveNormal:2,high:1}},Schedule:{},ScheduleDays:{enumValues:{none:0,monday:1,tuesday:2,wednesday:4,thursday:8,friday:16,saturday:32,sunday:64,all:127}},ScheduleTrigger:{},ServiceHostStatus:{enumValues:{online:1,offline:2}},SyncBuildCompletedEvent:{},SyncBuildStartedEvent:{},TaskResult:{enumValues:{succeeded:0,succeededWithIssues:1,failed:2,canceled:3,skipped:4,abandoned:5}},Timeline:{},TimelineRecord:{},TimelineRecordState:{enumValues:{pending:0,inProgress:1,completed:2}},TimelineRecordsUpdatedEvent:{},ValidationResult:{enumValues:{oK:0,warning:1,error:2}},WorkspaceMapping:{},WorkspaceMappingType:{enumValues:{map:0,cloak:1}},WorkspaceTemplate:{},XamlBuildDefinition:{}};t.TypeInfo.Build.fields={controller:{typeInfo:t.TypeInfo.BuildController},definition:{typeInfo:t.TypeInfo.DefinitionReference},deletedDate:{isDate:!0},finishTime:{isDate:!0},lastChangedDate:{isDate:!0},priority:{enumType:t.TypeInfo.QueuePriority},queueOptions:{enumType:t.TypeInfo.QueueOptions},queueTime:{isDate:!0},reason:{enumType:t.TypeInfo.BuildReason},result:{enumType:t.TypeInfo.BuildResult},startTime:{isDate:!0},status:{enumType:t.TypeInfo.BuildStatus},validationResults:{isArray:!0,typeInfo:t.TypeInfo.BuildRequestValidationResult}};t.TypeInfo.BuildAgent.fields={createdDate:{isDate:!0},status:{enumType:t.TypeInfo.AgentStatus},updatedDate:{isDate:!0}};t.TypeInfo.BuildArtifactAddedEvent.fields={build:{typeInfo:t.TypeInfo.Build}};t.TypeInfo.BuildChangesCalculatedEvent.fields={build:{typeInfo:t.TypeInfo.Build},changes:{isArray:!0,typeInfo:t.TypeInfo.Change}};t.TypeInfo.BuildCompletedEvent.fields={build:{typeInfo:t.TypeInfo.Build}};t.TypeInfo.BuildController.fields={createdDate:{isDate:!0},status:{enumType:t.TypeInfo.ControllerStatus},updatedDate:{isDate:!0}};t.TypeInfo.BuildDefinition.fields={createdDate:{isDate:!0},draftOf:{typeInfo:t.TypeInfo.DefinitionReference},jobAuthorizationScope:{enumType:t.TypeInfo.BuildAuthorizationScope},metrics:{isArray:!0,typeInfo:t.TypeInfo.BuildMetric},quality:{enumType:t.TypeInfo.DefinitionQuality},queueStatus:{enumType:t.TypeInfo.DefinitionQueueStatus},triggers:{isArray:!0,typeInfo:t.TypeInfo.BuildTrigger},type:{enumType:t.TypeInfo.DefinitionType}};t.TypeInfo.BuildDefinitionChangedEvent.fields={changeType:{enumType:t.TypeInfo.AuditAction},definition:{typeInfo:t.TypeInfo.BuildDefinition}};t.TypeInfo.BuildDefinitionChangingEvent.fields={changeType:{enumType:t.TypeInfo.AuditAction},newDefinition:{typeInfo:t.TypeInfo.BuildDefinition},originalDefinition:{typeInfo:t.TypeInfo.BuildDefinition}};t.TypeInfo.BuildDefinitionReference.fields={createdDate:{isDate:!0},draftOf:{typeInfo:t.TypeInfo.DefinitionReference},metrics:{isArray:!0,typeInfo:t.TypeInfo.BuildMetric},quality:{enumType:t.TypeInfo.DefinitionQuality},queueStatus:{enumType:t.TypeInfo.DefinitionQueueStatus},type:{enumType:t.TypeInfo.DefinitionType}};t.TypeInfo.BuildDefinitionRevision.fields={changedDate:{isDate:!0},changeType:{enumType:t.TypeInfo.AuditAction}};t.TypeInfo.BuildDefinitionSourceProvider.fields={lastModified:{isDate:!0},supportedTriggerTypes:{enumType:t.TypeInfo.DefinitionTriggerType}};t.TypeInfo.BuildDefinitionTemplate.fields={template:{typeInfo:t.TypeInfo.BuildDefinition}};t.TypeInfo.BuildDeletedEvent.fields={build:{typeInfo:t.TypeInfo.Build}};t.TypeInfo.BuildDeployment.fields={deployment:{typeInfo:t.TypeInfo.BuildSummary}};t.TypeInfo.BuildDestroyedEvent.fields={build:{typeInfo:t.TypeInfo.Build}};t.TypeInfo.BuildLog.fields={createdOn:{isDate:!0},lastChangedOn:{isDate:!0}};t.TypeInfo.BuildMetric.fields={date:{isDate:!0}};t.TypeInfo.BuildOptionDefinition.fields={inputs:{isArray:!0,typeInfo:t.TypeInfo.BuildOptionInputDefinition}};t.TypeInfo.BuildOptionInputDefinition.fields={type:{enumType:t.TypeInfo.BuildOptionInputType}};t.TypeInfo.BuildProcessTemplate.fields={supportedReasons:{enumType:t.TypeInfo.BuildReason},templateType:{enumType:t.TypeInfo.ProcessTemplateType}};t.TypeInfo.BuildQueuedEvent.fields={build:{typeInfo:t.TypeInfo.Build}};t.TypeInfo.BuildReference.fields={finishTime:{isDate:!0},queueTime:{isDate:!0},result:{enumType:t.TypeInfo.BuildResult},startTime:{isDate:!0},status:{enumType:t.TypeInfo.BuildStatus}};t.TypeInfo.BuildRequestValidationResult.fields={result:{enumType:t.TypeInfo.ValidationResult}};t.TypeInfo.BuildServer.fields={status:{enumType:t.TypeInfo.ServiceHostStatus},statusChangedDate:{isDate:!0}};t.TypeInfo.BuildStartedEvent.fields={build:{typeInfo:t.TypeInfo.Build}};t.TypeInfo.BuildSummary.fields={finishTime:{isDate:!0},reason:{enumType:t.TypeInfo.BuildReason},startTime:{isDate:!0},status:{enumType:t.TypeInfo.BuildStatus}};t.TypeInfo.BuildTrigger.fields={triggerType:{enumType:t.TypeInfo.DefinitionTriggerType}};t.TypeInfo.BuildUpdatedEvent.fields={build:{typeInfo:t.TypeInfo.Build}};t.TypeInfo.Change.fields={timestamp:{isDate:!0}};t.TypeInfo.ContinuousIntegrationTrigger.fields={triggerType:{enumType:t.TypeInfo.DefinitionTriggerType}};t.TypeInfo.DefinitionReference.fields={createdDate:{isDate:!0},queueStatus:{enumType:t.TypeInfo.DefinitionQueueStatus},type:{enumType:t.TypeInfo.DefinitionType}};t.TypeInfo.Folder.fields={createdOn:{isDate:!0},lastChangedDate:{isDate:!0}};t.TypeInfo.GatedCheckInTrigger.fields={triggerType:{enumType:t.TypeInfo.DefinitionTriggerType}};t.TypeInfo.InformationNode.fields={lastModifiedDate:{isDate:!0}};t.TypeInfo.Issue.fields={type:{enumType:t.TypeInfo.IssueType}};t.TypeInfo.PropertyValue.fields={changedDate:{isDate:!0}};t.TypeInfo.Schedule.fields={daysToBuild:{enumType:t.TypeInfo.ScheduleDays}};t.TypeInfo.ScheduleTrigger.fields={schedules:{isArray:!0,typeInfo:t.TypeInfo.Schedule},triggerType:{enumType:t.TypeInfo.DefinitionTriggerType}};t.TypeInfo.SyncBuildCompletedEvent.fields={build:{typeInfo:t.TypeInfo.Build}};t.TypeInfo.SyncBuildStartedEvent.fields={build:{typeInfo:t.TypeInfo.Build}};t.TypeInfo.Timeline.fields={lastChangedOn:{isDate:!0},records:{isArray:!0,typeInfo:t.TypeInfo.TimelineRecord}};t.TypeInfo.TimelineRecord.fields={finishTime:{isDate:!0},issues:{isArray:!0,typeInfo:t.TypeInfo.Issue},lastModified:{isDate:!0},result:{enumType:t.TypeInfo.TaskResult},startTime:{isDate:!0},state:{enumType:t.TypeInfo.TimelineRecordState}};t.TypeInfo.TimelineRecordsUpdatedEvent.fields={timelineRecords:{isArray:!0,typeInfo:t.TypeInfo.TimelineRecord}};t.TypeInfo.WorkspaceMapping.fields={mappingType:{enumType:t.TypeInfo.WorkspaceMappingType}};t.TypeInfo.WorkspaceTemplate.fields={lastModifiedDate:{isDate:!0},mappings:{isArray:!0,typeInfo:t.TypeInfo.WorkspaceMapping}};t.TypeInfo.XamlBuildDefinition.fields={controller:{typeInfo:t.TypeInfo.BuildController},createdDate:{isDate:!0},createdOn:{isDate:!0},queueStatus:{enumType:t.TypeInfo.DefinitionQueueStatus},supportedReasons:{enumType:t.TypeInfo.BuildReason},triggerType:{enumType:t.TypeInfo.DefinitionTriggerType},type:{enumType:t.TypeInfo.DefinitionType}}});
define("TFS/Build/RestClient",["require","exports","TFS/Build/Contracts","VSS/Service","VSS/WebApi/RestClient","VSS/WebApi/Constants"],function(n,t,i,r,u,f){"use strict";function b(n){return window.VSS&&window.VSS.VssSDKRestVersion&&p[window.VSS.VssSDKRestVersion]?r.getClient(p[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):r.getClient(h,undefined,undefined,undefined,n)}var c=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.getBuildTimeline=function(n,t,r,u,f){var e={changeId:u,planId:f};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"8baac422-4c6e-4de5-8532-db96d92acffa",resource:"Timeline",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{timelineId}",responseType:i.TypeInfo.Timeline,routeValues:{project:n,buildId:t,timelineId:r},queryParams:e,apiVersion:this.timelineApiVersion})},t.prototype.saveTemplate=function(n,t,r){return this._beginRequest({httpMethod:"PUT",area:"build",locationId:"e884571e-7f92-4d6a-9274-3f5649900835",resource:"templates",routeTemplate:"{project}/_apis/{area}/definitions/{resource}/{templateId}",requestType:i.TypeInfo.BuildDefinitionTemplate,responseType:i.TypeInfo.BuildDefinitionTemplate,routeValues:{project:t,templateId:r},apiVersion:this.templatesApiVersion,data:n})},t.prototype.getTemplates=function(n){return this._beginRequest({httpMethod:"GET",area:"build",locationId:"e884571e-7f92-4d6a-9274-3f5649900835",resource:"templates",routeTemplate:"{project}/_apis/{area}/definitions/{resource}/{templateId}",responseType:i.TypeInfo.BuildDefinitionTemplate,responseIsCollection:!0,routeValues:{project:n},apiVersion:this.templatesApiVersion})},t.prototype.getTemplate=function(n,t){return this._beginRequest({httpMethod:"GET",area:"build",locationId:"e884571e-7f92-4d6a-9274-3f5649900835",resource:"templates",routeTemplate:"{project}/_apis/{area}/definitions/{resource}/{templateId}",responseType:i.TypeInfo.BuildDefinitionTemplate,routeValues:{project:n,templateId:t},apiVersion:this.templatesApiVersion})},t.prototype.deleteTemplate=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"build",locationId:"e884571e-7f92-4d6a-9274-3f5649900835",resource:"templates",routeTemplate:"{project}/_apis/{area}/definitions/{resource}/{templateId}",routeValues:{project:n,templateId:t},apiVersion:this.templatesApiVersion})},t.prototype.getTags=function(n){return this._beginRequest({httpMethod:"GET",area:"build",locationId:"d84ac5c6-edc7-43d5-adc9-1b34be5dea09",resource:"tags",routeTemplate:"{project}/_apis/{area}/{resource}",responseIsCollection:!0,routeValues:{project:n},apiVersion:this.tagsApiVersion})},t.prototype.getBuildTags=function(n,t){return this._beginRequest({httpMethod:"GET",area:"build",locationId:"6e6114b2-8161-44c8-8f6c-c5505782427f",resource:"tags",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{*tag}",responseIsCollection:!0,routeValues:{project:n,buildId:t},apiVersion:this.tagsApiVersion_6e6114b2})},t.prototype.deleteBuildTag=function(n,t,i){return this._beginRequest({httpMethod:"DELETE",area:"build",locationId:"6e6114b2-8161-44c8-8f6c-c5505782427f",resource:"tags",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{*tag}",responseIsCollection:!0,routeValues:{project:n,buildId:t,tag:i},apiVersion:this.tagsApiVersion_6e6114b2})},t.prototype.addBuildTags=function(n,t,i){return this._beginRequest({httpMethod:"POST",area:"build",locationId:"6e6114b2-8161-44c8-8f6c-c5505782427f",resource:"tags",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{*tag}",responseIsCollection:!0,routeValues:{project:t,buildId:i},apiVersion:this.tagsApiVersion_6e6114b2,data:n})},t.prototype.addBuildTag=function(n,t,i){return this._beginRequest({httpMethod:"PUT",area:"build",locationId:"6e6114b2-8161-44c8-8f6c-c5505782427f",resource:"tags",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{*tag}",responseIsCollection:!0,routeValues:{project:n,buildId:t,tag:i},apiVersion:this.tagsApiVersion_6e6114b2})},t.prototype.updateBuildSettings=function(n){return this._beginRequest({httpMethod:"PATCH",area:"build",locationId:"aa8c1c9c-ef8b-474a-b8c4-785c7b191d0d",resource:"settings",routeTemplate:"_apis/{area}/{resource}",apiVersion:this.settingsApiVersion,data:n})},t.prototype.getBuildSettings=function(){return this._beginRequest({httpMethod:"GET",area:"build",locationId:"aa8c1c9c-ef8b-474a-b8c4-785c7b191d0d",resource:"settings",routeTemplate:"_apis/{area}/{resource}",apiVersion:this.settingsApiVersion})},t.prototype.getDefinitionRevisions=function(n,t){return this._beginRequest({httpMethod:"GET",area:"build",locationId:"7c116775-52e5-453e-8c5d-914d9762d8c4",resource:"revisions",routeTemplate:"{project}/_apis/{area}/definitions/{definitionId}/{resource}",responseType:i.TypeInfo.BuildDefinitionRevision,responseIsCollection:!0,routeValues:{project:n,definitionId:t},apiVersion:this.revisionsApiVersion})},t.prototype.getResourceUsage=function(){return this._beginRequest({httpMethod:"GET",area:"build",locationId:"3813d06c-9e36-4ea1-aac3-61a485d60e3d",resource:"ResourceUsage",routeTemplate:"_apis/build/{resource}",apiVersion:this.resourceUsageApiVersion})},t.prototype.getBuildOptionDefinitions=function(n){return this._beginRequest({httpMethod:"GET",area:"build",locationId:"591cb5a4-2d46-4f3a-a697-5cd42b6bd332",resource:"options",routeTemplate:"{project}/_apis/{area}/{resource}",responseType:i.TypeInfo.BuildOptionDefinition,responseIsCollection:!0,routeValues:{project:n},apiVersion:this.optionsApiVersion})},t.prototype.updateDefinition=function(n,t,r,u,f){var e={secretsSourceDefinitionId:u,secretsSourceDefinitionRevision:f};return this._beginRequest({httpMethod:"PUT",area:"build",locationId:"dbeaf647-6167-421a-bda9-c9327b25e2e6",resource:"definitions",routeTemplate:"{project}/_apis/build/{resource}/{definitionId}",requestType:i.TypeInfo.BuildDefinition,responseType:i.TypeInfo.BuildDefinition,routeValues:{project:r,definitionId:t},queryParams:e,apiVersion:this.definitionsApiVersion,data:n})},t.prototype.deleteDefinition=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"build",locationId:"dbeaf647-6167-421a-bda9-c9327b25e2e6",resource:"definitions",routeTemplate:"{project}/_apis/build/{resource}/{definitionId}",routeValues:{project:t,definitionId:n},apiVersion:this.definitionsApiVersion})},t.prototype.createDefinition=function(n,t,r,u){var f={definitionToCloneId:r,definitionToCloneRevision:u};return this._beginRequest({httpMethod:"POST",area:"build",locationId:"dbeaf647-6167-421a-bda9-c9327b25e2e6",resource:"definitions",routeTemplate:"{project}/_apis/build/{resource}/{definitionId}",requestType:i.TypeInfo.BuildDefinition,responseType:i.TypeInfo.BuildDefinition,routeValues:{project:t},queryParams:f,apiVersion:this.definitionsApiVersion,data:n})},t.prototype.getBuildControllers=function(n){var t={name:n};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"fcac1932-2ee1-437f-9b6f-7f696be858f6",resource:"Controllers",routeTemplate:"_apis/build/{resource}/{controllerId}",responseType:i.TypeInfo.BuildController,responseIsCollection:!0,queryParams:t,apiVersion:this.controllersApiVersion})},t.prototype.getBuildController=function(n){return this._beginRequest({httpMethod:"GET",area:"build",locationId:"fcac1932-2ee1-437f-9b6f-7f696be858f6",resource:"Controllers",routeTemplate:"_apis/build/{resource}/{controllerId}",responseType:i.TypeInfo.BuildController,routeValues:{controllerId:n},apiVersion:this.controllersApiVersion})},t.prototype.getBuildBadgeData=function(n,t,i,r){var u={repoId:i,branchName:r};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"21b3b9ce-fad5-4567-9ad0-80679794e003",resource:"buildbadge",routeTemplate:"{project}/_apis/{area}/repos/{repoType}/badge",routeValues:{project:n,repoType:t},queryParams:u,apiVersion:this.buildbadgeApiVersion})},t.prototype.getBuildBadge=function(n,t,i,r){var u={repoId:i,branchName:r};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"21b3b9ce-fad5-4567-9ad0-80679794e003",resource:"buildbadge",routeTemplate:"{project}/_apis/{area}/repos/{repoType}/badge",routeValues:{project:n,repoType:t},queryParams:u,apiVersion:this.buildbadgeApiVersion})},t.prototype.getBadge=function(n,t,i){var r={branchName:i};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"de6a4df8-22cd-44ee-af2d-39f6aa7a4261",resource:"badge",routeTemplate:"_apis/public/{area}/definitions/{project}/{definitionId}/{resource}",routeValues:{project:n,definitionId:t},queryParams:r,apiVersion:this.badgeApiVersion})},t.prototype.createArtifact=function(n,t,i){return this._beginRequest({httpMethod:"POST",area:"build",locationId:"1db06c96-014e-44e1-ac91-90b2d4b3e984",resource:"artifacts",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{artifactName}",routeValues:{project:i,buildId:t},apiVersion:this.artifactsApiVersion,data:n})},t.serviceInstanceId=f.ServiceInstanceTypes.TFS,t}(u.VssHttpClient),e,o,s,h,l,a,v,y,w,p;t.CommonMethods2To3_1=c;e=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.getWorkItemsBetweenBuilds=function(n,t,i,r){var u={fromBuildId:t,toBuildId:i,$top:r};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"52ba8915-5518-42e3-a4bb-b0182d159e2d",resource:"workitems",routeTemplate:"{project}/_apis/{area}/{resource}",responseIsCollection:!0,routeValues:{project:n},queryParams:u,apiVersion:this.workitemsApiVersion})},t.prototype.getChangesBetweenBuilds=function(n,t,r,u){var f={fromBuildId:t,toBuildId:r,$top:u};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"f10f0ea5-18a1-43ec-a8fb-2042c7be9b43",resource:"changes",routeTemplate:"{project}/_apis/{area}/{resource}",responseType:i.TypeInfo.Change,responseIsCollection:!0,routeValues:{project:n},queryParams:f,apiVersion:this.changesApiVersion})},t}(c);t.CommonMethods2_1To3_1=e;o=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.getBuildWorkItemsRefsFromCommits=function(n,t,i,r){var u={$top:r};return this._beginRequest({httpMethod:"POST",area:"build",locationId:"5a21f5d2-5642-47e4-a0bd-1356e6731bee",resource:"workitems",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",responseIsCollection:!0,routeValues:{project:t,buildId:i},queryParams:u,apiVersion:this.workitemsApiVersion_5a21f5d2,data:n})},t.prototype.getBuildWorkItemsRefs=function(n,t,i){var r={$top:i};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"5a21f5d2-5642-47e4-a0bd-1356e6731bee",resource:"workitems",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",responseIsCollection:!0,routeValues:{project:n,buildId:t},queryParams:r,apiVersion:this.workitemsApiVersion_5a21f5d2})},t.prototype.getBuildReportHtmlContent=function(n,t,i){var r={type:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"text/html",area:"build",locationId:"45bcaa88-67e1-4042-a035-56d3b4a7d44c",resource:"report",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",routeValues:{project:n,buildId:t},queryParams:r,apiVersion:this.reportApiVersion})},t.prototype.getBuildReport=function(n,t,i){var r={type:i};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"45bcaa88-67e1-4042-a035-56d3b4a7d44c",resource:"report",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",routeValues:{project:n,buildId:t},queryParams:r,apiVersion:this.reportApiVersion})},t.prototype.getDefinitionMetrics=function(n,t,r){var u={minMetricsTime:r};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"d973b939-0ce0-4fec-91d8-da3940fa1827",resource:"metrics",routeTemplate:"{project}/_apis/{area}/definitions/{definitionId}/{resource}",responseType:i.TypeInfo.BuildMetric,responseIsCollection:!0,routeValues:{project:n,definitionId:t},queryParams:u,apiVersion:this.metricsApiVersion})},t.prototype.getBuildLogsZip=function(n,t){return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"build",locationId:"35a80daf-7f30-45fc-86e8-6b813d9c90df",resource:"logs",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{logId}",routeValues:{project:n,buildId:t},apiVersion:this.logsApiVersion})},t.prototype.getBuildLogs=function(n,t){return this._beginRequest({httpMethod:"GET",area:"build",locationId:"35a80daf-7f30-45fc-86e8-6b813d9c90df",resource:"logs",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{logId}",responseType:i.TypeInfo.BuildLog,responseIsCollection:!0,routeValues:{project:n,buildId:t},apiVersion:this.logsApiVersion})},t.prototype.getBuildLogLines=function(n,t,i,r,u){var f={startLine:r,endLine:u};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"35a80daf-7f30-45fc-86e8-6b813d9c90df",resource:"logs",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{logId}",responseIsCollection:!0,routeValues:{project:n,buildId:t,logId:i},queryParams:f,apiVersion:this.logsApiVersion})},t.prototype.getBuildLog=function(n,t,i,r,u){var f={startLine:r,endLine:u};return this._beginRequest({httpMethod:"GET",httpResponseType:"text/plain",area:"build",locationId:"35a80daf-7f30-45fc-86e8-6b813d9c90df",resource:"logs",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{logId}",routeValues:{project:n,buildId:t,logId:i},queryParams:f,apiVersion:this.logsApiVersion})},t.prototype.updateFolder=function(n,t,r){return this._beginRequest({httpMethod:"POST",area:"build",locationId:"a906531b-d2da-4f55-bda7-f3e676cc50d9",resource:"folders",routeTemplate:"{project}/_apis/{area}/{resource}/{*path}",requestType:i.TypeInfo.Folder,responseType:i.TypeInfo.Folder,routeValues:{project:t,path:r},apiVersion:this.foldersApiVersion,data:n})},t.prototype.getFolders=function(n,t,r){var u={queryOrder:r};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"a906531b-d2da-4f55-bda7-f3e676cc50d9",resource:"folders",routeTemplate:"{project}/_apis/{area}/{resource}/{*path}",responseType:i.TypeInfo.Folder,responseIsCollection:!0,routeValues:{project:n,path:t},queryParams:u,apiVersion:this.foldersApiVersion})},t.prototype.deleteFolder=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"build",locationId:"a906531b-d2da-4f55-bda7-f3e676cc50d9",resource:"folders",routeTemplate:"{project}/_apis/{area}/{resource}/{*path}",routeValues:{project:n,path:t},apiVersion:this.foldersApiVersion})},t.prototype.createFolder=function(n,t,r){return this._beginRequest({httpMethod:"PUT",area:"build",locationId:"a906531b-d2da-4f55-bda7-f3e676cc50d9",resource:"folders",routeTemplate:"{project}/_apis/{area}/{resource}/{*path}",requestType:i.TypeInfo.Folder,responseType:i.TypeInfo.Folder,routeValues:{project:t,path:r},apiVersion:this.foldersApiVersion,data:n})},t.prototype.getDefinitions=function(n,t,r,u,f,e,o,s,h,c,l,a,v){var y={name:t,repositoryId:r,repositoryType:u,queryOrder:f,$top:e,continuationToken:o,minMetricsTime:s,definitionIds:h&&h.join(","),path:c,builtAfter:l,notBuiltAfter:a,includeAllProperties:v};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"dbeaf647-6167-421a-bda9-c9327b25e2e6",resource:"definitions",routeTemplate:"{project}/_apis/build/{resource}/{definitionId}",responseType:i.TypeInfo.BuildDefinitionReference,responseIsCollection:!0,routeValues:{project:n},queryParams:y,apiVersion:this.definitionsApiVersion})},t.prototype.getDefinition=function(n,t,r,u,f){var e={revision:r,minMetricsTime:u,propertyFilters:f&&f.join(",")};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"dbeaf647-6167-421a-bda9-c9327b25e2e6",resource:"definitions",routeTemplate:"{project}/_apis/build/{resource}/{definitionId}",responseType:i.TypeInfo.BuildDefinition,routeValues:{project:t,definitionId:n},queryParams:e,apiVersion:this.definitionsApiVersion})},t.prototype.getBuildChanges=function(n,t,r,u,f){var e={continuationToken:r,$top:u,includeSourceChange:f};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"54572c7b-bbd3-45d4-80dc-28be08941620",resource:"changes",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",responseType:i.TypeInfo.Change,responseIsCollection:!0,routeValues:{project:n,buildId:t},queryParams:e,apiVersion:this.changesApiVersion_54572c7b})},t.prototype.updateBuilds=function(n,t){return this._beginRequest({httpMethod:"PATCH",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",requestType:i.TypeInfo.Build,responseType:i.TypeInfo.Build,responseIsCollection:!0,routeValues:{project:t},apiVersion:this.buildsApiVersion,data:n})},t.prototype.updateBuild=function(n,t,r){return this._beginRequest({httpMethod:"PATCH",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",requestType:i.TypeInfo.Build,responseType:i.TypeInfo.Build,routeValues:{project:r,buildId:t},apiVersion:this.buildsApiVersion,data:n})},t.prototype.queueBuild=function(n,t,r,u){var f={ignoreWarnings:r,checkInTicket:u};return this._beginRequest({httpMethod:"POST",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",requestType:i.TypeInfo.Build,responseType:i.TypeInfo.Build,routeValues:{project:t},queryParams:f,apiVersion:this.buildsApiVersion,data:n})},t.prototype.getBuilds=function(n,t,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt){var tt={definitions:t&&t.join(","),queues:r&&r.join(","),buildNumber:u,minFinishTime:f,maxFinishTime:e,requestedFor:o,reasonFilter:s,statusFilter:h,resultFilter:c,tagFilters:l&&l.join(","),properties:a&&a.join(","),$top:v,continuationToken:y,maxBuildsPerDefinition:p,deletedFilter:w,queryOrder:b,branchName:k,buildIds:d&&d.join(","),repositoryId:g,repositoryType:nt};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",responseType:i.TypeInfo.Build,responseIsCollection:!0,routeValues:{project:n},queryParams:tt,apiVersion:this.buildsApiVersion})},t.prototype.getBuild=function(n,t,r){var u={propertyFilters:r};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",responseType:i.TypeInfo.Build,routeValues:{project:t,buildId:n},queryParams:u,apiVersion:this.buildsApiVersion})},t.prototype.deleteBuild=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",routeValues:{project:t,buildId:n},apiVersion:this.buildsApiVersion})},t.prototype.getArtifacts=function(n,t){return this._beginRequest({httpMethod:"GET",area:"build",locationId:"1db06c96-014e-44e1-ac91-90b2d4b3e984",resource:"artifacts",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{artifactName}",responseIsCollection:!0,routeValues:{project:t,buildId:n},apiVersion:this.artifactsApiVersion})},t.prototype.getArtifactContentZip=function(n,t,i){var r={artifactName:t};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"build",locationId:"1db06c96-014e-44e1-ac91-90b2d4b3e984",resource:"artifacts",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{artifactName}",routeValues:{project:i,buildId:n},queryParams:r,apiVersion:this.artifactsApiVersion})},t.prototype.getArtifact=function(n,t,i){var r={artifactName:t};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"1db06c96-014e-44e1-ac91-90b2d4b3e984",resource:"artifacts",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{artifactName}",routeValues:{project:i,buildId:n},queryParams:r,apiVersion:this.artifactsApiVersion})},t}(e);t.CommonMethods3To3_1=o;s=function(n){function t(t,i){n.call(this,t,i);this.buildbadgeApiVersion=this.foldersApiVersion=this.metricsApiVersion=this.settingsApiVersion=this.templatesApiVersion="3.1-preview.1";this.badgeApiVersion=this.changesApiVersion=this.changesApiVersion_54572c7b=this.controllersApiVersion=this.definitionsApiVersion=this.logsApiVersion=this.optionsApiVersion=this.reportApiVersion=this.resourceUsageApiVersion=this.revisionsApiVersion=this.tagsApiVersion=this.tagsApiVersion_6e6114b2=this.timelineApiVersion=this.workitemsApiVersion=this.workitemsApiVersion_5a21f5d2="3.1-preview.2";this.artifactsApiVersion=this.buildsApiVersion="3.1-preview.3"}return __extends(t,n),t}(o);t.BuildHttpClient3_1=s;h=function(n){function t(t,i){n.call(this,t,i);this.artifactsApiVersion=this.badgeApiVersion=this.buildsApiVersion=this.changesApiVersion_54572c7b=this.controllersApiVersion=this.definitionsApiVersion=this.logsApiVersion=this.optionsApiVersion=this.revisionsApiVersion=this.settingsApiVersion=this.tagsApiVersion=this.tagsApiVersion_6e6114b2=this.templatesApiVersion=this.timelineApiVersion=this.workitemsApiVersion_5a21f5d2="3.0";this.buildbadgeApiVersion=this.foldersApiVersion=this.metricsApiVersion="3.0-preview.1";this.changesApiVersion=this.reportApiVersion=this.resourceUsageApiVersion=this.workitemsApiVersion="3.0-preview.2"}return __extends(t,n),t}(o);t.BuildHttpClient3=h;l=function(n){function t(t,i){n.call(this,t,i);this.artifactsApiVersion=this.badgeApiVersion=this.controllersApiVersion=this.definitionsApiVersion=this.optionsApiVersion=this.revisionsApiVersion=this.settingsApiVersion=this.tagsApiVersion=this.tagsApiVersion_6e6114b2=this.templatesApiVersion=this.timelineApiVersion="2.3";this.buildbadgeApiVersion="2.3-preview.1";this.changesApiVersion=this.resourceUsageApiVersion=this.workitemsApiVersion="2.3-preview.2"}return __extends(t,n),t.prototype.getArtifact=function(n,t,i,r){var u={artifactName:t,definitionType:r};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"1db06c96-014e-44e1-ac91-90b2d4b3e984",resource:"artifacts",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{artifactName}",routeValues:{project:i,buildId:n},queryParams:u,apiVersion:"2.3"})},t.prototype.getArtifactContentZip=function(n,t,i,r){var u={artifactName:t,definitionType:r};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"build",locationId:"1db06c96-014e-44e1-ac91-90b2d4b3e984",resource:"artifacts",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{artifactName}",routeValues:{project:i,buildId:n},queryParams:u,apiVersion:"2.3"})},t.prototype.getArtifacts=function(n,t,i){var r={definitionType:i};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"1db06c96-014e-44e1-ac91-90b2d4b3e984",resource:"artifacts",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{artifactName}",responseIsCollection:!0,routeValues:{project:t,buildId:n},queryParams:r,apiVersion:"2.3"})},t.prototype.deleteBuild=function(n,t,i){var r={type:i};return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",routeValues:{project:t,buildId:n},queryParams:r,apiVersion:"2.3"})},t.prototype.getBuild=function(n,t,r,u){var f={propertyFilters:r,type:u};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",responseType:i.TypeInfo.Build,routeValues:{project:t,buildId:n},queryParams:f,apiVersion:"2.3"})},t.prototype.getBuilds=function(n,t,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d){var g={definitions:t&&t.join(","),queues:r&&r.join(","),buildNumber:u,minFinishTime:f,maxFinishTime:e,requestedFor:o,reasonFilter:s,statusFilter:h,resultFilter:c,tagFilters:l&&l.join(","),properties:a&&a.join(","),type:v,$top:y,continuationToken:p,maxBuildsPerDefinition:w,deletedFilter:b,queryOrder:k,branchName:d};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",responseType:i.TypeInfo.Build,responseIsCollection:!0,routeValues:{project:n},queryParams:g,apiVersion:"2.3"})},t.prototype.queueBuild=function(n,t,r,u,f){var e={ignoreWarnings:r,checkInTicket:u,type:f};return this._beginRequest({httpMethod:"POST",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",requestType:i.TypeInfo.Build,responseType:i.TypeInfo.Build,routeValues:{project:t},queryParams:e,apiVersion:"2.3",data:n})},t.prototype.updateBuild=function(n,t,r,u){var f={type:u};return this._beginRequest({httpMethod:"PATCH",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",requestType:i.TypeInfo.Build,responseType:i.TypeInfo.Build,routeValues:{project:r,buildId:t},queryParams:f,apiVersion:"2.3",data:n})},t.prototype.getBuildChanges=function(n,t,r,u,f,e){var o={continuationToken:r,$top:u,includeSourceChange:f,type:e};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"54572c7b-bbd3-45d4-80dc-28be08941620",resource:"changes",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",responseType:i.TypeInfo.Change,responseIsCollection:!0,routeValues:{project:n,buildId:t},queryParams:o,apiVersion:"2.3"})},t.prototype.getDefinition=function(n,t,r,u,f){var e={revision:r,propertyFilters:u&&u.join(","),type:f};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"dbeaf647-6167-421a-bda9-c9327b25e2e6",resource:"definitions",routeTemplate:"{project}/_apis/build/{resource}/{definitionId}",responseType:i.TypeInfo.DefinitionReference,routeValues:{project:t,definitionId:n},queryParams:e,apiVersion:"2.3"})},t.prototype.getDefinitions=function(n,t,r,u,f,e,o){var s={name:t,type:r,repositoryId:u,repositoryType:f,queryOrder:e,$top:o};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"dbeaf647-6167-421a-bda9-c9327b25e2e6",resource:"definitions",routeTemplate:"{project}/_apis/build/{resource}/{definitionId}",responseType:i.TypeInfo.DefinitionReference,responseIsCollection:!0,routeValues:{project:n},queryParams:s,apiVersion:"2.3"})},t.prototype.getBuildLog=function(n,t,i,r,u,f){var e={startLine:r,endLine:u,type:f};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"build",locationId:"35a80daf-7f30-45fc-86e8-6b813d9c90df",resource:"logs",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{logId}",routeValues:{project:n,buildId:t,logId:i},queryParams:e,apiVersion:"2.3"})},t.prototype.getBuildLogJson=function(n,t,i,r,u,f){var e={startLine:r,endLine:u,type:f};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"35a80daf-7f30-45fc-86e8-6b813d9c90df",resource:"logs",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{logId}",responseIsCollection:!0,routeValues:{project:n,buildId:t,logId:i},queryParams:e,apiVersion:"2.3"})},t.prototype.getBuildLogs=function(n,t,r){var u={type:r};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"35a80daf-7f30-45fc-86e8-6b813d9c90df",resource:"logs",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{logId}",responseType:i.TypeInfo.BuildLog,responseIsCollection:!0,routeValues:{project:n,buildId:t},queryParams:u,apiVersion:"2.3"})},t.prototype.getBuildLogStream=function(n,t,i,r,u,f){var e={startLine:r,endLine:u,type:f};return this._beginRequest({httpMethod:"GET",httpResponseType:"text/plain",area:"build",locationId:"35a80daf-7f30-45fc-86e8-6b813d9c90df",resource:"logs",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{logId}",routeValues:{project:n,buildId:t,logId:i},queryParams:e,apiVersion:"2.3"})},t.prototype.getBuildLogsZip=function(n,t,i){var r={type:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"build",locationId:"35a80daf-7f30-45fc-86e8-6b813d9c90df",resource:"logs",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{logId}",routeValues:{project:n,buildId:t},queryParams:r,apiVersion:"2.3"})},t.prototype.createQueue=function(n){return this._beginRequest({httpMethod:"POST",area:"build",locationId:"09f2a4b8-08c9-4991-85c3-d698937568be",resource:"queues",routeTemplate:"_apis/build/{resource}/{controllerId}",apiVersion:"2.3",data:n})},t.prototype.deleteQueue=function(n){var t={id:n};return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"build",locationId:"09f2a4b8-08c9-4991-85c3-d698937568be",resource:"queues",routeTemplate:"_apis/build/{resource}/{controllerId}",queryParams:t,apiVersion:"2.3"})},t.prototype.getAgentPoolQueue=function(n){return this._beginRequest({httpMethod:"GET",area:"build",locationId:"09f2a4b8-08c9-4991-85c3-d698937568be",resource:"queues",routeTemplate:"_apis/build/{resource}/{controllerId}",routeValues:{controllerId:n},apiVersion:"2.3"})},t.prototype.getQueues=function(n){var t={name:n};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"09f2a4b8-08c9-4991-85c3-d698937568be",resource:"queues",routeTemplate:"_apis/build/{resource}/{controllerId}",responseIsCollection:!0,queryParams:t,apiVersion:"2.3"})},t.prototype.getBuildReport=function(n,t,i,r){var u={type:i,definitionType:r};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"45bcaa88-67e1-4042-a035-56d3b4a7d44c",resource:"report",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",routeValues:{project:n,buildId:t},queryParams:u,apiVersion:"2.3-preview.2"})},t.prototype.getBuildReportHtmlContent=function(n,t,i,r){var u={type:i,definitionType:r};return this._beginRequest({httpMethod:"GET",httpResponseType:"text/html",area:"build",locationId:"45bcaa88-67e1-4042-a035-56d3b4a7d44c",resource:"report",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",routeValues:{project:n,buildId:t},queryParams:u,apiVersion:"2.3-preview.2"})},t.prototype.getBuildWorkItemsRefs=function(n,t,i,r){var u={$top:i,type:r};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"5a21f5d2-5642-47e4-a0bd-1356e6731bee",resource:"workitems",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",responseIsCollection:!0,routeValues:{project:n,buildId:t},queryParams:u,apiVersion:"2.3"})},t.prototype.getBuildWorkItemsRefsFromCommits=function(n,t,i,r,u){var f={$top:r,type:u};return this._beginRequest({httpMethod:"POST",area:"build",locationId:"5a21f5d2-5642-47e4-a0bd-1356e6731bee",resource:"workitems",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",responseIsCollection:!0,routeValues:{project:t,buildId:i},queryParams:f,apiVersion:"2.3",data:n})},t}(e);t.BuildHttpClient2_3=l;a=function(n){function t(t,i){n.call(this,t,i);this.artifactsApiVersion=this.badgeApiVersion=this.controllersApiVersion=this.definitionsApiVersion=this.optionsApiVersion=this.revisionsApiVersion=this.settingsApiVersion=this.tagsApiVersion=this.tagsApiVersion_6e6114b2=this.templatesApiVersion=this.timelineApiVersion="2.2";this.buildbadgeApiVersion="2.2-preview.1";this.changesApiVersion=this.resourceUsageApiVersion=this.workitemsApiVersion="2.2-preview.2"}return __extends(t,n),t.prototype.getArtifact=function(n,t,i,r){var u={artifactName:t,definitionType:r};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"1db06c96-014e-44e1-ac91-90b2d4b3e984",resource:"artifacts",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{artifactName}",routeValues:{project:i,buildId:n},queryParams:u,apiVersion:"2.2"})},t.prototype.getArtifactContentZip=function(n,t,i,r){var u={artifactName:t,definitionType:r};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"build",locationId:"1db06c96-014e-44e1-ac91-90b2d4b3e984",resource:"artifacts",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{artifactName}",routeValues:{project:i,buildId:n},queryParams:u,apiVersion:"2.2"})},t.prototype.getArtifacts=function(n,t,i){var r={definitionType:i};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"1db06c96-014e-44e1-ac91-90b2d4b3e984",resource:"artifacts",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{artifactName}",responseIsCollection:!0,routeValues:{project:t,buildId:n},queryParams:r,apiVersion:"2.2"})},t.prototype.deleteBuild=function(n,t,i){var r={type:i};return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",routeValues:{project:t,buildId:n},queryParams:r,apiVersion:"2.2"})},t.prototype.getBuild=function(n,t,r,u){var f={propertyFilters:r,type:u};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",responseType:i.TypeInfo.Build,routeValues:{project:t,buildId:n},queryParams:f,apiVersion:"2.2"})},t.prototype.getBuilds=function(n,t,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d){var g={definitions:t&&t.join(","),queues:r&&r.join(","),buildNumber:u,minFinishTime:f,maxFinishTime:e,requestedFor:o,reasonFilter:s,statusFilter:h,resultFilter:c,tagFilters:l&&l.join(","),properties:a&&a.join(","),type:v,$top:y,continuationToken:p,maxBuildsPerDefinition:w,deletedFilter:b,queryOrder:k,branchName:d};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",responseType:i.TypeInfo.Build,responseIsCollection:!0,routeValues:{project:n},queryParams:g,apiVersion:"2.2"})},t.prototype.queueBuild=function(n,t,r,u,f){var e={ignoreWarnings:r,checkInTicket:u,type:f};return this._beginRequest({httpMethod:"POST",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",requestType:i.TypeInfo.Build,responseType:i.TypeInfo.Build,routeValues:{project:t},queryParams:e,apiVersion:"2.2",data:n})},t.prototype.updateBuild=function(n,t,r,u){var f={type:u};return this._beginRequest({httpMethod:"PATCH",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",requestType:i.TypeInfo.Build,responseType:i.TypeInfo.Build,routeValues:{project:r,buildId:t},queryParams:f,apiVersion:"2.2",data:n})},t.prototype.getBuildChanges=function(n,t,r,u,f,e){var o={continuationToken:r,$top:u,includeSourceChange:f,type:e};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"54572c7b-bbd3-45d4-80dc-28be08941620",resource:"changes",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",responseType:i.TypeInfo.Change,responseIsCollection:!0,routeValues:{project:n,buildId:t},queryParams:o,apiVersion:"2.2"})},t.prototype.getDefinition=function(n,t,r,u,f){var e={revision:r,propertyFilters:u&&u.join(","),type:f};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"dbeaf647-6167-421a-bda9-c9327b25e2e6",resource:"definitions",routeTemplate:"{project}/_apis/build/{resource}/{definitionId}",responseType:i.TypeInfo.DefinitionReference,routeValues:{project:t,definitionId:n},queryParams:e,apiVersion:"2.2"})},t.prototype.getDefinitions=function(n,t,r,u,f,e,o){var s={name:t,type:r,repositoryId:u,repositoryType:f,queryOrder:e,$top:o};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"dbeaf647-6167-421a-bda9-c9327b25e2e6",resource:"definitions",routeTemplate:"{project}/_apis/build/{resource}/{definitionId}",responseType:i.TypeInfo.DefinitionReference,responseIsCollection:!0,routeValues:{project:n},queryParams:s,apiVersion:"2.2"})},t.prototype.getBuildDeployments=function(n,t){return this._beginRequest({httpMethod:"GET",area:"build",locationId:"f275be9a-556a-4ee9-b72f-f9c8370ccaee",resource:"deployments",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",responseIsCollection:!0,routeValues:{project:n,buildId:t},apiVersion:"2.2"})},t.prototype.getBuildLog=function(n,t,i,r,u,f){var e={startLine:r,endLine:u,type:f};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"build",locationId:"35a80daf-7f30-45fc-86e8-6b813d9c90df",resource:"logs",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{logId}",routeValues:{project:n,buildId:t,logId:i},queryParams:e,apiVersion:"2.2"})},t.prototype.getBuildLogs=function(n,t,r){var u={type:r};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"35a80daf-7f30-45fc-86e8-6b813d9c90df",resource:"logs",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{logId}",responseType:i.TypeInfo.BuildLog,responseIsCollection:!0,routeValues:{project:n,buildId:t},queryParams:u,apiVersion:"2.2"})},t.prototype.getBuildLogsZip=function(n,t,i){var r={type:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"build",locationId:"35a80daf-7f30-45fc-86e8-6b813d9c90df",resource:"logs",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{logId}",routeValues:{project:n,buildId:t},queryParams:r,apiVersion:"2.2"})},t.prototype.createQueue=function(n){return this._beginRequest({httpMethod:"POST",area:"build",locationId:"09f2a4b8-08c9-4991-85c3-d698937568be",resource:"queues",routeTemplate:"_apis/build/{resource}/{controllerId}",apiVersion:"2.2",data:n})},t.prototype.deleteQueue=function(n){var t={id:n};return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"build",locationId:"09f2a4b8-08c9-4991-85c3-d698937568be",resource:"queues",routeTemplate:"_apis/build/{resource}/{controllerId}",queryParams:t,apiVersion:"2.2"})},t.prototype.getAgentPoolQueue=function(n){return this._beginRequest({httpMethod:"GET",area:"build",locationId:"09f2a4b8-08c9-4991-85c3-d698937568be",resource:"queues",routeTemplate:"_apis/build/{resource}/{controllerId}",routeValues:{controllerId:n},apiVersion:"2.2"})},t.prototype.getQueues=function(n){var t={name:n};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"09f2a4b8-08c9-4991-85c3-d698937568be",resource:"queues",routeTemplate:"_apis/build/{resource}/{controllerId}",responseIsCollection:!0,queryParams:t,apiVersion:"2.2"})},t.prototype.getBuildReport=function(n,t,i,r){var u={type:i,definitionType:r};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"45bcaa88-67e1-4042-a035-56d3b4a7d44c",resource:"report",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",routeValues:{project:n,buildId:t},queryParams:u,apiVersion:"2.2-preview.2"})},t.prototype.getBuildReportHtmlContent=function(n,t,i,r){var u={type:i,definitionType:r};return this._beginRequest({httpMethod:"GET",httpResponseType:"text/html",area:"build",locationId:"45bcaa88-67e1-4042-a035-56d3b4a7d44c",resource:"report",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",routeValues:{project:n,buildId:t},queryParams:u,apiVersion:"2.2-preview.2"})},t.prototype.getBuildWorkItemsRefs=function(n,t,i,r){var u={$top:i,type:r};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"5a21f5d2-5642-47e4-a0bd-1356e6731bee",resource:"workitems",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",responseIsCollection:!0,routeValues:{project:n,buildId:t},queryParams:u,apiVersion:"2.2"})},t.prototype.getBuildWorkItemsRefsFromCommits=function(n,t,i,r,u){var f={$top:r,type:u};return this._beginRequest({httpMethod:"POST",area:"build",locationId:"5a21f5d2-5642-47e4-a0bd-1356e6731bee",resource:"workitems",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",responseIsCollection:!0,routeValues:{project:t,buildId:i},queryParams:f,apiVersion:"2.2",data:n})},t}(e);t.BuildHttpClient2_2=a;v=function(n){function t(t,i){n.call(this,t,i);this.artifactsApiVersion=this.badgeApiVersion=this.controllersApiVersion=this.definitionsApiVersion=this.optionsApiVersion=this.revisionsApiVersion=this.settingsApiVersion=this.tagsApiVersion=this.tagsApiVersion_6e6114b2=this.templatesApiVersion=this.timelineApiVersion="2.1";this.buildbadgeApiVersion="2.1-preview.1";this.changesApiVersion=this.resourceUsageApiVersion=this.workitemsApiVersion="2.1-preview.2"}return __extends(t,n),t.prototype.getArtifact=function(n,t,i,r){var u={artifactName:t,definitionType:r};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"1db06c96-014e-44e1-ac91-90b2d4b3e984",resource:"artifacts",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{artifactName}",routeValues:{project:i,buildId:n},queryParams:u,apiVersion:"2.1"})},t.prototype.getArtifactContentZip=function(n,t,i,r){var u={artifactName:t,definitionType:r};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"build",locationId:"1db06c96-014e-44e1-ac91-90b2d4b3e984",resource:"artifacts",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{artifactName}",routeValues:{project:i,buildId:n},queryParams:u,apiVersion:"2.1"})},t.prototype.getArtifacts=function(n,t,i){var r={definitionType:i};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"1db06c96-014e-44e1-ac91-90b2d4b3e984",resource:"artifacts",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{artifactName}",responseIsCollection:!0,routeValues:{project:t,buildId:n},queryParams:r,apiVersion:"2.1"})},t.prototype.deleteBuild=function(n,t,i){var r={type:i};return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",routeValues:{project:t,buildId:n},queryParams:r,apiVersion:"2.1"})},t.prototype.getBuild=function(n,t,r,u){var f={propertyFilters:r,type:u};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",responseType:i.TypeInfo.Build,routeValues:{project:t,buildId:n},queryParams:f,apiVersion:"2.1"})},t.prototype.getBuilds=function(n,t,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d){var g={definitions:t&&t.join(","),queues:r&&r.join(","),buildNumber:u,minFinishTime:f,maxFinishTime:e,requestedFor:o,reasonFilter:s,statusFilter:h,resultFilter:c,tagFilters:l&&l.join(","),properties:a&&a.join(","),type:v,$top:y,continuationToken:p,maxBuildsPerDefinition:w,deletedFilter:b,queryOrder:k,branchName:d};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",responseType:i.TypeInfo.Build,responseIsCollection:!0,routeValues:{project:n},queryParams:g,apiVersion:"2.1"})},t.prototype.queueBuild=function(n,t,r,u,f){var e={ignoreWarnings:r,checkInTicket:u,type:f};return this._beginRequest({httpMethod:"POST",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",requestType:i.TypeInfo.Build,responseType:i.TypeInfo.Build,routeValues:{project:t},queryParams:e,apiVersion:"2.1",data:n})},t.prototype.updateBuild=function(n,t,r,u){var f={type:u};return this._beginRequest({httpMethod:"PATCH",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",requestType:i.TypeInfo.Build,responseType:i.TypeInfo.Build,routeValues:{project:r,buildId:t},queryParams:f,apiVersion:"2.1",data:n})},t.prototype.getBuildChanges=function(n,t,r,u,f,e){var o={continuationToken:r,$top:u,includeSourceChange:f,type:e};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"54572c7b-bbd3-45d4-80dc-28be08941620",resource:"changes",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",responseType:i.TypeInfo.Change,responseIsCollection:!0,routeValues:{project:n,buildId:t},queryParams:o,apiVersion:"2.1"})},t.prototype.getDefinition=function(n,t,r,u,f){var e={revision:r,propertyFilters:u&&u.join(","),type:f};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"dbeaf647-6167-421a-bda9-c9327b25e2e6",resource:"definitions",routeTemplate:"{project}/_apis/build/{resource}/{definitionId}",responseType:i.TypeInfo.DefinitionReference,routeValues:{project:t,definitionId:n},queryParams:e,apiVersion:"2.1"})},t.prototype.getDefinitions=function(n,t,r,u,f,e,o){var s={name:t,type:r,repositoryId:u,repositoryType:f,queryOrder:e,$top:o};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"dbeaf647-6167-421a-bda9-c9327b25e2e6",resource:"definitions",routeTemplate:"{project}/_apis/build/{resource}/{definitionId}",responseType:i.TypeInfo.DefinitionReference,responseIsCollection:!0,routeValues:{project:n},queryParams:s,apiVersion:"2.1"})},t.prototype.getBuildDeployments=function(n,t){return this._beginRequest({httpMethod:"GET",area:"build",locationId:"f275be9a-556a-4ee9-b72f-f9c8370ccaee",resource:"deployments",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",responseIsCollection:!0,routeValues:{project:n,buildId:t},apiVersion:"2.1"})},t.prototype.getBuildLog=function(n,t,i,r,u,f){var e={startLine:r,endLine:u,type:f};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"build",locationId:"35a80daf-7f30-45fc-86e8-6b813d9c90df",resource:"logs",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{logId}",routeValues:{project:n,buildId:t,logId:i},queryParams:e,apiVersion:"2.1"})},t.prototype.getBuildLogs=function(n,t,r){var u={type:r};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"35a80daf-7f30-45fc-86e8-6b813d9c90df",resource:"logs",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{logId}",responseType:i.TypeInfo.BuildLog,responseIsCollection:!0,routeValues:{project:n,buildId:t},queryParams:u,apiVersion:"2.1"})},t.prototype.getBuildLogsZip=function(n,t,i){var r={type:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"build",locationId:"35a80daf-7f30-45fc-86e8-6b813d9c90df",resource:"logs",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{logId}",routeValues:{project:n,buildId:t},queryParams:r,apiVersion:"2.1"})},t.prototype.createQueue=function(n){return this._beginRequest({httpMethod:"POST",area:"build",locationId:"09f2a4b8-08c9-4991-85c3-d698937568be",resource:"queues",routeTemplate:"_apis/build/{resource}/{controllerId}",apiVersion:"2.1",data:n})},t.prototype.deleteQueue=function(n){var t={id:n};return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"build",locationId:"09f2a4b8-08c9-4991-85c3-d698937568be",resource:"queues",routeTemplate:"_apis/build/{resource}/{controllerId}",queryParams:t,apiVersion:"2.1"})},t.prototype.getAgentPoolQueue=function(n){return this._beginRequest({httpMethod:"GET",area:"build",locationId:"09f2a4b8-08c9-4991-85c3-d698937568be",resource:"queues",routeTemplate:"_apis/build/{resource}/{controllerId}",routeValues:{controllerId:n},apiVersion:"2.1"})},t.prototype.getQueues=function(n){var t={name:n};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"09f2a4b8-08c9-4991-85c3-d698937568be",resource:"queues",routeTemplate:"_apis/build/{resource}/{controllerId}",responseIsCollection:!0,queryParams:t,apiVersion:"2.1"})},t.prototype.getBuildWorkItemsRefs=function(n,t,i,r){var u={$top:i,type:r};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"5a21f5d2-5642-47e4-a0bd-1356e6731bee",resource:"workitems",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",responseIsCollection:!0,routeValues:{project:n,buildId:t},queryParams:u,apiVersion:"2.1"})},t.prototype.getBuildWorkItemsRefsFromCommits=function(n,t,i,r,u){var f={$top:r,type:u};return this._beginRequest({httpMethod:"POST",area:"build",locationId:"5a21f5d2-5642-47e4-a0bd-1356e6731bee",resource:"workitems",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",responseIsCollection:!0,routeValues:{project:t,buildId:i},queryParams:f,apiVersion:"2.1",data:n})},t}(e);t.BuildHttpClient2_1=v;y=function(n){function t(t,i){n.call(this,t,i);this.artifactsApiVersion=this.badgeApiVersion=this.controllersApiVersion=this.definitionsApiVersion=this.optionsApiVersion=this.revisionsApiVersion=this.settingsApiVersion=this.tagsApiVersion=this.tagsApiVersion_6e6114b2=this.templatesApiVersion=this.timelineApiVersion="2.0";this.buildbadgeApiVersion="2.0-preview.1";this.resourceUsageApiVersion="2.0-preview.2"}return __extends(t,n),t.prototype.getArtifact=function(n,t,i,r){var u={artifactName:t,definitionType:r};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"1db06c96-014e-44e1-ac91-90b2d4b3e984",resource:"artifacts",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{artifactName}",routeValues:{project:i,buildId:n},queryParams:u,apiVersion:"2.0"})},t.prototype.getArtifactContentZip=function(n,t,i,r){var u={artifactName:t,definitionType:r};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"build",locationId:"1db06c96-014e-44e1-ac91-90b2d4b3e984",resource:"artifacts",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{artifactName}",routeValues:{project:i,buildId:n},queryParams:u,apiVersion:"2.0"})},t.prototype.getArtifacts=function(n,t,i){var r={definitionType:i};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"1db06c96-014e-44e1-ac91-90b2d4b3e984",resource:"artifacts",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{artifactName}",responseIsCollection:!0,routeValues:{project:t,buildId:n},queryParams:r,apiVersion:"2.0"})},t.prototype.deleteBuild=function(n,t,i){var r={type:i};return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",routeValues:{project:t,buildId:n},queryParams:r,apiVersion:"2.0"})},t.prototype.getBuild=function(n,t,r,u){var f={propertyFilters:r,type:u};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",responseType:i.TypeInfo.Build,routeValues:{project:t,buildId:n},queryParams:f,apiVersion:"2.0"})},t.prototype.getBuilds=function(n,t,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d){var g={definitions:t&&t.join(","),queues:r&&r.join(","),buildNumber:u,minFinishTime:f,maxFinishTime:e,requestedFor:o,reasonFilter:s,statusFilter:h,resultFilter:c,tagFilters:l&&l.join(","),properties:a&&a.join(","),type:v,$top:y,continuationToken:p,maxBuildsPerDefinition:w,deletedFilter:b,queryOrder:k,branchName:d};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",responseType:i.TypeInfo.Build,responseIsCollection:!0,routeValues:{project:n},queryParams:g,apiVersion:"2.0"})},t.prototype.queueBuild=function(n,t,r,u,f){var e={ignoreWarnings:r,checkInTicket:u,type:f};return this._beginRequest({httpMethod:"POST",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",requestType:i.TypeInfo.Build,responseType:i.TypeInfo.Build,routeValues:{project:t},queryParams:e,apiVersion:"2.0",data:n})},t.prototype.updateBuild=function(n,t,r,u){var f={type:u};return this._beginRequest({httpMethod:"PATCH",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",requestType:i.TypeInfo.Build,responseType:i.TypeInfo.Build,routeValues:{project:r,buildId:t},queryParams:f,apiVersion:"2.0",data:n})},t.prototype.getBuildChanges=function(n,t,r,u,f,e){var o={continuationToken:r,$top:u,includeSourceChange:f,type:e};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"54572c7b-bbd3-45d4-80dc-28be08941620",resource:"changes",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",responseType:i.TypeInfo.Change,responseIsCollection:!0,routeValues:{project:n,buildId:t},queryParams:o,apiVersion:"2.0"})},t.prototype.getDefinition=function(n,t,r,u,f){var e={revision:r,propertyFilters:u&&u.join(","),type:f};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"dbeaf647-6167-421a-bda9-c9327b25e2e6",resource:"definitions",routeTemplate:"{project}/_apis/build/{resource}/{definitionId}",responseType:i.TypeInfo.DefinitionReference,routeValues:{project:t,definitionId:n},queryParams:e,apiVersion:"2.0"})},t.prototype.getDefinitions=function(n,t,r,u,f,e,o){var s={name:t,type:r,repositoryId:u,repositoryType:f,queryOrder:e,$top:o};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"dbeaf647-6167-421a-bda9-c9327b25e2e6",resource:"definitions",routeTemplate:"{project}/_apis/build/{resource}/{definitionId}",responseType:i.TypeInfo.DefinitionReference,responseIsCollection:!0,routeValues:{project:n},queryParams:s,apiVersion:"2.0"})},t.prototype.getBuildDeployments=function(n,t){return this._beginRequest({httpMethod:"GET",area:"build",locationId:"f275be9a-556a-4ee9-b72f-f9c8370ccaee",resource:"deployments",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",responseIsCollection:!0,routeValues:{project:n,buildId:t},apiVersion:"2.0"})},t.prototype.getBuildLog=function(n,t,i,r,u,f){var e={startLine:r,endLine:u,type:f};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"build",locationId:"35a80daf-7f30-45fc-86e8-6b813d9c90df",resource:"logs",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{logId}",routeValues:{project:n,buildId:t,logId:i},queryParams:e,apiVersion:"2.0"})},t.prototype.getBuildLogs=function(n,t,r){var u={type:r};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"35a80daf-7f30-45fc-86e8-6b813d9c90df",resource:"logs",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{logId}",responseType:i.TypeInfo.BuildLog,responseIsCollection:!0,routeValues:{project:n,buildId:t},queryParams:u,apiVersion:"2.0"})},t.prototype.getBuildLogsZip=function(n,t,i){var r={type:i};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"build",locationId:"35a80daf-7f30-45fc-86e8-6b813d9c90df",resource:"logs",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{logId}",routeValues:{project:n,buildId:t},queryParams:r,apiVersion:"2.0"})},t.prototype.createQueue=function(n){return this._beginRequest({httpMethod:"POST",area:"build",locationId:"09f2a4b8-08c9-4991-85c3-d698937568be",resource:"queues",routeTemplate:"_apis/build/{resource}/{controllerId}",apiVersion:"2.0",data:n})},t.prototype.deleteQueue=function(n){var t={id:n};return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"build",locationId:"09f2a4b8-08c9-4991-85c3-d698937568be",resource:"queues",routeTemplate:"_apis/build/{resource}/{controllerId}",queryParams:t,apiVersion:"2.0"})},t.prototype.getAgentPoolQueue=function(n){return this._beginRequest({httpMethod:"GET",area:"build",locationId:"09f2a4b8-08c9-4991-85c3-d698937568be",resource:"queues",routeTemplate:"_apis/build/{resource}/{controllerId}",routeValues:{controllerId:n},apiVersion:"2.0"})},t.prototype.getQueues=function(n){var t={name:n};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"09f2a4b8-08c9-4991-85c3-d698937568be",resource:"queues",routeTemplate:"_apis/build/{resource}/{controllerId}",responseIsCollection:!0,queryParams:t,apiVersion:"2.0"})},t.prototype.getBuildWorkItemsRefs=function(n,t,i,r){var u={$top:i,type:r};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"5a21f5d2-5642-47e4-a0bd-1356e6731bee",resource:"workitems",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",responseIsCollection:!0,routeValues:{project:n,buildId:t},queryParams:u,apiVersion:"2.0"})},t.prototype.getBuildWorkItemsRefsFromCommits=function(n,t,i,r,u){var f={$top:r,type:u};return this._beginRequest({httpMethod:"POST",area:"build",locationId:"5a21f5d2-5642-47e4-a0bd-1356e6731bee",resource:"workitems",routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}",responseIsCollection:!0,routeValues:{project:t,buildId:i},queryParams:f,apiVersion:"2.0",data:n})},t}(c);t.BuildHttpClient2=y;w=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t}(s);t.BuildHttpClient=w;p={"3.1":s,"3.0":h,"2.3":l,"2.2":a,"2.1":v,"2.0":y};t.getClient=b});
define("TFS/DistributedTask/TaskRestClient",["require","exports","TFS/DistributedTask/Contracts","VSS/Service","VSS/WebApi/RestClient"],function(n,t,i,r,u){"use strict";function p(n){return window.VSS&&window.VSS.VssSDKRestVersion&&v[window.VSS.VssSDKRestVersion]?r.getClient(v[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):r.getClient(o,undefined,undefined,undefined,n)}var s=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.getTimelines=function(n,t,r){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"83597576-cc2c-453c-bea6-2882ae6a1653",resource:"timelines",routeTemplate:"{scopeIdentifier}/_apis/{area}/hubs/{hubName}/plans/{planId}/{resource}/{timelineId}",responseType:i.TypeInfo.Timeline,responseIsCollection:!0,routeValues:{scopeIdentifier:n,hubName:t,planId:r},apiVersion:this.timelinesApiVersion})},t.prototype.getTimeline=function(n,t,r,u,f,e){var o={changeId:f,includeRecords:e};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"83597576-cc2c-453c-bea6-2882ae6a1653",resource:"timelines",routeTemplate:"{scopeIdentifier}/_apis/{area}/hubs/{hubName}/plans/{planId}/{resource}/{timelineId}",responseType:i.TypeInfo.Timeline,routeValues:{scopeIdentifier:n,hubName:t,planId:r,timelineId:u},queryParams:o,apiVersion:this.timelinesApiVersion})},t.prototype.deleteTimeline=function(n,t,i,r){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"distributedtask",locationId:"83597576-cc2c-453c-bea6-2882ae6a1653",resource:"timelines",routeTemplate:"{scopeIdentifier}/_apis/{area}/hubs/{hubName}/plans/{planId}/{resource}/{timelineId}",routeValues:{scopeIdentifier:n,hubName:t,planId:i,timelineId:r},apiVersion:this.timelinesApiVersion})},t.prototype.createTimeline=function(n,t,r,u){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"83597576-cc2c-453c-bea6-2882ae6a1653",resource:"timelines",routeTemplate:"{scopeIdentifier}/_apis/{area}/hubs/{hubName}/plans/{planId}/{resource}/{timelineId}",requestType:i.TypeInfo.Timeline,responseType:i.TypeInfo.Timeline,routeValues:{scopeIdentifier:t,hubName:r,planId:u},apiVersion:this.timelinesApiVersion,data:n})},t.prototype.updateRecords=function(n,t,r,u,f){return this._beginRequest({httpMethod:"PATCH",area:"distributedtask",locationId:"8893bc5b-35b2-4be7-83cb-99e683551db4",resource:"records",routeTemplate:"{scopeIdentifier}/_apis/{area}/hubs/{hubName}/plans/{planId}/timelines/{timelineId}/{resource}/{recordId}",responseType:i.TypeInfo.TimelineRecord,responseIsCollection:!0,routeValues:{scopeIdentifier:t,hubName:r,planId:u,timelineId:f},apiVersion:this.recordsApiVersion,data:n})},t.prototype.getRecords=function(n,t,r,u,f){var e={changeId:f};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"8893bc5b-35b2-4be7-83cb-99e683551db4",resource:"records",routeTemplate:"{scopeIdentifier}/_apis/{area}/hubs/{hubName}/plans/{planId}/timelines/{timelineId}/{resource}/{recordId}",responseType:i.TypeInfo.TimelineRecord,responseIsCollection:!0,routeValues:{scopeIdentifier:n,hubName:t,planId:r,timelineId:u},queryParams:e,apiVersion:this.recordsApiVersion})},t.prototype.getPlan=function(n,t,r){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"5cecd946-d704-471e-a45f-3b4064fcfaba",resource:"plans",routeTemplate:"{scopeIdentifier}/_apis/{area}/hubs/{hubName}/{resource}/{planId}",responseType:i.TypeInfo.TaskOrchestrationPlan,routeValues:{scopeIdentifier:n,hubName:t,planId:r},apiVersion:this.plansApiVersion})},t.prototype.getLogs=function(n,t,r){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"46f5667d-263a-4684-91b1-dff7fdcf64e2",resource:"logs",routeTemplate:"{scopeIdentifier}/_apis/{area}/hubs/{hubName}/plans/{planId}/{resource}/{logId}",responseType:i.TypeInfo.TaskLog,responseIsCollection:!0,routeValues:{scopeIdentifier:n,hubName:t,planId:r},apiVersion:this.logsApiVersion})},t.prototype.getLog=function(n,t,i,r,u,f){var e={startLine:u,endLine:f};return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"46f5667d-263a-4684-91b1-dff7fdcf64e2",resource:"logs",routeTemplate:"{scopeIdentifier}/_apis/{area}/hubs/{hubName}/plans/{planId}/{resource}/{logId}",responseIsCollection:!0,routeValues:{scopeIdentifier:n,hubName:t,planId:i,logId:r},queryParams:e,apiVersion:this.logsApiVersion})},t.prototype.createLog=function(n,t,r,u){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"46f5667d-263a-4684-91b1-dff7fdcf64e2",resource:"logs",routeTemplate:"{scopeIdentifier}/_apis/{area}/hubs/{hubName}/plans/{planId}/{resource}/{logId}",requestType:i.TypeInfo.TaskLog,responseType:i.TypeInfo.TaskLog,routeValues:{scopeIdentifier:t,hubName:r,planId:u},apiVersion:this.logsApiVersion,data:n})},t.prototype.appendLogContent=function(n,t,r,u,f){return this._beginRequest({httpMethod:"POST",area:"distributedtask",locationId:"46f5667d-263a-4684-91b1-dff7fdcf64e2",resource:"logs",routeTemplate:"{scopeIdentifier}/_apis/{area}/hubs/{hubName}/plans/{planId}/{resource}/{logId}",responseType:i.TypeInfo.TaskLog,routeValues:{scopeIdentifier:t,hubName:r,planId:u,logId:f},customHeaders:{"Content-Type":"application/octet-stream"},apiVersion:this.logsApiVersion,data:n})},t.prototype.appendTimelineRecordFeed=function(n,t,i,r,u,f){return this._beginRequest({httpMethod:"POST",httpResponseType:"html",area:"distributedtask",locationId:"858983e4-19bd-4c5e-864c-507b59b58b12",resource:"feed",routeTemplate:"{scopeIdentifier}/_apis/{area}/hubs/{hubName}/plans/{planId}/timelines/{timelineId}/records/{recordId}/{resource}",routeValues:{scopeIdentifier:t,hubName:i,planId:r,timelineId:u,recordId:f},apiVersion:this.feedApiVersion,data:n})},t}(u.VssHttpClient),f,e,o,h,c,l,a,y,v;t.CommonMethods2To3_1=s;f=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.getAttachments=function(n,t,r,u,f,e){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"7898f959-9cdf-4096-b29e-7f293031629e",resource:"attachments",routeTemplate:"{scopeIdentifier}/_apis/{area}/hubs/{hubName}/plans/{planId}/timelines/{timelineId}/records/{recordId}/{resource}/{type}/{name}",responseType:i.TypeInfo.TaskAttachment,responseIsCollection:!0,routeValues:{scopeIdentifier:n,hubName:t,planId:r,timelineId:u,recordId:f,type:e},apiVersion:this.attachmentsApiVersion})},t.prototype.getAttachmentContent=function(n,t,i,r,u,f,e){return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"distributedtask",locationId:"7898f959-9cdf-4096-b29e-7f293031629e",resource:"attachments",routeTemplate:"{scopeIdentifier}/_apis/{area}/hubs/{hubName}/plans/{planId}/timelines/{timelineId}/records/{recordId}/{resource}/{type}/{name}",routeValues:{scopeIdentifier:n,hubName:t,planId:i,timelineId:r,recordId:u,type:f,name:e},apiVersion:this.attachmentsApiVersion})},t.prototype.getAttachment=function(n,t,r,u,f,e,o){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"7898f959-9cdf-4096-b29e-7f293031629e",resource:"attachments",routeTemplate:"{scopeIdentifier}/_apis/{area}/hubs/{hubName}/plans/{planId}/timelines/{timelineId}/records/{recordId}/{resource}/{type}/{name}",responseType:i.TypeInfo.TaskAttachment,routeValues:{scopeIdentifier:n,hubName:t,planId:r,timelineId:u,recordId:f,type:e,name:o},apiVersion:this.attachmentsApiVersion})},t.prototype.createAttachment=function(n,t,r,u,f,e,o,s){return this._beginRequest({httpMethod:"PUT",area:"distributedtask",locationId:"7898f959-9cdf-4096-b29e-7f293031629e",resource:"attachments",routeTemplate:"{scopeIdentifier}/_apis/{area}/hubs/{hubName}/plans/{planId}/timelines/{timelineId}/records/{recordId}/{resource}/{type}/{name}",responseType:i.TypeInfo.TaskAttachment,routeValues:{scopeIdentifier:t,hubName:r,planId:u,timelineId:f,recordId:e,type:o,name:s},customHeaders:{"Content-Type":"application/octet-stream"},apiVersion:this.attachmentsApiVersion,data:n})},t.prototype.getPlanAttachments=function(n,t,r,u){return this._beginRequest({httpMethod:"GET",area:"distributedtask",locationId:"eb55e5d6-2f30-4295-b5ed-38da50b1fc52",resource:"attachments",routeTemplate:"{scopeIdentifier}/_apis/{area}/hubs/{hubName}/plans/{planId}/{resource}/{type}",responseType:i.TypeInfo.TaskAttachment,responseIsCollection:!0,routeValues:{scopeIdentifier:n,hubName:t,planId:r,type:u},apiVersion:this.attachmentsApiVersion_eb55e5d6})},t}(s);t.CommonMethods2_1To3_1=f;e=function(n){function t(t,i){n.call(this,t,i);this.attachmentsApiVersion=this.attachmentsApiVersion_eb55e5d6=this.feedApiVersion=this.logsApiVersion=this.plansApiVersion=this.recordsApiVersion=this.timelinesApiVersion="3.1-preview.1"}return __extends(t,n),t}(f);t.TaskHttpClient3_1=e;o=function(n){function t(t,i){n.call(this,t,i);this.feedApiVersion=this.logsApiVersion=this.plansApiVersion=this.recordsApiVersion=this.timelinesApiVersion="3.0";this.attachmentsApiVersion=this.attachmentsApiVersion_eb55e5d6="3.0-preview.1"}return __extends(t,n),t}(f);t.TaskHttpClient3=o;h=function(n){function t(t,i){n.call(this,t,i);this.feedApiVersion=this.logsApiVersion=this.plansApiVersion=this.recordsApiVersion=this.timelinesApiVersion="2.3";this.attachmentsApiVersion=this.attachmentsApiVersion_eb55e5d6="2.3-preview.1"}return __extends(t,n),t}(f);t.TaskHttpClient2_3=h;c=function(n){function t(t,i){n.call(this,t,i);this.feedApiVersion=this.logsApiVersion=this.plansApiVersion=this.recordsApiVersion=this.timelinesApiVersion="2.2";this.attachmentsApiVersion=this.attachmentsApiVersion_eb55e5d6="2.2-preview.1"}return __extends(t,n),t}(f);t.TaskHttpClient2_2=c;l=function(n){function t(t,i){n.call(this,t,i);this.feedApiVersion=this.logsApiVersion=this.plansApiVersion=this.recordsApiVersion=this.timelinesApiVersion="2.1";this.attachmentsApiVersion=this.attachmentsApiVersion_eb55e5d6="2.1-preview.1"}return __extends(t,n),t}(f);t.TaskHttpClient2_1=l;a=function(n){function t(t,i){n.call(this,t,i);this.feedApiVersion=this.logsApiVersion=this.plansApiVersion=this.recordsApiVersion=this.timelinesApiVersion="2.0"}return __extends(t,n),t}(s);t.TaskHttpClient2=a;y=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t}(e);t.TaskHttpClient=y;v={"3.1":e,"3.0":o,"2.3":h,"2.2":c,"2.1":l,"2.0":a};t.getClient=p});
define("TFS/TestManagement/Contracts",["require","exports"],function(n,t){"use strict";var i,r,u,f,e,o,s,h,c,l,a,v,y;(function(n){n[n.GeneralAttachment=0]="GeneralAttachment";n[n.AfnStrip=1]="AfnStrip";n[n.BugFilingData=2]="BugFilingData";n[n.CodeCoverage=3]="CodeCoverage";n[n.IntermediateCollectorData=4]="IntermediateCollectorData";n[n.RunConfig=5]="RunConfig";n[n.TestImpactDetails=6]="TestImpactDetails";n[n.TmiTestRunDeploymentFiles=7]="TmiTestRunDeploymentFiles";n[n.TmiTestRunReverseDeploymentFiles=8]="TmiTestRunReverseDeploymentFiles";n[n.TmiTestResultDetail=9]="TmiTestResultDetail";n[n.TmiTestRunSummary=10]="TmiTestRunSummary";n[n.ConsoleLog=11]="ConsoleLog"})(t.AttachmentType||(t.AttachmentType={}));i=t.AttachmentType,function(n){n[n.Failed=2]="Failed";n[n.InProgress=1]="InProgress";n[n.Queued=0]="Queued";n[n.Succeeded=3]="Succeeded"}(t.CloneOperationState||(t.CloneOperationState={}));r=t.CloneOperationState,function(n){n[n.Modules=1]="Modules";n[n.Functions=2]="Functions";n[n.BlockData=4]="BlockData"}(t.CoverageQueryFlags||(t.CoverageQueryFlags={}));u=t.CoverageQueryFlags,function(n){n[n.None=0]="None";n[n.TestRun=1]="TestRun";n[n.TestResult=2]="TestResult";n[n.System=4]="System";n[n.All=7]="All"}(t.CustomTestFieldScope||(t.CustomTestFieldScope={}));f=t.CustomTestFieldScope,function(n){n[n.Bit=2]="Bit";n[n.DateTime=4]="DateTime";n[n.Int=8]="Int";n[n.Float=6]="Float";n[n.String=12]="String";n[n.Guid=14]="Guid"}(t.CustomTestFieldType||(t.CustomTestFieldType={}));e=t.CustomTestFieldType,function(n){n[n.None=0]="None";n[n.Iterations=1]="Iterations";n[n.WorkItems=2]="WorkItems"}(t.ResultDetails||(t.ResultDetails={}));o=t.ResultDetails,function(n){n[n.TestSuite=0]="TestSuite";n[n.TestPlan=1]="TestPlan"}(t.ResultObjectType||(t.ResultObjectType={}));s=t.ResultObjectType,function(n){n[n.Active=1]="Active";n[n.Inactive=2]="Inactive"}(t.TestConfigurationState||(t.TestConfigurationState={}));h=t.TestConfigurationState,function(n){n[n.Unspecified=0]="Unspecified";n[n.None=1]="None";n[n.Passed=2]="Passed";n[n.Failed=3]="Failed";n[n.Inconclusive=4]="Inconclusive";n[n.Timeout=5]="Timeout";n[n.Aborted=6]="Aborted";n[n.Blocked=7]="Blocked";n[n.NotExecuted=8]="NotExecuted";n[n.Warning=9]="Warning";n[n.Error=10]="Error";n[n.NotApplicable=11]="NotApplicable";n[n.Paused=12]="Paused";n[n.InProgress=13]="InProgress";n[n.NotImpacted=14]="NotImpacted";n[n.MaxValue=14]="MaxValue"}(t.TestOutcome||(t.TestOutcome={}));c=t.TestOutcome,function(n){n[n.Build=1]="Build";n[n.Release=2]="Release"}(t.TestResultsContextType||(t.TestResultsContextType={}));l=t.TestResultsContextType,function(n){n[n.None=0]="None";n[n.CreatingEnvironment=1]="CreatingEnvironment";n[n.RunningTests=2]="RunningTests";n[n.CanceledByUser=3]="CanceledByUser";n[n.AbortedBySystem=4]="AbortedBySystem";n[n.TimedOut=5]="TimedOut";n[n.PendingAnalysis=6]="PendingAnalysis";n[n.Analyzed=7]="Analyzed";n[n.CancellationInProgress=8]="CancellationInProgress"}(t.TestRunSubstate||(t.TestRunSubstate={}));a=t.TestRunSubstate,function(n){n[n.Unknown=0]="Unknown";n[n.XTDesktop=1]="XTDesktop";n[n.FeedbackDesktop=2]="FeedbackDesktop";n[n.XTWeb=3]="XTWeb";n[n.FeedbackWeb=4]="FeedbackWeb";n[n.XTDesktop2=5]="XTDesktop2";n[n.SessionInsightsForAll=6]="SessionInsightsForAll"}(t.TestSessionSource||(t.TestSessionSource={}));v=t.TestSessionSource,function(n){n[n.Unspecified=0]="Unspecified";n[n.NotStarted=1]="NotStarted";n[n.InProgress=2]="InProgress";n[n.Paused=3]="Paused";n[n.Completed=4]="Completed";n[n.Declined=5]="Declined"}(t.TestSessionState||(t.TestSessionState={}));y=t.TestSessionState;t.TypeInfo={AggregatedDataForResultTrend:{},AggregatedResultsAnalysis:{},AggregatedResultsByOutcome:{},AttachmentType:{enumValues:{generalAttachment:0,afnStrip:1,bugFilingData:2,codeCoverage:3,intermediateCollectorData:4,runConfig:5,testImpactDetails:6,tmiTestRunDeploymentFiles:7,tmiTestRunReverseDeploymentFiles:8,tmiTestResultDetail:9,tmiTestRunSummary:10,consoleLog:11}},BatchResponse:{},CloneOperationInformation:{},CloneOperationState:{enumValues:{failed:2,inProgress:1,queued:0,succeeded:3}},CoverageQueryFlags:{enumValues:{modules:1,functions:2,blockData:4}},CustomTestFieldDefinition:{},CustomTestFieldScope:{enumValues:{none:0,testRun:1,testResult:2,system:4,all:7}},CustomTestFieldType:{enumValues:{bit:2,dateTime:4,int:8,float:6,string:12,guid:14}},FailingSince:{},LastResultDetails:{},Response:{},ResultDetails:{enumValues:{none:0,iterations:1,workItems:2}},ResultObjectType:{enumValues:{testSuite:0,testPlan:1}},ResultRetentionSettings:{},ResultsFilter:{},ResultUpdateRequestModel:{},RunUpdateModel:{},TestActionResultModel:{},TestAttachment:{},TestCaseResult:{},TestConfiguration:{},TestConfigurationState:{enumValues:{active:1,inactive:2}},TestFailuresAnalysis:{},TestIterationDetailsModel:{},TestMessageLogDetails:{},TestOutcome:{enumValues:{unspecified:0,none:1,passed:2,failed:3,inconclusive:4,timeout:5,aborted:6,blocked:7,notExecuted:8,warning:9,error:10,notApplicable:11,paused:12,inProgress:13,notImpacted:14,maxValue:14}},TestPlan:{},TestPlanCloneRequest:{},TestPlanHubData:{},TestPlansWithSelection:{},TestPoint:{},TestResultHistory:{},TestResultHistoryDetailsForGroup:{},TestResultModelBase:{},TestResultsContext:{},TestResultsContextType:{enumValues:{build:1,release:2}},TestResultsDetails:{},TestResultsDetailsForGroup:{},TestResultsQuery:{},TestResultSummary:{},TestResultTrendFilter:{},TestRun:{},TestRunSubstate:{enumValues:{none:0,creatingEnvironment:1,runningTests:2,canceledByUser:3,abortedBySystem:4,timedOut:5,pendingAnalysis:6,analyzed:7,cancellationInProgress:8}},TestSession:{},TestSessionExploredWorkItemReference:{},TestSessionSource:{enumValues:{unknown:0,xTDesktop:1,feedbackDesktop:2,xTWeb:3,feedbackWeb:4,xTDesktop2:5,sessionInsightsForAll:6}},TestSessionState:{enumValues:{unspecified:0,notStarted:1,inProgress:2,paused:3,completed:4,declined:5}},TestSuite:{},TestSummaryForWorkItem:{}};t.TypeInfo.AggregatedDataForResultTrend.fields={resultsByOutcome:{isDictionary:!0,dictionaryKeyEnumType:t.TypeInfo.TestOutcome,dictionaryValueTypeInfo:t.TypeInfo.AggregatedResultsByOutcome},testResultsContext:{typeInfo:t.TypeInfo.TestResultsContext}};t.TypeInfo.AggregatedResultsAnalysis.fields={previousContext:{typeInfo:t.TypeInfo.TestResultsContext},resultsByOutcome:{isDictionary:!0,dictionaryKeyEnumType:t.TypeInfo.TestOutcome,dictionaryValueTypeInfo:t.TypeInfo.AggregatedResultsByOutcome}};t.TypeInfo.AggregatedResultsByOutcome.fields={outcome:{enumType:t.TypeInfo.TestOutcome}};t.TypeInfo.BatchResponse.fields={responses:{isArray:!0,typeInfo:t.TypeInfo.Response}};t.TypeInfo.CloneOperationInformation.fields={completionDate:{isDate:!0},creationDate:{isDate:!0},resultObjectType:{enumType:t.TypeInfo.ResultObjectType},state:{enumType:t.TypeInfo.CloneOperationState}};t.TypeInfo.CustomTestFieldDefinition.fields={fieldType:{enumType:t.TypeInfo.CustomTestFieldType},scope:{enumType:t.TypeInfo.CustomTestFieldScope}};t.TypeInfo.FailingSince.fields={date:{isDate:!0}};t.TypeInfo.LastResultDetails.fields={dateCompleted:{isDate:!0}};t.TypeInfo.Response.fields={};t.TypeInfo.ResultRetentionSettings.fields={lastUpdatedDate:{isDate:!0}};t.TypeInfo.ResultsFilter.fields={maxCompleteDate:{isDate:!0},testResultsContext:{typeInfo:t.TypeInfo.TestResultsContext}};t.TypeInfo.ResultUpdateRequestModel.fields={actionResultDeletes:{isArray:!0,typeInfo:t.TypeInfo.TestActionResultModel},actionResults:{isArray:!0,typeInfo:t.TypeInfo.TestActionResultModel}};t.TypeInfo.RunUpdateModel.fields={logEntries:{isArray:!0,typeInfo:t.TypeInfo.TestMessageLogDetails},substate:{enumType:t.TypeInfo.TestRunSubstate}};t.TypeInfo.TestActionResultModel.fields={completedDate:{isDate:!0},startedDate:{isDate:!0}};t.TypeInfo.TestAttachment.fields={attachmentType:{enumType:t.TypeInfo.AttachmentType},createdDate:{isDate:!0}};t.TypeInfo.TestCaseResult.fields={completedDate:{isDate:!0},createdDate:{isDate:!0},failingSince:{typeInfo:t.TypeInfo.FailingSince},iterationDetails:{isArray:!0,typeInfo:t.TypeInfo.TestIterationDetailsModel},lastUpdatedDate:{isDate:!0},startedDate:{isDate:!0}};t.TypeInfo.TestConfiguration.fields={lastUpdatedDate:{isDate:!0},state:{enumType:t.TypeInfo.TestConfigurationState}};t.TypeInfo.TestFailuresAnalysis.fields={previousContext:{typeInfo:t.TypeInfo.TestResultsContext}};t.TypeInfo.TestIterationDetailsModel.fields={actionResults:{isArray:!0,typeInfo:t.TypeInfo.TestActionResultModel},completedDate:{isDate:!0},startedDate:{isDate:!0}};t.TypeInfo.TestMessageLogDetails.fields={dateCreated:{isDate:!0}};t.TypeInfo.TestPlan.fields={endDate:{isDate:!0},startDate:{isDate:!0},updatedDate:{isDate:!0}};t.TypeInfo.TestPlanCloneRequest.fields={destinationTestPlan:{typeInfo:t.TypeInfo.TestPlan}};t.TypeInfo.TestPlanHubData.fields={testPlan:{typeInfo:t.TypeInfo.TestPlan},testPoints:{isArray:!0,typeInfo:t.TypeInfo.TestPoint},testSuites:{isArray:!0,typeInfo:t.TypeInfo.TestSuite}};t.TypeInfo.TestPlansWithSelection.fields={plans:{isArray:!0,typeInfo:t.TypeInfo.TestPlan}};t.TypeInfo.TestPoint.fields={lastResultDetails:{typeInfo:t.TypeInfo.LastResultDetails},lastUpdatedDate:{isDate:!0}};t.TypeInfo.TestResultHistory.fields={resultsForGroup:{isArray:!0,typeInfo:t.TypeInfo.TestResultHistoryDetailsForGroup}};t.TypeInfo.TestResultHistoryDetailsForGroup.fields={latestResult:{typeInfo:t.TypeInfo.TestCaseResult}};t.TypeInfo.TestResultModelBase.fields={completedDate:{isDate:!0},startedDate:{isDate:!0}};t.TypeInfo.TestResultsContext.fields={contextType:{enumType:t.TypeInfo.TestResultsContextType}};t.TypeInfo.TestResultsDetails.fields={resultsForGroup:{isArray:!0,typeInfo:t.TypeInfo.TestResultsDetailsForGroup}};t.TypeInfo.TestResultsDetailsForGroup.fields={results:{isArray:!0,typeInfo:t.TypeInfo.TestCaseResult},resultsCountByOutcome:{isDictionary:!0,dictionaryKeyEnumType:t.TypeInfo.TestOutcome,dictionaryValueTypeInfo:t.TypeInfo.AggregatedResultsByOutcome}};t.TypeInfo.TestResultsQuery.fields={results:{isArray:!0,typeInfo:t.TypeInfo.TestCaseResult},resultsFilter:{typeInfo:t.TypeInfo.ResultsFilter}};t.TypeInfo.TestResultSummary.fields={aggregatedResultsAnalysis:{typeInfo:t.TypeInfo.AggregatedResultsAnalysis},testFailures:{typeInfo:t.TypeInfo.TestFailuresAnalysis},testResultsContext:{typeInfo:t.TypeInfo.TestResultsContext}};t.TypeInfo.TestResultTrendFilter.fields={maxCompleteDate:{isDate:!0}};t.TypeInfo.TestRun.fields={completedDate:{isDate:!0},createdDate:{isDate:!0},dueDate:{isDate:!0},lastUpdatedDate:{isDate:!0},startedDate:{isDate:!0},substate:{enumType:t.TypeInfo.TestRunSubstate}};t.TypeInfo.TestSession.fields={endDate:{isDate:!0},lastUpdatedDate:{isDate:!0},source:{enumType:t.TypeInfo.TestSessionSource},startDate:{isDate:!0},state:{enumType:t.TypeInfo.TestSessionState}};t.TypeInfo.TestSessionExploredWorkItemReference.fields={endTime:{isDate:!0},startTime:{isDate:!0}};t.TypeInfo.TestSuite.fields={children:{isArray:!0,typeInfo:t.TypeInfo.TestSuite},lastPopulatedDate:{isDate:!0},lastUpdatedDate:{isDate:!0}};t.TypeInfo.TestSummaryForWorkItem.fields={summary:{typeInfo:t.TypeInfo.AggregatedDataForResultTrend}}});
define("VSS/FileContainer/Contracts",["require","exports"],function(n,t){"use strict";var i,r,u;(function(n){n[n.Created=1]="Created";n[n.PendingUpload=2]="PendingUpload"})(t.ContainerItemStatus||(t.ContainerItemStatus={}));i=t.ContainerItemStatus,function(n){n[n.Any=0]="Any";n[n.Folder=1]="Folder";n[n.File=2]="File"}(t.ContainerItemType||(t.ContainerItemType={}));r=t.ContainerItemType,function(n){n[n.None=0]="None"}(t.ContainerOptions||(t.ContainerOptions={}));u=t.ContainerOptions;t.TypeInfo={ContainerItemStatus:{enumValues:{created:1,pendingUpload:2}},ContainerItemType:{enumValues:{any:0,folder:1,file:2}},ContainerOptions:{enumValues:{none:0}},FileContainer:{},FileContainerItem:{}};t.TypeInfo.FileContainer.fields={dateCreated:{isDate:!0},options:{enumType:t.TypeInfo.ContainerOptions}};t.TypeInfo.FileContainerItem.fields={dateCreated:{isDate:!0},dateLastModified:{isDate:!0},itemType:{enumType:t.TypeInfo.ContainerItemType},status:{enumType:t.TypeInfo.ContainerItemStatus}}});
define("VSS/FileContainer/RestClient",["require","exports","VSS/FileContainer/Contracts","VSS/Service","VSS/WebApi/RestClient"],function(n,t,i,r,u){"use strict";function p(n){return window.VSS&&window.VSS.VssSDKRestVersion&&v[window.VSS.VssSDKRestVersion]?r.getClient(v[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):r.getClient(o,undefined,undefined,undefined,n)}var s=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.getItems=function(n,t,r,u,f,e,o,s){var h={scope:t,itemPath:r,metadata:u,$format:f,downloadFileName:e,includeDownloadTickets:o,isShallow:s};return this._beginRequest({httpMethod:"GET",area:"Container",locationId:"e4f5c81e-e250-447b-9fef-bd48471bea5e",resource:"Containers",routeTemplate:"_apis/resources/{resource}/{containerId}/{*itemPath}",responseType:i.TypeInfo.FileContainerItem,responseIsCollection:!0,routeValues:{containerId:n},queryParams:h,apiVersion:this.containersApiVersion})},t.prototype.getContainers=function(n,t){var r={scope:n,artifactUris:t};return this._beginRequest({httpMethod:"GET",area:"Container",locationId:"e4f5c81e-e250-447b-9fef-bd48471bea5e",resource:"Containers",routeTemplate:"_apis/resources/{resource}/{containerId}/{*itemPath}",responseType:i.TypeInfo.FileContainer,responseIsCollection:!0,queryParams:r,apiVersion:this.containersApiVersion})},t.prototype.deleteItem=function(n,t,i){var r={itemPath:t,scope:i};return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"Container",locationId:"e4f5c81e-e250-447b-9fef-bd48471bea5e",resource:"Containers",routeTemplate:"_apis/resources/{resource}/{containerId}/{*itemPath}",routeValues:{containerId:n},queryParams:r,apiVersion:this.containersApiVersion})},t.prototype.createItems=function(n,t,r){var u={scope:r};return this._beginRequest({httpMethod:"POST",area:"Container",locationId:"e4f5c81e-e250-447b-9fef-bd48471bea5e",resource:"Containers",routeTemplate:"_apis/resources/{resource}/{containerId}/{*itemPath}",responseType:i.TypeInfo.FileContainerItem,responseIsCollection:!0,routeValues:{containerId:t},queryParams:u,apiVersion:this.containersApiVersion,data:n})},t.prototype.createItem=function(n,t,r,u){var f={itemPath:r,scope:u};return this._beginRequest({httpMethod:"PUT",area:"Container",locationId:"e4f5c81e-e250-447b-9fef-bd48471bea5e",resource:"Containers",routeTemplate:"_apis/resources/{resource}/{containerId}/{*itemPath}",responseType:i.TypeInfo.FileContainerItem,routeValues:{containerId:t},customHeaders:{"Content-Type":"application/octet-stream"},queryParams:f,apiVersion:this.containersApiVersion,data:n})},t}(u.VssHttpClient),f,e,o,h,c,l,a,y,v;t.CommonMethods2To3_1=s;f=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.browseItems=function(n,t){var r={itemPath:t};return this._beginRequest({httpMethod:"GET",area:"Container",locationId:"e71a64ac-b2b5-4230-a4c0-dad657cf97e2",resource:"Containers",routeTemplate:"_apis/{resource}/{container}/{*itemPath}",responseType:i.TypeInfo.FileContainerItem,responseIsCollection:!0,routeValues:{container:n},queryParams:r,apiVersion:this.containersApiVersion_e71a64ac})},t}(s);t.CommonMethods2_1To3_1=f;e=function(n){function t(t,i){n.call(this,t,i);this.containersApiVersion=this.containersApiVersion_e71a64ac="3.1-preview.3"}return __extends(t,n),t}(f);t.FileContainerHttpClient3_1=e;o=function(n){function t(t,i){n.call(this,t,i);this.containersApiVersion=this.containersApiVersion_e71a64ac="3.0-preview.3"}return __extends(t,n),t}(f);t.FileContainerHttpClient3=o;h=function(n){function t(t,i){n.call(this,t,i);this.containersApiVersion=this.containersApiVersion_e71a64ac="2.3-preview.3"}return __extends(t,n),t}(f);t.FileContainerHttpClient2_3=h;c=function(n){function t(t,i){n.call(this,t,i);this.containersApiVersion=this.containersApiVersion_e71a64ac="2.2-preview.3"}return __extends(t,n),t}(f);t.FileContainerHttpClient2_2=c;l=function(n){function t(t,i){n.call(this,t,i);this.containersApiVersion=this.containersApiVersion_e71a64ac="2.1-preview.3"}return __extends(t,n),t}(f);t.FileContainerHttpClient2_1=l;a=function(n){function t(t,i){n.call(this,t,i);this.containersApiVersion="2.0-preview.3"}return __extends(t,n),t}(s);t.FileContainerHttpClient2=a;y=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t}(e);t.FileContainerHttpClient=y;v={"3.1":e,"3.0":o,"2.3":h,"2.2":c,"2.1":l,"2.0":a};t.getClient=p});
define("Build.Common/Scripts/Api2.2/ClientServices",["require","exports","q","Build.Common/Scripts/Generated/TFS.Build.Xaml.Common","Build.Common/Scripts/Generated/TFS.Build.Xaml.WebApi","Build.Common/Scripts/Generated/TFS.Build2.Common","Presentation/Scripts/TFS/TFS.Legacy.Ajax","Presentation/Scripts/TFS/TFS.Service","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","TFS/Build/RestClient","TFS/Build/Contracts","TFS/DistributedTask/TaskRestClient","TFS/DistributedTask/TaskAgentRestClient","TFS/DistributedTask/Contracts","TFS/TestManagement/Contracts","VSS/Artifacts/Constants","VSS/Artifacts/Services","VSS/FileContainer/RestClient","VSS/FileContainer/Contracts","VSS/Serialization","VSS/Service","VSS/Utils/Date","VSS/Utils/String","VSS/VSS"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it){function ot(n){return!!n&&(!!n.finishTime&&!nt.isMinDate(n.finishTime)||n.status===c.BuildStatus.Completed)}function ht(n){var t=[];return $.each(n,function(n,i){var r={};$.each(i.fields,function(n,t){switch(n){case s.CoreFieldRefNames.AssignedTo:r.assignedTo=t;break;case s.CoreFieldRefNames.State:r.state=t;break;case s.CoreFieldRefNames.Title:r.title=t;break;case s.CoreFieldRefNames.WorkItemType:r.workItemType=t}});r.url=i.url;r.id=i.id;t.push(r)}),t}var st=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeConnection=function(t){n.prototype.initializeConnection.call(this,t);this._applicationHttpClient=g.getApplicationClient(ut,this.getWebContext());this._collectionHttpClient=this.getConnection().getHttpClient(ut);this._collectionHttpXamlClient=this.getConnection().getHttpClient(u.BuildHttpClient);this._collectionHttpFileContainerClient=this.getConnection().getHttpClient(b.FileContainerHttpClient);this._collectionHttpDTClient=this.getConnection().getHttpClient(l.TaskHttpClient);this._collectionHttpDTAClient=this.getConnection().getHttpClient(a.TaskAgentHttpClient)},t.prototype.beginGetBuild=function(n){var t=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.getBuild(n,t).then(function(n){return n.finished=ot(n),n})},t.prototype.beginGetBuildReport=function(n){var t=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.getBuildReport(t,n)},t.prototype.beginGetBuilds=function(n){var t=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.getBuilds2(t,n).then(function(n){return $.each(n.builds,function(n){n.finished=ot(n)}),n})},t.prototype.beginGetBuildArtifacts=function(n){var t=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.getArtifacts(n,t)},t.prototype.beginGetBuildChanges=function(n,t,i){var r=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.getBuildChanges(r,n,null,t,i)},t.prototype.beginGetBuildWorkItems=function(n,t){var u=this,r=i.defer(),f=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.getBuildWorkItemsRefsFromCommits(t,f,n).then(function(n){var t=n.map(function(n){return parseInt(n.id)});t.length==0?r.resolve([]):it.using(["TFS/WorkItemTracking/RestClient"],function(n){return u._collectionHttpWitClient||(u._collectionHttpWitClient=u.getConnection().getHttpClient(n.WorkItemTrackingHttpClient)),u._collectionHttpWitClient.getWorkItems(t).then(function(n){r.resolve(ht(n))},function(n){r.reject(n)})})},function(n){r.reject(n)}),r.promise},t.prototype.beginQueryInputValues=function(n){var t=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.queryInputValues(t,n)},t.prototype.beginGetDefinitionTemplate=function(n){var t=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.getTemplate(t,n)},t.prototype.beginGetDefinition=function(n,t){var i=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.getDefinition(n,i,t).then(function(n){return n.type===c.DefinitionType.Xaml?d.ContractSerializer.deserialize(n,c.TypeInfo.XamlBuildDefinition,!1):d.ContractSerializer.deserialize(n,c.TypeInfo.BuildDefinition,!1)})},t.prototype.beginGetXamlDefinition=function(n){var t=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.getDefinition(n,t,null,null,c.DefinitionType.Xaml).then(function(n){return d.ContractSerializer.deserialize(n,c.TypeInfo.XamlBuildDefinition,!1)})},t.prototype.beginGetSubscriptionNames=function(n){return this._collectionHttpClient.getSubscriptionNames(n)},t.prototype.beginGetDefinitions=function(n){var t=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.getDefinitions(t,"*",n).then(function(n){return n.map(function(n){return n.type===c.DefinitionType.Xaml?d.ContractSerializer.deserialize(n,c.TypeInfo.XamlBuildDefinition,!1):d.ContractSerializer.deserialize(n,c.TypeInfo.BuildDefinition,!1)})})},t.prototype.beginGetDefinitionRevisions=function(n){var t=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.getDefinitionRevisions(t,n)},t.prototype.beginPostDefinition=function(n,t,i,r){var u=this.getTfsContext().contextData.project.id;return n.quality=c.DefinitionQuality.Definition,n.comment=t,this._collectionHttpClient.createDefinition(n,u,i,r)},t.prototype.beginPutDefinition=function(n,t,i){var r=this.getTfsContext().contextData.project.id;return n.comment=t,this._collectionHttpClient.updateDefinition(n,n.id,r,i)},t.prototype.beginPutDefinitionTemplate=function(n,t){var i=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.saveTemplate(t,i,n)},t.prototype.beginDeleteDefinition=function(n){var t=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.deleteDefinition(n,t)},t.prototype.beginDeleteDefinitionTemplate=function(n){var t=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.deleteTemplate(t,n)},t.prototype.beginPostDraft=function(n,t,i){i===void 0&&(i=!1);var r=this.getTfsContext().contextData.project.id;return n.quality=c.DefinitionQuality.Draft,n.comment=t,i?this._collectionHttpClient.updateDefinition(n,n.id,r):this._collectionHttpClient.createDefinition(n,r,n.id,n.revision)},t.prototype.beginPutScopedDraft=function(n,t,i,r){return t.draftOf={id:n},this.beginPostDraft(t,i,r)},t.prototype.beginGetAgentPoolQueues=function(){return this._collectionHttpClient.getQueues().then(function(n){return n.sort(function(n,t){return tt.defaultComparer(n.name,t.name)})})},t.prototype.beginGetBuildControllers=function(){return this._collectionHttpClient.getBuildControllers()},t.prototype.beginDeleteQueue=function(n){return this._collectionHttpClient.deleteQueue(n)},t.prototype.beginQueueBuild=function(n,t){t===void 0&&(t=!1);var i=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.queueBuild(n,i,t)},t.prototype.beginGetBuildOptionDefinitions=function(){var n=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.getBuildOptionDefinitions(n)},t.prototype.beginGetDefinitionTemplates=function(){var n=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.getTemplates(n)},t.prototype.beginDeleteBuild2=function(n){var t=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.deleteBuild(n,t)},t.prototype.beginCancelBuild2=function(n){var t=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.cancelBuild2(t,n)},t.prototype.beginUpdateBuildStatus=function(n,t){var i=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.updateBuildStatus(i,n,t)},t.prototype.beginUpdateXamlBuildQuality=function(n,t){var i=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.updateXamlBuildQuality(i,n,t)},t.prototype.beginUpdateBuildRetainFlag=function(n,t){var i=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.updateBuildRetainFlag(i,n,t)},t.prototype.beginAddBuildTag=function(n,t){var i=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.addBuildTag(i,n,t).then(function(n){return n},function(n){it.handleError(n)})},t.prototype.beginDeleteBuildTag=function(n,t){var i=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.deleteBuildTag(i,n,t)},t.prototype.beginGetSuggestedTags=function(){var n=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.getTags(n)},t.prototype.beginCreateQueue=function(n){return this._collectionHttpClient.createQueue(n)},t.prototype.beginGetBuildSettings=function(){return this._collectionHttpClient.getBuildSettings()},t.prototype.beginUpdateBuildSettings=function(n){return this._collectionHttpClient.updateBuildSettings(n)},t.prototype.beginGetTimelines=function(n){var t=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.getTimelines(t,n)},t.prototype.beginGetTimeline=function(n,t,i,r){i===void 0&&(i=0);var u=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.getBuildTimeline(u,n,t,i,r).then(function(n){return n})},t.prototype.beginGetInformationNodes=function(n,t,i,r){var u=this.getTfsContext().contextData.project.id;return this._collectionHttpXamlClient.getDetails(n,t,u,r,i)},t.prototype.beginGetTestRunById=function(n){var t=this.getTfsContext().contextData.project.id;return this._collectionHttpTmClient.getTestRunById(t,n)},t.prototype.beginGetBuildDeployments=function(n){var t=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.getBuildDeployments(t,n)},t.prototype.beginGetXamlQualities=function(){var n=this.getTfsContext().contextData.project.id;return this._collectionHttpXamlClient.getQualities(n)},t.prototype.beginUpdateXamlQualities=function(n,t){var r=i.defer(),f=this.getTfsContext().getActionUrl("updateBuildQualities","build",{area:"api"}),u={};return u.itemsAdded=n||[],u.itemsRemoved=t||[],e.postHTML(f,u,function(){r.resolve(null)},function(n){it.handleError(n);r.reject(n)}),r.promise},t.prototype.beginGetBuildCoverage=function(n){var t=this,r=i.defer(),u=this.getTfsContext().contextData.project.id;return it.using(["TFS/TestManagement/RestClient"],function(i){t._collectionHttpTmClient||(t._collectionHttpTmClient=t.getConnection().getHttpClient(i.TestHttpClient));var f=y.CoverageQueryFlags.Modules;t._collectionHttpTmClient.getBuildCodeCoverage(u,n,f).then(function(n){r.resolve(n)},function(n){r.reject(n)})}),r.promise},t.prototype.beginGetCodeCoverageSummary=function(n){var t=this,r=i.defer(),u=this.getTfsContext().contextData.project.id;return it.using(["TFS/TestManagement/RestClient"],function(i){t._collectionHttpTmClient||(t._collectionHttpTmClient=t.getConnection().getHttpClient(i.TestHttpClient));t._collectionHttpTmClient.getCodeCoverageSummary(u,n,-1).then(function(n){r.resolve(n)},function(n){r.reject(n)})}),r.promise},t.prototype.beginGetLogs=function(n){var t=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.getBuildLogs(t,n)},t.prototype.beginGetLog=function(n,t,i,r){var u=this.getTfsContext().contextData.project.id;return this._collectionHttpClient.getBuildLogStream(u,n,t,i,r)},t.prototype.beginGetBuildContainerItems=function(n,t,r){var e=this,f,u;return r===void 0&&(r=!0),f=w.LinkingUtilities.encodeUri({tool:p.ToolNames.TeamBuild,type:p.ArtifactTypeNames.Build,id:n.toString()}),u=this.getTfsContext().contextData.project.id,this._collectionHttpFileContainerClient.getContainers(u,f).then(function(n){var f=[];return $.each(n,function(n,t){f.push(e._collectionHttpFileContainerClient.getItems(t.id,u))}),i.all(f).then(function(n){var i=[];return $.each(n,function(n,u){var f=u;r&&(f=f.filter(function(n){return n.itemType===k.ContainerItemType.File}));t&&(f=f.filter(function(n){return tt.caseInsensitiveContains(n.path||"",t)}));i=i.concat(f)}),i})})},t.prototype.beginGetPlanAttachments=function(n,t){var i=this.getTfsContext().contextData.project.id;return this._collectionHttpDTClient.getPlanAttachments(i,"build",n,t)},t}(o.TfsService),rt,ft,et,ut;t.BuildClientService=st;rt=function(){function n(){}return n}();ft=function(){function n(n){this._xamlDefinitionsPromise=new rt;this._buildDefinitionsAndDraftsPromise=new rt;this._buildDefinitionsPromise=new rt;this._buildDraftsPromise=new rt;this._buildClient=n;this._subsetPromises=[this._xamlDefinitionsPromise,this._buildDefinitionsAndDraftsPromise,this._buildDefinitionsPromise,this._buildDraftsPromise]}return n.prototype.getAllDefinitions=function(n){var t=this,i;return n===void 0&&(n=!1),(n||!this._allDefinitionsPromise)&&($.each(this._subsetPromises,function(n,t){t.promise=null;t.array=[]}),this._allDefinitionsPromise=this._buildClient.beginGetDefinitions(),i=this._allDefinitionsPromise.then(function(n){$.each(n,function(n,i){switch(i.type){case c.DefinitionType.Xaml:t._xamlDefinitionsPromise.array.push(i);break;case c.DefinitionType.Build:var r=i;r.quality===c.DefinitionQuality.Draft?t._buildDraftsPromise.array.push(r):t._buildDefinitionsPromise.array.push(r);t._buildDefinitionsAndDraftsPromise.array.push(r)}})}),$.each(this._subsetPromises,function(n,t){t.promise=i.then(function(){return t.array})})),this._allDefinitionsPromise},n.prototype.getXamlDefinitions=function(n){var t=this;return n===void 0&&(n=!1),(n||!this._xamlDefinitionsPromise.promise)&&(this._xamlDefinitionsPromise.array=[],this._xamlDefinitionsPromise.promise=this._buildClient.beginGetDefinitions(c.DefinitionType.Xaml).then(function(n){return n.forEach(function(n){t._xamlDefinitionsPromise.array.push(n)}),t._xamlDefinitionsPromise.array})),this._xamlDefinitionsPromise.promise},n.prototype.getBuildDefinitionsAndDrafts=function(n){return n===void 0&&(n=!1),(n||!this._buildDefinitionsAndDraftsPromise.promise)&&this.getAllDefinitions(n),this._buildDefinitionsAndDraftsPromise.promise},n.prototype.getBuildDefinitions=function(n){return n===void 0&&(n=!1),(n||!this._buildDefinitionsPromise.promise)&&this.getAllDefinitions(n),this._buildDefinitionsPromise.promise},n.prototype.getBuildDefinitionDrafts=function(n){return n===void 0&&(n=!1),(n||!this._buildDraftsPromise.promise)&&this.getAllDefinitions(n),this._buildDraftsPromise.promise},n}();t.DefinitionCache=ft;et=function(){function n(n){this._buildClient=n;this._queueClient=g.getCollectionClient(a.TaskAgentHttpClient,n.getTfsContext().contextData);this._projectId=n.getTfsContext().contextData.project.id}return n.prototype.getBuildControllers=function(n){return n===void 0&&(n=!1),(n||!this._buildControllersPromise)&&(this._buildControllersPromise=this._buildClient.beginGetBuildControllers().then(function(n){return n})),this._buildControllersPromise},n.prototype.getAgentQueues=function(n){return n===void 0&&(n=!1),(n||!this._agentQueuesPromise)&&(this._agentQueuesPromise=this._queueClient.getAgentQueues(this._projectId,null,v.TaskAgentQueueActionFilter.Use).then(function(n){return n.sort(function(n,t){return tt.ignoreCaseComparer(n.name,t.name)})})),this._agentQueuesPromise},n}();t.QueueCache=et;ut=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.getBuildLogStream=function(n,t,i,r,u,e){var o={startLine:r,endLine:u,type:e};return this._beginRequest({httpMethod:"GET",httpResponseType:"text/plain",area:f.Build2ResourceIds.AreaName,locationId:f.Build2ResourceIds.BuildLogs,resource:f.Build2ResourceIds.BuildLogsResource,routeTemplate:"{project}/_apis/{area}/builds/{buildId}/{resource}/{logId}",responseIsCollection:!1,routeValues:{project:n,buildId:t,logId:i},queryParams:o,apiVersion:"2.3-preview"})},t.prototype.getBuild=function(n,t,i,r){var u={propertyFilters:i,type:r};return this._beginRequest({httpMethod:"GET",area:"build",locationId:"0cd358e1-9217-4d94-8269-1c1ee6f93dcf",resource:"builds",routeTemplate:"{project}/_apis/build/{resource}/{buildId}",responseType:c.TypeInfo.Build,responseIsCollection:!1,routeValues:{project:t,buildId:n},queryParams:u,apiVersion:"2.2;res-version=3"})},t.prototype.getBuilds2=function(n,t){return this._beginRequestWithAjaxResult({area:f.Build2ResourceIds.AreaName,locationId:f.Build2ResourceIds.Builds,responseType:c.TypeInfo.Build,responseIsCollection:!0,apiVersion:"2.2;res-version=3",routeValues:{project:n},data:t}).spread(function(n,t,i){return{builds:n,continuationToken:i.getResponseHeader("x-ms-continuationtoken")}})},t.prototype.queryInputValues=function(n,t){return this._beginRequest({httpMethod:"POST",area:f.Build2ResourceIds.AreaName,locationId:f.Build2ResourceIds.InputValuesQuery,data:t,apiVersion:"2.2",routeValues:{project:n}})},t.prototype.getSubscriptionNames=function(n){return this._beginRequest({area:r.BuildResourceIds.AreaName,locationId:r.BuildResourceIds.AzureSubscriptions,responseIsCollection:!0,apiVersion:"2.2",routeValues:{project:n}})},t.prototype.cancelBuild2=function(n,t){return this._beginRequest({httpMethod:"PATCH",area:f.Build2ResourceIds.AreaName,locationId:f.Build2ResourceIds.Builds,apiVersion:"2.2",routeValues:{project:n,buildId:t},data:{status:c.BuildStatus.Cancelling}})},t.prototype.updateBuildStatus=function(n,t,i){return this._beginRequest({httpMethod:"PATCH",area:f.Build2ResourceIds.AreaName,locationId:f.Build2ResourceIds.Builds,apiVersion:"2.2",routeValues:{project:n,buildId:t},data:{status:i}})},t.prototype.updateXamlBuildQuality=function(n,t,i){return this._updateBuild(n,t,{quality:i})},t.prototype.updateBuildRetainFlag=function(n,t,i){return this._updateBuild(n,t,{keepForever:i})},t.prototype.getTimelines=function(n,t){return this._beginRequest({area:f.Build2ResourceIds.AreaName,locationId:f.Build2ResourceIds.Timelines,responseIsCollection:!0,apiVersion:"2.2",routeValues:{project:n,buildId:t}})},t.prototype.queueBuild=function(t,r,u){var f=i.defer();return n.prototype.queueBuild.call(this,t,r,u).then(function(n){f.resolve(n)},function(n){var t,i;n.responseText&&(t=JSON.parse(n.responseText));t&&t.ValidationResults?(i={value:t.ValidationResults},f.reject(d.ContractSerializer.deserialize(i,c.TypeInfo.BuildRequestValidationResult,!1,!0))):f.reject(n)}),f.promise},t.prototype._updateBuild=function(n,t,i){return this._beginRequest({httpMethod:"PATCH",area:f.Build2ResourceIds.AreaName,locationId:f.Build2ResourceIds.Builds,responseType:c.TypeInfo.Build,apiVersion:"2.2",routeValues:{project:n,buildId:t},data:i})},t}(h.BuildHttpClient2_2);t.BuildHttpClient=ut;it.tfsModuleLoaded("ClientServices",t)});
define("Build.Common/Scripts/BuildResult",["require","exports","Build.Common/Scripts/Resources/TFS.Resources.Build.Common","TFS/Build/Contracts"],function(n,t,i,r){var u;(function(n){function u(n,i){f();var u=t[n];return u||(u=t[r.BuildResult.None]),u[i===!0?"displayName":"name"]}function f(){if(!t){var n={};n[r.BuildResult.None]={name:"inprogress",displayName:i.BuildResultNone};n[r.BuildResult.Succeeded]={name:"succeeded",displayName:i.BuildResultSucceeded};n[r.BuildResult.PartiallySucceeded]={name:"partiallysucceeded",displayName:i.BuildResultPartiallySucceeded};n[r.BuildResult.Failed]={name:"failed",displayName:i.BuildResultFailed};n[r.BuildResult.Canceled]={name:"canceled",displayName:i.BuildResultCanceled};t=n}}var t=null;n.getName=u})(u=t.BuildResult||(t.BuildResult={}))});
define("Build.Common/Scripts/BuildStatus",["require","exports","Build.Common/Scripts/Resources/TFS.Resources.Build.Common","TFS/Build/Contracts","VSS/Utils/Date"],function(n,t,i,r,u){var e={},f,o;e[r.BuildStatus.InProgress]="build-brand-icon-color bowtie-icon bowtie-play-fill";e[r.BuildStatus.NotStarted]="build-muted-icon-color bowtie-icon bowtie-build-queue";e[r.BuildStatus.Postponed]="build-muted-icon-color bowtie-icon bowtie-build-queue";e[r.BuildStatus.Cancelling]="build-muted-icon-color bowtie-icon bowtie-status-no";f={};f[r.BuildResult.Canceled]="build-muted-icon-color bowtie-icon bowtie-status-no";f[r.BuildResult.Failed]="build-failure-icon-color bowtie-icon bowtie-edit-delete";f[r.BuildResult.PartiallySucceeded]="build-warning-icon-color bowtie-icon bowtie-status-warning";f[r.BuildResult.Succeeded]="build-success-icon-color bowtie-icon bowtie-check",function(n){function o(n,i){c();var u=t[n];return u||(u=t[r.BuildStatus.None]),u[i===!0?"displayName":"name"]}function s(n,t){var i="";return n&&(n===r.BuildStatus.Completed?t&&(i=f[t]):i=e[n]),i||""}function h(n,t){return!!t&&u.isMinDate(t)||n===r.BuildStatus.Completed}function c(){if(!t){var n={};n[r.BuildStatus.None]={name:"none",displayName:i.BuildStatusNone};n[r.BuildStatus.Completed]={name:"completed",displayName:i.BuildStatusCompleted};n[r.BuildStatus.InProgress]={name:"inprogress",displayName:i.BuildStatusInProgress};n[r.BuildStatus.NotStarted]={name:"queued",displayName:i.BuildStatusNotStarted};n[r.BuildStatus.Postponed]={name:"postponed",displayName:i.BuildStatusPostponed};t=n}}var t=null;n.getName=o;n.getIconCssClass=s;n.isFinished=h}(o=t.BuildStatus||(t.BuildStatus={}))});
define("Build.Common/Scripts/Duration",["require","exports","Build.Common/Scripts/Resources/TFS.Resources.Build.Common","Build.Common/Scripts/BuildStatus","TFS/Build/Contracts","VSS/Utils/Date","VSS/Utils/Number","VSS/Utils/String"],function(n,t,i,r,u,f,e,o){function c(n,t,r){return h(n,t,r,null,function(n,t){return o.format(i.BuildCompletedAgoFormat,f.ago(t,new Date))})}function l(n,t,r,u){return u||(u=i.BuildDurationNoQueueName),h(n,t,r,u,function(n,t){return o.format(i.BuildDurationCompletedAgoQueueFormat,s(n,t),u,s(t,new Date))})}function h(n,t,e,h,c){var l="";return t||(t=new Date),n===u.BuildStatus.NotStarted?l=h?o.format(i.BuildDurationInProgressQueueFormat,s(new Date,new Date),h):o.format(i.BuildDurationInProgressFormat,s(new Date,new Date)):r.BuildStatus.isFinished(n,e)?((!e||f.isMinDate(e))&&(e=t),l=c(t,e)):l=h?o.format(i.BuildDurationInProgressQueueFormat,s(new Date,new Date),h):o.format(i.BuildDurationInProgressFormat,s(t,new Date)),l}function s(n,t){var r,f;t===void 0&&(t=new Date);n||(n=new Date);t||(t=new Date);var h=Math.abs(n.valueOf()-t.valueOf()),s=h/1e3,u=s/60;return u<2?o.format(i.BuildDetailViewDurationFormatSeconds,Math.round(s)):(r=u/60,r<2)?o.format(i.BuildDetailViewDurationFormatMinutes,e.toDecimalLocaleString(Math.round(u*10)/10)):(f=r/24,f<2)?o.format(i.BuildDetailViewDurationFormatHours,e.toDecimalLocaleString(Math.round(r*10)/10)):o.format(i.BuildDetailViewDurationFormatDays,Math.round(f))}t.getBuildDurationText=c;t.getBuildDurationQueueText=l;t.getDurationText=s});
define("VSS/Adapters/Knockout",["require","exports","knockout","VSS/Controls","VSS/Utils/Core","VSS/Utils/String"],function(n,t,i,r,u,f){var s=function(){function n(){this._disposalManager=new u.DisposalManager}return n.prototype.dispose=function(){this._disposalManager.dispose()},n.prototype.subscribe=function(n,t){return this._disposalManager.addDisposable(n.subscribe(t))},n.prototype.computed=function(n){return this._disposalManager.addDisposable(i.computed(n))},n.prototype._addDisposable=function(n){return this._disposalManager.addDisposable(n)},n}(),e,o;t.TemplateViewModel=s;e={};o=function(n){function t(t,i){n.call(this,i);this._viewModel=t;this._disposalManager=new u.DisposalManager}return __extends(t,n),t.registerBinding=function(n,t,i){if(!n)throw new Error("You must specify templateId to register a control type.");if(!t)throw new Error("You must specify control type to register.");if(!i)throw new Error("You must specify viewmodel generator to register.");e[n]={controlType:t,viewModelGenerator:i}},t.applyRegisteredBinding=function(n,i,r){if(n){var u=e[n];if(u)return t.applyBinding(u.controlType,i,u.viewModelGenerator(r),{templateId:n})}return null},t.applyBinding=function(n,t,i,r){if(!r.templateHtml&&!r.templateId)throw new Error("You must specify templateHtml or templateId to instantiate a template control.");if(!i)throw new Error("You must specify viewModel to instantiate a template control.");var u=new n(i,r);return u.applyBinding(t),u},t.prototype.getViewModel=function(){return this._viewModel},t.prototype.applyBinding=function(n){this._setElement(n);this._initializeElement();this._performBinding(n,this._options);this._attemptInitialize()},t.prototype.subscribe=function(n,t){return this._disposalManager.addDisposable(n.subscribe(t))},t.prototype.computed=function(n){return this._disposalManager.addDisposable(i.computed(n))},t.prototype._cleanup=function(){n.prototype._cleanup.call(this);var t=this.getElement();t&&(this.getElement().removeAttr("data-bind"),i.cleanNode(this.getElement()[0]),this._disposalManager.dispose(),this._viewModel.dispose())},t.prototype._performBinding=function(n,t){t.templateHtml?n.html(t.templateHtml):t.templateId&&n.attr("data-bind",f.format("template: {{ name: '{0}' }}",t.templateId));i.applyBindings(this.getViewModel(),n[0])},t}(r.BaseControl);t.TemplateControl=o});
define("VSS/Controls/Histogram",["require","exports","VSS/Controls","VSS/Diag","VSS/LoaderPlugins/Css!VSS.Controls"],function(n,t,i,r){var u=function(n){function t(t){t.coreCssClass="histogram";n.call(this,t)}return __extends(t,n),t.prototype.initialize=function(){var n=this._options;this._decorate();n.bars?this._load(n.bars):$.isFunction(n.barGenerator)?this._load(n.barGenerator.call(this)):n.renderDefaultBars!==!1&&this._renderDefaultBars()},t.prototype.refresh=function(n){this._load(n)},t.prototype._clearBars=function(){this.getElement().find("div.bar").remove()},t.prototype._getBarCount=function(){var n=this._options.barCount||9;return Math.min(Math.max(n,5),100)},t.prototype._getBarWidth=function(){var n=this._options.barWidth||5;return Math.min(Math.max(n,2),30)},t.prototype._getBarSpacing=function(){var n=this._options.barSpacing||2;return Math.min(Math.max(n,0),10)},t.prototype._getBarMaxHeight=function(){var n=this._options.barHeight||35;return Math.min(Math.max(n,10),300)},t.prototype._load=function(n){this._renderBars(n)},t.prototype._decorate=function(){this.getElement().width(this._getBarCount()*(this._getBarSpacing()+this._getBarWidth()));this.getElement().height(this._getBarMaxHeight())},t.prototype._renderDefaultBars=function(){this._clearBars();for(var n=0;n<this._getBarCount();n++)this.getElement().append(this._createBar(n))},t.prototype._renderBars=function(n){this._clearBars();for(var i=this._getBarCount(),u=i-n.length,t=0;t<u;t++)this.getElement().append(this._createBar(t,{state:"default",value:5}));while(t<i)this.getElement().append(this._createBar(t,n[t-u])),t+=1},t.prototype._createBar=function(n,t){var h,i,e,l,u,r,o=this._options.hoverState,c=this._options.selectedState,s=this._options.allowInteraction!==!1;return e=this._getBarWidth(),l=this._getBarSpacing(),u=t&&t.state,u=u||"default",h=n*(e+this._getBarSpacing()),r=t&&t.value,r=typeof r=="number"?Math.max(Math.min(r,100),0):r||(n%2?50:100),r=Math.max(r,Math.ceil(100/this._getBarMaxHeight())),i=$("<div />").addClass("bar"),i.addClass(u),i.css("left",h),i.css("width",e),i.css("height",r+"%"),i.css("bottom",0),t&&(c&&(t.selected||!s)&&i.addClass(c),s&&o&&!t.selected&&i.hover(function(){$(this).addClass(o)},function(){$(this).removeClass(o)}),s&&$.isFunction(t.action)&&(i.data("action",{action:t.action,args:t.actionArgs}),i.click(function(){var n=$(this).data("action");return n.action(n.args),!1}),i.keydown(function(n){var t=n||window.event,i;if(t&&(t.which||t.keyCode)===f.EnterKeyCode)return i=$(this).data("action"),i.action(i.args),!1}),i.attr("tabindex","0")),t.title&&i.attr("title",t.title)),i},t}(i.Control),f,e;t.HistogramO=u;f=function(){function n(){}return n.EnterKeyCode=13,n}();e=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(u);t.Histogram=e});
define("Build.Common/Scripts/Controls/Histogram",["require","exports","knockout","Build.Common/Scripts/BuildArtifacts","Build.Common/Scripts/Api2.2/ClientServices","Build.Common/Scripts/Resources/TFS.Resources.Build.Common","Build.Common/Scripts/BuildResult","Build.Common/Scripts/BuildStatus","Build.Common/Scripts/Duration","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","TFS/Build/Contracts","VSS/Adapters/Knockout","VSS/Artifacts/Services","VSS/Controls","VSS/Controls/Histogram","VSS/Utils/Core","VSS/Utils/Date","VSS/Utils/String","VSS/Utils/UI","VSS/VSS"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g){var ft=d.domElem,ut=h.TfsContext,et=w.delegate,tt,it,rt,nt;t.BUILD_HISTOGRAM_BAR_COUNT=10;tt=function(){function n(n,t){this.builds=i.observableArray([]);this.currentBuildId=i.observable(0);this.builds(n);this.currentBuildId(t)}return n}();t.BuildsInfo=tt;it=function(n){function t(t,r){n.call(this);this.buildsInfo=i.observable(null);this.buildsInfo(t);this.clickAction=r}return __extends(t,n),t}(a.TemplateViewModel);t.BuildHistogramViewModel=it;rt=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.initialize=function(){var t=this,i=$("<div />").appendTo(this.getElement()),n=this.getViewModel();this._histogram=y.BaseControl.createIn(nt,i,{cssClass:"build-histogram definition-histogram",barCount:10,barWidth:6,barHeight:35,barSpacing:2,selectedState:"selected",hoverState:"hover",clickAction:n.clickAction});this.subscribe(n.buildsInfo,function(n){n&&t._histogram.updateData(n)});this._histogram.updateData(n.buildsInfo())},t.prototype.dispose=function(){this._histogram&&(this._histogram.dispose(),this._histogram=null);n.prototype.dispose.call(this)},t}(a.TemplateControl);t.BuildHistogramControl=rt;nt=function(n){function t(t){n.call(this,t);this._buildCount=10;this.buildCssIconId="#latestBuildCss";this.summaryId="#latestBuildSummary";t.buildDefinitionId?this._buildDefinitionId=t.buildDefinitionId:t.buildDefinitionUri&&(this._buildDefinitionId=parseInt(v.LinkingUtilities.decodeUri(t.buildDefinitionUri).id));t.barCount&&(this._buildCount=t.barCount)}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this._loadData()},t.prototype._loadData=function(){var t=this;if(!!this._buildDefinitionId){var n=this._element.parent().parent(),i=n.find(this.summaryId).text(f.NoBuildExistsForDefinition),r=n.find(this.buildCssIconId),e={project:this._options.projectId,definitions:this._buildDefinitionId.toString(),statusFilter:l.BuildStatus.Completed,$top:this._buildCount};this._buildClient=c.ProjectCollection.getConnection(this._options.tfsContext).getService(u.BuildClientService);this._buildClient.beginGetBuilds(e).then(function(n){var u=n.builds[0];u&&(i.text(s.getBuildDurationText(u.status,u.startTime,u.finishTime)),r.attr("class","icon "+o.BuildStatus.getIconCssClass(u.status,u.result)));t.updateData(new tt(n.builds,0))})}},t.prototype.clear=function(){this._clearBars()},t.prototype.updateData=function(n){var r=this,u=Number.MIN_VALUE,s=n.currentBuildId(),f=n.builds(),o=!1,t=f.slice(0,2),i;t.length===2&&t[0].startTime&&t[1].startTime&&t[0].startTime>t[1].startTime&&(o=!0);i=f.map(function(n){var t;return t=n.startTime&&n.finishTime?n.finishTime-n.startTime:n.startTime?new Date-n.startTime:0,u=Math.max(u,t),{selected:n.id===s,value:t,state:e.BuildResult.getName(n.result),action:function(n){r._options&&r._options.clickAction&&r._options.clickAction(n)},actionArgs:n,title:r.getBuildTooltipText(n)}});i.forEach(function(n){n.value=n.value/u*100});o&&(i=i.reverse());this.refresh(i)},t.prototype._renderError=function(n){this._clearBars();this._element.attr("title",n.message||n)},t.prototype._onBuildClick=function(n){var t=new r.BuildArtifact(v.LinkingUtilities.decodeUri(n.uri));t.execute(this._options.tfsContext.contextData)},t.prototype.getBuildTooltipText=function(n){return n.status===l.BuildStatus.Completed&&n.finishTime?b.isMinDate(n.finishTime)?k.format(f.BuildCompletedDuration,n.buildNumber,e.BuildResult.getName(n.result,!0),s.getDurationText(n.startTime,n.startTime)):k.format(f.BuildCompletedDuration,n.buildNumber,e.BuildResult.getName(n.result,!0),s.getDurationText(n.startTime,n.finishTime)):n.status===l.BuildStatus.InProgress?k.format(f.BuildInProgressDuration,n.buildNumber,s.getDurationText(n.startTime,new Date)):void 0},t}(p.HistogramO);t.BuildHistogram=nt;g.classExtend(nt,ut.ControlExtensions);y.Enhancement.registerEnhancement(nt,".build-definition-histogram");g.tfsModuleLoaded("Controls.Histogram",t)});
define("VersionControl/Scripts/RepositoryType",["require","exports"],function(n,t){(function(n){n[n.TFS=0]="TFS";n[n.Git=1]="Git";n[n.GitHub=2]="GitHub"})(t.RepositoryType||(t.RepositoryType={}));var i=t.RepositoryType});
define("VersionControl/Scripts/Generated/TFS.VersionControl.Common",["require","exports"],function(n,t){var i,r,u;(function(n){n.MaxGitRefNameLength=400;n.SourceControlCapabilityFlag=2;n.MaxRepositoryNameLength=256})(i=t.GitConstants||(t.GitConstants={})),function(n){n.RefsLocationId="2d874a60-a811-4f62-9c9f-963a6ea0a55b";n.ProjectRefsLocationId="4c36aadb-af42-45bb-80ca-6df5cd443e0d";n.RepositoriesLocationId="225f7195-f9c7-4d14-ab28-a83f7ff77e1f";n.ProjectRepositoriesLocationId="88aea7e8-9501-45dd-ac58-b069aa73b926";n.ItemsLocationId="fb93c0db-47ed-4a31-8c20-47552878fb44";n.ProjectItemsLocationId="433ab753-6ed9-4169-9841-dd3f7611834a";n.ItemsBatchLocationId="630fd2e4-fb88-4f85-ad21-13f3fd1fbca9";n.ProjectItemsBatchLocationId="567ef866-886b-44cc-81e2-6cc075905ce5";n.TreesLocationId="729f6437-6f92-44ec-8bee-273a7111063c";n.ProjectTreesLocationId="11e0a184-7e28-4b77-9523-1d4d6dc29241";n.BlobsLocationId="7b28e929-2c99-405d-9c5c-6167a06e6816";n.ProjectBlobsLocationId="cffac033-c2f1-41a2-acb3-b765e50a8d29";n.CommitsLocationId="c2570c3b-5b3f-41b8-98bf-5407bfde8d58";n.ProjectCommitsLocationId="41a3de30-8d9e-4f79-a7e3-ef8cf1299454";n.PushesLocationId="ea98d07b-3c87-4971-8ede-a613694ffb55";n.ProjectPushesLocationId="9777557b-f5a5-4a6b-94f8-39aff53b5b41";n.BranchesStatsLocationId="d5b216de-d8d5-4d32-ae76-51df755b16d3";n.ProjectBranchesStatsLocationId="b32dc299-abe2-41e9-bd15-1e6856b95c9c";n.BranchStatsLocationId="40c1f5b7-2bb6-4c28-b844-0f47cd6bb610";n.ProjectBranchStatsLocationId="9b2552e4-9e48-4557-98ec-1982f699615f";n.CommitChangesLocationId="5bf884f5-3e07-42e9-afb8-1b872267bf16";n.ProjectCommitChangesLocationId="074db773-d674-4de9-a0dd-fcb6adddecf9";n.PushCommitsLocationId="168b4bb9-d936-4cd9-8a5f-66d6f6b23192";n.ProjectPushCommitsLocationId="cc7a4cb0-7377-494a-80d4-ef4d607f6eb2";n.CommitDiffsLocationId="615588d5-c0c7-4b88-88f8-e625306446e8";n.ProjectCommitDiffsLocationId="29ba9926-be39-4db5-bbdf-d6c9458195c6";n.CommitsBatchLocationId="6400dfb2-0bcb-462b-b992-5a57f8f1416c";n.ProjectCommitsBatchLocationId="fed1587d-f1c8-475d-925c-b97f2c9dde50";n.PullRequestsLocationId="9946fd70-0d40-406e-b686-b4744cbbcc37";n.ProjectPullRequestsLocationId="5318bf6c-115f-4828-ba3e-73eca825c276";n.SuggestionsLocationId="9393B4FB-4445-4919-972B-9AD16F442D83";n.PullRequestReviewersLocationId="4b6702c7-aa35-4b89-9c96-b9abf6d3e540";n.ProjectPullRequestReviewersLocationId="1d5702f2-90e2-4fe0-8794-4fcd822adb9b";n.PullRequestWorkItemsLocationId="0A637FCC-5370-4CE8-B0E8-98091F5F9482";n.ProjectPullRequestWorkItemsLocationId="A92EC66C-5851-41A4-A96B-4A0860958844";n.TemplatesLocationId="F88D498E-52C3-422A-A5F2-994F4265A25B";n.HeadsFilter="heads";n.TagsFilter="tags";n.AreaName="git"}(r=t.GitWebApiConstants||(t.GitWebApiConstants={})),function(n){n.TfvcChangesetsLocationId="0bc8f0a4-6bfb-42a9-ba84-139da7b99c49";n.TfvcChangesetChangesLocationId="f32b86f2-15b9-4fe6-81b1-6f8938617ee5";n.TfvcChangesetWorkItemsLocationId="64ae0bea-1d71-47c9-a9e5-fe73f5ea0ff4";n.TfvcChangesetBatchLocationId="b7e7c173-803c-4fea-9ec8-31ee35c5502a";n.VersionControlProjectInfoLocationId="0755ef73-0a92-4221-a902-6aae57503c2c";n.VersionControlProjectInfosLocationId="252d9c40-0643-41cf-85b2-044d80f9b675";n.TfvcItemsLocationId="ba9fc436-9a38-4578-89d6-e4f3241f5040";n.TfvcItemBatchLocationId="fe6f827b-5f64-480f-b8af-1eca3b80e833";n.TfvcShelvesetsLocationId="e36d44fb-e907-4b0a-b194-f83f1ed32ad3";n.TfvcShelvesetLocationId="6aad49e3-4ded-45da-aabd-2f19d35266c7";n.TfvcShelvesetChangesLocationId="31db9770-7614-4718-b0a5-75d2a1e625ff";n.TfvcQueryParamShelvesetChangesLocationId="dbaf075b-0445-4c34-9e5b-82292f856522";n.TfvcShelvesetWorkItemsLocationId="9a1a13e2-a285-4bc9-aa26-b0906cd3c851";n.TfvcQueryParamShelvesetWorkItemsLocationId="a7a0c1c1-373e-425a-b031-a519474d743d";n.TfvcLabelsLocationId="a5d9bd7f-b661-4d0e-b9be-d9c16affae54";n.TfvcLabelItemsLocationId="06166e34-de17-4b60-8cd1-23182a346fda";n.TfvcBranchesLocationId="bc1f417e-239d-42e7-85e1-76e80cb2d6eb";n.AreaName="tfvc";n.RootFolder="$/"}(u=t.TfvcConstants||(t.TfvcConstants={}))});
define("TFS/VersionControl/Contracts",["require","exports","TFS/Core/Contracts"],function(n,t,i){"use strict";var r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht;(function(n){n[n.Unknown=0]="Unknown";n[n.Active=1]="Active";n[n.Fixed=2]="Fixed";n[n.WontFix=3]="WontFix";n[n.Closed=4]="Closed";n[n.ByDesign=5]="ByDesign";n[n.Pending=6]="Pending"})(t.CommentThreadStatus||(t.CommentThreadStatus={}));r=t.CommentThreadStatus,function(n){n[n.Unknown=0]="Unknown";n[n.Text=1]="Text";n[n.CodeChange=2]="CodeChange";n[n.System=3]="System"}(t.CommentType||(t.CommentType={}));u=t.CommentType,function(n){n[n.Queued=1]="Queued";n[n.InProgress=2]="InProgress";n[n.Completed=3]="Completed";n[n.Failed=4]="Failed";n[n.Abandoned=5]="Abandoned"}(t.GitAsyncOperationStatus||(t.GitAsyncOperationStatus={}));f=t.GitAsyncOperationStatus,function(n){n[n.None=0]="None";n[n.AddAdd=1]="AddAdd";n[n.AddRename=2]="AddRename";n[n.DeleteEdit=3]="DeleteEdit";n[n.DeleteRename=4]="DeleteRename";n[n.DirectoryFile=5]="DirectoryFile";n[n.DirectoryChild=6]="DirectoryChild";n[n.EditDelete=7]="EditDelete";n[n.EditEdit=8]="EditEdit";n[n.FileDirectory=9]="FileDirectory";n[n.Rename1to2=10]="Rename1to2";n[n.Rename2to1=11]="Rename2to1";n[n.RenameAdd=12]="RenameAdd";n[n.RenameDelete=13]="RenameDelete";n[n.RenameRename=14]="RenameRename"}(t.GitConflictType||(t.GitConflictType={}));e=t.GitConflictType,function(n){n[n.Bad=0]="Bad";n[n.Commit=1]="Commit";n[n.Tree=2]="Tree";n[n.Blob=3]="Blob";n[n.Tag=4]="Tag";n[n.Ext2=5]="Ext2";n[n.OfsDelta=6]="OfsDelta";n[n.RefDelta=7]="RefDelta"}(t.GitObjectType||(t.GitObjectType={}));o=t.GitObjectType,function(n){n[n.None=0]="None";n[n.Edit=1]="Edit";n[n.Delete=2]="Delete";n[n.Add=3]="Add";n[n.Rename=4]="Rename"}(t.GitPathActions||(t.GitPathActions={}));s=t.GitPathActions,function(n){n[n.NotSet=0]="NotSet";n[n.LastMergeCommit=1]="LastMergeCommit";n[n.Commit=2]="Commit"}(t.GitPullRequestQueryType||(t.GitPullRequestQueryType={}));h=t.GitPullRequestQueryType,function(n){n[n.ChangeEntry=0]="ChangeEntry";n[n.Attachment=1]="Attachment"}(t.GitPullRequestReviewFileType||(t.GitPullRequestReviewFileType={}));c=t.GitPullRequestReviewFileType,function(n){n[n.BestEffort=0]="BestEffort";n[n.AllOrNone=1]="AllOrNone"}(t.GitRefUpdateMode||(t.GitRefUpdateMode={}));l=t.GitRefUpdateMode,function(n){n[n.Succeeded=0]="Succeeded";n[n.ForcePushRequired=1]="ForcePushRequired";n[n.StaleOldObjectId=2]="StaleOldObjectId";n[n.InvalidRefName=3]="InvalidRefName";n[n.Unprocessed=4]="Unprocessed";n[n.UnresolvableToCommit=5]="UnresolvableToCommit";n[n.WritePermissionRequired=6]="WritePermissionRequired";n[n.ManageNotePermissionRequired=7]="ManageNotePermissionRequired";n[n.CreateBranchPermissionRequired=8]="CreateBranchPermissionRequired";n[n.CreateTagPermissionRequired=9]="CreateTagPermissionRequired";n[n.RejectedByPlugin=10]="RejectedByPlugin";n[n.Locked=11]="Locked";n[n.RefNameConflict=12]="RefNameConflict";n[n.RejectedByPolicy=13]="RejectedByPolicy";n[n.SucceededNonExistentRef=14]="SucceededNonExistentRef";n[n.SucceededCorruptRef=15]="SucceededCorruptRef"}(t.GitRefUpdateStatus||(t.GitRefUpdateStatus={}));a=t.GitRefUpdateStatus,function(n){n[n.None=0]="None";n[n.MergeContentNotFound=1]="MergeContentNotFound";n[n.PathInUse=2]="PathInUse";n[n.InvalidPath=3]="InvalidPath";n[n.UnknownAction=4]="UnknownAction";n[n.UnknownMergeType=5]="UnknownMergeType";n[n.OtherError=255]="OtherError"}(t.GitResolutionError||(t.GitResolutionError={}));v=t.GitResolutionError,function(n){n[n.Undecided=0]="Undecided";n[n.TakeSourceContent=1]="TakeSourceContent";n[n.TakeTargetContent=2]="TakeTargetContent";n[n.AutoMerged=3]="AutoMerged";n[n.UserMerged=4]="UserMerged"}(t.GitResolutionMergeType||(t.GitResolutionMergeType={}));y=t.GitResolutionMergeType,function(n){n[n.Undecided=0]="Undecided";n[n.KeepSourceRenameTarget=1]="KeepSourceRenameTarget";n[n.KeepSourceDeleteTarget=2]="KeepSourceDeleteTarget";n[n.KeepTargetRenameSource=3]="KeepTargetRenameSource";n[n.KeepTargetDeleteSource=4]="KeepTargetDeleteSource"}(t.GitResolutionPathConflictAction||(t.GitResolutionPathConflictAction={}));p=t.GitResolutionPathConflictAction,function(n){n[n.Undecided=0]="Undecided";n[n.KeepSourcePath=1]="KeepSourcePath";n[n.KeepTargetPath=2]="KeepTargetPath";n[n.KeepBothFiles=3]="KeepBothFiles"}(t.GitResolutionRename1to2Action||(t.GitResolutionRename1to2Action={}));w=t.GitResolutionRename1to2Action,function(n){n[n.Unresolved=0]="Unresolved";n[n.PartiallyResolved=1]="PartiallyResolved";n[n.Resolved=2]="Resolved"}(t.GitResolutionStatus||(t.GitResolutionStatus={}));b=t.GitResolutionStatus,function(n){n[n.Undecided=0]="Undecided";n[n.PickSourceAction=1]="PickSourceAction";n[n.PickTargetAction=2]="PickTargetAction"}(t.GitResolutionWhichAction||(t.GitResolutionWhichAction={}));k=t.GitResolutionWhichAction,function(n){n[n.NotSet=0]="NotSet";n[n.Pending=1]="Pending";n[n.Succeeded=2]="Succeeded";n[n.Failed=3]="Failed";n[n.Error=4]="Error"}(t.GitStatusState||(t.GitStatusState={}));d=t.GitStatusState,function(n){n[n.None=0]="None";n[n.PreviousChange=1]="PreviousChange";n[n.FirstParent=2]="FirstParent"}(t.GitVersionOptions||(t.GitVersionOptions={}));g=t.GitVersionOptions,function(n){n[n.Branch=0]="Branch";n[n.Tag=1]="Tag";n[n.Commit=2]="Commit";n[n.Index=3]="Index"}(t.GitVersionType||(t.GitVersionType={}));nt=t.GitVersionType,function(n){n[n.RawText=0]="RawText";n[n.Base64Encoded=1]="Base64Encoded"}(t.ItemContentType||(t.ItemContentType={}));tt=t.ItemContentType,function(n){n[n.NotSet=0]="NotSet";n[n.Queued=1]="Queued";n[n.Conflicts=2]="Conflicts";n[n.Succeeded=3]="Succeeded";n[n.RejectedByPolicy=4]="RejectedByPolicy";n[n.Failure=5]="Failure"}(t.PullRequestAsyncStatus||(t.PullRequestAsyncStatus={}));it=t.PullRequestAsyncStatus,function(n){n[n.NotSet=0]="NotSet";n[n.Active=1]="Active";n[n.Abandoned=2]="Abandoned";n[n.Completed=3]="Completed";n[n.All=4]="All"}(t.PullRequestStatus||(t.PullRequestStatus={}));rt=t.PullRequestStatus,function(n){n[n.Invalid=0]="Invalid";n[n.Folder=1]="Folder";n[n.Ref=2]="Ref"}(t.RefFavoriteType||(t.RefFavoriteType={}));ut=t.RefFavoriteType,function(n){n[n.Unknown=0]="Unknown";n[n.AndroidStudio=1]="AndroidStudio";n[n.AppCode=2]="AppCode";n[n.CLion=3]="CLion";n[n.DataGrip=4]="DataGrip";n[n.Eclipse=13]="Eclipse";n[n.IntelliJ=5]="IntelliJ";n[n.MPS=6]="MPS";n[n.PhpStorm=7]="PhpStorm";n[n.PyCharm=8]="PyCharm";n[n.RubyMine=9]="RubyMine";n[n.Tower=10]="Tower";n[n.VisualStudio=11]="VisualStudio";n[n.WebStorm=12]="WebStorm"}(t.SupportedIdeType||(t.SupportedIdeType={}));ft=t.SupportedIdeType,function(n){n[n.None=0]="None";n[n.Previous=1]="Previous";n[n.UseRename=2]="UseRename"}(t.TfvcVersionOption||(t.TfvcVersionOption={}));et=t.TfvcVersionOption,function(n){n[n.None=0]="None";n[n.Changeset=1]="Changeset";n[n.Shelveset=2]="Shelveset";n[n.Change=3]="Change";n[n.Date=4]="Date";n[n.Latest=5]="Latest";n[n.Tip=6]="Tip";n[n.MergeSource=7]="MergeSource"}(t.TfvcVersionType||(t.TfvcVersionType={}));ot=t.TfvcVersionType,function(n){n[n.None=0]="None";n[n.Add=1]="Add";n[n.Edit=2]="Edit";n[n.Encoding=4]="Encoding";n[n.Rename=8]="Rename";n[n.Delete=16]="Delete";n[n.Undelete=32]="Undelete";n[n.Branch=64]="Branch";n[n.Merge=128]="Merge";n[n.Lock=256]="Lock";n[n.Rollback=512]="Rollback";n[n.SourceRename=1024]="SourceRename";n[n.TargetRename=2048]="TargetRename";n[n.Property=4096]="Property";n[n.All=8191]="All"}(t.VersionControlChangeType||(t.VersionControlChangeType={}));st=t.VersionControlChangeType,function(n){n[n.None=0]="None";n[n.OneLevel=1]="OneLevel";n[n.OneLevelPlusNestedEmptyFolders=4]="OneLevelPlusNestedEmptyFolders";n[n.Full=120]="Full"}(t.VersionControlRecursionType||(t.VersionControlRecursionType={}));ht=t.VersionControlRecursionType;t.TypeInfo={Change:{},ChangeList:{},Comment:{},CommentThread:{},CommentThreadStatus:{enumValues:{unknown:0,active:1,fixed:2,wontFix:3,closed:4,byDesign:5,pending:6}},CommentType:{enumValues:{unknown:0,text:1,codeChange:2,system:3}},GitAsyncOperationStatus:{enumValues:{queued:1,inProgress:2,completed:3,failed:4,abandoned:5}},GitAsyncRefOperation:{},GitAsyncRefOperationParameters:{},GitAsyncRefOperationSource:{},GitBaseVersionDescriptor:{},GitBranchStats:{},GitChange:{},GitCherryPick:{},GitCommit:{},GitCommitChanges:{},GitCommitDiffs:{},GitCommitRef:{},GitCommitToCreate:{},GitConflict:{},GitConflictAddAdd:{},GitConflictAddRename:{},GitConflictDeleteEdit:{},GitConflictDeleteRename:{},GitConflictDirectoryFile:{},GitConflictEditDelete:{},GitConflictEditEdit:{},GitConflictFileDirectory:{},GitConflictRename1to2:{},GitConflictRename2to1:{},GitConflictRenameAdd:{},GitConflictRenameDelete:{},GitConflictRenameRename:{},GitConflictType:{enumValues:{none:0,addAdd:1,addRename:2,deleteEdit:3,deleteRename:4,directoryFile:5,directoryChild:6,editDelete:7,editEdit:8,fileDirectory:9,rename1to2:10,rename2to1:11,renameAdd:12,renameDelete:13,renameRename:14}},GitDeletedRepository:{},GitHistoryQueryResults:{},GitImportRequest:{},GitItem:{},GitItemDescriptor:{},GitItemRequestData:{},GitLastChangeTreeItems:{},GitObjectType:{enumValues:{bad:0,commit:1,tree:2,blob:3,tag:4,ext2:5,ofsDelta:6,refDelta:7}},GitPathAction:{},GitPathActions:{enumValues:{none:0,edit:1,"delete":2,add:3,rename:4}},GitPathToItemsCollection:{},GitPullRequest:{},GitPullRequestChange:{},GitPullRequestCommentThread:{},GitPullRequestIteration:{},GitPullRequestIterationChanges:{},GitPullRequestQuery:{},GitPullRequestQueryInput:{},GitPullRequestQueryType:{enumValues:{notSet:0,lastMergeCommit:1,commit:2}},GitPullRequestReviewFileType:{enumValues:{changeEntry:0,attachment:1}},GitPullRequestSearchCriteria:{},GitPullRequestStatus:{},GitPush:{},GitPushEventData:{},GitPushRef:{},GitPushSearchCriteria:{},GitQueryBranchStatsCriteria:{},GitQueryCommitsCriteria:{},GitRef:{},GitRefFavorite:{},GitRefUpdateMode:{enumValues:{bestEffort:0,allOrNone:1}},GitRefUpdateResult:{},GitRefUpdateResultSet:{},GitRefUpdateStatus:{enumValues:{succeeded:0,forcePushRequired:1,staleOldObjectId:2,invalidRefName:3,unprocessed:4,unresolvableToCommit:5,writePermissionRequired:6,manageNotePermissionRequired:7,createBranchPermissionRequired:8,createTagPermissionRequired:9,rejectedByPlugin:10,locked:11,refNameConflict:12,rejectedByPolicy:13,succeededNonExistentRef:14,succeededCorruptRef:15}},GitResolutionError:{enumValues:{none:0,mergeContentNotFound:1,pathInUse:2,invalidPath:3,unknownAction:4,unknownMergeType:5,otherError:255}},GitResolutionMergeContent:{},GitResolutionMergeType:{enumValues:{undecided:0,takeSourceContent:1,takeTargetContent:2,autoMerged:3,userMerged:4}},GitResolutionPathConflict:{},GitResolutionPathConflictAction:{enumValues:{undecided:0,keepSourceRenameTarget:1,keepSourceDeleteTarget:2,keepTargetRenameSource:3,keepTargetDeleteSource:4}},GitResolutionPickOneAction:{},GitResolutionRename1to2:{},GitResolutionRename1to2Action:{enumValues:{undecided:0,keepSourcePath:1,keepTargetPath:2,keepBothFiles:3}},GitResolutionStatus:{enumValues:{unresolved:0,partiallyResolved:1,resolved:2}},GitResolutionWhichAction:{enumValues:{undecided:0,pickSourceAction:1,pickTargetAction:2}},GitRevert:{},GitStatus:{},GitStatusState:{enumValues:{notSet:0,pending:1,succeeded:2,failed:3,error:4}},GitTargetVersionDescriptor:{},GitTreeDiff:{},GitTreeDiffEntry:{},GitTreeDiffResponse:{},GitTreeEntryRef:{},GitTreeRef:{},GitUserDate:{},GitVersionDescriptor:{},GitVersionOptions:{enumValues:{none:0,previousChange:1,firstParent:2}},GitVersionType:{enumValues:{branch:0,tag:1,commit:2,index:3}},HistoryEntry:{},HistoryQueryResults:{},IncludedGitCommit:{},ItemContent:{},ItemContentType:{enumValues:{rawText:0,base64Encoded:1}},ItemDetailsOptions:{},PullRequestAsyncStatus:{enumValues:{notSet:0,queued:1,conflicts:2,succeeded:3,rejectedByPolicy:4,failure:5}},PullRequestStatus:{enumValues:{notSet:0,active:1,abandoned:2,completed:3,all:4}},RefFavoriteType:{enumValues:{invalid:0,folder:1,ref:2}},SupportedIde:{},SupportedIdeType:{enumValues:{unknown:0,androidStudio:1,appCode:2,cLion:3,dataGrip:4,eclipse:13,intelliJ:5,mPS:6,phpStorm:7,pyCharm:8,rubyMine:9,tower:10,visualStudio:11,webStorm:12}},TfvcBranch:{},TfvcBranchRef:{},TfvcChange:{},TfvcChangeset:{},TfvcChangesetRef:{},TfvcCheckinEventData:{},TfvcHistoryEntry:{},TfvcItem:{},TfvcItemDescriptor:{},TfvcItemRequestData:{},TfvcLabel:{},TfvcLabelRef:{},TfvcShelveset:{},TfvcShelvesetRef:{},TfvcVersionDescriptor:{},TfvcVersionOption:{enumValues:{none:0,previous:1,useRename:2}},TfvcVersionType:{enumValues:{none:0,changeset:1,shelveset:2,change:3,date:4,latest:5,tip:6,mergeSource:7}},UpdateRefsRequest:{},VersionControlChangeType:{enumValues:{none:0,add:1,edit:2,encoding:4,rename:8,"delete":16,undelete:32,branch:64,merge:128,lock:256,rollback:512,sourceRename:1024,targetRename:2048,property:4096,all:8191}},VersionControlProjectInfo:{},VersionControlRecursionType:{enumValues:{none:0,oneLevel:1,oneLevelPlusNestedEmptyFolders:4,full:120}}};t.TypeInfo.Change.fields={changeType:{enumType:t.TypeInfo.VersionControlChangeType},newContent:{typeInfo:t.TypeInfo.ItemContent}};t.TypeInfo.ChangeList.fields={changeCounts:{isDictionary:!0,dictionaryKeyEnumType:t.TypeInfo.VersionControlChangeType},creationDate:{isDate:!0},sortDate:{isDate:!0}};t.TypeInfo.Comment.fields={commentType:{enumType:t.TypeInfo.CommentType},lastUpdatedDate:{isDate:!0},publishedDate:{isDate:!0}};t.TypeInfo.CommentThread.fields={comments:{isArray:!0,typeInfo:t.TypeInfo.Comment},lastUpdatedDate:{isDate:!0},publishedDate:{isDate:!0},status:{enumType:t.TypeInfo.CommentThreadStatus}};t.TypeInfo.GitAsyncRefOperation.fields={parameters:{typeInfo:t.TypeInfo.GitAsyncRefOperationParameters},status:{enumType:t.TypeInfo.GitAsyncOperationStatus}};t.TypeInfo.GitAsyncRefOperationParameters.fields={source:{typeInfo:t.TypeInfo.GitAsyncRefOperationSource}};t.TypeInfo.GitAsyncRefOperationSource.fields={commitList:{isArray:!0,typeInfo:t.TypeInfo.GitCommitRef}};t.TypeInfo.GitBaseVersionDescriptor.fields={baseVersionOptions:{enumType:t.TypeInfo.GitVersionOptions},baseVersionType:{enumType:t.TypeInfo.GitVersionType},versionOptions:{enumType:t.TypeInfo.GitVersionOptions},versionType:{enumType:t.TypeInfo.GitVersionType}};t.TypeInfo.GitBranchStats.fields={commit:{typeInfo:t.TypeInfo.GitCommitRef}};t.TypeInfo.GitChange.fields={changeType:{enumType:t.TypeInfo.VersionControlChangeType},newContent:{typeInfo:t.TypeInfo.ItemContent}};t.TypeInfo.GitCherryPick.fields={parameters:{typeInfo:t.TypeInfo.GitAsyncRefOperationParameters},status:{enumType:t.TypeInfo.GitAsyncOperationStatus}};t.TypeInfo.GitCommit.fields={author:{typeInfo:t.TypeInfo.GitUserDate},changes:{isArray:!0,typeInfo:t.TypeInfo.GitChange},committer:{typeInfo:t.TypeInfo.GitUserDate},push:{typeInfo:t.TypeInfo.GitPushRef},statuses:{isArray:!0,typeInfo:t.TypeInfo.GitStatus}};t.TypeInfo.GitCommitChanges.fields={changes:{isArray:!0,typeInfo:t.TypeInfo.GitChange}};t.TypeInfo.GitCommitDiffs.fields={changeCounts:{isDictionary:!0,dictionaryKeyEnumType:t.TypeInfo.VersionControlChangeType},changes:{isArray:!0,typeInfo:t.TypeInfo.GitChange}};t.TypeInfo.GitCommitRef.fields={author:{typeInfo:t.TypeInfo.GitUserDate},changes:{isArray:!0,typeInfo:t.TypeInfo.GitChange},committer:{typeInfo:t.TypeInfo.GitUserDate},statuses:{isArray:!0,typeInfo:t.TypeInfo.GitStatus}};t.TypeInfo.GitCommitToCreate.fields={baseRef:{typeInfo:t.TypeInfo.GitRef},pathActions:{isArray:!0,typeInfo:t.TypeInfo.GitPathAction}};t.TypeInfo.GitConflict.fields={conflictType:{enumType:t.TypeInfo.GitConflictType},mergeBaseCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeSourceCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeTargetCommit:{typeInfo:t.TypeInfo.GitCommitRef},resolutionError:{enumType:t.TypeInfo.GitResolutionError},resolutionStatus:{enumType:t.TypeInfo.GitResolutionStatus},resolvedDate:{isDate:!0}};t.TypeInfo.GitConflictAddAdd.fields={conflictType:{enumType:t.TypeInfo.GitConflictType},mergeBaseCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeSourceCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeTargetCommit:{typeInfo:t.TypeInfo.GitCommitRef},resolution:{typeInfo:t.TypeInfo.GitResolutionMergeContent},resolutionError:{enumType:t.TypeInfo.GitResolutionError},resolutionStatus:{enumType:t.TypeInfo.GitResolutionStatus},resolvedDate:{isDate:!0}};t.TypeInfo.GitConflictAddRename.fields={conflictType:{enumType:t.TypeInfo.GitConflictType},mergeBaseCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeSourceCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeTargetCommit:{typeInfo:t.TypeInfo.GitCommitRef},resolution:{typeInfo:t.TypeInfo.GitResolutionPathConflict},resolutionError:{enumType:t.TypeInfo.GitResolutionError},resolutionStatus:{enumType:t.TypeInfo.GitResolutionStatus},resolvedDate:{isDate:!0}};t.TypeInfo.GitConflictDeleteEdit.fields={conflictType:{enumType:t.TypeInfo.GitConflictType},mergeBaseCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeSourceCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeTargetCommit:{typeInfo:t.TypeInfo.GitCommitRef},resolution:{typeInfo:t.TypeInfo.GitResolutionPickOneAction},resolutionError:{enumType:t.TypeInfo.GitResolutionError},resolutionStatus:{enumType:t.TypeInfo.GitResolutionStatus},resolvedDate:{isDate:!0}};t.TypeInfo.GitConflictDeleteRename.fields={conflictType:{enumType:t.TypeInfo.GitConflictType},mergeBaseCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeSourceCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeTargetCommit:{typeInfo:t.TypeInfo.GitCommitRef},resolution:{typeInfo:t.TypeInfo.GitResolutionPickOneAction},resolutionError:{enumType:t.TypeInfo.GitResolutionError},resolutionStatus:{enumType:t.TypeInfo.GitResolutionStatus},resolvedDate:{isDate:!0}};t.TypeInfo.GitConflictDirectoryFile.fields={conflictType:{enumType:t.TypeInfo.GitConflictType},mergeBaseCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeSourceCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeTargetCommit:{typeInfo:t.TypeInfo.GitCommitRef},resolution:{typeInfo:t.TypeInfo.GitResolutionPathConflict},resolutionError:{enumType:t.TypeInfo.GitResolutionError},resolutionStatus:{enumType:t.TypeInfo.GitResolutionStatus},resolvedDate:{isDate:!0},sourceTree:{typeInfo:t.TypeInfo.GitTreeRef}};t.TypeInfo.GitConflictEditDelete.fields={conflictType:{enumType:t.TypeInfo.GitConflictType},mergeBaseCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeSourceCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeTargetCommit:{typeInfo:t.TypeInfo.GitCommitRef},resolution:{typeInfo:t.TypeInfo.GitResolutionPickOneAction},resolutionError:{enumType:t.TypeInfo.GitResolutionError},resolutionStatus:{enumType:t.TypeInfo.GitResolutionStatus},resolvedDate:{isDate:!0}};t.TypeInfo.GitConflictEditEdit.fields={conflictType:{enumType:t.TypeInfo.GitConflictType},mergeBaseCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeSourceCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeTargetCommit:{typeInfo:t.TypeInfo.GitCommitRef},resolution:{typeInfo:t.TypeInfo.GitResolutionMergeContent},resolutionError:{enumType:t.TypeInfo.GitResolutionError},resolutionStatus:{enumType:t.TypeInfo.GitResolutionStatus},resolvedDate:{isDate:!0}};t.TypeInfo.GitConflictFileDirectory.fields={conflictType:{enumType:t.TypeInfo.GitConflictType},mergeBaseCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeSourceCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeTargetCommit:{typeInfo:t.TypeInfo.GitCommitRef},resolution:{typeInfo:t.TypeInfo.GitResolutionPathConflict},resolutionError:{enumType:t.TypeInfo.GitResolutionError},resolutionStatus:{enumType:t.TypeInfo.GitResolutionStatus},resolvedDate:{isDate:!0},targetTree:{typeInfo:t.TypeInfo.GitTreeRef}};t.TypeInfo.GitConflictRename1to2.fields={conflictType:{enumType:t.TypeInfo.GitConflictType},mergeBaseCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeSourceCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeTargetCommit:{typeInfo:t.TypeInfo.GitCommitRef},resolution:{typeInfo:t.TypeInfo.GitResolutionRename1to2},resolutionError:{enumType:t.TypeInfo.GitResolutionError},resolutionStatus:{enumType:t.TypeInfo.GitResolutionStatus},resolvedDate:{isDate:!0}};t.TypeInfo.GitConflictRename2to1.fields={conflictType:{enumType:t.TypeInfo.GitConflictType},mergeBaseCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeSourceCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeTargetCommit:{typeInfo:t.TypeInfo.GitCommitRef},resolution:{typeInfo:t.TypeInfo.GitResolutionPathConflict},resolutionError:{enumType:t.TypeInfo.GitResolutionError},resolutionStatus:{enumType:t.TypeInfo.GitResolutionStatus},resolvedDate:{isDate:!0}};t.TypeInfo.GitConflictRenameAdd.fields={conflictType:{enumType:t.TypeInfo.GitConflictType},mergeBaseCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeSourceCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeTargetCommit:{typeInfo:t.TypeInfo.GitCommitRef},resolution:{typeInfo:t.TypeInfo.GitResolutionPathConflict},resolutionError:{enumType:t.TypeInfo.GitResolutionError},resolutionStatus:{enumType:t.TypeInfo.GitResolutionStatus},resolvedDate:{isDate:!0}};t.TypeInfo.GitConflictRenameDelete.fields={conflictType:{enumType:t.TypeInfo.GitConflictType},mergeBaseCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeSourceCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeTargetCommit:{typeInfo:t.TypeInfo.GitCommitRef},resolution:{typeInfo:t.TypeInfo.GitResolutionPickOneAction},resolutionError:{enumType:t.TypeInfo.GitResolutionError},resolutionStatus:{enumType:t.TypeInfo.GitResolutionStatus},resolvedDate:{isDate:!0}};t.TypeInfo.GitConflictRenameRename.fields={conflictType:{enumType:t.TypeInfo.GitConflictType},mergeBaseCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeSourceCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeTargetCommit:{typeInfo:t.TypeInfo.GitCommitRef},resolution:{typeInfo:t.TypeInfo.GitResolutionMergeContent},resolutionError:{enumType:t.TypeInfo.GitResolutionError},resolutionStatus:{enumType:t.TypeInfo.GitResolutionStatus},resolvedDate:{isDate:!0}};t.TypeInfo.GitDeletedRepository.fields={createdDate:{isDate:!0},deletedDate:{isDate:!0}};t.TypeInfo.GitHistoryQueryResults.fields={};t.TypeInfo.GitImportRequest.fields={status:{enumType:t.TypeInfo.GitAsyncOperationStatus}};t.TypeInfo.GitItem.fields={gitObjectType:{enumType:t.TypeInfo.GitObjectType},latestProcessedChange:{typeInfo:t.TypeInfo.GitCommitRef}};t.TypeInfo.GitItemDescriptor.fields={recursionLevel:{enumType:t.TypeInfo.VersionControlRecursionType},versionOptions:{enumType:t.TypeInfo.GitVersionOptions},versionType:{enumType:t.TypeInfo.GitVersionType}};t.TypeInfo.GitItemRequestData.fields={itemDescriptors:{isArray:!0,typeInfo:t.TypeInfo.GitItemDescriptor}};t.TypeInfo.GitLastChangeTreeItems.fields={lastExploredTime:{isDate:!0}};t.TypeInfo.GitPathAction.fields={action:{enumType:t.TypeInfo.GitPathActions}};t.TypeInfo.GitPathToItemsCollection.fields={items:{isDictionary:!0,dictionaryValueFieldInfo:{isArray:!0,typeInfo:t.TypeInfo.GitItem}}};t.TypeInfo.GitPullRequest.fields={closedDate:{isDate:!0},commits:{isArray:!0,typeInfo:t.TypeInfo.GitCommitRef},completionQueueTime:{isDate:!0},creationDate:{isDate:!0},lastMergeCommit:{typeInfo:t.TypeInfo.GitCommitRef},lastMergeSourceCommit:{typeInfo:t.TypeInfo.GitCommitRef},lastMergeTargetCommit:{typeInfo:t.TypeInfo.GitCommitRef},mergeStatus:{enumType:t.TypeInfo.PullRequestAsyncStatus},status:{enumType:t.TypeInfo.PullRequestStatus}};t.TypeInfo.GitPullRequestChange.fields={changeType:{enumType:t.TypeInfo.VersionControlChangeType},newContent:{typeInfo:t.TypeInfo.ItemContent}};t.TypeInfo.GitPullRequestCommentThread.fields={comments:{isArray:!0,typeInfo:t.TypeInfo.Comment},lastUpdatedDate:{isDate:!0},publishedDate:{isDate:!0},status:{enumType:t.TypeInfo.CommentThreadStatus}};t.TypeInfo.GitPullRequestIteration.fields={changeList:{isArray:!0,typeInfo:t.TypeInfo.GitPullRequestChange},commits:{isArray:!0,typeInfo:t.TypeInfo.GitCommitRef},commonRefCommit:{typeInfo:t.TypeInfo.GitCommitRef},createdDate:{isDate:!0},push:{typeInfo:t.TypeInfo.GitPushRef},sourceRefCommit:{typeInfo:t.TypeInfo.GitCommitRef},targetRefCommit:{typeInfo:t.TypeInfo.GitCommitRef},updatedDate:{isDate:!0}};t.TypeInfo.GitPullRequestIterationChanges.fields={changeEntries:{isArray:!0,typeInfo:t.TypeInfo.GitPullRequestChange}};t.TypeInfo.GitPullRequestQuery.fields={queries:{isArray:!0,typeInfo:t.TypeInfo.GitPullRequestQueryInput}};t.TypeInfo.GitPullRequestQueryInput.fields={type:{enumType:t.TypeInfo.GitPullRequestQueryType}};t.TypeInfo.GitPullRequestSearchCriteria.fields={status:{enumType:t.TypeInfo.PullRequestStatus}};t.TypeInfo.GitPullRequestStatus.fields={creationDate:{isDate:!0},state:{enumType:t.TypeInfo.GitStatusState},updatedDate:{isDate:!0}};t.TypeInfo.GitPush.fields={commits:{isArray:!0,typeInfo:t.TypeInfo.GitCommitRef},date:{isDate:!0}};t.TypeInfo.GitPushEventData.fields={commits:{isArray:!0,typeInfo:t.TypeInfo.GitCommit}};t.TypeInfo.GitPushRef.fields={date:{isDate:!0}};t.TypeInfo.GitPushSearchCriteria.fields={fromDate:{isDate:!0},toDate:{isDate:!0}};t.TypeInfo.GitQueryBranchStatsCriteria.fields={baseCommit:{typeInfo:t.TypeInfo.GitVersionDescriptor},targetCommits:{isArray:!0,typeInfo:t.TypeInfo.GitVersionDescriptor}};t.TypeInfo.GitQueryCommitsCriteria.fields={compareVersion:{typeInfo:t.TypeInfo.GitVersionDescriptor},itemVersion:{typeInfo:t.TypeInfo.GitVersionDescriptor}};t.TypeInfo.GitRef.fields={statuses:{isArray:!0,typeInfo:t.TypeInfo.GitStatus}};t.TypeInfo.GitRefFavorite.fields={type:{enumType:t.TypeInfo.RefFavoriteType}};t.TypeInfo.GitRefUpdateResult.fields={updateStatus:{enumType:t.TypeInfo.GitRefUpdateStatus}};t.TypeInfo.GitRefUpdateResultSet.fields={pushTime:{isDate:!0},results:{isArray:!0,typeInfo:t.TypeInfo.GitRefUpdateResult}};t.TypeInfo.GitResolutionMergeContent.fields={mergeType:{enumType:t.TypeInfo.GitResolutionMergeType}};t.TypeInfo.GitResolutionPathConflict.fields={action:{enumType:t.TypeInfo.GitResolutionPathConflictAction}};t.TypeInfo.GitResolutionPickOneAction.fields={action:{enumType:t.TypeInfo.GitResolutionWhichAction}};t.TypeInfo.GitResolutionRename1to2.fields={action:{enumType:t.TypeInfo.GitResolutionRename1to2Action},mergeType:{enumType:t.TypeInfo.GitResolutionMergeType}};t.TypeInfo.GitRevert.fields={parameters:{typeInfo:t.TypeInfo.GitAsyncRefOperationParameters},status:{enumType:t.TypeInfo.GitAsyncOperationStatus}};t.TypeInfo.GitStatus.fields={creationDate:{isDate:!0},state:{enumType:t.TypeInfo.GitStatusState},updatedDate:{isDate:!0}};t.TypeInfo.GitTargetVersionDescriptor.fields={targetVersionOptions:{enumType:t.TypeInfo.GitVersionOptions},targetVersionType:{enumType:t.TypeInfo.GitVersionType},versionOptions:{enumType:t.TypeInfo.GitVersionOptions},versionType:{enumType:t.TypeInfo.GitVersionType}};t.TypeInfo.GitTreeDiff.fields={diffEntries:{isArray:!0,typeInfo:t.TypeInfo.GitTreeDiffEntry}};t.TypeInfo.GitTreeDiffEntry.fields={changeType:{enumType:t.TypeInfo.VersionControlChangeType},objectType:{enumType:t.TypeInfo.GitObjectType}};t.TypeInfo.GitTreeDiffResponse.fields={treeDiff:{typeInfo:t.TypeInfo.GitTreeDiff}};t.TypeInfo.GitTreeEntryRef.fields={gitObjectType:{enumType:t.TypeInfo.GitObjectType}};t.TypeInfo.GitTreeRef.fields={treeEntries:{isArray:!0,typeInfo:t.TypeInfo.GitTreeEntryRef}};t.TypeInfo.GitUserDate.fields={date:{isDate:!0}};t.TypeInfo.GitVersionDescriptor.fields={versionOptions:{enumType:t.TypeInfo.GitVersionOptions},versionType:{enumType:t.TypeInfo.GitVersionType}};t.TypeInfo.HistoryEntry.fields={itemChangeType:{enumType:t.TypeInfo.VersionControlChangeType}};t.TypeInfo.HistoryQueryResults.fields={};t.TypeInfo.IncludedGitCommit.fields={commitTime:{isDate:!0}};t.TypeInfo.ItemContent.fields={contentType:{enumType:t.TypeInfo.ItemContentType}};t.TypeInfo.ItemDetailsOptions.fields={recursionLevel:{enumType:t.TypeInfo.VersionControlRecursionType}};t.TypeInfo.SupportedIde.fields={ideType:{enumType:t.TypeInfo.SupportedIdeType}};t.TypeInfo.TfvcBranch.fields={children:{isArray:!0,typeInfo:t.TypeInfo.TfvcBranch},createdDate:{isDate:!0}};t.TypeInfo.TfvcBranchRef.fields={createdDate:{isDate:!0}};t.TypeInfo.TfvcChange.fields={changeType:{enumType:t.TypeInfo.VersionControlChangeType},newContent:{typeInfo:t.TypeInfo.ItemContent}};t.TypeInfo.TfvcChangeset.fields={changes:{isArray:!0,typeInfo:t.TypeInfo.TfvcChange},createdDate:{isDate:!0}};t.TypeInfo.TfvcChangesetRef.fields={createdDate:{isDate:!0}};t.TypeInfo.TfvcCheckinEventData.fields={changeset:{typeInfo:t.TypeInfo.TfvcChangeset}};t.TypeInfo.TfvcHistoryEntry.fields={itemChangeType:{enumType:t.TypeInfo.VersionControlChangeType}};t.TypeInfo.TfvcItem.fields={changeDate:{isDate:!0}};t.TypeInfo.TfvcItemDescriptor.fields={recursionLevel:{enumType:t.TypeInfo.VersionControlRecursionType},versionOption:{enumType:t.TypeInfo.TfvcVersionOption},versionType:{enumType:t.TypeInfo.TfvcVersionType}};t.TypeInfo.TfvcItemRequestData.fields={itemDescriptors:{isArray:!0,typeInfo:t.TypeInfo.TfvcItemDescriptor}};t.TypeInfo.TfvcLabel.fields={items:{isArray:!0,typeInfo:t.TypeInfo.TfvcItem},modifiedDate:{isDate:!0}};t.TypeInfo.TfvcLabelRef.fields={modifiedDate:{isDate:!0}};t.TypeInfo.TfvcShelveset.fields={changes:{isArray:!0,typeInfo:t.TypeInfo.TfvcChange},createdDate:{isDate:!0}};t.TypeInfo.TfvcShelvesetRef.fields={createdDate:{isDate:!0}};t.TypeInfo.TfvcVersionDescriptor.fields={versionOption:{enumType:t.TypeInfo.TfvcVersionOption},versionType:{enumType:t.TypeInfo.TfvcVersionType}};t.TypeInfo.UpdateRefsRequest.fields={updateMode:{enumType:t.TypeInfo.GitRefUpdateMode}};t.TypeInfo.VersionControlProjectInfo.fields={defaultSourceControlType:{enumType:i.TypeInfo.SourceControlTypes}}});
define("VersionControl/Scripts/CommitIdHelper",["require","exports"],function(n,t){function i(n){return n&&/^[\da-fA-F]+$/.test(n)&&n.length<=t.SHA1_HASH_LENGTH}function r(n){return i(n)&&n.length===t.SHA1_HASH_LENGTH}function u(n){for(var i={fromVersion:""+n,toVersion:""+n};i.fromVersion.length<t.SHA1_HASH_LENGTH;)i.fromVersion+="0",i.toVersion+="f";return i}function f(n){return!n||n===t.EMPTY_OBJECT_ID}function e(n){return n?n.substr(0,t.SHORT_HASH_LENGTH):n}t.SHA1_HASH_LENGTH=40;t.EMPTY_OBJECT_ID="0000000000000000000000000000000000000000";t.SHORT_HASH_LENGTH=8;t.isValidPartialId=i;t.isValidId=r;t.getStartsWithSearchCriteria=u;t.isEmptyObjectId=f;t.getShortCommitId=e});
define("VersionControl/Scripts/GitIdentityHelper",["require","exports"],function(n,t){function i(n){var t=n.indexOf("<");return t>=0?$.trim(n.substr(0,t)):n}t.getUserNameWithoutEmail=i});
define("VersionControl/Scripts/VersionControlClientServiceBase",["require","exports","Presentation/Scripts/TFS/TFS.Legacy.Ajax","VSS/Utils/Core","VersionControl/Scripts/Resources/TFS.Resources.VersionControl","Presentation/Scripts/TFS/TFS.Service","VersionControl/Scripts/RepositoryType","VersionControl/Scripts/GitIdentityHelper","VSS/VSS","q"],function(n,t,i,r,u,f,e,o,s,h){var c=function(n){function t(){var t=this;n.apply(this,arguments);this.beginGetChangeListPromise=function(n,i,r){return t.invokeAndGetPromise(t.beginGetChangeList,n,i,r)};this.beginGetAssociatedWorkItemsPromise=function(n,i){return t.invokeAndGetPromise(t.beginGetAssociatedWorkItems,n,i)}}return __extends(t,n),t.prototype._getApiLocation=function(n){return this.getTfsContext().getActionUrl(n||"","versioncontrol",{area:"api"})},t.prototype.invokeAndGetPromise=function(n){for(var r=this,i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return h.Promise(function(t,u){var f=function(n){t(n)},e=function(n){u(n)};i.push(f,e);n.apply(r,i)})},t.prototype.beginGetItemContentJson=function(n,t,r,u,f,e,o,s,h){var l=this,c;c={repositoryId:n.getRepositoryId()||"",path:t,version:r,maxContentLength:u,includeBinaryContent:e,splitContentIntoLines:f};t&&t.length<1e3?i.getMSJSON(this._getApiLocation("itemContentJson"),c,o,function(t){l._handleJsonContentError(t,n,s)},h):i.postMSJSON(this._getApiLocation("itemContentJson"),c,o,function(t){l._handleJsonContentError(t,n,s)},h)},t.prototype._handleJsonContentError=function(n,t,i){n.xhr&&n.xhr.statusText==="parsererror"&&t.getRepositoryType()===e.RepositoryType.TFS&&(n=new Error(u.ContentJsonParseErrorTFS));$.isFunction(i)?i.call(this,n):s.errorHandler.showError(n)},t.prototype.beginGetFileDiff=function(n,t,u,f){var e=this;i.postMSJSON(this._getApiLocation("fileDiff"),{repositoryId:n.getRepositoryId()||"",diffParameters:r.stringifyMSJSON(t)},u,function(t){e._handleJsonContentError(t,n,f)})},t.prototype.beginGetFileDiffs=function(n,t,u,f){i.postMSJSON(this._getApiLocation("fileDiffs"),{repositoryId:n.getRepositoryId()||"",diffParameters:r.stringifyMSJSON(t)},u,f)},t.prototype.beginGetChangeList=function(n,t,r,u,f){var e=this,o={repositoryId:n.getRepositoryId()||"",version:t,maxChanges:r};i.getMSJSON(this._getApiLocation("change"),o,function(n){e._processChangeList(n);$.isFunction(u)&&u.call(e,n)},f)},t.prototype.beginFetchMoreChanges=function(n,t,i,r,u){var f=this;this.beginGetChangeListChanges(n,t.version,i,t.changes?t.changes.length:0,function(n){var u=n.results,i;t.changes=(t.changes||[]).concat(u);t.allChangesIncluded=!n.moreResultsAvailable;i=f._convertChangeCountsToObject(n.changeCounts);i&&(t.changeCounts&&$.each(t.changeCounts,function(n,t){i[n]=(i[n]||0)+t}),t.changeCounts=i);$.isFunction(r)&&r.call(f,t)},u)},t.prototype.beginGetChangeListChanges=function(n,t,r,u,f,e){var o={repositoryId:n.getRepositoryId()||"",version:t,maxChanges:r,skipCount:u};i.getMSJSON(this._getApiLocation("changeListChanges"),o,f,e)},t.prototype.beginGetAssociatedWorkItems=function(n,t,r,u){i.postMSJSON(this._getApiLocation("associatedWorkItems"),{repositoryId:n.getRepositoryId()||"",versions:t},r,u)},t.prototype.beginGetAuthors=function(n,t,r,u){var f=this;s.queueRequest(this,n,"_authors",t,r,function(t,r){i.getMSJSON(f._getApiLocation("authors"),{repositoryId:n.getRepositoryId()||""},function(n){t(n)},r,u)})},t.prototype.beginGetUserPreferences=function(n,t){var r=this;this._userPreferences?n.call(this,this._userPreferences):s.queueRequest(this,this,"_userPreferencesAsync",n,t,function(n,t){i.getMSJSON(r._getApiLocation("userPreferences"),{},function(t){r._userPreferences||(r._userPreferences=t);n(r._userPreferences)},t)})},t.prototype.beginUpdateUserPreferences=function(n,t,u){this._userPreferences=n;i.postHTML(this._getApiLocation("updateUserPreferences"),{preferences:r.stringifyMSJSON(n)},t,u)},t.prototype._setUserPreferencesFromViewData=function(n){this._userPreferences=n},t.prototype._getChangeListFromJsonIsland=function(n,t){var i=null;return n.length&&(i=r.parseMSJSON(n.html(),!1),i&&this._processChangeList(i),t&&n.remove()),i},t.prototype._processChangeList=function(n){if(n.changeCounts=this._convertChangeCountsToObject(n.changeCounts),n.author){var t=n;t.author.displayName||(t.author.displayName=o.getUserNameWithoutEmail(t.author.id))}},t.prototype.beginGetRepositoryOptions=function(n,t,r){var u=this;i.getMSJSON(this._getApiLocation("RepositoryOptions"),{repositoryId:n.getRepositoryId()},function(n){$.isFunction(t)&&t.call(u,n)},r)},t.prototype.beginUpdateRepositoryOption=function(n,t,r,u){var f=this;i.postHTML(this._getApiLocation("UpdateRepositoryOption"),{repositoryId:n.getRepositoryId(),option:JSON.stringify(t)},function(n){$.isFunction(r)&&r.call(f,n)},u)},t.prototype._convertChangeCountsToObject=function(n){var t=null;return n&&(t={},$.each(n,function(n,i){t[i.Key]=i.Value})),t},t}(f.TfsService);t.VersionControlClientServiceBase=c});
define("VersionControl/Scripts/Generated/TFS.VersionControl.Legacy.Contracts",["require","exports"],function(n,t){"use strict";var i,r,u,f;(function(n){n[n.None=0]="None";n[n.Add=1]="Add";n[n.Delete=2]="Delete";n[n.Edit=3]="Edit"})(t.FileDiffBlockChangeType||(t.FileDiffBlockChangeType={}));i=t.FileDiffBlockChangeType,function(n){n[n.Bad=0]="Bad";n[n.Commit=1]="Commit";n[n.Tree=2]="Tree";n[n.Blob=3]="Blob";n[n.Tag=4]="Tag";n[n.Ext2=5]="Ext2";n[n.OfsDelta=6]="OfsDelta";n[n.RefDelta=7]="RefDelta"}(t.GitObjectType||(t.GitObjectType={}));r=t.GitObjectType,function(n){n[n.None=0]="None";n[n.Add=1]="Add";n[n.Edit=2]="Edit";n[n.Encoding=4]="Encoding";n[n.Rename=8]="Rename";n[n.Delete=16]="Delete";n[n.Undelete=32]="Undelete";n[n.Branch=64]="Branch";n[n.Merge=128]="Merge";n[n.Lock=256]="Lock";n[n.Rollback=512]="Rollback";n[n.SourceRename=1024]="SourceRename";n[n.TargetRename=2048]="TargetRename";n[n.Property=4096]="Property";n[n.All=8191]="All"}(t.VersionControlChangeType||(t.VersionControlChangeType={}));u=t.VersionControlChangeType,function(n){n[n.None=0]="None";n[n.OneLevel=1]="OneLevel";n[n.OneLevelPlusNestedEmptyFolders=4]="OneLevelPlusNestedEmptyFolders";n[n.Full=2]="Full"}(t.VersionControlRecursionType||(t.VersionControlRecursionType={}));f=t.VersionControlRecursionType;t.TypeInfo={AuthorCounts:{},Change:{},ChangeList:{},ChangeQueryResults:{},FileCharDiffBlock:{},FileDiff:{},FileDiffBlock:{},FileDiffBlockChangeType:{enumValues:{none:0,add:1,"delete":2,edit:3}},GitAnnotateBatchResult:{},GitAnnotateResult:{},GitBranchDiff:{},GitChange:{},GitCommit:{},GitHistoryQueryResults:{},GitIdentityReference:{},GitItem:{},GitItemMetadata:{},GitObjectType:{enumValues:{bad:0,commit:1,tree:2,blob:3,tag:4,ext2:5,ofsDelta:6,refDelta:7}},GitSubmoduleItem:{},HistoryEntry:{},HistoryQueryResults:{},ItemDetailsOptions:{},ItemModel:{},TfsChange:{},TfsChangeList:{},TfsHistoryEntry:{},TfsItem:{},VersionControlChangeType:{enumValues:{none:0,add:1,edit:2,encoding:4,rename:8,"delete":16,undelete:32,branch:64,merge:128,lock:256,rollback:512,sourceRename:1024,targetRename:2048,property:4096,all:8191}},VersionControlRecursionType:{enumValues:{none:0,oneLevel:1,oneLevelPlusNestedEmptyFolders:4,full:2}}};t.TypeInfo.AuthorCounts.fields={lastChangeDate:{isDate:!0}};t.TypeInfo.Change.fields={changeType:{enumType:t.TypeInfo.VersionControlChangeType},item:{typeInfo:t.TypeInfo.ItemModel}};t.TypeInfo.ChangeList.fields={changeCounts:{isDictionary:!0,dictionaryKeyEnumType:t.TypeInfo.VersionControlChangeType},changes:{isArray:!0,typeInfo:t.TypeInfo.Change},creationDate:{isDate:!0},sortDate:{isDate:!0}};t.TypeInfo.ChangeQueryResults.fields={changeCounts:{isDictionary:!0,dictionaryKeyEnumType:t.TypeInfo.VersionControlChangeType},results:{isArray:!0,typeInfo:t.TypeInfo.Change}};t.TypeInfo.FileCharDiffBlock.fields={charChange:{isArray:!0,typeInfo:t.TypeInfo.FileDiffBlock},lineChange:{typeInfo:t.TypeInfo.FileDiffBlock}};t.TypeInfo.FileDiff.fields={blocks:{isArray:!0,typeInfo:t.TypeInfo.FileDiffBlock},lineCharBlocks:{isArray:!0,typeInfo:t.TypeInfo.FileCharDiffBlock},modifiedFile:{typeInfo:t.TypeInfo.ItemModel},originalFile:{typeInfo:t.TypeInfo.ItemModel}};t.TypeInfo.FileDiffBlock.fields={changeType:{enumType:t.TypeInfo.FileDiffBlockChangeType}};t.TypeInfo.GitAnnotateBatchResult.fields={diffs:{isArray:!0,typeInfo:t.TypeInfo.GitAnnotateResult}};t.TypeInfo.GitAnnotateResult.fields={diff:{typeInfo:t.TypeInfo.FileDiff}};t.TypeInfo.GitBranchDiff.fields={commit:{typeInfo:t.TypeInfo.GitCommit}};t.TypeInfo.GitChange.fields={changeType:{enumType:t.TypeInfo.VersionControlChangeType},item:{typeInfo:t.TypeInfo.ItemModel}};t.TypeInfo.GitCommit.fields={author:{typeInfo:t.TypeInfo.GitIdentityReference},changes:{isArray:!0,typeInfo:t.TypeInfo.Change},committer:{typeInfo:t.TypeInfo.GitIdentityReference},commitTime:{isDate:!0},creationDate:{isDate:!0},pushTime:{isDate:!0},sortDate:{isDate:!0},tree:{typeInfo:t.TypeInfo.GitItem}};t.TypeInfo.GitHistoryQueryResults.fields={results:{isArray:!0,typeInfo:t.TypeInfo.HistoryEntry}};t.TypeInfo.GitIdentityReference.fields={date:{isDate:!0}};t.TypeInfo.GitItem.fields={changeDate:{isDate:!0},childItems:{isArray:!0,typeInfo:t.TypeInfo.ItemModel},gitObjectType:{enumType:t.TypeInfo.GitObjectType}};t.TypeInfo.GitItemMetadata.fields={item:{typeInfo:t.TypeInfo.GitItem}};t.TypeInfo.GitSubmoduleItem.fields={changeDate:{isDate:!0},childItems:{isArray:!0,typeInfo:t.TypeInfo.ItemModel},gitObjectType:{enumType:t.TypeInfo.GitObjectType}};t.TypeInfo.HistoryEntry.fields={changeList:{typeInfo:t.TypeInfo.ChangeList},itemChangeType:{enumType:t.TypeInfo.VersionControlChangeType}};t.TypeInfo.HistoryQueryResults.fields={results:{isArray:!0,typeInfo:t.TypeInfo.HistoryEntry}};t.TypeInfo.ItemDetailsOptions.fields={recursionLevel:{enumType:t.TypeInfo.VersionControlRecursionType}};t.TypeInfo.ItemModel.fields={changeDate:{isDate:!0},childItems:{isArray:!0,typeInfo:t.TypeInfo.ItemModel}};t.TypeInfo.TfsChange.fields={changeType:{enumType:t.TypeInfo.VersionControlChangeType},item:{typeInfo:t.TypeInfo.ItemModel}};t.TypeInfo.TfsChangeList.fields={changes:{isArray:!0,typeInfo:t.TypeInfo.Change},creationDate:{isDate:!0},sortDate:{isDate:!0}};t.TypeInfo.TfsHistoryEntry.fields={changeList:{typeInfo:t.TypeInfo.ChangeList},itemChangeType:{enumType:t.TypeInfo.VersionControlChangeType}};t.TypeInfo.TfsItem.fields={changeDate:{isDate:!0},childItems:{isArray:!0,typeInfo:t.TypeInfo.ItemModel}}});
define("VersionControl/Scripts/GitItemUtils",["require","exports","VSS/Utils/String","VersionControl/Scripts/Resources/TFS.Resources.VersionControl","TFS/VersionControl/Contracts","VersionControl/Scripts/CommitIdHelper","VersionControl/Scripts/Generated/TFS.VersionControl.Legacy.Contracts"],function(n,t,i,r,u,f,e){function s(n,t){return{isSymLink:n.isSymLink,isFolder:n.isFolder,serverItem:n.path,version:t,contentMetadata:n.contentMetadata,gitObjectType:this._newToLegacyGitObjectType(n.gitObjectType),commitId:this._toGitObjectId(n.commitId),objectId:this._toGitObjectId(n.objectId),changeDate:null,childItems:null,versionDescription:null,url:null}}function h(n,t,i,r){var e,f,s,u;if(r=r||!1,e=n[0],f=this.gitItemToLegacyGitItem(e,t),f.childItems=[],f.versionDescription=this._getGitItemVersionDescription(e,i),r)for(s=o(n.slice(1)),u=0;u<s.length;u++)f.childItems.push(this.gitItemToLegacyGitItem(s[u],t));else for(u=1;u<n.length;u++)f.childItems.push(this.gitItemToLegacyGitItem(n[u],t));return f}function o(n){for(var u,f=!1,t=[],r=0;r<n.length;r++){if(!n[r].isFolder){t.push(n[r]);continue}for(f=!1,u=0;u<t.length;u++)if(t[u].isFolder&&i.startsWith(n[r].path,t[u].path+"/",i.defaultComparer)){t[u]=n[r];f=!0;break}f==!1&&t.push(n[r])}return t}function c(n,t){var u=t?t.version:null;return n&&n.commitId&&(u=n.commitId),u?i.format(r.CommitDescriptionFormat,f.getShortCommitId(u)):null}function l(n){return{full:n,short:f.getShortCommitId(n)}}function a(n){switch(n){case u.GitObjectType.Bad:return e.GitObjectType.Bad;case u.GitObjectType.Blob:return e.GitObjectType.Blob;case u.GitObjectType.Commit:return e.GitObjectType.Commit;case u.GitObjectType.Ext2:return e.GitObjectType.Ext2;case u.GitObjectType.OfsDelta:return e.GitObjectType.OfsDelta;case u.GitObjectType.RefDelta:return e.GitObjectType.RefDelta;case u.GitObjectType.Tag:return e.GitObjectType.Tag;case u.GitObjectType.Tree:return e.GitObjectType.Tree}}t.gitItemToLegacyGitItem=s;t.gitItemArrayToLegacyGitItem=h;t._combineNestedEmptyFolders=o;t._getGitItemVersionDescription=c;t._toGitObjectId=l;t._newToLegacyGitObjectType=a});
define("Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.WorkItemTracking.Constants",["require","exports"],function(n,t){var i,r,u;(function(n){n[n.Json=0]="Json";n[n.Html=1]="Html"})(t.QueryResultFormat||(t.QueryResultFormat={}));i=t.QueryResultFormat,function(n){n.WorkItemsLocationId="72C7DDF8-2CDC-4F60-90CD-AB71C14A399B";n.QueriesLocationId="A67D190C-C41F-424B-814D-0E906F659301";n.WorkItemTypeFieldsLocationId="BD293CE5-3D25-4192-8E67-E8092E879EFB";n.WorkItemRuleEngineLocationId="1A3A1536-DCA6-4509-B9C3-DD9BB2981506";n.AreaName="wit";n.DefaultPreviewApiVersion="1.0-Preview.2";n.DefaultReleaseApiVersion="1.0"}(r=t.WitConstants||(t.WitConstants={})),function(n){n.WorkItems="workItems"}(u=t.WorkItemTrackingRestResources||(t.WorkItemTrackingRestResources={}))});
define("VersionControl/Scripts/TFS.VersionControl.WebApi",["require","exports","TFS/VersionControl/Contracts","VersionControl/Scripts/Generated/TFS.VersionControl.Common","VSS/WebApi/RestClient","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.WorkItemTracking.Constants"],function(n,t,i,r,u,f,e){var s=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.beginGetAllRepositories=function(){return this._beginRequest({area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.RepositoriesLocationId,responseIsCollection:!0})},t.prototype.beginGetProjectRepositories=function(n){return this._beginRequest({area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.ProjectRepositoriesLocationId,routeValues:{projectId:n},responseIsCollection:!0})},t.prototype.beginGetRepository=function(n,t){return this._beginRequest({area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.ProjectRepositoriesLocationId,routeValues:{projectId:n,repositoryId:t}})},t.prototype.beginGetGitRefs=function(n,t){return this._beginRequest({area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.RefsLocationId,routeValues:{repositoryId:n,filter:t},responseType:i.TypeInfo.GitRef,responseIsCollection:!0})},t.prototype.beginGetGitRef=function(n,t,u){return u===void 0&&(u=!1),t.indexOf("refs/")===0&&(t=t.substr(5)),this._beginRequest({area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.RefsLocationId,queryParams:{filter:t,peelTags:u},routeValues:{repositoryId:n},responseType:i.TypeInfo.GitRef,responseIsCollection:!0})},t.prototype.beginGetGitRefsBatch=function(n,u){return this._beginRequest({httpMethod:"POST",area:r.GitWebApiConstants.AreaName,locationId:t.REFS_BATCH_LOCATION_ID,routeValues:{repositoryId:n},data:this.normalizeWithRefsPrefix(u),responseType:i.TypeInfo.GitRef,responseIsCollection:!0})},t.prototype.normalizeWithRefsPrefix=function(n){return n.map(function(n){return n.indexOf("refs/")===0?n:"refs/"+n})},t.prototype.beginUpdateGitRef=function(n,t,u,f){return this._beginRequest({httpMethod:"POST",area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.RefsLocationId,routeValues:{repositoryId:n},data:[{name:t,oldObjectId:u,newObjectId:f}],responseType:i.TypeInfo.GitRefUpdateResult,responseIsCollection:!0})},t.prototype.beginCreateRepository=function(n,t,i){return this._beginRequest({httpMethod:"POST",area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.RepositoriesLocationId,data:{project:{id:n,name:t},name:i}})},t.prototype.beginRenameRepository=function(n,t){return this._beginRequest({httpMethod:"PATCH",httpResponseType:"html",area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.RepositoriesLocationId,routeValues:{repositoryId:n},data:{name:t}})},t.prototype.beginDeleteRepository=function(n){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.RepositoriesLocationId,routeValues:{repositoryId:n}})},t.prototype.beginGetCommits=function(n,t){var f=this,u=jQuery.Deferred();return this._beginRequestWithAjaxResult({httpMethod:"POST",area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.CommitsBatchLocationId,routeValues:{repositoryId:n},data:t,responseType:i.TypeInfo.GitCommitRef,responseIsCollection:!0}).spread(function(n,t,i){var r=f._getLinkResponseHeaders(i);u.resolve({commits:n,startingCommitId:r.startingCommitId,hasMore:!!r.next,stillProcessing:(i.getResponseHeader("Still-Processing")||"").toLowerCase()==="true"})},u.reject),u.promise()},t.prototype.beginPushChanges=function(n,t){return this._beginRequest({httpMethod:"POST",area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.PushesLocationId,routeValues:{repositoryId:n},data:t,requestType:i.TypeInfo.GitPush,responseType:i.TypeInfo.GitPush})},t.prototype.beginGetCommitDiffs=function(n,t,u,f,e,o){return this._beginRequest({httpMethod:"GET",area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.CommitDiffsLocationId,routeValues:{repositoryId:n},data:{baseVersion:t.version,baseVersionType:t.versionType,baseVersionOptions:t.versionOptions,targetVersion:u.version,targetVersionType:u.versionType,targetVersionOptions:u.versionOptions,diffCommonCommit:f,$top:e,$skip:o},responseType:i.TypeInfo.GitCommitDiffs})},t.prototype.beginGetPush=function(n,t,u,f){return this._beginRequest({httpMethod:"GET",area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.PushesLocationId,routeValues:{repositoryId:n,pushId:t},data:{includeCommits:u,includeRefUpdates:f},responseType:i.TypeInfo.GitPush})},t.prototype.beginGetPushes=function(n,t,u,f){return this._beginRequest({httpMethod:"GET",area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.PushesLocationId,routeValues:{repositoryId:n},data:$.extend({$top:u,$skip:f},t),requestType:i.TypeInfo.GitPushSearchCriteria,responseType:i.TypeInfo.GitPushRef,responseIsCollection:!0})},t.prototype.beginGetItems=function(n,t){var u={httpMethod:"POST",area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.ItemsBatchLocationId,routeValues:{repositoryId:n},data:t,responseType:i.TypeInfo.GitItem,responseIsCollection:!0};return this._beginRequest(u)},t.prototype.beginGetItem=function(n,t,i,r,u,f,e,o){return this._beginGetItem(n,t,i,r,u,f,e,o,0,null)},t.prototype._beginGetItem=function(n,t,u,f,e,o,s,h,c,l){var v={path:t,scopePath:u,recursionLevel:e,includeContentMetadata:o,latestProcessedChange:s,download:h},a;return f&&(v=$.extend(f,v)),a={httpMethod:"GET",area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.ItemsLocationId,routeValues:{repositoryId:n},data:v,responseType:i.TypeInfo.GitItem,responseIsCollection:!0},c&&(a.customHeaders={Range:"bytes=0-"+c}),l&&(a.httpResponseType=l),this._beginRequest(a)},t.prototype.beginGetAllPullRequests=function(n,t,u,f,e,o,s,h){return this._beginRequest({area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.PullRequestsLocationId,routeValues:{repositoryId:n},data:{status:t,creatorId:u,reviewerId:f,$top:s,$skip:h,sourceRefName:e,targetRefName:o},responseType:i.TypeInfo.GitPullRequest,responseIsCollection:!0})},t.prototype.beginGetPullRequest=function(n,t,u){return u===void 0&&(u=!1),this._beginRequest({area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.PullRequestsLocationId,routeValues:{repositoryId:n,pullRequestId:t},responseType:i.TypeInfo.GitPullRequest,data:{includeCommits:u}})},t.prototype.beginCreatePullRequest=function(n,t,u,f,e,o,s){return this._beginRequest({httpMethod:"POST",area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.PullRequestsLocationId,routeValues:{repositoryId:n},data:{sourceRefName:t,targetRefName:u,Title:f,Description:e,Reviewers:this._buildReviewersArray(o),WorkItemRefs:s},responseType:i.TypeInfo.GitPullRequest})},t.prototype.beginUpdatePullRequest=function(n,t,u){return this._beginRequest({httpMethod:"PATCH",area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.PullRequestsLocationId,routeValues:{repositoryId:n,pullRequestId:t},data:u,responseType:i.TypeInfo.GitPullRequest})},t.prototype.beginUpdatePullRequestReviewer=function(n,t,i,u){return this._beginRequest({httpMethod:"PUT",area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.PullRequestReviewersLocationId,routeValues:{repositoryId:n,pullRequestId:t,reviewerId:i},data:u,responseIsCollection:!0})},t.prototype.beginAddPullRequestReviewer=function(n,t,i,u){return this._beginRequest({httpMethod:"PUT",area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.PullRequestReviewersLocationId,routeValues:{repositoryId:n,pullRequestId:t,reviewerId:i},data:u,responseIsCollection:!0})},t.prototype.beginDeletePullRequestReviewer=function(n,t,i){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.PullRequestReviewersLocationId,routeValues:{repositoryId:n,pullRequestId:t,reviewerId:i}})},t.prototype.beginGetSuggestions=function(n){return this._beginRequest({area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.SuggestionsLocationId,routeValues:{repositoryId:n},responseIsCollection:!0})},t.prototype.beginGetPullRequestWorkItemsResourceRef=function(n,t,i,u){var e=this,f=jQuery.Deferred(),o=this._beginRequest({httpMethod:"GET",area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.PullRequestWorkItemsLocationId,routeValues:{repositoryId:n,pullRequestId:t},data:{commitsTop:i,commitsSkip:u},responseIsCollection:!0},!0);return o.spread(function(n,t,i){var r=e._getLinkResponseHeaders(i);f.resolve({resourceRefs:n,hasMoreCommits:!!r.next,nextLink:r.next})},f.reject),f.promise()},t.prototype.beginGetReferencedWorkItems=function(n){var u=this,t=jQuery.Deferred(),i,r;return n&&n.length>0?(i=n.map(function(n){return n.id}).join(","),r=[f.CoreFieldRefNames.Id,f.CoreFieldRefNames.AssignedTo,f.CoreFieldRefNames.Title,f.CoreFieldRefNames.State,f.CoreFieldRefNames.WorkItemType].join(","),this._beginRequest({httpMethod:"GET",area:e.WitConstants.AreaName,locationId:e.WitConstants.WorkItemsLocationId,data:{ids:i,fields:r},routeValues:{resource:e.WorkItemTrackingRestResources.WorkItems},responseIsCollection:!0}).then(function(n){var i=u._buildAssociatedWorkItems(n);t.resolve(i)},function(n){t.reject(n)})):t.resolve([]),t.promise()},t.prototype.beginGetTemplateList=function(n,t){return this._beginRequest({httpMethod:"GET",area:r.GitWebApiConstants.AreaName,locationId:r.GitWebApiConstants.TemplatesLocationId,routeValues:{project:n},queryParams:{type:t},responseIsCollection:!0})},t.prototype._buildReviewersArray=function(n){var t=[];return $.each(n,function(n,i){t[n]={id:i}}),t},t.prototype._buildAssociatedWorkItems=function(n){var t=[];return n&&$.each(n,function(n,i){var r={};$.each(i.fields,function(n,t){switch(n){case f.CoreFieldRefNames.Id:r.id=t;break;case f.CoreFieldRefNames.AssignedTo:r.assignedTo=t;break;case f.CoreFieldRefNames.State:r.state=t;break;case f.CoreFieldRefNames.Title:r.title=t;break;case f.CoreFieldRefNames.WorkItemType:r.workItemType=t}});r.url=i.url;t.push(r)}),t},t.REFS_BATCH_LOCATION_ID="D5E42319-9C64-4ACD-A906-F524A578A7FE",t}(u.VssHttpClient),o;t.GitHttpClient=s;o=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.beginGetProjectInfo=function(n){return this._beginRequest({area:r.TfvcConstants.AreaName,locationId:r.TfvcConstants.VersionControlProjectInfoLocationId,routeValues:{projectId:n},responseType:i.TypeInfo.VersionControlProjectInfo})},t.prototype.beginGetProjectInfos=function(){return this._beginRequest({area:r.TfvcConstants.AreaName,locationId:r.TfvcConstants.VersionControlProjectInfosLocationId,responseType:i.TypeInfo.VersionControlProjectInfo,responseIsCollection:!0})},t.prototype.beginGetItem=function(n,t,u,f,e,o){var s={path:n,scopePath:t,recursionLevel:f,filename:e,download:o},h;return u&&(s=$.extend(s,u)),h={httpMethod:"GET",area:r.TfvcConstants.AreaName,locationId:r.TfvcConstants.TfvcItemsLocationId,data:s,responseType:i.TypeInfo.TfvcItem,responseIsCollection:!0},this._beginRequest(h)},t.prototype.beginGetItemsBatch=function(n){var t={httpMethod:"POST",area:r.TfvcConstants.AreaName,locationId:r.TfvcConstants.TfvcItemBatchLocationId,data:n,responseType:i.TypeInfo.TfvcItem,responseIsCollection:!0};return this._beginRequest(t)},t.prototype.beginCreateChangeset=function(n){return this._beginRequest({httpMethod:"POST",area:r.TfvcConstants.AreaName,locationId:r.TfvcConstants.TfvcChangesetsLocationId,data:n,requestType:i.TypeInfo.TfvcChangeset,responseType:i.TypeInfo.TfvcChangesetRef})},t}(u.VssHttpClient);t.TfvcHttpClient=o});
define("VersionControl/Scripts/TFS.VersionControl.VersionSpecs",["require","exports","VSS/Utils/String","VSS/Utils/Date","VSS/VSS","VersionControl/Scripts/Resources/TFS.Resources.VersionControl","Presentation/Scripts/TFS/TFS.Host.TfsContext"],function(n,t,i,r,u,f,e){var h,o=function(){function n(){}return n.parse=function(t){var o,l,i,e,u,f,tt=!1;if(t=String(t||""),t&&t.toUpperCase()!=="T"){if(u=t.substring(0,1).toUpperCase(),i=t.substring(1),u==="G"&&i.length>0){if(f=i.substring(0,1).toUpperCase(),i=i.substring(1),f==="B")return new k(i);if(f==="C")return new nt(i);if(f==="T")return new d(i);if(f==="I")return new g(i)}else{if(u==="T")return e=n.parse(i),e===h?h:new w(e);if(u==="P")return e=n.parse(i),new b(e);if(u==="C")return new s(parseInt(i,10));if(u==="B"&&/^(\d+)$/.test(i))return new a(parseInt(i,10));if(u==="M")return f=i.substring(0,1).toUpperCase(),f==="R"&&(tt=!0,i=i.substring(1)),new p(parseInt(i,10),tt);if(/^(\d+)$/.test(t))return new s(parseInt(t,10));if(u==="S")return o=i.split(";"),new c(o[0],o[1]);if(u==="L")return new y(i);if(u==="D")return l=r.parseDateString(i),new v(l)}throw new Error("Unrecognized VersionSpec format.");}else return h},n.tfvcFromUri=function(n){var e=n.split("?")[1],r=null,u=null,f,t;if(e)for(f=e.split("&"),t=0;t<f.length;++t){var o=f[t].split("="),h=o[0],l=decodeURIComponent(o[1]);h==="versionType"?r=l:h==="version"&&(u=l)}if(i.ignoreCaseComparer("shelveset",r)===0)return new c(u);if(i.ignoreCaseComparer("changeset",r)===0)return new s(u);throw new Error("No recognized VersionSpec in uri.");},n.prototype.formatPath=function(n){return i.format(f.VersionSpecPathFormat,n,this.toDisplayText())},n.prototype.toDisplayText=function(){return"VersionSpec"},n.prototype.toVersionString=function(){return""},n}(),l,s,a,v,y,p,w,b,c,k,d,g,nt;t.VersionSpec=o;l=function(n){function t(){n.call(this)}return __extends(t,n),t.prototype.toVersionString=function(){return"T"},t.prototype.toDisplayText=function(){return f.LatestVersionDisplayText},t}(o);t.LatestVersionSpec=l;h=new l;s=function(n){function t(t){n.call(this);this.changeset=t}return __extends(t,n),t.prototype.toVersionString=function(){return""+this.changeset},t.prototype.toDisplayText=function(){return i.format(f.ChangesetVersionDisplayText,this.changeset)},t}(o);t.ChangesetVersionSpec=s;a=function(n){function t(t){n.call(this);this.changeset=t}return __extends(t,n),t.prototype.toVersionString=function(){return"B"+this.changeset},t.prototype.toDisplayText=function(){return i.format(f.ChangeVersionDisplayText,this.changeset)},t}(o);t.ChangeVersionSpec=a;v=function(n){function t(t){n.call(this);this.date=t}return __extends(t,n),t.prototype.toVersionString=function(){return"D"+this.date},t.prototype.toDisplayText=function(){return i.format(f.DateVersionDisplayText,this.date)},t}(o);t.DateVersionSpec=v;y=function(n){function t(t){n.call(this);this.label=t}return __extends(t,n),t.prototype.toVersionString=function(){return"L"+this.label},t.prototype.toDisplayText=function(){return i.format(f.LabelVersionDisplayText,this.label)},t}(o);t.LabelVersionSpec=y;p=function(n){function t(t,i){n.call(this);this.changeset=t;this.useRenameSource=i}return __extends(t,n),t.prototype.toVersionString=function(){return"M"+(this.useRenameSource?"R":"")+this.changeset},t.prototype.toDisplayText=function(){return i.format(f.MergeSourceVersionDisplayText,this.changeset)},t}(o);t.MergeSourceVersionSpec=p;w=function(n){function t(t){n.call(this);this.version=t}return __extends(t,n),t.prototype.toVersionString=function(){return"T"+this.version.toVersionString()},t.prototype.toDisplayText=function(){return i.format(f.TipVersionDisplayText,this.version.toDisplayText())},t}(o);t.TipVersionSpec=w;b=function(n){function t(t){n.call(this);this.version=t}return __extends(t,n),t.prototype.toVersionString=function(){return"P"+this.version.toVersionString()},t.prototype.toDisplayText=function(){return i.format(f.PreviousVersionDisplayText,this.version.toDisplayText())},t}(o);t.PreviousVersionSpec=b;c=function(n){function t(t,i){n.call(this);var r;i?(this.name=t,this.owner=i):(r=(""+t).split(";"),this.name=r[0],this.owner=r[1]);this.owner||(this.owner=e.TfsContext.getDefault().currentUser)}return __extends(t,n),t.prototype.toVersionString=function(){return"S"+this.name+";"+this.owner},t.prototype.toDisplayText=function(){return i.format(f.ShelvesetVersionDisplayText,this.name,this.owner)},t}(o);t.ShelvesetVersionSpec=c;k=function(n){function t(t){n.call(this);this.branchName=t||""}return __extends(t,n),t.prototype.toVersionString=function(){return"GB"+this.branchName},t.prototype.toDisplayText=function(){return this.branchName},t.prototype.toFullName=function(){return"refs/heads/"+this.branchName},t.prototype.toFriendlyName=function(){return this.branchName},t}(o);t.GitBranchVersionSpec=k;d=function(n){function t(t){n.call(this);this.tagName=t||""}return __extends(t,n),t.prototype.toVersionString=function(){return"GT"+this.tagName},t.prototype.toDisplayText=function(){return i.format(f.TagVersionDisplayText,this.tagName)},t.prototype.toFullName=function(){return"refs/tags/"+this.tagName},t.prototype.toFriendlyName=function(){return this.tagName},t}(o);t.GitTagVersionSpec=d;g=function(n){function t(t){n.call(this);this.indexName=t||""}return __extends(t,n),t.prototype.toVersionString=function(){return"GI"+this.indexName},t.prototype.toDisplayText=function(){return i.format(f.FileVersionIndexedDisplayName,this.indexName)},t}(o);t.GitIndexVersionSpec=g;nt=function(n){function t(t){n.call(this);this.commitId=t||""}return __extends(t,n),t.prototype.toVersionString=function(){return"GC"+this.commitId},t.prototype.toDisplayText=function(){return i.format(f.CommitVersionDisplayText,this.getShortCommitId())},t.prototype.toFullName=function(){return this.commitId},t.prototype.toFriendlyName=function(){return this.getShortCommitId()},t.prototype.toLongDisplayText=function(){return i.format(f.CommitVersionDisplayText,this.commitId)},t.prototype.getShortCommitId=function(){return this.commitId.substr(0,8)},t}(o);t.GitCommitVersionSpec=nt;u.tfsModuleLoaded("TFS.VersionControl.VersionSpecs",t)});
define("VersionControl/Scripts/GitItemFromJsonIsland",["require","exports","VSS/Contributions/Services","VSS/Serialization","VSS/Service","TFS/VersionControl/Contracts","VersionControl/Scripts/Generated/TFS.VersionControl.Legacy.Contracts","VersionControl/Scripts/TFS.VersionControl.VersionSpecs","VSS/Utils/Array"],function(n,t,i,r,u,f,e,o,s){var h=function(){function n(){}return Object.defineProperty(n,"seededItemCount",{get:function(){return this.initializeSeededDataIfNecessary(),this._seededItemCount},enumerable:!0,configurable:!0}),n.getGitItems=function(n,t){var i,r,f,u;for(this.initializeSeededDataIfNecessary(),i=0,r=this.islands;i<r.length;i++)if(f=r[i],u=this.getGitItemsFromIsland(f,n,t),u)return u;return null},n.initializeSeededDataIfNecessary=function(){var c,t,o,s,h,l;if(!this.initialized){for(c=u.getService(i.WebPageDataService),t=c.getPageData("ms.vss-code-web.source-explorer-tree-file-listing-data-provider"),t&&t.items&&t.items.items&&this.islands.push({pathToItems:r.ContractSerializer.deserialize(t.items.items,f.TypeInfo.GitPathToItemsCollection),itemsDescriptor:r.ContractSerializer.deserialize(t.descriptor,f.TypeInfo.GitItemDescriptor),itemsDetailsOptions:r.ContractSerializer.deserialize(t.detailsOptions,e.TypeInfo.ItemDetailsOptions)}),o=0,s=this.islands;o<s.length;o++){h=s[o];for(l in h.pathToItems)n._seededItemCount+=h.pathToItems[l].length}this.initialized=!0}},n.getGitItemsFromIsland=function(n,t,i){var r=[],u=(typeof i.includeContentMetadata=="undefined"||n.itemsDetailsOptions.includeContentMetadata===i.includeContentMetadata)&&(typeof i.recursionLevel=="undefined"||n.itemsDetailsOptions.recursionLevel===i.recursionLevel);return u&&n.itemsDescriptor.versionOptions===f.GitVersionOptions.None&&t.forEach(function(t){var e=t.version,u=t.path||"/",i,f;n.pathToItems[u]&&(i=o.VersionSpec.parse(t.version),(i instanceof o.GitBranchVersionSpec&&n.itemsDescriptor.version===i.branchName||i instanceof o.GitCommitVersionSpec&&n.itemsDescriptor.version===i.commitId||i instanceof o.GitTagVersionSpec&&n.itemsDescriptor.version===i.tagName)&&(f=n.pathToItems[u],r.push(f)))}),r.length===t.length?(r.forEach(function(t){t.forEach(function(t){delete n.pathToItems[t.path]})}),Object.keys(n.pathToItems).length===0&&s.remove(this.islands,n),r):null},n._seededItemCount=0,n.islands=[],n.initialized=!1,n}();t.GitItemFromJsonIsland=h});
define("TFS/VersionControl/GitRestClient",["require","exports","TFS/VersionControl/Contracts","VSS/Service","VSS/WebApi/RestClient","VSS/WebApi/Constants"],function(n,t,i,r,u,f){"use strict";function k(n){return window.VSS&&window.VSS.VssSDKRestVersion&&w[window.VSS.VssSDKRestVersion]?r.getClient(w[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):r.getClient(c,undefined,undefined,undefined,n)}var l=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.getTreeZip=function(n,t,i,r,u,f){var e={projectId:r,recursive:u,fileName:f};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"git",locationId:"729f6437-6f92-44ec-8bee-273a7111063c",resource:"Trees",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{sha1}",routeValues:{project:i,repositoryId:n,sha1:t},queryParams:e,apiVersion:this.treesApiVersion})},t.prototype.getTree=function(n,t,r,u,f,e){var o={projectId:u,recursive:f,fileName:e};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"729f6437-6f92-44ec-8bee-273a7111063c",resource:"Trees",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{sha1}",responseType:i.TypeInfo.GitTreeRef,routeValues:{project:r,repositoryId:n,sha1:t},queryParams:o,apiVersion:this.treesApiVersion})},t.prototype.updateRepository=function(n,t,i){return this._beginRequest({httpMethod:"PATCH",area:"git",locationId:"225f7195-f9c7-4d14-ab28-a83f7ff77e1f",resource:"Repositories",routeTemplate:"{project}/_apis/{area}/{resource}/{repositoryId}",routeValues:{project:i,repositoryId:t},apiVersion:this.repositoriesApiVersion,data:n})},t.prototype.getRepository=function(n,t){return this._beginRequest({httpMethod:"GET",area:"git",locationId:"225f7195-f9c7-4d14-ab28-a83f7ff77e1f",resource:"Repositories",routeTemplate:"{project}/_apis/{area}/{resource}/{repositoryId}",routeValues:{project:t,repositoryId:n},apiVersion:this.repositoriesApiVersion})},t.prototype.getRepositories=function(n,t,i){var r={includeLinks:t,includeAllUrls:i};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"225f7195-f9c7-4d14-ab28-a83f7ff77e1f",resource:"Repositories",routeTemplate:"{project}/_apis/{area}/{resource}/{repositoryId}",responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:this.repositoriesApiVersion})},t.prototype.deleteRepository=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"git",locationId:"225f7195-f9c7-4d14-ab28-a83f7ff77e1f",resource:"Repositories",routeTemplate:"{project}/_apis/{area}/{resource}/{repositoryId}",routeValues:{project:t,repositoryId:n},apiVersion:this.repositoriesApiVersion})},t.prototype.createRepository=function(n,t){return this._beginRequest({httpMethod:"POST",area:"git",locationId:"225f7195-f9c7-4d14-ab28-a83f7ff77e1f",resource:"Repositories",routeTemplate:"{project}/_apis/{area}/{resource}/{repositoryId}",routeValues:{project:t},apiVersion:this.repositoriesApiVersion,data:n})},t.prototype.updateRefs=function(n,t,r,u){var f={projectId:u};return this._beginRequest({httpMethod:"POST",area:"git",locationId:"2d874a60-a811-4f62-9c9f-963a6ea0a55b",resource:"refs",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{*filter}",responseType:i.TypeInfo.GitRefUpdateResult,responseIsCollection:!0,routeValues:{project:r,repositoryId:t},queryParams:f,apiVersion:this.refsApiVersion,data:n})},t.prototype.getRefs=function(n,t,r,u,f,e,o,s){var h={filter:r,includeLinks:u,includeStatuses:f,includeMyBranches:e,latestStatusesOnly:o,peelTags:s};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"2d874a60-a811-4f62-9c9f-963a6ea0a55b",resource:"refs",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{*filter}",responseType:i.TypeInfo.GitRef,responseIsCollection:!0,routeValues:{project:t,repositoryId:n},queryParams:h,apiVersion:this.refsApiVersion})},t.prototype.getPushes=function(n,t,r,u,f){var e={$skip:r,$top:u,searchCriteria:f};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"ea98d07b-3c87-4971-8ede-a613694ffb55",resource:"pushes",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{pushId}",responseType:i.TypeInfo.GitPush,responseIsCollection:!0,routeValues:{project:t,repositoryId:n},queryParams:e,apiVersion:this.pushesApiVersion})},t.prototype.getPush=function(n,t,r,u,f){var e={includeCommits:u,includeRefUpdates:f};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"ea98d07b-3c87-4971-8ede-a613694ffb55",resource:"pushes",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{pushId}",responseType:i.TypeInfo.GitPush,routeValues:{project:r,repositoryId:n,pushId:t},queryParams:e,apiVersion:this.pushesApiVersion})},t.prototype.createPush=function(n,t,r){return this._beginRequest({httpMethod:"POST",area:"git",locationId:"ea98d07b-3c87-4971-8ede-a613694ffb55",resource:"pushes",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{pushId}",requestType:i.TypeInfo.GitPush,responseType:i.TypeInfo.GitPush,routeValues:{project:r,repositoryId:t},apiVersion:this.pushesApiVersion,data:n})},t.prototype.getPullRequestWorkItems=function(n,t,i){return this._beginRequest({httpMethod:"GET",area:"git",locationId:"0a637fcc-5370-4ce8-b0e8-98091f5f9482",resource:"PullRequestWorkItems",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/workitems",responseIsCollection:!0,routeValues:{project:i,repositoryId:n,pullRequestId:t},apiVersion:this.pullRequestWorkItemsApiVersion})},t.prototype.updatePullRequest=function(n,t,r,u){return this._beginRequest({httpMethod:"PATCH",area:"git",locationId:"9946fd70-0d40-406e-b686-b4744cbbcc37",resource:"PullRequests",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{pullRequestId}",requestType:i.TypeInfo.GitPullRequest,responseType:i.TypeInfo.GitPullRequest,routeValues:{project:u,repositoryId:t,pullRequestId:r},apiVersion:this.pullRequestsApiVersion,data:n})},t.prototype.getPullRequests=function(n,t,r,u,f,e){var o={searchCriteria:t,maxCommentLength:u,$skip:f,$top:e};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"9946fd70-0d40-406e-b686-b4744cbbcc37",resource:"PullRequests",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{pullRequestId}",responseType:i.TypeInfo.GitPullRequest,responseIsCollection:!0,routeValues:{project:r,repositoryId:n},queryParams:o,apiVersion:this.pullRequestsApiVersion})},t.prototype.getPullRequest=function(n,t,r,u,f,e,o,s){var h={maxCommentLength:u,$skip:f,$top:e,includeCommits:o,includeWorkItemRefs:s};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"9946fd70-0d40-406e-b686-b4744cbbcc37",resource:"PullRequests",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{pullRequestId}",responseType:i.TypeInfo.GitPullRequest,routeValues:{project:r,repositoryId:n,pullRequestId:t},queryParams:h,apiVersion:this.pullRequestsApiVersion})},t.prototype.createPullRequest=function(n,t,r){return this._beginRequest({httpMethod:"POST",area:"git",locationId:"9946fd70-0d40-406e-b686-b4744cbbcc37",resource:"PullRequests",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{pullRequestId}",requestType:i.TypeInfo.GitPullRequest,responseType:i.TypeInfo.GitPullRequest,routeValues:{project:r,repositoryId:t},apiVersion:this.pullRequestsApiVersion,data:n})},t.prototype.getPullRequestsByProject=function(n,t,r,u,f){var e={searchCriteria:t,maxCommentLength:r,$skip:u,$top:f};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"a5d28130-9cd2-40fa-9f08-902e7daa9efb",resource:"PullRequests",routeTemplate:"{project}/_apis/{area}/{resource}",responseType:i.TypeInfo.GitPullRequest,responseIsCollection:!0,routeValues:{project:n},queryParams:e,apiVersion:this.pullRequestsApiVersion_a5d28130})},t.prototype.getPullRequestReviewers=function(n,t,i){return this._beginRequest({httpMethod:"GET",area:"git",locationId:"4b6702c7-aa35-4b89-9c96-b9abf6d3e540",resource:"PullRequestReviewers",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/reviewers/{reviewerId}",responseIsCollection:!0,routeValues:{project:i,repositoryId:n,pullRequestId:t},apiVersion:this.pullRequestReviewersApiVersion})},t.prototype.getPullRequestReviewer=function(n,t,i,r){return this._beginRequest({httpMethod:"GET",area:"git",locationId:"4b6702c7-aa35-4b89-9c96-b9abf6d3e540",resource:"PullRequestReviewers",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/reviewers/{reviewerId}",routeValues:{project:r,repositoryId:n,pullRequestId:t,reviewerId:i},apiVersion:this.pullRequestReviewersApiVersion})},t.prototype.deletePullRequestReviewer=function(n,t,i,r){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"git",locationId:"4b6702c7-aa35-4b89-9c96-b9abf6d3e540",resource:"PullRequestReviewers",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/reviewers/{reviewerId}",routeValues:{project:r,repositoryId:n,pullRequestId:t,reviewerId:i},apiVersion:this.pullRequestReviewersApiVersion})},t.prototype.createPullRequestReviewers=function(n,t,i,r){return this._beginRequest({httpMethod:"POST",area:"git",locationId:"4b6702c7-aa35-4b89-9c96-b9abf6d3e540",resource:"PullRequestReviewers",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/reviewers/{reviewerId}",responseIsCollection:!0,routeValues:{project:r,repositoryId:t,pullRequestId:i},apiVersion:this.pullRequestReviewersApiVersion,data:n})},t.prototype.createPullRequestReviewer=function(n,t,i,r,u){return this._beginRequest({httpMethod:"PUT",area:"git",locationId:"4b6702c7-aa35-4b89-9c96-b9abf6d3e540",resource:"PullRequestReviewers",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/reviewers/{reviewerId}",routeValues:{project:u,repositoryId:t,pullRequestId:i,reviewerId:r},apiVersion:this.pullRequestReviewersApiVersion,data:n})},t.prototype.getItemsBatch=function(n,t,r){return this._beginRequest({httpMethod:"POST",area:"git",locationId:"630fd2e4-fb88-4f85-ad21-13f3fd1fbca9",resource:"ItemsBatch",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}",requestType:i.TypeInfo.GitItemRequestData,responseType:i.TypeInfo.GitItem,responseIsCollection:!0,routeValues:{project:r,repositoryId:t},apiVersion:this.itemsBatchApiVersion,data:n})},t.prototype.getItemZip=function(n,t,i,r,u,f,e,o,s){var h={path:t,scopePath:r,recursionLevel:u,includeContentMetadata:f,latestProcessedChange:e,download:o,versionDescriptor:s};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"git",locationId:"fb93c0db-47ed-4a31-8c20-47552878fb44",resource:"Items",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{*path}",routeValues:{project:i,repositoryId:n},queryParams:h,apiVersion:this.itemsApiVersion})},t.prototype.getItemText=function(n,t,i,r,u,f,e,o,s){var h={path:t,scopePath:r,recursionLevel:u,includeContentMetadata:f,latestProcessedChange:e,download:o,versionDescriptor:s};return this._beginRequest({httpMethod:"GET",httpResponseType:"text/plain",area:"git",locationId:"fb93c0db-47ed-4a31-8c20-47552878fb44",resource:"Items",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{*path}",routeValues:{project:i,repositoryId:n},queryParams:h,apiVersion:this.itemsApiVersion})},t.prototype.getItems=function(n,t,r,u,f,e,o,s,h){var c={scopePath:r,recursionLevel:u,includeContentMetadata:f,latestProcessedChange:e,download:o,includeLinks:s,versionDescriptor:h};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"fb93c0db-47ed-4a31-8c20-47552878fb44",resource:"Items",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{*path}",responseType:i.TypeInfo.GitItem,responseIsCollection:!0,routeValues:{project:t,repositoryId:n},queryParams:c,apiVersion:this.itemsApiVersion})},t.prototype.getItemContent=function(n,t,i,r,u,f,e,o,s){var h={path:t,scopePath:r,recursionLevel:u,includeContentMetadata:f,latestProcessedChange:e,download:o,versionDescriptor:s};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"git",locationId:"fb93c0db-47ed-4a31-8c20-47552878fb44",resource:"Items",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{*path}",routeValues:{project:i,repositoryId:n},queryParams:h,apiVersion:this.itemsApiVersion})},t.prototype.getItem=function(n,t,r,u,f,e,o,s,h){var c={path:t,scopePath:u,recursionLevel:f,includeContentMetadata:e,latestProcessedChange:o,download:s,versionDescriptor:h};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"fb93c0db-47ed-4a31-8c20-47552878fb44",resource:"Items",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{*path}",responseType:i.TypeInfo.GitItem,routeValues:{project:r,repositoryId:n},queryParams:c,apiVersion:this.itemsApiVersion})},t.prototype.getCommitsBatch=function(n,t,r,u,f,e){var o={$skip:u,$top:f,includeStatuses:e};return this._beginRequest({httpMethod:"POST",area:"git",locationId:"6400dfb2-0bcb-462b-b992-5a57f8f1416c",resource:"CommitsBatch",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}",requestType:i.TypeInfo.GitQueryCommitsCriteria,responseType:i.TypeInfo.GitCommitRef,responseIsCollection:!0,routeValues:{project:r,repositoryId:t},queryParams:o,apiVersion:this.commitsBatchApiVersion,data:n})},t.prototype.getPushCommits=function(n,t,r,u,f,e){var o={pushId:t,top:u,skip:f,includeLinks:e};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"c2570c3b-5b3f-41b8-98bf-5407bfde8d58",resource:"Commits",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{commitId}",responseType:i.TypeInfo.GitCommitRef,responseIsCollection:!0,routeValues:{project:r,repositoryId:n},queryParams:o,apiVersion:this.commitsApiVersion})},t.prototype.getCommits=function(n,t,r,u,f){var e={searchCriteria:t,$skip:u,$top:f};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"c2570c3b-5b3f-41b8-98bf-5407bfde8d58",resource:"Commits",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{commitId}",responseType:i.TypeInfo.GitCommitRef,responseIsCollection:!0,routeValues:{project:r,repositoryId:n},queryParams:e,apiVersion:this.commitsApiVersion})},t.prototype.getCommit=function(n,t,r,u){var f={changeCount:u};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"c2570c3b-5b3f-41b8-98bf-5407bfde8d58",resource:"Commits",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{commitId}",responseType:i.TypeInfo.GitCommit,routeValues:{project:r,commitId:n,repositoryId:t},queryParams:f,apiVersion:this.commitsApiVersion})},t.prototype.getCommitDiffs=function(n,t,r,u,f,e,o){var s={diffCommonCommit:r,$top:u,$skip:f,baseVersionDescriptor:e,targetVersionDescriptor:o};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"615588d5-c0c7-4b88-88f8-e625306446e8",resource:"CommitDiffs",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/diffs/commits",responseType:i.TypeInfo.GitCommitDiffs,routeValues:{project:t,repositoryId:n},queryParams:s,apiVersion:this.commitDiffsApiVersion})},t.prototype.getChanges=function(n,t,r,u,f){var e={top:u,skip:f};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"5bf884f5-3e07-42e9-afb8-1b872267bf16",resource:"Changes",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/commits/{commitId}/{resource}",responseType:i.TypeInfo.GitCommitChanges,routeValues:{project:r,commitId:n,repositoryId:t},queryParams:e,apiVersion:this.changesApiVersion})},t.prototype.getBranchStatsBatch=function(n,t,r){return this._beginRequest({httpMethod:"POST",area:"git",locationId:"d5b216de-d8d5-4d32-ae76-51df755b16d3",resource:"BranchStats",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/stats/branches",requestType:i.TypeInfo.GitQueryBranchStatsCriteria,responseType:i.TypeInfo.GitBranchStats,responseIsCollection:!0,routeValues:{project:r,repositoryId:t},apiVersion:this.branchStatsApiVersion,data:n})},t.prototype.getBranches=function(n,t,r){var u={baseVersionDescriptor:r};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"d5b216de-d8d5-4d32-ae76-51df755b16d3",resource:"BranchStats",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/stats/branches",responseType:i.TypeInfo.GitBranchStats,responseIsCollection:!0,routeValues:{project:t,repositoryId:n},queryParams:u,apiVersion:this.branchStatsApiVersion})},t.prototype.getBranch=function(n,t,r,u){var f={name:t,baseVersionDescriptor:u};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"d5b216de-d8d5-4d32-ae76-51df755b16d3",resource:"BranchStats",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/stats/branches",responseType:i.TypeInfo.GitBranchStats,routeValues:{project:r,repositoryId:n},queryParams:f,apiVersion:this.branchStatsApiVersion})},t.prototype.getBlobZip=function(n,t,i,r,u){var f={download:r,fileName:u};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"git",locationId:"7b28e929-2c99-405d-9c5c-6167a06e6816",resource:"Blobs",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{sha1}",routeValues:{project:i,repositoryId:n,sha1:t},queryParams:f,apiVersion:this.blobsApiVersion})},t.prototype.getBlobsZip=function(n,t,i,r){var u={filename:r};return this._beginRequest({httpMethod:"POST",httpResponseType:"application/zip",area:"git",locationId:"7b28e929-2c99-405d-9c5c-6167a06e6816",resource:"Blobs",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{sha1}",routeValues:{project:i,repositoryId:t},queryParams:u,apiVersion:this.blobsApiVersion,data:n})},t.prototype.getBlobContent=function(n,t,i,r,u){var f={download:r,fileName:u};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"git",locationId:"7b28e929-2c99-405d-9c5c-6167a06e6816",resource:"Blobs",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{sha1}",routeValues:{project:i,repositoryId:n,sha1:t},queryParams:f,apiVersion:this.blobsApiVersion})},t.prototype.getBlob=function(n,t,i,r,u){var f={download:r,fileName:u};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"7b28e929-2c99-405d-9c5c-6167a06e6816",resource:"Blobs",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{sha1}",routeValues:{project:i,repositoryId:n,sha1:t},queryParams:f,apiVersion:this.blobsApiVersion})},t.serviceInstanceId=f.ServiceInstanceTypes.TFS,t}(u.VssHttpClient),o,e,s,h,c,a,v,y,p,b,w;t.CommonMethods2To3_1=l;o=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.getStatuses=function(n,t,r,u,f,e){var o={top:u,skip:f,latestOnly:e};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"428dd4fb-fda5-4722-af02-9313b80305da",resource:"Statuses",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/commits/{commitId}/{resource}",responseType:i.TypeInfo.GitStatus,responseIsCollection:!0,routeValues:{project:r,commitId:n,repositoryId:t},queryParams:o,apiVersion:this.statusesApiVersion})},t.prototype.createCommitStatus=function(n,t,r,u){return this._beginRequest({httpMethod:"POST",area:"git",locationId:"428dd4fb-fda5-4722-af02-9313b80305da",resource:"Statuses",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/commits/{commitId}/{resource}",requestType:i.TypeInfo.GitStatus,responseType:i.TypeInfo.GitStatus,routeValues:{project:u,commitId:t,repositoryId:r},apiVersion:this.statusesApiVersion,data:n})},t.prototype.getPullRequestCommits=function(n,t,r){return this._beginRequest({httpMethod:"GET",area:"git",locationId:"52823034-34a8-4576-922c-8d8b77e9e4c4",resource:"PullRequestCommits",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/commits",responseType:i.TypeInfo.GitCommitRef,responseIsCollection:!0,routeValues:{project:r,repositoryId:n,pullRequestId:t},apiVersion:this.pullRequestCommitsApiVersion})},t}(l);t.CommonMethods2_1To3_1=o;e=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.getSuggestions=function(n,t){return this._beginRequest({httpMethod:"GET",area:"git",locationId:"9393b4fb-4445-4919-972b-9ad16f442d83",resource:"Suggestions",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/suggestions",responseIsCollection:!0,routeValues:{project:t,repositoryId:n},apiVersion:this.suggestionsApiVersion})},t.prototype.getDeletedRepositories=function(n){return this._beginRequest({httpMethod:"GET",area:"git",locationId:"2b6869c4-cb25-42b5-b7a3-0d3e6be0a11a",resource:"DeletedRepositories",routeTemplate:"{project}/_apis/{area}/{resource}",responseType:i.TypeInfo.GitDeletedRepository,responseIsCollection:!0,routeValues:{project:n},apiVersion:this.deletedRepositoriesApiVersion})},t}(o);t.CommonMethods2_2To3_1=e;s=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.getTreeDiffs=function(n,t,r,u,f,e){var o={baseId:r,targetId:u,$top:f,continuationToken:e};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"e264ef02-4e92-4cfc-a4b1-5e71894d7b31",resource:"TreeDiffs",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/diffs/trees",responseType:i.TypeInfo.GitTreeDiff,routeValues:{project:n,repositoryId:t},queryParams:o,apiVersion:this.treeDiffsApiVersion},!0).then(function(n){var t=n[0],r=n[1],i=n[2];return{treeDiff:t,continuationToken:[i.getResponseHeader("x-ms-continuationtoken")]}})},t.prototype.getTemplateList=function(n,t){var i={type:t};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"f88d498e-52c3-422a-a5f2-994f4265a25b",resource:"templates",routeTemplate:"{project}/_apis/{area}/{resource}",responseIsCollection:!0,routeValues:{project:n},queryParams:i,apiVersion:this.templatesApiVersion})},t.prototype.getRevertForRefName=function(n,t,r){var u={refName:r};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"bc866058-5449-4715-9cf1-a510b6ff193c",resource:"Reverts",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/reverts/{revertId}",responseType:i.TypeInfo.GitRevert,routeValues:{project:n,repositoryId:t},queryParams:u,apiVersion:this.revertsApiVersion})},t.prototype.getRevert=function(n,t,r){return this._beginRequest({httpMethod:"GET",area:"git",locationId:"bc866058-5449-4715-9cf1-a510b6ff193c",resource:"Reverts",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/reverts/{revertId}",responseType:i.TypeInfo.GitRevert,routeValues:{project:n,revertId:t,repositoryId:r},apiVersion:this.revertsApiVersion})},t.prototype.createRevert=function(n,t,r){return this._beginRequest({httpMethod:"POST",area:"git",locationId:"bc866058-5449-4715-9cf1-a510b6ff193c",resource:"Reverts",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/reverts/{revertId}",requestType:i.TypeInfo.GitAsyncRefOperationParameters,responseType:i.TypeInfo.GitRevert,routeValues:{project:t,repositoryId:r},apiVersion:this.revertsApiVersion,data:n})},t.prototype.getStats=function(n,t){return this._beginRequest({httpMethod:"GET",area:"git",locationId:"616a5255-74b3-40f5-ae1d-bbae2eec8db5",resource:"RepositoryStats",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/stats",routeValues:{project:n,repositoryId:t},apiVersion:this.repositoryStatsApiVersion})},t.prototype.validateRemoteRepository=function(n,t){return this._beginRequest({httpMethod:"POST",area:"git",locationId:"d8c00958-dedd-491f-93e6-73f3c06f5bba",resource:"RemoteRepositoryValidations",routeTemplate:"{project}/_apis/{area}/{resource}",routeValues:{project:t},apiVersion:this.remoteRepositoryValidationsApiVersion,data:n})},t.prototype.getRefFavorites=function(n,t,r){var u={repositoryId:t,identityId:r};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"876f70af-5792-485a-a1c7-d0a7b2f42bbb",resource:"refsFavorites",routeTemplate:"{project}/_apis/{area}/favorites/refs/{favoriteId}",responseType:i.TypeInfo.GitRefFavorite,responseIsCollection:!0,routeValues:{project:n},queryParams:u,apiVersion:this.refsFavoritesApiVersion})},t.prototype.getRefFavorite=function(n,t){return this._beginRequest({httpMethod:"GET",area:"git",locationId:"876f70af-5792-485a-a1c7-d0a7b2f42bbb",resource:"refsFavorites",routeTemplate:"{project}/_apis/{area}/favorites/refs/{favoriteId}",responseType:i.TypeInfo.GitRefFavorite,routeValues:{project:n,favoriteId:t},apiVersion:this.refsFavoritesApiVersion})},t.prototype.deleteRefFavorite=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"git",locationId:"876f70af-5792-485a-a1c7-d0a7b2f42bbb",resource:"refsFavorites",routeTemplate:"{project}/_apis/{area}/favorites/refs/{favoriteId}",routeValues:{project:n,favoriteId:t},apiVersion:this.refsFavoritesApiVersion})},t.prototype.createFavorite=function(n,t){return this._beginRequest({httpMethod:"POST",area:"git",locationId:"876f70af-5792-485a-a1c7-d0a7b2f42bbb",resource:"refsFavorites",routeTemplate:"{project}/_apis/{area}/favorites/refs/{favoriteId}",requestType:i.TypeInfo.GitRefFavorite,responseType:i.TypeInfo.GitRefFavorite,routeValues:{project:t},apiVersion:this.refsFavoritesApiVersion,data:n})},t.prototype.createRefLockRequest=function(n,t,i){return this._beginRequest({httpMethod:"POST",httpResponseType:"html",area:"git",locationId:"32863ac0-6a8a-4d9f-8afe-ba293b93ec3c",resource:"refLockRequest",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}",routeValues:{project:t,repositoryId:i},apiVersion:this.refLockRequestApiVersion,data:n})},t.prototype.updateThread=function(n,t,r,u,f){return this._beginRequest({httpMethod:"PATCH",area:"git",locationId:"ab6e2e5d-a0b7-4153-b64a-a4efe0d49449",resource:"PullRequestThreads",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/threads/{threadId}",requestType:i.TypeInfo.GitPullRequestCommentThread,responseType:i.TypeInfo.GitPullRequestCommentThread,routeValues:{project:f,repositoryId:t,pullRequestId:r,threadId:u},apiVersion:this.pullRequestThreadsApiVersion,data:n})},t.prototype.getThreads=function(n,t,r,u,f){var e={$iteration:u,$baseIteration:f};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"ab6e2e5d-a0b7-4153-b64a-a4efe0d49449",resource:"PullRequestThreads",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/threads/{threadId}",responseType:i.TypeInfo.GitPullRequestCommentThread,responseIsCollection:!0,routeValues:{project:r,repositoryId:n,pullRequestId:t},queryParams:e,apiVersion:this.pullRequestThreadsApiVersion})},t.prototype.getPullRequestThread=function(n,t,r,u,f,e){var o={$iteration:f,$baseIteration:e};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"ab6e2e5d-a0b7-4153-b64a-a4efe0d49449",resource:"PullRequestThreads",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/threads/{threadId}",responseType:i.TypeInfo.GitPullRequestCommentThread,routeValues:{project:u,repositoryId:n,pullRequestId:t,threadId:r},queryParams:o,apiVersion:this.pullRequestThreadsApiVersion})},t.prototype.createThread=function(n,t,r,u){return this._beginRequest({httpMethod:"POST",area:"git",locationId:"ab6e2e5d-a0b7-4153-b64a-a4efe0d49449",resource:"PullRequestThreads",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/threads/{threadId}",requestType:i.TypeInfo.GitPullRequestCommentThread,responseType:i.TypeInfo.GitPullRequestCommentThread,routeValues:{project:u,repositoryId:t,pullRequestId:r},apiVersion:this.pullRequestThreadsApiVersion,data:n})},t.prototype.updateComment=function(n,t,r,u,f,e){return this._beginRequest({httpMethod:"PATCH",area:"git",locationId:"965a3ec7-5ed8-455a-bdcb-835a5ea7fe7b",resource:"PullRequestThreadComments",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/threads/{threadId}/comments/{commentId}",requestType:i.TypeInfo.Comment,responseType:i.TypeInfo.Comment,routeValues:{project:e,repositoryId:t,pullRequestId:r,threadId:u,commentId:f},apiVersion:this.pullRequestThreadCommentsApiVersion,data:n})},t.prototype.getComments=function(n,t,r,u){return this._beginRequest({httpMethod:"GET",area:"git",locationId:"965a3ec7-5ed8-455a-bdcb-835a5ea7fe7b",resource:"PullRequestThreadComments",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/threads/{threadId}/comments/{commentId}",responseType:i.TypeInfo.Comment,responseIsCollection:!0,routeValues:{project:u,repositoryId:n,pullRequestId:t,threadId:r},apiVersion:this.pullRequestThreadCommentsApiVersion})},t.prototype.getComment=function(n,t,r,u,f){return this._beginRequest({httpMethod:"GET",area:"git",locationId:"965a3ec7-5ed8-455a-bdcb-835a5ea7fe7b",resource:"PullRequestThreadComments",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/threads/{threadId}/comments/{commentId}",responseType:i.TypeInfo.Comment,routeValues:{project:f,repositoryId:n,pullRequestId:t,threadId:r,commentId:u},apiVersion:this.pullRequestThreadCommentsApiVersion})},t.prototype.deleteComment=function(n,t,i,r,u){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"git",locationId:"965a3ec7-5ed8-455a-bdcb-835a5ea7fe7b",resource:"PullRequestThreadComments",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/threads/{threadId}/comments/{commentId}",routeValues:{project:u,repositoryId:n,pullRequestId:t,threadId:i,commentId:r},apiVersion:this.pullRequestThreadCommentsApiVersion})},t.prototype.createComment=function(n,t,r,u,f){return this._beginRequest({httpMethod:"POST",area:"git",locationId:"965a3ec7-5ed8-455a-bdcb-835a5ea7fe7b",resource:"PullRequestThreadComments",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/threads/{threadId}/comments/{commentId}",requestType:i.TypeInfo.Comment,responseType:i.TypeInfo.Comment,routeValues:{project:f,repositoryId:t,pullRequestId:r,threadId:u},apiVersion:this.pullRequestThreadCommentsApiVersion,data:n})},t.prototype.getPullRequestStatuses=function(n,t,r){return this._beginRequest({httpMethod:"GET",area:"git",locationId:"b5f6bb4f-8d1e-4d79-8d11-4c9172c99c35",resource:"PullRequestStatuses",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/statuses/{statusId}",responseType:i.TypeInfo.GitPullRequestStatus,responseIsCollection:!0,routeValues:{project:r,repositoryId:n,pullRequestId:t},apiVersion:this.pullRequestStatusesApiVersion})},t.prototype.getPullRequestStatus=function(n,t,r,u){return this._beginRequest({httpMethod:"GET",area:"git",locationId:"b5f6bb4f-8d1e-4d79-8d11-4c9172c99c35",resource:"PullRequestStatuses",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/statuses/{statusId}",responseType:i.TypeInfo.GitPullRequestStatus,routeValues:{project:u,repositoryId:n,pullRequestId:t,statusId:r},apiVersion:this.pullRequestStatusesApiVersion})},t.prototype.createPullRequestStatus=function(n,t,r,u){return this._beginRequest({httpMethod:"POST",area:"git",locationId:"b5f6bb4f-8d1e-4d79-8d11-4c9172c99c35",resource:"PullRequestStatuses",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/statuses/{statusId}",requestType:i.TypeInfo.GitPullRequestStatus,responseType:i.TypeInfo.GitPullRequestStatus,routeValues:{project:u,repositoryId:t,pullRequestId:r},apiVersion:this.pullRequestStatusesApiVersion,data:n})},t.prototype.getPullRequestIterationStatuses=function(n,t,r,u){return this._beginRequest({httpMethod:"GET",area:"git",locationId:"75cf11c5-979f-4038-a76e-058a06adf2bf",resource:"PullRequestStatuses",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/iterations/{iterationId}/statuses/{statusId}",responseType:i.TypeInfo.GitPullRequestStatus,responseIsCollection:!0,routeValues:{project:u,repositoryId:n,pullRequestId:t,iterationId:r},apiVersion:this.pullRequestStatusesApiVersion_75cf11c5})},t.prototype.getPullRequestIterationStatus=function(n,t,r,u,f){return this._beginRequest({httpMethod:"GET",area:"git",locationId:"75cf11c5-979f-4038-a76e-058a06adf2bf",resource:"PullRequestStatuses",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/iterations/{iterationId}/statuses/{statusId}",responseType:i.TypeInfo.GitPullRequestStatus,routeValues:{project:f,repositoryId:n,pullRequestId:t,iterationId:r,statusId:u},apiVersion:this.pullRequestStatusesApiVersion_75cf11c5})},t.prototype.createPullRequestIterationStatus=function(n,t,r,u,f){return this._beginRequest({httpMethod:"POST",area:"git",locationId:"75cf11c5-979f-4038-a76e-058a06adf2bf",resource:"PullRequestStatuses",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/iterations/{iterationId}/statuses/{statusId}",requestType:i.TypeInfo.GitPullRequestStatus,responseType:i.TypeInfo.GitPullRequestStatus,routeValues:{project:f,repositoryId:t,pullRequestId:r,iterationId:u},apiVersion:this.pullRequestStatusesApiVersion_75cf11c5,data:n})},t.prototype.getPullRequestById=function(n){return this._beginRequest({httpMethod:"GET",area:"git",locationId:"01a46dea-7d46-4d40-bc84-319e7c260d99",resource:"PullRequests",routeTemplate:"_apis/{area}/{resource}/{pullRequestId}",responseType:i.TypeInfo.GitPullRequest,routeValues:{pullRequestId:n},apiVersion:this.pullRequestsApiVersion_01a46dea})},t.prototype.getPullRequestQuery=function(n,t,r){return this._beginRequest({httpMethod:"POST",area:"git",locationId:"b3a6eebe-9cf0-49ea-b6cb-1a4c5f5007b0",resource:"PullRequestQuery",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}",requestType:i.TypeInfo.GitPullRequestQuery,responseType:i.TypeInfo.GitPullRequestQuery,routeValues:{project:r,repositoryId:t},apiVersion:this.pullRequestQueryApiVersion,data:n})},t.prototype.getPullRequestIterations=function(n,t,r,u){var f={includeCommits:u};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"d43911ee-6958-46b0-a42b-8445b8a0d004",resource:"PullRequestIterations",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/iterations/{iterationId}",responseType:i.TypeInfo.GitPullRequestIteration,responseIsCollection:!0,routeValues:{project:r,repositoryId:n,pullRequestId:t},queryParams:f,apiVersion:this.pullRequestIterationsApiVersion})},t.prototype.getPullRequestIteration=function(n,t,r,u){return this._beginRequest({httpMethod:"GET",area:"git",locationId:"d43911ee-6958-46b0-a42b-8445b8a0d004",resource:"PullRequestIterations",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/iterations/{iterationId}",responseType:i.TypeInfo.GitPullRequestIteration,routeValues:{project:u,repositoryId:n,pullRequestId:t,iterationId:r},apiVersion:this.pullRequestIterationsApiVersion})},t.prototype.getPullRequestIterationChanges=function(n,t,r,u,f,e,o){var s={$top:f,$skip:e,$compareTo:o};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"4216bdcf-b6b1-4d59-8b82-c34cc183fc8b",resource:"PullRequestIterationChanges",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/iterations/{iterationId}/changes",responseType:i.TypeInfo.GitPullRequestIterationChanges,routeValues:{project:u,repositoryId:n,pullRequestId:t,iterationId:r},queryParams:s,apiVersion:this.pullRequestIterationChangesApiVersion})},t.prototype.updatePullRequestConflict=function(n,t,r,u,f){return this._beginRequest({httpMethod:"PATCH",area:"git",locationId:"d840fb74-bbef-42d3-b250-564604c054a4",resource:"PullRequestConflicts",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/conflicts/{conflictId}",requestType:i.TypeInfo.GitConflict,responseType:i.TypeInfo.GitConflict,routeValues:{project:f,repositoryId:t,pullRequestId:r,conflictId:u},apiVersion:this.pullRequestConflictsApiVersion,data:n})},t.prototype.getPullRequestConflicts=function(n,t,r,u,f,e){var o={$skip:u,$top:f,includeObsolete:e};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"d840fb74-bbef-42d3-b250-564604c054a4",resource:"PullRequestConflicts",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/conflicts/{conflictId}",responseType:i.TypeInfo.GitConflict,responseIsCollection:!0,routeValues:{project:r,repositoryId:n,pullRequestId:t},queryParams:o,apiVersion:this.pullRequestConflictsApiVersion})},t.prototype.getPullRequestConflict=function(n,t,r,u){return this._beginRequest({httpMethod:"GET",area:"git",locationId:"d840fb74-bbef-42d3-b250-564604c054a4",resource:"PullRequestConflicts",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/conflicts/{conflictId}",responseType:i.TypeInfo.GitConflict,routeValues:{project:u,repositoryId:n,pullRequestId:t,conflictId:r},apiVersion:this.pullRequestConflictsApiVersion})},t.prototype.getPullRequestIterationCommits=function(n,t,r,u){return this._beginRequest({httpMethod:"GET",area:"git",locationId:"e7ea0883-095f-4926-b5fb-f24691c26fb9",resource:"PullRequestCommits",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/pullRequests/{pullRequestId}/iterations/{iterationId}/commits",responseType:i.TypeInfo.GitCommitRef,responseIsCollection:!0,routeValues:{project:u,repositoryId:n,pullRequestId:t,iterationId:r},apiVersion:this.pullRequestCommitsApiVersion_e7ea0883})},t.prototype.updateImportRequest=function(n,t,r,u){return this._beginRequest({httpMethod:"PATCH",area:"git",locationId:"01828ddc-3600-4a41-8633-99b3a73a0eb3",resource:"ImportRequests",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/importRequests/{importRequestId}",requestType:i.TypeInfo.GitImportRequest,responseType:i.TypeInfo.GitImportRequest,routeValues:{project:t,repositoryId:r,importRequestId:u},apiVersion:this.importRequestsApiVersion,data:n})},t.prototype.queryImportRequests=function(n,t,r){var u={includeAbandoned:r};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"01828ddc-3600-4a41-8633-99b3a73a0eb3",resource:"ImportRequests",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/importRequests/{importRequestId}",responseType:i.TypeInfo.GitImportRequest,responseIsCollection:!0,routeValues:{project:n,repositoryId:t},queryParams:u,apiVersion:this.importRequestsApiVersion})},t.prototype.getImportRequest=function(n,t,r){return this._beginRequest({httpMethod:"GET",area:"git",locationId:"01828ddc-3600-4a41-8633-99b3a73a0eb3",resource:"ImportRequests",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/importRequests/{importRequestId}",responseType:i.TypeInfo.GitImportRequest,routeValues:{project:n,repositoryId:t,importRequestId:r},apiVersion:this.importRequestsApiVersion})},t.prototype.createImportRequest=function(n,t,r,u){var f={validateParameters:u};return this._beginRequest({httpMethod:"POST",area:"git",locationId:"01828ddc-3600-4a41-8633-99b3a73a0eb3",resource:"ImportRequests",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/importRequests/{importRequestId}",requestType:i.TypeInfo.GitImportRequest,responseType:i.TypeInfo.GitImportRequest,routeValues:{project:t,repositoryId:r},queryParams:f,apiVersion:this.importRequestsApiVersion,data:n})},t.prototype.getFilePaths=function(n,t,i,r){var u={scopePath:i,versionDescriptor:r};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"e74b530c-edfa-402b-88e2-8d04671134f7",resource:"FilePaths",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/{resource}/{*scopepath}",routeValues:{project:n,repositoryId:t},queryParams:u,apiVersion:this.filePathsApiVersion})},t.prototype.getCherryPickForRefName=function(n,t,r){var u={refName:r};return this._beginRequest({httpMethod:"GET",area:"git",locationId:"033bad68-9a14-43d1-90e0-59cb8856fef6",resource:"CherryPicks",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/cherryPicks/{cherryPickId}",responseType:i.TypeInfo.GitCherryPick,routeValues:{project:n,repositoryId:t},queryParams:u,apiVersion:this.cherryPicksApiVersion})},t.prototype.getCherryPick=function(n,t,r){return this._beginRequest({httpMethod:"GET",area:"git",locationId:"033bad68-9a14-43d1-90e0-59cb8856fef6",resource:"CherryPicks",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/cherryPicks/{cherryPickId}",responseType:i.TypeInfo.GitCherryPick,routeValues:{project:n,cherryPickId:t,repositoryId:r},apiVersion:this.cherryPicksApiVersion})},t.prototype.createCherryPick=function(n,t,r){return this._beginRequest({httpMethod:"POST",area:"git",locationId:"033bad68-9a14-43d1-90e0-59cb8856fef6",resource:"CherryPicks",routeTemplate:"{project}/_apis/{area}/repositories/{repositoryId}/cherryPicks/{cherryPickId}",requestType:i.TypeInfo.GitAsyncRefOperationParameters,responseType:i.TypeInfo.GitCherryPick,routeValues:{project:t,repositoryId:r},apiVersion:this.cherryPicksApiVersion,data:n})},t}(e);t.CommonMethods3To3_1=s;h=function(n){function t(t,i){n.call(this,t,i);this.blobsApiVersion=this.branchStatsApiVersion=this.changesApiVersion=this.cherryPicksApiVersion=this.commitDiffsApiVersion=this.commitsApiVersion=this.commitsBatchApiVersion=this.deletedRepositoriesApiVersion=this.filePathsApiVersion=this.importRequestsApiVersion=this.itemsApiVersion=this.itemsBatchApiVersion=this.pullRequestCommitsApiVersion=this.pullRequestCommitsApiVersion_e7ea0883=this.pullRequestConflictsApiVersion=this.pullRequestIterationChangesApiVersion=this.pullRequestIterationsApiVersion=this.pullRequestQueryApiVersion=this.pullRequestReviewersApiVersion=this.pullRequestsApiVersion=this.pullRequestsApiVersion_a5d28130=this.pullRequestsApiVersion_01a46dea=this.pullRequestStatusesApiVersion=this.pullRequestStatusesApiVersion_75cf11c5=this.pullRequestThreadCommentsApiVersion=this.pullRequestThreadsApiVersion=this.pullRequestWorkItemsApiVersion=this.refLockRequestApiVersion=this.refsApiVersion=this.refsFavoritesApiVersion=this.remoteRepositoryValidationsApiVersion=this.repositoriesApiVersion=this.repositoryStatsApiVersion=this.revertsApiVersion=this.statusesApiVersion=this.suggestionsApiVersion=this.templatesApiVersion=this.treeDiffsApiVersion=this.treesApiVersion="3.1-preview.1";this.pushesApiVersion="3.1-preview.2"}return __extends(t,n),t}(s);t.GitHttpClient3_1=h;c=function(n){function t(t,i){n.call(this,t,i);this.blobsApiVersion=this.branchStatsApiVersion=this.changesApiVersion=this.commitDiffsApiVersion=this.commitsApiVersion=this.commitsBatchApiVersion=this.itemsApiVersion=this.itemsBatchApiVersion=this.pullRequestCommitsApiVersion=this.pullRequestCommitsApiVersion_e7ea0883=this.pullRequestIterationChangesApiVersion=this.pullRequestIterationsApiVersion=this.pullRequestQueryApiVersion=this.pullRequestReviewersApiVersion=this.pullRequestsApiVersion=this.pullRequestsApiVersion_a5d28130=this.pullRequestsApiVersion_01a46dea=this.pullRequestThreadCommentsApiVersion=this.pullRequestThreadsApiVersion=this.pullRequestWorkItemsApiVersion=this.pushesApiVersion=this.refsApiVersion=this.repositoriesApiVersion=this.statusesApiVersion=this.treesApiVersion="3.0";this.cherryPicksApiVersion=this.deletedRepositoriesApiVersion=this.filePathsApiVersion=this.importRequestsApiVersion=this.pullRequestConflictsApiVersion=this.pullRequestStatusesApiVersion=this.pullRequestStatusesApiVersion_75cf11c5=this.refLockRequestApiVersion=this.refsFavoritesApiVersion=this.remoteRepositoryValidationsApiVersion=this.repositoryStatsApiVersion=this.revertsApiVersion=this.suggestionsApiVersion=this.templatesApiVersion=this.treeDiffsApiVersion="3.0-preview.1"}return __extends(t,n),t}(s);t.GitHttpClient3=c;a=function(n){function t(t,i){n.call(this,t,i);this.blobsApiVersion=this.branchStatsApiVersion=this.changesApiVersion=this.commitDiffsApiVersion=this.commitsApiVersion=this.commitsBatchApiVersion=this.itemsApiVersion=this.itemsBatchApiVersion=this.pullRequestCommitsApiVersion=this.pullRequestReviewersApiVersion=this.pullRequestsApiVersion=this.pullRequestsApiVersion_a5d28130=this.pullRequestWorkItemsApiVersion=this.pushesApiVersion=this.refsApiVersion=this.repositoriesApiVersion=this.statusesApiVersion=this.treesApiVersion="2.3";this.deletedRepositoriesApiVersion=this.suggestionsApiVersion="2.3-preview.1"}return __extends(t,n),t}(e);t.GitHttpClient2_3=a;v=function(n){function t(t,i){n.call(this,t,i);this.blobsApiVersion=this.branchStatsApiVersion=this.changesApiVersion=this.commitDiffsApiVersion=this.commitsApiVersion=this.commitsBatchApiVersion=this.itemsApiVersion=this.itemsBatchApiVersion=this.pullRequestCommitsApiVersion=this.pullRequestReviewersApiVersion=this.pullRequestsApiVersion=this.pullRequestsApiVersion_a5d28130=this.pullRequestWorkItemsApiVersion=this.pushesApiVersion=this.refsApiVersion=this.repositoriesApiVersion=this.statusesApiVersion=this.treesApiVersion="2.2";this.deletedRepositoriesApiVersion=this.suggestionsApiVersion="2.2-preview.1"}return __extends(t,n),t}(e);t.GitHttpClient2_2=v;y=function(n){function t(t,i){n.call(this,t,i);this.blobsApiVersion=this.branchStatsApiVersion=this.changesApiVersion=this.commitDiffsApiVersion=this.commitsApiVersion=this.commitsBatchApiVersion=this.itemsApiVersion=this.itemsBatchApiVersion=this.pullRequestCommitsApiVersion=this.pullRequestReviewersApiVersion=this.pullRequestsApiVersion=this.pullRequestsApiVersion_a5d28130=this.pullRequestWorkItemsApiVersion=this.pushesApiVersion=this.refsApiVersion=this.repositoriesApiVersion=this.statusesApiVersion=this.treesApiVersion="2.1"}return __extends(t,n),t}(o);t.GitHttpClient2_1=y;p=function(n){function t(t,i){n.call(this,t,i);this.blobsApiVersion=this.branchStatsApiVersion=this.changesApiVersion=this.commitDiffsApiVersion=this.commitsApiVersion=this.commitsBatchApiVersion=this.itemsApiVersion=this.itemsBatchApiVersion=this.pullRequestReviewersApiVersion=this.pullRequestsApiVersion=this.pullRequestsApiVersion_a5d28130=this.pullRequestWorkItemsApiVersion=this.pushesApiVersion=this.refsApiVersion=this.repositoriesApiVersion=this.treesApiVersion="2.0"}return __extends(t,n),t}(l);t.GitHttpClient2=p;b=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t}(h);t.GitHttpClient=b;w={"3.1":h,"3.0":c,"2.3":a,"2.2":v,"2.1":y,"2.0":p};t.getClient=k});
define("VersionControl/Scripts/GitClientService",["require","exports","Presentation/Scripts/TFS/TFS.Legacy.Ajax","VSS/Utils/Core","VSS/Utils/String","VSS/Diag","VersionControl/Scripts/Resources/TFS.Resources.VersionControl","VersionControl/Scripts/Generated/TFS.VersionControl.Common","TFS/VersionControl/Contracts","VersionControl/Scripts/CommitIdHelper","VersionControl/Scripts/VersionControlClientServiceBase","VersionControl/Scripts/GitItemUtils","VersionControl/Scripts/Generated/TFS.VersionControl.Legacy.Contracts","VersionControl/Scripts/TFS.VersionControl.WebApi","VersionControl/Scripts/GitItemFromJsonIsland","VSS/VSS","VersionControl/Scripts/TFS.VersionControl.VersionSpecs","TFS/VersionControl/GitRestClient"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b){var k=function(n){function t(){n.apply(this,arguments);this._gitRefZeroValue="0000000000000000000000000000000000000000"}return __extends(t,n),t.prototype.initializeConnection=function(t){n.prototype.initializeConnection.call(this,t);this._repositoriesByProject={};this._repositoriesByProjectAsync={};this._httpClient=t.getHttpClient(v.GitHttpClient);this._gitRestClient=t.getHttpClient(b.GitHttpClient3)},t.prototype.beginGetAllRepositories=function(n,t){var i=this;p.queueRequest(this,this,"_collectionRepositories",n,t||p.handleError,function(n,t){i._httpClient.beginGetAllRepositories().then(n,t)})},t.prototype.beginGetProjectRepositories=function(n,t,i){var r=this;p.queueRequest(this,this._repositoriesByProjectAsync,n,t,i||p.handleError,function(t,i){r._httpClient.beginGetProjectRepositories(n).then(function(i){r._repositoriesByProject[n]=i;t(i)},i)})},t.prototype.beginGetRepository=function(n,t,i){var r=this;this.beginGetAllRepositories(function(f){var o;$.each(f,function(t,i){if(i.id.toLowerCase()===(n||"").toLowerCase())return o=i,!1});o?t.call(r,o):i?i.call(r,new Error(u.format(e.NoRepositoryByIdError,n))):p.handleError(new Error(u.format(e.NoRepositoryByIdError,n)))},i)},t.prototype.clearCachedProjectRepositories=function(n){this._repositoriesByProject[n]=[];this._repositoriesByProjectAsync[n]=null},t.prototype._clearCachedGitRefs=function(n,t){var i=this._getRefTypeCacheProperty(t);n[i]=null},t.prototype._getRefTypeCacheProperty=function(n){return n?"_refs_"+n:"_refs"},t.prototype._getRefTypeForRefName=function(n){return n&&n.indexOf("refs/heads/")===0?o.GitWebApiConstants.HeadsFilter:n&&n.indexOf("refs/tags/")===0?o.GitWebApiConstants.TagsFilter:""},t.prototype.clearBranchesCache=function(n){this._clearCachedGitRefs(n,o.GitWebApiConstants.HeadsFilter)},t.prototype.beginGetGitRefs=function(n,t,i,r){var u=this,f=this._getRefTypeCacheProperty(r);p.queueRequest(this,n,f,function(n){var i=$.grep(n,function(n){return n.isBranch}),r=$.grep(n,function(n){return n.isTag});t.call(u,n,i,r)},i||p.handleError,function(t,i){u._httpClient.beginGetGitRefs(n.id,r).then(function(n){return t(u.decorateWithFriendlyNames(n))},i)})},t.prototype.decorateWithFriendlyNames=function(n){return $.map(n,function(n){var t=n;return t.friendlyName=n.name,(n.name||"").indexOf("refs/heads/")===0?(t.friendlyName=n.name.substr(11),t.isBranch=!0):(n.name||"").indexOf("refs/tags/")===0?(t.friendlyName=n.name.substr(10),t.isTag=!0):t.friendlyName=n.name||"",t})},t.prototype.beginGetGitBranches=function(n,t,i){var r=this;this.beginGetGitRefs(n,function(n,i){t.call(r,i)},i,o.GitWebApiConstants.HeadsFilter)},t.prototype.beginGetGitTags=function(n,t,i){var r=this;this.beginGetGitRefs(n,function(n,i,u){t.call(r,u)},i,o.GitWebApiConstants.TagsFilter)},t.prototype.beginGetGitRef=function(n,t,i,r){var u=this;this._httpClient.beginGetGitRef(n.id,t).then(function(n){$.isFunction(i)&&i.call(u,n)},r||p.handleError)},t.prototype.beginGetGitRefsBatch=function(n,t,i,r){var u=this;this._httpClient.beginGetGitRefsBatch(n.id,t).then(function(n){$.isFunction(i)&&i.call(u,u.decorateWithFriendlyNames(n))},r||p.handleError)},t.prototype.beginDeleteGitRef=function(n,t,i,r,u){var f=this._gitRefZeroValue;this.beginUpdateGitRef(n,t,i,f,r,u)},t.prototype.beginCreateGitRef=function(n,t,i,r,u){var f=this._gitRefZeroValue;this.beginUpdateGitRef(n,t,f,i,r,u)},t.prototype.beginUpdateGitRef=function(n,t,i,r,u,f){var e=this;this._httpClient.beginUpdateGitRef(n.id,t,i,r).then(function(i){var r=e._getRefTypeForRefName(t);e._clearCachedGitRefs(n,r);$.isFunction(u)&&u.call(e,i)},f||p.handleError)},t.prototype.beginSetDefaultBranch=function(n,t,r,u){var f=this;i.postHTML(this._getApiLocation("SetGitDefaultRef"),{repositoryId:n.id,refName:t},function(){n.defaultBranch=t;$.isFunction(r)&&r.call(f)},u)},t.prototype.beginGetCommitDiffs=function(n,t,i,r,u,f,e,o){var s=this.gitVersionStringToItemDescriptor(t),h=this.gitVersionStringToItemDescriptor(i);this._httpClient.beginGetCommitDiffs(n,s,h,r,u,f).then(e,o)},t.prototype.beginGetPush=function(n,t,i,r,u,f){this._httpClient.beginGetPush(n,t,i,r).then(u,f)},t.prototype.beginGetPushes=function(n,t,i,r,u,f){this._httpClient.beginGetPushes(n,t,i,r).then(u,f)},t.prototype.beginLockGitRef=function(n,t,r,u){var f=this;i.postHTML(this._getApiLocation("LockGitRef"),{repositoryId:n.id,refName:t},function(){$.isFunction(r)&&r.call(f)},u)},t.prototype.beginUnlockGitRef=function(n,t,r,u){var f=this;i.postHTML(this._getApiLocation("UnlockGitRef"),{repositoryId:n.id,refName:t},function(){$.isFunction(r)&&r.call(f)},u)},t.prototype.beginCreateRepository=function(n,t,i,r,u){var f=this;this._httpClient.beginCreateRepository(n,t,i).then(function(t){f.clearCachedProjectRepositories(n);$.isFunction(r)&&r.call(f,t)},u||p.handleError)},t.prototype.beginRenameRepository=function(n,t,i,r){var u=this;this._httpClient.beginRenameRepository(n.id,t).then(function(){n.name=t;$.isFunction(i)&&i.call(u,n)},r||p.handleError)},t.prototype.beginDeleteRepository=function(n,t,i){var r=this;this._httpClient.beginDeleteRepository(n.id).then(function(){r.clearCachedProjectRepositories(n.project.id);$.isFunction(t)&&t.call(r)},i||p.handleError)},t.prototype.beginGetBranchDiffSummary=function(n,t,u,f,e){i.postMSJSON(this._getApiLocation("BranchDiffSummary"),{repositoryId:n.id,baseVersion:t,versions:r.stringifyMSJSON(u)},f,e)},t.prototype.beginGetCommitFileDiff=function(n,t,r,u,f,e,o){var s=this,h={repositoryId:n.id,baseVersion:t,targetVersion:r,maxNumberOfChanges:u,skipCount:f};i.getMSJSON(this._getApiLocation("DiffCommits"),h,function(n){s._processChangeList(n);$.isFunction(e)&&e.call(s,n)},o)},t.prototype.beginGetCommitItems=function(n,t,r,u,f){i.postMSJSON(this._getApiLocation("commitItems"),{version:t,path:r,repositoryId:n.id},u,f,{showGlobalProgressIndicator:!1})},t.prototype.beginGetLastChangeTreeItems=function(n,t,r,u,f,e){i.postMSJSON(this._getApiLocation("lastChangeTreeItems"),{version:t,path:r,repositoryId:n.id,allowPartial:u},f,e,{showGlobalProgressIndicator:!1})},t.prototype.beginGetAnnotateGitDiffs=function(n,t,u,f,e){i.postMSJSON(this._getApiLocation("annotateGitDiffs"),{repositoryId:n.id,path:t,versions:r.stringifyMSJSON(u)},f,e)},t.prototype.beginGetUserLastBranch=function(n,t,r){var u=this;i.getMSJSON(this._getApiLocation("gitUserDefaultBranchName"),{repositoryId:n.id},function(n){t.call(u,n.branchName)},r)},t.prototype.beginGetUserDefaultRepository=function(n,t,r){var u=this;i.getMSJSON(this._getApiLocation("gitUserDefaultRepository"),{projectName:n},function(n){t.call(u,n.repository)},r)},t.prototype.gitVersionStringToItemDescriptor=function(n){var i={},t=w.VersionSpec.parse(n);return t instanceof w.PreviousVersionSpec&&(i.versionOptions=s.GitVersionOptions.FirstParent,t=t.version),t instanceof w.GitBranchVersionSpec?(i.versionType="branch",i.version=t.branchName):t instanceof w.GitCommitVersionSpec?(i.versionType="commit",i.version=t.commitId):t instanceof w.GitTagVersionSpec?(i.versionType="tag",i.version=t.tagName):t instanceof w.GitIndexVersionSpec&&(i.versionType="index",i.version=t.indexName),i},t.prototype.getQueryCriteria=function(n){var t={fromDate:n.fromDate,toDate:n.toDate,fromCommitId:n.fromVersion,toCommitId:n.toVersion,itemPath:n.itemPath,excludeDeletes:n.excludeDeletes,user:n.user,$top:n.top,$skip:n.skip};return n.itemVersion&&(t.itemVersion=this.gitVersionStringToItemDescriptor(n.itemVersion)),n.compareVersion&&(t.compareVersion=this.gitVersionStringToItemDescriptor(n.compareVersion)),t},t.prototype.getHistoryQueryResults=function(n){return{moreResultsAvailable:n.hasMore,startingCommitId:n.startingCommitId,unprocessedCount:n.stillProcessing?1:0,unpopulatedCount:n.stillProcessing?1:0,results:$.map(n.commits,function(n){var t={changeList:{comment:n.comment,commentTruncated:n.commentTruncated,owner:n.author.name,ownerDisplayName:u.format(e.CommitOwnerDisplayNameFormat,n.author.name,n.author.email),sortDate:n.committer.date,creationDate:n.author.date,changeCounts:n.changeCounts,version:"GC"+n.commitId}},i;return $.extend(t.changeList,{author:{id:n.author.email,displayName:n.author.name,date:n.author.date},committer:{id:n.committer.email,displayName:n.committer.name,date:n.committer.date}}),$.extend(t.changeList,{commitId:{full:n.commitId,short:h.getShortCommitId(n.commitId)},commitTime:n.committer.date}),n.changes&&n.changes.length&&(i=n.changes[0],$.extend(t,{itemChangeType:i.changeType,serverItem:i.sourceServerItem})),n.statuses&&$.extend(t.changeList,{statuses:n.statuses}),t})}},t.prototype.beginGetHistory=function(n,t,i,r){var u=this,f=this.getQueryCriteria(t);this._httpClient.beginGetCommits(n.getRepositoryId(),f).then(function(n){i(u.getHistoryQueryResults(n))},r||p.handleError)},t.prototype.beginGetCommits=function(n,t,i,r){var u=this;t.itemVersion&&typeof t.itemVersion=="string"&&(t.itemVersion=this.gitVersionStringToItemDescriptor(t.itemVersion));t.compareVersion&&typeof t.compareVersion=="string"&&(t.compareVersion=this.gitVersionStringToItemDescriptor(t.compareVersion));this._httpClient.beginGetCommits(n,t).done(function(n){i.call(u,n)}).fail(r||p.handleError)},t.prototype.beginGetCommitsById=function(n,t,i,r){var u=this;this._httpClient.beginGetCommits(n,{ids:t}).done(function(n){i.call(u,n.commits)}).fail(r||p.handleError)},t.prototype.beginPushChanges=function(n,t,i,r){this._httpClient.beginPushChanges(n.id,t).then(function(n){$.isFunction(i)&&i(n)},r||p.handleError)},t.prototype.beginGetItems=function(n,t,i,r,u){var h=this,o=[],f,e,s;i=i||{};f=y.GitItemFromJsonIsland.getGitItems(t,i);e=function(n){var u=[];$.each(n,function(n,r){r&&r.length!==0?u.push(l.gitItemArrayToLegacyGitItem(r,t[n].version,o[n],i.recursionLevel==a.VersionControlRecursionType.OneLevelPlusNestedEmptyFolders)):u.push(null)});$.isFunction(r)&&r(u)};f?e(f):(s={itemDescriptors:$.map(t,function(n){var t=h.gitVersionStringToItemDescriptor(n.version);return o.push(t),{path:n.path,version:t.version,versionOptions:t.versionOptions,versionType:t.versionType,recursionLevel:i.recursionLevel}}),includeContentMetadata:i.includeContentMetadata},this._httpClient.beginGetItems(n.getRepositoryId(),s).then(e,u||p.handleError))},t.prototype.beginGetItem=function(n,t,i,r,u,e){var h,s,c,o;r=r||{recursionLevel:a.VersionControlRecursionType.OneLevel};r.recursionLevel!==a.VersionControlRecursionType.None&&(h=t,t="");s=null;i&&(s=this.gitVersionStringToItemDescriptor(i));c=function(n){var t=l.gitItemArrayToLegacyGitItem(n,i,s,r.recursionLevel==a.VersionControlRecursionType.OneLevelPlusNestedEmptyFolders);$.isFunction(u)&&u(t)};o=y.GitItemFromJsonIsland.getGitItems([{path:h,version:i}],r);o?c(o[0]):this._httpClient.beginGetItem(n.getRepositoryId(),t,h,s,r.recursionLevel,r.includeContentMetadata,!1,!1).then(c,e||p.handleError)},t.prototype._gitChangesToLegacyChanges=function(n,t){return $.map(n||[],function(n){return{changeType:n.changeType,sourceServerItem:n.sourceServerItem,item:l.gitItemToLegacyGitItem(n.item,t)}})},t.prototype.beginGetPullRequests=function(n,t,i,r,u,f,e,o,s,h){var l=this._getBranchRefName(u),a=this._getBranchRefName(f),c;n?this._httpClient.beginGetAllPullRequests(n.getRepositoryId(),t,i,r,l,a,e,o).then(function(n){s(n,t,i,r)},h||p.handleError):(c={creatorId:i,reviewerId:r,status:t},this._gitRestClient.getPullRequestsByProject(null,c,null,o,e).then(function(n){s(n,t,i,r)},h||p.handleError))},t.prototype.beginGetPullRequest=function(n,t,i,r){this._httpClient.beginGetPullRequest(n.getRepositoryId(),t).then(function(n){i(n)},r||p.handleError)},t.prototype.beginCreatePullRequest=function(n,t,i,r,u,f,e,o,s){var h=this._getBranchRefName(t),c=this._getBranchRefName(i);this._httpClient.beginCreatePullRequest(n.getRepositoryId(),h,c,r,u,f,e).then(function(n){o(n)},s||p.handleError)},t.prototype.beginUpdatePullRequest=function(n,t,i,r,u){this._httpClient.beginUpdatePullRequest(n.getRepositoryId(),t,i).then(function(n){r(n)},u||p.handleError)},t.prototype.beginUpdatePullRequestReviewer=function(n,t,i,r,u,f){this._httpClient.beginUpdatePullRequestReviewer(n.getRepositoryId(),t,i,r).then(function(n){u(n)},f||p.handleError)},t.prototype.beginAddPullRequestReviewer=function(n,t,i,r,u,f){this._httpClient.beginAddPullRequestReviewer(n.getRepositoryId(),t,i,r).then(function(n){u(n)},f||p.handleError)},t.prototype.beginDeletePullRequestReviewer=function(n,t,i,r,u){this._httpClient.beginDeletePullRequestReviewer(n.getRepositoryId(),t,i).then(function(){r()},u||p.handleError)},t.prototype.beginGetSuggestions=function(n,t,i){this._httpClient.beginGetSuggestions(n.getRepositoryId()).then(function(n){t(n)},i||p.handleError)},t.prototype.beginGetPullRequestWorkItemsResourceRef=function(n,t,i,r,u,f){this._httpClient.beginGetPullRequestWorkItemsResourceRef(n.getRepositoryId(),t,r,u).then(function(n){i(n.resourceRefs,n.hasMoreCommits,n.nextLink)},f||p.handleError)},t.prototype.beginGetReferencedWorkItems=function(n,t,i){this._httpClient.beginGetReferencedWorkItems(n).then(function(n){t(n)},i||p.handleError)},t.prototype.beginGetPullRequestPingEmail=function(n,t,r,u){i.getMSJSON(this._getApiLocation("pullRequestPingEmail"),{repositoryId:n.getRepositoryId()||"",pullRequestId:t},r,u)},t.prototype.beginGetTemplateList=function(n,t,i,r){this._httpClient.beginGetTemplateList(n,t).then(i,r)},t.prototype._getBranchRefName=function(n){return n&&n.indexOf("refs/heads/")!==0?"refs/heads/"+n:n},t}(c.VersionControlClientServiceBase);t.GitClientService=k});
define("VersionControl/Scripts/RepositoryContext",["require","exports","VSS/Diag"],function(n,t,i){var r=function(){function n(n,t,i){this._tfsContext=n;this._repositoryType=t;this._rootPath=i}return n.prototype.getRepositoryType=function(){return this._repositoryType},n.prototype.getRepository=function(){return undefined},n.prototype.getTfsContext=function(){return this._tfsContext},n.prototype.getRootPath=function(){return this._rootPath},n.prototype.getRepositoryId=function(){return undefined},n.prototype.getClient=function(){return this._client||(this._client=this._createClient()),this._client},n.prototype._createClient=function(){return null},n.prototype.comparePaths=function(){return 0},n.prototype.pathStartsWith=function(n,t){return(n||"").indexOf(t)===0},n}();t.RepositoryContext=r});
define("VersionControl/Scripts/GitRepositoryContext",["require","exports","VSS/Utils/String","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.OM.Common","VersionControl/Scripts/GitClientService","VersionControl/Scripts/RepositoryType","VersionControl/Scripts/RepositoryContext"],function(n,t,i,r,u,f,e,o){var s=function(n){function t(t,i){n.call(this,t,e.RepositoryType.Git,"/");this._gitRepository=i}return __extends(t,n),t.create=function(n,i){return new t(i||r.TfsContext.getDefault(),n)},t.prototype.getRepository=function(){return this._gitRepository},t.prototype._createClient=function(){return u.ProjectCollection.getConnection(this.getTfsContext()).getService(f.GitClientService)},t.prototype.getGitClient=function(){return this.getClient()},t.prototype.comparePaths=function(n,t){return i.localeComparer(n,t)},t.prototype.getRepositoryId=function(){return this._gitRepository.id},t}(o.RepositoryContext);t.GitRepositoryContext=s});
define("VersionControl/Scripts/VersionControlUrls",["require","exports","VSS/Utils/String","Presentation/Scripts/TFS/TFS.Host.TfsContext","VersionControl/Scripts/RepositoryType","VersionControl/Scripts/GitRepositoryContext","VSS/Navigation/Services"],function(n,t,i,r,u,f,e){function h(n,t,i,u,f){t===void 0&&(t=null);i===void 0&&(i=!1);u===void 0&&(u=!1);f===void 0&&(f=null);var o=[""+n],s;return u&&o.push("review"),s=i?(t||r.TfsContext.getDefault()).getPublicActionUrl("changeset","versionControl",{parameters:o}):(t||r.TfsContext.getDefault()).getActionUrl("changeset","versionControl",{parameters:o}),f?s+e.getHistoryService().getFragmentActionLink(null,f):s}function y(n,t,i,r,u,f,o){return u===void 0&&(u=!1),f===void 0&&(f=!1),h(n,r,u,f)+e.getHistoryService().getFragmentActionLink(i,{path:t,discussionId:o})}function c(n,t,i,u,f,o){var s,h;return i===void 0&&(i=null),u===void 0&&(u=!1),f===void 0&&(f=!1),o===void 0&&(o=null),s={ss:n+(t?";"+t:"")},f&&(s.parameters="review"),h=u?(i||r.TfsContext.getDefault()).getPublicActionUrl("shelveset","versionControl",s):(i||r.TfsContext.getDefault()).getActionUrl("shelveset","versionControl",s),o?h+e.getHistoryService().getFragmentActionLink(null,o):h}function p(n,t,i,r,u,f,o){return u===void 0&&(u=null),f===void 0&&(f=!1),c(n,t,u,f)+e.getHistoryService().getFragmentActionLink(r,{path:i,discussionId:o})}function o(n,t,u,f,e){e===void 0&&(e=!1);var o=[];return n||(n=r.TfsContext.getDefault()),u&&i.localeIgnoreCaseComparer(u,"index")!==0&&o.push(u),f||(f={}),f.parameters&&($.isArray(f.parameters)?o=o.concat(f.parameters):o.push(f.parameters)),o.length>0&&(f.parameters=o),i.localeIgnoreCaseComparer(n.navigation.project,t)!==0||n.navigation.team||(f.project=null),e?n.getPublicActionUrl(t,"git",f):n.getActionUrl(t,"git",f)}function w(n,t){return l(n,t,"security")}function b(n,t){return l(n,t,"policy")}function l(n,t,i){return n.getTfsContext().getActionUrl("_versioncontrol","admin",{})+e.getHistoryService().getFragmentActionLink(i,{repositoryId:n.getRepositoryId(),branchName:t})}function a(n,t,i,r,f){var h,s;return s=n.getRepositoryType()===u.RepositoryType.Git?o(n.getTfsContext(),n.getRepository().name,null,f):n.getTfsContext().getActionUrl(null,"versionControl",f),(r||t)&&(h=r||{},t&&(r.path=t),s+=e.getHistoryService().getFragmentActionLink(i,r)),s}function s(n,t,i,r,u,f){var s,h;return i===void 0&&(i=!1),r===void 0&&(r=!1),u===void 0&&(u=null),f===void 0&&(f=null),s=[t],r&&s.push("review"),f=f||{},$.extend(f,{parameters:s}),h=o(n.getTfsContext(),n.getRepository().name,"commit",f,i),u?h+e.getHistoryService().getFragmentActionLink(null,u):h}function k(n,t,i,r,u,f,o){return u===void 0&&(u=!1),f===void 0&&(f=!1),s(n,t,u,f)+e.getHistoryService().getFragmentActionLink(r,{path:i,discussionId:o})}function d(n,t,i,r){var u={id:n,name:n,project:{id:t}},e=new f.GitRepositoryContext(r,u);return s(e,i,!1,!1,null,{project:t,includeTeam:!1})}function g(n,t,i,r){var u={id:n,name:n,project:{id:t}},e=new f.GitRepositoryContext(r,u);return a(e,null,null,{version:i},{project:t,includeTeam:!1})}function nt(n,t){return o(n.getTfsContext(),n.getRepository().name,"commits",{},!1)+e.getHistoryService().getFragmentActionLink(null,t)}function tt(n,t,i){return o(n.getTfsContext(),n.getRepository().name,"branches",{},!1)+e.getHistoryService().getFragmentActionLink("commits",{baseVersion:t,targetVersion:i})}function it(n,t){return o(n.getTfsContext(),n.getRepository().name,"history",{_a:"history",itemVersion:"GB"+t},!1)}function rt(n,t){return o(n.getTfsContext(),n.getRepository().name,null,{},!1)+e.getHistoryService().getFragmentActionLink("contents",{version:"GB"+t})}function ut(n,t){return o(n.getTfsContext(),n.getRepository().name,"history",{},!1)+e.getHistoryService().getFragmentActionLink("updates",{itemVersion:"GB"+t})}function ft(n,t,i,r){r===void 0&&(r=!1);var u=o(n.getTfsContext(),n.getRepository().name,"push",{parameters:""+t},r);return i&&(u+=e.getHistoryService().getFragmentActionLink(null,{refName:i})),u}function et(n,t,i,r){var u={area:"api",repositoryId:n.getRepositoryId()||"",path:t,version:i};return r&&(u.zipFileName=r),n.getTfsContext().getActionUrl("itemContentZipped","versioncontrol",u)}function ot(n,t,i,r,u){r===void 0&&(r=!1);u===void 0&&(u=null);var f={area:"api",repositoryId:n.getRepositoryId()||"",path:t,version:i,contentOnly:r};return u&&$.extend(f,u),n.getTfsContext().getActionUrl("itemContent","versioncontrol",f)}function st(n,t,i,r,f){return i===void 0&&(i=!1),r===void 0&&(r=!1),f===void 0&&(f=null),n.getRepositoryType()===u.RepositoryType.Git?s(n,t.commitId.full,i,r,f):t.changesetId?h(t.changesetId,n.getTfsContext(),i,r,f):c(t.shelvesetName,t.owner,n.getTfsContext(),i,r,f)}function ht(n,t,i,r,u,f){var s,h,c;return(t===void 0&&(t=null),i===void 0&&(i=null),r===void 0&&(r=!1),u===void 0&&(u=null),f===void 0&&(f=null),!n)?null:(s={sourceRef:t!==null?encodeURIComponent(t):null,targetRef:i!==null?encodeURIComponent(i):null},u&&$.extend(s,u),f=f||{},h=o(n.getTfsContext(),n.getRepository().name,"pullrequestcreate",f,r),c=e.HistoryService.serializeState(s),c?h+"?"+c:h)}function v(n,t,i,r,u,f){var h,s,c;return i===void 0&&(i=!1),r===void 0&&(r=null),u===void 0&&(u=null),f===void 0&&(f=null),h=[t.toString()],s={action:"overview"},r&&$.extend(s,r),u=u||{},$.extend(u,{parameters:h}),f||(f="pullrequest"),c=o(n.getTfsContext(),n.getRepository().name,f,u,i),c+e.getHistoryService().getFragmentActionLink(null,s)}function ct(n){return o(n.getTfsContext(),n.getRepository().name,"pullrequests",{})}function lt(n){return o(n.getTfsContext(),n.getRepository().name,"branches",{area:null})}function at(n,t,i,r,u){u===void 0&&(u=null);var e={id:n,name:n,project:{id:t}},o=new f.GitRepositoryContext(r,e);return v(o,i,!0,null,u?u:{project:t,includeTeam:!1})}t.getChangesetUrl=h;t.getChangesetUrlForFile=y;t.getShelvesetUrl=c;t.getShelvesetUrlForFile=p;t.getGitActionUrl=o;t.getBranchSecurityUrl=w;t.getBranchPolicyUrl=b;t.getBranchAdminUrl=l;t.getExplorerUrl=a;t.getCommitUrl=s;t.getCommitUrlForFile=k;t.getCommitUrlUsingRepoId=d;t.getRefUrlUsingRepoId=g;t.getCommitsViewUrl=nt;t.getBranchCompareUrl=tt;t.getBranchHistoryUrl=it;t.getBranchExplorerUrl=rt;t.getBranchUpdatesUrl=ut;t.getPushUrl=ft;t.getZippedContentUrl=et;t.getFileContentUrl=ot;t.getChangeListUrl=st;t.getCreatePullRequestUrl=ht;t.getPullRequestUrl=v;t.getPullRequestsUrl=ct;t.getBranchesUrl=lt;t.getPullRequestUrlUsingRepoId=at});
define("Presentation/Scripts/TFS/Generated/TFS.Discussion.Constants",["require","exports"],function(n,t){var i,r,u,f,e;(function(n){n.ItemPath="Microsoft.TeamFoundation.Discussion.ItemPath";n.StartLine="Microsoft.TeamFoundation.Discussion.Position.StartLine";n.EndLine="Microsoft.TeamFoundation.Discussion.Position.EndLine";n.StartColumn="Microsoft.TeamFoundation.Discussion.Position.StartColumn";n.EndColumn="Microsoft.TeamFoundation.Discussion.Position.EndColumn";n.StartCharPosition="Microsoft.TeamFoundation.Discussion.Position.StartCharPosition";n.EndCharPosition="Microsoft.TeamFoundation.Discussion.Position.EndCharPosition";n.PositionContext="Microsoft.TeamFoundation.Discussion.Position.PositionContext"})(i=t.DiscussionThreadPropertyNames||(t.DiscussionThreadPropertyNames={})),function(n){n.MultipleThreadsLocationId="a50ddbe2-1a1d-4c55-857f-73c6a3a31722";n.ThreadsLocationId="010054f6-d9ed-4ed2-855f-7f86bff10c02";n.ThreadsBatchLocationId="255a0b5e-3c2f-43c2-a688-36c878210ba2";n.MultipleCommentsLocationId="20933fc0-b6a7-4a57-8111-a7458da5441b";n.CommentsLocationId="495211bd-b463-4578-86fe-924ea4953693";n.AreaId="6823169A-2419-4015-B2FD-6FD6F026CA00";n.AreaName="discussion";n.MultipleThreadsLocationIdString="A50DDBE2-1A1D-4C55-857F-73C6A3A31722";n.ThreadsLocationIdString="010054F6-D9ED-4ED2-855F-7F86BFF10C02";n.MultipleCommentsLocationIdString="20933FC0-B6A7-4A57-8111-A7458DA5441B";n.CommentsLocationIdString="495211BD-B463-4578-86FE-924EA4953693";n.CodeReviewArtifactType="ReviewId";n.CodeReviewArtifactTool="CodeReview";n.MaxCommentContentLength=15e4}(r=t.DiscussionWebApiConstants||(t.DiscussionWebApiConstants={})),function(n){n[n.Unknown=0]="Unknown";n[n.Text=1]="Text";n[n.CodeChange=2]="CodeChange";n[n.System=3]="System"}(t.CommentType||(t.CommentType={}));u=t.CommentType,function(n){n[n.Unknown=0]="Unknown";n[n.Low=1]="Low";n[n.Normal=2]="Normal";n[n.High=3]="High"}(t.DiscussionSeverity||(t.DiscussionSeverity={}));f=t.DiscussionSeverity,function(n){n[n.Unknown=0]="Unknown";n[n.Active=1]="Active";n[n.Fixed=2]="Fixed";n[n.WontFix=3]="WontFix";n[n.Closed=4]="Closed";n[n.ByDesign=5]="ByDesign";n[n.Pending=6]="Pending"}(t.DiscussionStatus||(t.DiscussionStatus={}));e=t.DiscussionStatus;t.TypeInfo={ArtifactDiscussionThread:{fields:null},CommentType:{enumValues:{unknown:0,text:1,codeChange:2,system:3}},DiscussionComment:{fields:null},DiscussionSeverity:{enumValues:{unknown:0,low:1,normal:2,high:3}},DiscussionStatus:{enumValues:{unknown:0,active:1,fixed:2,wontFix:3,closed:4,byDesign:5,pending:6}},DiscussionThread:{fields:null}};t.TypeInfo.ArtifactDiscussionThread.fields={publishedDate:{isDate:!0},lastUpdatedDate:{isDate:!0},comments:{isArray:!0,typeInfo:t.TypeInfo.DiscussionComment},status:{enumType:t.TypeInfo.DiscussionStatus}};t.TypeInfo.DiscussionComment.fields={publishedDate:{isDate:!0},lastUpdatedDate:{isDate:!0},commentType:{enumType:t.TypeInfo.CommentType}};t.TypeInfo.DiscussionThread.fields={publishedDate:{isDate:!0},lastUpdatedDate:{isDate:!0},comments:{isArray:!0,typeInfo:t.TypeInfo.DiscussionComment},status:{enumType:t.TypeInfo.DiscussionStatus}}});
define("Presentation/Scripts/TFS/TFS.Discussion.CodeAnalysisCommentDetailsExtension",["require","exports","Presentation/Scripts/TFS/Generated/TFS.Discussion.Constants","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation","VSS/Utils/UI"],function(n,t,i,r,u){var f=u.domElem,e=function(){function n(){if(n._instance)throw new Error("Error: Instantiation failed: Use getCommentDetailsExtension() instead of new.");n._instance=this}return n.prototype.getAuthorDisplayName=function(){return r.CodeAnalysisAuthor},n.prototype.getAuthorIcon=function(n){return n.status===i.DiscussionStatus.Fixed?$("<div />").addClass("identity-picture code-analysis-resolved-icon"):$("<div />").addClass("identity-picture code-analysis-warning-icon")},n.prototype.getCommentTypeIcon=function(){return $(f("div","vc-pullrequest-large-icon-container icon-tfs-vc-pullrequests-policy-codeanalysis-large"))},n.prototype.getGridIcon=function(n){return n.status===i.DiscussionStatus.Fixed?$(f("div","identity-picture x-small icon icon-code-analysis-resolved-small")):$(f("div","identity-picture x-small icon icon-warning"))},n.getInstance=function(){return n._instance},n._instance=new n,n}();t.CodeAnalysisCommentDetailsExtension=e});
define("Presentation/Scripts/TFS/TFS.Discussion.RegularCommentDetailsExtension",["require","exports","VSS/Utils/UI"],function(n,t,i){var r=i.domElem,u=function(){function n(n,t){this._discussionComment=n;this._discussionThreadManager=t}return n.prototype.getAuthorDisplayName=function(){return this._discussionComment.author.displayName},n.prototype.getAuthorIcon=function(){return $("<img />").addClass("identity-picture").attr("src",this._discussionThreadManager.getIdentityImageUrl(this._discussionComment.author.id))},n.prototype.getCommentTypeIcon=function(){return $(r("div","vc-pullrequest-large-icon-container icon-tfs-vc-pullrequests-code-comment-large"))},n.prototype.getGridIcon=function(){var n=$(r("img","identity-picture"));return n.addClass("x-small"),n.attr("src",this._discussionThreadManager.getIdentityImageUrl(this._discussionComment.author.id)),n.addClass("identity-"+this._discussionComment.author.id),n},n}();t.RegularCommentDetailsExtension=u});
define("Presentation/Scripts/TFS/TFS.Discussion.CommentDetails",["require","exports","Presentation/Scripts/TFS/TFS.Discussion.CodeAnalysisCommentDetailsExtension","Presentation/Scripts/TFS/TFS.Discussion.RegularCommentDetailsExtension"],function(n,t,i,r){function u(n,t,u,f){return f&&t.properties&&t.properties.CodeAnalysisThreadType?i.CodeAnalysisCommentDetailsExtension.getInstance():new r.RegularCommentDetailsExtension(n,u)}t.getCommentDetailsExtension=u});
define("Presentation/Scripts/TFS/Resources/TFS.Resources.Discussion",["require","exports"],function(require,exports){var e=exports;e.DeleteActionTooltip="Delete this comment";e.DiscussionStatus="Status:";e.DiscussionCommentUpdate="Update";e.OverviewDiscussionCommentHint="Add a comment...";e.EditedComment="edited";e.DiscussionCommentCancel="Cancel";e.DiscussionCommentDelete="Delete";e.DeleteAction="delete";e.SelectionCommentTooltip="Comment on the selected text";e.DiscussionStatusClosed="Closed";e.ReplyAction="reply";e.DiscussionStatusActive="Active";e.DiscussionThreadNewComment="1 new comment has been posted to this thread";e.CancelAction="cancel";e.DiscussionThreadUnsavedComments="Some of your comments could not be saved:";e.CommentFeedbackDialog_WrongWordLabelText="Line was correct but position in line was not";e.DiscussionCommentDeleted="Comment deleted";e.CreateWorkItemTooltip="Create a work item from this comment";e.SavePending="saving...";e.CommentFeedbackDialog_SecondaryText="Where did you expect to see this comment?";e.DiscussionCommentMentionInstructions="Use # to mention a work item or @ to mention a person.";e.CommentFeedbackDialog_Title="Comment tracked to the wrong place";e.DiscussionCommentSave="Comment";e.SelectDiscussionStatusTooltip="Select a status for this discussion";e.DiscussionCommentEdit="Edit";e.DiscussionCommentHint="Write a reply...";e.DiscussionThreadUnsavedComment="{0}, line: {1}";e.DiscussionCommentMarkdownInstructions="Markdown supported.";e.CommentFeedbackActionTooltip="Send feedback on the position of this comment";e.CreateWorkItemMenuHeader="Create a new:";e.DiscussionStatusWontfix="Won\u0027t fix";e.DiscussionCommentReply="Reply";e.DeletePending="deleting...";e.SaveAction="save";e.SaveActionWithShortcut="save (enter)";e.DiscussionStatusResolved="Resolved";e.DiscussionStatusPending="Pending";e.AddCommentTooltip="Click to add a comment";e.CommentFeedbackDialog_OkText="Send feedback";e.CancelActionWithShortcut="cancel (esc)";e.DeleteCommentConfirmation="Are you sure you want to delete this comment?";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Presentation/Scripts/TFS/TFS.UI.Controls.Common",["require","exports","VSS/Utils/Core","VSS/Utils/String","VSS/Diag","VSS/Resources/VSS.Resources.Platform","Presentation/Scripts/TFS/TFS.Legacy.Ajax","VSS/Controls","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.NotificationEventNames","Presentation/Scripts/TFS/TFS.WebSettingsService","VSS/Utils/UI","VSS/Controls/StatusIndicator","VSS/Controls/Dialogs","VSS/Controls/Notifications","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","Presentation/Scripts/TFS/Resources/TFS.Resources.Presentation","Presentation/Scripts/TFS/Resources/TFS.Resources.Discussion","VSS/Service","VSS/Events/Action","VSS/Events/Services","VSS/Telemetry/Services"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt){var it=i.delegate,tt=l.domElem,ft=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initialize=function(){this._isDismissedOnClient()||(n.prototype.initialize.call(this),this._initializeMessageAreaOptions(),this._messageArea=o.Enhancement.enhance(y.MessageAreaControl,this.getElement(),this._options),this._dismissDelegate=it(this,this._dismissMessage),this._bind(y.MessageAreaControl.EVENT_DISPLAY_CLEARED,this._dismissDelegate))},t.prototype.reconfigure=function(n){if($.extend(this._options,n),this._initializeMessageAreaOptions(),this._unbind(y.MessageAreaControl.EVENT_DISPLAY_CLEARED,this._dismissDelegate),this._isDismissedOnClient()){this._messageArea.clear();return}this._options.message?this._messageArea.setMessage(this._options.message):this._messageArea.clear();this._bind(y.MessageAreaControl.EVENT_DISPLAY_CLEARED,this._dismissDelegate)},t.isDismissedOnClient=function(n,t){var i=k.getApplicationService(c.WebSettingsService).readLocalSetting(p.Messages.DismissNotificationRegistryPath+n,t,!1);return i==="true"},t.prototype._isDismissedOnClient=function(){if(this._options&&this._options.clientDismissable&&this._options.message&&this._options.message.id)return t.isDismissedOnClient(this._options.message.id,this._options.message.scope)},t.prototype._initializeMessageAreaOptions=function(){var n=this._options;if(n){n.message&&typeof n.message.header=="string"&&(n.message.header=$(tt("span")).html(n.message.header));n.message&&typeof n.message.content=="string"&&(n.message.content=$(tt("span")).html(n.message.content));return}},t.prototype._dismissMessage=function(){if(this._options&&this._options.message&&this._options.message.id){var n=this._options.clientDismissable?h.EventNames.ClientNotificationDismissed:h.EventNames.NotificationDismissed;g.getService().fire(n,this._options.message.id,this._options.message.scope)}},t}(o.BaseControl),et,ot,ut,st,rt;t.DismissableMessageAreaControl=ft;o.Enhancement.registerEnhancement(ft,".tfs-host-notifications");et=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({width:450,minWidth:450,height:260,minHeight:260,allowMultiSelect:!1,contentHeader:f.TrialHeader,contentDescription:f.TrialStartToday,buttons:{saveButton:{id:"ok",text:f.StartTrial,click:it(this,this._onSaveClick)},cancelButton:{id:"cancel",text:f.ModalDialogCancelButton,click:it(this,this.onCancelClick)}}},t))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this.buildDialogElements()},t.prototype.buildDialogElements=function(){var n,t;this._$data=$("<div>").addClass("trial-account-dialog");n=$("<div>").append(this._$data).addClass("admin-dialog").css("height","100%");this.getElement().append(n);this._$waitControl=o.create(a.WaitControl,this.getElement(),{target:this._$data,cancellable:!1,message:f.DefaultWaitMessage});t=$("<div>").appendTo(this._$data).addClass("trial-account-header-section");this._options.mainTitle&&$("<div>").appendTo(t).addClass("dialog-header").text(this._options.mainTitle);this.setTitle(this._options.contentHeader);this._$dataDiv=$("<div>").appendTo(this._$data).attr("id","main-context");this._$trialTextDiv=$("<div>").appendTo(this._$dataDiv).addClass("message-trial");this._createTrialHeader();this._createErrorFooter();this._hideError()},t.prototype._updateTrialButtons=function(n){this.updateOkButton(n)},t.prototype._onCloseClick=function(){this.close()},t.prototype._onCancelClick=function(){this.close()},t.prototype._onSaveClick=function(){this._hideError();this._updateTrialButtons(!1);this._$waitControl.startWait();e.postMSJSON(s.TfsContext.getDefault().getActionUrl("EnableAccountTrialMode","account",{area:"api"}),null,it(this,this._postTrialSuccess),it(this,this._postTrialFailure))},t.prototype._postTrialSuccess=function(){this._$waitControl.endWait();d.getService().performAction(d.CommonActions.ACTION_WINDOW_RELOAD)},t.prototype._postTrialFailure=function(n){this._$waitControl.endWait();switch(n.type){case"Microsoft.VisualStudio.Services.Account.AccountTrialException":this._showError(n.message);break;default:this._showError(f.StartTrialFail)}},t.prototype._showError=function(n){this._$errorMessageDiv.show();this._$errorMessageText.text(n)},t.prototype._hideError=function(){this._$errorMessageDiv.hide()},t.prototype._createErrorFooter=function(){this._$errorMessageDiv=$("<div>").appendTo($("#main-context")).attr("id","account-error-trial").addClass("error-message-div-trial");this._$errorMessageImgDiv=$("<div>").appendTo(this._$errorMessageDiv).addClass("trial-err-footer-img");this._$errorMessageImg=$("<span/>").appendTo(this._$errorMessageImgDiv).addClass("trial-error-message-icon").addClass("trial-error-message-img");this._$errorMessageText=$("<div>").appendTo(this._$errorMessageDiv).addClass("error-message-account-trial")},t.prototype._createTrialHeader=function(){var i=$("<div>").appendTo(this._$trialTextDiv).addClass("trial-text-header-div"),t=$("<div>").appendTo(this._$trialTextDiv).addClass("trial-text-header-div"),n;t.addClass("description-trial").html(r.format(this._options.contentDescription,this._options.EndDateIfTrialStarted));n=$("<div>").appendTo(this._$trialTextDiv).addClass("trial-text-header-div");n.addClass("description-frature-trial-once").html(f.PutAccountTrialOnce);n=$("<div>").appendTo(this._$trialTextDiv).addClass("trial-text-header-div");n.addClass("detail-feature-trial").html(r.format(f.AllFeaturesEnableDuringTrial,this._options.TrialFeatureUrl))},t}(v.ModalDialogO);t.AccountTrialDialog=et;ot=function(n){function t(t){n.call(this,t);this._thread=t.thread||null}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:"comment-feedback-dialog",title:b.CommentFeedbackDialog_Title,okText:b.CommentFeedbackDialog_OkText,resizable:!1,draggable:!0,useBowtieStyle:!0,bowtieVersion:2,width:560},t))},t.prototype.initialize=function(){var i="commentFeedbackInput"+o.getId(),r="commentFeedbackCheckbox"+o.getId(),u=$(tt("div","form-section")).appendTo(this._element),f,t;$(tt("label")).attr("for",i).text(b.CommentFeedbackDialog_SecondaryText).appendTo(u);this._$commentFeedbackInput=$(tt("textarea","comment-feedback-dialog-input")).attr("type","text").attr("id",i).height(100).appendTo(u);f=$(tt("div","form-section")).appendTo(this._element);t=$(tt("div","checkbox-pair")).appendTo(f);this._$wrongWordCheckbox=$(tt("input")).addClass("checkbox-input comment-feedback-dialog-wrong-word-checkbox").attr("type","checkbox").attr("id",r).appendTo(t);this._$wrongWordLabel=$(tt("label")).attr("for",r).addClass("checkbox-label comment-feedback-dialog-wrong-word-label-text").text(b.CommentFeedbackDialog_WrongWordLabelText).appendTo(t);n.prototype.initialize.call(this);this.updateOkButton(!0)},t.prototype.onOkClick=function(){var t=this._$commentFeedbackInput.val(),i=this._$wrongWordCheckbox&&this._$wrongWordCheckbox.is(":checked"),n;this._thread&&this._thread.firstComparingIteration&&this._thread.secondComparingIteration&&(n=new nt.TelemetryEventData("CommentTracking","CommentFeedbackDialog",{threadId:this._thread.id,artifactUri:this._thread.artifactUri,itemPath:this._thread.itemPath,originalFirstIteration:this._thread.firstComparingIteration,originalSecondIteration:this._thread.secondComparingIteration,trackedFirstIteration:this._thread.trackingCriteria.firstComparingIteration,trackedSecondIteration:this._thread.trackingCriteria.secondComparingIteration,feedbackContent:t,wrongWordBoxWasChecked:i}),nt.publishEvent(n));this.close()},t}(v.ModalDialogO);t.CommentFeedbackDialog=ot;ut=function(){function n(){var n=this;this._gridElement=$(".responsive-grid:first");this._gridElement.length===1&&(this._adjustGridSections(),$(window).resize(function(){n._adjustGridSections()}))}return n.prototype._adjustGridSections=function(){this._adjustGridWidth();this._adjustSection3Top()},n.prototype._adjustGridWidth=function(){this._gridElement.width()===640&&this.getSection(3).children().length===0?this.getSection(2).css({width:"640px"}):this.getSection(2).css({width:"320px"})},n.prototype._adjustSection3Top=function(){var t=$(".grid-cell",this.getSection(3)),n=this.getSection(3);this._gridElement.width()===960&&this.getSection(2).height()-this.getSection(1).height()>=160?(n.width()===960&&n.css({width:"640px"}),t.css({top:this.getSection(1).height()-this.getSection(2).height()+"px"})):this._gridElement.width()===960&&this.getSection(2).height()==this.getSection(1).height()?n.width()===640&&(n.css({width:"960px"}),t.css({top:""})):(n.css({width:""}),t.css({top:""}))},n.GetInstance=function(){return this._instance||(this._instance=new n),this._instance},n.prototype.scanViewImports=function(){var n=this;$(function(){var t=$(".grid-view-item");$.each(t,function(t,i){var r=parseInt($(i).attr("data-grid-cell-section")),u=parseInt($(i).attr("data-grid-cell-columns")),f=parseInt($(i).attr("data-grid-cell-rows")),e=$(i).attr("data-grid-cell-adjustHeight").toLowerCase()==="true"?!0:!1;$(i).remove();n.addControlInGrid(r,f,u,e,i);$(i).removeClass("grid-item-hidden").removeClass("grid-view-item")});n._adjustGridSections()})},n.prototype.getElement=function(){return this._gridElement},n.prototype.getSection=function(n){return $(".section"+n,this._gridElement)},n.prototype.addControlInGrid=function(n,t,i,r,u){var f=this.createContainer(n,t,i),e;return u&&($(f).append(u),r&&(e=this._getAdjustedContainerHeight(u)+"px",$(f).css({height:e}))),this._adjustGridSections(),f},n.prototype.createContainer=function(t,i,r){var o=this.getSection(t),u=$('<div class="grid-cell"><\/div>'),f,e;return $(o).append(u),f=r*n.cellSize+"px",e=i*n.cellSize+"px",$(u).css({width:f,height:e}),this._adjustGridSections(),u},n.prototype.createInGrid=function(n,t,i,r,u){var f=this.addControlInGrid(n,t,i,!1);return this._adjustGridSections(),o.BaseControl.createIn(r,f,u)},n.prototype.adjustHeight=function(n){var t=$(n).parent(".grid-cell"),i;t.length>0&&(i=this._getAdjustedContainerHeight(t)+"px",$(t).css({height:i}));this._adjustGridSections()},n.prototype.removeContainer=function(n){$(n).parent(".grid-cell").remove();this._adjustGridSections()},n.prototype.getContainer=function(n){return $(n).parent(".grid-cell")},n.prototype._getAdjustedContainerHeight=function(t){$(t).css({height:"auto"});var i=$(t).height();return i<=0?0:Math.ceil(i/n.cellSize)*n.cellSize},n.cellSize=160,n}();t.ResponsiveGrid=ut;$(function(){ut.GetInstance().scanViewImports()});st=function(){function n(){}return n.addToMyFavs=function(){return{id:n.ADD_TO_MY_FAVORITES_ACTION,text:w.AddToMyFavoritesTitle,title:w.AddToMyFavoritesTooltipText,icon:"bowtie-icon bowtie-favorite",groupName:"favorites"}},n.addToTeamFavs=function(t){return{id:n.ADD_TO_TEAM_FAVORITES_ACTION,text:w.AddToTeamFavoritesTitle,title:w.AddToTeamFavoritesTooltipText,disabled:t===null||t===undefined?!1:t,groupName:"favorites"}},n.removeFromMyFavs=function(){return{id:n.REMOVE_FROM_MY_FAVORITES_ACTION,text:w.RemoveFromMyFavoritesTitle,title:w.RemoveFromMyFavoritesTooltipText,icon:"icon-favorite-out",groupName:"favorites"}},n.removeFromTeamFavs=function(t){return{id:n.REMOVE_FROM_TEAM_FAVORITES_ACTION,text:w.RemoveFromTeamFavoritesTitle,title:w.RemoveFromTeamFavoritesTooltipText,disabled:t===null||t===undefined?!1:t,groupName:"favorites"}},n.security=function(){return{id:n.ITEM_SECURITY_ACTION,text:w.ItemSecurityTitle,title:w.ItemSecurityTooltipText,icon:"bowtie-icon bowtie-security ",groupName:"security"}},n.pinToHomePage=function(t){return{id:n.PIN_TO_HOMEPAGE_ACTION,text:w.PinToHomepageTitle,title:w.PinToHomepageTooltipText,icon:"icon-pin",disabled:t===null||t===undefined?!1:t,groupName:"pinning"}},n.unpinFromHomePage=function(t){return{id:n.UNPIN_FROM_HOMEPAGE_ACTION,text:w.UnpinFromHomepageTitle,title:w.UnpinFromHomepageTooltipText,icon:"icon-unpin",disabled:t===null||t===undefined?!1:t,groupName:"pinning"}},n.ADD_TO_MY_FAVORITES_ACTION="add-to-my-favorites",n.ADD_TO_TEAM_FAVORITES_ACTION="add-to-team-favorites",n.REMOVE_FROM_MY_FAVORITES_ACTION="remove-from-my-favorites",n.REMOVE_FROM_TEAM_FAVORITES_ACTION="remove-from-team-favorites",n.PIN_TO_HOMEPAGE_ACTION="pin-to-homepage",n.UNPIN_FROM_HOMEPAGE_ACTION="unpin-from-homepage",n.ITEM_SECURITY_ACTION="item-security",n}();t.CommonMenuItems=st;rt=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initialize=function(){var n=$("<iframe "+this._getSandboxAttributes()+">").attr("src",this._options.contentUrl);this.getElement().append(n)},t.prototype._getSandboxAttributes=function(){return l.BrowserCheckUtils.isFirefox()?"":"sandbox='allow-scripts allow-popups allow-same-origin '"},t.CORE_CSS_CLASS="iframe-control",t}(o.BaseControl);t.IFrameControl=rt;o.Enhancement.registerEnhancement(rt,"."+rt.CORE_CSS_CLASS)});
define("Presentation/Scripts/TFS/TFS.Discussion.Common.UI",["require","exports","VSS/Controls","VSS/Utils/Core","VSS/Utils/Date","VSS/Controls/Dialogs","Presentation/Scripts/TFS/TFS.Discussion.CommentDetails","Presentation/Scripts/TFS/Generated/TFS.Discussion.Constants","Presentation/Scripts/TFS/Resources/TFS.Resources.Discussion","Presentation/Scripts/TFS/TFS.UI.Controls.Common","VSS/Controls/Menus","VSS/Utils/UI","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","jQueryUI/core"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){var b=function(){function n(){this._discussionThreadControlsById={};this._commentFeedbackFeatureEnabled=a.FeatureAvailabilityService.isFeatureEnabled(v.FeatureAvailabilityFlags.WebAccessVersionControlPullRequestsCommentFeedback,!1)}return n.prototype.getIdentityImageUrl=function(){throw new Error("Must implement abstract method DiscussionThreadControlManagerBase.getIdentityImageUrl.");},n.prototype.createNewComment=function(){throw new Error("Must implement abstract method DiscussionThreadControlManagerBase.createNewComment.");},n.prototype.updateComment=function(){throw new Error("Must implement abstract method DiscussionThreadControlManagerBase.updateComment.");},n.prototype.saveComment=function(){throw new Error("Must implement abstract method DiscussionThreadControlManagerBase.saveComment.");},n.prototype.deleteComment=function(){throw new Error("Must implement abstract method DiscussionThreadControlManagerBase.deleteComment.");},n.prototype.updateDiscussion=function(){throw new Error("Must implement abstract method DiscussionThreadControlManagerBase.updateCommentStatus.");},n.prototype.getDiscussionStatus=function(n){return n.status},n.prototype.registerThreadControl=function(n){this._discussionThreadControlsById[n.getThread().id]=n},n.prototype.getThreadControl=function(n){return this._discussionThreadControlsById[n]},n.prototype.unregisterThreadControl=function(n){var t=n.getThread().id;delete this._discussionThreadControlsById[t];this._currentlySelectedDiscussionId===t&&(this._currentlySelectedDiscussionId=undefined)},n.prototype.handleThreadControlSelected=function(n){var t;n!==this._currentlySelectedDiscussionId&&(t=this._discussionThreadControlsById[this._currentlySelectedDiscussionId],t&&t.setSelectedState(!1),this._currentlySelectedDiscussionId=n)},n.prototype.handleCommentsSaved=function(n){var t=this;$.each(n,function(n,i){t._handleCommentSaved(i)})},n.prototype._handleCommentSaved=function(n){var t,i;t=this.getThreadControl(n.threadId);!t&&n.originalThreadId<0&&(this._currentlySelectedDiscussionId===n.originalThreadId&&(this._currentlySelectedDiscussionId=n.threadId),t=this.getThreadControl(n.originalThreadId),t&&(delete this._discussionThreadControlsById[n.originalThreadId],this._discussionThreadControlsById[n.threadId]=t,t.handleUpdatedThreadId(n.originalThreadId,n.threadId)));t&&(i=t.getCommentControl(n.id),!i&&n.originalId<0&&(t.updateCommentId(n.originalId,n.id),i=t.getCommentControl(n.id)),i&&i.redraw())},n.prototype.handleCommentsUpdated=function(n){var t=this;$.each(n,function(n,i){t._handleCommentUpdated(i)})},n.prototype._handleCommentUpdated=function(n){var t,i;t=this.getThreadControl(n.threadId);t&&(i=t.getCommentControl(n.id),i&&i.redraw())},n.prototype.handleCommentsDeleted=function(n){var t=this;$.each(n,function(n,i){t._handleCommentDeleted(i)})},n.prototype._handleCommentDeleted=function(n){var t=this.getThreadControl(n.threadId);t&&t.removeComment(n.id)},n.prototype.clearDiscussionThreads=function(){$.each(this._discussionThreadControlsById,function(n,t){t.dispose()});this._discussionThreadControlsById={}},n.prototype.selectThreadControl=function(n,t,i){var r=this._discussionThreadControlsById[n||0];return r?(r.setSelectedState(!0,i),t&&r.scrollIntoView(),!0):(this.handleThreadControlSelected(n),!1)},n.prototype.showCreateWorkItemDropdown=function(){return!1},n.prototype.showSelectDiscussionStatusDropdown=function(){return!1},n.prototype.showCommentFeedback=function(n,t){return this._commentFeedbackFeatureEnabled&&!!t.trackingCriteria&&!n.parentId},n.prototype.allowDelete=function(){return!0},n.prototype.beginGetWorkItemTypeNames=function(n){n.call(this,[])},n.prototype.beginGetDiscussionThreads=function(n){var t=this;$.each(this._discussionThreadControlsById,function(i,r){n.call(t,r)})},n.prototype.handleCreateWorkItemMenuClick=function(){},n.prototype.handleCommentFeedbackItemMenuClick=function(n){f.Dialog.show(h.CommentFeedbackDialog,{thread:n})},n}(),y,w,p;t.DiscussionThreadControlManagerBase=b;y=function(){function n(){}return n.prototype.createCommentControl=function(n,t,i){return new p(n,t,i)},n}();t.DiscussionCommentControlFactory=y;w=function(){function n(n,t,i,r,u){var f=this,e;this.init(u);this._discussionThread=n;this._discussionThreadManager=t;this._commentControls={};this._commentControlFactory=r?r:new y;this._discussionThreadManager.registerThreadControl(this);this._$element=$("<div />").addClass("discussion-thread");this._selected=!1;this._expanded=!0;typeof i!="undefined"&&i!==null&&n.position&&(e=$("<div />").addClass("comment-arrow").appendTo(this._$element),i!==0&&e.css("left",i+"px"));this._$commentContainer=$("<div />").addClass("comments-container").appendTo(this._$element);this.drawComments(this._$commentContainer,this._discussionThread.comments||[]);this.handleCommentsRedraw();this._$element.click(function(){f.isSelected()||f.setSelectedState(!0)})}return n.prototype.init=function(){},n.prototype.dispose=function(){this._discussionThreadManager.unregisterThreadControl(this);this._$element&&(this._$element.remove(),this._$element=null)},n.prototype.getElement=function(){return this._$element},n.prototype.appendTo=function(n){this._$element.appendTo(n);this.updateCommentSizes()},n.prototype.updateCommentSizes=function(){$.each(this._commentControls,function(n,t){t.updateCommentHeight()})},n.prototype.getThread=function(){return this._discussionThread},n.prototype.isSelected=function(){return this._selected},n.prototype.setSelectedState=function(n,t){var i=this;n!==this._selected&&(this._$element.toggleClass("selected-thread",n),this._selected=n,n?(this._discussionThreadManager.handleThreadControlSelected(this._discussionThread.id,t),this._$element.trigger("discussion-thread-control-selected")):$.each(this._commentControls,function(n,t){t.setSelectedState(!1)}));n&&$.each(this._discussionThread.comments,function(n,t){var r;if(t.id<1)return r=i._commentControls[t.id],r&&r.focus(!1),!1})},n.prototype.setSelectedCommentControl=function(n){$.each(this._commentControls,function(t,i){i.setSelectedState(n===i)})},n.prototype.isExpanded=function(){return this._expanded},n.prototype.setExpandedState=function(n,t){Object.keys(this._commentControls).length<2?(this._$element.removeClass("expanded"),this._$element.removeClass("collapsed")):(this._$element.toggleClass("expanded",n),this._$element.toggleClass("collapsed",!n));this._expanded=n;t&&this._$element.trigger("discussion-thread-resized")},n.prototype.toggleExpandedState=function(){this.setExpandedState(!this._expanded,!0)},n.prototype.scrollIntoView=function(){l.Positioning.scrollIntoViewVertical(this._$element,l.Positioning.VerticalScrollBehavior.Middle,!1,500)},n.prototype.addNewComment=function(n){$("<div />").addClass("discussion-comment-separator").appendTo(this._$commentContainer);var t=this._commentControls[n.id]=this._createCommentControl(n);t.appendTo(this._$commentContainer);this.setExpandedState(!0,!1);this._$element.trigger("discussion-thread-resized");this.handleCommentsRedraw();t.focus()},n.prototype._createCommentControl=function(n){return this._commentControlFactory.createCommentControl(n,this,this._discussionThreadManager)},n.prototype.updateCommentId=function(n,t){var i;i=this._commentControls[n];i&&(this._commentControls[t]=i,delete this._commentControls[n])},n.prototype.removeComment=function(n){var t,r,i;if(this._commentControls[n])return r=this._commentControls[n].getElement(),i=r.prev(".discussion-comment-separator"),i.length||(i=r.next(".discussion-comment-separator")),i.remove(),this._commentControls[n].dispose(),delete this._commentControls[n],this.setExpandedState(this._expanded,!1),this.handleCommentsRedraw(),Object.keys(this._commentControls).length?(this._discussionThread.comments.length&&(t=this._commentControls[this._discussionThread.comments[0].id],t&&(t.redraw(),t._setIsRootComment(!0))),this._$element.trigger("discussion-thread-resized"),!1):(this.dispose(),!0)},n.prototype.handleUpdatedThreadId=function(){},n.prototype.handleCommentsRedraw=function(){var t,n;$(".is-leaf",this._$element).removeClass("is-leaf");n=this._discussionThread.comments[this._discussionThread.comments.length-1];n&&n.id>0&&(t=this._commentControls[n.id],t&&t.getElement().addClass("is-leaf"))},n.prototype.drawComments=function(n,t){var i=this;$.each(t,function(t,r){t>0&&$("<div />").addClass("discussion-comment-separator").appendTo(n);var u=i._commentControls[r.id]=i._createCommentControl(r);u.appendTo(n)});t.length>1&&this._$element.addClass("expanded")},n.prototype.getCommentControl=function(n){return this._commentControls[n]},n.calculateHorizontalOffset=function(t,i,r){r===void 0&&(r=n.DEFAULT_CHARACTER_WIDTH);var o,u,s,f,e;return o=r/2,t.startLine===t.endLine&&(t.startColumn>1||t.endColumn<=i.length)&&(u=Math.max(1,t.startColumn),s=Math.min(t.endColumn,i.length),f=i.substr(0,u-1),e=i.substr(u-1,s-u),f=f.replace(/\t/g,"    "),e=e.replace(/\t/g,"    "),o=(f.length+e.length/2)*r),Math.round(o)},n.DEFAULT_CHARACTER_WIDTH=7,n}();t.DiscussionThreadControl=w;p=function(){function n(n,t,i){var r=this;this._discussionComment=n;this._discussionThreadControl=t;this._discussionThreadManager=i;this._$element=$("<div />").addClass("discussion-comment");this._$element.bind("mousedown click",function(){r._discussionThreadControl.setSelectedCommentControl(r)});this._setIsRootComment(t.getThread().comments[0].id===n.id);this._commentDetailsExtension=e.getCommentDetailsExtension(this._discussionComment,this._discussionThreadControl.getThread(),this._discussionThreadManager,this._isRootComment);this._selected=!1;this._clickSaveTriggered=!1;this.drawComment()}return n.prototype.dispose=function(){this._$element&&(this._$element.remove(),this._$element=null)},n.prototype.getElement=function(){return this._$element},n.prototype.appendTo=function(n){this._$element.appendTo(n);this.updateCommentHeight()},n.prototype.getComment=function(){return this._discussionComment},n.prototype.focus=function(n){n===void 0&&(n=!0);n&&this._discussionThreadManager.selectThreadControl(this._discussionComment.threadId,!1);this._discussionComment.isActive=n;this._redraw(!0);n&&this._$commentTextArea.focus()},n.prototype.setSelectedState=function(n){n!==this._selected&&(this._$element.toggleClass("selected-comment",n),this._selected=n)},n.prototype._setIsRootComment=function(n){var t=this;n!==this._isRootComment&&(n?(this._$element.addClass("root-comment"),this._isRootComment===!1&&this._$element.removeClass("non-root-comment"),$('<div class="thread-expander" />').click(function(){return t._discussionThreadControl.toggleExpandedState(),!1}).appendTo(this._$element)):(this._$element.addClass("non-root-comment"),this._isRootComment===!0&&(this._$element.removeClass("root-comment"),this._$element.find(".thread-expander").remove())),this._isRootComment=n)},n.prototype.drawIdentityPicture=function(){return this._$picContainer=$("<div />").addClass("picture-column"),this._commentDetailsExtension.getAuthorIcon(this._discussionThreadControl.getThread()).appendTo(this._$picContainer),this._$picContainer},n.prototype.drawCommentArea=function(){var n;return this._discussionComment.newContent||this._discussionComment.newContent===""?(n=this._discussionComment.newContent,this._discussionComment.isDirty=this._discussionComment.newContent!==this._discussionComment.content):n=this._discussionComment.content||"",$("<textarea />").addClass("edit-area").val(n)},n.prototype.drawAuthorDisplayName=function(){return $("<span />").text(this._commentDetailsExtension.getAuthorDisplayName())},n.prototype.drawComment=function(){var n=this,e,f,t,l,a,o,h;this.drawIdentityPicture().appendTo(this.getElement());e=$("<div />").addClass("comment-column").appendTo(this._$element);f=$("<div />").addClass("comment-container").appendTo(e);l=this.drawCommentArea(f);this._$commentTextArea=l.appendTo(f).bind("input keyup",function(t){var i,r,u=t.target.value;n._discussionComment.isEditable&&!n._processingInputChanged&&n._discussionComment.newContent!==u&&(n._processingInputChanged=!0,n._discussionComment.newContent=u,i=n._discussionComment.newContent!==n._discussionComment.content,n._discussionComment.isDirty!==i&&(n._discussionComment.isDirty=i,r=!0),n._discussionThreadManager.updateComment(n._discussionThreadControl.getThread(),n._discussionComment),n._updateCommentHeight()&&(r=!0),n._redraw(r),n._processingInputChanged=!1)}).keydown(function(t){if(t.keyCode!==$.ui.keyCode.ENTER||t.shiftKey)t.keyCode===$.ui.keyCode.ESCAPE&&n._cancel();else return n._save(),n._clickSaveTriggered=!0,!1}).focus(function(){n._processingInputChanged||(n._delayedBlur&&(n._delayedBlur.cancel(),n._delayedBlur=null,n._handleBlur()),n._$saveAction.text(s.SaveActionWithShortcut),n._$cancelAction.text(s.CancelActionWithShortcut),n._$saveAction.closest(".discussion-action").show(),n._isDevCodeReview()||n._$cancelAction.addClass("disabled-link"),n._discussionComment.isActive=!0,n._redraw())}).blur(function(){n._processingInputChanged||n._delayedBlur||n._clickSaveTriggered||(n._delayedBlur=r.delay(n,200,function(){n._delayedBlur=null;n._handleBlur()}));n._clickSaveTriggered=!1});this._discussionComment.isEditable?this._$element.addClass("editable"):this._$commentTextArea.attr("readonly","readonly");this._$commentTextAreaMirror=$("<textarea />").addClass("edit-area mirror").css("height","0px").attr("tabIndex","-1").appendTo(f);t=$("<div />").addClass("discussion-comment-status").appendTo(e);this.shouldHideAutherOnStatusLine()?h="created-date":(a=this.drawAuthorDisplayName(),a.appendTo(t),h="created-date discussion-action");this._$publishedDateText=$("<span />").addClass(h).appendTo(t);this._discussionComment.id>0?(this._$publishedDateText.attr("title",u.localeFormat(this._discussionComment.publishedDate||new Date,"G")),this._$publishedDateText.text(u.ago(this._discussionComment.publishedDate))):this._$publishedDateText.hide();this._$editedCommentText=$("<span />").addClass("edited-date discussion-action").appendTo(t).hide().text(s.EditedComment);this._$saveAction=$("<a />").appendTo(t).addClass("save-action").text(s.SaveAction);this._$saveAction.wrap('<span class="discussion-action edit-mode" />');this._$cancelAction=$("<a />").appendTo(t).addClass("cancel-action").text(s.CancelAction);this._$cancelAction.wrap('<span class="discussion-action edit-mode" />');this._isDevCodeReview()&&this._$saveAction.click(function(){n._save()});this._$cancelAction.click(function(){n._$cancelAction.hasClass("disabled-link")||n._cancel()});$("<a />").appendTo(t).text(s.ReplyAction).click(function(){n._discussionThreadManager.createNewComment(n._discussionThreadControl.getThread(),1,function(t){n._discussionThreadControl.addNewComment(t)})}).wrap('<span class="discussion-action view-mode reply-comment-action" />');this._$pendingAction=$("<span />").addClass("discussion-action").appendTo(t).hide();this._$statusAction=$("<div />").appendTo(t).addClass("status-action");$("<span />").appendTo(this._$statusAction).text(s.DiscussionStatus).addClass("status-text");this._$dropdowmAction=$("<a />").appendTo(this._$statusAction).addClass("dropdown-action");this._statusMenubar=i.BaseControl.createIn(c.MenuBar,this._$dropdowmAction,{items:[]});this._statusMenubar.setShowIcon(!1);this._$statusAction.hide();this.showThreadStatus()&&this._discussionComment.id>0&&this._$statusAction.show();this._actionsToolbar=i.BaseControl.createIn(c.MenuBar,this._$element,{cssClass:"comment-actions",items:[]});o=this.appendAdditionalStatus();o&&o.appendTo(this.getElement());this._setStatusAction();this._setActionMenuItems();this._redraw()},n.prototype.appendAdditionalStatus=function(){return null},n.prototype.shouldHideAutherOnStatusLine=function(){return!1},n.prototype.showThreadStatus=function(){return this._discussionThreadControl.getThread().itemPath?this._discussionThreadManager.showSelectDiscussionStatusDropdown()&&this._discussionThreadControl.getThread().comments[0].id===this._discussionComment.id:!1},n.prototype.getInputElement=function(){return this._$commentTextArea},n.prototype._setStatusAction=function(){var n=this,i=[],t;switch(this._discussionThreadManager.getDiscussionStatus(this._discussionThreadControl.getThread())){case o.DiscussionStatus.Fixed:t=s.DiscussionStatusResolved;break;case o.DiscussionStatus.Closed:t=s.DiscussionStatusClosed;break;case o.DiscussionStatus.WontFix:t=s.DiscussionStatusWontfix;break;default:t=s.DiscussionStatusActive}i.push({id:"select-comment-status",title:s.SelectDiscussionStatusTooltip,text:t,cssClass:"discussion-status-menu",childItems:[{id:"pull-request-comment-active",text:s.DiscussionStatusActive,action:function(){n._discussionThreadControl.getThread().status=o.DiscussionStatus.Active;n._discussionThreadManager.updateDiscussion(n._discussionThreadControl.getThread(),o.DiscussionStatus.Active);n.redraw()}},{id:"pull-request-comment-resolved",text:s.DiscussionStatusResolved,action:function(){n._discussionThreadControl.getThread().status=o.DiscussionStatus.Fixed;n._discussionThreadManager.updateDiscussion(n._discussionThreadControl.getThread(),o.DiscussionStatus.Fixed);n.redraw()}},{id:"pull-request-comment-wontfix",text:s.DiscussionStatusWontfix,action:function(){n._discussionThreadControl.getThread().status=o.DiscussionStatus.WontFix;n._discussionThreadManager.updateDiscussion(n._discussionThreadControl.getThread(),o.DiscussionStatus.WontFix);n.redraw()}},{id:"pull-request-comment-closed",text:s.DiscussionStatusClosed,action:function(){n._discussionThreadControl.getThread().status=o.DiscussionStatus.Closed;n._discussionThreadManager.updateDiscussion(n._discussionThreadControl.getThread(),o.DiscussionStatus.Closed);n.redraw()}}]});this._statusMenubar.updateItems(i)},n.prototype._setActionMenuItems=function(){var n=this,t=[];this._discussionThreadManager.showCreateWorkItemDropdown()&&(this._discussionComment.id>0||this._saveTriggered)&&t.push({id:"create-work-item",title:s.CreateWorkItemTooltip,showText:!1,cssClass:"discussion-create-work-item-menu",icon:"comment-work-item-action",childItems:function(t,i){n._discussionThreadManager.beginGetWorkItemTypeNames(function(t){var r=[];r.push({separator:!0,text:s.CreateWorkItemMenuHeader});$.each(t,function(t,i){r.push({text:i,noIcon:!0,action:function(){n._discussionThreadManager.handleCreateWorkItemMenuClick(i,n._discussionThreadControl.getThread(),n._discussionComment,function(){})}})});i.call(n,r)})}});this._discussionThreadManager.showCommentFeedback(this._discussionComment,this._discussionThreadControl.getThread())&&t.push({id:"comment-feedback",title:s.CommentFeedbackActionTooltip,showText:!1,showIcon:!0,useBowtieStyle:!0,cssClass:"discussion-comment-feedback",icon:"bowtie-icon bowtie-feedback-negative-outline",action:function(){n._cancel();n._discussionThreadManager.handleCommentFeedbackItemMenuClick(n._discussionThreadControl.getThread())}});this._discussionThreadManager.allowDelete(this._discussionComment,this._discussionThreadControl.getThread())&&(this._discussionComment.canDelete||this._discussionComment.isEditable)&&t.push({id:"delete-comment",title:s.DeleteActionTooltip,showText:!1,icon:"delete-comment-action",action:function(){n._discussionComment.id<1?n._cancel():confirm(s.DeleteCommentConfirmation)&&(n._discussionComment.pendingAction=s.DeletePending,n._redraw(!0),n._discussionThreadManager.deleteComment(n._discussionThreadControl.getThread(),n._discussionComment.id))}});this._actionsToolbar.updateItems(t)},n.prototype._cancel=function(){$.extend(this._discussionComment,{isDirty:!1,newContent:null,isActive:!1});this._$commentTextArea.val(this._discussionComment.content||"");this._redraw();this._discussionThreadManager.updateComment(this._discussionThreadControl.getThread(),this._discussionComment)},n.prototype._save=function(){if($.trim(this._discussionComment.newContent)){var n=this._discussionComment.id,t=this._discussionComment.threadId;$.extend(this._discussionComment,{isDirty:!1,pendingAction:s.SavePending});this._redraw();this._saveTriggered=!0;this.showThreadStatus()&&(this._$statusAction.show(),this._setStatusAction());this._setActionMenuItems();this._discussionThreadManager.saveComment(this._discussionThreadControl.getThread(),this._discussionComment)}},n.prototype._handleBlur=function(){this._$saveAction.text(s.SaveAction);this._$cancelAction.text(s.CancelAction);this._discussionThreadManager.updateComment(this._discussionThreadControl.getThread(),this._discussionComment);this._discussionComment.isActive=!1;this._redraw();this._isDevCodeReview()||($.trim(this._discussionComment.newContent)?this._save():this._$saveAction.closest(".discussion-action").hide());this._$cancelAction.removeClass("disabled-link")},n.prototype._isDevCodeReview=function(){return document.cookie.indexOf("tfs-devcodereview")>-1},n.prototype.redraw=function(){this._$commentTextArea.val(this._discussionComment.content);this._updateCommentHeight();this._updateIdentityPicture();this._redraw(!0);this._discussionThreadControl.handleCommentsRedraw();this.showThreadStatus()&&this._$statusAction.show();this._setStatusAction();this._setActionMenuItems()},n.prototype.updateCommentHeight=function(){this._updateCommentHeight()},n.prototype._updateCommentHeight=function(){var i=this._$commentTextArea.outerHeight(),n,t;return this._discussionComment.newContent||this._discussionComment.newContent===""?this._$commentTextAreaMirror.val(this._discussionComment.newContent||" "):this._$commentTextAreaMirror.val(this._discussionComment.content||" "),n=this._$commentTextAreaMirror[0].scrollHeight+this._$commentTextAreaMirror.outerHeight(),t=21,n=Math.max(t,n),i===n?!1:(this._$commentTextArea.height(n),!0)},n.prototype._updateIdentityPicture=function(){this._$picContainer.empty();this._commentDetailsExtension.getAuthorIcon(this._discussionThreadControl.getThread()).appendTo(this._$picContainer)},n.prototype._redraw=function(n){this._$element&&(this._$saveAction.toggleClass("disabled-link",!$.trim(this._discussionComment.newContent)),this._discussionComment.id>0&&(this._$publishedDateText.show(),this._$publishedDateText.text(u.ago(this._discussionComment.publishedDate)),this._$publishedDateText.attr("title",u.localeFormat(this._discussionComment.publishedDate,"G"))),this._discussionComment.publishedDate&&this._discussionComment.lastUpdatedDate&&this._discussionComment.publishedDate.getTime()-this._discussionComment.lastUpdatedDate.getTime()!=0?this._$editedCommentText.attr("title",u.localeFormat(this._discussionComment.lastUpdatedDate,"G")).show():this._$editedCommentText.removeAttr("title").hide(),this._discussionComment.pendingAction?(this._$pendingAction.text(this._discussionComment.pendingAction).show(),$(".discussion-action",this._$element).has("a").hide()):(this._$pendingAction.hide().text(""),$(".discussion-action",this._$element).has("a").css("display",""),this._$element.toggleClass("is-dirty",!!this._discussionComment.isDirty)),this._isDevCodeReview()||(this._$saveAction.addClass("disabled-link"),this._$cancelAction.addClass("disabled-link")),n&&this._$element.trigger("discussion-comment-resized"))},n}();t.DiscussionCommentControl=p});
define("Presentation/Scripts/TFS/TFS.Discussion.WebApi",["require","exports","Presentation/Scripts/TFS/Generated/TFS.Discussion.Constants","VSS/WebApi/RestClient"],function(n,t,i,r){var u=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.beginGetDiscussionThreadsByArtifactUri=function(n){return this._beginRequest({area:i.DiscussionWebApiConstants.AreaName,locationId:i.DiscussionWebApiConstants.MultipleThreadsLocationId,data:{artifactUri:n},responseType:i.TypeInfo.DiscussionThread,responseIsCollection:!0})},t.prototype.beginPostNewThread=function(n){return this._beginRequest({area:i.DiscussionWebApiConstants.AreaName,locationId:i.DiscussionWebApiConstants.MultipleThreadsLocationId,httpMethod:"POST",data:n,responseType:i.TypeInfo.DiscussionThread})},t.prototype.beginUpdateDiscussion=function(n){return this._beginRequest({area:i.DiscussionWebApiConstants.AreaName,locationId:i.DiscussionWebApiConstants.ThreadsLocationId,httpMethod:"PATCH",routeValues:{discussionId:n.id},data:n,responseType:i.TypeInfo.DiscussionThread})},t.prototype.beginPostNewComment=function(n){return this._beginRequest({area:i.DiscussionWebApiConstants.AreaName,locationId:i.DiscussionWebApiConstants.CommentsLocationId,httpMethod:"POST",routeValues:{discussionId:n.threadId},data:n,responseType:i.TypeInfo.DiscussionComment})},t.prototype.beginUpdateComment=function(n){return this._beginRequest({area:i.DiscussionWebApiConstants.AreaName,locationId:i.DiscussionWebApiConstants.CommentsLocationId,httpMethod:"PATCH",routeValues:{discussionId:n.threadId,commentId:n.id},data:n,responseType:i.TypeInfo.DiscussionComment})},t.prototype.beginDeleteComment=function(n,t){return this._beginRequest({area:i.DiscussionWebApiConstants.AreaName,locationId:i.DiscussionWebApiConstants.CommentsLocationId,httpMethod:"DELETE",httpResponseType:"html",routeValues:{discussionId:n,commentId:t}})},t.prototype.beginGetDiscussionThreadsBatch=function(n){return this._beginRequest({area:i.DiscussionWebApiConstants.AreaName,locationId:i.DiscussionWebApiConstants.ThreadsBatchLocationId,httpMethod:"POST",data:n,responseType:i.TypeInfo.DiscussionThread,responseIsCollection:!0})},t}(r.VssHttpClient);t.DiscussionHttpClient=u});
define("Presentation/Scripts/TFS/TFS.Discussion.OM",["require","exports","VSS/Utils/String","VSS/Diag","Presentation/Scripts/TFS/TFS.Discussion.Common.UI","Presentation/Scripts/TFS/Generated/TFS.Discussion.Constants","Presentation/Scripts/TFS/TFS.Discussion.WebApi","VSS/Controls/Menus","VSS/VSS","VSS/Service","VSS/Events/Services","VSS/Events/Document"],function(n,t,i,r,u,f,e,o,s,h,c,l){var p=s.queueRequest,a=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeConnection=function(t){n.prototype.initializeConnection.call(this,t);this._httpClient=t.getHttpClient(e.DiscussionHttpClient)},t.prototype._processDiscussionThread=function(n,t){var i=this;n.properties&&($.each(n.properties,function(t,i){var r=t&&t.charAt(0);r&&r!==r.toUpperCase()&&(n.properties[r.toUpperCase()+t.substr(1)]=i)}),this.assignPropertiesToThread(n));$.each(n.comments||[],function(n,t){i._processDiscussionComment(t)});t||(n.comments=$.grep(n.comments||[],function(n){return!n.isDeleted}))},t.prototype._processDiscussionComment=function(n){n.isEditable=i.localeIgnoreCaseComparer(this.getWebContext().user.id,n.author.id)===0},t.prototype.assignPropertiesFromThread=function(n){n.properties||(n.properties={});n.itemPath&&(n.properties[f.DiscussionThreadPropertyNames.ItemPath]={type:"System.String",value:n.itemPath});n.position&&(n.properties[f.DiscussionThreadPropertyNames.StartLine]={type:"System.Int32",value:n.position.startLine},n.properties[f.DiscussionThreadPropertyNames.EndLine]={type:"System.Int32",value:n.position.endLine},n.properties[f.DiscussionThreadPropertyNames.StartColumn]={type:"System.Int32",value:n.position.startColumn},n.properties[f.DiscussionThreadPropertyNames.EndColumn]={type:"System.Int32",value:n.position.endColumn},n.properties[f.DiscussionThreadPropertyNames.PositionContext]={type:"System.String",value:n.position.positionContext})},t.prototype.assignPropertiesToThread=function(n){n.itemPath=n.properties[f.DiscussionThreadPropertyNames.ItemPath]&&n.properties[f.DiscussionThreadPropertyNames.ItemPath].$value;var t={startLine:n.properties[f.DiscussionThreadPropertyNames.StartLine]&&n.properties[f.DiscussionThreadPropertyNames.StartLine].$value,endLine:n.properties[f.DiscussionThreadPropertyNames.EndLine]&&n.properties[f.DiscussionThreadPropertyNames.EndLine].$value,startColumn:n.properties[f.DiscussionThreadPropertyNames.StartColumn]&&n.properties[f.DiscussionThreadPropertyNames.StartColumn].$value,endColumn:n.properties[f.DiscussionThreadPropertyNames.EndColumn]&&n.properties[f.DiscussionThreadPropertyNames.EndColumn].$value,positionContext:n.properties[f.DiscussionThreadPropertyNames.PositionContext]&&n.properties[f.DiscussionThreadPropertyNames.PositionContext].$value};$.isEmptyObject($.extend({},t))||(n.position=t)},t.prototype.beginGetDiscussionThreads=function(n,t,i){var r=this;this._httpClient.beginGetDiscussionThreadsByArtifactUri(n).then(function(n){$.each(n,function(n,t){r._processDiscussionThread(t)});n=$.grep(n,function(n){return!n.workItemId&&n.comments&&n.comments.length?!0:!1});t.call(r,n)},i||s.handleError)},t.prototype.beginPostNewThread=function(n,t,i){var r=this;this.assignPropertiesFromThread(n);this._httpClient.beginPostNewThread(n).then(function(n){r._processDiscussionThread(n);t.call(r,n)},i||s.handleError)},t.prototype.beginUpdateDiscussion=function(n,t,i){var r=this;this._httpClient.beginUpdateDiscussion(n).then(function(n){r._processDiscussionThread(n);t.call(r,n)},i||s.handleError)},t.prototype.beginPostNewComment=function(n,t,i){var r=this;this._httpClient.beginPostNewComment(n).then(function(n){r._processDiscussionComment(n);t.call(r,n)},i||s.handleError)},t.prototype.beginUpdateComment=function(n,t,i){var r=this;this._httpClient.beginUpdateComment(n).then(function(n){r._processDiscussionComment(n);t.call(r,n)},i||s.handleError)},t.prototype.beginDeleteComment=function(n,t,i,r){this._httpClient.beginDeleteComment(n,t).then(i,r||s.handleError)},t}(h.VssService),v,y;t.DiscussionService=a;v=function(){function n(n,t,i,r,u){this._tfsContext=n;this._discussionService=h.getCollectionService(a,this._tfsContext.contextData);this._artifactUri=t;this._viewOptions=i||{};this._saveActive=!1;this._discussionAdapter=r;this.init(u);o.menuManager.attachExecuteCommand(function(n,t){var i,r;switch(t.get_commandName()){case"add-file-discussion":return i=t.get_commandArgument(),r=i.discussionManager,r.createNewDiscussionThread(i.itemPath),!1;case"delete-discussion-comment":return i=t.get_commandArgument(),r=i.discussionManager,r.deleteComment(i.threadId,i.commentId),!1}});l.getRunningDocumentsTable().add("DiscussionManager",this)}return n.prototype.init=function(){},n.prototype.getTfsContext=function(){return this._tfsContext},n.prototype.isDirty=function(){if(this._discussionAdapter)return this._discussionAdapter.isDirty();var t=this.getAllThreads(),n=!1;return t&&$.each(t,function(t,i){return $.each(i.comments||[],function(t,i){if(i.isDirty&&(i.id>0&&i.content!==i.newContent||i.id<1&&i.newContent))return n=!0,!1}),n?!1:void 0}),n},n.prototype.getArtifactUri=function(){return this._artifactUri},n.prototype.getDiscussionService=function(){return this._discussionService},n.prototype.setDiscussionService=function(n){this._discussionService=n},n.prototype._setArtifactUri=function(n){this._artifactUri=n},n.prototype.beginLoadDiscussionThreads=function(n){var t=this;this._ensureInitialized(function(){$.isFunction(n)&&n.call(t,t.getCurrentThreads())})},n.prototype.getAllThreads=function(){return this._discussionAdapter?this._discussionAdapter.getDiscussionThreads():this._threads||[]},n.prototype.getCurrentThreads=function(){return this._viewOptions.hideComments?[]:this._viewOptions.hideNonActiveComments?this.getAllThreads().filter(function(n){return n.status===f.DiscussionStatus.Active}):this.getAllThreads()},n.prototype.getSelectedThreadId=function(){return this._discussionAdapter?null:this._selectedThreadId},n.prototype.getSelectedThread=function(){if(this._discussionAdapter)return null;var n;return this._selectedThreadId&&this._threads&&(n=this.findThread(this._selectedThreadId)),n},n.prototype.setSelectedThreadId=function(n,t,i){if(!this._discussionAdapter){var r;n!==this._selectedThreadId&&(this._selectedThreadId=n,r=this.getSelectedThread(),r&&this.fireDiscussionThreadsUpdatedEvent({threadSelected:r,state:i,navigateToSelectedThread:t===!0}))}},n.prototype.clearSelectedThreadId=function(){this.setSelectedThreadId(0)},n.prototype.getViewOptions=function(){return $.extend({},this._viewOptions)},n.prototype.getExtraProperties=function(){return null},n.prototype.populateExtraMembers=function(){},n.prototype.setViewOptions=function(n){var i=!1,r=!1,t,u;if(n||(n={}),(this._viewOptions.hideComments===!0!=(n.hideComments===!0)||this._viewOptions.hideNonActiveComments===!0!=(n.hideNonActiveComments===!0))&&(i=!0,r=!0,(n.hideComments===!0||n.hideNonActiveComments===!0)&&this._threads&&this._threads.length>0))for(t=[],$.each(this._threads,function(n,i){if(i.comments&&i.comments.length>0){var r=i.comments[i.comments.length-1];r.id<1&&!r.newContent&&(i.comments.splice(i.comments.length-1,1),i.comments.length===0&&t.push(n))}});t.length>0;)u=t.pop(),this._threads.splice(u,1);this._viewOptions=n;i&&this.fireDiscussionThreadsUpdatedEvent({currentThreads:this.getCurrentThreads(),threadSelected:this.getSelectedThread()});r&&this.fireOptionsUpdatedEvent(n)},n.prototype.toggleHideComments=function(){var n=this.getViewOptions();n.hideComments=!n.hideComments;this.setViewOptions(n)},n.prototype.getCurrentThreadsForItemPath=function(n){return this._filterDiscussionThreads(this.getCurrentThreads(),n)},n.prototype.filterEventData=function(n,t){var i,r,u;return i={currentThreads:this._filterDiscussionThreads(n.currentThreads,t),newThreads:this._filterDiscussionThreads(n.newThreads,t),deletedThreads:this._filterDiscussionThreads(n.deletedThreads,t),savedThreads:this._filterDiscussionThreads(n.savedThreads,t),state:n.state},this._discussionAdapter?(n.newComments&&(i.newComments=n.newComments),n.deletedComments&&(i.deletedComments=n.deletedComments),n.updatedComments&&(i.updatedComments=n.updatedComments),n.savedComments&&(i.savedComments=n.savedComments),i.createdByUser=n.createdByUser):(u=this.getAllThreads(),(n.newComments||n.deletedComments||n.updatedComments||n.savedComments)&&(r={},n.deletedThreads&&$.each(n.deletedThreads,function(n,t){r[t.id]=t}),$.each(u,function(n,t){r[t.id]=t}),n.newComments&&(i.newComments=$.grep(n.newComments,function(n){return r[n.threadId]?!0:!1})),n.deletedComments&&(i.deletedComments=$.grep(n.deletedComments,function(n){return r[n.threadId]?!0:!1})),n.updatedComments&&(i.updatedComments=$.grep(n.updatedComments,function(n){return r[n.threadId]?!0:!1})),n.savedComments&&(i.savedComments=$.grep(n.savedComments,function(n){return r[n.threadId]?!0:!1})))),n.threadSelected&&((!t||n.threadSelected.itemPath!==t)&&(t||n.threadSelected.itemPath)||(i.threadSelected=n.threadSelected,n.navigateToSelectedThread&&(i.navigateToSelectedThread=!0))),i},n.prototype._filterDiscussionThreads=function(n,t){return n?t?$.grep(n,function(n){return n.itemPath===t}):$.grep(n,function(n){return!n.itemPath}):null},n.prototype.createNewDiscussionThread=function(t,i,r){var u=this;this._ensureInitialized(function(){var c=u.getAllThreads(),o=$.grep(c,function(n){return n.id<1&&n.artifactUri===u._artifactUri&&n.itemPath===t&&(!n.position&&!i||n.position&&i&&n.position.startLine===i.startLine&&n.position.endLine===i.endLine&&n.position.startColumn===i.startColumn&&n.position.endColumn===i.endColumn&&n.position.positionContext===i.positionContext)})[0],e,s,h;o?u.fireDiscussionThreadsUpdatedEvent({threadSelected:o}):(h=u._discussionAdapter?u._discussionAdapter.newThreadId():n._newDiscussionThreadId--,e={id:h,artifactUri:u._artifactUri,status:f.DiscussionStatus.Active,itemPath:t,position:i,comments:[],supportsMarkdown:!0},e.originalId=e.id,u._discussionAdapter||u._threads.push(e),s=u._createNewComment(e,0),$.isFunction(r)&&r.call(u,e),u._discussionAdapter&&(u.populateExtraMembers(e),u._discussionAdapter.createThread(e)),u.fireDiscussionThreadsUpdatedEvent({newThreads:[e],newComments:[s],createdByUser:!0}))})},n.prototype.createNewComment=function(n,t){var r=this.findThread(n),i=null;return r&&(this._discussionAdapter||(i=this._createNewComment(r,t),this.fireDiscussionThreadsUpdatedEvent({newComments:[i]}))),i},n.prototype._createNewComment=function(t,i){var u=this._discussionAdapter?this._discussionAdapter.newCommentId():n._newCommentId--,r={id:u,parentId:i,threadId:t.id,author:{id:this._tfsContext.currentIdentity.id,displayName:this._tfsContext.currentIdentity.displayName},commentType:f.CommentType.Text,isDirty:!0,isEditable:!0};return r.originalId=r.id,r.originalThreadId=t.id,t.comments||(t.comments=[]),t.comments.push(r),r},n.prototype.findThread=function(n){var t=this.getAllThreads();return $.grep(t,function(t){return t.id===n})[0]||null},n.prototype.findCommentById=function(n,t){var i=this.findThread(n),r=null;return i&&(r=$.grep(i.comments||[],function(n){return n.id===t})[0]),r},n.prototype.findComment=function(n){var t=this.findThread(n.threadId);return t?$.grep(t.comments||[],function(t){return t.id===n.id})[0]:null},n.prototype.updateComment=function(n){var f=this,t=this.findThread(n.threadId),u,i,r;if(this._discussionAdapter){u=$.extend({},n);this._discussionAdapter.saveComment(t,u);return}i=!1;!n.isDirty&&n.id<1&&!n.pendingAction?(n.isCancelled=!0,t&&t.comments&&(t.comments.splice($.inArray(n,t.comments),1),t.comments.length===0&&(i=!0,$.each(this._threads,function(t,i){if(i.id===n.threadId)return f._threads.splice(t,1),!1}))),r={deletedComments:[n]},i&&(r.deletedThreads=[t]),this.fireDiscussionThreadsUpdatedEvent(r)):this.fireDiscussionThreadsUpdatedEvent({updatedComments:[n]})},n.prototype.saveComment=function(n,t){var f=this,h,c,u,i,e,o;if(this._discussionAdapter){h=$.extend({},n);c=this.findThread(n.threadId);this._discussionAdapter.saveComment(c,h);return}this._saveActive||(this._saveActive=!0,n.newContent=$.trim(n.newContent),u=$.extend({},n),u.newContent&&(u.content=u.newContent),delete u.isDirty,delete u.newContent,this.fireDiscussionThreadsUpdatedEvent({updatedComments:[n]}),o=function(n){f._saveActive=!1;s.handleError(n)},e=function(i,r,u){r===void 0&&(r=null);u===void 0&&(u=null);var e;$.extend(n,i);n.isDirty=!1;delete n.pendingAction;delete n.newContent;$.isFunction(t)&&t(i);e={updatedComments:[n],savedComments:[n]};r&&(e.savedThreads=[r],r.itemPath&&f.fireDiscussionThreadStatusUpdatedEvent(e));u&&(e.threadSelected=u);f._saveActive=!1;f.fireDiscussionThreadsUpdatedEvent(e)},n.id<1?n.threadId<1?(i=this.findThread(n.threadId),i.comments=[u],i.properties=this.getExtraProperties(i),this.populateExtraMembers(i),this._discussionService.beginPostNewThread(i,function(t){var r=t.comments[0];$.extend(i,t);i.comments[0]=n;f._selectedThreadId===n.threadId?(f._selectedThreadId=t.id,e(r,i,i)):e(r,i)},o)):this._discussionService.beginPostNewComment(u,e,o):n.newContent===n.content?e(n):this._discussionService.beginUpdateComment(u,e,o))},n.prototype.deleteComment=function(n,t,i){var r=this;if(this._discussionAdapter){this._discussionAdapter.deleteComment(n,t);return}this._discussionService.beginDeleteComment(n,t,function(){var u=r.findThread(n),o=!1,f,e;u&&($.each(u.comments||[],function(n,i){if(i.id===t)return f=i,u.comments.splice(n,1),!1}),u.comments.length===0&&(o=!0,$.each(r._threads,function(t,i){if(i.id===n)return r._threads.splice(t,1),!1})));$.isFunction(i)&&i();f||(f={threadId:n,id:t});e={deletedComments:[f]};o&&(e.deletedThreads=[u],u.itemPath&&r.fireDiscussionThreadStatusUpdatedEvent(e));r.fireDiscussionThreadsUpdatedEvent(e)})},n.prototype.updateDiscussionStatus=function(n,t){var r=this,i;this._discussionAdapter||(i=this.findThread(n),i&&(i.status=t),this._discussionService.beginUpdateDiscussion(i,function(n){var t;t={updateThreads:[n]};r.fireDiscussionThreadsUpdatedEvent(t);n.itemPath&&r.fireDiscussionThreadStatusUpdatedEvent(t)}))},n.prototype.getDiscussionStatus=function(n){var t=this.findThread(n);return t?t.status:f.DiscussionStatus.Active},n.prototype._ensureInitialized=function(n){var t=this;if(this._discussionAdapter){n();return}p(this,this,"_initialized"+this._artifactUri,n,null,function(n){t._discussionService.beginGetDiscussionThreads(t._artifactUri,function(i){t._setThreadsFromServer(i);i&&i.length&&t.fireDiscussionThreadsUpdatedEvent({currentThreads:t.getCurrentThreads(),threadSelected:t.getSelectedThread()});n(!0)})})},n.prototype._setThreadsFromServer=function(n){this._threads=n},n.prototype.refresh=function(n){this["_initialized"+this.getArtifactUri()]=null;this.beginLoadDiscussionThreads(n)},n.prototype.addDiscussionThreadsUpdatedListener=function(t){c.getService().attachEvent(n.EVENT_NAME_THREADS_UPDATED,t)},n.prototype.removeDiscussionThreadsUpdatedListener=function(t){c.getService().detachEvent(n.EVENT_NAME_THREADS_UPDATED,t)},n.prototype.fireDiscussionThreadsUpdatedEvent=function(t){c.getService().fire(n.EVENT_NAME_THREADS_UPDATED,this,t)},n.prototype.addDiscussionThreadStatusUpdatedListener=function(t){c.getService().attachEvent(n.EVENT_NAME_THREAD_STATUS_UPDATED,t)},n.prototype.removeDiscussionThreadStatusUpdatedListener=function(t){c.getService().detachEvent(n.EVENT_NAME_THREAD_STATUS_UPDATED,t)},n.prototype.fireDiscussionThreadStatusUpdatedEvent=function(t){c.getService().fire(n.EVENT_NAME_THREAD_STATUS_UPDATED,this,t)},n.prototype.addOptionsUpdatedListener=function(t){c.getService().attachEvent(n.EVENT_NAME_OPTIONS_UPDATED,t)},n.prototype.removeOptionsUpdatedListener=function(t){c.getService().detachEvent(n.EVENT_NAME_OPTIONS_UPDATED,t)},n.prototype.fireOptionsUpdatedEvent=function(t){c.getService().fire(n.EVENT_NAME_OPTIONS_UPDATED,this,t)},n.prototype.supportsWorkItemIntegration=function(){return!1},n.prototype.beginGetWorkItemManager=function(n){n.call(this,null)},n.EVENT_NAME_THREADS_UPDATED="threads-updated",n.EVENT_NAME_THREAD_STATUS_UPDATED="thread-status-updated",n.EVENT_NAME_OPTIONS_UPDATED="discussion-options-updated",n._newDiscussionThreadId=-1,n._newCommentId=-1,n}();t.DiscussionManager=v;y=function(n){function t(t){var i=this;n.call(this);this._supportCommentStatus=!1;this._tfsContext=t;this._discussionEventHandler=function(n,t){i.onDiscussionUpdateEvent(n,t)}}return __extends(t,n),t.prototype.dispose=function(){this._discussionManager&&(this._discussionManager.removeDiscussionThreadsUpdatedListener(this._discussionEventHandler),this._discussionManager=null)},t.prototype.getIdentityImageUrl=function(n){return this._tfsContext.getIdentityImageUrl(n)},t.prototype.createNewComment=function(n,t,i){var r;this._discussionManager&&(r=this._discussionManager.createNewComment(n.id,t),$.isFunction(i)&&i.call(this,r))},t.prototype.updateComment=function(n,t,i){this._discussionManager&&(this._discussionManager.updateComment(t),i&&i.call(this,t))},t.prototype.saveComment=function(n,t){this._discussionManager&&this._discussionManager.saveComment(t)},t.prototype.deleteComment=function(n,t){this._discussionManager&&this._discussionManager.deleteComment(n.id,t)},t.prototype.updateDiscussion=function(n,t){this._discussionManager&&this._discussionManager.updateDiscussionStatus(n.id,t)},t.prototype.getDiscussionStatus=function(n){return this._discussionManager?this._discussionManager.getDiscussionStatus(n.id):f.DiscussionStatus.Active},t.prototype.handleThreadControlSelected=function(t,i){n.prototype.handleThreadControlSelected.call(this,t);this._discussionManager&&this._discussionManager.setSelectedThreadId(t,i)},t.prototype.setDiscussionManager=function(n){n!==this._discussionManager&&(this._discussionManager&&this._discussionManager.removeDiscussionThreadsUpdatedListener(this._discussionEventHandler),this._discussionManager=n,n&&n.addDiscussionThreadsUpdatedListener(this._discussionEventHandler))},t.prototype.onDiscussionUpdateEvent=function(n,t){var i=this;t.savedComments&&this.handleCommentsSaved(t.savedComments);t.updateThreads&&$.each(t.updateThreads,function(n,t){i.handleCommentsUpdated(t.comments)});t.deletedComments&&this.handleCommentsDeleted(t.deletedComments)},t.prototype.showSelectDiscussionStatusDropdown=function(){return this._supportCommentStatus},t.prototype.setSupportCommentStatus=function(n){this._supportCommentStatus=n},t.prototype.showCreateWorkItemDropdown=function(){return this._discussionManager?this._discussionManager.supportsWorkItemIntegration():!1},t.prototype.beginGetWorkItemTypeNames=function(t){this.showCreateWorkItemDropdown()?this._discussionManager.beginGetWorkItemManager(function(n){n.beginGetWorkItemTypeNames(t)}):n.prototype.beginGetWorkItemTypeNames.call(this,t)},t.prototype.handleCreateWorkItemMenuClick=function(n,t,i,r){this._discussionManager&&this._discussionManager.beginGetWorkItemManager(function(u){u.beginCreateWorkItem(n,t,i,r)})},t}(u.DiscussionThreadControlManagerBase);t.DiscussionThreadControlManager=y;s.tfsModuleLoaded("TFS.Discussion.OM",t)});
define("VersionControl/Scripts/Generated/TFS.VersionControl.WebAccess.Contracts",["require","exports","TFS/VersionControl/Contracts"],function(n,t,i){"use strict";var r,u,f,e,o,s,h,c,l,a,v;(function(n){n[n.Default=0]="Default";n[n.Off=1]="Off";n[n.OnlyFilesWithComments=2]="OnlyFilesWithComments";n[n.CommentsOnly=3]="CommentsOnly";n[n.ActiveCommentsUnderFiles=4]="ActiveCommentsUnderFiles";n[n.OnlyFilesWithActiveComments=5]="OnlyFilesWithActiveComments"})(t.ChangeExplorerGridCommentsMode||(t.ChangeExplorerGridCommentsMode={}));r=t.ChangeExplorerGridCommentsMode,function(n){n[n.FilesByFolder=0]="FilesByFolder";n[n.FilesOnly=1]="FilesOnly";n[n.FullTree=2]="FullTree"}(t.ChangeExplorerGridDisplayMode||(t.ChangeExplorerGridDisplayMode={}));u=t.ChangeExplorerGridDisplayMode,function(n){n[n.Basic=1]="Basic";n[n.Advanced=2]="Advanced"}(t.CodeReviewCreateMode||(t.CodeReviewCreateMode={}));f=t.CodeReviewCreateMode,function(n){n[n.RequestedByMe=0]="RequestedByMe";n[n.AssignedToMe=1]="AssignedToMe";n[n.AssignedToTeam=2]="AssignedToTeam";n[n.AllPullRequests=3]="AllPullRequests"}(t.CodeReviewLandingPageMode||(t.CodeReviewLandingPageMode={}));e=t.CodeReviewLandingPageMode,function(n){n[n.Flipper=1]="Flipper";n[n.TrueDiff=2]="TrueDiff";n[n.TwoUp=3]="TwoUp"}(t.DiffViewerImageMode||(t.DiffViewerImageMode={}));o=t.DiffViewerImageMode,function(n){n[n.SideBySide=1]="SideBySide";n[n.Inline=2]="Inline"}(t.DiffViewerOrientation||(t.DiffViewerOrientation={}));s=t.DiffViewerOrientation,function(n){n[n.Unchecked=0]="Unchecked";n[n.Checked=1]="Checked"}(t.MergeOptionsDeleteSourceCheckboxMode||(t.MergeOptionsDeleteSourceCheckboxMode={}));h=t.MergeOptionsDeleteSourceCheckboxMode,function(n){n[n.Unchecked=0]="Unchecked";n[n.Checked=1]="Checked"}(t.MergeOptionsSquashMergeCheckboxMode||(t.MergeOptionsSquashMergeCheckboxMode={}));c=t.MergeOptionsSquashMergeCheckboxMode,function(n){n[n.Expanded=0]="Expanded";n[n.Collapsed=1]="Collapsed"}(t.PullRequestActivityDescriptionExpanded||(t.PullRequestActivityDescriptionExpanded={}));l=t.PullRequestActivityDescriptionExpanded,function(n){n[n.Time_NewFirst=1]="Time_NewFirst";n[n.Time_OldFirst=2]="Time_OldFirst"}(t.PullRequestActivityOrder||(t.PullRequestActivityOrder={}));a=t.PullRequestActivityOrder,function(n){n[n.DiscussionOnly=1]="DiscussionOnly";n[n.DiscussionCodeComments=2]="DiscussionCodeComments";n[n.AllCommentsEvents=3]="AllCommentsEvents"}(t.PullRequestCommentsFilter||(t.PullRequestCommentsFilter={}));v=t.PullRequestCommentsFilter;t.TypeInfo={ChangeExplorerGridCommentsMode:{enumValues:{"default":0,off:1,onlyFilesWithComments:2,commentsOnly:3,activeCommentsUnderFiles:4,onlyFilesWithActiveComments:5}},ChangeExplorerGridDisplayMode:{enumValues:{filesByFolder:0,filesOnly:1,fullTree:2}},CodeReviewCreateMode:{enumValues:{basic:1,advanced:2}},CodeReviewLandingPageMode:{enumValues:{requestedByMe:0,assignedToMe:1,assignedToTeam:2,allPullRequests:3}},DiffViewerImageMode:{enumValues:{flipper:1,trueDiff:2,twoUp:3}},DiffViewerOrientation:{enumValues:{sideBySide:1,inline:2}},MergeOptionsDeleteSourceCheckboxMode:{enumValues:{unchecked:0,checked:1}},MergeOptionsSquashMergeCheckboxMode:{enumValues:{unchecked:0,checked:1}},PullRequestActivityDescriptionExpanded:{enumValues:{expanded:0,collapsed:1}},PullRequestActivityOrder:{enumValues:{time_NewFirst:1,time_OldFirst:2}},PullRequestCommentsFilter:{enumValues:{discussionOnly:1,discussionCodeComments:2,allCommentsEvents:3}},VersionControlAdminViewModel:{},VersionControlUserPreferences:{},VersionControlViewModel:{}};t.TypeInfo.VersionControlAdminViewModel.fields={projectVersionControlInfo:{typeInfo:i.TypeInfo.VersionControlProjectInfo}};t.TypeInfo.VersionControlUserPreferences.fields={changeExplorerGridCommentsMode:{enumType:t.TypeInfo.ChangeExplorerGridCommentsMode},changeExplorerGridDisplayMode:{enumType:t.TypeInfo.ChangeExplorerGridDisplayMode},codeReviewCreateMode:{enumType:t.TypeInfo.CodeReviewCreateMode},codeReviewLandingPageMode:{enumType:t.TypeInfo.CodeReviewLandingPageMode},diffViewerImageMode:{enumType:t.TypeInfo.DiffViewerImageMode},diffViewerOrientation:{enumType:t.TypeInfo.DiffViewerOrientation},mergeOptionsDeleteSourceCheckboxMode:{enumType:t.TypeInfo.MergeOptionsDeleteSourceCheckboxMode},mergeOptionsSquashMergeCheckboxMode:{enumType:t.TypeInfo.MergeOptionsSquashMergeCheckboxMode},pullRequestActivityDescriptionExpanded:{enumType:t.TypeInfo.PullRequestActivityDescriptionExpanded},pullRequestActivityOrder:{enumType:t.TypeInfo.PullRequestActivityOrder},pullRequestCommentsFilter:{enumType:t.TypeInfo.PullRequestCommentsFilter},summaryDiffOrientation:{enumType:t.TypeInfo.DiffViewerOrientation}};t.TypeInfo.VersionControlViewModel.fields={activeImportRequest:{typeInfo:i.TypeInfo.GitImportRequest},projectVersionControlInfo:{typeInfo:i.TypeInfo.VersionControlProjectInfo},vcUserPreferences:{typeInfo:t.TypeInfo.VersionControlUserPreferences}}});
define("VersionControl/Scripts/CommentParser",["require","exports","VSS/Utils/String","VersionControl/Scripts/Resources/TFS.Resources.VersionControl"],function(n,t,i,r){var u=function(){function n(){}return n.getUpToThreeLines=function(t){var i=t.match(n.upToThreeLines);return i[0]},n.getShortComment=function(t,i,r){var u=n._getNextLine(t,i||n.DefaultMaxLineWidth,r);return r&&u.remaining?u.text+"...":u.text},n.parseComment=function(t,i,r,u){var f;u===void 0&&(u=n.DefaultMaxLineWidth);var o="",e,h=t,s=!1;for(f=0;f<i&&t;f++)t=n._getNextLine(t,u,!0).remaining;for(f=0;f<r&&t;f++)e=n._getNextLine(t,u,!0),f>0&&(o+="\r\n"),o+=e.text,t=e.remaining,s=e.isTextTruncatedBeforeNewline;return{text:o,remaining:t,isTextTruncatedBeforeNewline:s}},n.getChangeListDescription=function(t,u,f){var e="";return u&&t.comment&&(e=n.getShortComment(t.comment,f)),e||(t.shelvesetName?e=i.format(r.ShelvesetDetailsTitle,t.shelvesetName):t.commitId?e=i.format(r.CommitDetailsTitle,t.commitId.short):t.changesetId&&(e=i.format(r.ChangesetDetailsTitle,t.changesetId))),e},n._getNextLine=function(t,i,r){var h="",c="",u=0,f=0,e,o,l=!1,a=!1,s,v;if(t=$.trim(t||""),t){for(e=t.length;u<i&&u<e;)if(o=t[u],n.newLinePattern.test(o))break;else/\s/.test(o)&&(f=u),u++;u<e&&u===i&&f>0&&(u=f+1,a=!0);h=t.substr(0,u);s=t.substr(u);r&&(c=s);a&&(v=new RegExp("\\S+"+n.newLinePattern.source+"*","m"),l=v.test(s))}return{text:h,remaining:c,isTextTruncatedBeforeNewline:l}},n.DefaultMaxLineWidth=80,n.newLinePattern=/[\r\n\u2028\u2029]/,n.upToThreeLines=new RegExp(".*("+n.newLinePattern.source+"+.*("+n.newLinePattern.source+".*("+n.newLinePattern.source+")?)?)?","m"),n}();t.Parser=u});
define("VersionControl/Scripts/ChangesetArtifact",["require","exports","VSS/Utils/String","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Artifacts/Constants","VSS/Artifacts/Services","VersionControl/Scripts/Resources/TFS.Resources.VersionControl","VersionControl/Scripts/VersionControlUrls"],function(n,t,i,r,u,f,e,o){var s=function(n){function t(t){t.changeset&&$.extend(t,{tool:u.ToolNames.VersionControl,type:u.ArtifactTypeNames.Changeset,id:t.changeset.toString()});n.call(this,t)}return __extends(t,n),t.prototype.getTitle=function(){return i.format(e.ChangesetLinkTextSimple,this.getId())},t.prototype.getUrl=function(n){return o.getChangesetUrl(this.getId(),new r.TfsContext(n))},t}(f.Artifact);t.ChangesetArtifact=s});
define("VersionControl/Scripts/ChangeListType",["require","exports"],function(n,t){(function(n){n[n.Unknown=0]="Unknown";n[n.Changeset=1]="Changeset";n[n.Shelveset=2]="Shelveset";n[n.Commit=3]="Commit"})(t.ChangeListType||(t.ChangeListType={}));var i=t.ChangeListType});
define("VersionControl/Scripts/CommitArtifact",["require","exports","VSS/Utils/String","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Artifacts/Constants","VSS/Artifacts/Services","VersionControl/Scripts/Resources/TFS.Resources.VersionControl","VersionControl/Scripts/VersionControlUrls","VersionControl/Scripts/CommitIdHelper"],function(n,t,i,r,u,f,e,o,s){var h=function(n){function t(t){t.projectGuid&&t.repositoryId&&t.commitId&&$.extend(t,{tool:u.ToolNames.Git,type:u.ArtifactTypeNames.Commit,id:i.format("{0}/{1}/{2}",t.projectGuid,t.repositoryId,t.commitId)});n.call(this,t);t.projectGuid&&t.repositoryId&&t.commitId&&(this.projectGuid=t.projectGuid,this.repositoryId=t.repositoryId,this.commitId=t.commitId)}return __extends(t,n),t.prototype.getTitle=function(){return this._ensureDetails(),i.format(e.CommitLinkText,s.getShortCommitId(this.commitId)+"...")},t.prototype.getUrl=function(n){return this._ensureDetails(),o.getCommitUrlUsingRepoId(this.repositoryId,this.projectGuid,this.commitId,new r.TfsContext(n))},t.prototype._ensureDetails=function(){var n;this.commitId&&this.repositoryId||(n=decodeURIComponent(this._data.id).split("/"),this.projectGuid=n[0],this.repositoryId=n[1],this.commitId=n[2])},t}(f.Artifact);t.CommitArtifact=h});
define("VersionControl/Scripts/GitRefArtifact",["require","exports","VSS/Utils/String","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Artifacts/Constants","VSS/Artifacts/Services","VSS/Diag","VersionControl/Scripts/VersionControlUrls"],function(n,t,i,r,u,f,e,o){var s=function(n){function t(r){r.projectGuid&&r.repositoryId&&r.refName&&$.extend(r,{tool:u.ToolNames.Git,type:u.ArtifactTypeNames.Ref,id:i.format(t.ToolSpecificRefIdFormat,r.projectGuid,r.repositoryId,r.refName)});n.call(this,r);r.projectGuid&&r.repositoryId&&r.refName&&(this.projectGuid=r.projectGuid,this.repositoryId=r.repositoryId,this.refName=r.refName)}return __extends(t,n),t.prototype.getTitle=function(){return this._ensureDetails(),this.refName.substring(2)},t.prototype.getUrl=function(n){this._ensureDetails();var t=new r.TfsContext(n);return o.getRefUrlUsingRepoId(this.repositoryId,this.projectGuid,this.refName,t)},t.prototype._ensureDetails=function(){var n;this.refName&&this.repositoryId||(n=decodeURIComponent(this._data.id).split("/"),this.projectGuid=n[0],this.repositoryId=n[1],n.splice(0,2),this.refName=n.join("/"))},t.ToolSpecificRefIdFormat="{0}/{1}/{2}",t}(f.Artifact);t.GitRefArtifact=s});
define("VersionControl/Scripts/PullRequestArtifact",["require","exports","VSS/Utils/String","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Artifacts/Constants","VSS/Artifacts/Services","VersionControl/Scripts/VersionControlUrls","VersionControl/Scripts/GitRefArtifact","VSS/Diag"],function(n,t,i,r,u,f,e,o,s){var h=function(n){function t(t){t.projectGuid&&t.repositoryId&&t.pullRequestId&&$.extend(t,{tool:u.ToolNames.Git,type:u.ArtifactTypeNames.PullRequestId,id:i.format(o.GitRefArtifact.ToolSpecificRefIdFormat,t.projectGuid,t.repositoryId,t.pullRequestId)});n.call(this,t);t.projectGuid&&t.repositoryId&&t.pullRequestId&&(this.projectGuid=t.projectGuid,this.repositoryId=t.repositoryId,this.pullRequestId=t.pullRequestId)}return __extends(t,n),t.prototype.getTitle=function(){return this._ensureDetails(),this.pullRequestId.toString()},t.prototype.getUrl=function(n){return this._ensureDetails(),e.getPullRequestUrlUsingRepoId(this.repositoryId,this.projectGuid,this.pullRequestId,new r.TfsContext(n))},t.prototype._ensureDetails=function(){var n;this.pullRequestId&&this.repositoryId||(n=decodeURIComponent(this._data.id).split("/"),this.projectGuid=n[0],this.repositoryId=n[1],this.pullRequestId=Number(n[2]))},t.ToolSpecificRefIdFormat="{0}/{1}/{2}",t}(f.Artifact);t.PullRequestArtifact=h});
define("VersionControl/Scripts/TFS.VersionControl",["require","exports","Presentation/Scripts/TFS/TFS.Legacy.Ajax","VSS/Utils/String","VSS/Artifacts/Constants","VSS/Navigation/Services","VSS/VSS","VSS/Artifacts/Services","VSS/Locations","VSS/Common/Contracts/Platform","Presentation/Scripts/TFS/TFS.Host.TfsContext","VersionControl/Scripts/Generated/TFS.VersionControl.Legacy.Contracts","VersionControl/Scripts/Resources/TFS.Resources.VersionControl","VersionControl/Scripts/CommentParser","VersionControl/Scripts/CommitIdHelper","VersionControl/Scripts/ChangesetArtifact","VersionControl/Scripts/ChangeListType","VersionControl/Scripts/CommitArtifact","VersionControl/Scripts/GitRefArtifact","VersionControl/Scripts/PullRequestArtifact"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d){var lt=e.queueRequest,ft,et,ot,st,ht,ct,nt,g,tt,it,rt,ut;(function(n){n[n.None=0]="None";n[n.OneLevel=1]="OneLevel";n[n.Full=120]="Full"})(t.RecursionType||(t.RecursionType={}));ft=t.RecursionType;t.GitObjectType=l.GitObjectType,function(n){n[n.None=0]="None";n[n.Add=1]="Add";n[n.Delete=2]="Delete";n[n.Edit=3]="Edit"}(t.FileDiffBlockChangeType||(t.FileDiffBlockChangeType={}));et=t.FileDiffBlockChangeType,function(n){function t(n){return{allChangesIncluded:n.allChangesIncluded,changeCounts:n.changeCounts,changes:n.changes,comment:n.comment,commentTruncated:!1,creationDate:n.creationDate,owner:n.owner,ownerDisplayName:n.ownerDisplayName,ownerId:n.ownerId,sortDate:n.sortDate,version:n.version}}n.convertChangeList=t}(ot=t.LegacyConverters||(t.LegacyConverters={})),function(n){function t(n){var t=w.ChangeListType.Unknown;return n.commitId?t=w.ChangeListType.Commit:n.changesetId?t=w.ChangeListType.Changeset:n.shelvesetName&&(t=w.ChangeListType.Shelveset),t}n.getChangeListType=t}(st=t.ChangeListTypeHelper||(t.ChangeListTypeHelper={})),function(n){function i(i){var u=t[i],r;return typeof u=="undefined"&&(i?(r=[],n.hasChangeFlag(i,l.VersionControlChangeType.Merge)&&r.push(a.ChangeTypeMerge),n.hasChangeFlag(i,l.VersionControlChangeType.Add)&&r.push(a.ChangeTypeAdd),n.hasChangeFlag(i,l.VersionControlChangeType.Branch)&&r.push(a.ChangeTypeBranch),n.hasChangeFlag(i,l.VersionControlChangeType.Delete)&&r.push(a.ChangeTypeDelete),!n.hasChangeFlag(i,l.VersionControlChangeType.Encoding)||n.hasChangeFlag(i,l.VersionControlChangeType.Branch)||n.hasChangeFlag(i,l.VersionControlChangeType.Add)||r.push(a.ChangeTypeFileType),n.hasChangeFlag(i,l.VersionControlChangeType.Lock)&&r.push(a.ChangeTypeLock),n.hasChangeFlag(i,l.VersionControlChangeType.Rename)&&r.push(a.ChangeTypeRename),n.hasChangeFlag(i,l.VersionControlChangeType.Undelete)&&r.push(a.ChangeTypeUndelete),n.hasChangeFlag(i,l.VersionControlChangeType.Edit)&&!n.hasChangeFlag(i,l.VersionControlChangeType.Add)&&r.push(a.ChangeTypeEdit),n.hasChangeFlag(i,l.VersionControlChangeType.Rollback)&&r.push(a.ChangeTypeRollback),n.hasChangeFlag(i,l.VersionControlChangeType.SourceRename)&&r.push(a.ChangeTypeSourceRename),n.hasChangeFlag(i,l.VersionControlChangeType.Property)&&r.push(a.ChangeTypeProperty),u=r.join(", ")):u=a.ChangeTypeNone,t[i]=u),u}function r(t,i){return n.hasChangeFlag(t,l.VersionControlChangeType.Add)&&i?"+":t===l.VersionControlChangeType.Edit?"":t===l.VersionControlChangeType.Delete?"":t===l.VersionControlChangeType.Merge?a.ChangeTypeMerge:t===l.VersionControlChangeType.Branch?a.ChangeTypeBranch:t===l.VersionControlChangeType.Undelete?a.ChangeTypeUndelete:t===l.VersionControlChangeType.Rollback?a.ChangeTypeRollback:t===l.VersionControlChangeType.Encoding?a.ChangeTypeFileType:n.hasChangeFlag(t,l.VersionControlChangeType.Branch)?n.getDisplayText(t):n.getDisplayText(t)}function u(t){return n.hasChangeFlag(t,l.VersionControlChangeType.Edit)&&!n.hasChangeFlag(t,l.VersionControlChangeType.Add)}function f(t){return n.hasChangeFlag(t,l.VersionControlChangeType.SourceRename)&&n.hasChangeFlag(t,l.VersionControlChangeType.Delete)}function e(n,t){return(n&t)!=0}var t={};n.getDisplayText=i;n.getDecorationText=r;n.isEdit=u;n.isSourceRenameDelete=f;n.hasChangeFlag=e}(ht=t.ChangeType||(t.ChangeType={})),function(n){function t(n){var t=n.name;return t.indexOf("refs/heads/")===0?t=r.format(a.PushBranchRefFormat,t.substring(11)):t.indexOf("refs/tags/")===0&&(t=r.format(a.PushTagRefFormat,t.substring(10))),t}function i(n){var i=t(n);return y.isEmptyObjectId(n.oldObjectId)?r.format(a.PushRefCreatedFormat,i,y.getShortCommitId(n.newObjectId)):y.isEmptyObjectId(n.newObjectId)?r.format(a.PushRefDeletedFormat,i):r.format(a.PushRefUpdateFormat,i,y.getShortCommitId(n.newObjectId))}function u(n){return y.isEmptyObjectId(n.oldObjectId)?r.format(a.PushRefCreatedShortFormat,y.getShortCommitId(n.newObjectId)):y.isEmptyObjectId(n.newObjectId)?a.PushRefDeletedShortFormat:r.format(a.PushRefUpdateShortFormat,y.getShortCommitId(n.newObjectId))}n.getFriendlyRefName=t;n.getRefUpdateDescription=i;n.getRefUpdateDescriptionShortFormat=u}(ct=t.GitRefUpdateNameUtility||(t.GitRefUpdateNameUtility={}));nt=function(){function n(){this._commitCommentsById={}}return n.prototype.beginFetchingCommitComments=function(t,i,r){var f=this;if(i&&i.length!==0){var e=[],u={},o=[];if($.each(i,function(t,i){if(e.length===n.COMMIT_FETCH_BATCH_SIZE)o.push(i);else if(!u.hasOwnProperty(i)){var r=f._commitCommentsById[i];r?u[i]=r:(e.push(i),u[i]="")}}),e.length===0){r(u);return}t.getGitClient().beginGetCommitsById(t.getRepositoryId(),e,function(n){$.each(n,function(n,t){var i=v.Parser.getShortComment(t.comment,null,!0)||"";u[t.commitId]=i;f._commitCommentsById[t.commitId]=i});r.call(f,u);f.beginFetchingCommitComments(t,o,r)})}},n.COMMIT_FETCH_BATCH_SIZE=250,n}();t.GitCommitCommentFetcher=nt;g=function(n){function t(t){n.call(this,t);this._ensureDetails()}return __extends(t,n),t.prototype.getTitle=function(){return(this._ensureDetails(),this.changesetId=="T")?r.format(a.LatestVersionedItemLinkText,this.path):r.format(a.VersionedItemLinkText,this.changesetId,this.path)},t.prototype.getUrl=function(n){this._ensureDetails();var t=s.urlHelper.getMvcUrl({webContext:n,controller:"versionControl",project:this.project,level:h.NavigationContextLevels.Project});return t+f.getHistoryService().getFragmentActionLink("contents",{path:this.path,version:this.changesetId})},t.prototype._ensureDetails=function(){var n;this.path||(n=decodeURIComponent(this._data.id).split("&"),this.path=o.LinkingUtilities.legacyDecodeURIComponent(n[0]),this.path&&this.path.substring(0,2)!=="$/"&&(this.path="$/"+this.path),this.project=this.path.split("/")[1],this.changesetId=n[1].split("=")[1])},t}(o.Artifact);t.VersionedItemArtifact=g;tt=function(n){function t(t){t.projectGuid&&t.pullRequestId&&(t.supportsIterations?$.extend(t,{tool:u.ToolNames.CodeReview,type:u.ArtifactTypeNames.CodeReviewSdkId,id:r.format("{0}/{1}",t.projectGuid,t.codeReviewId)}):$.extend(t,{tool:u.ToolNames.CodeReview,type:u.ArtifactTypeNames.CodeReviewId,id:r.format("{0}/{1}",t.projectGuid,t.pullRequestId)}));n.call(this,t);t.projectGuid&&t.pullRequestId&&(this.projectGuid=t.projectGuid,this.pullRequestId=t.pullRequestId,this.codeReviewId=t.codeReviewId)}return __extends(t,n),t.prototype.getTitle=function(){return this._ensureDetails(),r.format("Code review {0}",this.pullRequestId)},t.prototype.getUrl=function(){return this._ensureDetails(),null},t.prototype._ensureDetails=function(){var n;this.projectGuid&&this.pullRequestId||(n=decodeURIComponent(this._data.id).split("/"),this.projectGuid=n[0],this.pullRequestId=parseInt(n[1],10))},t}(o.Artifact);t.CodeReviewArtifact=tt;it=function(n){function t(t,i){n.call(this,t);this.path=i}return __extends(t,n),t.prototype.getTitle=function(){return r.format(a.LatestVersionedItemLinkText,this.path||this.getId())},t.prototype.getUrl=function(n){var t=s.urlHelper.getMvcUrl({webContext:n,controller:"versionControl"});return t+f.getHistoryService().getFragmentActionLink("contents",{path:this.path})},t}(o.Artifact);rt=function(){function n(){}return n.beginResolve=function(n,t,f,e){function v(){f({success:!0,artifacts:s})}var y=t&&t.tfsContext||c.TfsContext.getDefault(),s=[],h=[],l={},a;$.each(n,function(n,t){r.ignoreCaseComparer(t.type,u.ArtifactTypeNames.Changeset)===0?s[s.length]=new p.ChangesetArtifact(t):r.ignoreCaseComparer(t.type,u.ArtifactTypeNames.VersionedItem)===0?s[s.length]=new g(t):r.ignoreCaseComparer(t.type,u.ArtifactTypeNames.LatestItemVersion)===0?(l[t.id]=t,h[h.length]=t.id):s[s.length]=new o.Artifact(t)});h.length?(a=y.getActionUrl("itemsById","versioncontrol",{area:"api"}),i.getMSJSON(a,{ids:h.join(",")},function(n){$.each(n,function(n,t){s[s.length]=new it(l[t.id],t.serverItem)});v()},e)):v()},n}();t.VersionControlArtifactHandler=rt;ut=function(){function n(){}return n.beginResolve=function(n,t,i){var f=[];$.each(n,function(n,t){r.ignoreCaseComparer(t.type,u.ArtifactTypeNames.Commit)===0?f.push(new b.CommitArtifact(t)):r.ignoreCaseComparer(t.type,u.ArtifactTypeNames.Ref)===0?f.push(new k.GitRefArtifact(t)):r.ignoreCaseComparer(t.type,u.ArtifactTypeNames.PullRequestId)===0?f.push(new d.PullRequestArtifact(t)):f.push(new o.Artifact(t))});i({success:!0,artifacts:f})},n}();t.GitArtifactHandler=ut;e.tfsModuleLoaded("TFS.VersionControl",t)});
define("VersionControl/Scripts/FileSpecUtility",["require","exports","VersionControl/Scripts/Resources/TFS.Resources.VersionControl"],function(n,t,i){function u(){var t,n,i;if(!r){for(r={},n=0;n<=31;n++)r[n]=!0;for(t='"/:<>\\|*?',n=0,i=t.length;n<i;n++)r[t.charCodeAt(n)]=!0}return r}function f(n){for(var i=u(),t=0,r=n.length;t<r;t++)if(i[n.charCodeAt(t)])return!0;return!1}function e(n){if(f(n))return i.FilePathInvalidCharacter;var t=n[n.length-1];return t==="."||t===" "?i.FilePathInvalidEnding:null}var r=null;t.getNonLegalNtfsNameErrorMessage=e});
define("VersionControl/Scripts/VersionControlPath",["require","exports","VSS/Utils/String","VersionControl/Scripts/RepositoryType","VersionControl/Scripts/Resources/TFS.Resources.VersionControl","VersionControl/Scripts/FileSpecUtility"],function(n,t,i,r,u,f){function s(n){var t="",i=(n||"").lastIndexOf(".");return i>=0&&(t=n.substring(i+1)),t}function h(n,t){if(!n)return"";n[n.length-1]==="/"&&(n=n.substr(0,n.length-1));var i=n.lastIndexOf("/");return i>=0?(n=n.substr(0,i),n||(n=t)):n=t,n}function c(n,t){return n.isFolder&&n.serverItem.length>0&&i.startsWith(n.serverItem,t,i.defaultComparer)?n.serverItem.substring(t.length+(t.length>1&&t!=="$/"?1:0)):o(n.serverItem)}function o(n){var t;return n?(t=n.lastIndexOf("/"),t>=0)?n.substring(t+1):n:""}function e(n){var i,t;return n&&(i=n.lastIndexOf("/"),i>=0)?(t=n.substr(0,i),t==="$")?"$/":t===""?"/":t:""}function l(n){var r=[],t,i;if(n)for(t=n,i=e(t);t!==i;)r.push(i),t=i,i=e(t);return r}function a(n){var t;return n&&(t=n.lastIndexOf("/"),t>=0)?n.substr(0,t+1):""}function v(n,t){var i=n||"";return t&&(i[i.length-1]!=="/"&&(i+="/"),i+=t[0]==="/"?t.substr(1):t),i}function y(n,t,i){var e=f.getNonLegalNtfsNameErrorMessage(n);return e||i!==r.RepositoryType.Git||n.toLowerCase()!==".git"||t&&t!=="/"||(e=u.IllegalGitFolder),{isValid:!e,errorMessage:e}}t.getFileExtension=s;t.getContainingFolder=h;t.getFileOrFolderDisplayName=c;t.getFileName=o;t.getFolderName=e;t.getParentPaths=l;t.getDirectory=a;t.combinePaths=v;t.validateFilename=y});
define("VersionControl/Scripts/VersionControlFileIconPicker",["require","exports","VersionControl/Scripts/VersionControlPath"],function(n,t,i){function r(n){var t=i.getFileExtension(n).toLocaleLowerCase();switch(t){case"sln":return"bowtie-file-type-sln";case"htm":case"html":return"bowtie-file-type-html";case"js":return"bowtie-file-type-js";case"jsproj":return"bowtie-file-type-jsproj";case"cs":return"bowtie-file-type-cs";case"csproj":return"bowtie-file-type-csproj";case"vb":return"bowtie-file-type-vb";case"vbproj":return"bowtie-file-type-vbproj";case"c":case"cc":case"h":case"hpp":case"cpp":case"cxx":return"bowtie-file-type-cpp";case"vcxproj":return"bowtie-file-type-vcxproj";case"fs":case"fsx":return"bowtie-file-type-fs";case"fsproj":return"bowtie-file-type-fsproj";case"py":return"bowtie-file-type-python";case"pyproj":return"bowtie-file-type-pyproj";case"ts":case"tsx":return"bowtie-file-type-typescript";case"coffee":case"litcoffee":return"bowtie-file-type-coffeescript";case"aspx":return"bowtie-file-type-aspx";case"css":return"bowtie-file-type-css";case"sass":return"bowtie-file-type-sass";case"less":return"bowtie-file-type-less";case"json":return"bowtie-file-type-json";case"xml":case"config":return"bowtie-file-type-xml";case"md":case"markdown":case"mdown":return"bowtie-file-type-md";case"ps1":case"psm1":return"bowtie-file-type-powershell";case"bat":case"cmd":return"bowtie-file-type-cmd";case"java":return"bowtie-file-type-java";case"sql":return"bowtie-file-type-sql";case"sh":return"bowtie-script";default:return"bowtie-file"}}t.getIconNameForFile=r});
define("VersionControl/Scripts/CustomerIntelligenceConstants",["require","exports"],function(n,t){var i,r;t.VERSION_CONTROL_AREA="VersionControl";t.SHOW_LAZY_DIALOG="ShowLazyDialog";t.CREATE_PAT="CreatePatClick";t.CREATE_ALTERNATE_CREDS="CreateAlternateCredentialsClick";t.CREDENTIAL_HELPER_DOWNLOAD="DownloadCredentialHelperClick";t.GIT_FOR_WINDOWS_DOWNLOAD="DownloadGitForWindowsClick";t.VISUAL_STUDIO_DOWNLOAD="DownloadVisualStudioClick";t.MANAGE_SSH_KEYS_BUTTON="ManageSshKeysButtonClick";t.FILEVIEWER_PREVIEW_ON_FEATURE="FileViewerPreviewOn";t.FILEVIEWER_PREVIEW_OFF_FEATURE="FileViewerPreviewOff";t.FILEVIEWER_EDIT_ON_FEATURE="FileViewerEditOn";t.FILEVIEWER_EDIT_CANCEL_FEATURE="FileViewerEditCancel";t.FILEVIEWER_EDIT_COMMIT_FEATURE="FileViewerEditCommit";t.FILEVIEWER_EDIT_DISCARD_FEATURE="FileViewerEditDiscard";t.FILEVIEWER_EDIT_DIFF_FEATURE="FileViewerEditDiff";t.FILEVIEWER_FILE_ADD_COMMIT_FEATURE="FileViewerFileAddCommit";t.FILEVIEWER_FILE_UPLOAD_COMMIT_FEATURE="FileViewerFileUploadCommit";t.FILEVIEWER_FILE_DELETE_COMMIT_FEATURE="FileViewerFileDeleteCommit";t.FILEVIEWER_FILE_RENAME_COMMIT_FEATURE="FileViewerFileRenameCommit";t.FILEVIEWER_PREVIEW_FILE_FEATURE="FileViewerPreviewFile";t.FILEVIEWER_IS_EDIT_MODE_PROPERTY="IsEditMode";t.FILEVIEWER_COMMIT_MESSAGE_CHANGED_PROPERTY="CommitMessageChanged";t.FILEVIEWER_FILE_EXTENSION_PROPERTY="FileExtension";t.FILEVIEWER_PREVIEW_FILE_DURATION_PROPERTY="TimeInMSec";t.FILEVIEWER_PREVIEW_FILE_SIZE_PROPERTY="ItemSizeInBytes";t.FILEVIEWER_ANNOTATE_CLICK="FileViewAnnotateClick";t.FILEVIEWER_DOWNLOAD_CLICK="FileViewDownloadClick";t.GIT_REPO_CLONE_POPUP_VIEW="GitRepoClonePopupView";t.EMPTY_REPO_OPEN_IN_VS="EmptyRepoOpenInVSClick";t.EMPTY_REPO_INIT_REPO_WITH_README="EmptyRepoInitWithReadMeClick";t.ACTIONSOURCE="ActionSource";t.ACTIONSOURCE_CONTEXT_MENU="ContextMenu";t.ACTIONSOURCE_ROW_ACTION="RowAction";t.ACTIONSOURCE_VIEW_CTA_BUTTON="ViewCallToActionButton";t.ACTIONSOURCE_VIEW_SEARCH_INPUT="ViewSearchInput";t.BRANCHESVIEW_BRANCH_ADDFAVORITE="NewBranchesView.Branch.AddFavorite";t.BRANCHESVIEW_BRANCH_REMOVEFAVORITE="NewBranchesView.Branch.RemoveFavorite";t.BRANCHESVIEW_COMPARE="NewBranchesView.Compare";t.BRANCHESVIEW_SETCOMPARE="NewBranchesView.SetCompare";t.BRANCHESVIEW_DELETE="NewBranchesView.Delete";t.BRANCHESVIEW_EXPLORE="NewBranchesView.Explorer";t.BRANCHESVIEW_FIRSTFILTER="NewBranchesView.FirstFilter";t.BRANCHESVIEW_FOLDER_ADDFAVORITE="NewBranchesView.Folder.AddFavorite";t.BRANCHESVIEW_FOLDER_REMOVEFAVORITE="NewBranchesView.Folder.RemoveFavorite";t.BRANCHESVIEW_HISTORY="NewBranchesView.History";t.BRANCHESVIEW_LOCK="NewBranchesView.Lock";t.BRANCHESVIEW_NEW="NewBranchesView.New";t.BRANCHESVIEW_POLICIES="NewBranchesView.Policies";t.BRANCHESVIEW_PROPERTY_COMPAREISDEFAULT="NewBranchesView.Compare.IsDefault";t.BRANCHESVIEW_NEWPULLREQUEST="NewBranchesView.NewPullRequest";t.BRANCHESVIEW_SECURITY="NewBranchesView.Security";t.BRANCHESVIEW_UNLOCK="NewBranchesView.UnLock";t.BRANCHESVIEW_VIEWPULLREQUEST="NewBranchesView.ViewPullRequest";t.BRANCHESVIEW_VIEWLASTUPDATE="NewBranchesView.ViewLastUpdate";t.GITVERSIONSELECTOR_ITEMSELECTED="GetVersionSelector.ItemSelected";t.GITVERSIONSELECTOR_ITEMSELECTED_ISFILTERED="IsFiltered";t.GITVERSIONSELECTOR_ITEMSELECTED_TOTALCOUNT="TotalCount";t.GITREFSERVICE_GETALLREFS="GitRefService.GetAllRefs";t.GITREFSERVICE_GETMYBRANCHES="GitRefService.GetMyBranches";t.GITREFSERVICE_TIME_FETCHED="RefsFetched";t.GITREFSERVICE_TIME_SORTED="RefsSorted";t.GITREFSERVICE_COUNT="Count";t.GITREFSERVICE_FILTER="Filter";t.EMPTY_VIEW_FEATURE="Empty.View";t.PULL_REQUEST_CREATE_SOURCEUI_PROPERTY="SourceUI";t.PULL_REQUEST_CREATE_SOURCEUI_SUGGESTION="Suggestion";t.PULL_REQUEST_DISMISS_SUGGESTION="DismissSuggestion";t.PULL_REQUEST_CREATE_SOURCEUI_TOOLBAR="Toolbar";t.PULL_REQUEST_CREATE_SOURCEVIEW_PROPERTY="SourceView";t.PULL_REQUEST_COMPLETE_MERGE="CompleteMerge";t.PULL_REQUEST_FILTER_DISCUSSION_FEATURE="PullRequestFilterDiscussion";t.PULL_REQUEST_SORT_ACTIVITY_FEATURE="PullRequestSortActivity";t.PULL_REQUEST_FILTER_ACTIVITY_FEATURE="PullRequestFilterActivity";t.PULL_REQUEST_DESCRIPTION_ACTIVITY_FEATURE="PullRequestDescriptionActivity";t.PULL_REQUEST_QUERY_CRITERIA_FEATURE="PullRequestQueryCriteria";t.PULL_REQUEST_CREATE_FEATURE="PullRequest.Create";t.PULL_REQUEST_DETAILS_FEATURE="PullRequest.Details";t.PULL_REQUEST_REVIEW_FEATURE="PullRequest.Review";t.PULL_REQUEST_BRANCH_SELECTION_FEATURE="PullRequest.BranchSelection";t.PULL_REQUEST_VIEW_FEATURE="PullRequest.View";t.PULL_REQUEST_VIEW_LOAD_FILE_FEATURE="PullRequest.View.LoadFile";t.PULL_REQUEST_VIEW_LOAD_DISCUSSIONS_FEATURE="PullRequest.View.LoadDiscussions";t.PULL_REQUEST_VIEW_OVERVIEW_TAB_FEATURE="PullRequest.View.OverviewTabClick";t.PULL_REQUEST_VIEW_FILES_TAB_FEATURE="PullRequest.View.FilesTabClick";t.PULL_REQUEST_VIEW_COMMITS_TAB_FEATURE="PullRequest.View.CommitsTabClick";t.PULL_REQUEST_VIEW_CONTRIBUTED_TAB_FEATURE="PullRequest.View.ContributedTabClick";t.PULL_REQUEST_OPEN_IN_CLIENT="PullRequestOpenInClient";t.PULL_REQUEST_LEARN_MORE_CLICKED="PullRequestLearnMoreClicked";t.PULL_REQUEST_VOTE_BUTTON_ACTION="PullRequestVoteButtonAction";t.PULL_REQUEST_ACTION_DROP_MENU_ACTION="PullRequestActionDropMenuAction";t.CHANGELIST_DETAILS_FEATURE="ChangeList.Details";t.CHANGELIST_DETAILS_VIEW_HISTORY_TAB_FEATURE="ChangeList.Details.HistoryTab";t.CHANGELIST_DETAILS_VIEW_COMPARE_TAB_FEATURE="ChangeList.Details.CompareTab";t.CHANGELIST_DETAILS_VIEW_CONTENTS_TAB_FEATURE="ChangeList.Details.ContentsTab";t.CHANGELIST_DETAILS_VIEW_CHANGES_SUMMARY_TAB_FEATURE="ChangeList.Details.ChangesSummaryTab";t.CHANGELIST_DETAILS_VIEW_COMMIT_DIFF_SUMMARY_TAB_FEATURE="ChangeList.Details.CommitDiffSummaryTab";t.CHANGELIST_DETAILS_DIFF_CHANGED="ChangeList.Details.DiffChanged";t.STATS_BADGE="StatsBadge";t.STATS_BADGE_CLICK="StatsBadgeClick";t.STATS_BADGE_NAME_PROPERTY="BadgeName",function(n){n[n.Share=1]="Share";n[n.Abandon=2]="Abandon";n[n.SaveComments=3]="SaveComments";n[n.CherryPick=4]="CherryPick";n[n.Legacy=5]="Legacy";n[n.Revert=6]="Revert"}(t.PullRequestActionMenuOption||(t.PullRequestActionMenuOption={}));i=t.PullRequestActionMenuOption,function(n){n[n.defaultButton=0]="defaultButton";n[n.dropdown=1]="dropdown"}(t.PullRequestVoteActionSource||(t.PullRequestVoteActionSource={}));r=t.PullRequestVoteActionSource;t.CREATE_BRANCH_MENU_EXECUTED="CreateBranchMenuExecuted";t.CREATE_BRANCH_MENU_CREATED="CreateBranchMenuCreated";t.CREATE_BRANCH_WIT_LINK_FAILED="CreateBranchWITLinkFailed";t.CREATE_REPOSITORY_DIALOG_CREATE_REPOSITORY="CreateRepositoryDialog.CreateRepository";t.ADMIN_NEW_REPO_CLICK="AdminNewRepoClick";t.ADMIN_NEW_GIT_REPO="AdminNewGitRepo";t.ADMIN_NEW_TFVC_REPO="AdminNewTfvcRepo";t.VIEW_PR_FROM_ARTIFACT_ACTION="ViewPRFromArtifactAction";t.CREATE_PR_FROM_ARTIFACT_ACTION="CreatePRFromArtifactAction";t.VIEW_PR_FROM_ARTIFACT="ViewPRFromArtifact";t.VIEW_BRANCH_FROM_ARTIFACT="ViewBranchFromArtifact";t.VIEW_COMMIT_FROM_ARTIFACT="ViewCommitFromArtifact";t.RELATED_WORK_ITEMS_DELETE="RelatedWorkItemsControlDelete";t.RELATED_WORK_ITEMS_ADD="RelatedWorkItemsControlAdd";t.VIEW_BRANCH_FROM_COMMIT="ViewBranchFromCommitDetails";t.VIEW_PR_FROM_COMMIT="ViewPRFromCommitDetails";t.REPOSITORYSELECTOR_NEW_REPO_CLICK="RepositorySelectorNewRepoClick";t.CHANGELISTSUMMARYHEADER_DIFF_PULLUP_OPENED="ChangeListSummaryHeaderDiffPopUpOpened";t.SOURCEEDITING_ADD_FILES="SourceEditingAddFiles";t.SOURCEEDITING_EDIT="SourceEditingEdit";t.SOURCEEDITING_RENAME="SourceEditingRename";t.SOURCEEDITING_DELETE="SourceEditingDelete";t.SOURCEEDITING_UPLOAD_LIMIT="SourceEditingUploadLimit";t.SOURCEEXPLORERTREE_SHOW_MY_FAVS="SourceExplorerTreeShowMyFavorites";t.SOURCEEXPLORERTREE_SHOW_TEAM_FAVS="SourceExplorerTreeShowTeamFavorites";t.SOURCEEXPLORERTREE_CLICK_MY_FAVS="SourceExplorerTreeClickMyFavorites";t.SOURCEEXPLORERTREE_CLICK_TEAM_FAVS="SourceExplorerTreeClickTeamFavorites";t.SOURCEEXPLORERTREE_ADD_TO_MY_FAVS="SourceExplorerTreeAddToMyFavorites";t.SOURCEEXPLORERTREE_REMOVE_FROM_MY_FAVS="SourceExplorerTreeRemoveFromMyFavorites";t.SOURCEEXPLORERTREE_ADD_TO_TEAM_FAVS="SourceExplorerTreeAddToTeamFavorites";t.SOURCEEXPLORERTREE_REMOVE_FROM_TEAM_FAVS="SourceExplorerTreeRemoveFromTeamFavorites";t.SOURCEEXPLORERTREE_DOWNNLOAD_AS_ZIP="SourceExplorerTreeDownloadAsZip";t.SOURCEEXPLORERTREE_DOWNNLOAD="SourceExplorerTreeDownload";t.SOURCEEXPLORERTREE_VIEW_CONTENT="SourceExplorerTreeViewContent";t.SOURCEEXPLORERTREE_VIEW_HISTORY="SourceExplorerTreeViewHistory";t.SOURCEEXPLORERGRID_DOWNNLOAD_AS_ZIP="SourceExplorerGridDownloadAsZip";t.SOURCEEXPLORERGRID_DOWNNLOAD="SourceExplorerGridDownload";t.SOURCEEXPLORERGRID_VIEW_CONTENT="SourceExplorerGridViewContent";t.SOURCEEXPLORERGRID_VIEW_HISTORY="SourceExplorerGridViewHistory";t.SOURCEEXPLORER_SECURITY="SourceExplorerSecurity";t.SOURCEEXPLORERVIEW_PATH_EDIT_START="SourceExplorerViewPathEditStart";t.SOURCEEXPLORERVIEW_PATHCONTROL_PATH_CHANGE="SourceExplorerViewPathChange";t.PATHCHANGESOURCE_SOURCE_EXPLORER_TREE="SourceExplorerTree";t.CHANGELISTNAVIGATOR_CHANGEEXPLORER_EMAIL="ChangeListNavigatorChangeExplorerEmail";t.CHANGELISTNAVIGATOR_CHANGEEXPLORER_DISPLAY_MODE_FLAT="ChangeListNavigatorChangeExplorerDisplayModeFlat";t.CHANGELISTNAVIGATOR_CHANGEEXPLORER_DISPLAY_MODE_BY_FOLDER="ChangeListNavigatorChangeExplorerDisplayModeByFolder";t.CHANGELISTNAVIGATOR_CHANGEEXPLORER_DISPLAY_MODE_FULL="ChangeListNavigatorChangeExplorerDisplayModeFull";t.CHANGELISTNAVIGATOR_CHANGEEXPLORER_DOWNLOAD="ChangeListNavigatorChangeExplorerDownload";t.CHANGELISTSUMMARY_FILES_SIDE_BY_SIDE_DIFF="ChangeListSummayFilesSideBySideDiff";t.CHANGELISTSUMMARY_FILES_INLINE_DIFF="ChangeListSummayFilesInlineDiff";t.CHANGELISTSUMMARY_FILES_EXPAND_ALL="ChangeListSummayFilesExpandAll";t.CHANGELISTSUMMARY_FILES_COLLAPSE_ALL="ChangeListSummayFilesCollapseAll";t.DIFFVIEWER_FILES_SIDE_BY_SIDE_DIFF="DiffViewerFilesSideBySideDiff";t.DIFFVIEWER_FILES_INLINE_DIFF="DiffViewerFilesInlineDiff";t.DIFFVIEWER_ANNOTATE="DiffViewerAnnotate";t.DIFFVIEWER_DOWNLOAD="DiffViewerDownload";t.CHERRYPICK="CherryPick";t.REVERT="Revert";t.COMMENT_FILTER="CommentFilter";t.TREE_FILTER="TreeFilter";t.ITERATION_SELECTION="IterationSelect";t.IMPORTDIALOG_OPENED="ImportDialogOpened";t.IMPORTDIALOG_IMPORT_CLICKED="ImportDialogImportClicked";t.IMPORTSTATUS_IMPORT_COMPLETED="ImportStatusImportCompleted";t.IMPORTSTATUS_IMPORT_FAILED="ImportStatusImportFailed";t.IMPORTSTATUS_UNEXPECTED_STATE="ImportStatusUnexpectedStatus";t.IMPORTREQUEST_FAILED="ImportRequestFailed";t.IMPORTREQUEST_FAILED_SERVICE_ENDPOINT_CREATION="ImportRequestFailedServiceEndpointCreation";t.IMPORTREQUEST_FAILED_REPOSITORY_CREATION="ImportRequestFailedRepositoryCreation";t.IMPORTREQUEST_FAILED_VALIDATION="ImportRequestFailedValidation";t.FILES_HISTORYTAB_GIT="Git.Files.HistoryTab";t.HISTORYLIST_SHOWHIDE_RENAME_HISTORY="HistoryListShowHideRenameHistory";t.HISTORYLIST_SHOW_MORE_HISTORY="HistoryListShowMoreHistory";t.CHANGELINK_OPENED="ChangeLinkOpened";t.CHANGELINK_SHOWHIDE_COMPLETE_MESSAGE="ChangeLinkShowHideCompleteMessage";t.NEW_GIT_HISTORY_VIEW="NewGitHistoryView";t.HISTORYLIST_SHOWRENAME_PERF="HistoryList.ShowRenameHistory";t.HISTORYLIST_SHOWMORE_PERF="HistoryList.ShowMoreHistory"});
define("VersionControl/Scripts/Controls/ControlsCommon",["require","exports","VSS/Navigation/Services"],function(n,t,i){function s(n,t,r,u){var e={},o=i.getHistoryService(),f=o.getCurrentState();return f&&(f.ss?e.ss=f.ss:f.cs?e.cs=f.cs:f.commitId&&(e.commitId=f.commitId),f.repository&&(e.repository=f.repository),f.fullScreen&&(e.fullScreen=f.fullScreen)),typeof t!="undefined"&&t!==null&&(e.path=t),typeof r!="undefined"&&r!==null&&(e.version=r),u&&(e=$.extend(e,u)),o.getFragmentActionLink(n,e)}function h(n){return n&&n.navigation?!!n.navigation.project:!1}var r,u,f,e,o;(function(n){function r(n,r){var u=r?i:t;return u.indexOf(n)>=0}function u(t){return t!==n.Compare&&t!==n.Annotate}function f(t){return t.toLowerCase().indexOf(n.DiffParent)===0}n.Contents="contents";n.Compare="compare";n.History="history";n.Summary="summary";n.Updates="updates";n.DiffParent="diffparent";n.Annotate="annotate";n.Readme="readme";n.Preview="preview";var t=[n.Contents,n.History,n.Compare,n.Annotate,n.Preview],i=[n.Contents,n.History,n.Readme];n.explorerSupports=r;n.supportsFolders=u;n.isDiffParentActionId=f})(r=t.VersionControlActionIds||(t.VersionControlActionIds={})),function(n){n.FILE_VIEWER="tfs.source-control.file-viewer";n.DIFF_VIEWER="tfs.source-control.diff-viewer";n.VIEWER_CONFIGURER="tfs.source-control.viewer-configurer"}(u=t.VersionControlExtensionEndPoints||(t.VersionControlExtensionEndPoints={})),function(n){n.GET_FILE_CONTENT="vc-get-content";n.NEXT_DIFFERENCE="vc-next-diff";n.PREVIOUS_DIFFERENCE="vc-prev-diff";n.UPDATE_DIFF_STATUS="vc-update-diff-status";n.GET_EDITOR_CONTENT="vc-get-editor-content";n.RESET_EDITOR_DIFF_CONTENT="vc-reset-editor-diff-content";n.EDITOR_CONTENT_CHANGED="vc-editor-content-changed";n.EDITOR_DIRTY_STATE_CHANGED="vc-editor-dirty-state-changed";n.GET_SCROLL_POSITION="vc-editor-get-scroll-position";n.SCROLL_POSITION_CHANGED="vc-editor-scroll-position-changed";n.GET_SELECTION="vc-editor-get-selection";n.SELECTION_CHANGED="vc-editor-selection-changed";n.REFRESH_LAYOUT="vc-editor-refresh-layout";n.DISCUSSION_THREAD_UPDATED="vc-discussion-thread-updated";n.EDITOR_GOTO_DEFINTION="vc-editor-goto-definition";n.EDITOR_KEY_PRESSED="vc-editor-key-pressed";n.EDITOR_CONTEXT_MENU_ITEM_CLICKED="vc-editor-context-menu-item-clicked";n.EDITOR_ADD_CONTEXT_MENU_ITEM="vc-editor-add-context-menu-item";n.EDITOR_CREATED="vc-editor-created"}(f=t.VersionControlExtensionActionIds||(t.VersionControlExtensionActionIds={})),function(n){n.UPDATE_EDITOR_CONFIG="vc-configurer-update-editor-config"}(e=t.ConfigurerExtensionActionIds||(t.ConfigurerExtensionActionIds={})),function(n){n.CREATE_THREAD="discussion-create-thread";n.CREATE_COMMENT="discussion-create-comment";n.UPDATE_COMMENT="discussion-update-comment";n.SAVE_COMMENT="discussion-save-comment";n.DELETE_COMMENT="discussion-delete-comment";n.SET_SELECTED_THREAD="discussion-thread-selected";n.CREATE_WORK_ITEM="discussion-create-work-item";n.GET_WORK_ITEM_TYPES="discussion-get-work-item-types";n.UPDATE_DISCUSSION="discussion-update-discussion"}(o=t.DiscussionExtensionActionIds||(t.DiscussionExtensionActionIds={}));t.getFragmentAction=s;t.hasProjectContext=h});
define("Presentation/Scripts/TFS/TFS.Discussion.Common",["require","exports","VSS/VSS"],function(n,t,i){function o(n){return n.isDirty&&!!n.newContent&&$.trim(n.newContent).length!==0}var e,r,u,f;(function(n){n.LeftBuffer="LeftBuffer";n.RightBuffer="RightBuffer";n.InLineBuffer="InLineBuffer"})(e=t.PositionContext||(t.PositionContext={}));r=function(){function n(){}return n}();t.DiscussionPosition=r;u=function(){function n(){}return n}();t.DiscussionComment=u;t.commentHasNewContent=o;f=function(){function n(){}return n}();t.DiscussionThread=f;i.tfsModuleLoaded("TFS.Discussion.Common",t)});
define("Mention/Scripts/Resources/TFS.Resources.Mention",["require","exports"],function(require,exports){var e=exports;e.AutocompleteServerError="Error loading suggestions";e.DiscussionMentionWorkItemTip="workitems (#)";e.AutocompleteSuggestionsPlural="Showing {0} suggestions";e.AutocompleteSuggestionsSingular="Showing {0} suggestion";e.AutocompleteNoSuggestions="No suggestions found";e.DiscussionShowMoreRetrievalError="Unable to show more comments";e.AutocompleteLoading="Loading suggestions";e.DiscussionStateTextFormat="({0} of {1})";e.DiscussionMentionPersonTip="people (@)";e.DiscussionUserCommentedTextFormat="commented {0}";e.DiscussionShowMoreLinkText="Show more";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Mention/Scripts/TFS.Mention",["require","exports","q","VSS/Utils/Array"],function(n,t,i,r){function c(n,t){var i=$("<a>").attr("href",n).attr(e.HTML_MENTION_ATTR_NAME,"version:1.0").text(t);return i[0].outerHTML+"&nbsp;"}var e,u,o,s,f,h;(function(n){n.PATTERN_WORD_START_SEPARATOR="\\s|^|\\?|!|-|\\.|,|:|;|'|\"|\\(";n.PATTERN_WORD_END_SEPARATOR="\\s|$|\\?|!|\\.|,|:|;|-|' | \"|\\)";n.PATTERN_WORD_SEPARATOR="\\s#";n.HTML_MENTION_ATTR_NAME="data-vss-mention"})(e=t.Constants||(t.Constants={}));t.createHtmlMention=c,function(n){n[n.Text=0]="Text";n[n.Mention=1]="Mention"}(t.TextPartType||(t.TextPartType={}));u=t.TextPartType;o=function(){function n(n){n===void 0&&(n=f.getDefault());this._parserFactories=[];this._mentionsRenderer=n}return n.getDefault=function(){return n._defaultInstance||(n._defaultInstance=new n),n._defaultInstance},n.prototype.registerParser=function(n){if(this._parsers)throw new Error("Cannot register additional providers after providers have been initialized.");this._parserFactories.push(n)},n.prototype.getMentionsRenderer=function(){return this._mentionsRenderer},n.prototype.parseInput=function(n){var t,i,r;this._parsers||(this._parsers=$.map(this._parserFactories,function(n){return n()}));t=[{Text:n,Type:u.Text}];for(i in this._parsers)r=this._parsers[i],t=$.map(t,function(n){var t=n;return t.Type===u.Mention?n:r.parseMentions(t.Text)});return t},n.prototype.renderParts=function(n,t,i){for(var e,a,s=this,h=$.Deferred(),r=$(),c=0,o=[],l=0;l<t.length;l++)r=r.add("<span>");return e=function(){c++;c===t.length&&(i.parts=o.join(","),h.resolve(r))},a=f.getDefault(),t.forEach(function(n,t){if(n.Type===u.Mention){var i=n;o.push(s._mentionsRenderer.getTelemetryMentionSummary(i));s._mentionsRenderer.renderMention($(r[t]),i).done(function(){e(t)},function(){e(t)})}else o.push("text"),$(r[t]).text(n.Text),e(t)}),r.appendTo(n),h.promise()},n}();t.MentionProcessor=o;s=function(){function n(){}return n.prototype.parseFromText=function(){throw new Error("Not implemented");},n.prototype.getArtifactType=function(){throw new Error("Not implemented");},n.prototype.parseFromUrl=function(){throw new Error("Not implemented");},n.prototype.parseMentions=function(n){for(var t,r=[],e=this.parseFromText(n),i=0,f=0;f<e.length;f++)t=e[f],t.start>i&&r.push({Type:u.Text,Text:n.substring(i,t.start)}),r.push({Type:u.Mention,Text:n.substring(t.start,t.end),ArtifactType:this.getArtifactType(),ArtifactId:t.id}),i=t.end;return n.length>i&&r.push({Type:u.Text,Text:n.substring(i,n.length)}),r},n}();t.ArtifactMentionParser=s;f=function(){function n(){this._rendererFactories=[]}return n.getDefault=function(){return n._defaultInstance||(n._defaultInstance=new n),n._defaultInstance},n.prototype.registerProvider=function(n){if(this._renderers)throw new Error("Cannot register additional providers after providers have been initialized.");this._rendererFactories.push(n)},n.prototype.getRenderer=function(n){return this._renderers||(this._renderers=$.map(this._rendererFactories,function(n){return n()})),r.first(this._renderers,function(t){return n.ArtifactType===t.getArtifactType()})},n.prototype.renderMention=function(n,t){var i=this.getRenderer(t);return i?i.renderMention(t,function(t){var i=$(t);return i.appendTo(n),i}):$.Deferred().reject(new Error("No rendering provider found for artifact type")).promise()},n.prototype.getTelemetryMentionSummary=function(n){var t=this.getRenderer(n);return t?t.getTelemetryMentionSummary(n):null},n}();t.MentionsRenderer=f;h=function(){function n(n,t,i){this._artifactsLoader=n;this._queueWaitMSec=t;this._maxBatchSize=i;this._cache={};this._queue=[];this._keyPoppedFromQueue={}}return n.prototype.getArtifactPromise=function(n){var t,r;return typeof this._cache[n]!="undefined"?t=this._cache[n]:(r=i.defer(),t=r.promise,this._cache[n]=t,this._queue.push({key:n,deferred:r}),this._keyPoppedFromQueue[n]=!1,this._delayProcessQueue(n)),t},n.prototype._delayProcessQueue=function(n){var t=this;setTimeout(function(){return t._processQueue(n)},this._queueWaitMSec)},n.prototype._processQueue=function(n){var t,i,r;if(!this._keyPoppedFromQueue[n])while(this._queue.length>0){for(i=this._maxBatchSize,this._queue.length<=i?(t=this._queue,this._queue=[]):(t=this._queue.slice(0,i),this._queue=this._queue.slice(i)),r=0;r<t.length;r++)this._keyPoppedFromQueue[t[r].key]=!0;this._processBatch(t)}},n.prototype._processBatch=function(n){var i=n.map(function(n){return n.key}),t=this._artifactsLoader(i);n.forEach(function(n){if(t.hasOwnProperty(n.key)){var i=t[n.key];i.then(function(t){n.deferred.resolve(t)},function(){n.deferred.reject.apply(n.deferred,arguments)})}else n.deferred.reject(new Error("Artifact was missing from results of batch load."))})},n}();t.ArtifactsCache=h});
/*!
 * jQuery UI Menu 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/menu/
 */
(function (n) { typeof define == "function" && define.amd ? define("jQueryUI/menu",["jquery", "./core", "./widget", "./position"], n) : n(jQuery) })(function (n) { return n.widget("ui.menu", { version: "1.11.4", defaultElement: "<ul>", delay: 300, options: { icons: { submenu: "ui-icon-carat-1-e" }, items: "> *", menus: "ul", position: { my: "left-1 top", at: "right top" }, role: "menu", blur: null, focus: null, select: null }, _create: function () { this.activeMenu = this.element; this.mouseHandled = !1; this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length).attr({ role: this.options.role, tabIndex: 0 }); this.options.disabled && this.element.addClass("ui-state-disabled").attr("aria-disabled", "true"); this._on({ "mousedown .ui-menu-item": function (n) { n.preventDefault() }, "click .ui-menu-item": function (t) { var i = n(t.target); !this.mouseHandled && i.not(".ui-state-disabled").length && (this.select(t), t.isPropagationStopped() || (this.mouseHandled = !0), i.has(".ui-menu").length ? this.expand(t) : !this.element.is(":focus") && n(this.document[0].activeElement).closest(".ui-menu").length && (this.element.trigger("focus", [!0]), this.active && this.active.parents(".ui-menu").length === 1 && clearTimeout(this.timer))) }, "mouseenter .ui-menu-item": function (t) { if (!this.previousFilter) { var i = n(t.currentTarget); i.siblings(".ui-state-active").removeClass("ui-state-active"); this.focus(t, i) } }, mouseleave: "collapseAll", "mouseleave .ui-menu": "collapseAll", focus: function (n, t) { var i = this.active || this.element.find(this.options.items).eq(0); t || this.focus(n, i) }, blur: function (t) { this._delay(function () { n.contains(this.element[0], this.document[0].activeElement) || this.collapseAll(t) }) }, keydown: "_keydown" }); this.refresh(); this._on(this.document, { click: function (n) { this._closeOnDocumentClick(n) && this.collapseAll(n); this.mouseHandled = !1 } }) }, _destroy: function () { this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(); this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function () { var t = n(this); t.data("ui-menu-submenu-carat") && t.remove() }); this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content") }, _keydown: function (t) { var i, u, r, f, e = !0; switch (t.keyCode) { case n.ui.keyCode.PAGE_UP: this.previousPage(t); break; case n.ui.keyCode.PAGE_DOWN: this.nextPage(t); break; case n.ui.keyCode.HOME: this._move("first", "first", t); break; case n.ui.keyCode.END: this._move("last", "last", t); break; case n.ui.keyCode.UP: this.previous(t); break; case n.ui.keyCode.DOWN: this.next(t); break; case n.ui.keyCode.LEFT: this.collapse(t); break; case n.ui.keyCode.RIGHT: this.active && !this.active.is(".ui-state-disabled") && this.expand(t); break; case n.ui.keyCode.ENTER: case n.ui.keyCode.SPACE: this._activate(t); break; case n.ui.keyCode.ESCAPE: this.collapse(t); break; default: e = !1; u = this.previousFilter || ""; r = String.fromCharCode(t.keyCode); f = !1; clearTimeout(this.filterTimer); r === u ? f = !0 : r = u + r; i = this._filterMenuItems(r); i = f && i.index(this.active.next()) !== -1 ? this.active.nextAll(".ui-menu-item") : i; i.length || (r = String.fromCharCode(t.keyCode), i = this._filterMenuItems(r)); i.length ? (this.focus(t, i), this.previousFilter = r, this.filterTimer = this._delay(function () { delete this.previousFilter }, 1e3)) : delete this.previousFilter } e && t.preventDefault() }, _activate: function (n) { this.active.is(".ui-state-disabled") || (this.active.is("[aria-haspopup='true']") ? this.expand(n) : this.select(n)) }, refresh: function () { var i, t, u = this, f = this.options.icons.submenu, r = this.element.find(this.options.menus); this.element.toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length); r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({ role: this.options.role, "aria-hidden": "true", "aria-expanded": "false" }).each(function () { var t = n(this), i = t.parent(), r = n("<span>").addClass("ui-menu-icon ui-icon " + f).data("ui-menu-submenu-carat", !0); i.attr("aria-haspopup", "true").prepend(r); t.attr("aria-labelledby", i.attr("id")) }); i = r.add(this.element); t = i.find(this.options.items); t.not(".ui-menu-item").each(function () { var t = n(this); u._isDivider(t) && t.addClass("ui-widget-content ui-menu-divider") }); t.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({ tabIndex: -1, role: this._itemRole() }); t.filter(".ui-state-disabled").attr("aria-disabled", "true"); this.active && !n.contains(this.element[0], this.active[0]) && this.blur() }, _itemRole: function () { return { menu: "menuitem", listbox: "option" }[this.options.role] }, _setOption: function (n, t) { n === "icons" && this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu); n === "disabled" && this.element.toggleClass("ui-state-disabled", !!t).attr("aria-disabled", t); this._super(n, t) }, focus: function (n, t) { var i, r; this.blur(n, n && n.type === "focus"); this._scrollIntoView(t); this.active = t.first(); r = this.active.addClass("ui-state-focus").removeClass("ui-state-active"); this.options.role && this.element.attr("aria-activedescendant", r.attr("id")); this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"); n && n.type === "keydown" ? this._close() : this.timer = this._delay(function () { this._close() }, this.delay); i = t.children(".ui-menu"); i.length && n && /^mouse/.test(n.type) && this._startOpening(i); this.activeMenu = t.parent(); this._trigger("focus", n, { item: t }) }, _scrollIntoView: function (t) { var e, o, i, r, u, f; this._hasScroll() && (e = parseFloat(n.css(this.activeMenu[0], "borderTopWidth")) || 0, o = parseFloat(n.css(this.activeMenu[0], "paddingTop")) || 0, i = t.offset().top - this.activeMenu.offset().top - e - o, r = this.activeMenu.scrollTop(), u = this.activeMenu.height(), f = t.outerHeight(), i < 0 ? this.activeMenu.scrollTop(r + i) : i + f > u && this.activeMenu.scrollTop(r + i - u + f)) }, blur: function (n, t) { (t || clearTimeout(this.timer), this.active) && (this.active.removeClass("ui-state-focus"), this.active = null, this._trigger("blur", n, { item: this.active })) }, _startOpening: function (n) { (clearTimeout(this.timer), n.attr("aria-hidden") === "true") && (this.timer = this._delay(function () { this._close(); this._open(n) }, this.delay)) }, _open: function (t) { var i = n.extend({ of: this.active }, this.options.position); clearTimeout(this.timer); this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden", "true"); t.show().removeAttr("aria-hidden").attr("aria-expanded", "true").position(i) }, collapseAll: function (t, i) { clearTimeout(this.timer); this.timer = this._delay(function () { var r = i ? this.element : n(t && t.target).closest(this.element.find(".ui-menu")); r.length || (r = this.element); this._close(r); this.blur(t); this.activeMenu = r }, this.delay) }, _close: function (n) { n || (n = this.active ? this.active.parent() : this.element); n.find(".ui-menu").hide().attr("aria-hidden", "true").attr("aria-expanded", "false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active") }, _closeOnDocumentClick: function (t) { return !n(t.target).closest(".ui-menu").length }, _isDivider: function (n) { return !/[^\-\u2014\u2013\s]/.test(n.text()) }, collapse: function (n) { var t = this.active && this.active.parent().closest(".ui-menu-item", this.element); t && t.length && (this._close(), this.focus(n, t)) }, expand: function (n) { var t = this.active && this.active.children(".ui-menu ").find(this.options.items).first(); t && t.length && (this._open(t.parent()), this._delay(function () { this.focus(n, t) })) }, next: function (n) { this._move("next", "first", n) }, previous: function (n) { this._move("prev", "last", n) }, isFirstItem: function () { return this.active && !this.active.prevAll(".ui-menu-item").length }, isLastItem: function () { return this.active && !this.active.nextAll(".ui-menu-item").length }, _move: function (n, t, i) { var r; this.active && (r = n === "first" || n === "last" ? this.active[n === "first" ? "prevAll" : "nextAll"](".ui-menu-item").eq(-1) : this.active[n + "All"](".ui-menu-item").eq(0)); r && r.length && this.active || (r = this.activeMenu.find(this.options.items)[t]()); this.focus(i, r) }, nextPage: function (t) { var i, r, u; if (!this.active) { this.next(t); return } this.isLastItem() || (this._hasScroll() ? (r = this.active.offset().top, u = this.element.height(), this.active.nextAll(".ui-menu-item").each(function () { return i = n(this), i.offset().top - r - u < 0 }), this.focus(t, i)) : this.focus(t, this.activeMenu.find(this.options.items)[this.active ? "last" : "first"]())) }, previousPage: function (t) { var i, r, u; if (!this.active) { this.next(t); return } this.isFirstItem() || (this._hasScroll() ? (r = this.active.offset().top, u = this.element.height(), this.active.prevAll(".ui-menu-item").each(function () { return i = n(this), i.offset().top - r + u > 0 }), this.focus(t, i)) : this.focus(t, this.activeMenu.find(this.options.items).first())) }, _hasScroll: function () { return this.element.outerHeight() < this.element.prop("scrollHeight") }, select: function (t) { this.active = this.active || n(t.target).closest(".ui-menu-item"); var i = { item: this.active }; this.active.has(".ui-menu").length || this.collapseAll(t, !0); this._trigger("select", t, i) }, _filterMenuItems: function (t) { var i = t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&"), r = new RegExp("^" + i, "i"); return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function () { return r.test(n.trim(n(this).text())) }) } }) });
/*!
 * jQuery UI Autocomplete 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/autocomplete/
 */
(function (n) { typeof define == "function" && define.amd ? define("jQueryUI/autocomplete",["jquery", "./core", "./widget", "./position", "./menu"], n) : n(jQuery) })(function (n) { return n.widget("ui.autocomplete", { version: "1.11.4", defaultElement: "<input>", options: { appendTo: null, autoFocus: !1, delay: 300, minLength: 1, position: { my: "left top", at: "left bottom", collision: "none" }, source: null, change: null, close: null, focus: null, open: null, response: null, search: null, select: null }, requestIndex: 0, pending: 0, _create: function () { var t, i, r, u = this.element[0].nodeName.toLowerCase(), f = u === "textarea", e = u === "input"; this.isMultiLine = f ? !0 : e ? !1 : this.element.prop("isContentEditable"); this.valueMethod = this.element[f || e ? "val" : "text"]; this.isNewMenu = !0; this.element.addClass("ui-autocomplete-input").attr("autocomplete", "off"); this._on(this.element, { keydown: function (u) { if (this.element.prop("readOnly")) { t = !0; r = !0; i = !0; return } t = !1; r = !1; i = !1; var f = n.ui.keyCode; switch (u.keyCode) { case f.PAGE_UP: t = !0; this._move("previousPage", u); break; case f.PAGE_DOWN: t = !0; this._move("nextPage", u); break; case f.UP: t = !0; this._keyEvent("previous", u); break; case f.DOWN: t = !0; this._keyEvent("next", u); break; case f.ENTER: this.menu.active && (t = !0, u.preventDefault(), this.menu.select(u)); break; case f.TAB: this.menu.active && this.menu.select(u); break; case f.ESCAPE: this.menu.element.is(":visible") && (this.isMultiLine || this._value(this.term), this.close(u), u.preventDefault()); break; default: i = !0; this._searchTimeout(u) } }, keypress: function (r) { if (t) { t = !1; (!this.isMultiLine || this.menu.element.is(":visible")) && r.preventDefault(); return } if (!i) { var u = n.ui.keyCode; switch (r.keyCode) { case u.PAGE_UP: this._move("previousPage", r); break; case u.PAGE_DOWN: this._move("nextPage", r); break; case u.UP: this._keyEvent("previous", r); break; case u.DOWN: this._keyEvent("next", r) } } }, input: function (n) { if (r) { r = !1; n.preventDefault(); return } this._searchTimeout(n) }, focus: function () { this.selectedItem = null; this.previous = this._value() }, blur: function (n) { if (this.cancelBlur) { delete this.cancelBlur; return } clearTimeout(this.searching); this.close(n); this._change(n) } }); this._initSource(); this.menu = n("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({ role: null }).hide().menu("instance"); this._on(this.menu.element, { mousedown: function (t) { t.preventDefault(); this.cancelBlur = !0; this._delay(function () { delete this.cancelBlur }); var i = this.menu.element[0]; n(t.target).closest(".ui-menu-item").length || this._delay(function () { var t = this; this.document.one("mousedown", function (r) { r.target === t.element[0] || r.target === i || n.contains(i, r.target) || t.close() }) }) }, menufocus: function (t, i) { var r, u; if (this.isNewMenu && (this.isNewMenu = !1, t.originalEvent && /^mouse/.test(t.originalEvent.type))) { this.menu.blur(); this.document.one("mousemove", function () { n(t.target).trigger(t.originalEvent) }); return } u = i.item.data("ui-autocomplete-item"); !1 !== this._trigger("focus", t, { item: u }) && t.originalEvent && /^key/.test(t.originalEvent.type) && this._value(u.value); r = i.item.attr("aria-label") || u.value; r && n.trim(r).length && (this.liveRegion.children().hide(), n("<div>").text(r).appendTo(this.liveRegion)) }, menuselect: function (n, t) { var i = t.item.data("ui-autocomplete-item"), r = this.previous; this.element[0] !== this.document[0].activeElement && (this.element.focus(), this.previous = r, this._delay(function () { this.previous = r; this.selectedItem = i })); !1 !== this._trigger("select", n, { item: i }) && this._value(i.value); this.term = this._value(); this.close(n); this.selectedItem = i } }); this.liveRegion = n("<span>", { role: "status", "aria-live": "assertive", "aria-relevant": "additions" }).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body); this._on(this.window, { beforeunload: function () { this.element.removeAttr("autocomplete") } }) }, _destroy: function () { clearTimeout(this.searching); this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"); this.menu.element.remove(); this.liveRegion.remove() }, _setOption: function (n, t) { this._super(n, t); n === "source" && this._initSource(); n === "appendTo" && this.menu.element.appendTo(this._appendTo()); n === "disabled" && t && this.xhr && this.xhr.abort() }, _appendTo: function () { var t = this.options.appendTo; return t && (t = t.jquery || t.nodeType ? n(t) : this.document.find(t).eq(0)), t && t[0] || (t = this.element.closest(".ui-front")), t.length || (t = this.document[0].body), t }, _initSource: function () { var i, r, t = this; n.isArray(this.options.source) ? (i = this.options.source, this.source = function (t, r) { r(n.ui.autocomplete.filter(i, t.term)) }) : typeof this.options.source == "string" ? (r = this.options.source, this.source = function (i, u) { t.xhr && t.xhr.abort(); t.xhr = n.ajax({ url: r, data: i, dataType: "json", success: function (n) { u(n) }, error: function () { u([]) } }) }) : this.source = this.options.source }, _searchTimeout: function (n) { clearTimeout(this.searching); this.searching = this._delay(function () { var t = this.term === this._value(), i = this.menu.element.is(":visible"), r = n.altKey || n.ctrlKey || n.metaKey || n.shiftKey; t && (!t || i || r) || (this.selectedItem = null, this.search(null, n)) }, this.options.delay) }, search: function (n, t) { return (n = n != null ? n : this._value(), this.term = this._value(), n.length < this.options.minLength) ? this.close(t) : this._trigger("search", t) === !1 ? void 0 : this._search(n) }, _search: function (n) { this.pending++; this.element.addClass("ui-autocomplete-loading"); this.cancelSearch = !1; this.source({ term: n }, this._response()) }, _response: function () { var t = ++this.requestIndex; return n.proxy(function (n) { t === this.requestIndex && this.__response(n); this.pending--; this.pending || this.element.removeClass("ui-autocomplete-loading") }, this) }, __response: function (n) { n && (n = this._normalize(n)); this._trigger("response", null, { content: n }); !this.options.disabled && n && n.length && !this.cancelSearch ? (this._suggest(n), this._trigger("open")) : this._close() }, close: function (n) { this.cancelSearch = !0; this._close(n) }, _close: function (n) { this.menu.element.is(":visible") && (this.menu.element.hide(), this.menu.blur(), this.isNewMenu = !0, this._trigger("close", n)) }, _change: function (n) { this.previous !== this._value() && this._trigger("change", n, { item: this.selectedItem }) }, _normalize: function (t) { return t.length && t[0].label && t[0].value ? t : n.map(t, function (t) { return typeof t == "string" ? { label: t, value: t } : n.extend({}, t, { label: t.label || t.value, value: t.value || t.label }) }) }, _suggest: function (t) { var i = this.menu.element.empty(); this._renderMenu(i, t); this.isNewMenu = !0; this.menu.refresh(); i.show(); this._resizeMenu(); i.position(n.extend({ of: this.element }, this.options.position)); this.options.autoFocus && this.menu.next() }, _resizeMenu: function () { var n = this.menu.element; n.outerWidth(Math.max(n.width("").outerWidth() + 1, this.element.outerWidth())) }, _renderMenu: function (t, i) { var r = this; n.each(i, function (n, i) { r._renderItemData(t, i) }) }, _renderItemData: function (n, t) { return this._renderItem(n, t).data("ui-autocomplete-item", t) }, _renderItem: function (t, i) { return n("<li>").text(i.label).appendTo(t) }, _move: function (n, t) { if (!this.menu.element.is(":visible")) { this.search(null, t); return } if (this.menu.isFirstItem() && /^previous/.test(n) || this.menu.isLastItem() && /^next/.test(n)) { this.isMultiLine || this._value(this.term); this.menu.blur(); return } this.menu[n](t) }, widget: function () { return this.menu.element }, _value: function () { return this.valueMethod.apply(this.element, arguments) }, _keyEvent: function (n, t) { (!this.isMultiLine || this.menu.element.is(":visible")) && (this._move(n, t), t.preventDefault()) } }), n.extend(n.ui.autocomplete, { escapeRegex: function (n) { return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&") }, filter: function (t, i) { var r = new RegExp(n.ui.autocomplete.escapeRegex(i), "i"); return n.grep(t, function (n) { return r.test(n.label || n.value || n) }) } }), n.widget("ui.autocomplete", n.ui.autocomplete, { options: { messages: { noResults: "No search results.", results: function (n) { return n + (n > 1 ? " results are" : " result is") + " available, use up and down arrow keys to navigate." } } }, __response: function (t) { var i; (this._superApply(arguments), this.options.disabled || this.cancelSearch) || (i = t && t.length ? this.options.messages.results(t.length) : this.options.messages.noResults, this.liveRegion.children().hide(), n("<div>").text(i).appendTo(this.liveRegion)) } }), n.ui.autocomplete });
// Copyright (C) Microsoft Corporation. All rights reserved.
define("Mention/Scripts/TFS.Mention.Helpers",["require","exports","VSS/Utils/Core","Presentation/Scripts/TFS/TFS.Host.TfsContext","jQueryUI/autocomplete"],function(n,t,i,r){function h(n,t,i,r){var h;if(typeof n=="undefined"||n===null||t===null||!t.length)return{found:{},highlightedSource:n};t=t.slice(0,s);var c=n.toUpperCase(),l=t.map(function(n){return $.ui.autocomplete.escapeRegex(n)}),e,f={},o=!1;return i===u.Prefix?(t.forEach(function(n){c.indexOf(n.toUpperCase())===0?(o=!0,f[n]=!0):f[n]=!1}),e=new RegExp("^("+l.join("|")+")","ig")):i===u.Contains&&(t.forEach(function(n){c.indexOf(n.toUpperCase())>=0?(o=!0,f[n]=!0):f[n]=!1}),e=new RegExp(l.join("|"),"ig")),h="",h=o&&r?n.replace(e,r):n,{found:f,highlightedSource:h}}function e(){return window.parent!==window}function o(){return e()?window.parent.TfsMentionHelpers.getDefaultTfsContext():f.getDefaultTfsContext()}function c(){var n;try{n=o()}catch(t){n=null}return!!n}function l(n,t){return i.delegate(n,t)}function a(n,t,r){var u,f=i.throttledDelegate(n,t,function(){var t=u;u=null;r.apply(n,t)});return function(){return u=arguments,f()}}function v(){return window.location}function y(n){return $("<div>").html(n).text()}function p(n){if(!n)return null;var t=n.ownerDocument;return t?t.defaultView||t.parentWindow:null}function w(n){return n.charCode?!0:!1}var s=10,u,f;(function(n){n[n.Contains=0]="Contains";n[n.Prefix=1]="Prefix"})(t.SearchBehavior||(t.SearchBehavior={}));u=t.SearchBehavior;t.searchString=h;t.hasParentWindow=e;t.getMainTfsContext=o;t.environmentIsSupported=c;t.delegate=l;t.throttledDelegate=a;t.getWindowLocation=v;t.convertHtmlToText=y;t.getWindow=p,function(n){function t(){return r.TfsContext.getDefault()}n.getDefaultTfsContext=t}(f=t.TfsMentionHelpers||(t.TfsMentionHelpers={}));t.eventHasPrintableCharacter=w;window.TfsMentionHelpers=f});
define("Mention/Scripts/TFS.Social.Telemetry",["require","exports","Mention/Scripts/TFS.Mention.Helpers","VSS/Telemetry/Services","VSS/VSS"],function(n,t,i,r,u){var f=function(){function n(){}return n.MENTION_AREA="Mention",n.WORKITEMS_INITIALIZE_EVENT="WorkitemsInitialize",n.WORKITEMS_CLICK_EVENT="WorkitemsClick",n.PEOPLE_CLICK_EVENT="PeopleClick",n.AUTOCOMPLETE_OPEN_EVENT="AutocompleteOpen",n.AUTOCOMPLETE_SUGGEST_EVENT="AutocompleteSuggest",n.AUTOCOMPLETE_SELECT_EVENT="AutocompleteSelect",n.AUTOCOMPLETE_CANCEL_EVENT="AutocompleteCancel",n.MENTIONABLE_PREVIEW_EVENT="MentionablePreview",n.MENTIONABLE_EDIT_EVENT="MentionableEdit",n.SOCIAL_AREA="Social",n.DISCUSSION_RENDER_EVENT="DiscussionRender",n.DISCUSSION_SHOWMORE_EVENT="DiscussionShowMore",n}(),e=function(){function n(){}return n.publishAutocompleteOpenEvent=function(t){n.delayedPublish(f.AUTOCOMPLETE_OPEN_EVENT,t)},n.publishAutocompleteSuggestEvent=function(t){n.delayedPublish(f.AUTOCOMPLETE_SUGGEST_EVENT,t)},n.publishAutocompleteSelectEvent=function(t){n.delayedPublish(f.AUTOCOMPLETE_SELECT_EVENT,t)},n.publishAutocompleteCancelEvent=function(t){n.delayedPublish(f.AUTOCOMPLETE_CANCEL_EVENT,t)},n.publishWorkItemsInitializeEvent=function(t){n.delayedPublish(f.WORKITEMS_INITIALIZE_EVENT,t)},n.publishWorkItemsClickEvent=function(t){n.delayedPublish(f.WORKITEMS_CLICK_EVENT,t)},n.publishPeopleClickEvent=function(t){n.delayedPublish(f.PEOPLE_CLICK_EVENT,t)},n.publishMentionableEditEvent=function(t){n.delayedPublish(f.MENTIONABLE_EDIT_EVENT,t)},n.publishMentionablePreviewEvent=function(t){n.delayedPublish(f.MENTIONABLE_PREVIEW_EVENT,t)},n.publishDiscussionRenderEvent=function(t){n.delayedPublish(f.DISCUSSION_RENDER_EVENT,t,f.SOCIAL_AREA)},n.publishDiscussionShowMoreClickEvent=function(t){n.delayedPublish(f.DISCUSSION_SHOWMORE_EVENT,t,f.SOCIAL_AREA)},n._getTfsContext=function(){return n.tfsContext||(n.tfsContext=i.getMainTfsContext()),n.tfsContext},n._extendProperties=function(t){var i=n._getTfsContext().navigation.projectId;t=t||{};t.projectId=""+i},n.delayedPublish=function(t,i,u){u===void 0&&(u=f.MENTION_AREA);n._extendProperties(i);r.publishEvent(new r.TelemetryEventData(u,t,i))},n.publish=function(t,i){n._extendProperties(i);r.publishEvent(new r.TelemetryEventData(f.MENTION_AREA,t,i))},n}();t.EventLogging=e;u.tfsModuleLoaded("TFS.Social.Telemetry",t)});
define("Mention/Scripts/TFS.Mention.Autocomplete.Controls",["require","exports","VSS/Controls","VSS/Utils/Core","Presentation/Scripts/TFS/TFS.Core.Utils","VSS/Utils/UI","Mention/Scripts/TFS.Mention.Helpers","Mention/Scripts/TFS.Social.Telemetry","VSS/LoaderPlugins/Css!Mention"],function(n,t,i,r,u,f,e,o){var s,h,c,l;(function(n){function t(n){var t=0,u=n[0],i;return u.selectionStart?t=u.selectionStart:r.documentSelection&&(this.$inputElement.focus(),i=r.documentSelection.createRange(),i.moveStart("character",-this.$inputElement.val().length),t=i.text.length),t}function i(n,t,i){f.SelectionUtils.selectInputText(n,t,i,!1)}function u(n,t,i){var s=$._data(n[0],"events"),c,e,o,u,h,f,r;if(s)for(e=$.grep(t.split(" "),function(n){return!!n}),c={},r=0;r<e.length;r++)o=e[r],u=s[o],c[o]=u?u.length:0;if(i(),s)for(h=0;h<e.length;h++){var o=e[h],u=s[o],l=c[o];if(u&&u.length>l){for(f=[],r=l;r<u.length;r++)f.push(u[r]);for(r=u.length-f.length-1;r>=0;r--)u[r+f.length]=u[r];for(r=0;r<f.length;r++)u[r]=f[r]}}}n.getInputCaretPosition=t;n.setInputSelectionRange=i;n.moveAllAddedEventHandlersToFront=u})(s||(s={}));h=function(){function n(n,t){var i=this;this._instanceId=u.GUIDUtils.newGuid();this._sessionActive=!1;this._sessionPluginActive=!1;this._sessionStartTime=null;this._options=n;this._artifactUri=n.artifactUri;this._plugins=this._plugins=$.map(this._options.pluginConfigs||[],function(n,r){return n.factory($.extend({select:function(n,t,u){i._sessionPluginActive&&i._sessionPluginIndex===r&&i._pluginSelect(n,t,u)},focus:function(n,t){i._sessionPluginActive&&i._sessionPluginIndex===r&&i._pluginFocus(n,t)},close:function(n,t){i._sessionPluginActive&&i._sessionPluginIndex===r&&i.close(n,t)}},t,n.options))})}return n.prototype.initialize=function(){this._plugins.forEach(function(n){n.initialize()})},n.prototype.isActive=function(){return this._sessionActive},n.prototype.getActivePlugin=function(){return this._sessionPluginActive?this._getPlugin():null},n.prototype.updateSession=function(n,t){var f=this._sessionPluginActive?this._sessionPluginIndex:null,s,i,r,e;for(this._sessionPluginActive&&!this._getPlugin().canOpen(t)&&this._pluginClose(n,t),s=this._sessionPluginActive?this._sessionPluginIndex:this._plugins.length,i=null,r=0;r<s;r++)if(e=this._plugins[r].canOpen(t),e){i=r;break}this._sessionPluginActive&&i!==null&&this._pluginClose(n,t);i!==null&&(this._sessionId=u.GUIDUtils.newGuid(),this._sessionStartTime=new Date,this._sessionSuggestionSelected=!1,this._sessionPluginActive=!0,this._sessionPluginIndex=i,this._getPlugin().open(n,t),this._publishTelemetry(o.EventLogging.publishAutocompleteOpenEvent,n,this._getPlugin().getPluginName(),t,{}));f===null||this._sessionPluginActive||this._sessionClose(n,t,f);f===null&&this._sessionPluginActive&&(this._sessionActive=!0,this._options.open&&this._options.open(e))},n.prototype.suggest=function(n,t){var i=this,r,u;this._sessionPluginActive&&(r=this._getPlugin().getPluginName(),u=new Date,this._getPlugin().suggest(n,t).done(function(f){var e=$.extend({durationInMSec:""+((new Date).getTime()-u.getTime()),mentionAfrifactContext:i._options.getMentionArtifactContext?i._options.getMentionArtifactContext():undefined},f.telemetry);i._publishTelemetry(o.EventLogging.publishAutocompleteSuggestEvent,n,r,t,e)}))},n.prototype.setLastKeyEvent=function(n){this._lastKeyEvent=n},n.prototype.prefetch=function(){this._plugins.forEach(function(n){n.prefetch()})},n.prototype.setArtifactUri=function(n){this._artifactUri=n},n.prototype.close=function(n,t){this._sessionPluginActive&&(this._pluginClose(n,t),this._sessionClose(n,t,this._sessionPluginIndex))},n.prototype._getPlugin=function(){return this._plugins[this._sessionPluginIndex]},n.prototype._pluginSelect=function(n,t,i){this._sessionPluginActive&&(this._sessionSuggestionSelected=!0,this._options.select&&this._options.select(t),this._publishTelemetry(o.EventLogging.publishAutocompleteSelectEvent,n,this._getPlugin().getPluginName(),t.getPlainText(),i))},n.prototype._pluginFocus=function(n,t){this._sessionPluginActive&&this._options.focus&&this._options.focus(t)},n.prototype._pluginClose=function(n,t){if(this._sessionPluginActive&&(this._sessionPluginActive=!1,this._getPlugin().close(n,t),!this._sessionSuggestionSelected)){var i=this._plugins[this._sessionPluginIndex].getPluginName();this._publishTelemetry(o.EventLogging.publishAutocompleteCancelEvent,n,i,t,{})}},n.prototype._sessionClose=function(){this._sessionActive&&(this._sessionActive=!1,this._options.close&&this._options.close())},n.prototype._publishTelemetry=function(t,i,r,u,f){for(var o="",e,s;i&&i.type&&!n.REGEX_TELEMETRY_UI_EVENT_TYPES.exec(i.type);)i=i.originalEvent;i&&i.type&&(o+=""+i.type,e=i,e.type==="input"&&!e.keyCode&&this._lastKeyEvent&&(e=this._lastKeyEvent),e.keyCode&&(o+=":"+e.keyCode),e.altKey&&(o+=":alt"),e.ctrlKey&&(o+=":ctrl"));s=$.extend({telemetryVersion:"0.3",artifactUri:this._artifactUri,autocompleteSessionId:this._sessionId,autocompleteSessionStartTime:this._sessionStartTime.toISOString(),time:(new Date).toISOString(),uiEvent:o,pluginName:r,textBeforeSelection:u.textBeforeSelection,textInSelection:u.textInSelection,textAfterSelection:u.textAfterSelection},f);t(s)},n.REGEX_TELEMETRY_UI_EVENT_TYPES=/^(key[a-z]+|input|blur|click)$/i,n}();t.AutocompleteSessionManager=h;c=function(){function n(t,i){this._throttledSuggest=e.throttledDelegate(this,n.AUTOCOMPLETE_DELAY_MSEC,this._suggest);this._sessionManager=new h(t,i)}return n.prototype.initialize=function(){this._sessionManager.initialize()},n.prototype.prefetch=function(){this._sessionManager.prefetch()},n.prototype.handleEvent=function(n,t){return n.keyCode&&this._sessionManager.setLastKeyEvent(n),t!=void 0&&(this._sessionManager.updateSession(n,t),this._throttledSuggest(n,t)),this._sessionManager.isActive()?this._sessionManager.getActivePlugin().handle(n):void 0},n.prototype.close=function(n,t){this._sessionManager.close(n,t)},n.prototype.setArtifactUri=function(n){this._sessionManager.setArtifactUri(n)},n.prototype.isActive=function(){return this._sessionManager.isActive()},n.prototype._suggest=function(n,t){this._sessionManager.suggest(n,t)},n.AUTOCOMPLETE_DELAY_MSEC=300,n}();t.AutocompleteManager=c;l=function(n){function t(i,r){n.call(this,i,r);this._autocompleteManager=t._createAutocompleteManager({artifactUri:this._options.artifactUri,pluginConfigs:this._options.pluginConfigs,open:e.delegate(this,this._sessionOpen),close:e.delegate(this,this._sessionClose),select:e.delegate(this,this._sessionSelect),focus:e.delegate(this,this._sessionFocus)},{menuContainer:e.delegate(this,this._getMenuContainer),positioningElement:e.delegate(this,this._getPositioningElement)})}return __extends(t,n),t._createAutocompleteManager=function(n,t){return new c(n,t)},t.prototype.initialize=function(){var n=this;this._lastValue=this.getElement().val();this._autocompleteManager.initialize();s.moveAllAddedEventHandlersToFront(this.getElement(),t.PASSTHROUGH_EVENT_TYPES,function(){n.getElement().on(t.PASSTHROUGH_EVENT_TYPES,e.delegate(n,n._handleEvent))})},t.prototype.prefetch=function(){this._autocompleteManager.prefetch()},t.prototype.isActive=function(){return this._autocompleteManager.isActive()},t.prototype._getMenuContainer=function(){return this.getElement()&&this.getElement().parent()?this.getElement().parent():$(document.body)},t.prototype._getPositioningElement=function(){return this.getElement()},t.prototype._createInputText=function(n,t){var i=s.getInputCaretPosition(this.getElement());return{textBeforeSelection:t.substring(0,i),textInSelection:"",textAfterSelection:t.substring(i)}},t.prototype._handleEvent=function(n){var r,i,u,f;if(!this._suppressInputEvents||n.type!=="input")return(r=void 0,(n.type==="keyup"||n.type==="input")&&(i=this.getElement().val(),i!=this._lastValue&&(this._lastValue=i,r=this._createInputText(n,i))),u=this._autocompleteManager.isActive(),f=this._autocompleteManager.handleEvent(n,r),u&&t.INTERCEPTED_EVENT_KEYCODES.some(function(t){return t===n.keyCode}))?(n.preventDefault(),n.stopImmediatePropagation(),!1):f},t.prototype._sessionOpen=function(n){this._options.open&&this._options.open(n)},t.prototype._sessionClose=function(){this._options.close&&this._options.close()},t.prototype._sessionSelect=function(n){var t=this;this._setValue(n.getPlainText(),function(){return t._triggerInputEvent()});this._options.select&&this._options.select(n)},t.prototype._sessionFocus=function(n){this._setValue(n.getPlainText())},t.prototype._setValue=function(n,t){this.getElement().val(n.textBeforeSelection+n.textInSelection+n.textAfterSelection);s.setInputSelectionRange(this.getElement(),n.textBeforeSelection.length,n.textBeforeSelection.length+n.textInSelection.length);var i=this.getElement().val();i!==this._lastValue&&(t&&t(),this._lastValue=i)},t.prototype._triggerInputEvent=function(){this._suppressInputEvents=!0;try{this.getElement().trigger("input")}finally{this._suppressInputEvents=!1}},t.PASSTHROUGH_EVENT_TYPES="keyup keydown keypress input focus blur",t.INTERCEPTED_EVENT_KEYCODES=[f.KeyCode.ENTER,f.KeyCode.ESCAPE,f.KeyCode.TAB],t}(i.Enhancement);t.AutocompleteEnhancement=l});
define("Mention/Scripts/TFS.Mention.FeatureAvailability",["require","exports","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants"],function(n,t,i,r){function u(){try{return i.FeatureAvailabilityService.isFeatureEnabled(r.FeatureAvailabilityFlags.WebAccessMentionVersionControl)}catch(n){return!1}}function f(){try{return i.FeatureAvailabilityService.isFeatureEnabled(r.FeatureAvailabilityFlags.WebAccessMentionWorkItemsPlugin)}catch(n){return!1}}function e(){try{return i.FeatureAvailabilityService.isFeatureEnabled(r.FeatureAvailabilityFlags.WebAccessMentionPeoplePlugin)}catch(n){return!1}}t.isMentionVersionControlFeatureEnabled=u;t.isMentionWorkItemsPluginFeatureEnabled=f;t.isMentionPeoplePluginFeatureEnabled=e});
define("Mention/Scripts/TFS.Mention.Autocomplete.JQueryAutocomplete",["require","exports","VSS/Diag","VSS/Utils/UI","VSS/Utils/String","Mention/Scripts/TFS.Mention.Helpers","Mention/Scripts/Resources/TFS.Resources.Mention","jQueryUI/autocomplete"],function(n,t,i,r,u,f,e){var s,h,o,c;(function(n){function t(n,i){var r=null,u;return n&&(u=/^key(down|up|press)$/i.test(n.type),u?r=n:n.originalEvent&&i&&i>0&&(r=t(n.originalEvent,i-1))),r}function i(n){return n.textBeforeSelection+n.textInSelection+n.textAfterSelection}n.tryGetKeyboardEvent=t;n.getStringFromInputText=i})(s||(s={})),function(n){n.AUTOCOMPLETE_CONTAINER="mention-autocomplete-container";n.AUTOCOMPLETE_FOOTER="mention-autocomplete-footer";n.AUTOCOMPLETE_FOOTER_CONTENTS="mention-autocomplete-footer-contents";n.HIGHLIGHT="mention-autocomplete-highlight"}(h=t.CssClasses||(t.CssClasses={})),function(n){n[n.Suggestion=0]="Suggestion";n[n.Error=1]="Error";n[n.Empty=2]="Empty";n[n.Loading=3]="Loading"}(o||(o={}));c=function(){function n(n){this._isOpen=!1;this._options=n}return n.prototype.initialize=function(){var t=this,n;this._$inputElement=$("<input>").autocomplete({appendTo:this._getMenuContainer(),autoFocus:!0,source:f.delegate(this,this._autocompleteOnSource),select:f.delegate(this,this._autocompleteOnSelect),focus:f.delegate(this,this._autocompleteOnFocus),open:f.delegate(this,this._autocompleteOnOpen),close:f.delegate(this,this._autocompleteOnClose),messages:{noResults:"",results:function(){return""}}});this._$inputElement.on("keydown keypress",function(n){f.eventHasPrintableCharacter(n)||(n.keyCode===r.KeyCode.UP||n.keyCode===r.KeyCode.DOWN||n.keyCode===r.KeyCode.PAGE_UP||n.keyCode===r.KeyCode.PAGE_DOWN)&&t._handleAutocompleteReset(n)});this._$menuContainer.on("mousewheel",function(n){n.stopPropagation()});n=this._getAutocompleteInstance();n._resizeMenu=f.delegate(this,this._autocompleteResizeMenu);n._renderMenu=f.delegate(this,this._autocompleteRenderMenu);n._renderItem=f.delegate(this,this._autocompleteRenderItem)},n.prototype.__test=function(){return{_$footer:this._$footer}},n.prototype.prefetch=function(){throw"Not implemented";},n.prototype.getPluginName=function(){throw"Not implemented";},n.prototype.canOpen=function(){throw"Not implemented";},n.prototype.getSuggestions=function(){throw"Not Implemented";},n.prototype.renderSuggestion=function(){throw"Not Implemented";},n.prototype.afterRender=function(){throw"Not Implemented";},n.prototype.getReplacementText=function(){throw"Not Implemented";},n.prototype.getReplacementHtml=function(){throw"Not Implemented";},n.prototype.dispose=function(){this._$inputElement.autocomplete("destroy")},n.prototype.getOptions=function(){return this._options},n.prototype.open=function(n,t){this._inputText=t;this._isOpen=!0},n.prototype.suggest=function(n,t){var i=$.Deferred();return this._inputText=t,this._$inputElement.val(s.getStringFromInputText(t)),this._$inputElement.autocomplete("search",i,n),i},n.prototype.close=function(n,t){this._inputText=t;this._$inputElement.autocomplete("close",n);this._isOpen=!1},n.prototype.handle=function(n){this._$inputElement.trigger(n)},n.prototype.isOpen=function(){return this._isOpen},n.prototype._getMenuContainer=function(){if(!this._$menuContainer){var n=this._options.menuContainer().length?this._options.menuContainer():$(document.body);this._$menuContainer=$("<div>").addClass(h.AUTOCOMPLETE_CONTAINER).appendTo(n)}return this._$menuContainer},n.prototype._getMenuMaxHeight=function(){return this._options.menuMaxHeight||n.DEFAULT_MENU_MAX_HEIGHT},n.prototype._getAutocompleteInstance=function(){return this._$inputElement.data("ui-autocomplete")},n.prototype._applySuggestionToTextBox=function(n,t,i){var f=this,e={suggestion:JSON.stringify(t.suggestion),selectionIndex:""+t.index},r=this.getReplacementText(this._inputText,t.suggestion,i),u;this._$inputElement.val(s.getStringFromInputText(r));u={getPlainText:function(){return r},getHtml:function(){return f.getReplacementHtml(t.suggestion)}};i?this._options.focus&&this._options.focus(n,u):(this._inputText=r,this._options.select&&this._options.select(n,u,e))},n.prototype._handleAutocompleteReset=function(n){var r=s.getStringFromInputText(this._inputText),u=this._$inputElement.val(),t,i;u===r&&this._options.focus&&(t=this._inputText,i={getPlainText:function(){return t},getHtml:function(){return""}},this._options.focus(n,i))},n.prototype._autocompleteResizeMenu=function(){var r=this,i=this._options.positioningElement?typeof this._options.positioningElement=="function"?this._options.positioningElement():this._options.positioningElement:this._getMenuContainer(),t=$(this._getAutocompleteInstance().menu.element),p=this._options.isMenuWidthOverridable&&this._options.menuWidth?this._options.menuWidth:i.innerWidth(),u,f;t.width(p);u=$(">:first:visible",t);f=Math.max(i.zIndex()*1+1,n.MIN_MENU_ZINDEX);t.css("z-index",f);var o=i.offset(),s=o.top-$(window).scrollTop(),w=$(window).height()-s-i.outerHeight(!1)-n.MENU_FOOTER_HEIGHT,e=s>this._getMenuMaxHeight()&&this._getMenuMaxHeight()>w,b=o.left-$(window).scrollLeft(),h=$(window).width()-b,c=t.outerWidth(),l=c<h?0:c-h,a=function(o){$(this).css(o);r._$footer.css("z-index",f);r._$footer.width(t.width());r._$footer.height(n.MENU_FOOTER_HEIGHT);r._$footer.show();u.length>0?r._$footer.position({my:"left top-1",at:"left bottom",collision:"none",of:t}):r._$footer.position({my:"left "+(e?"bottom":"top"),at:"left "+(e?"top":"bottom"),collision:"none",of:i})};if(e?this._$inputElement.autocomplete({position:{my:"left bottom",at:"left-"+l+" top-"+n.MENU_FOOTER_HEIGHT,collision:"none",of:i,using:a}}):this._$inputElement.autocomplete({position:{my:"left top",at:"left-"+l+" bottom",collision:"none",of:i,using:a}}),u.length>0){var k=u.position().top,v=$(">:last:visible",t),d=v.position().top+v.outerHeight(),y=d-k,g=y<=this._getMenuMaxHeight()?y:this._getMenuMaxHeight();t.height(g);this.afterRender(t);t.css("max-height","").css("overflow","")}else t.css("max-height",0).css("overflow","hidden")},n.prototype._renderFooter=function(n){return this._$footer||(this._$footer=$("<div>").addClass(h.AUTOCOMPLETE_FOOTER).appendTo(this._$menuContainer).hide()),this._$footer.text(n)},n.prototype._autocompleteRenderMenu=function(n,t){var f=this._getAutocompleteInstance(),r;$(n).addClass("mention-autocomplete-menu");t[0].type===o.Suggestion?(t.forEach(function(t){f._renderItemData(n,t)}),r=t.length===1?e.AutocompleteSuggestionsSingular:e.AutocompleteSuggestionsPlural,this._renderFooter(u.format(r,t.length))):(this._addFakeAnchor(n,t[0]),t[0].type===o.Loading?this._renderFooter(e.AutocompleteLoading):t[0].type===o.Empty?this._renderFooter(e.AutocompleteNoSuggestions):t[0].type===o.Error&&this._renderFooter(e.AutocompleteServerError))},n.prototype._addFakeAnchor=function(n,t){var i=$("<li>").hide().appendTo(n).data("ui-autocomplete-item",t);$("<a>").appendTo(i)},n.prototype._autocompleteRenderItem=function(n,t){return this.renderSuggestion(n,t.suggestion).addClass("mention-autocomplete-item")},n.prototype._autocompleteOnSource=function(t,i){var r=t.term,u;if(r&&r.resolve||(r=null),!this._isOpen){this._getAutocompleteInstance().close();i(null);return}u=!1;this.getSuggestions(this._inputText).done(function(n){var f,t;u=!0;n?(f=n.result&&n.result.length?n.result.map(function(n,t){return{type:o.Suggestion,index:t,suggestion:n,error:null}}):[{type:o.Empty,index:null,suggestion:null,error:null}],r&&r.resolve(n),i(f)):(t=new Error("Suggestions is Null"),r&&r.reject(t),i([{type:o.Error,index:null,suggestion:null,error:t}]))}).fail(function(n){u=!0;r&&r.reject(n);i([{type:o.Error,index:null,suggestion:null,error:n}])});setTimeout(function(){u||i([{type:o.Loading,index:null,suggestion:null,error:null}])},n.LOADING_DELAY_TIME)},n.prototype._autocompleteOnFocus=function(n,t){return t.item.type===o.Suggestion&&(this._applySuggestionToTextBox(n,t.item,!0),t.item.value=this._$inputElement.val(),$(".ui-helper-hidden-accessible").hide()),!1},n.prototype._autocompleteOnSelect=function(n,t){return t.item.type===o.Suggestion&&this._applySuggestionToTextBox(n,t.item,!1),!1},n.prototype._autocompleteOnOpen=function(){},n.prototype._autocompleteOnClose=function(n){this._$footer.hide();var t=s.tryGetKeyboardEvent(n,5);t&&t.keyCode===r.KeyCode.ESCAPE&&this._handleAutocompleteReset(n);this._options.close&&this._options.close(n,this._inputText)},n.MENU_FOOTER_HEIGHT=20,n.DEFAULT_MENU_MAX_HEIGHT=200,n.LOADING_DELAY_TIME=100,n.MIN_MENU_ZINDEX=100,n}();t.JQueryAutocompletePlugin=c});
/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.14.1
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
(function(n,t){"use strict";typeof exports=="object"?module.exports=t():typeof define=="function"&&define.amd?define("Presentation/Scripts/IPv6",t):n.IPv6=t(n)})(this,function(n){"use strict";function i(n){var y=n.toLowerCase(),t=y.split(":"),r=t.length,s=8,u,h,i,c,o;for(t[0]===""&&t[1]===""&&t[2]===""?(t.shift(),t.shift()):t[0]===""&&t[1]===""?t.shift():t[r-1]===""&&t[r-2]===""&&t.pop(),r=t.length,t[r-1].indexOf(".")!==-1&&(s=7),u=0;u<r;u++)if(t[u]==="")break;if(u<s){for(t.splice(u,1,"0000");t.length<s;)t.splice(u,0,"0000");r=t.length}for(i=0;i<s;i++){for(h=t[i].split(""),c=0;c<3;c++)if(h[0]==="0"&&h.length>1)h.splice(0,1);else break;t[i]=h.join("")}var l=-1,f=0,e=0,a=-1,v=!1;for(i=0;i<s;i++)v?t[i]==="0"?e+=1:(v=!1,e>f&&(l=a,f=e)):t[i]==="0"&&(v=!0,a=i,e=1);for(e>f&&(l=a,f=e),f>1&&t.splice(l,f,""),r=t.length,o="",t[0]===""&&(o=":"),i=0;i<r;i++){if(o+=t[i],i===r-1)break;o+=":"}return t[r-1]===""&&(o+=":"),o}function r(){return n.IPv6===this&&(n.IPv6=t),this}var t=n&&n.IPv6;return{best:i,noConflict:r}});
/*! http://mths.be/punycode v1.2.3 by @mathias */
/*
Copyright Mathias Bynens <https://mathiasbynens.be/>

Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
(function(n){function u(n){throw RangeError(ht[n]);}function b(n,t){for(var i=n.length;i--;)n[i]=t(n[i]);return n}function k(n,t){return b(n.split(st),t).join(".")}function d(n){for(var r=[],i=0,f=n.length,t,u;i<f;)t=n.charCodeAt(i++),t>=55296&&t<=56319&&i<f?(u=n.charCodeAt(i++),(u&64512)==56320?r.push(((t&1023)<<10)+(u&1023)+65536):(r.push(t),i--)):r.push(t);return r}function g(n){return b(n,function(n){var t="";return n>65535&&(n-=65536,t+=s(n>>>10&1023|55296),n=56320|n&1023),t+s(n)}).join("")}function ct(n){return n-48<10?n-22:n-65<26?n-65:n-97<26?n-97:t}function nt(n,t){return n+22+75*(n<26)-((t!=0)<<5)}function tt(n,r,u){var f=0;for(n=u?i(n/ft):n>>1,n+=i(n/r);n>a*o>>1;f+=t)n=i(n/a);return i(f+(a+1)*n/(n+ut))}function it(n){var b=[],ft=n.length,s,r=0,nt=p,k=y,e,h,d,it,c,a,v,rt,ut;for(e=n.lastIndexOf(w),e<0&&(e=0),h=0;h<e;++h)n.charCodeAt(h)>=128&&u("not-basic"),b.push(n.charCodeAt(h));for(d=e>0?e+1:0;d<ft;){for(it=r,c=1,a=t;;a+=t){if(d>=ft&&u("invalid-input"),v=ct(n.charCodeAt(d++)),(v>=t||v>i((f-r)/c))&&u("overflow"),r+=v*c,rt=a<=k?l:a>=k+o?o:a-k,v<rt)break;ut=t-rt;c>i(f/ut)&&u("overflow");c*=ut}s=b.length+1;k=tt(r-it,s,it==0);i(r/s)>f-nt&&u("overflow");nt+=i(r/s);r%=s;b.splice(r++,0,nt)}return g(b)}function rt(n){var h,c,b,et,k,r,a,g,it,rt,e,v=[],ut,ft,ot,st;for(n=d(n),ut=n.length,h=p,c=0,k=y,r=0;r<ut;++r)e=n[r],e<128&&v.push(s(e));for(b=et=v.length,et&&v.push(w);b<ut;){for(a=f,r=0;r<ut;++r)e=n[r],e>=h&&e<a&&(a=e);for(ft=b+1,a-h>i((f-c)/ft)&&u("overflow"),c+=(a-h)*ft,h=a,r=0;r<ut;++r)if(e=n[r],e<h&&++c>f&&u("overflow"),e==h){for(g=c,it=t;;it+=t){if(rt=it<=k?l:it>=k+o?o:it-k,g<rt)break;st=g-rt;ot=t-rt;v.push(s(nt(rt+st%ot,0)));g=i(st/ot)}v.push(s(nt(g,0)));k=tt(c,ft,b==et);c=0;++b}++c;++h}return v.join("")}function lt(n){return k(n,function(n){return et.test(n)?it(n.slice(4).toLowerCase()):n})}function at(n){return k(n,function(n){return ot.test(n)?"xn--"+rt(n):n})}var h=typeof exports=="object"&&exports,v=typeof module=="object"&&module&&module.exports==h&&module,e=typeof global=="object"&&global;(e.global===e||e.window===e)&&(n=e);var r,f=2147483647,t=36,l=1,o=26,ut=38,ft=700,y=72,p=128,w="-",et=/^xn--/,ot=/[^ -~]/,st=/\x2E|\u3002|\uFF0E|\uFF61/g,ht={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},a=t-l,i=Math.floor,s=String.fromCharCode,c;if(r={version:"1.2.3",ucs2:{decode:d,encode:g},decode:it,encode:rt,toASCII:at,toUnicode:lt},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("Presentation/Scripts/punycode",function(){return r});else if(h&&!h.nodeType)if(v)v.exports=r;else for(c in r)r.hasOwnProperty(c)&&(h[c]=r[c]);else n.punycode=r})(this);
/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.14.1
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
(function(n,t){"use strict";typeof exports=="object"?module.exports=t():typeof define=="function"&&define.amd?define("Presentation/Scripts/SecondLevelDomains",t):n.SecondLevelDomains=t(n)})(this,function(n){"use strict";var i=n&&n.SecondLevelDomains,t={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ","do":" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ","in":" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch "},has:function(n){var i=n.lastIndexOf("."),r,u;return i<=0||i>=n.length-1?!1:(r=n.lastIndexOf(".",i-1),r<=0||r>=i-1)?!1:(u=t.list[n.slice(i+1)],!u)?!1:u.indexOf(" "+n.slice(r+1,i)+" ")>=0},is:function(n){var i=n.lastIndexOf("."),u,r;return i<=0||i>=n.length-1?!1:(u=n.lastIndexOf(".",i-1),u>=0)?!1:(r=t.list[n.slice(i+1)],!r)?!1:r.indexOf(" "+n.slice(0,i)+" ")>=0},get:function(n){var i=n.lastIndexOf("."),r,u;return i<=0||i>=n.length-1?null:(r=n.lastIndexOf(".",i-1),r<=0||r>=i-1)?null:(u=t.list[n.slice(i+1)],!u)?null:u.indexOf(" "+n.slice(r+1,i)+" ")<0?null:n.slice(r+1)},noConflict:function(){return n.SecondLevelDomains===this&&(n.SecondLevelDomains=i),this}};return t});
/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.14.1
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
/*
The MIT License (MIT)

Copyright (c) 2011 Rodney Rehm

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/
/*
The MIT License (MIT)

Copyright (c) 2014 the UMD contributors.

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the ""Software""), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/

(function (n, t) { "use strict"; typeof exports == "object" ? module.exports = t(require("Presentation/Scripts/punycode"), require("Presentation/Scripts/IPv6"), require("Presentation/Scripts/SecondLevelDomains")) : typeof define == "function" && define.amd ? define("Presentation/Scripts/URI",["Presentation/Scripts/IPv6", "Presentation/Scripts/punycode", "Presentation/Scripts/SecondLevelDomains"], t) : n.URI = t(n.punycode, n.IPv6, n.SecondLevelDomains, n) })(this, function (n, t, i, r) { "use strict"; function u(n, t) { return (this instanceof u) ? (n === undefined && (n = typeof location != "undefined" ? location.href + "" : ""), this.href(n), t !== undefined) ? this.absoluteTo(t) : this : new u(n, t) } function s(n) { return n.replace(/([.*+?^=!:${}()|[\]\/\\])/g, "\\$1") } function l(n) { return n === undefined ? "Undefined" : String(Object.prototype.toString.call(n)).slice(8, -1) } function e(n) { return l(n) === "Array" } function g(n, t) { var u = {}, i, r; if (e(t)) for (i = 0, r = t.length; i < r; i++) u[t[i]] = !0; else u[t] = !0; for (i = 0, r = n.length; i < r; i++) u[n[i]] !== undefined && (n.splice(i, 1), r--, i--); return n } function c(n, t) { var i, r, u; if (e(t)) { for (i = 0, r = t.length; i < r; i++) if (!c(n, t[i])) return !1; return !0 } for (u = l(t), i = 0, r = n.length; i < r; i++) if (u === "RegExp") { if (typeof n[i] == "string" && n[i].match(t)) return !0 } else if (n[i] === t) return !0; return !1 } function w(n, t) { if (!e(n) || !e(t) || n.length !== t.length) return !1; n.sort(); t.sort(); for (var i = 0, r = n.length; i < r; i++) if (n[i] !== t[i]) return !1; return !0 } function nt(n) { return escape(n) } function a(n) { return encodeURIComponent(n).replace(/[!'()*]/g, nt).replace(/\*/g, "%2A") } function h(n) { return function (t, i) { return t === undefined ? this._parts[n] || "" : (this._parts[n] = t || null, this.build(!i), this) } } function b(n, t) { return function (i, r) { return i === undefined ? this._parts[n] || "" : (i !== null && (i = i + "", i.charAt(0) === t && (i = i.substring(1))), this._parts[n] = i, this.build(!r), this) } } var d = r && r.URI, f, o, v, y, p, k; u.version = "1.14.1"; f = u.prototype; o = Object.prototype.hasOwnProperty; u._parts = function () { return { protocol: null, username: null, password: null, hostname: null, urn: null, port: null, path: null, query: null, fragment: null, duplicateQueryParameters: u.duplicateQueryParameters, escapeQuerySpace: u.escapeQuerySpace } }; u.duplicateQueryParameters = !1; u.escapeQuerySpace = !0; u.protocol_expression = /^[a-z][a-z0-9.+-]*$/i; u.idn_expression = /[^a-z0-9\.-]/i; u.punycode_expression = /(xn--)/i; u.ip4_expression = /^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/; u.ip6_expression = /^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/; u.find_uri_expression = /\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?Â«Â»â€œâ€â€˜â€™]))/ig; u.findUri = { start: /\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi, end: /[\s\r\n]|$/, trim: /[`!()\[\]{};:'".,<>?Â«Â»â€œâ€â€žâ€˜â€™]+$/ }; u.defaultPorts = { http: "80", https: "443", ftp: "21", gopher: "70", ws: "80", wss: "443" }; u.invalid_hostname_characters = /[^a-zA-Z0-9\.-]/; u.domAttributes = { a: "href", blockquote: "cite", link: "href", base: "href", script: "src", form: "action", img: "src", area: "href", iframe: "src", embed: "src", source: "src", track: "src", input: "src", audio: "src", video: "src" }; u.getDomAttribute = function (n) { if (!n || !n.nodeName) return undefined; var t = n.nodeName.toLowerCase(); return t === "input" && n.type !== "image" ? undefined : u.domAttributes[t] }; u.encode = a; u.decode = decodeURIComponent; u.iso8859 = function () { u.encode = escape; u.decode = unescape }; u.unicode = function () { u.encode = a; u.decode = decodeURIComponent }; u.characters = { pathname: { encode: { expression: /%(24|26|2B|2C|3B|3D|3A|40)/ig, map: { "%24": "$", "%26": "&", "%2B": "+", "%2C": ",", "%3B": ";", "%3D": "=", "%3A": ":", "%40": "@" } }, decode: { expression: /[\/\?#]/g, map: { "/": "%2F", "?": "%3F", "#": "%23" } } }, reserved: { encode: { expression: /%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig, map: { "%3A": ":", "%2F": "/", "%3F": "?", "%23": "#", "%5B": "[", "%5D": "]", "%40": "@", "%21": "!", "%24": "$", "%26": "&", "%27": "'", "%28": "(", "%29": ")", "%2A": "*", "%2B": "+", "%2C": ",", "%3B": ";", "%3D": "=" } } } }; u.encodeQuery = function (n, t) { var i = u.encode(n + ""); return t === undefined && (t = u.escapeQuerySpace), t ? i.replace(/%20/g, "+") : i }; u.decodeQuery = function (n, t) { n += ""; t === undefined && (t = u.escapeQuerySpace); try { return u.decode(t ? n.replace(/\+/g, "%20") : n) } catch (i) { return n } }; u.recodePath = function (n) { for (var t = (n + "").split("/"), i = 0, r = t.length; i < r; i++) t[i] = u.encodePathSegment(u.decode(t[i])); return t.join("/") }; u.decodePath = function (n) { for (var t = (n + "").split("/"), i = 0, r = t.length; i < r; i++) t[i] = u.decodePathSegment(t[i]); return t.join("/") }; v = { encode: "encode", decode: "decode" }; p = function (n, t) { return function (i) { try { return u[t](i + "").replace(u.characters[n][t].expression, function (i) { return u.characters[n][t].map[i] }) } catch (r) { return i } } }; for (y in v) u[y + "PathSegment"] = p("pathname", v[y]); u.encodeReserved = p("reserved", "encode"); u.parse = function (n, t) { var i; return t || (t = {}), i = n.indexOf("#"), i > -1 && (t.fragment = n.substring(i + 1) || null, n = n.substring(0, i)), i = n.indexOf("?"), i > -1 && (t.query = n.substring(i + 1) || null, n = n.substring(0, i)), n.substring(0, 2) === "//" ? (t.protocol = null, n = n.substring(2), n = u.parseAuthority(n, t)) : (i = n.indexOf(":"), i > -1 && (t.protocol = n.substring(0, i) || null, t.protocol && !t.protocol.match(u.protocol_expression) ? t.protocol = undefined : n.substring(i + 1, i + 3) === "//" ? (n = n.substring(i + 3), n = u.parseAuthority(n, t)) : (n = n.substring(i + 1), t.urn = !0))), t.path = n, t }; u.parseHost = function (n, t) { var i = n.indexOf("/"), r, u; return i === -1 && (i = n.length), n.charAt(0) === "[" ? (r = n.indexOf("]"), t.hostname = n.substring(1, r) || null, t.port = n.substring(r + 2, i) || null, t.port === "/" && (t.port = null)) : n.indexOf(":") !== n.lastIndexOf(":") ? (t.hostname = n.substring(0, i) || null, t.port = null) : (u = n.substring(0, i).split(":"), t.hostname = u[0] || null, t.port = u[1] || null), t.hostname && n.substring(i).charAt(0) !== "/" && (i++, n = "/" + n), n.substring(i) || "/" }; u.parseAuthority = function (n, t) { return n = u.parseUserinfo(n, t), u.parseHost(n, t) }; u.parseUserinfo = function (n, t) { var r = n.indexOf("/"), f = n.lastIndexOf("@", r > -1 ? r : n.length - 1), i; return f > -1 && (r === -1 || f < r) ? (i = n.substring(0, f).split(":"), t.username = i[0] ? u.decode(i[0]) : null, i.shift(), t.password = i[0] ? u.decode(i.join(":")) : null, n = n.substring(f + 1)) : (t.username = null, t.password = null), n }; u.parseQuery = function (n, t) { var e; if (!n) return {}; if (n = n.replace(/&+/g, "&").replace(/^\?*&*|&+$/g, ""), !n) return {}; var i = {}, h = n.split("&"), c = h.length, f, r, s; for (e = 0; e < c; e++) f = h[e].split("="), r = u.decodeQuery(f.shift(), t), s = f.length ? u.decodeQuery(f.join("="), t) : null, o.call(i, r) ? (typeof i[r] == "string" && (i[r] = [i[r]]), i[r].push(s)) : i[r] = s; return i }; u.build = function (n) { var t = ""; return n.protocol && (t += n.protocol + ":"), !n.urn && (t || n.hostname) && (t += "//"), t += u.buildAuthority(n) || "", typeof n.path == "string" && (n.path.charAt(0) !== "/" && typeof n.hostname == "string" && (t += "/"), t += n.path), typeof n.query == "string" && n.query && (t += "?" + n.query), typeof n.fragment == "string" && n.fragment && (t += "#" + n.fragment), t }; u.buildHost = function (n) { var t = ""; if (n.hostname) t += u.ip6_expression.test(n.hostname) ? "[" + n.hostname + "]" : n.hostname; else return ""; return n.port && (t += ":" + n.port), t }; u.buildAuthority = function (n) { return u.buildUserinfo(n) + u.buildHost(n) }; u.buildUserinfo = function (n) { var t = ""; return n.username && (t += u.encode(n.username), n.password && (t += ":" + u.encode(n.password)), t += "@"), t }; u.buildQuery = function (n, t, i) { var s = "", h, r, f, c; for (r in n) if (o.call(n, r) && r) if (e(n[r])) for (h = {}, f = 0, c = n[r].length; f < c; f++) n[r][f] !== undefined && h[n[r][f] + ""] === undefined && (s += "&" + u.buildQueryParameter(r, n[r][f], i), t !== !0 && (h[n[r][f] + ""] = !0)); else n[r] !== undefined && (s += "&" + u.buildQueryParameter(r, n[r], i)); return s.substring(1) }; u.buildQueryParameter = function (n, t, i) { return u.encodeQuery(n, i) + (t !== null ? "=" + u.encodeQuery(t, i) : "") }; u.addQuery = function (n, t, i) { if (typeof t == "object") for (var r in t) o.call(t, r) && u.addQuery(n, r, t[r]); else if (typeof t == "string") { if (n[t] === undefined) { n[t] = i; return } typeof n[t] == "string" && (n[t] = [n[t]]); e(i) || (i = [i]); n[t] = (n[t] || []).concat(i) } else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter"); }; u.removeQuery = function (n, t, i) { var r, s, f; if (e(t)) for (r = 0, s = t.length; r < s; r++) n[t[r]] = undefined; else if (typeof t == "object") for (f in t) o.call(t, f) && u.removeQuery(n, f, t[f]); else if (typeof t == "string") i !== undefined ? n[t] === i ? n[t] = undefined : e(n[t]) && (n[t] = g(n[t], i)) : n[t] = undefined; else throw new TypeError("URI.addQuery() accepts an object, string as the first parameter"); }; u.hasQuery = function (n, t, i, r) { var f, s, h; if (typeof t == "object") { for (f in t) if (o.call(t, f) && !u.hasQuery(n, f, t[f])) return !1; return !0 } if (typeof t != "string") throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter"); switch (l(i)) { case "Undefined": return t in n; case "Boolean": return s = Boolean(e(n[t]) ? n[t].length : n[t]), i === s; case "Function": return !!i(n[t], t, n); case "Array": return e(n[t]) ? (h = r ? c : w, h(n[t], i)) : !1; case "RegExp": return e(n[t]) ? r ? c(n[t], i) : !1 : Boolean(n[t] && n[t].match(i)); case "Number": i = String(i); case "String": return e(n[t]) ? r ? c(n[t], i) : !1 : n[t] === i; default: throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter"); } }; u.commonPath = function (n, t) { for (var r = Math.min(n.length, t.length), i = 0; i < r; i++) if (n.charAt(i) !== t.charAt(i)) { i--; break } return i < 1 ? n.charAt(0) === t.charAt(0) && n.charAt(0) === "/" ? "/" : "" : ((n.charAt(i) !== "/" || t.charAt(i) !== "/") && (i = n.substring(0, i).lastIndexOf("/")), n.substring(0, i + 1)) }; u.withinString = function (n, t, i) { var s, r, h, f, o, c; i || (i = {}); var e = i.start || u.findUri.start, l = i.end || u.findUri.end, a = i.trim || u.findUri.trim; for (e.lastIndex = 0; ;) { if (s = e.exec(n), !s) break; (r = s.index, i.ignoreHtml && (h = n.slice(Math.max(r - 3, 0), r), h && /[a-z0-9-]=["']?$/i.test(h))) || (f = r + n.slice(r).search(l), o = n.slice(r, f).replace(a, ""), i.ignore && i.ignore.test(o)) || (f = r + o.length, c = t(o, r, f, n), n = n.slice(0, r) + c + n.slice(f), e.lastIndex = r + c.length) } return e.lastIndex = 0, n }; u.ensureValidHostname = function (t) { if (t.match(u.invalid_hostname_characters)) { if (!n) throw new TypeError('Hostname "' + t + '" contains characters other than [A-Z0-9.-] and Punycode.js is not available'); if (n.toASCII(t).match(u.invalid_hostname_characters)) throw new TypeError('Hostname "' + t + '" contains characters other than [A-Z0-9.-]'); } }; u.noConflict = function (n) { if (n) { var t = { URI: this.noConflict() }; return r.URITemplate && typeof r.URITemplate.noConflict == "function" && (t.URITemplate = r.URITemplate.noConflict()), r.IPv6 && typeof r.IPv6.noConflict == "function" && (t.IPv6 = r.IPv6.noConflict()), r.SecondLevelDomains && typeof r.SecondLevelDomains.noConflict == "function" && (t.SecondLevelDomains = r.SecondLevelDomains.noConflict()), t } return r.URI === this && (r.URI = d), this }; f.build = function (n) { return n === !0 ? this._deferred_build = !0 : (n === undefined || this._deferred_build) && (this._string = u.build(this._parts), this._deferred_build = !1), this }; f.clone = function () { return new u(this) }; f.valueOf = f.toString = function () { return this.build(!1)._string }; f.protocol = h("protocol"); f.username = h("username"); f.password = h("password"); f.hostname = h("hostname"); f.port = h("port"); f.query = b("query", "?"); f.fragment = b("fragment", "#"); f.search = function (n, t) { var i = this.query(n, t); return typeof i == "string" && i.length ? "?" + i : i }; f.hash = function (n, t) { var i = this.fragment(n, t); return typeof i == "string" && i.length ? "#" + i : i }; f.pathname = function (n, t) { if (n === undefined || n === !0) { var i = this._parts.path || (this._parts.hostname ? "/" : ""); return n ? u.decodePath(i) : i } return this._parts.path = n ? u.recodePath(n) : "/", this.build(!t), this }; f.path = f.pathname; f.href = function (n, t) { var i, r, f, s, e; if (n === undefined) return this.toString(); if (this._string = "", this._parts = u._parts(), r = n instanceof u, f = typeof n == "object" && (n.hostname || n.path || n.pathname), n.nodeName && (s = u.getDomAttribute(n), n = n[s] || "", f = !1), !r && f && n.pathname !== undefined && (n = n.toString()), typeof n == "string" || n instanceof String) this._parts = u.parse(String(n), this._parts); else if (r || f) { e = r ? n._parts : n; for (i in e) o.call(this._parts, i) && (this._parts[i] = e[i]) } else throw new TypeError("invalid input"); return this.build(!t), this }; f.is = function (n) { var r = !1, f = !1, e = !1, t = !1, s = !1, h = !1, c = !1, o = !this._parts.urn; this._parts.hostname && (o = !1, f = u.ip4_expression.test(this._parts.hostname), e = u.ip6_expression.test(this._parts.hostname), r = f || e, t = !r, s = t && i && i.has(this._parts.hostname), h = t && u.idn_expression.test(this._parts.hostname), c = t && u.punycode_expression.test(this._parts.hostname)); switch (n.toLowerCase()) { case "relative": return o; case "absolute": return !o; case "domain": case "name": return t; case "sld": return s; case "ip": return r; case "ip4": case "ipv4": case "inet4": return f; case "ip6": case "ipv6": case "inet6": return e; case "idn": return h; case "url": return !this._parts.urn; case "urn": return !!this._parts.urn; case "punycode": return c } return null }; var tt = f.protocol, it = f.port, rt = f.hostname; return f.protocol = function (n, t) { if (n !== undefined && n && (n = n.replace(/:(\/\/)?$/, ""), !n.match(u.protocol_expression))) throw new TypeError('Protocol "' + n + "\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]"); return tt.call(this, n, t) }, f.scheme = f.protocol, f.port = function (n, t) { if (this._parts.urn) return n === undefined ? "" : this; if (n !== undefined && (n === 0 && (n = null), n && (n += "", n.charAt(0) === ":" && (n = n.substring(1)), n.match(/[^0-9]/)))) throw new TypeError('Port "' + n + '" contains characters other than [0-9]'); return it.call(this, n, t) }, f.hostname = function (n, t) { if (this._parts.urn) return n === undefined ? "" : this; if (n !== undefined) { var i = {}; u.parseHost(n, i); n = i.hostname } return rt.call(this, n, t) }, f.host = function (n, t) { return this._parts.urn ? n === undefined ? "" : this : n === undefined ? this._parts.hostname ? u.buildHost(this._parts) : "" : (u.parseHost(n, this._parts), this.build(!t), this) }, f.authority = function (n, t) { return this._parts.urn ? n === undefined ? "" : this : n === undefined ? this._parts.hostname ? u.buildAuthority(this._parts) : "" : (u.parseAuthority(n, this._parts), this.build(!t), this) }, f.userinfo = function (n, t) { if (this._parts.urn) return n === undefined ? "" : this; if (n === undefined) { if (!this._parts.username) return ""; var i = u.buildUserinfo(this._parts); return i.substring(0, i.length - 1) } return n[n.length - 1] !== "@" && (n += "@"), u.parseUserinfo(n, this._parts), this.build(!t), this }, f.resource = function (n, t) { var i; return n === undefined ? this.path() + this.search() + this.hash() : (i = u.parse(n), this._parts.path = i.path, this._parts.query = i.query, this._parts.fragment = i.fragment, this.build(!t), this) }, f.subdomain = function (n, t) { var i; if (this._parts.urn) return n === undefined ? "" : this; if (n === undefined) return !this._parts.hostname || this.is("IP") ? "" : (i = this._parts.hostname.length - this.domain().length - 1, this._parts.hostname.substring(0, i) || ""); var r = this._parts.hostname.length - this.domain().length, f = this._parts.hostname.substring(0, r), e = new RegExp("^" + s(f)); return n && n.charAt(n.length - 1) !== "." && (n += "."), n && u.ensureValidHostname(n), this._parts.hostname = this._parts.hostname.replace(e, n), this.build(!t), this }, f.domain = function (n, t) { var r, i, f; if (this._parts.urn) return n === undefined ? "" : this; if (typeof n == "boolean" && (t = n, n = undefined), n === undefined) return !this._parts.hostname || this.is("IP") ? "" : (r = this._parts.hostname.match(/\./g), r && r.length < 2) ? this._parts.hostname : (i = this._parts.hostname.length - this.tld(t).length - 1, i = this._parts.hostname.lastIndexOf(".", i - 1) + 1, this._parts.hostname.substring(i) || ""); if (!n) throw new TypeError("cannot set domain empty"); return u.ensureValidHostname(n), !this._parts.hostname || this.is("IP") ? this._parts.hostname = n : (f = new RegExp(s(this.domain()) + "$"), this._parts.hostname = this._parts.hostname.replace(f, n)), this.build(!t), this }, f.tld = function (n, t) { var f, r, u; if (this._parts.urn) return n === undefined ? "" : this; if (typeof n == "boolean" && (t = n, n = undefined), n === undefined) return !this._parts.hostname || this.is("IP") ? "" : (f = this._parts.hostname.lastIndexOf("."), r = this._parts.hostname.substring(f + 1), t !== !0 && i && i.list[r.toLowerCase()]) ? i.get(this._parts.hostname) || r : r; if (n) if (n.match(/[^a-zA-Z0-9-]/)) if (i && i.is(n)) u = new RegExp(s(this.tld()) + "$"), this._parts.hostname = this._parts.hostname.replace(u, n); else throw new TypeError('TLD "' + n + '" contains characters other than [A-Z0-9]'); else if (!this._parts.hostname || this.is("IP")) throw new ReferenceError("cannot set TLD on non-domain host"); else u = new RegExp(s(this.tld()) + "$"), this._parts.hostname = this._parts.hostname.replace(u, n); else throw new TypeError("cannot set TLD empty"); return this.build(!t), this }, f.directory = function (n, t) { var r, i; if (this._parts.urn) return n === undefined ? "" : this; if (n === undefined || n === !0) return !this._parts.path && !this._parts.hostname ? "" : this._parts.path === "/" ? "/" : (r = this._parts.path.length - this.filename().length - 1, i = this._parts.path.substring(0, r) || (this._parts.hostname ? "/" : ""), n ? u.decodePath(i) : i); var f = this._parts.path.length - this.filename().length, e = this._parts.path.substring(0, f), o = new RegExp("^" + s(e)); return this.is("relative") || (n || (n = "/"), n.charAt(0) !== "/" && (n = "/" + n)), n && n.charAt(n.length - 1) !== "/" && (n += "/"), n = u.recodePath(n), this._parts.path = this._parts.path.replace(o, n), this.build(!t), this }, f.filename = function (n, t) { var f, i, r, e; return this._parts.urn ? n === undefined ? "" : this : n === undefined || n === !0 ? !this._parts.path || this._parts.path === "/" ? "" : (f = this._parts.path.lastIndexOf("/"), i = this._parts.path.substring(f + 1), n ? u.decodePathSegment(i) : i) : (r = !1, n.charAt(0) === "/" && (n = n.substring(1)), n.match(/\.?\//) && (r = !0), e = new RegExp(s(this.filename()) + "$"), n = u.recodePath(n), this._parts.path = this._parts.path.replace(e, n), r ? this.normalizePath(t) : this.build(!t), this) }, f.suffix = function (n, t) { var r, f, e, o, i, h; if (this._parts.urn) return n === undefined ? "" : this; if (n === undefined || n === !0) return !this._parts.path || this._parts.path === "/" ? "" : (r = this.filename(), f = r.lastIndexOf("."), f === -1) ? "" : (e = r.substring(f + 1), o = /^[a-z0-9%]+$/i.test(e) ? e : "", n ? u.decodePathSegment(o) : o); if (n.charAt(0) === "." && (n = n.substring(1)), i = this.suffix(), i) h = n ? new RegExp(s(i) + "$") : new RegExp(s("." + i) + "$"); else { if (!n) return this; this._parts.path += "." + u.recodePath(n) } return h && (n = u.recodePath(n), this._parts.path = this._parts.path.replace(h, n)), this.build(!t), this }, f.segment = function (n, t, i) { var f = this._parts.urn ? ":" : "/", o = this.path(), s = o.substring(0, 1) === "/", r = o.split(f), u, h; if (n !== undefined && typeof n != "number" && (i = t, t = n, n = undefined), n !== undefined && typeof n != "number") throw new Error('Bad segment "' + n + '", must be 0-based integer'); if (s && r.shift(), n < 0 && (n = Math.max(r.length + n, 0)), t === undefined) return n === undefined ? r : r[n]; if (n === null || r[n] === undefined) if (e(t)) for (r = [], u = 0, h = t.length; u < h; u++) (t[u].length || r.length && r[r.length - 1].length) && (r.length && !r[r.length - 1].length && r.pop(), r.push(t[u])); else (t || typeof t == "string") && (r[r.length - 1] === "" ? r[r.length - 1] = t : r.push(t)); else t ? r[n] = t : r.splice(n, 1); return s && r.unshift(""), this.path(r.join(f), i) }, f.segmentCoded = function (n, t, i) { var f, r, o; if (typeof n != "number" && (i = t, t = n, n = undefined), t === undefined) { if (f = this.segment(n, t, i), e(f)) for (r = 0, o = f.length; r < o; r++) f[r] = u.decode(f[r]); else f = f !== undefined ? u.decode(f) : undefined; return f } if (e(t)) for (r = 0, o = t.length; r < o; r++) t[r] = u.decode(t[r]); else t = typeof t == "string" || t instanceof String ? u.encode(t) : t; return this.segment(n, t, i) }, k = f.query, f.query = function (n, t) { if (n === !0) return u.parseQuery(this._parts.query, this._parts.escapeQuerySpace); if (typeof n == "function") { var i = u.parseQuery(this._parts.query, this._parts.escapeQuerySpace), r = n.call(this, i); return this._parts.query = u.buildQuery(r || i, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), this.build(!t), this } return n !== undefined && typeof n != "string" ? (this._parts.query = u.buildQuery(n, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), this.build(!t), this) : k.call(this, n, t) }, f.setQuery = function (n, t, i) { var f = u.parseQuery(this._parts.query, this._parts.escapeQuerySpace), r; if (typeof n == "string" || n instanceof String) f[n] = t !== undefined ? t : null; else if (typeof n == "object") for (r in n) o.call(n, r) && (f[r] = n[r]); else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter"); return this._parts.query = u.buildQuery(f, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), typeof n != "string" && (i = t), this.build(!i), this }, f.addQuery = function (n, t, i) { var r = u.parseQuery(this._parts.query, this._parts.escapeQuerySpace); return u.addQuery(r, n, t === undefined ? null : t), this._parts.query = u.buildQuery(r, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), typeof n != "string" && (i = t), this.build(!i), this }, f.removeQuery = function (n, t, i) { var r = u.parseQuery(this._parts.query, this._parts.escapeQuerySpace); return u.removeQuery(r, n, t), this._parts.query = u.buildQuery(r, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), typeof n != "string" && (i = t), this.build(!i), this }, f.hasQuery = function (n, t, i) { var r = u.parseQuery(this._parts.query, this._parts.escapeQuerySpace); return u.hasQuery(r, n, t, i) }, f.setSearch = f.setQuery, f.addSearch = f.addQuery, f.removeSearch = f.removeQuery, f.hasSearch = f.hasQuery, f.normalize = function () { return this._parts.urn ? this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build() : this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build() }, f.normalizeProtocol = function (n) { return typeof this._parts.protocol == "string" && (this._parts.protocol = this._parts.protocol.toLowerCase(), this.build(!n)), this }, f.normalizeHostname = function (i) { return this._parts.hostname && (this.is("IDN") && n ? this._parts.hostname = n.toASCII(this._parts.hostname) : this.is("IPv6") && t && (this._parts.hostname = t.best(this._parts.hostname)), this._parts.hostname = this._parts.hostname.toLowerCase(), this.build(!i)), this }, f.normalizePort = function (n) { return typeof this._parts.protocol == "string" && this._parts.port === u.defaultPorts[this._parts.protocol] && (this._parts.port = null, this.build(!n)), this }, f.normalizePath = function (n) { if (this._parts.urn || !this._parts.path || this._parts.path === "/") return this; var e, t = this._parts.path, r = "", i, f; for (t.charAt(0) !== "/" && (e = !0, t = "/" + t), t = t.replace(/(\/(\.\/)+)|(\/\.$)/g, "/").replace(/\/{2,}/g, "/"), e && (r = t.substring(1).match(/^(\.\.\/)+/) || "", r && (r = r[0])) ; ;) { if (i = t.indexOf("/.."), i === -1) break; else if (i === 0) { t = t.substring(3); continue } f = t.substring(0, i).lastIndexOf("/"); f === -1 && (f = i); t = t.substring(0, f) + t.substring(i + 3) } return e && this.is("relative") && (t = r + t.substring(1)), t = u.recodePath(t), this._parts.path = t, this.build(!n), this }, f.normalizePathname = f.normalizePath, f.normalizeQuery = function (n) { return typeof this._parts.query == "string" && (this._parts.query.length ? this.query(u.parseQuery(this._parts.query, this._parts.escapeQuerySpace)) : this._parts.query = null, this.build(!n)), this }, f.normalizeFragment = function (n) { return this._parts.fragment || (this._parts.fragment = null, this.build(!n)), this }, f.normalizeSearch = f.normalizeQuery, f.normalizeHash = f.normalizeFragment, f.iso8859 = function () { var n = u.encode, t = u.decode; return u.encode = escape, u.decode = decodeURIComponent, this.normalize(), u.encode = n, u.decode = t, this }, f.unicode = function () { var n = u.encode, t = u.decode; return u.encode = a, u.decode = unescape, this.normalize(), u.encode = n, u.decode = t, this }, f.readable = function () { var t = this.clone(), i, r, f; if (t.username("").password("").normalize(), i = "", t._parts.protocol && (i += t._parts.protocol + "://"), t._parts.hostname && (t.is("punycode") && n ? (i += n.toUnicode(t._parts.hostname), t._parts.port && (i += ":" + t._parts.port)) : i += t.host()), t._parts.hostname && t._parts.path && t._parts.path.charAt(0) !== "/" && (i += "/"), i += t.path(!0), t._parts.query) { r = ""; for (var e = 0, o = t._parts.query.split("&"), s = o.length; e < s; e++) f = (o[e] || "").split("="), r += "&" + u.decodeQuery(f[0], this._parts.escapeQuerySpace).replace(/&/g, "%26"), f[1] !== undefined && (r += "=" + u.decodeQuery(f[1], this._parts.escapeQuerySpace).replace(/&/g, "%26")); i += "?" + r.substring(1) } return i + u.decodeQuery(t.hash(), !0) }, f.absoluteTo = function (n) { var t = this.clone(), e = ["protocol", "username", "password", "hostname", "port"], i, r, f; if (this._parts.urn) throw new Error("URNs do not have any generally defined hierarchical components"); if (n instanceof u || (n = new u(n)), t._parts.protocol || (t._parts.protocol = n._parts.protocol), this._parts.hostname) return t; for (r = 0; f = e[r]; r++) t._parts[f] = n._parts[f]; return t._parts.path ? t._parts.path.substring(-2) === ".." && (t._parts.path += "/") : (t._parts.path = n._parts.path, t._parts.query || (t._parts.query = n._parts.query)), t.path().charAt(0) !== "/" && (i = n.directory(), t._parts.path = (i ? i + "/" : "") + t._parts.path, t.normalizePath()), t.build(), t }, f.relativeTo = function (n) { var i = this.clone().normalize(), t, r, f, e, o, s; if (i._parts.urn) throw new Error("URNs do not have any generally defined hierarchical components"); if (n = new u(n).normalize(), t = i._parts, r = n._parts, e = i.path(), o = n.path(), e.charAt(0) !== "/") throw new Error("URI is already relative"); if (o.charAt(0) !== "/") throw new Error("Cannot calculate a URI relative to another relative URI"); if ((t.protocol === r.protocol && (t.protocol = null), t.username !== r.username || t.password !== r.password) || t.protocol !== null || t.username !== null || t.password !== null) return i.build(); if (t.hostname === r.hostname && t.port === r.port) t.hostname = null, t.port = null; else return i.build(); return e === o ? (t.path = "", i.build()) : (f = u.commonPath(i.path(), n.path()), !f) ? i.build() : (s = r.path.substring(f.length).replace(/[^\/]*$/, "").replace(/.*?\//g, "../"), t.path = s + t.path.substring(f.length), i.build()) }, f.equals = function (n) { var r = this.clone(), f = new u(n), i = {}, s = {}, l = {}, h, c, t; if (r.normalize(), f.normalize(), r.toString() === f.toString()) return !0; if ((h = r.query(), c = f.query(), r.query(""), f.query(""), r.toString() !== f.toString()) || h.length !== c.length) return !1; i = u.parseQuery(h, this._parts.escapeQuerySpace); s = u.parseQuery(c, this._parts.escapeQuerySpace); for (t in i) if (o.call(i, t)) { if (e(i[t])) { if (!w(i[t], s[t])) return !1 } else if (i[t] !== s[t]) return !1; l[t] = !0 } for (t in s) if (o.call(s, t) && !l[t]) return !1; return !0 }, f.duplicateQueryParameters = function (n) { return this._parts.duplicateQueryParameters = !!n, this }, f.escapeQuerySpace = function (n) { return this._parts.escapeQuerySpace = !!n, this }, u });
// Copyright (C) Microsoft Corporation. All rights reserved.
define("TFS/WorkItemTracking/Contracts",["require","exports"],function(n,t){"use strict";var i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k;(function(n){n[n.Asc=1]="Asc";n[n.Desc=2]="Desc"})(t.CommentSortOrder||(t.CommentSortOrder={}));i=t.CommentSortOrder,function(n){n[n.String=0]="String";n[n.Integer=1]="Integer";n[n.DateTime=2]="DateTime";n[n.PlainText=3]="PlainText";n[n.Html=4]="Html";n[n.TreePath=5]="TreePath";n[n.History=6]="History";n[n.Double=7]="Double";n[n.Guid=8]="Guid";n[n.Boolean=9]="Boolean"}(t.FieldType||(t.FieldType={}));r=t.FieldType,function(n){n[n.None=0]="None";n[n.ExtensionFields=1]="ExtensionFields"}(t.GetFieldsExpand||(t.GetFieldsExpand={}));u=t.GetFieldsExpand,function(n){n[n.Create=0]="Create";n[n.Remove=1]="Remove"}(t.LinkChangeType||(t.LinkChangeType={}));f=t.LinkChangeType,function(n){n[n.WorkItems=0]="WorkItems";n[n.LinksOneHopMustContain=1]="LinksOneHopMustContain";n[n.LinksOneHopMayContain=2]="LinksOneHopMayContain";n[n.LinksOneHopDoesNotContain=3]="LinksOneHopDoesNotContain";n[n.LinksRecursiveMustContain=4]="LinksRecursiveMustContain";n[n.LinksRecursiveMayContain=5]="LinksRecursiveMayContain";n[n.LinksRecursiveDoesNotContain=6]="LinksRecursiveDoesNotContain"}(t.LinkQueryMode||(t.LinkQueryMode={}));e=t.LinkQueryMode,function(n){n[n.NONE=0]="NONE";n[n.AND=1]="AND";n[n.OR=2]="OR"}(t.LogicalOperation||(t.LogicalOperation={}));o=t.LogicalOperation,function(n){n[n.Import=0]="Import";n[n.Validate=1]="Validate"}(t.ProvisioningActionType||(t.ProvisioningActionType={}));s=t.ProvisioningActionType,function(n){n[n.None=0]="None";n[n.Wiql=1]="Wiql";n[n.Clauses=2]="Clauses";n[n.All=3]="All"}(t.QueryExpand||(t.QueryExpand={}));h=t.QueryExpand,function(n){n[n.Doing=1]="Doing";n[n.Done=2]="Done";n[n.Followed=3]="Followed";n[n.RecentActivity=4]="RecentActivity"}(t.QueryOption||(t.QueryOption={}));c=t.QueryOption,function(n){n[n.WorkItem=1]="WorkItem";n[n.WorkItemLink=2]="WorkItemLink"}(t.QueryResultType||(t.QueryResultType={}));l=t.QueryResultType,function(n){n[n.Flat=1]="Flat";n[n.Tree=2]="Tree";n[n.OneHop=3]="OneHop"}(t.QueryType||(t.QueryType={}));a=t.QueryType,function(n){n[n.None=0]="None";n[n.Fields=1]="Fields"}(t.ReportingRevisionsExpand||(t.ReportingRevisionsExpand={}));v=t.ReportingRevisionsExpand,function(n){n[n.WorkItemType=0]="WorkItemType";n[n.GlobalWorkflow=1]="GlobalWorkflow"}(t.TemplateType||(t.TemplateType={}));y=t.TemplateType,function(n){n[n.Area=0]="Area";n[n.Iteration=1]="Iteration"}(t.TreeNodeStructureType||(t.TreeNodeStructureType={}));p=t.TreeNodeStructureType,function(n){n[n.Areas=0]="Areas";n[n.Iterations=1]="Iterations"}(t.TreeStructureGroup||(t.TreeStructureGroup={}));w=t.TreeStructureGroup,function(n){n[n.Fail=1]="Fail";n[n.Omit=2]="Omit"}(t.WorkItemErrorPolicy||(t.WorkItemErrorPolicy={}));b=t.WorkItemErrorPolicy,function(n){n[n.None=0]="None";n[n.Relations=1]="Relations";n[n.Fields=2]="Fields";n[n.Links=3]="Links";n[n.All=4]="All"}(t.WorkItemExpand||(t.WorkItemExpand={}));k=t.WorkItemExpand;t.TypeInfo={AccountWorkWorkItemModel:{},CommentSortOrder:{enumValues:{asc:1,desc:2}},FieldType:{enumValues:{string:0,integer:1,dateTime:2,plainText:3,html:4,treePath:5,history:6,double:7,guid:8,boolean:9}},GetFieldsExpand:{enumValues:{none:0,extensionFields:1}},LinkChangeType:{enumValues:{create:0,remove:1}},LinkQueryMode:{enumValues:{workItems:0,linksOneHopMustContain:1,linksOneHopMayContain:2,linksOneHopDoesNotContain:3,linksRecursiveMustContain:4,linksRecursiveMayContain:5,linksRecursiveDoesNotContain:6}},LogicalOperation:{enumValues:{nONE:0,aND:1,oR:2}},ProvisioningActionType:{enumValues:{"import":0,validate:1}},QueryExpand:{enumValues:{none:0,wiql:1,clauses:2,all:3}},QueryHierarchyItem:{},QueryOption:{enumValues:{doing:1,done:2,followed:3,recentActivity:4}},QueryResultType:{enumValues:{workItem:1,workItemLink:2}},QueryType:{enumValues:{flat:1,tree:2,oneHop:3}},ReportingRevisionsExpand:{enumValues:{none:0,fields:1}},ReportingWorkItemLink:{},TemplateType:{enumValues:{workItemType:0,globalWorkflow:1}},TreeNodeStructureType:{enumValues:{area:0,iteration:1}},TreeStructureGroup:{enumValues:{areas:0,iterations:1}},WorkItemClassificationNode:{},WorkItemComment:{},WorkItemComments:{},WorkItemErrorPolicy:{enumValues:{fail:1,omit:2}},WorkItemExpand:{enumValues:{none:0,relations:1,fields:2,links:3,all:4}},WorkItemField:{},WorkItemHistory:{},WorkItemQueryClause:{},WorkItemQueryResult:{},WorkItemTypeTemplateUpdateModel:{},WorkItemUpdate:{}};t.TypeInfo.AccountWorkWorkItemModel.fields={changedDate:{isDate:!0}};t.TypeInfo.QueryHierarchyItem.fields={children:{isArray:!0,typeInfo:t.TypeInfo.QueryHierarchyItem},clauses:{typeInfo:t.TypeInfo.WorkItemQueryClause},createdDate:{isDate:!0},filterOptions:{enumType:t.TypeInfo.LinkQueryMode},lastModifiedDate:{isDate:!0},linkClauses:{typeInfo:t.TypeInfo.WorkItemQueryClause},queryType:{enumType:t.TypeInfo.QueryType},sourceClauses:{typeInfo:t.TypeInfo.WorkItemQueryClause},targetClauses:{typeInfo:t.TypeInfo.WorkItemQueryClause}};t.TypeInfo.ReportingWorkItemLink.fields={changedDate:{isDate:!0},changedOperation:{enumType:t.TypeInfo.LinkChangeType}};t.TypeInfo.WorkItemClassificationNode.fields={children:{isArray:!0,typeInfo:t.TypeInfo.WorkItemClassificationNode},structureType:{enumType:t.TypeInfo.TreeNodeStructureType}};t.TypeInfo.WorkItemComment.fields={revisedDate:{isDate:!0}};t.TypeInfo.WorkItemComments.fields={comments:{isArray:!0,typeInfo:t.TypeInfo.WorkItemComment}};t.TypeInfo.WorkItemField.fields={type:{enumType:t.TypeInfo.FieldType}};t.TypeInfo.WorkItemHistory.fields={revisedDate:{isDate:!0}};t.TypeInfo.WorkItemQueryClause.fields={clauses:{isArray:!0,typeInfo:t.TypeInfo.WorkItemQueryClause},logicalOperator:{enumType:t.TypeInfo.LogicalOperation}};t.TypeInfo.WorkItemQueryResult.fields={asOf:{isDate:!0},queryResultType:{enumType:t.TypeInfo.QueryResultType},queryType:{enumType:t.TypeInfo.QueryType}};t.TypeInfo.WorkItemTypeTemplateUpdateModel.fields={actionType:{enumType:t.TypeInfo.ProvisioningActionType},templateType:{enumType:t.TypeInfo.TemplateType}};t.TypeInfo.WorkItemUpdate.fields={revisedDate:{isDate:!0}}});
define("TFS/WorkItemTracking/RestClient",["require","exports","TFS/WorkItemTracking/Contracts","VSS/Service","VSS/WebApi/RestClient","VSS/WebApi/Constants"],function(n,t,i,r,u,f){"use strict";function k(n){return window.VSS&&window.VSS.VssSDKRestVersion&&w[window.VSS.VssSDKRestVersion]?r.getClient(w[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):r.getClient(c,undefined,undefined,undefined,n)}var l=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.updateWorkItemTypeDefinition=function(n,t){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"8637ac8b-5eb6-4f90-b3f7-4f2ff576a459",resource:"workItemTypeTemplate",routeTemplate:"{project}/_apis/{area}/{resource}/{type}",requestType:i.TypeInfo.WorkItemTypeTemplateUpdateModel,routeValues:{project:t},apiVersion:this.workItemTypeTemplateApiVersion,data:n})},t.prototype.exportWorkItemTypeDefinition=function(n,t,i){var r={exportGlobalLists:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"8637ac8b-5eb6-4f90-b3f7-4f2ff576a459",resource:"workItemTypeTemplate",routeTemplate:"{project}/_apis/{area}/{resource}/{type}",routeValues:{project:n,type:t},queryParams:r,apiVersion:this.workItemTypeTemplateApiVersion})},t.prototype.getDependentFields=function(n,t,i){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"bd293ce5-3d25-4192-8e67-e8092e879efb",resource:"workItemTypesField",routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}",routeValues:{project:n,type:t,field:i},apiVersion:this.workItemTypesFieldApiVersion})},t.prototype.getWorkItemTypes=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"7c8d7a76-4a09-43e8-b5df-bd792f4ac6aa",resource:"workItemTypes",routeTemplate:"{project}/_apis/{area}/{resource}/{type}",responseIsCollection:!0,routeValues:{project:n},apiVersion:this.workItemTypesApiVersion})},t.prototype.getWorkItemType=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"7c8d7a76-4a09-43e8-b5df-bd792f4ac6aa",resource:"workItemTypes",routeTemplate:"{project}/_apis/{area}/{resource}/{type}",routeValues:{project:n,type:t},apiVersion:this.workItemTypesApiVersion})},t.prototype.getWorkItemTypeCategory=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"9b9f5734-36c8-415e-ba67-f83b45c31408",resource:"workItemTypeCategories",routeTemplate:"{project}/_apis/{area}/{resource}/{category}",routeValues:{project:n,category:t},apiVersion:this.workItemTypeCategoriesApiVersion})},t.prototype.getWorkItemTypeCategories=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"9b9f5734-36c8-415e-ba67-f83b45c31408",resource:"workItemTypeCategories",routeTemplate:"{project}/_apis/{area}/{resource}/{category}",responseIsCollection:!0,routeValues:{project:n},apiVersion:this.workItemTypeCategoriesApiVersion})},t.prototype.updateWorkItemTemplate=function(n,t,i,r,u){var f={validateOnly:r,bypassRules:u};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"62d3d110-0047-428c-ad3c-4fe872c91c74",resource:"workItems",routeTemplate:"{project}/_apis/{area}/{resource}/${type}",routeValues:{project:t,type:i},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:f,apiVersion:this.workItemsApiVersion,data:n})},t.prototype.getWorkItemTemplate=function(n,t,i,r,u){var f={fields:i,asOf:r,$expand:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"62d3d110-0047-428c-ad3c-4fe872c91c74",resource:"workItems",routeTemplate:"{project}/_apis/{area}/{resource}/${type}",routeValues:{project:n,type:t},queryParams:f,apiVersion:this.workItemsApiVersion})},t.prototype.createWorkItem=function(n,t,i,r,u){var f={validateOnly:r,bypassRules:u};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"62d3d110-0047-428c-ad3c-4fe872c91c74",resource:"workItems",routeTemplate:"{project}/_apis/{area}/{resource}/${type}",routeValues:{project:t,type:i},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:f,apiVersion:this.workItemsApiVersion,data:n})},t.prototype.updateWorkItem=function(n,t,i,r){var u={validateOnly:i,bypassRules:r};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:t},customHeaders:{"Content-Type":"application/json-patch+json"},queryParams:u,apiVersion:this.workItemsApiVersion_72c7ddf8,data:n})},t.prototype.getWorkItems=function(n,t,i,r,u){var f={ids:n&&n.join(","),fields:t&&t.join(","),asOf:i,$expand:r,errorPolicy:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",responseIsCollection:!0,queryParams:f,apiVersion:this.workItemsApiVersion_72c7ddf8})},t.prototype.getWorkItem=function(n,t,i,r){var u={fields:t&&t.join(","),asOf:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:u,apiVersion:this.workItemsApiVersion_72c7ddf8})},t.prototype.deleteWorkItem=function(n,t){var i={destroy:t};return this._beginRequest({httpMethod:"DELETE",area:"wit",locationId:"72c7ddf8-2cdc-4f60-90cd-ab71c14a399b",resource:"workItems",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:i,apiVersion:this.workItemsApiVersion_72c7ddf8})},t.prototype.getRelationTypes=function(){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f5d33bc9-5b49-4a3c-a9bd-f3cd46dd2165",resource:"workItemRelationTypes",routeTemplate:"_apis/{area}/{resource}/{relation}",responseIsCollection:!0,apiVersion:this.workItemRelationTypesApiVersion})},t.prototype.getRelationType=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f5d33bc9-5b49-4a3c-a9bd-f3cd46dd2165",resource:"workItemRelationTypes",routeTemplate:"_apis/{area}/{resource}/{relation}",routeValues:{relation:n},apiVersion:this.workItemRelationTypesApiVersion})},t.prototype.queryById=function(n,t,r,u){var f={timePrecision:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a02355f5-5f8a-4671-8e32-369d23aac83d",resource:"wiql",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{id}",responseType:i.TypeInfo.WorkItemQueryResult,routeValues:{project:t,team:r,id:n},queryParams:f,apiVersion:this.wiqlApiVersion})},t.prototype.queryByWiql=function(n,t,r,u,f){var e={timePrecision:u,$top:f};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"1a9c53f7-f243-4447-b110-35ef023636e4",resource:"wiql",routeTemplate:"{project}/{team}/_apis/{area}/{resource}",responseType:i.TypeInfo.WorkItemQueryResult,routeValues:{project:t,team:r},queryParams:e,apiVersion:this.wiqlApiVersion_1a9c53f7,data:n})},t.prototype.getUpdates=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:this.updatesApiVersion})},t.prototype.getUpdate=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6570bf97-d02c-4a91-8d93-3abe9895b1a9",resource:"updates",routeTemplate:"_apis/{area}/workItems/{id}/updates/{updateNumber}",responseType:i.TypeInfo.WorkItemUpdate,routeValues:{id:n,updateNumber:t},apiVersion:this.updatesApiVersion})},t.prototype.evaluateRulesOnField=function(n){return this._beginRequest({httpMethod:"POST",httpResponseType:"html",area:"wit",locationId:"1a3a1536-dca6-4509-b9c3-dd9bb2981506",resource:"ruleEngine",routeTemplate:"_apis/{area}/${resource}",apiVersion:this.ruleEngineApiVersion,data:n})},t.prototype.getRevisions=function(n,t,i,r){var u={$top:t,$skip:i,$expand:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:this.revisionsApiVersion})},t.prototype.getRevision=function(n,t,i){var r={$expand:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a00c85a5-80fa-4565-99c3-bcd2181434bb",resource:"revisions",routeTemplate:"_apis/{area}/workItems/{id}/revisions/{revisionNumber}",routeValues:{id:n,revisionNumber:t},queryParams:r,apiVersion:this.revisionsApiVersion})},t.prototype.updateQuery=function(n,t,r,u){var f={$undeleteDescendants:u};return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"a67d190c-c41f-424b-814d-0e906f659301",resource:"queries",routeTemplate:"{project}/_apis/{area}/{resource}/{*query}",requestType:i.TypeInfo.QueryHierarchyItem,responseType:i.TypeInfo.QueryHierarchyItem,routeValues:{project:t,query:r},queryParams:f,apiVersion:this.queriesApiVersion,data:n})},t.prototype.getQuery=function(n,t,r,u,f){var e={$expand:r,$depth:u,$includeDeleted:f};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a67d190c-c41f-424b-814d-0e906f659301",resource:"queries",routeTemplate:"{project}/_apis/{area}/{resource}/{*query}",responseType:i.TypeInfo.QueryHierarchyItem,routeValues:{project:n,query:t},queryParams:e,apiVersion:this.queriesApiVersion})},t.prototype.getQueries=function(n,t,r,u){var f={$expand:t,$depth:r,$includeDeleted:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a67d190c-c41f-424b-814d-0e906f659301",resource:"queries",routeTemplate:"{project}/_apis/{area}/{resource}/{*query}",responseType:i.TypeInfo.QueryHierarchyItem,responseIsCollection:!0,routeValues:{project:n},queryParams:f,apiVersion:this.queriesApiVersion})},t.prototype.deleteQuery=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"a67d190c-c41f-424b-814d-0e906f659301",resource:"queries",routeTemplate:"{project}/_apis/{area}/{resource}/{*query}",routeValues:{project:n,query:t},apiVersion:this.queriesApiVersion})},t.prototype.createQuery=function(n,t,r){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"a67d190c-c41f-424b-814d-0e906f659301",resource:"queries",routeTemplate:"{project}/_apis/{area}/{resource}/{*query}",requestType:i.TypeInfo.QueryHierarchyItem,responseType:i.TypeInfo.QueryHierarchyItem,routeValues:{project:t,query:r},apiVersion:this.queriesApiVersion,data:n})},t.prototype.getFields=function(n){var t={$expand:n};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"_apis/{area}/{resource}/{field}",responseType:i.TypeInfo.WorkItemField,responseIsCollection:!0,queryParams:t,apiVersion:this.fieldsApiVersion})},t.prototype.getField=function(n){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b51fd764-e5c2-4b9b-aaf7-3395cf4bdd94",resource:"fields",routeTemplate:"_apis/{area}/{resource}/{field}",responseType:i.TypeInfo.WorkItemField,routeValues:{field:n},apiVersion:this.fieldsApiVersion})},t.prototype.updateClassificationNode=function(n,t,r,u){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"5a172953-1b41-49d3-840a-33f79c3ce89f",resource:"classificationNodes",routeTemplate:"{project}/_apis/{area}/{resource}/{structureGroup}/{*path}",requestType:i.TypeInfo.WorkItemClassificationNode,responseType:i.TypeInfo.WorkItemClassificationNode,routeValues:{project:t,structureGroup:i.TreeStructureGroup[r],path:u},apiVersion:this.classificationNodesApiVersion,data:n})},t.prototype.getClassificationNode=function(n,t,r,u){var f={$depth:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"5a172953-1b41-49d3-840a-33f79c3ce89f",resource:"classificationNodes",routeTemplate:"{project}/_apis/{area}/{resource}/{structureGroup}/{*path}",responseType:i.TypeInfo.WorkItemClassificationNode,routeValues:{project:n,structureGroup:i.TreeStructureGroup[t],path:r},queryParams:f,apiVersion:this.classificationNodesApiVersion})},t.prototype.deleteClassificationNode=function(n,t,r,u){var f={$reclassifyId:u};return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"5a172953-1b41-49d3-840a-33f79c3ce89f",resource:"classificationNodes",routeTemplate:"{project}/_apis/{area}/{resource}/{structureGroup}/{*path}",routeValues:{project:n,structureGroup:i.TreeStructureGroup[t],path:r},queryParams:f,apiVersion:this.classificationNodesApiVersion})},t.prototype.createOrUpdateClassificationNode=function(n,t,r,u){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"5a172953-1b41-49d3-840a-33f79c3ce89f",resource:"classificationNodes",routeTemplate:"{project}/_apis/{area}/{resource}/{structureGroup}/{*path}",requestType:i.TypeInfo.WorkItemClassificationNode,responseType:i.TypeInfo.WorkItemClassificationNode,routeValues:{project:t,structureGroup:i.TreeStructureGroup[r],path:u},apiVersion:this.classificationNodesApiVersion,data:n})},t.prototype.getRootNodes=function(n,t){var r={$depth:t};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"a70579d1-f53a-48ee-a5be-7be8659023b9",resource:"classificationNodes",routeTemplate:"{project}/_apis/{area}/{resource}",responseType:i.TypeInfo.WorkItemClassificationNode,responseIsCollection:!0,routeValues:{project:n},queryParams:r,apiVersion:this.classificationNodesApiVersion_a70579d1})},t.prototype.getAttachmentZip=function(n,t){var i={fileName:t};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/zip",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:i,apiVersion:this.attachmentsApiVersion})},t.prototype.getAttachmentContent=function(n,t){var i={fileName:t};return this._beginRequest({httpMethod:"GET",httpResponseType:"application/octet-stream",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",routeValues:{id:n},queryParams:i,apiVersion:this.attachmentsApiVersion})},t.prototype.createAttachment=function(n,t,i){var r={fileName:t,uploadType:i};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"e07b5fa4-1499-494d-a496-64b860fd64ff",resource:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",customHeaders:{"Content-Type":"application/octet-stream"},queryParams:r,apiVersion:this.attachmentsApiVersion,data:n,isRawData:!0})},t.prototype.getAccountMyWorkData=function(n){var t={$queryOption:n};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"def3d688-ddf5-4096-9024-69beea15cdbd",resource:"accountMyWork",routeTemplate:"_apis/work/{resource}",responseType:i.TypeInfo.AccountWorkWorkItemModel,responseIsCollection:!0,queryParams:t,apiVersion:this.accountMyWorkApiVersion})},t.serviceInstanceId=f.ServiceInstanceTypes.TFS,t}(u.VssHttpClient),o,e,s,h,c,a,v,y,p,b,w;t.CommonMethods2To3_1=l;o=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.restoreWorkItem=function(n,t,i){return this._beginRequest({httpMethod:"PATCH",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:i,id:t},apiVersion:this.recyclebinApiVersion,data:n})},t.prototype.getDeletedWorkItems=function(n,t){var i={ids:t&&t.join(",")};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",responseIsCollection:!0,routeValues:{project:n},queryParams:i,apiVersion:this.recyclebinApiVersion})},t.prototype.getDeletedWorkItem=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:t,id:n},apiVersion:this.recyclebinApiVersion})},t.prototype.destroyWorkItem=function(n,t){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"b70d8d39-926c-465e-b927-b1bf0e5ca0e0",resource:"recyclebin",routeTemplate:"{project}/_apis/{area}/{resource}/{id}",routeValues:{project:t,id:n},apiVersion:this.recyclebinApiVersion})},t}(l);t.CommonMethods2_1To3_1=o;e=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.readReportingRevisionsPost=function(n,t,i,r,u){var f={continuationToken:i,startDateTime:r,$expand:u};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"f828fe59-dd87-495d-a17c-7a8d6211ca6c",resource:"workItemRevisions",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:t},queryParams:f,apiVersion:this.workItemRevisionsApiVersion,data:n})},t.prototype.readReportingRevisionsGet=function(n,t,i,r,u,f,e,o,s,h){var c={fields:t&&t.join(","),types:i&&i.join(","),continuationToken:r,startDateTime:u,includeIdentityRef:f,includeDeleted:e,includeTagRef:o,includeLatestOnly:s,$expand:h};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f828fe59-dd87-495d-a17c-7a8d6211ca6c",resource:"workItemRevisions",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:n},queryParams:c,apiVersion:this.workItemRevisionsApiVersion})},t.prototype.getReportingLinks=function(n,t,i,r){var u={types:t&&t.join(","),continuationToken:i,startDateTime:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b5b5b6d0-0308-40a1-b3f4-b9bb3c66878f",resource:"workItemLinks",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:n},queryParams:u,apiVersion:this.workItemLinksApiVersion})},t}(o);t.CommonMethods2_2To3_1=e;s=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.replaceTemplate=function(n,t,i,r){return this._beginRequest({httpMethod:"PUT",area:"wit",locationId:"fb10264a-8836-48a0-8033-1b0ccd2748d5",resource:"templates",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{templateId}",routeValues:{project:t,team:i,templateId:r},apiVersion:this.templatesApiVersion,data:n})},t.prototype.getTemplate=function(n,t,i){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"fb10264a-8836-48a0-8033-1b0ccd2748d5",resource:"templates",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{templateId}",routeValues:{project:n,team:t,templateId:i},apiVersion:this.templatesApiVersion})},t.prototype.deleteTemplate=function(n,t,i){return this._beginRequest({httpMethod:"DELETE",httpResponseType:"html",area:"wit",locationId:"fb10264a-8836-48a0-8033-1b0ccd2748d5",resource:"templates",routeTemplate:"{project}/{team}/_apis/{area}/{resource}/{templateId}",routeValues:{project:n,team:t,templateId:i},apiVersion:this.templatesApiVersion})},t.prototype.getTemplates=function(n,t,i){var r={workitemtypename:i};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"6a90345f-a676-4969-afce-8e163e1d5642",resource:"templates",routeTemplate:"{project}/{team}/_apis/{area}/{resource}",responseIsCollection:!0,routeValues:{project:n,team:t},queryParams:r,apiVersion:this.templatesApiVersion_6a90345f})},t.prototype.createTemplate=function(n,t,i){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"6a90345f-a676-4969-afce-8e163e1d5642",resource:"templates",routeTemplate:"{project}/{team}/_apis/{area}/{resource}",routeValues:{project:t,team:i},apiVersion:this.templatesApiVersion_6a90345f,data:n})},t.prototype.getComments=function(n,t,r,u){var f={fromRevision:t,$top:r,order:u};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComments,routeValues:{id:n},queryParams:f,apiVersion:this.commentsApiVersion})},t.prototype.getComment=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"19335ae7-22f7-4308-93d8-261f9384b7cf",resource:"comments",routeTemplate:"_apis/{area}/workItems/{id}/comments/{revision}",responseType:i.TypeInfo.WorkItemComment,routeValues:{id:n,revision:t},apiVersion:this.commentsApiVersion})},t}(e);t.CommonMethods3To3_1=s;h=function(n){function t(t,i){n.call(this,t,i);this.commentsApiVersion=this.recyclebinApiVersion=this.ruleEngineApiVersion=this.templatesApiVersion=this.templatesApiVersion_6a90345f=this.workItemTypesFieldApiVersion=this.workItemTypeTemplateApiVersion="3.1-preview.1";this.accountMyWorkApiVersion=this.attachmentsApiVersion=this.classificationNodesApiVersion=this.classificationNodesApiVersion_a70579d1=this.fieldsApiVersion=this.queriesApiVersion=this.revisionsApiVersion=this.updatesApiVersion=this.wiqlApiVersion=this.wiqlApiVersion_1a9c53f7=this.workItemLinksApiVersion=this.workItemRelationTypesApiVersion=this.workItemRevisionsApiVersion=this.workItemsApiVersion=this.workItemsApiVersion_72c7ddf8=this.workItemTypeCategoriesApiVersion=this.workItemTypesApiVersion="3.1-preview.2"}return __extends(t,n),t}(s);t.WorkItemTrackingHttpClient3_1=h;c=function(n){function t(t,i){n.call(this,t,i);this.accountMyWorkApiVersion=this.attachmentsApiVersion=this.classificationNodesApiVersion=this.classificationNodesApiVersion_a70579d1=this.fieldsApiVersion=this.queriesApiVersion=this.revisionsApiVersion=this.ruleEngineApiVersion=this.updatesApiVersion=this.wiqlApiVersion=this.wiqlApiVersion_1a9c53f7=this.workItemLinksApiVersion=this.workItemRelationTypesApiVersion=this.workItemRevisionsApiVersion=this.workItemsApiVersion=this.workItemsApiVersion_72c7ddf8=this.workItemTypeCategoriesApiVersion=this.workItemTypesApiVersion=this.workItemTypesFieldApiVersion=this.workItemTypeTemplateApiVersion="3.0";this.commentsApiVersion=this.recyclebinApiVersion=this.templatesApiVersion=this.templatesApiVersion_6a90345f="3.0-preview.1"}return __extends(t,n),t.prototype.getHistory=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"3.0"})},t.prototype.getHistoryById=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,routeValues:{id:n,revisionNumber:t},apiVersion:"3.0"})},t}(s);t.WorkItemTrackingHttpClient3=c;a=function(n){function t(t,i){n.call(this,t,i);this.accountMyWorkApiVersion=this.attachmentsApiVersion=this.classificationNodesApiVersion=this.classificationNodesApiVersion_a70579d1=this.fieldsApiVersion=this.queriesApiVersion=this.revisionsApiVersion=this.ruleEngineApiVersion=this.updatesApiVersion=this.wiqlApiVersion=this.wiqlApiVersion_1a9c53f7=this.workItemLinksApiVersion=this.workItemRelationTypesApiVersion=this.workItemRevisionsApiVersion=this.workItemsApiVersion=this.workItemsApiVersion_72c7ddf8=this.workItemTypeCategoriesApiVersion=this.workItemTypesApiVersion=this.workItemTypesFieldApiVersion=this.workItemTypeTemplateApiVersion="2.3";this.recyclebinApiVersion="2.3-preview.1"}return __extends(t,n),t.prototype.getHistory=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.3"})},t.prototype.getHistoryById=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,routeValues:{id:n,revisionNumber:t},apiVersion:"2.3"})},t}(e);t.WorkItemTrackingHttpClient2_3=a;v=function(n){function t(t,i){n.call(this,t,i);this.accountMyWorkApiVersion=this.attachmentsApiVersion=this.classificationNodesApiVersion=this.classificationNodesApiVersion_a70579d1=this.fieldsApiVersion=this.queriesApiVersion=this.revisionsApiVersion=this.ruleEngineApiVersion=this.updatesApiVersion=this.wiqlApiVersion=this.wiqlApiVersion_1a9c53f7=this.workItemLinksApiVersion=this.workItemRelationTypesApiVersion=this.workItemRevisionsApiVersion=this.workItemsApiVersion=this.workItemsApiVersion_72c7ddf8=this.workItemTypeCategoriesApiVersion=this.workItemTypesApiVersion=this.workItemTypesFieldApiVersion=this.workItemTypeTemplateApiVersion="2.2";this.recyclebinApiVersion="2.2-preview.1"}return __extends(t,n),t.prototype.getHistory=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.2"})},t.prototype.getHistoryById=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,routeValues:{id:n,revisionNumber:t},apiVersion:"2.2"})},t}(e);t.WorkItemTrackingHttpClient2_2=v;y=function(n){function t(t,i){n.call(this,t,i);this.accountMyWorkApiVersion=this.attachmentsApiVersion=this.classificationNodesApiVersion=this.classificationNodesApiVersion_a70579d1=this.fieldsApiVersion=this.queriesApiVersion=this.revisionsApiVersion=this.ruleEngineApiVersion=this.updatesApiVersion=this.wiqlApiVersion=this.wiqlApiVersion_1a9c53f7=this.workItemRelationTypesApiVersion=this.workItemsApiVersion=this.workItemsApiVersion_72c7ddf8=this.workItemTypeCategoriesApiVersion=this.workItemTypesApiVersion=this.workItemTypesFieldApiVersion=this.workItemTypeTemplateApiVersion="2.1";this.recyclebinApiVersion="2.1-preview.1"}return __extends(t,n),t.prototype.getHistory=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.1"})},t.prototype.getHistoryById=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,routeValues:{id:n,revisionNumber:t},apiVersion:"2.1"})},t.prototype.getReportingLinks=function(n,t,i,r){var u={types:t&&t.join(","),watermark:i,startDateTime:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b5b5b6d0-0308-40a1-b3f4-b9bb3c66878f",resource:"workItemLinks",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:n},queryParams:u,apiVersion:"2.1"})},t.prototype.readReportingRevisionsGet=function(n,t,i,r,u,f,e){var o={includeDeleted:t,fields:i&&i.join(","),types:r&&r.join(","),watermark:u,startDateTime:f,includeIdentityRef:e};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f828fe59-dd87-495d-a17c-7a8d6211ca6c",resource:"workItemRevisions",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:n},queryParams:o,apiVersion:"2.1"})},t.prototype.readReportingRevisionsPost=function(n,t,i,r){var u={watermark:i,startDateTime:r};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"f828fe59-dd87-495d-a17c-7a8d6211ca6c",resource:"workItemRevisions",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:t},queryParams:u,apiVersion:"2.1",data:n})},t}(o);t.WorkItemTrackingHttpClient2_1=y;p=function(n){function t(t,i){n.call(this,t,i);this.accountMyWorkApiVersion=this.attachmentsApiVersion=this.classificationNodesApiVersion=this.classificationNodesApiVersion_a70579d1=this.fieldsApiVersion=this.queriesApiVersion=this.revisionsApiVersion=this.ruleEngineApiVersion=this.updatesApiVersion=this.wiqlApiVersion=this.wiqlApiVersion_1a9c53f7=this.workItemRelationTypesApiVersion=this.workItemsApiVersion=this.workItemsApiVersion_72c7ddf8=this.workItemTypeCategoriesApiVersion=this.workItemTypesApiVersion=this.workItemTypesFieldApiVersion=this.workItemTypeTemplateApiVersion="2.0"}return __extends(t,n),t.prototype.getHistory=function(n,t,r){var u={$top:t,$skip:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,responseIsCollection:!0,routeValues:{id:n},queryParams:u,apiVersion:"2.0"})},t.prototype.getHistoryById=function(n,t){return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f74eba29-47a1-4152-9381-84040aced527",resource:"history",routeTemplate:"_apis/{area}/workItems/{id}/history/{revisionNumber}",responseType:i.TypeInfo.WorkItemHistory,routeValues:{id:n,revisionNumber:t},apiVersion:"2.0"})},t.prototype.getReportingLinks=function(n,t,i,r){var u={types:t&&t.join(","),watermark:i,startDateTime:r};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"b5b5b6d0-0308-40a1-b3f4-b9bb3c66878f",resource:"workItemLinks",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:n},queryParams:u,apiVersion:"2.0"})},t.prototype.readReportingRevisionsGet=function(n,t,i,r,u,f,e){var o={includeDeleted:t,fields:i&&i.join(","),types:r&&r.join(","),watermark:u,startDateTime:f,includeIdentityRef:e};return this._beginRequest({httpMethod:"GET",area:"wit",locationId:"f828fe59-dd87-495d-a17c-7a8d6211ca6c",resource:"workItemRevisions",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:n},queryParams:o,apiVersion:"2.0"})},t.prototype.readReportingRevisionsPost=function(n,t,i,r){var u={watermark:i,startDateTime:r};return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"f828fe59-dd87-495d-a17c-7a8d6211ca6c",resource:"workItemRevisions",routeTemplate:"{project}/_apis/{area}/reporting/{resource}",routeValues:{project:t},queryParams:u,apiVersion:"2.0",data:n})},t}(l);t.WorkItemTrackingHttpClient2=p;b=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t}(h);t.WorkItemTrackingHttpClient=b;w={"3.1":h,"3.0":c,"2.3":a,"2.2":v,"2.1":y,"2.0":p};t.getClient=k});
define("Mention/Scripts/TFS.Mention.WorkItems",["require","exports","q","VSS/Ajax","VSS/Diag","Mention/Scripts/TFS.Mention","Mention/Scripts/TFS.Mention.Autocomplete.JQueryAutocomplete","Mention/Scripts/TFS.Mention.FeatureAvailability","Mention/Scripts/TFS.Mention.Helpers","VSS/Service","Mention/Scripts/TFS.Social.Telemetry","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/URI","VSS/Utils/Array","VSS/Utils/String","VSS/VSS","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","TFS/WorkItemTracking/RestClient"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b){var ht="\\",ut,g,nt,ot,tt,k,d,it,ft,rt,st,et;(function(n){n.ACTION_WORKITEM_OPEN="open-work-item";n.ACTION_WORKITEM_OPEN_IN_NEW_TAB="open-work-item-in-new-tab";n.EDITOR_CAPTION="{0} {1}";n.EDITOR_WINDOW_TITLE="{0}: {1}"})(ut=t.WorkItemConstants||(t.WorkItemConstants={})),function(n){n.AUTOCOMPLETE_BULLET="mention-autocomp-wit-bullet";n.AUTOCOMPLETE_ID="mention-autocomp-wit-id";n.AUTOCOMPLETE_TITLE="mention-autocomp-wit-title"}(g=t.CssClasses||(t.CssClasses={}));nt=function(){function n(){}return n.searchHighlightedWorkItem=function(t,i,r){r===void 0&&(r=n.DEFAULT_HIGHLIGHT_SUBSTITUTION_PATTERN);var f=i,u=t.split(/\s+/).filter(function(n){return!!n}).map(function(n){return y.htmlEncode(n)}),e=s.searchString(i.id.toString(),u,s.SearchBehavior.Prefix,r),o=s.searchString(y.htmlEncode(i.title),u,s.SearchBehavior.Contains,r),h=s.searchString(i.workItemType,u,s.SearchBehavior.Contains,r),c=!0;return u.forEach(function(n){var t=e.found[n]||o.found[n]||h.found[n];t||(c=!1)}),c&&(f={id:e.highlightedSource,title:o.highlightedSource,workItemType:h.highlightedSource}),f},n.DEFAULT_HIGHLIGHT_SUBSTITUTION_PATTERN='<span class="'+e.CssClasses.HIGHLIGHT+'">$&<\/span>',n}();t.Helpers=nt;ot=function(n){function t(i){var i=i||{};i.isMenuWidthOverridable&&$.extend(i,{menuWidth:t.MENU_WIDTH});n.call(this,i)}return __extends(t,n),t.prototype.getWorkItemProvider=function(){return this._workItemProvider||(this._workItemProvider=new d({wiql:this._options.wiql})),this._workItemProvider},t.prototype.prefetch=function(){this.getWorkItemProvider()},t.prototype.getPluginName=function(){return"WorkItemAutocompleteProvider"},t.prototype.canOpen=function(n){var t=this.mentionPattern().exec(n.textBeforeSelection),i;return t?(i=t.index,t[1]&&(i+=t[1].length),{start:i,end:n.textBeforeSelection.length}):null},t.prototype.getSuggestions=function(n){var f=$.Deferred(),i={},e=t._numberMentionPattern.exec(n.textBeforeSelection),r,u;return e?(i.searchTerm=e[2],r=this.getWorkItemProvider().searchById(e[2])):(u=this.mentionPattern().exec(n.textBeforeSelection),u?(i.searchTerm=u[2],r=this.getWorkItemProvider().search(u[2])):(i.searchTerm="",r=this.getWorkItemProvider().search(""))),r.done(function(n){i.suggestionsCount=""+n.length;f.resolve({result:n,telemetry:i})}).fail(function(n){f.reject(n)}),f},t.prototype.renderSuggestion=function(n,t){var r=$("<li>").appendTo(n),i=$("<a>").appendTo(r);$("<span>&nbsp;<\/span>").addClass(g.AUTOCOMPLETE_BULLET).css("background-color",t.original.color).appendTo(i);var f=k.getWorkItemTypeWithIdString(t.highlighted),e=$("<span>").addClass(g.AUTOCOMPLETE_ID).html(f),o=$("<span>").addClass(g.AUTOCOMPLETE_TITLE).html(t.highlighted.title),u=$(k.getWorkItemSummary(e[0].outerHTML,o[0].outerHTML));return u.appendTo(i),i.attr("title",u.text()),r},t.prototype.afterRender=function(n){$("a",n).each(function(n,t){t.clientWidth>=t.scrollWidth&&$(t).removeAttr("title")})},t.prototype.getReplacementText=function(n,i,r){var u=this.mentionPattern().exec(n.textBeforeSelection),e=u.index+u[1].length+1,o=n.textBeforeSelection.substr(0,e),f=i.original.id.toString();return t._afterMentionPattern.exec(n.textAfterSelection)||(f+=" "),r?{textBeforeSelection:n.textBeforeSelection,textInSelection:"",textAfterSelection:n.textAfterSelection}:{textBeforeSelection:o+f,textInSelection:"",textAfterSelection:n.textAfterSelection}},t.prototype.getReplacementHtml=function(n){var i=s.getMainTfsContext(),o=i.getPermalinkUrl("edit","workitems",{parameters:n.original.id,collectionId:i.navigation.collection.instanceId,projectId:i.navigation.projectId}),t=new a(o),r,u,e;return t.host()||(r=s.getWindowLocation(),t.host(r.host),t.protocol(r.protocol)),u=k.getWorkItemTypeWithIdString(n.original),e=k.getWorkItemSummary(u,n.original.title),f.createHtmlMention(t.href(),e)},t.prototype.getProviderName=function(){return"WorkItemAutocompleteProvider"},t.prototype.mentionPattern=function(){return this.isOpen()?t._multipleTermsMentionPattern:t._singleTermMentionPattern},t._numberMentionPattern=new RegExp("("+f.Constants.PATTERN_WORD_START_SEPARATOR+")#([0-9]*)$","i"),t._singleTermMentionPattern=new RegExp("("+f.Constants.PATTERN_WORD_START_SEPARATOR+")#(([^"+f.Constants.PATTERN_WORD_SEPARATOR+"]*)$)","i"),t._multipleTermsMentionPattern=new RegExp("("+f.Constants.PATTERN_WORD_START_SEPARATOR+")#(([^"+f.Constants.PATTERN_WORD_SEPARATOR+"]+"+ht+"s?){0,5}$)","i"),t._afterMentionPattern=new RegExp("^("+f.Constants.PATTERN_WORD_END_SEPARATOR+")","i"),t.MENU_WIDTH=450,t}(e.JQueryAutocompletePlugin);t.WorkItemAutocompleteProvider=ot;tt=function(){function n(){}return n.getDefault=function(){return n._instance||(n._instance=new n),n._instance},n.prototype.getArtifactType=function(){return"WorkItem"},n.prototype.renderWorkItem=function(n,t){var i=$("<span>").addClass("mention-widget-workitem-typeid").text(k.getWorkItemTypeWithIdString(n))[0].outerHTML,r=$("<span>").addClass("mention-widget-workitem-title").text(n.title)[0].outerHTML,u=k.getWorkItemSummary(i,r);return $("<a>").css({"border-left-color":n.color}).addClass("mention-widget-workitem").addClass("mention-link").attr("href",t).html(u)[0].outerHTML},n.prototype.renderMention=function(n,t){var r=this,i=$.Deferred();return d.getInstance().getById(n.ArtifactId).then(function(u){var f,e;if(u===null){f=$("<span>").text(n.Text)[0].outerHTML;e=t(f);i.reject(f);return}var o=s.getMainTfsContext(),h=o.getPermalinkUrl("edit","workitems",{parameters:n.ArtifactId,collectionId:o.navigation.collection.instanceId,projectId:o.navigation.projectId}),l=r.renderWorkItem(u,h),e=t(l);e.click(function(){return c.EventLogging.publishWorkItemsClickEvent({workItem:JSON.stringify(u)}),et.showWorkItem(u.id),!1});i.resolve(e)}),i.promise()},n.prototype.getTelemetryMentionSummary=function(n){return this.getArtifactType()+":"+n.ArtifactId},n}();t.WorkItemMentionsRenderingProvider=tt;k=function(){function n(){}return n.getWorkItemTypeWithIdString=function(n){return y.format(ut.EDITOR_CAPTION,n.workItemType,n.id)},n.getWorkItemSummary=function(n,t){return y.format(ut.EDITOR_WINDOW_TITLE,n,t)},n}();d=function(){function n(t){var u=(new Date).getTime(),i,r;this._client=h.getClient(b.WorkItemTrackingHttpClient,s.getMainTfsContext().contextData);i=$.Deferred();r=$.Deferred();$.when(i,r).done(function(n,t){c.EventLogging.publishWorkItemsInitializeEvent({getMyAssignedWorkItemsDurationInMsec:(n-u).toString(),getWorkItemColorsProviderDurationInMsec:(t-u).toString()})});this._wiql=t!=null&&t.wiql!=null?t.wiql:n.DEFAULT_WIQL;this._myWorkItems=this.getMyWorkItems();this._myWorkItems.then(function(){i.resolve((new Date).getTime())});it.getInstance()._witColorsProviderPromise.done(function(){r.resolve((new Date).getTime())})}return n.getInstance=function(){return n._instance||(n._instance=new n),n._instance},n.prototype.getArtifactType=function(){return"WorkItem"},n.prototype.getById=function(n){var i=parseInt(n),t=this.getWorkItemPromises([i]);if(t.length===1)return t[0];throw new Error("Expected GetWorkItemsByIds to return 1 promise.");},n.prototype.searchById=function(n){var t=$.Deferred(),r=parseInt(n),u=[],f=[],e=function(n,t){v.contains(f,n.id)||(f.push(n.id),u.push({original:n,highlighted:t}))},o=function(t){var i;t!==null&&(isNaN(r)?(i={id:t.id,color:t.color,workItemType:t.workItemType,title:y.htmlEncode(t.title)},e(t,i)):(i=nt.searchHighlightedWorkItem(n,t),i!==t&&e(t,i)))},s=this.getWorkItems([r]);return i.all([s,this._myWorkItems]).then(function(n){n.forEach(function(n){n.forEach(function(n){o(n)})});t.resolve(u)},function(){t.reject.apply(t,arguments)}),t.promise()},n.prototype.search=function(n){var t=$.Deferred();return this._myWorkItems.then(function(i){var r=[];i.forEach(function(t){var i=nt.searchHighlightedWorkItem(n,t);i!==t&&r.push({original:t,highlighted:i})});t.resolve(r)},function(){t.reject.apply(t,arguments)}),t.promise()},n.isValidWorkItemId=function(n){return n>=1&&n<=2147483647},n.prototype.getMyWorkItems=function(){return this._getWiqlResults(this._wiql,50)},n.prototype.getWorkItems=function(n){if(n.length===0)throw new Error("ids must contain elements.");return i.all(this.getWorkItemPromises(n))},n.prototype.getWorkItemPromises=function(t){return t.map(function(t){if(!n.isValidWorkItemId(t)){var r=i.defer();return r.resolve(null),r.promise}return it.getInstance().cache.getArtifactPromise(t)})},n.prototype._getWiqlResults=function(n,t){var u=this,r=i.defer(),f="SELECT ["+w.CoreFieldRefNames.Id+"] FROM WorkItems WHERE "+n;return this._client.queryByWiql({query:f},undefined,undefined,undefined,t).then(function(n){var t=$.map(n.workItems,function(n){return n.id});t.length===0?r.resolve([]):u.getWorkItems(t).then(function(n){r.resolve(n)},function(){r.reject.apply(r,arguments)})},function(n){r.reject(n)}),r.promise},n.QUEUE_WAIT_MSEC=10,n.MAX_BATCH_SIZE=50,n.DEFAULT_WIQL="(["+w.CoreFieldRefNames.AuthorizedAs+"] = @me\n                        AND ["+w.CoreFieldRefNames.AuthorizedDate+"] >= @today - 30)\n                    OR (["+w.CoreFieldRefNames.CreatedBy+"] = @me\n                        AND ["+w.CoreFieldRefNames.CreatedDate+"] >= @today - 30)\n                    OR (["+w.CoreFieldRefNames.AssignedTo+"] = @me\n                        AND ["+w.CoreFieldRefNames.AuthorizedDate+"] >= @today - 30)\n                    ORDER BY ["+w.CoreFieldRefNames.AuthorizedDate+"] DESC",n}();t.WorkItemProvider=d;it=function(){function n(){var n=this;this.cache=new f.ArtifactsCache(function(t){return n._loadWorkItems(t)},d.QUEUE_WAIT_MSEC,d.MAX_BATCH_SIZE);this._client=h.getClient(b.WorkItemTrackingHttpClient,s.getMainTfsContext().contextData);this._witColorsProviderPromise=ft.getWorkItemColorsProvider()}return n.getInstance=function(){return n._instance||(n._instance=new n),n._instance},n.prototype._loadWorkItems=function(n){var f=this,e=[w.CoreFieldRefNames.Id,w.CoreFieldRefNames.WorkItemType,w.CoreFieldRefNames.Title],t={},r={};return n.forEach(function(n){t[n]=i.defer();r[n]=t[n].promise}),this._witColorsProviderPromise.done(function(i){f._client.getWorkItems(n,e).then(function(r){var o=[];for(var h in r){var f=r[h].fields,s=f[w.CoreFieldRefNames.WorkItemType],e={id:f[w.CoreFieldRefNames.Id],workItemType:s,title:f[w.CoreFieldRefNames.Title],color:i.getWorkItemTypeColor(s)};o.push(e.id);t[e.id].resolve(e)}n.forEach(function(n){if(o.indexOf(n)===-1){var i="WorkItem #"+n+" not returned from server.";u.logWarning(i);t[n].resolve(null)}})},function(i){p.handleError(i);n.forEach(function(n){t[n].reject(i)})})}),r},n}();t.WorkItemProviderCache=it;ft=function(){function n(){}return n.getWorkItemColorsProvider=function(){var i=s.getMainTfsContext(),t=$.Deferred(),n=l.ColorsProvider.getDefault(),u;return n.isWorkItemColorsDefined()||!i.navigation.projectId?t.resolve(n):(u=i.getActionUrl("getProcessSettings","processConfiguration",{area:"api"}),r.issueRequest(u,{}).then(function(i){var r=$.map(i.workItemColors,function(n){return{WorkItemTypeName:n.name,PrimaryColor:n.primary,SecondaryColor:n.secondary}});n=new l.ColorsProvider(r);t.resolve(n)},function(i){p.handleError(i);t.resolve(n)})),t},n}();t.WorkItemColorsProviderFactory=ft;rt=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.getDefault=function(){return t._instance||(t._instance=new t),t._instance},t.prototype.parseFromText=function(n){for(var r=[],u=new RegExp("("+f.Constants.PATTERN_WORD_START_SEPARATOR+")#([0-9]{1,10})(?=("+f.Constants.PATTERN_WORD_END_SEPARATOR+"))","ig"),t;t=u.exec(n);){var e=t.index,o=u.lastIndex,i=t[1];i&&i.length&&(e+=i.length);r.push({start:e,end:o,id:t[2]})}return r},t.prototype.parseFromUrl=function(n){var r=new a(n),u=r.hostname(),f=s.getWindowLocation().hostname,t,e,i;if(u&&f&&u.toUpperCase()===f.toUpperCase()){for(t=r.segment();t.shift()!=="_permalink";)if(!t.length)return;if(e=t.shift(),i=+t.pop(),e==="_workitems"&&i>0)return{workItemId:i}}},t.prototype.parseFromHtml=function(n,t){var i=this,r=n.find('a[href*="_permalink"]');r.each(function(n,r){var u=$(r),f=i.parseFromUrl(u.attr("href"));f&&t(u,f)})},t.prototype.getArtifactType=function(){return"WorkItem"},t}(f.ArtifactMentionParser);t.WorkItemsMentionParser=rt;st=function(){function n(){}return n.processHtml=function(n){rt.getDefault().parseFromHtml(n,function(n,t){var i={ArtifactId:t.workItemId.toString(),ArtifactType:"",Text:"",Type:f.TextPartType.Mention};tt.getDefault().renderMention(i,function(n){return $("<span>").append(n)}).done(function(t){n.replaceWith(t)})})},n}();t.WorkItemMentionProcessor=st;o.isMentionWorkItemsPluginFeatureEnabled()&&(f.MentionsRenderer.getDefault().registerProvider(tt.getDefault),f.MentionProcessor.getDefault().registerParser(rt.getDefault)),function(n){function t(n){if(s.hasParentWindow()){var t=window.parent.TfsMentionWorkItemHelpers;t&&t.showWorkItem(n)}else p.requireModules(["WorkItemTracking/SharedScripts/WorkItemDialogShim"]).spread(function(t){t.showWorkItemById(n)})}n.showWorkItem=t}(et=t.TfsMentionWorkItemHelpers||(t.TfsMentionWorkItemHelpers={}));window.TfsMentionWorkItemHelpers=et});
define("Mention/Scripts/TFS.Mention.People",["require","exports","q","Mention/Scripts/TFS.Mention","Mention/Scripts/TFS.Mention.FeatureAvailability","Mention/Scripts/TFS.Mention.Helpers","Mention/Scripts/TFS.Social.Telemetry","Presentation/Scripts/URI","VSS/Context","VSS/Controls","VSS/Identities/Picker/Controls","VSS/Identities/Picker/Services","VSS/Service","VSS/Utils/UI","VSS/Utils/String"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){var nt="\\",d={Source:!0,IMS:!0},g={User:!0},rt,p,tt,w,b,it,k;(function(n){n[n.Everyone=0]="Everyone"})(t.PeopleGroup||(t.PeopleGroup={}));rt=t.PeopleGroup;p=function(){function n(){}return n.matchAndRemoveWordStartSeparator=function(n,t){var i=n.exec(t),u,r;return i?(u=i[1]&&i[1].length?i[1].length:0,r=[i[0].substring(u)],r=r.concat(i.slice(2)),r.index=i.index+u,r.input=i.input,r):null},n.getMentionTrigger=function(t,i){var u,e=0,f,o,r;for(n.REGEX_NAME_TRIGGER_HEAD.lastIndex=0;u=n.REGEX_NAME_TRIGGER_HEAD.exec(t);)e=u.index;return(i?(n.REGEX_NAME_TRIGGER_WHEN_OPEN.lastIndex=e,u=n.matchAndRemoveWordStartSeparator(n.REGEX_NAME_TRIGGER_WHEN_OPEN,t)):(n.REGEX_NAME_TRIGGER_WHEN_CLOSED.lastIndex=e,u=n.matchAndRemoveWordStartSeparator(n.REGEX_NAME_TRIGGER_WHEN_CLOSED,t)),u&&(n.REGEX_MENTION.lastIndex=0,f=n.REGEX_MENTION.exec(u[0]),o=f&&f.index===0&&f[0].length<u[0].length,!o))?(r=u[1]||"",n.REGEX_CONSECUTIVE_WHITESPACES.exec(r))?null:(r.indexOf("<")===0&&(r=r.substring(1)),r.indexOf(">")===r.length-1&&(r=r.substring(0,r.length-1)),{prefix:r,index:u.index,match:u[0]}):null},n.getIdentityId=function(n){return s.getPageContext().webAccessConfiguration.isHosted?n.signInAddress:n.scopeName+"\\"+n.samAccountName},n.PATTERN_WORD_START_SEPARATOR="(?:^|[\\s\\(])",n.PATTERN_WORD_END_SEPARATOR="(?:$|[\\s\\)])",n.PATTERN_NAME_ONE_WORD="[^\\s]+",n.PATTERN_NAME_MULTI_WORD=n.PATTERN_NAME_ONE_WORD+"("+nt+"s+[^"+nt+"s]*){0,4}",n.REGEX_NAME_TRIGGER_HEAD=new RegExp("("+n.PATTERN_WORD_START_SEPARATOR+")@","g"),n.REGEX_NAME_TRIGGER_WHEN_OPEN=new RegExp("("+n.PATTERN_WORD_START_SEPARATOR+")@("+n.PATTERN_NAME_MULTI_WORD+")?$","g"),n.REGEX_NAME_TRIGGER_WHEN_CLOSED=new RegExp("("+n.PATTERN_WORD_START_SEPARATOR+")@("+n.PATTERN_NAME_ONE_WORD+")?$","g"),n.REGEX_MENTION=new RegExp("@<(\\S{1,256}?)>","g"),n.REGEX_CONSECUTIVE_WHITESPACES=/\s\s/,n}();t.Helpers=p;tt=function(){function n(n){this._options=n||{}}return n.prototype.initialize=function(){var n=this,t={operationScope:d,identityType:g,onItemSelect:f.delegate(this,function(t){n._selectIdentity({},t)}),onHide:function(t){t||(t=$.Event("identityPickerHide"));n._inputText&&n._inputText.textBeforeSelection!=="@"&&n.close(t,n._inputText)},showMru:!0,alignment:{positioningElement:this._options.positioningElement}};this._identityPickerDropdown=h.create(c.IdentityPickerDropdownControl,this._getMenuContainer(),t);this._identityPickerDropdown.hide()},n.prototype.getPluginName=function(){return"PersonAutocompleteProvider"},n.prototype.canOpen=function(n){var t=p.getMentionTrigger(n.textBeforeSelection,this._isOpen);return!t?null:{start:t.index,end:n.textBeforeSelection.length}},n.prototype.open=function(n,t){this._inputText=t;this._isOpen=!0},n.prototype.suggest=function(n,t){var i=this,r=$.Deferred(),o=(new Date).getTime();this._inputText=t;var u=p.getMentionTrigger(t.textBeforeSelection,!0),e=function(n){i._isOpen!==i._identityPickerDropdown.isVisible()&&(i._isOpen?i._identityPickerDropdown.show():i._identityPickerDropdown.hide());r.resolve({result:void 0,telemetry:{searchTerm:u.prefix,suggestionsCount:""+n.length,durationInMSec:""+((new Date).getTime()-o)}})},s=function(n){r.reject(n)};return u.prefix?this._identityPickerDropdown.getIdentities(u.prefix).then(f.delegate(this,e),f.delegate(this,s)):this._identityPickerDropdown.showAllMruIdentities().then(f.delegate(this,e)),r},n.prototype.close=function(n,t){this._isOpen&&(this._inputText=t,this._isOpen=!1,this._identityPickerDropdown.hide(),this._options.close&&this._options.close(n,this._inputText))},n.prototype.handle=function(n){if(n.type==="blur")this._identityPickerDropdown.isVisible()&&!$(".identity-picker-dropdown:hover",this._getMenuContainer()).length&&this.close(n,this._inputText);else if(n.type==="keydown"&&!f.eventHasPrintableCharacter(n)){if(n.keyCode===v.KeyCode.ENTER||n.keyCode===v.KeyCode.TAB){var t=this._identityPickerDropdown.getSelectedItem();if(t)return this._selectIdentity(n,t),!1}return this._identityPickerDropdown.handleKeyEvent(n)}},n.prototype.dispose=function(){this._identityPickerDropdown.dispose()},n.prototype.prefetch=function(){this._identityPickerDropdown&&this._identityPickerDropdown.load()},n.prototype._selectIdentity=function(n,t){var e=this._identityPickerDropdown.getSelectedIndex(),o={suggestion:JSON.stringify(t),selectionIndex:""+e},s=p.getMentionTrigger(this._inputText.textBeforeSelection,!0),i=p.getIdentityId(t),u={textBeforeSelection:this._inputText.textBeforeSelection.substr(0,s.index)+"@<"+i+"> ",textInSelection:"",textAfterSelection:this._inputText.textAfterSelection},f;this._inputText=u;this._options.select&&(f={getPlainText:function(){return u},getHtml:function(){return r.createHtmlMention("mailto:"+i,"@"+t.displayName)}},this._options.select(n,f,o));this.close(n,this._inputText);this._identityPickerDropdown.addIdentitiesToMru([t.localId]);this._identityPickerDropdown.hide()},n.prototype._getMenuContainer=function(){return this._options.menuContainer?this._options.menuContainer():$(document.body)},n}();t.PersonAutocompleteProvider=tt;w=function(){function n(){}return n.getDefault=function(){return n._instance||(n._instance=new n),n._instance},n.prototype.getArtifactType=function(){return"Person"},n.prototype.renderPerson=function(t,i){var u=this,r=$.Deferred();return k.getInstance().getByUniqueId(t).then(function(t){var e,f;t?(e=$("<span>").addClass(n.CSS_CLASS_PERSON_MENTION).text("@"+t.displayName).attr("title",p.getIdentityId(t)),k.getInstance().isIdentityCurrentUser(t)&&e.addClass(n.CSS_CLASS_PERSON_MENTION_ME),f=i(e[0].outerHTML),f.click(function(n){u._mentionClicked(f,t,n)}),r.resolve(f)):r.resolve(null)},function(n){r.reject(n)}),r},n.prototype.renderMention=function(n,t){var i=$.Deferred();return this.renderPerson(n.ArtifactId,t).then(function(r){if(!r){var u=$("<span>").text(n.Text),f=t(u[0].outerHTML);i.resolve(f);return}i.resolve(r)},function(n){i.reject(n)}),i.promise()},n.prototype.getTelemetryMentionSummary=function(n){return this.getArtifactType()+":"+n.ArtifactId},n.prototype._mentionClicked=function(t,i,r){var u,o,s;r.stopPropagation();u=f.getWindow(t[0]);o=u&&window!==u&&u.frameElement?$(u.frameElement):null;try{s=h.Enhancement.enhance(c.IdCardDialog,"<div/>",{uniqueIdentifier:p.getIdentityId(i),anchor:t,anchorContainer:o,xvalue:0,operationScope:d,identityType:g,httpClient:null});s.getElement().closest(".ui-dialog").addClass(n.CSS_CLASS_PERSON_MENTION_CARD);e.EventLogging.publishPeopleClickEvent({person:JSON.stringify(i)})}catch(l){}},n.CSS_CLASS_PERSON_MENTION="mention-preview-person",n.CSS_CLASS_PERSON_MENTION_ME="mention-preview-me",n.CSS_CLASS_PERSON_MENTION_CARD="mention-card",n}();t.PeopleMentionsRenderingProvider=w;b=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.getDefault=function(){return t._instance||(t._instance=new t),t._instance},t.prototype.parseFromText=function(n){var r=[],t=p.REGEX_MENTION,i;for(t.lastIndex=0;i=t.exec(n);)r.push({start:i.index,end:t.lastIndex,id:i[1]});return r},t.prototype.parseFromUrl=function(n){var t=new o(n);if(t.scheme()==="mailto")return{email:t.path()}},t.prototype.parseFromHtml=function(n,t){var i=this,r=n.find('a[href^="mailto:"]');r.each(function(n,r){var u=$(r),f=i.parseFromUrl(u.attr("href"));f&&t(u,f)})},t.prototype.getArtifactType=function(){return"Person"},t}(r.ArtifactMentionParser);t.PeopleMentionParser=b;it=function(){function n(){}return n.processHtml=function(n){b.getDefault().parseFromHtml(n,function(n,t){w.getDefault().renderPerson(decodeURI(t.email),function(n){return $("<span>").append(n)}).done(function(t){t&&n.replaceWith(t)})})},n}();t.PeopleMentionProcessor=it;k=function(){function n(){var t=this;this._cache=new r.ArtifactsCache(function(n){return t._loadPeople(n)},n.QUEUE_WAIT_MSEC,n.MAX_BATCH_SIZE)}return n.getInstance=function(){return n._instance||(n._instance=new n),n._instance},n.prototype.getArtifactType=function(){return"Person"},n.prototype.getByUniqueId=function(n){return this._cache.getArtifactPromise(n.toUpperCase())},n.prototype.isIdentityCurrentUser=function(n){var t=s.getDefaultWebContext().user.id;return!t||!n||!n.localId?!1:t.toUpperCase()===n.localId.toUpperCase()},n.prototype._getIdentitiesService=function(){return a.VssConnection.getConnection().getService(l.IdentityService)},n.prototype._loadPeople=function(n){var t={},e={},c=this._getIdentitiesService(),r,u,o,f,h;for(n=n.map(function(n){return n.toUpperCase()}),r=0;r<n.length;r++)u=n[r],t[u]=i.defer(),e[u]=t[u].promise;o=n.join(";");f=c.getIdentities(o,d,g);for(h in f)f[h].then(function(n){var u=n.queryToken.toUpperCase(),i,r;if(t.hasOwnProperty(u))if(i=t[u],n&&n.queryToken&&n.identities)if(s.getPageContext().webAccessConfiguration.isHosted)i.resolve(n.identities.length>0?n.identities.filter(function(t){return y.ignoreCaseComparer(t.signInAddress,n.queryToken)===0})[0]:null);else{r=u.split("\\");r.length!=2&&i.reject("Invalid unique ID");var e=r[0],o=r[1],f=n.identities.filter(function(n){return y.ignoreCaseComparer(n.samAccountName,o)==0&&y.ignoreCaseComparer(n.scopeName,e)==0});i.resolve(f.length>0?f[0]:null)}else i.reject("Invalid result object")},function(i){n.forEach(function(n){t[n].reject(i)})});return e},n.QUEUE_WAIT_MSEC=10,n.MAX_BATCH_SIZE=10,n}();t.PeopleProvider=k;u.isMentionPeoplePluginFeatureEnabled()&&(r.MentionProcessor.getDefault().registerParser(b.getDefault),r.MentionsRenderer.getDefault().registerProvider(w.getDefault))});
define("Mention/Scripts/TFS.Mention.Controls.Mentionable",["require","exports","VSS/Controls","Mention/Scripts/Resources/TFS.Resources.Mention","Mention/Scripts/TFS.Mention","Mention/Scripts/TFS.Mention.Autocomplete.Controls","Mention/Scripts/TFS.Mention.FeatureAvailability","Mention/Scripts/TFS.Mention.Helpers","Mention/Scripts/TFS.Mention.WorkItems","Mention/Scripts/TFS.Mention.People","Mention/Scripts/TFS.Social.Telemetry"],function(n,t,i,r,u,f,e,o,s,h,c){var l,a,v,y;(function(n){n[n.Uninitialized=0]="Uninitialized";n[n.Preview=1]="Preview";n[n.Edit=2]="Edit"})(l||(l={})),function(n){n.PREVIEW="mention-mentionable-preview";n.EDIT="mention-mentionable-edit"}(a=t.MentionableEvents||(t.MentionableEvents={}));v=function(n){function t(t,i){n.call(this,t,i);this._currentMode=l.Uninitialized}return __extends(t,n),t.prototype.initialize=function(){var n=this,t,r;o.environmentIsSupported()&&(this._autocompleteEnhancement=this._options.autocompleteEnhancement||i.Enhancement.enhance(f.AutocompleteEnhancement,this.getElement(),this._getAutocompleteOptions()),this._$previewContainer=$("<div>").hide().insertAfter(this.getElement()).addClass("mention-preview-area"),this._showPreview(),this.getElement().is("[readonly],[disabled]")||(t=["border-top-color","border-top-style","border-top-width","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","background-color"],r=[],this._$previewContainer.hover(function(){var i,u;for(i in t)r[i]=n._$previewContainer.css(t[i]),u=n.getElement().css(t[i]),n._$previewContainer.css(t[i],u)},function(){for(var i in t)n._$previewContainer.css(t[i],r[i])}),this.getElement().blur(function(){return n._showPreview()}),this.getElement().focus(function(){return n._showEdit()}),this._$previewContainer.click(function(){return n._showEdit()})),y.insertMentionEditModeActionsIntoStatusLine(this.getElement()))},t.prototype.dispose=function(){this._autocompleteEnhancement&&this._autocompleteEnhancement.dispose();n.prototype.dispose.call(this)},t.prototype._getAutocompleteOptions=function(){var n=[];return e.isMentionWorkItemsPluginFeatureEnabled()&&n.push({factory:function(n){return new s.WorkItemAutocompleteProvider(n)}}),e.isMentionPeoplePluginFeatureEnabled()&&n.push({factory:function(n){return new h.PersonAutocompleteProvider(n)}}),$.extend({artifactUri:this._options.artifactUri,pluginConfigs:n},this._options.autocompleteOptions)},t.prototype._showPreview=function(){var t=this,f,n,e,o;if(this._currentMode!==l.Preview){f=(new Date).getTime();n={artifactUri:this._options.artifactUri};this._currentMode=l.Preview;this._$previewContainer.empty();var s=this.getElement().val(),i=u.MentionProcessor.getDefault().parseInput(s),r=0;for(e in i)i[e].Type!==u.TextPartType.Text&&r++;n.nonTextPartsCount=r.toString();r==0?(this._$previewContainer.hide(),this.getElement().show(),this._fire(a.PREVIEW)):(o=u.MentionProcessor.getDefault().renderParts(this._$previewContainer,i,n),o.done(function(){t.getElement().hide();t._$previewContainer.show();n.durationInMSec=((new Date).getTime()-f).toString();c.EventLogging.publishMentionablePreviewEvent(n);t._fire(a.PREVIEW)}))}},t.prototype._showEdit=function(){this._currentMode!==l.Edit&&(this._currentMode=l.Edit,this._$previewContainer.hide(),this.getElement().show(),this.getElement().focus(),this._autocompleteEnhancement&&this._autocompleteEnhancement.prefetch(),c.EventLogging.publishMentionableEditEvent({artifactUri:this._options.artifactUri}),this._fire(a.EDIT))},t}(i.Enhancement);t.MentionableEnhancement=v;y=function(){function n(){}return n.insertMentionEditModeActionsIntoStatusLine=function(t){e.isMentionWorkItemsPluginFeatureEnabled()&&n.insertEditModeActionIntoStatusLine(t,r.DiscussionMentionWorkItemTip);e.isMentionPeoplePluginFeatureEnabled()&&n.insertEditModeActionIntoStatusLine(t,r.DiscussionMentionPersonTip)},n.insertEditModeActionIntoStatusLine=function(n,t){var i=n.closest(".comment-column").find(".discussion-comment-status .discussion-action.edit-mode");if(i.length>0)var r=i[i.length-1],u=$("<span>").addClass("discussion-action edit-mode").insertAfter(r),f=$("<a>").addClass("mention-actions disabled-link").text(t).appendTo(u)},n}();i.Enhancement.registerEnhancement(v,".mention.mentionable")});
define("VersionControl/Scripts/Controls/MentionableDiscussionCommentControl",["require","exports","VSS/Controls","Presentation/Scripts/TFS/TFS.Discussion.Common.UI","Mention/Scripts/TFS.Mention.Controls.Mentionable"],function(n,t,i,r,u){var f=function(n){function t(t,r,f){var e=this;n.call(this,t,r,f);this._mentionableEnhancement=i.Enhancement.enhance(u.MentionableEnhancement,this.getInputElement(),{artifactUri:r.getThread().artifactUri});this._mentionableEnhancement._bind(u.MentionableEvents.PREVIEW,function(){return e._mentionableResized()});this._mentionableEnhancement._bind(u.MentionableEvents.EDIT,function(){return e._mentionableResized()})}return __extends(t,n),t.prototype._mentionableResized=function(){this.getElement().trigger("discussion-comment-resized")},t.prototype.dispose=function(){this._mentionableEnhancement.dispose();n.prototype.dispose.call(this)},t}(r.DiscussionCommentControl);t.MentionableDiscussionCommentControl=f});
define("VersionControl/Scripts/Controls/VersionControlDiscussionThreadControl",["require","exports","Presentation/Scripts/TFS/TFS.Discussion.Common.UI","VSS/FeatureAvailability/Services","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.Constants","VersionControl/Scripts/Controls/MentionableDiscussionCommentControl"],function(n,t,i,r,u,f){var e=function(){function n(){}return n.prototype.createCommentControl=function(n,t,e){return r.FeatureAvailabilityService.isFeatureEnabled(u.FeatureAvailabilityFlags.WebAccessMentionVersionControl)?new f.MentionableDiscussionCommentControl(n,t,e):new i.DiscussionCommentControl(n,t,e)},n}(),o;t.VersionControlDiscussionCommentControlFactory=e;o=function(n){function t(t,i,r){n.call(this,t,i,r,new e)}return __extends(t,n),t}(i.DiscussionThreadControl);t.VersionControlDiscussionThreadControl=o});
define("VersionControl/Scripts/Controls/DiffBuiltInDiffViewerDiscussionThreadControl",["require","exports","VersionControl/Scripts/Controls/VersionControlDiscussionThreadControl"],function(n,t,i){var r=function(n){function t(t,i,r,u,f,e){n.call(this,i,r,e);this._builtInDiffViewer=t;this._$container=u;this._$fillerContainers=f||[];u.data("discussionId",i.id);this.appendTo(u);this.updateLayout()}return __extends(t,n),t.prototype.updateLayout=function(){if(this.updateCommentSizes(),this._$fillerContainers.length){var n=this._$container.outerHeight();$.each(this._$fillerContainers,function(t,i){i.height(n)})}},t.prototype.handleUpdatedThreadId=function(t,i){n.prototype.handleUpdatedThreadId.call(this,t,i);this._$container.data("discussionId",i);this._builtInDiffViewer&&this.getThread().position&&this._builtInDiffViewer._updateLineDecorationsForSavedThread(t,i)},t.prototype.setSelectedState=function(t,i){t&&!this.isSelected()&&this._builtInDiffViewer._handleSelectedDiscussionIdChanged(this.getThread().id);n.prototype.setSelectedState.call(this,t,i)},t.prototype.dispose=function(){n.prototype.dispose.call(this);this._$container.remove();$.each(this._$fillerContainers,function(n,t){t.remove()});this._builtInDiffViewer&&this.getThread().position&&this._builtInDiffViewer._handleThreadRemoved(this.getThread().id)},t}(i.VersionControlDiscussionThreadControl);t.BuiltInDiffViewerDiscussionThreadControl=r});
define("VersionControl/Scripts/Controls/DiffBuiltInDiffViewerDiscussionThreadControlReact",["require","exports","VSS/VSS","VSS/Utils/UI"],function(n,t,i,r){var u=function(){function n(n,t,r,u,f){var e=this,o;this._builtInDiffViewer=n;o=$("<div><\/div>").appendTo(u);this._$container=u;this._$fillerContainers=f||[];this._discussionThread=t;u.data("discussionId",t.id);i.using(["VersionControl/Scripts/Components/PullRequestReview/DiscussionThread"],function(n){n.DiscussionThreadHost.createDiscussionThread(o,t,e);e.updateLayout()});r.registerThreadControl(this)}return n.prototype.updateLayout=function(){if(this._$fillerContainers.length){var n=this._$container.outerHeight();$.each(this._$fillerContainers,function(t,i){i.height(n)})}},n.prototype.handleUpdatedThreadId=function(){},n.prototype.setSelectedState=function(){},n.prototype.hostShouldUnmount=function(){this.dispose()},n.prototype.dispose=function(){var n=this;i.using(["VersionControl/Scripts/Components/PullRequestReview/DiscussionThread"],function(t){t.DiscussionThreadHost.removeDiscussionThread(n._$container)});this._$container.remove();$.each(this._$fillerContainers,function(n,t){t.remove()});this._builtInDiffViewer&&this._discussionThread.position&&this._builtInDiffViewer._handleThreadRemoved(this._discussionThread.id)},n.prototype.sizeChanged=function(){this._builtInDiffViewer&&this._builtInDiffViewer.updateLayout()},n.prototype.scrollIntoView=function(){r.Positioning.scrollIntoViewVertical(this._$container,r.Positioning.VerticalScrollBehavior.Middle,!1,500)},n.prototype.focus=function(){},n.prototype.getThread=function(){return this._discussionThread},n.prototype.removeComment=function(){return this.sizeChanged(!0),!1},n.prototype.getCommentControl=function(){return null},n.prototype.updateCommentId=function(){},n}();t.BuiltInDiffViewerDiscussionThreadControlReact=u});
define("VersionControl/Scripts/Services/Service",["require","exports","VSS/VSS"],function(n,t,i){function u(n,t){return r.getService(n,t)}var r=function(){function n(){}return n.getService=function(n,t){var f=t?t.getRepositoryId():"contextless",u="gitRepositoryService."+i.getTypeName(n)+f,r=this._services[u];return r||(r=new n(t),this._services[u]=r),r},n._services={},n}();t.getRepositoryService=u});
define("VersionControl/Scripts/Services/DiffCountService",["require","exports","VersionControl/Scripts/Services/Service","VersionControl/Scripts/Generated/TFS.VersionControl.Legacy.Contracts"],function(n,t,i,r){function f(n){return i.getRepositoryService(u.DiffCountService,n)}t.getDiffCountService=f;var u;(function(n){var t=function(){function n(n){this.repositoryContext=n;this._DiffFileLineCounts={};this._FileDiffRequests={}}return n.prototype._generateDiffKey=function(n){var t=n.opath,i=n.oversion,r=n.mpath,u=n.mversion;return t+"|"+i+"|"+r+"|"+u},n.prototype.beginLoadLineCounts=function(n,t,i){var u=this,f;n.opath&&n.oversion&&n.mpath&&n.mversion&&((f=this._generateDiffKey(n),this._FileDiffRequests[f])||(this._FileDiffRequests[f]=!0,this.repositoryContext.getClient().beginGetFileDiff(this.repositoryContext,{originalPath:n.opath,originalVersion:n.oversion,modifiedPath:n.mpath,modifiedVersion:n.mversion,partialDiff:!1,includeCharDiffs:!1},function(i){var f=0,e=0,o;i.binaryContent||i.emptyContent||($.each(i.lineCharBlocks,function(n,t){var i=t.lineChange;i.changeType===r.FileDiffBlockChangeType.Add?f+=i.mLinesCount:i.changeType===r.FileDiffBlockChangeType.Delete?e+=i.oLinesCount:i.changeType===r.FileDiffBlockChangeType.Edit&&(f+=i.mLinesCount,e+=i.oLinesCount)}),o=u._generateDiffKey(n),u._DiffFileLineCounts[o]={linesAdded:f,linesDeleted:e},$.isFunction(t)&&t.call(u))},i)))},n.prototype.getLineCounts=function(n){var t=this._generateDiffKey(n);return this._DiffFileLineCounts[t]},n.prototype.setLineCounts=function(n,t){var i=this._generateDiffKey(n);this._DiffFileLineCounts[i]=t},n}();n.DiffCountService=t})(u||(u={}))});
define("VersionControl/Scripts/Controls/DiffBuiltInDiffViewer",["require","exports","VSS/Controls","Presentation/Scripts/TFS/TFS.Discussion.Common","Presentation/Scripts/TFS/TFS.Discussion.Common.UI","Presentation/Scripts/TFS/TFS.Discussion.OM","Presentation/Scripts/TFS/Resources/TFS.Resources.Discussion","VSS/Controls/Menus","VSS/Controls/Notifications","VSS/Controls/Splitter","VSS/Controls/StatusIndicator","VSS/VSS","VSS/Utils/UI","Presentation/Scripts/TFS/TFS.Host.TfsContext","VSS/Utils/Core","VSS/Utils/String","VersionControl/Scripts/Generated/TFS.VersionControl.Legacy.Contracts","VersionControl/Scripts/Generated/TFS.VersionControl.WebAccess.Contracts","VersionControl/Scripts/TFS.VersionControl","VersionControl/Scripts/VersionControlUrls","VersionControl/Scripts/Resources/TFS.Resources.VersionControl","VersionControl/Scripts/Controls/DiffBuiltInDiffViewerDiscussionThreadControl","VersionControl/Scripts/Controls/DiffBuiltInDiffViewerDiscussionThreadControlReact","VersionControl/Scripts/Services/DiffCountService","VSS/LoaderPlugins/Css!VersionControlControls"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it){var ut=y.delegate,rt=a.domElem,et=l.getErrorMessage,ot=v.TfsContext,ft=function(n){function t(i){n.call(this,$.extend({coreCssClass:"vc-diff-viewer"},i));this._rowsAboveThread=t.DIFF_PADDING_ROWS;this._rowsBelowThread=t.DIFF_PADDING_ROWS;this._requestIndex=0;this._numRowsRendered=0;this._maxLineNumber=0;this._currentlySelectedRowIndex=-1;this._lineInfoByRowIndex={};this._startRowIndexByBlockIndex=[];this._currentDiscussionThreadControls=[];this._$highlightedRowElements=[];this._highlightedRowIndex=-1;this._highlightedRowIsOriginalSide=!1;this._updateDiffButtonsCallback=this._options.updateDiffButtonsCallback;this._updateDiffOrientationCallback=this._options.updateDiffOrientationCallback;this._discussionUpdatedListener=ut(this,this.onDiscussionCommentsUpdated);this._windowResizeDelegate=ut(this,this.updateLayout);this._selectedDiscussionId=null;this._activeState=!0;this._imageDiff={standardMargin:10,standardBorderSize:1};this._$summaryRowElement=this._options.$summaryRow;this._options.discussionThreadControlManager?(this._discussionThreadControlManager=this._options.discussionThreadControlManager,this._discussionThreadControlManager.setSupportCommentStatus(this._options.supportCommentStatus?this._options.supportCommentStatus:!1),this._ownsDiscussionThreadControlManager=!1):(this._discussionThreadControlManager=new f.DiscussionThreadControlManager(this._options.tfsContext),this._discussionThreadControlManager.setSupportCommentStatus(this._options.supportCommentStatus?this._options.supportCommentStatus:!1),this._ownsDiscussionThreadControlManager=!0)}return __extends(t,n),t.prototype.initialize=function(){var t=this;n.prototype.initialize.call(this);this._options.fixedSize&&this._element.addClass("fixedSize");$(window).bind("resize",this._windowResizeDelegate);this._element.bind("discussion-thread-resized discussion-comment-resized",function(){t._handleDiscussionResized()});this._element.bind("mousemove",ut(this,this._handleMouseMove));this._element.bind("mouseout",ut(this,this._handleMouseOut));this._orientation=this._options.orientation||b.DiffViewerOrientation.SideBySide},t.prototype._dispose=function(){n.prototype._dispose.call(this);this._discussionManager&&this._discussionManager.removeDiscussionThreadsUpdatedListener(this._discussionUpdatedListener);this._ownsDiscussionThreadControlManager&&this._discussionThreadControlManager.dispose();this._options.useNewDiscussionControl&&$.each(this._currentDiscussionThreadControls,function(n,t){t.dispose()});$(window).unbind("resize",this._windowResizeDelegate)},t.prototype.setActiveState=function(n){this._activeState=n;this._shouldDrawDiscussionThreads&&n&&(this._drawDiscussionThreads(),this._handleLayoutChanged(),this._shouldDrawDiscussionThreads=!1)},t.prototype._emptyContents=function(){this._element.empty();this._sideBySideSplitter=null;this._$fileLevelDiscussionsContainer=null;this._currentlySelectedRowIndex=-1;this._numRowsRendered=0;this._maxLineNumber=0;this._lineInfoByRowIndex={};this._startRowIndexByBlockIndex=[];this._currentDiscussionThreadControls=[];this._$highlightedRowElements=[];this._highlightedRowIndex=-1;this._highlightedRowIsOriginalSide=!1;this._$sideBySideOriginalDiffContainer=null;this._$sideBySideModifiedDiffContainer=null;this._$inlineDiffContainer=null;this._$diffGutterInline=null;this._$diffGutterOriginal=null;this._$diffGutterModified=null;this._$headerContainer=null;this._selectedDiscussionId=null},t.prototype.setOrientation=function(n,t,i){var r=this._orientation!==n;r&&(this._orientation=n,this._emptyContents());t&&this._diffModel&&(r&&this.setDiffModel(this._diffModel),$.isFunction(i)&&(i.call(this),this._handleLayoutChanged()))},t.prototype.setDiscussionManager=function(n,t){this._discussionManager!==n&&(n||this._discussionManager)&&(this._discussionManager&&this._discussionManager.removeDiscussionThreadsUpdatedListener(this._discussionUpdatedListener),this._discussionManager=n,this._options.preventDiscussionCreate||(n?(this._element.addClass("has-discussion-manager"),this._discussionManager.addDiscussionThreadsUpdatedListener(this._discussionUpdatedListener)):this._element.removeClass("has-discussion-manager")),this._discussionThreadControlManager.setDiscussionManager(this._discussionManager),t&&this._diffModel&&(this._drawDiscussionThreads(),this._handleLayoutChanged()))},t.prototype.onDiscussionCommentsUpdated=function(n,t){var i=this,r;t.newThreads&&!this._activeState?$.each(t.newThreads,function(n,t){if(t.itemPath===i._getDiscussionItemPath())return i.updateDiscussionThreads(),!1}):t.newComments&&!this._activeState&&$.each(t.newComments,function(n,t){var r=i._discussionThreadControlManager.getThreadControl(t.threadId);if(r&&r.getThread().itemPath===i._getDiscussionItemPath())return i.updateDiscussionThreads(),!1});this._diffModel&&this._activeState?(t.currentThreads?(this._drawDiscussionThreads(),this._handleLayoutChanged()):(t.newThreads||t.threadSelected)&&(r=n.filterEventData(t,(this._diffModel.modifiedFile||this._diffModel.originalFile).serverItem),r.newThreads&&r.newThreads.length&&(this._$fileLevelDiscussionsContainer&&this._$fileLevelDiscussionsContainer.show(),$.each(r.newThreads,function(n,t){t.position||i._addFileLevelThread(t,n===0)})),r.threadSelected&&this._discussionThreadControlManager.selectThreadControl(r.threadSelected.id,this._activeState&&t.navigateToSelectedThread)),this._resetImageDiffConstants(),this._afterImageLoad()):this._diffModel&&t.currentThreads&&(this._shouldDrawDiscussionThreads=!0)},t.prototype.hasDiscussionThreads=function(){var n=this;return this._discussionManager&&this._diffModel&&this._discussionManager.getCurrentThreads().filter(function(t){return t.itemPath===n._getDiscussionItemPath()}).length!==0?!0:!1},t.prototype.updateDiscussionThreads=function(){this._drawDiscussionThreads();this._handleLayoutChanged()},t.prototype._beginGetFileDiff=function(n,t,i){this._repositoryContext.getClient().beginGetFileDiff(this._repositoryContext,{originalPath:n.opath,originalVersion:n.oversion,modifiedPath:n.mpath,modifiedVersion:n.mversion,partialDiff:this._options.partialDiff,includeCharDiffs:!0},t,i)},t.prototype.reshowDiff=function(n,t,i){this.beginShowDiff(n,t,i,this._rowsAboveThread,this._rowsBelowThread)},t.prototype.beginShowDiff=function(n,r,u,f,e){var o=this,a,h,l;f===void 0&&(f=t.DIFF_PADDING_ROWS);e===void 0&&(e=t.DIFF_PADDING_ROWS);this._itemsDescription=r;a=++this._requestIndex;this._emptyContents();h=$(rt("div","status-container")).appendTo(this._element);l=i.BaseControl.createIn(c.StatusIndicator,h,{center:!0,imageClass:"big-status-progress",message:g.ComparingFilesLoadMessage});this.delayExecute("showWaitIndicator",200,!0,function(){l&&l.start()});this._repositoryContext=n;this._beginGetFileDiff(r,function(n){a===o._requestIndex&&(h.remove(),o.setDiffModel(n,f,e),$.isFunction(u)&&(u.call(o),o._handleLayoutChanged()))},function(n){h.remove();l=null;i.BaseControl.createIn(s.MessageAreaControl,o._element,{closeable:!1,message:et(n)});$.isFunction(u)&&u.call(o)})},t.prototype.setDiffModel=function(n,i,r){var f=this,u;i===void 0&&(i=t.DIFF_PADDING_ROWS);r===void 0&&(r=t.DIFF_PADDING_ROWS);this._rowsAboveThread=Math.max(i,0);this._rowsBelowThread=Math.max(r,0);this._diffModel=n;this._drawDiff(n);u=this._drawDiscussionThreads();this._handleLayoutChanged();this._updateButtons();this._options.fixedSize&&!u&&y.delay(this,100,function(){f.onNextClick()})},t.prototype._getPossibleImageDiffModes=function(){var n=[],t=this._imageDiff.diffActionsToolbar.getItems();return $.each(t,function(t,i){i._item.disabled||n.push(i._item.id)}),n},t.prototype._changeImageDiffMode=function(n,i,r){var e=this;i===void 0&&(i=!0);r===void 0&&(r=!1);var u={},f=n+"",l=this._imageDiff.mode+"",o=[b.DiffViewerImageMode.Flipper,b.DiffViewerImageMode.TrueDiff],s=b.DiffViewerImageMode.Flipper+"",h=b.DiffViewerImageMode.TrueDiff+"",c=b.DiffViewerImageMode.TwoUp+"";u[s]="flipper";u[h]="true-diff";u[c]="two-up";this._options.fixedSize&&i&&n&&this._repositoryContext.getClient().beginGetUserPreferences(function(t){t.diffViewerImageMode=n;e._repositoryContext.getClient().beginUpdateUserPreferences(t)});this._getPossibleImageDiffModes().indexOf(u[f])===-1&&(n=t.DEFAULT_IMAGE_DIFF_MODE,f=n+"");this._imageDiff.mode=n;this._imageDiff.isOverlay=o.indexOf(n)>-1;this._updateImageDiffMenu();this._updateImageDiff(r)},t.prototype._getScaledDimensions=function(n,t,i,r){var u,e=i,f=r;return i>n&&(u=n/i,e=u*i,f=u*r),f>t&&(u=t/f,e=u*e,f=u*f),{width:Math.round(e),height:Math.round(f)}},t.prototype._updateImageDiff=function(n){if(n===void 0&&(n=!1),this._element){var u,f,e,o,r,i,s,h,l,a,v,y=parseInt(this._imageDiff.elements.$imagesContainer.css("min-height").replace("px","")),c=this._$fileLevelDiscussionsContainer?this._$fileLevelDiscussionsContainer.height():0;typeof this._imageDiff.sideBySideHeight=="undefined"&&this._orientation===b.DiffViewerOrientation.SideBySide?(this._element.removeClass("inline"),this._element.addClass("side-by-side"),this._imageDiff.sideBySideHeight=Math.max(this._imageDiff.elements.$leftImageContainer.find("img")[0].offsetHeight,this._imageDiff.elements.$rightImageContainer.find("img")[0].offsetHeight)):typeof this._imageDiff.inlineHeight=="undefined"&&this._orientation===b.DiffViewerOrientation.Inline&&(this._element.removeClass("side-by-side"),this._element.addClass("inline"),this._imageDiff.inlineHeight=Math.max(this._imageDiff.elements.$leftImageContainer.find("img")[0].offsetHeight,this._imageDiff.elements.$rightImageContainer.find("img")[0].offsetHeight));this._element.removeClass("inline");this._element.addClass("side-by-side");this._element.toggleClass("image-diff-overlay",this._imageDiff.isOverlay);this._imageDiff.mode===b.DiffViewerImageMode.Flipper?this._imageDiff.elements.$flipButton.show():(this._imageDiff.elements.$flipButton.hide(),this._resetFlipStates(n));this._imageDiff.mode!==b.DiffViewerImageMode.TrueDiff&&typeof this._imageDiff.elements.$canvas=="object"&&this._imageDiff.elements.$canvas.hide();u=this._imageDiff.originalImage.dimensions.width;f=this._imageDiff.originalImage.dimensions.height;e=this._imageDiff.modifiedImage.dimensions.width;o=this._imageDiff.modifiedImage.dimensions.height;r=this._imageDiff.elements.$imagesContainer[0].offsetWidth;this._imageDiff.elements.$imagesContainer.css({top:this._imageDiff.elements.$imagesContainer.data("topValue")+(c>0?c+15:0)});this._options.fixedSize?i=Math.max(y,document.documentElement.clientHeight-this._imageDiff.elements.$imagesContainer.offset().top-this._imageDiff.standardMargin-this._imageDiff.standardBorderSize*2):(this._orientation===b.DiffViewerOrientation.SideBySide?i=this._imageDiff.sideBySideHeight:(l=t.MAX_INLINE_HEIGHT*2+this._imageDiff.standardMargin,a=this._imageDiff.inlineHeight*2+this._imageDiff.standardMargin,i=Math.min(l,a)),i+=c,v=i+this._imageDiff.elements.$controls.height()+this._imageDiff.standardBorderSize+this._imageDiff.standardMargin,this._imageDiff.elements.$container.css({height:v}));this._imageDiff.elements.$imagesContainer.css({height:i});this._imageDiff.origScaled=this._getScaledDimensions(r,i,u,f);this._imageDiff.modScaled=this._getScaledDimensions(r,i,e,o);this._imageDiff.isOverlay?(s=(r-this._imageDiff.origScaled.width)/2,h=(r-this._imageDiff.modScaled.width)/2,this._imageDiff.elements.$leftImageContainer.css({left:s,width:this._imageDiff.origScaled.width,height:this._imageDiff.origScaled.height}),this._imageDiff.elements.$rightImageContainer.css({left:h,width:this._imageDiff.modScaled.width,height:this._imageDiff.modScaled.height}),this._imageDiff.elements.$leftImageContainer.find("img").css({width:this._imageDiff.origScaled.width,height:this._imageDiff.origScaled.height}),this._imageDiff.elements.$rightImageContainer.find("img").css({width:this._imageDiff.modScaled.width,height:this._imageDiff.modScaled.height}),this._imageDiff.mode===b.DiffViewerImageMode.TrueDiff?(this._computeTrueDiff(),this._imageDiff.elements.$canvas.css({left:Math.max(s,h)})):this._flipImages()):(this._orientation===b.DiffViewerOrientation.Inline?(this._imageDiff.elements.$leftImageContainer.find("img").css(this._getScaledDimensions(r,(i-this._imageDiff.standardMargin)/2,u,f)),this._imageDiff.elements.$rightImageContainer.find("img").css(this._getScaledDimensions(r,(i-this._imageDiff.standardMargin)/2,e,o)),this._element.removeClass("side-by-side"),this._element.addClass("inline")):(this._imageDiff.elements.$leftImageContainer.find("img").css(this._getScaledDimensions((r-this._imageDiff.standardMargin)/2,i,u,f)),this._imageDiff.elements.$rightImageContainer.find("img").css(this._getScaledDimensions((r-this._imageDiff.standardMargin)/2,i,e,o))),this._imageDiff.elements.$leftImageContainer.css({width:"",height:""}),this._imageDiff.elements.$rightImageContainer.css({width:"",height:""}));this._imageDiff.elements.$imagesContainer.find("img").removeClass("hide-image-while-loading")}},t.prototype._computeTrueDiff=function(){var n;if(typeof this._imageDiff.elements.$canvas=="undefined"){var c=this._imageDiff.elements.$leftImageContainer.find("img")[0],l=this._imageDiff.elements.$rightImageContainer.find("img")[0],s=this._imageDiff.originalImage.dimensions.width,h=this._imageDiff.originalImage.dimensions.height,t=this._imageDiff.origScaled.width,i=this._imageDiff.origScaled.height,o=$(rt("canvas","true-image-diff")).attr({width:t,height:i,title:g.PixelDiffCanvasTitle}),a=o[0],r=a.getContext("2d"),f,e,u;for(r.drawImage(c,0,0,s,h,0,0,t,i),f=r.getImageData(0,0,t,i),r.clearRect(0,0,t,i),r.drawImage(l,0,0,s,h,0,0,t,i),e=r.getImageData(0,0,t,i),u=r.getImageData(0,0,t,i),n=0;n<u.data.length;n+=4)u.data[n]=Math.abs(f.data[n]-e.data[n]),u.data[n+1]=Math.abs(f.data[n+1]-e.data[n+1]),u.data[n+2]=Math.abs(f.data[n+2]-e.data[n+2]),u.data[n+3]=255;r.putImageData(u,0,0,0,0,t,i);o.appendTo(this._imageDiff.elements.$imagesContainer);this._imageDiff.elements.$canvas=o}else this._imageDiff.elements.$canvas.show()},t.prototype._afterImageLoad=function(){var n=this;this._imageDiff.fullyLoaded?this._updateImageDiff(!0):this._imageDiff.originalImage&&this._imageDiff.originalImage.loaded&&this._imageDiff.modifiedImage&&this._imageDiff.modifiedImage.loaded&&(this._imageDiff.fullyLoaded=!0,this._imageDiff.originalImage.ratio=this._imageDiff.originalImage.dimensions.height/this._imageDiff.originalImage.dimensions.width,this._imageDiff.modifiedImage.ratio=this._imageDiff.modifiedImage.dimensions.height/this._imageDiff.modifiedImage.dimensions.width,this._imageDiff.sameSize=this._imageDiff.originalImage.dimensions.height===this._imageDiff.modifiedImage.dimensions.height&&this._imageDiff.originalImage.dimensions.width===this._imageDiff.modifiedImage.dimensions.width?!0:!1,this._updateImageDiffMenu(),this._changeImageDiffMode(b.DiffViewerImageMode.TwoUp,!1,!0),this._options.fixedSize&&this._repositoryContext.getClient().beginGetUserPreferences(function(t){t.diffViewerImageMode!==b.DiffViewerImageMode.TwoUp&&n._changeImageDiffMode(t.diffViewerImageMode)}),this._imageDiff.elements.$imagesContainer.find("img.diff-image").css("visibility",""))},t.prototype._flipClickHandler=function(){this._imageDiff.mode===b.DiffViewerImageMode.Flipper&&(this._imageDiff.flipState=this._imageDiff.flipState==="modified"?"original":"modified",this._flipImages())},t.prototype._flipImages=function(){var n=this._imageDiff.flipState;n!=="original"&&n!=="modified"&&(n=this._imageDiff.flipState="modified");this._imageDiff.mode===b.DiffViewerImageMode.Flipper&&(this._imageDiff.flipState==="original"?(this._imageDiff.elements.$flipButton.text(g.ShowModifiedImageButtonText),this._imageDiff.elements.$leftImageContainer.css({visibility:"visible"}),this._imageDiff.elements.$rightImageContainer.css({visibility:"hidden"}),this._fire("image-diff-version-selected",{side:"left"})):(this._imageDiff.elements.$flipButton.text(g.ShowOriginalImageButtonText),this._imageDiff.elements.$leftImageContainer.css({visibility:"hidden"}),this._imageDiff.elements.$rightImageContainer.css({visibility:"visible"}),this._fire("image-diff-version-selected",{side:"right"})))},t.prototype._resetFlipStates=function(n){n===void 0&&(n=!1);this._imageDiff.elements.$flipButton.text(g.ShowOriginalImageButtonText);this._imageDiff.elements.$leftImageContainer.css({visibility:"visible"});this._imageDiff.elements.$rightImageContainer.css({visibility:"visible"});this._fire("image-diff-version-selected",{side:"none"});n||(this._imageDiff.flipState=null)},t.prototype._isCanvasSupported=function(){var n=rt("canvas");return!!(n.getContext&&n.getContext("2d"))},t.prototype._drawDiff=function(n){var t,i,r;if(this._element.toggleClass("side-by-side",this._orientation===b.DiffViewerOrientation.SideBySide),this._element.toggleClass("inline",this._orientation===b.DiffViewerOrientation.Inline),this._element.removeClass("same-images showing-message"),this._$headerContainer=$(rt("div","diff-header")).appendTo(this._element),n.imageComparison){this._drawImageDiff(n);return}this._clearImageDiff();n.binaryContent?(n.originalFile&&n.modifiedFile?(t=p.format(g.SccItemTitle,n.originalFile.serverItem,n.originalFile.versionDescription),i=p.format(g.SccItemTitle,n.modifiedFile.serverItem,n.modifiedFile.versionDescription),r=n.identicalContent?p.format(g.DiffFilesAreIdentical,t,i):n.originalFileTruncated||n.modifiedFileTruncated?p.format(g.DiffFilesAreLargeBinaryFiles,t,i):p.format(g.DiffFilesAreDifferent,t,i)):r=n.originalFile?g.BinaryContentDeleted:g.BinaryContentAdded,$(rt("div","diff-message binary")).text(r).appendTo(this._$headerContainer)):n.emptyContent?$(rt("div","vc-builtin-file-viewer-message")).text(g.FileIsEmpty).appendTo(this._$headerContainer):this._drawTextDiff(n)},t.prototype._updateImageDiffMenu=function(){var n;this._imageDiff.elements.$controls&&this._imageDiff.elements.$controls.remove();n=this._imageDiff.elements.$controls=$(rt("div","image-diff-controls")).hide().prependTo(this._imageDiff.elements.$container);this._isCanvasSupported()&&n.show();this._imageDiff.diffActionsToolbar=i.BaseControl.createIn(o.MenuBar,n,{cssClass:"image-diff-actions",items:[{id:"flipper",showText:!1,icon:"bowtie-icon bowtie-diff-image-overlay",disabled:!1,title:g.ABFlipTitleText,toggled:this._imageDiff.mode===b.DiffViewerImageMode.Flipper,action:ut(this,function(){this._changeImageDiffMode(b.DiffViewerImageMode.Flipper)})},{id:"true-diff",showText:!1,icon:"bowtie-icon bowtie-diff-image-pixel",disabled:this._imageDiff.sameSize?!1:!0,title:this._imageDiff.sameSize?g.PixelDiffTitleText:g.PixelDiffDisabledTitle,toggled:this._imageDiff.mode===b.DiffViewerImageMode.TrueDiff,action:ut(this,function(){this._changeImageDiffMode(b.DiffViewerImageMode.TrueDiff)})},{id:"two-up",showText:!1,icon:this._orientation===b.DiffViewerOrientation.SideBySide?"bowtie-icon bowtie-diff-side-by-side":"bowtie-icon bowtie-diff-image",disabled:!1,title:g.TwoUpDiffTitleText,toggled:this._imageDiff.mode===b.DiffViewerImageMode.TwoUp,action:ut(this,function(){this._changeImageDiffMode(b.DiffViewerImageMode.TwoUp)})}]});this._imageDiff.elements.$flipButton=$(rt("button","flip-button")).text(g.ShowOriginalImageButtonText).on("click",ut(this,this._flipClickHandler)).appendTo(n)},t.prototype._clearImageDiff=function(){this._imageDiff.originalImage=null;this._imageDiff.modifiedImage=null},t.prototype._drawImageDiff=function(n){var f,e,i,r,u,t,s=n.originalFile&&n.modifiedFile?!0:!1,o,h=s?"hidden":"";if(this._imageDiff.elements={},this._imageDiff.fullyLoaded=!1,this._resetImageDiffConstants(),r=$(rt("div","image-diff-container")).appendTo(this._element),this._imageDiff.elements.$container=r,this._$fileLevelDiscussionsContainer=$(rt("div","file-level-discussion-container")).appendTo(r),this._$fileLevelDiscussionsContainer.hide(),i=$(rt("div","images-container")).appendTo(r),i.data("topValue",parseInt(i.css("top").replace("px",""))),this._imageDiff.elements.$imagesContainer=i,this._element.addClass("image-diff"),n.identicalContent&&($(rt("div","diff-message")).text(g.ImagesAreSameMessage).appendTo(this._$headerContainer),this._element.addClass("same-images")),n.originalFile){s&&this._updateImageDiffMenu();t=d.getFileContentUrl(this._repositoryContext,n.originalFile.serverItem,n.originalFile.version);this._imageDiff.originalImage={url:t,dimensions:{}};u=$(rt("img","hide-image-while-loading")).attr("src",t).css({position:"absolute",left:"-99999px"}).appendTo(document.body);u.one("load",null,this,function(n){n.data._imageDiff.originalImage.dimensions.width=this.width;n.data._imageDiff.originalImage.dimensions.height=this.height;n.data._imageDiff.originalImage.loaded=!0;n.data._afterImageLoad();n.data._fire("image-dimensions-calculated",{leftWidth:this.width,leftHeight:this.height});$(this).remove()});f=$(rt("div","left-image-container image-container")).appendTo(i);this._imageDiff.elements.$leftImageContainer=f;$(rt("img","diff-image")).attr({src:t,title:p.format(g.ImageTitle,n.originalFile.serverItem,n.originalFile.versionDescription)}).on("click",ut(this,this._flipClickHandler)).css("visibility",h).appendTo($(rt("div","original-image")).appendTo(f));o=p.localeIgnoreCaseComparer(n.originalFile.serverItem.substr(n.originalFile.serverItem.length-4),".ico")===0;o&&($(rt("div","diff-message ico")).text(g.DiffICOFileWarning).appendTo(this._$headerContainer),this._element.addClass("showing-message"))}if(n.modifiedFile){t=d.getFileContentUrl(this._repositoryContext,n.modifiedFile.serverItem,n.modifiedFile.version);this._imageDiff.modifiedImage={url:t,dimensions:{}};u=$(rt("img","hide-image-while-loading")).attr("src",t).css({position:"absolute",left:"-99999px"}).appendTo(document.body);u.one("load",null,this,function(n){n.data._imageDiff.modifiedImage.dimensions.width=this.width;n.data._imageDiff.modifiedImage.dimensions.height=this.height;n.data._imageDiff.modifiedImage.loaded=!0;n.data._afterImageLoad();n.data._fire("image-dimensions-calculated",{rightWidth:this.width,rightHeight:this.height});$(this).remove()});e=$(rt("div","right-image-container image-container")).appendTo(i);this._imageDiff.elements.$rightImageContainer=e;$(rt("img","diff-image")).attr({src:t,title:p.format(g.ImageTitle,n.modifiedFile.serverItem,n.modifiedFile.versionDescription)}).on("click",ut(this,this._flipClickHandler)).css("visibility",h).appendTo($(rt("div","modified-image")).appendTo(e));o||p.localeIgnoreCaseComparer(n.modifiedFile.serverItem.substr(n.modifiedFile.serverItem.length-4),".ico")!==0||($(rt("div","diff-message ico")).text(g.DiffICOFileWarning).appendTo(this._$headerContainer),this._element.addClass("showing-message"))}},t.prototype._drawTextDiff=function(n){this._shownTruncatedMessage=!1;(n.originalFileTruncated||n.modifiedFileTruncated)&&(this._getFileTruncatedWarning().appendTo(this._$headerContainer),this._shownTruncatedMessage=!0);this._removeDiffBlocksFromFileTruncation(n);n.blocks&&n.blocks.length&&!n.whitespaceChangesOnly&&(this._$fileLevelDiscussionsContainer=$(rt("div","file-level-discussion-container")).appendTo(this._$headerContainer),this._$fileLevelDiscussionsContainer.hide(),this._$hiddenCommentsElement=$(rt("div","hidden-comments diff-message")).appendTo(this._$headerContainer),n.originalFile&&n.modifiedFile?this._orientation===b.DiffViewerOrientation.Inline?this._drawInlineDiff(n):this._drawSideBySideDiff(n):(this._element.removeClass("side-by-side"),this._element.addClass("inline"),this._drawInlineDiff(n)),!this._shownTruncatedMessage&&this._numRowsRendered>=t.MAX_NUM_RENDERED_ROWS&&(this._getFileTruncatedWarning().appendTo(this._$headerContainer),this._shownTruncatedMessage=!0));this._shownTruncatedMessage||(n.identicalContent?$(rt("div","diff-message identical")).text(g.IdenticalFilesMessage).appendTo(this._$headerContainer):n.whitespaceChangesOnly&&$(rt("div","diff-message identical")).text(g.FilesDifferOnlyInWhitespaceMessage).appendTo(this._$headerContainer))},t.prototype._removeDiffBlocksFromFileTruncation=function(n){var t,i;this._options.partialDiff&&(n.originalFileTruncated||n.modifiedFileTruncated)&&n.blocks&&(t=n.blocks.length,t>0&&(i=n.blocks[t-1],i.changeType===w.FileDiffBlockChangeType.None&&i.oLines&&i.oLines.length===1&&i.mLines&&i.mLines.length===1&&i.oLines[0].replace(/\s/g,"").length===0&&i.mLines[0].replace(/\s/g,"").length===0&&t--),t>0&&n.blocks[t-1].changeType!==w.FileDiffBlockChangeType.None&&(t--,t>1&&n.blocks[t-1].changeType===w.FileDiffBlockChangeType.None&&n.blocks[t-2].changeType===w.FileDiffBlockChangeType.None&&t--),t<n.blocks.length&&(n.blocks.splice(t,n.blocks.length-t),n.lineCharBlocks&&n.lineCharBlocks.splice(t,n.lineCharBlocks.length-t)))},t.prototype._getFileTruncatedWarning=function(){var i=this,n=$(rt("div","diff-message truncated")),t;return this._updateDiffOrientationCallback&&this._orientation===b.DiffViewerOrientation.Inline?(t=$(rt("div")).append($(rt("a")).text(g.SideBySide)),n.html(p.format(g.ItemCompareContentTrimmedSwitchTo,t.html())),n.find("a").click(function(){i._updateDiffOrientationCallback()})):n.text(g.ItemCompareContentTrimmed),n},t.prototype._addFileSummaryCount=function(n,t){var r,i;this._$summaryRowElement&&this._$summaryRowElement.find("span.diff-line-count-container").length===0&&(r=it.getDiffCountService(this._repositoryContext),r.setLineCounts({opath:this._diffModel.opath,oversion:this._diffModel.oversion,mpath:this._diffModel.mpath,mversion:this._diffModel.mversion},{linesAdded:n,linesDeleted:t}),i=$(rt("span","diff-line-count-container")).appendTo(this._$summaryRowElement),n>0&&$(rt("span","file-lines-added")).text(p.format(g.LinesAddedHeader,n)).attr("title",p.format(g.LinesAddedToolTip,n)).appendTo(i),t>0&&$(rt("span","file-lines-deleted")).text(p.format(g.LinesDeletedHeader,t)).attr("title",p.format(g.LinesDeletedToolTip,t)).appendTo(i))},t.prototype._drawInlineDiff=function(n){var i=this,f,r,u,e,o=t.TEXT_DIFF_GUTTER_WIDTH,s,h;this._$inlineDiffContainer=$(rt("div","text-diff-container")).css("position","relative");this._$diffGutterInline=$(rt("div","text-diff-gutter")).css("position","absolute").css("top","0").css("left","0").css("width",t.TEXT_DIFF_GUTTER_WIDTH+"px").bind("mousedown",ut(this,this._handleGutterMouseDown)).click(ut(this,this._handleGutterClick)).appendTo(this._$inlineDiffContainer);n.originalFile&&(r=$(rt("div","diff-lines original")).css("position","absolute").css("top","0").css("left","0").appendTo(this._$inlineDiffContainer));n.modifiedFile&&(u=$(rt("div","diff-lines modified")).css("position","absolute").css("top","0").css("left","0").appendTo(this._$inlineDiffContainer));f=$(rt("div","diff-contents-container")).appendTo(this._$inlineDiffContainer);this._options.fixedSize&&this._$inlineDiffContainer.bind("click",ut(this,this.onContentClick));s=0;h=0;$.each(n.lineCharBlocks,function(e,o){var c=o.lineChange;return i._startRowIndexByBlockIndex[e]=i._numRowsRendered,e===0&&(i._options.expandable?i._addExpander(e,!0,c.truncatedBefore,i._$diffGutterInline):c.truncatedBefore&&i._addEllipsisLine(e,!1,f,r,u,!0,i._$diffGutterInline)),c.changeType===w.FileDiffBlockChangeType.None?i._addLines(c.mLines,c.oLine,c.mLine,k.FileDiffBlockChangeType.None,e,f,r,u,!0,i._$diffGutterInline):c.changeType===w.FileDiffBlockChangeType.Add?(i._addLines(c.mLines,0,c.mLine,k.FileDiffBlockChangeType.Add,e,f,r,u,!0,i._$diffGutterInline,!0),s+=c.mLinesCount):c.changeType===w.FileDiffBlockChangeType.Delete?(i._addLines(c.oLines,c.oLine,0,k.FileDiffBlockChangeType.Delete,e,f,r,u,!0,i._$diffGutterInline,!0),h+=c.oLinesCount):c.changeType===w.FileDiffBlockChangeType.Edit&&(i._addLines(c.oLines,c.oLine,0,k.FileDiffBlockChangeType.Delete,e,f,r,u,!0,i._$diffGutterInline,!1,o.charChange),i._addLines(c.mLines,0,c.mLine,k.FileDiffBlockChangeType.Add,e,f,r,u,!0,i._$diffGutterInline,!1,o.charChange),s+=c.mLinesCount,h+=c.oLinesCount),e===n.blocks.length-1&&i._options.expandable?i._addExpander(e,!1,c.truncatedAfter,i._$diffGutterInline):c.truncatedAfter&&i._addEllipsisLine(e,e!==n.blocks.length-1,f,r,u,!0,i._$diffGutterInline),i._numRowsRendered>=t.MAX_NUM_RENDERED_ROWS?!1:void 0});this._addFileSummaryCount(s,h);e=this._getLineNumbersColumnWidth();r&&(r.css("left",o+"px"),r.css("width",e+"px"));u&&(u.css("width",e+"px"),r?u.css("left",o+e+"px"):u.css("left",o+"px"));f.css("margin-left",(r&&u?2*e:e)+o+"px");this._$inlineDiffContainer.appendTo(this._element)},t.prototype._drawSideBySideDiff=function(n){var r=this,a,v,u,f,e,o,s,c,l;this._sideBySideSplitter=i.BaseControl.createIn(h.Splitter,this._element,{cssClass:"text-diff-container",fixedSide:"left",vertical:!1});this._originalScrolling=[];this._modifiedScrolling=[];a=$(rt("div","side-by-side-container original")).appendTo(this._sideBySideSplitter.leftPane);this._sideBySideSplitter.leftPane.bind("scroll",ut(this,this._onOriginalScroll));v=$(rt("div","side-by-side-container modified")).appendTo(this._sideBySideSplitter.rightPane);this._sideBySideSplitter.rightPane.bind("scroll",ut(this,this._onModifiedScroll));this._$sideBySideOriginalDiffContainer=$(rt("div","side-by-side-diff-container original")).css("position","relative");this._$diffGutterOriginal=$(rt("div","text-diff-gutter")).css("position","absolute").css("top","0").css("left","0").css("width",t.TEXT_DIFF_GUTTER_WIDTH+"px").bind("mousedown",ut(this,this._handleGutterMouseDown)).click(ut(this,this._handleGutterClick)).appendTo(this._$sideBySideOriginalDiffContainer);u=$(rt("div","diff-lines original")).css("position","absolute").css("top","0").css("left",t.TEXT_DIFF_GUTTER_WIDTH+"px").appendTo(this._$sideBySideOriginalDiffContainer);f=$(rt("div","diff-contents-container")).appendTo(this._$sideBySideOriginalDiffContainer);this._$sideBySideModifiedDiffContainer=$(rt("div","side-by-side-diff-container modified")).css("position","relative");this._$diffGutterModified=$(rt("div","text-diff-gutter")).css("position","absolute").css("top","0").css("left","0").css("width",t.TEXT_DIFF_GUTTER_WIDTH+"px").bind("mousedown",ut(this,this._handleGutterMouseDown)).click(ut(this,this._handleGutterClick)).appendTo(this._$sideBySideModifiedDiffContainer);e=$(rt("div","diff-lines modified")).css("position","absolute").css("top","0").css("left",t.TEXT_DIFF_GUTTER_WIDTH+"px").appendTo(this._$sideBySideModifiedDiffContainer);o=$(rt("div","diff-contents-container")).appendTo(this._$sideBySideModifiedDiffContainer);this._options.fixedSize&&(this._$sideBySideOriginalDiffContainer.bind("click",ut(this,this.onContentClick)),this._$sideBySideModifiedDiffContainer.bind("click",ut(this,this.onContentClick)));c=0;l=0;$.each(n.lineCharBlocks,function(i,s){var h=s.lineChange;return r._startRowIndexByBlockIndex[i]=r._numRowsRendered,i===0&&(r._options.expandable?r._addExpander(i,!0,h.truncatedBefore,r._$diffGutterOriginal):h.truncatedBefore&&(r._addEllipsisLine(i,!1,f,u,null,!1,r._$diffGutterOriginal),r._addEllipsisLine(i,!1,o,null,e,!0,r._$diffGutterModified))),h.changeType===w.FileDiffBlockChangeType.None?(r._addLines(h.oLines,h.oLine,0,k.FileDiffBlockChangeType.None,i,f,u,null,!1,r._$diffGutterOriginal),r._addLines(h.mLines,0,h.mLine,k.FileDiffBlockChangeType.None,i,o,null,e,!0,r._$diffGutterModified)):h.changeType===w.FileDiffBlockChangeType.Add?(r._addEmptyChangeLines(i,h.mLinesCount,k.FileDiffBlockChangeType.Add,f,u,null,r._$diffGutterOriginal),r._addLines(h.mLines,0,h.mLine,k.FileDiffBlockChangeType.Add,i,o,null,e,!0,r._$diffGutterModified,!0),c+=h.mLinesCount):h.changeType===w.FileDiffBlockChangeType.Delete?(r._addEmptyChangeLines(i,h.oLinesCount,k.FileDiffBlockChangeType.Delete,o,null,e,r._$diffGutterModified),r._addLines(h.oLines,h.oLine,0,k.FileDiffBlockChangeType.Delete,i,f,u,null,!0,r._$diffGutterOriginal,!0),l+=h.oLinesCount):h.changeType===w.FileDiffBlockChangeType.Edit&&(r._addLines(h.oLines,h.oLine,0,k.FileDiffBlockChangeType.Delete,i,f,u,null,!1,r._$diffGutterOriginal,!1,s.charChange),r._addLines(h.mLines,0,h.mLine,k.FileDiffBlockChangeType.Add,i,o,null,e,!1,r._$diffGutterModified,!1,s.charChange),l+=h.oLinesCount,c+=h.mLinesCount,r._numRowsRendered+=Math.min(h.oLinesCount,h.mLinesCount),h.mLinesCount>h.oLinesCount?(r._addEmptyChangeLines(i,h.mLinesCount-h.oLinesCount,k.FileDiffBlockChangeType.Delete,f,u,null,r._$diffGutterOriginal),r._numRowsRendered+=h.mLinesCount-h.oLinesCount):h.oLinesCount>h.mLinesCount&&(r._addEmptyChangeLines(i,h.oLinesCount-h.mLinesCount,k.FileDiffBlockChangeType.Add,o,null,e,r._$diffGutterModified),r._numRowsRendered+=h.oLinesCount-h.mLinesCount)),i===n.blocks.length-1&&r._options.expandable?r._addExpander(i,!1,h.truncatedAfter,r._$diffGutterOriginal):h.truncatedAfter&&(r._addEllipsisLine(i,i!==n.blocks.length-1,f,u,null,!1,r._$diffGutterOriginal),r._addEllipsisLine(i,i!==n.blocks.length-1,o,null,e,!0,r._$diffGutterModified)),r._numRowsRendered>=t.MAX_NUM_RENDERED_ROWS?!1:void 0});this._addFileSummaryCount(c,l);s=this._getLineNumbersColumnWidth();u.css("width",s+"px");e.css("width",s+"px");f.css("margin-left",s+t.TEXT_DIFF_GUTTER_WIDTH+"px");o.css("margin-left",s+t.TEXT_DIFF_GUTTER_WIDTH+"px");this._$sideBySideOriginalDiffContainer.appendTo(a);this._$sideBySideModifiedDiffContainer.appendTo(v)},t.prototype._addExpander=function(n,i,r,u){var f,e,h=this._numRowsRendered,s,o;s=i?this._rowsAboveThread>t.DIFF_PADDING_ROWS:this._rowsBelowThread>t.DIFF_PADDING_ROWS;u&&(r||s)&&(r&&(f=$(rt("div","expander")),f.click(ut(this,function(){this._handleExpanderClick(i,!0)}))),s&&(e=$(rt("div","expander")),e.click(ut(this,function(){this._handleExpanderClick(i,!1)}))),o=$(rt("div","text-diff-gutter-overlay")).css("z-index","10").css("position","absolute").css("width",t.TEXT_DIFF_GUTTER_WIDTH+"px").appendTo(u),i?(o.css("top","0").css("left","0"),f&&($(rt("span")).addClass("bowtie-icon bowtie-chevron-up").appendTo(f),f.appendTo(o)),e&&($(rt("span")).addClass("bowtie-icon bowtie-chevron-down").appendTo(e),e.appendTo(o))):(o.css("bottom","0px").appendTo(u),e&&($(rt("span")).addClass("bowtie-icon bowtie-chevron-up").appendTo(e),e.appendTo(o)),f&&($(rt("span")).addClass("bowtie-icon bowtie-chevron-down").appendTo(f),f.appendTo(o))))},t.prototype._addEllipsisLine=function(n,t,i,r,u,f,e){var s,h,c,l,a,o=this._numRowsRendered;f&&this._numRowsRendered++;this._lineInfoByRowIndex[o]={rowIndex:o,originalLine:0,modifiedLine:0,blockIndex:n,isEllipsis:!0};r&&(s=$(rt("div","ln-o ellipsis-line")).text("...").data("rowIndex",o).appendTo(r));u&&(h=$(rt("div","ln-m ellipsis-line")).text("...").data("rowIndex",o).appendTo(u));e&&(c=$(rt("div","ln-g ellipsis-line")).data("rowIndex",o).appendTo(e));l=$(rt("div","code-line ellipsis-line")).data("rowIndex",o).appendTo(i);a=$(rt("div","ellipsis-line-content")).appendTo(l);t&&(l.addClass("middle"),s&&s.addClass("middle"),h&&h.addClass("middle"),c&&c.addClass("middle"))},t.prototype._handleExpanderClick=function(n,i){var u,f;if(n?(f=this._rowsBelowThread,u=i?this._rowsAboveThread+t.ROWS_TO_EXPAND:Math.max(this._rowsAboveThread-t.ROWS_TO_EXPAND,0)):(u=this._rowsAboveThread,f=i?this._rowsBelowThread+t.ROWS_TO_EXPAND:Math.max(this._rowsBelowThread-t.ROWS_TO_EXPAND,0)),this){var r=a.Positioning.getVerticalScrollContainer($(this.getElement())),e=r.scrollTop(),o=r[0].scrollHeight;this.beginShowDiff(this._repositoryContext,this._itemsDescription,function(){n?r.scrollTop(e):r.scrollTop(e+r[0].scrollHeight-o)},u,f)}},t.prototype._addPlaceholderDivs=function(n,t,i){for(var r=1;r<i;r++)$(rt("div",t)).css("display","none").appendTo(n)},t.prototype._addEmptyChangeLines=function(n,i,r,u,f,e,o){var c,s=this._numRowsRendered,h;i!=0&&(i+s>=t.MAX_NUM_RENDERED_ROWS&&(i=t.MAX_NUM_RENDERED_ROWS-s),h=i*15,f&&($(rt("div","ln-o")).data("rowIndex",s).data("side","o").css("height",h).appendTo(f),this._addPlaceholderDivs(f,"ln-o",i)),e&&($(rt("div","ln-m")).data("rowIndex",s).data("side","m").css("height",h).appendTo(e),this._addPlaceholderDivs(e,"ln-m",i)),c=$(rt("div","code-line dashed-content")).data("rowIndex",s).data("side",e?"m":"o").css("height",h).appendTo(u),this._addPlaceholderDivs(u,"code-line",i),o&&($(rt("div","ln-g")).data("rowIndex",s).data("side",e?"m":"o").css("height",h).appendTo(o),this._addPlaceholderDivs(o,"ln-g",i)))},t.prototype._drawCharDiff=function(n,t,i,r,u,f,e,o){var h,c,s;return f>=r&&f<u?(r!=f&&(h=f-r,$(rt("span")).appendTo(n).text(i.substr(o,h-o)||""),o=h),s=o+e,s>i.length&&(s=i.length),$(rt("span",t)).appendTo(n).text(i.substr(o,s-o)||""),o=s):r>=f&&r<f+e&&(c=e-(r-f),s=o+c,s>i.length&&(s=i.length),$(rt("span",t)).appendTo(n).text(i.substr(o,s-o)||""),o=s),o},t.prototype._drawCharDiffLine=function(n,t,i,r,u,f){for(var e=0,o=0;o<n.length;o++)t===k.FileDiffBlockChangeType.Delete&&(e=this._drawCharDiff(i,"content-original",r,u,f,n[o].oLine,n[o].oLinesCount,e)),t===k.FileDiffBlockChangeType.Add&&(e=this._drawCharDiff(i,"content-modified",r,u,f,n[o].mLine,n[o].mLinesCount,e));e!=r.length&&$(rt("span")).appendTo(i).text(r.substr(e)||"")},t.prototype._addLines=function(n,i,u,f,e,o,s,h,c,l,a,v){var b=this,w=i,y=u,p=this._numRowsRendered,d=this._options.discussionThread&&this._options.discussionThread.position,g=0;n&&$.each(n,function(n,i){var it=w,ut=y,c,nt,u,tt;if(w>b._maxLineNumber&&(b._maxLineNumber=w),y>b._maxLineNumber&&(b._maxLineNumber=y),c=b._lineInfoByRowIndex[p],c?(w>0&&(c.originalLine=w),y>0&&(c.modifiedLine=y)):(c={rowIndex:p,originalLine:w,modifiedLine:y,blockIndex:e},b._lineInfoByRowIndex[p]=c),s&&(nt=$(rt("div","ln-o")).data("rowIndex",p).data("side","o").appendTo(s),w>0&&nt.text(""+w++)),h&&(nt=$(rt("div","ln-m")).data("rowIndex",p).data("side","m").appendTo(h),y>0&&nt.text(""+y++)),u=$(rt("div","code-line")).data("rowIndex",p).appendTo(o),y>0?u.data("side","m"):u.data("side","o"),v?b._drawCharDiffLine(v,f,u,i,g,g+i.length):$(rt("span")).appendTo(u).text(i||""),a?f===k.FileDiffBlockChangeType.Delete?u.addClass("deleted-content-fullrow"):f===k.FileDiffBlockChangeType.Add&&u.addClass("added-content-fullrow"):f===k.FileDiffBlockChangeType.Add?u.addClass("added-content"):f===k.FileDiffBlockChangeType.Delete&&u.addClass("deleted-content"),l&&(d&&(d.positionContext===r.PositionContext.LeftBuffer&&d.startLine===it||d.positionContext!==r.PositionContext.LeftBuffer&&d.startLine===ut)?(tt=$(rt("div","bowtie-icon bowtie-comment-outline inline-comment-marker")).data("rowIndex",p).data("side",y>0?"m":"o").appendTo(l),$(rt("div")).appendTo(tt)):(tt=$(rt("div","ln-g")).data("rowIndex",p).data("side",y>0?"m":"o").appendTo(l),$(rt("div")).appendTo(tt))),p++,p>=t.MAX_NUM_RENDERED_ROWS)return!1;g+=i.length});c&&(this._numRowsRendered=p)},t.prototype._getLineNumbersColumnWidth=function(){for(var t=0,n=this._maxLineNumber;n>0;)t++,n=Math.floor(n/10);return 12+Math.max(t,3)*7},t.prototype.updateLayout=function(){this._handleLayoutChanged()},t.prototype._handleLayoutChanged=function(){$.each(this._currentDiscussionThreadControls,function(n,t){t.updateLayout()});this._updateSideBySideEditorHeight();this._resetImageDiffConstants();this._afterImageLoad()},t.prototype._resetImageDiffConstants=function(){typeof this._imageDiff.mode!="undefined"&&(this._imageDiff.sideBySideHeight=undefined,this._imageDiff.inlineHeight=undefined,this._imageDiff.elements.$canvas&&(this._imageDiff.elements.$canvas.remove(),this._imageDiff.elements.$canvas=undefined),this._imageDiff.elements.$imagesContainer&&this._imageDiff.elements.$imagesContainer.find("img").css({width:"",height:""}))},t.prototype._handleMouseMove=function(n){var t=$(n.target).closest(".ln-g, .ln-o, .ln-m, .code-line"),i=parseInt(t.data("rowIndex")),r=t.data("side")==="o",u;(i!==this._highlightedRowIndex||r!==this._highlightedRowIsOriginalSide)&&(this._clearHighlightedRow(),this._highlightedRowIsOriginalSide=r,i>=0&&(u=this._lineInfoByRowIndex[i],u&&!u.isEllipsis&&(this._highlightRow(i,r),t.hasClass("ln-g")&&this._discussionManager&&!this._options.preventDiscussionCreate&&t.attr("title",e.AddCommentTooltip))))},t.prototype._handleMouseOut=function(){this._clearHighlightedRow()},t.prototype._highlightRow=function(n,t){this._highlightedRowIndex=n;this._$highlightedRowElements=this._getRowElements(n,t,!0);$.each(this._$highlightedRowElements,function(n,t){t.addClass("highlighted-row")})},t.prototype._clearHighlightedRow=function(){this._highlightedRowIndex>=0&&(this._highlightedRowIndex=-1,$.each(this._$highlightedRowElements,function(n,t){t.removeClass("highlighted-row")}))},t.prototype._updateSideBySideEditorHeight=function(){this._sideBySideSplitter&&!this._options.fixedSize&&this._sideBySideSplitter._element.css("height",this._getDiffContainerActualHeight(this._$sideBySideOriginalDiffContainer)+20+"px")},t.prototype._getDiffContainerActualHeight=function(n){if(n){if(n.height()===0){var t=n.find(".code-line");if(t&&t.length>0)return t.length*$(t[0]).height()}return n.height()}return 0},t.prototype._handleDiscussionResized=function(){this._handleLayoutChanged()},t.prototype._handleGutterMouseDown=function(){this._lastSelectionRange=a.SelectionUtils.getSelection()},t.prototype._handleGutterClick=function(n){var t=this,f=$(n.target).closest(".ln-g"),e=parseInt(f.data("rowIndex")),o=f.data("side")==="o",i=this._lineInfoByRowIndex[e],s=this._getDiscussionItemPath(),r,u;return i&&!i.isEllipsis&&!this._options.preventDiscussionCreate&&this._discussionManager&&(r=this._getDiscussionPosition(i,o,this._lastSelectionRange),u=r.position,this._discussionManager.createNewDiscussionThread(s,u,function(n){var e=t._isOriginalPosition(u),h=r.endRowIndex,o=t._getRowElements(h,e),c=o[0][0],l=o.slice(1),s,i,f;s=$.map(l,function(n){return n[0]});f={};$.each(t._lineInfoByRowIndex,function(n,t){e&&t.originalLine>0?f[t.originalLine]=t:!e&&t.modifiedLine>0&&(f[t.modifiedLine]=t)});i=t._insertLineLevelThread(n,c,s,f);i&&(t._options.useNewDiscussionControl||i.getCommentControl(n.comments[0].id).focus(),t._handleLayoutChanged(),i.setSelectedState(!0))})),!1},t.prototype._getDiscussionPosition=function(n,t,i){var u,h,c,w,f,e,v,l,a,o=!1,s=!1,y,p,b;return u={startColumn:1,endColumn:1},n.modifiedLine>0&&!t?(u.startLine=n.modifiedLine,u.endLine=n.modifiedLine,u.positionContext=r.PositionContext.RightBuffer):(u.startLine=n.originalLine,u.endLine=n.originalLine,u.positionContext=r.PositionContext.LeftBuffer),i&&(h=i.$startNode.closest(".code-line"),c=i.$endNode.closest(".code-line"),f=parseInt(h.data("rowIndex")),e=parseInt(c.data("rowIndex")),f>=0&&e>=0&&(s=!0,l=i.startNodeOffset,a=i.endNodeOffset,y=i.$startNode.closest("span")[0],p=i.$endNode.closest("span")[0],(f>e||f===e&&l>a)&&(v=f,f=e,e=v,v=l,l=a,a=v,b=y,y=p,p=b,w=h,h=c,c=w),this._$inlineDiffContainer?(o=!this._lineInfoByRowIndex[e].modifiedLine,this._lineInfoByRowIndex[f][o?"originalLine":"modifiedLine"]||(s=!1)):(o=this._$sideBySideOriginalDiffContainer.has(h).length>0,o!==this._$sideBySideOriginalDiffContainer.has(c).length>0&&(s=!1),o!==t&&(s=!1)),n.rowIndex>=f&&n.rowIndex<=e||(s=!1),s&&(u.positionContext=o?r.PositionContext.LeftBuffer:r.PositionContext.RightBuffer,o?(u.startLine=this._lineInfoByRowIndex[f].originalLine,u.endLine=this._lineInfoByRowIndex[e].originalLine):(u.startLine=this._lineInfoByRowIndex[f].modifiedLine,u.endLine=this._lineInfoByRowIndex[e].modifiedLine),u.startColumn=l+1,u.endColumn=a+1,$.each(h.children(),function(n,t){if(t===y)return!1;u.startColumn+=$(t).text().length}),$.each(c.children(),function(n,t){if(t===p)return!1;u.endColumn+=$(t).text().length})))),s||(f=n.rowIndex,e=n.rowIndex,u.endColumn=this._getRowCodeLineElement(n.rowIndex,u.positionContext===r.PositionContext.LeftBuffer).text().length+1),{position:u,startRowIndex:f,endRowIndex:e}},t.prototype._getRowCodeLineElement=function(n,t){return this._$inlineDiffContainer?this._$inlineDiffContainer.find(".code-line").eq(n):t?this._$sideBySideOriginalDiffContainer.find(".code-line").eq(n):this._$sideBySideModifiedDiffContainer.find(".code-line").eq(n)},t.prototype._getRowElements=function(n,t,i){var r=[];return this._$inlineDiffContainer?(r.push(this._$inlineDiffContainer.find(".code-line").eq(n)),r.push(this._$inlineDiffContainer.find(".ln-o").eq(n)),r.push(this._$inlineDiffContainer.find(".ln-m").eq(n)),this._$diffGutterInline&&r.push(this._$diffGutterInline.find(".ln-g").eq(n))):t?(r.push(this._$sideBySideOriginalDiffContainer.find(".code-line").eq(n)),r.push(this._$sideBySideOriginalDiffContainer.find(".ln-o").eq(n)),this._$diffGutterOriginal&&r.push(this._$diffGutterOriginal.find(".ln-g").eq(n)),i||(r.push(this._$sideBySideModifiedDiffContainer.find(".code-line").eq(n)),r.push(this._$sideBySideModifiedDiffContainer.find(".ln-m").eq(n)),this._$diffGutterModified&&r.push(this._$diffGutterModified.find(".ln-g").eq(n)))):(r.push(this._$sideBySideModifiedDiffContainer.find(".code-line").eq(n)),r.push(this._$sideBySideModifiedDiffContainer.find(".ln-m").eq(n)),this._$diffGutterModified&&r.push(this._$diffGutterModified.find(".ln-g").eq(n)),i||(r.push(this._$sideBySideOriginalDiffContainer.find(".ln-o").eq(n)),r.push(this._$sideBySideOriginalDiffContainer.find(".code-line").eq(n)),this._$diffGutterOriginal&&r.push(this._$diffGutterOriginal.find(".ln-g").eq(n)))),$.grep(r,function(n){return n.length>0})},t.prototype._handleSelectedDiscussionIdChanged=function(n){n!==this._selectedDiscussionId&&(isNaN(this._selectedDiscussionId)||this._element.find(".comment.dt-"+this._selectedDiscussionId).removeClass("selected-thread"),this._element.find(".comment.dt-"+n).addClass("selected-thread"),this._selectedDiscussionId=n)},t.prototype._drawDiscussionThreads=function(){var t=this,n=[];if($.each(this._currentDiscussionThreadControls,function(n,t){t.dispose()}),$(".hidden-comments",this._element).hide().empty(),this._options.threadInsertMarker&&this._addDiscussionThreads([this._options.discussionThread],!1),this._discussionManager&&this._diffModel){if(n=this._discussionManager.getCurrentThreadsForItemPath(this._getDiscussionItemPath()),n.length&&this._addDiscussionThreads(n,!1),this._activeState&&this._options.fixedSize&&this._discussionThreadControlManager.getThreadControl(this._discussionManager.getSelectedThreadId()))return y.delay(this,100,function(){t._discussionThreadControlManager.selectThreadControl(t._discussionManager.getSelectedThreadId(),!0)}),!0;this._discussionThreadControlManager.selectThreadControl(this._discussionManager.getSelectedThreadId(),!1)}else this._options.discussionThread&&this._options.discussionThread.position&&(n.push(this._options.discussionThread),this._addDiscussionThreads(n,!1,!0));return!1},t.prototype._getDiscussionItemPath=function(){var n=(this._diffModel.modifiedFile||this._diffModel.originalFile).serverItem;return this._diffModel.parentContainer&&(n=this._diffModel.parentContainer.serverItem+n),n},t.prototype._isLineLevelThread=function(n){return n.position&&n.position.positionContext!==r.PositionContext.InLineBuffer},t.prototype._addDiscussionThreads=function(n,t,i){var r=this,v=[],y=[],e,o,u,s,h,c,w,b,l,a,f;v=$.grep(n,function(n){return!r._isLineLevelThread(n)});y=$.grep(n,this._isLineLevelThread);v.length>0?(this._$fileLevelDiscussionsContainer&&this._$fileLevelDiscussionsContainer.show(),$.each(v,function(n,t){r._addFileLevelThread(t)})):this._$fileLevelDiscussionsContainer&&this._$fileLevelDiscussionsContainer.hide();y.length>0&&(this._$inlineDiffContainer||this._$sideBySideModifiedDiffContainer)&&(w={},b={},l=0,a=0,$.each(this._lineInfoByRowIndex,function(n,t){t.originalLine>0&&(w[t.originalLine]=t,l=Math.max(l,t.originalLine));t.modifiedLine>0&&(b[t.modifiedLine]=t,a=Math.max(a,t.modifiedLine))}),this._$inlineDiffContainer?(e=this._$inlineDiffContainer.find(".ln-o"),o=this._$inlineDiffContainer.find(".ln-m"),u=this._$inlineDiffContainer.find(".code-line"),s=u):this._$sideBySideModifiedDiffContainer&&(e=this._$sideBySideOriginalDiffContainer.find(".ln-o"),o=this._$sideBySideModifiedDiffContainer.find(".ln-m"),u=this._$sideBySideOriginalDiffContainer.find(".code-line"),s=this._$sideBySideModifiedDiffContainer.find(".code-line")),this._$diffGutterInline?h=this._$diffGutterInline.find(".ln-g"):(h=this._$diffGutterOriginal.find(".ln-g"),c=this._$diffGutterModified.find(".ln-g")),f=0,$.each(y,function(n,t){var p=r._isOriginalPosition(t.position),k=p?w:b,d,y=[],nt=p?l:a,g=t.position.endColumn===1&&t.position.endLine>t.position.startLine?t.position.endLine-1:t.position.endLine,v=k[g];v||r._options.partialDiff||(v=k[t.position.endLine-1]);v?(d=(p?u:s)[v.rowIndex],e.length>v.rowIndex&&y.push(e[v.rowIndex]),o.length>v.rowIndex&&y.push(o[v.rowIndex]),h.length>v.rowIndex&&y.push(h[v.rowIndex]),c&&c.length>v.rowIndex&&y.push(c[v.rowIndex]),r._$sideBySideModifiedDiffContainer&&y.push((p?s:u)[v.rowIndex]),r._insertLineLevelThread(t,d,y,k,i)):f++}),f&&$(rt("a")).text(f===1?g.HiddenCommentsSingle:p.format(g.HiddenComments,f)).attr("href",this._element.closest(".file-container").find(".file-cell .file-name a.file-name-link").attr("href")).appendTo(this._$hiddenCommentsElement.show()))},t.prototype._addFileLevelThread=function(n,t){var i=null;this._options.useNewDiscussionControl?(i=new tt.BuiltInDiffViewerDiscussionThreadControlReact(this,n,this._discussionThreadControlManager,$(rt("div")).appendTo(this._$fileLevelDiscussionsContainer||this._element)),this._currentDiscussionThreadControls.push(i)):(i=new nt.BuiltInDiffViewerDiscussionThreadControl(this,n,this._discussionThreadControlManager,$(rt("div")).appendTo(this._$fileLevelDiscussionsContainer||this._element)),this._currentDiscussionThreadControls.push(i),t&&i.getCommentControl(n.comments[0].id).focus())},t.prototype._insertLineLevelThread=function(n,t,i,r,f){var h=null,c,e,l,o,s,a,v;if(this._options.useNewDiscussionControl){for(c=this._isOriginalPosition(n.position),o=n.position.startLine;o<=n.position.endLine;o++)s=r[o],s?(e=this._getRowCodeLineElement(s.rowIndex,c),this._decorateCodeLineWithThread(s,e,n,c)):e=null;return f?null:(e&&(l=e.text()),h=new tt.BuiltInDiffViewerDiscussionThreadControlReact(this,n,this._discussionThreadControlManager,$(rt("div","discussion-container")).insertAfter(t),$.map(i,function(n){return $(rt("div","discussion-filler")).insertAfter(n)}),u.DiscussionThreadControl.calculateHorizontalOffset(n.position,l||"")),this._currentDiscussionThreadControls.push(h),h)}for(c=this._isOriginalPosition(n.position),o=n.position.startLine;o<=n.position.endLine;o++)s=r[o],s?(e=this._getRowCodeLineElement(s.rowIndex,c),this._decorateCodeLineWithThread(s,e,n,c)):e=null;return(e&&(l=e.text()),this._options.threadInsertMarker)?(a=$(rt("div","external-discussion-container "+this._options.threadInsertMarker)).insertAfter(t)[0],$.isFunction(this._options.threadInsertMethod)&&this._options.threadInsertMethod(a),v=$(a).outerHeight(!0),i.forEach(function(n){$(rt("div","discussion-filler")).insertAfter(n).height(v)}),null):(h=new nt.BuiltInDiffViewerDiscussionThreadControl(this,n,this._discussionThreadControlManager,$(rt("div","discussion-container")).insertAfter(t),$.map(i,function(n){return $(rt("div","discussion-filler")).insertAfter(n)}),u.DiscussionThreadControl.calculateHorizontalOffset(n.position,l||"")),this._currentDiscussionThreadControls.push(h),h)},t.prototype.updateExternalThreadSize=function(){var t=this.getElement()[0].getElementsByClassName("external-discussion-container"),n;if(t.length>0){var r=$(t[0]).outerHeight(!0),i=this.getElement()[0].getElementsByClassName("discussion-filler"),u=i.length;for(n=0;n<u;++n)$(i[n]).height(r)}},t.prototype._decorateCodeLineWithThread=function(n,t,i,r){var o=t.text(),s=r?n.originalLine:n.modifiedLine,u=0,f=0,e,h="dt-"+i.id;if(s===i.position.startLine&&(u=i.position.startColumn),s===i.position.endLine){if(i.position.endColumn===1)return!1;f=i.position.endColumn-1}u<1&&(u=1);(f===0||f>o.length)&&(f=o.length);e=1;$.each(t.children(),function(n,t){var i=$(t),o=i.text(),r=e,s=e+o.length,c;f>=r&&u<=s&&(c=i.attr("class")||"",i.addClass("comment"),i.addClass(h),u>r&&($(rt("span")).addClass(c).insertBefore(i).text(o.substr(0,u-r)),i.text(o.substr(u-r))),f<s&&($(rt("span")).addClass(c).insertAfter(i).text(i.text().substr(f-u+1)),i.text(i.text().substr(0,f-u+1))));e=s})},t.prototype._handleThreadRemoved=function(n){this._currentDiscussionThreadControls=$.grep(this._currentDiscussionThreadControls,function(t){return t.getThread().id!==n});this._removeLineDecorationsForThread(n);this._handleLayoutChanged()},t.prototype._removeLineDecorationsForThread=function(n){var t="dt-"+n;$.each(this._element.find(".comment."+t),function(n,i){var r=$(i);r.removeClass(t);r.removeClass("selected-comment");r.attr("class").indexOf("dt-")<0&&r.removeClass("comment")})},t.prototype._updateLineDecorationsForSavedThread=function(n,t){var i="dt-"+n,r="dt-"+t;$.each(this._element.find(".comment."+i),function(n,t){var u=$(t);u.removeClass(i);u.addClass(r)});this._selectedDiscussionId===n&&(this._selectedDiscussionId=t)},t.prototype._isOriginalPosition=function(n){return n.positionContext===r.PositionContext.LeftBuffer},t.prototype._onOriginalScroll=function(){if(!this._modifiedScrolling.pop()){this._originalScrolling.push(!0);var n=this._sideBySideSplitter.rightPane.scrollTop(),t=this._sideBySideSplitter.rightPane.scrollLeft();this._sideBySideSplitter.rightPane.scrollTop(this._sideBySideSplitter.leftPane.scrollTop());this._sideBySideSplitter.rightPane.scrollLeft(this._sideBySideSplitter.leftPane.scrollLeft());n==this._sideBySideSplitter.rightPane.scrollTop()&&t==this._sideBySideSplitter.rightPane.scrollLeft()&&this._originalScrolling.pop()}},t.prototype._onModifiedScroll=function(){if(!this._originalScrolling.pop()){this._modifiedScrolling.push(!0);var n=this._sideBySideSplitter.leftPane.scrollTop(),t=this._sideBySideSplitter.leftPane.scrollLeft();this._sideBySideSplitter.leftPane.scrollTop(this._sideBySideSplitter.rightPane.scrollTop());this._sideBySideSplitter.leftPane.scrollLeft(this._sideBySideSplitter.rightPane.scrollLeft());n==this._sideBySideSplitter.leftPane.scrollTop()&&t==this._sideBySideSplitter.leftPane.scrollLeft()&&this._modifiedScrolling.pop()}},t.prototype.onContentClick=function(n){var t=$(n.target).closest(".code-line, .ln-o, .ln-m");t.length?this._selectRowByIndex(parseInt(t.data("rowIndex")),!1):this._currentlySelectedRowIndex=-1;this._updateButtons()},t.prototype.onNextClick=function(){this._onPrevOrNextClick(1)},t.prototype.onPrevClick=function(){this._onPrevOrNextClick(-1)},t.prototype._onPrevOrNextClick=function(n){var r=-1,i,t;if(this._diffModel&&this._diffModel.blocks)for(this._currentlySelectedRowIndex>=0&&(i=this._lineInfoByRowIndex[this._currentlySelectedRowIndex],i&&(r=i.blockIndex)),t=r+n;t>=0&&t<this._diffModel.blocks.length;t+=n)if(this._diffModel.blocks[t].changeType!==k.FileDiffBlockChangeType.None){this._selectRowByIndex(this._startRowIndexByBlockIndex[t],!0);break}this._updateButtons()},t.prototype._selectRowByIndex=function(n,t){var i;this._$inlineDiffContainer?(this._$inlineDiffContainer.find(".selected-line").removeClass("selected-line"),this._$inlineDiffContainer.find(".ln-o").eq(n).addClass("selected-line"),this._$inlineDiffContainer.find(".ln-m").eq(n).addClass("selected-line"),i=this._$inlineDiffContainer.find(".code-line").eq(n).addClass("selected-line")):(this._$sideBySideOriginalDiffContainer&&(this._$sideBySideOriginalDiffContainer.find(".selected-line").removeClass("selected-line"),this._$sideBySideOriginalDiffContainer.find(".ln-o").eq(n).addClass("selected-line"),this._$sideBySideOriginalDiffContainer.find(".code-line").eq(n).addClass("selected-line")),this._$sideBySideModifiedDiffContainer&&(this._$sideBySideModifiedDiffContainer.find(".selected-line").removeClass("selected-line"),this._$sideBySideModifiedDiffContainer.find(".ln-m").eq(n).addClass("selected-line"),i=this._$sideBySideModifiedDiffContainer.find(".code-line").eq(n).addClass("selected-line")));t&&i&&i.length&&a.Positioning.scrollIntoViewVertical(i,a.Positioning.VerticalScrollBehavior.Middle,!0);this._currentlySelectedRowIndex=n},t.prototype._updateButtons=function(){var r=!1,u=!1,t=-1,i,n;if(this._updateDiffButtonsCallback){if(this._diffModel&&this._diffModel.blocks){for(this._currentlySelectedRowIndex>=0&&(i=this._lineInfoByRowIndex[this._currentlySelectedRowIndex],i&&(t=i.blockIndex)),n=t-1;n>=0;n--)if(this._diffModel.blocks[n].changeType!==k.FileDiffBlockChangeType.None){r=!0;break}for(n=t+1;n<this._diffModel.blocks.length;n++)if(this._diffModel.blocks[n].changeType!==k.FileDiffBlockChangeType.None){u=!0;break}}this._updateDiffButtonsCallback(r,u)}},t.TEXT_DIFF_GUTTER_WIDTH=20,t.MAX_NUM_RENDERED_ROWS=2e3,t.MAX_INLINE_HEIGHT=250,t.DEFAULT_IMAGE_DIFF_MODE=b.DiffViewerImageMode.TwoUp,t.ROWS_TO_EXPAND=10,t.DIFF_PADDING_ROWS=3,t}(i.BaseControl);t.BuiltInDiffViewer=ft;l.classExtend(ft,ot.ControlExtensions)});
define("VersionControl/Scripts/Controls/ChangeListSummaryControlFilter",["require","exports"],function(n,t){function i(n,t){var i=null,r=null,u=!1,f=!1;return n&&(n.path&&(i=n.path),n.recursive&&(u=!0)),t&&(t.path&&(r=t.path),t.recursive&&(f=!0)),i===r&&u===f}t.summaryFilterEquals=i});
define("VersionControl/Scripts/Controls/ChangeListSummaryFilesControl",["require","exports","VSS/Controls","Presentation/Scripts/TFS/TFS.Discussion.OM","VSS/Controls/Menus","VSS/Controls/Navigation","VSS/Controls/Notifications","VSS/Utils/UI","VSS/Navigation/Services","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Array","VersionControl/Scripts/Generated/TFS.VersionControl.Legacy.Contracts","VersionControl/Scripts/Generated/TFS.VersionControl.WebAccess.Contracts","VersionControl/Scripts/RepositoryType","VersionControl/Scripts/TFS.VersionControl","VersionControl/Scripts/VersionControlFileIconPicker","VersionControl/Scripts/VersionControlPath","VersionControl/Scripts/CustomerIntelligenceConstants","VersionControl/Scripts/VersionControlUrls","VersionControl/Scripts/Controls/ControlsCommon","VersionControl/Scripts/Controls/DiffBuiltInDiffViewer","VersionControl/Scripts/Resources/TFS.Resources.VersionControl","VersionControl/Scripts/TFS.VersionControl.VersionSpecs","VersionControl/Scripts/Controls/ChangeListSummaryControlFilter","VersionControl/Scripts/Controls/VersionControlDiscussionThreadControl","VSS/LoaderPlugins/Css!VersionControlControls"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut){var et=h.delegate,ft=o.domElem,ot=function(n){function t(){n.apply(this,arguments);this._allowHideComments=!0}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this._diffOrientation=v.DiffViewerOrientation.Inline;this._displayMode=v.ChangeExplorerGridDisplayMode.FullTree;this._diffViewers=[];this._discussionUpdatedListener=et(this,this.onDiscussionCommentsUpdated);this._activeState=!0;this._imageDimensions={};this._discussionThreadControlManager=new r.DiscussionThreadControlManager(this._options.tfsContext)},t.prototype._dispose=function(){n.prototype._dispose.call(this);this._discussionManager&&this._discussionManager.removeDiscussionThreadsUpdatedListener(this._discussionUpdatedListener);this._discussionThreadControlManager.dispose()},t.prototype.setActiveState=function(n,t){this._activeState=n;$.each(this._diffViewers,function(i,r){r.setActiveState(n,t);n&&r.updateLayout()})},t.prototype.setModel=function(n,t,i,r,u,f,e){var o=this;(this._element.empty(),this._repositoryContext=n,this._changeListModel=t,this._oversion=i,this._mversion=r,this._displayMode=e,this._queuedDiffFetchInfos=[],this._outstandingFetchDiffCalls=[],this._diffViewers=[],this._$diffSummaryHeader=null,this._currentFilter=u,this._currentGroups={},t)&&(this._$moreChangesSection=$(ft("div","vc-more-changes-warning")).appendTo(this._element),this._updateShowMoreChangesSection(),this._$filesSummary=$(ft("div","vc-change-summary-files")).appendTo(this._element),f?(this._diffOrientation=f,this._populateFilesSummary()):this._repositoryContext.getClient().beginGetUserPreferences(function(n){o._diffOrientation=n.summaryDiffOrientation;o._populateFilesSummary()}))},t.prototype.setAllowHideComments=function(n){n===void 0&&(n=!0);this._allowHideComments=n;this._updateMenuItems()},t.prototype.getCurrentFilter=function(){return this._currentFilter},t.prototype.getCurrentChangeModel=function(){return this._changeListModel},t.prototype.getCurrentDisplayMode=function(){return this._displayMode},t.prototype.setFilter=function(n){rt.summaryFilterEquals(n,this._currentFilter)||(this._currentFilter=n,this.applyFilter(n),this._updateMenuItems(),this._fetchDiffsForViewableChanges())},t.prototype.hideMoreChangesSection=function(){this._$moreChangesSection.hide()},t.prototype.doesFilterMatchFile=function(n,t,i){var r=this._repositoryContext.pathStartsWith(t,n);return r&&!i&&t.indexOf("/",n.length)>=0&&(r=!1),r},t.prototype.applyFilter=function(n){var i=this,t,r;this._$filesContainer&&(n&&n.path?(t=n.path,t[t.length-1]!=="/"&&(t=t+"/"),r=[],$.each(this._$filesContainer.find(".file-container"),function(u,f){var e=$(f),o=i._allChanges[e.data("changeIndex")],s,h;o&&(h=n.recursive||!i._currentGroups[n.path],s=i.doesFilterMatchFile(t,o.item.serverItem,h),e.toggle(s),s?(r.push(o),e.data("hiddenByFilter",!1)):e.data("hiddenByFilter",!0))}),this._updateShowingSummary(r,t),this._$artifactLevelDiscussionsContainer&&(this._$artifactLevelDiscussionsContainer.hide(),this._$otherDiscussionsContainer.hide())):(this._$filesContainer.find(".file-container").data("hiddenByFilter",!1),this._$filesContainer.find(".file-container").show(),this._updateShowingSummary(this._allChanges),this._$artifactLevelDiscussionsContainer&&(this._$artifactLevelDiscussionsContainer.show(),this._$otherDiscussionsContainer.show())))},t.prototype._updateShowMoreChangesSection=function(){var n;!this._changeListModel||this._changeListModel.allChangesIncluded?this._$moreChangesSection.hide():(this._$moreChangesSection.empty(),n=this._repositoryContext.getRepositoryType()===y.RepositoryType.Git?tt.CommitMoreItemsMessage:this._changeListModel.isShelveset?tt.ShelvesetMoreItemsMessage:tt.ChangesetMoreItemsMessage,$(ft("span")).text(c.format(n,this._changeListModel.changes.length)).appendTo(this._$moreChangesSection),$(ft("a","more-changes-link")).text(tt.ClickForMoreChangesText).click(et(this,this._onMoreChangesClick)).appendTo($(ft("span")).appendTo(this._$moreChangesSection)),this._$moreChangesSection.show())},t.prototype._onMoreChangesClick=function(){var t=Math.max(1e3,2*this._changeListModel.changes.length),n=s.getHistoryService(),i=this._getGitDiffParentAction(n.getCurrentState());n.addHistoryPoint(i||g.VersionControlActionIds.Summary,{maxChanges:t})},t.prototype._getFileGroups=function(n,i){var f=this,u=[],r;return this._currentGroups={},n.length>0&&($.each(n,function(n,t){var r,e,u;t.item.isFolder?(r=t.item.serverItem,e=null):(r=f._displayMode===v.ChangeExplorerGridDisplayMode.FilesOnly?"/":b.getFolderName(t.item.serverItem),e=b.getFileName(t.item.serverItem));u=f._currentGroups[r];u||(u={name:r,items:[],folderEntry:i[r]},f._currentGroups[r]=u);t.item.isFolder?u.folderEntry=t:u.items.push({name:e,entry:t,index:n})}),$.each(this._currentGroups,function(n,i){if(i.items)for(i.items.length<=t.MAX_CLIENT_SORTING_THRESHOLD&&i.items.sort(function(n,t){return c.localeIgnoreCaseComparer(n.name,t.name)}),r=0;r<i.items.length;r++)i.items[r].entry.index=i.items[r].index,i.items[r]=i.items[r].entry;u.push(i)}),u.length<=t.MAX_CLIENT_SORTING_THRESHOLD&&u.sort(function(n,t){return c.localeIgnoreCaseComparer(n.name,t.name)})),u},t.prototype._populateFilesSummary=function(){var e=this,c={},s,t,n,h=this._$filesSummary,r,l,a;(h.empty(),this._diffViewers=[],this._changeListModel&&this._changeListModel.changes)&&(this._allChanges=$.grep(this._changeListModel.changes,function(n){return p.ChangeType.isSourceRenameDelete(n.changeType)?!1:n.item.isFolder&&(c[n.item.serverItem]=n,e._repositoryContext.getRepositoryType()===y.RepositoryType.Git)?!1:!0}),s=this._getFileGroups(this._allChanges,c),t=$(ft("div","changed-files-summary-header")),r=[],s.length===0?(n=this.getEmptyResultContainer(),this._$artifactLevelDiscussionsContainer=$(ft("div","artifact-level-discussion-container")).appendTo(n),this._$otherDiscussionsContainer=$(ft("div","other-discussions-container")).appendTo(n)):(this._$diffSummaryHeader=$(ft("div","diff-showing-summary")).appendTo(t),this._updateShowingSummary(this._allChanges),this._actionsMenu=i.BaseControl.createIn(u.MenuBar,t,{items:[],cssClass:"actions-menu"}),this._diffOrientationMenu=i.BaseControl.createIn(f.PivotFilter,this._actionsMenu,{behavior:"dropdown",align:"right-bottom",useBowtieStyle:!0}),this._updateDiffMenuItems(),this._diffOrientationMenu.getElement().bind("changed",function(n,t){e._onDiffOrientationMenuItemClick(t.value)}),this._updateMenuItems(),this._$filesContainer=$(ft("div","files-container")),n=this._$filesContainer,this._$artifactLevelDiscussionsContainer=$(ft("div","artifact-level-discussion-container")).appendTo(this._$filesContainer),this._$otherDiscussionsContainer=$(ft("div","other-discussions-container")).appendTo(this._$filesContainer),this._discussionManager&&(l=this._discussionManager.getCurrentThreadsForItemPath(null),$.each(l,function(n,t){e._addArtifactLevelThread(t)})),a=0,$.each(s,function(n,t){$.each(t.items,function(n,t){r[a++]='<div class="file-container" data-change-index=\''+t.index+'\'>\n                            <div class="file-row">\n                                <div class="file-icon bowtie-icon"><\/div>\n                                <div class="file-cell">\n                                    <div class="file-name"><\/div>\n                                    <div class="file-path"><\/div>\n                                <\/div>\n                            <\/div>\n                            <div class="item-details">\n                                <div class="loading-container">\n                                    <span class="big-status-progress"><\/span>\n                                    <span class="loading-message">'+tt.LoadingText+"<\/span>\n                                <\/div>\n                            <\/div>\n                        <\/div>"})})),h.append(t),h.append(n),r.length>0&&this._$filesContainer.append(r.join("")),this._currentFilter&&this.applyFilter(this._currentFilter),this._$filesContainer&&(this._$filesScrollContainer=o.Positioning.getVerticalScrollContainer(this._$filesContainer),this._$filesScrollContainer.unbind("scroll.tfs-files-container"),$(window).unbind("resize.tfs-files-container"),this._$filesScrollContainer.bind("scroll.tfs-files-container",et(this,this._handleResize)),$(window).bind("resize.tfs-files-container",et(this,this._handleResize)),this._fetchDiffsForViewableChanges()),this._discussionManager&&this._discussionThreadControlManager.selectThreadControl(this._discussionManager.getSelectedThreadId(),!1),this._artifactThreadControls&&$.each(this._artifactThreadControls,function(n,t){t.updateCommentSizes()}))},t.prototype._createFileRow=function(n,t,i){var o,f,s,h,u,l,d,e,g,v,nt,r,it,y,k;return u=b.getFileName(n.item.serverItem),d=b.getFolderName(n.item.serverItem),e=b.combinePaths(d,u),h=p.ChangeType.getDisplayText(n.changeType),r=$(ft("div","file-container")),r.data("changeEntry",n),r.data("changeIndex",t),r.bind("image-dimensions-calculated",r,et(this,this._imageDimensionsHandler)),l=$(ft("div","file-row")).appendTo(r),v=n.sourceServerItem&&p.ChangeType.hasChangeFlag(n.changeType,a.VersionControlChangeType.Rename)?!0:!1,nt=n.sourceServerItem&&p.ChangeType.hasChangeFlag(n.changeType,a.VersionControlChangeType.Branch)?!0:!1,g=!n.item.isFolder&&(p.ChangeType.isEdit(n.changeType)||v||nt||p.ChangeType.hasChangeFlag(n.changeType,a.VersionControlChangeType.Add)||p.ChangeType.hasChangeFlag(n.changeType,a.VersionControlChangeType.Delete)||p.ChangeType.hasChangeFlag(n.changeType,a.VersionControlChangeType.Undelete)),it=w.getIconNameForFile(e),$(ft("div","file-icon bowtie-icon "+it)).appendTo(l),o=$(ft("div","file-cell")).appendTo(l),f=$(ft("div","file-name")).appendTo(o),n.item.isFolder?f.text(u||""):this._createFileLink(f,n,u,i),u=n.item.serverItem,h&&(u+=" ["+h+"]"),y=f.children("a"),y&&y.attr("title",u||""),this._imageDimensions[u]={},$(ft("div","file-path")).appendTo(o).attr("title",e).text(e),g&&(s=$(ft("div","item-details")).appendTo(r),v&&$(ft("div","item-details-header")).text(c.format(tt.RenamedFromFormat,n.sourceServerItem)).attr("title",c.format(tt.RenamedFromFormat,n.sourceServerItem)).appendTo(s),k=$(ft("div","loading-container")).appendTo($(ft("div","item-details-body")).appendTo(s)),$(ft("span","big-status-progress")).appendTo(k),$(ft("span","loading-message")).text(tt.LoadingText).appendTo(k),r.data("fetching-diff",!1)),r},t.prototype.getEmptyResultContainer=function(){var n=$(ft("div","no-changes-message")),t;return this._repositoryContext.getRepositoryType()===y.RepositoryType.Git&&(t=this._changeListModel,i.BaseControl.createIn(e.MessageAreaControl,n,{closeable:!1,message:{type:e.MessageAreaType.Info,header:this._getEmptyGitCommitMessage(t)}})),n},t.prototype._getEmptyGitCommitMessage=function(n){var u=this,t,i,r;return n.parents&&n.parents.length>1?(i=s.getHistoryService().getCurrentState()||{},r=$.map(n.parents,function(t,r){return u._getDiffParentJQuery(i,n,r+1)[0].outerHTML}),t=tt.NoUniqueChangeInMergeCommitMsgFormat+r.join(" | ")):t=this._options.noChangesMessage||tt.NoChangesInCommitMessage,$(ft("span")).html(t)},t.prototype._getDiffParentJQuery=function(n,t,i){return $(ft("a")).attr("href",this._getDiffParentUrl(n,t,i)).text(c.format(tt.DiffParentCommitTitleFormat,i,t.parents[i-1].objectId.short))},t.prototype._getDiffParentUrl=function(n,t,i){var r={action:g.VersionControlActionIds.DiffParent+i};return n.fullScreen&&(r.fullScreen=n.fullScreen),d.getChangeListUrl(this._repositoryContext,t,!0,null,r)},t.prototype._imageDimensionsHandler=function(n,t){var f=n.data,e=f.find(".file-cell.file-name"),i=e.attr("title"),r,u,s,o;t.leftWidth&&(this._imageDimensions[i].leftWidth=t.leftWidth);t.leftHeight&&(this._imageDimensions[i].leftHeight=t.leftHeight);t.rightWidth&&(this._imageDimensions[i].rightWidth=t.rightWidth);t.rightHeight&&(this._imageDimensions[i].rightHeight=t.rightHeight);this._imageDimensions[i].rightWidth&&this._imageDimensions[i].rightHeight&&(this._imageDimensions[i].modAdded!==!0&&(u=c.format(tt.ImageDimensions,this._imageDimensions[i].rightWidth,this._imageDimensions[i].rightHeight),s=$(ft("span","image-dimensions")).text(u).attr("title",u).insertAfter(e.find("a.file-name-link")),this._imageDimensions[i].modAdded=!0),this._imageDimensions[i].origAdded!==!0&&this._imageDimensions[i].leftWidth&&this._imageDimensions[i].leftHeight&&(this._imageDimensions[i].leftWidth!==this._imageDimensions[i].rightWidth||this._imageDimensions[i].leftHeight!==this._imageDimensions[i].rightHeight)&&(o=$(ft("div","item-details")).appendTo(f.find(".file-row")),r=c.format(tt.OriginalImageDimensions,this._imageDimensions[i].leftWidth,this._imageDimensions[i].leftHeight),$(ft("div","item-details-header")).text(r).attr("title",r).appendTo(o),this._imageDimensions[i].origAdded=!0))},t.prototype._createFileLink=function(n,t,r,u){var e=this._getGitDiffParentAction(u);i.BaseControl.createIn(f.NavigationLink,n,{cssClass:"file-name-link",text:r,initialState:u,state:{action:p.ChangeType.isEdit(t.changeType)?g.VersionControlActionIds.Compare:g.VersionControlActionIds.Contents,path:t.item.serverItem,oversion:p.ChangeType.isEdit(t.changeType)?this._oversion:undefined,diffParent:e}})},t.prototype._getGitDiffParentAction=function(n){return(n.action||"").indexOf(g.VersionControlActionIds.DiffParent)===0?n.action:null},t.prototype._handleResize=function(){var n=this;this.delayExecute("resizeHandler",200,!0,function(){n._fetchDiffsForViewableChanges()})},t.prototype.handleSelectionChange=function(){this._fetchDiffsForViewableChanges()},t.prototype._onDiffOrientationMenuItemClick=function(n){var t=this;n!==this._diffOrientation&&(n===v.DiffViewerOrientation.Inline?this._options.customerIntelligenceData&&this._options.customerIntelligenceData.publish(k.CHANGELISTSUMMARY_FILES_INLINE_DIFF,!1):this._options.customerIntelligenceData&&this._options.customerIntelligenceData.publish(k.CHANGELISTSUMMARY_FILES_SIDE_BY_SIDE_DIFF,!1),this._diffOrientation=n,this._repositoryContext.getClient().beginGetUserPreferences(function(n){n.summaryDiffOrientation=t._diffOrientation;t._repositoryContext.getClient().beginUpdateUserPreferences(n)}),this._updateMenuItems(),$.each(this._diffViewers,function(n,i){i.setOrientation(t._diffOrientation,!0)}),this._options&&this._options.orientationChangeCallback&&this._options.orientationChangeCallback(this._diffOrientation))},t.prototype.refreshChangedFiles=function(){this._updateShowMoreChangesSection();this._populateFilesSummary()},t.prototype.setDiscussionManager=function(n,t){this._discussionManager!==n&&(n||this._discussionManager)?(this._discussionManager&&this._discussionManager.removeDiscussionThreadsUpdatedListener(this._discussionUpdatedListener),this._discussionManager=n,n&&this._discussionManager.addDiscussionThreadsUpdatedListener(this._discussionUpdatedListener),this._discussionThreadControlManager.setDiscussionManager(this._discussionManager),this._diffViewers&&t&&$.each(this._diffViewers,function(t,i){i.setDiscussionManager(n,!0)})):t&&n&&(this._artifactThreadControls&&$.each(this._artifactThreadControls,function(n,t){t.updateCommentSizes()}),this._diffViewers&&$.each(this._diffViewers,function(n,t){t.updateDiscussionThreads()}))},t.prototype.onDiscussionCommentsUpdated=function(n,t){var r=this,i=n.filterEventData(t,null);i.currentThreads?(this._artifactThreadControls&&(this._$artifactLevelDiscussionsContainer.empty(),this._$otherDiscussionsContainer.empty(),this._$otherDiscussionsHeader=null,this._$otherDiscussionsContents=null,$.each(this._artifactThreadControls,function(n,t){t.dispose()})),$.each(i.currentThreads,function(n,t){r._addArtifactLevelThread(t)})):i.newThreads&&$.each(i.newThreads,function(n,t){r._addArtifactLevelThread(t,n===0)});t.threadSelected&&this._discussionThreadControlManager.selectThreadControl(t.threadSelected.id,this._activeState&&t.navigateToSelectedThread,t.state);(t.currentThreads||t.deletedThreads&&t.deletedThreads.length||t.newThreads&&t.newThreads.length)&&this._updateMenuItems()},t.prototype._toggleOtherDiscussions=function(n){n!==this._$otherDiscussionsHeader.data("expanded")&&(this._$otherDiscussionsContents.toggle(n),this._$otherDiscussionsHeader.data("expanded",n),this._$otherDiscussionsHeader.text(c.format(n?tt.HideOtherCommentsFormat:tt.ShowOtherCommentsFormat,this._$otherDiscussionsHeader.data("threadCount"))),n&&$.each(this._artifactThreadControls,function(n,t){t.updateCommentSizes()}))},t.prototype._addArtifactLevelThread=function(n,t){var r=this,i,u;this._options.hideArtifactLevelDiscussions||(i=new ut.VersionControlDiscussionThreadControl(n,this._discussionThreadControlManager),n.originalItemPath?(this._$otherDiscussionsHeader||(this._$otherDiscussionsHeader=$(ft("a")).data("expanded",!1).appendTo($(ft("div","other-discussions-header")).appendTo(this._$otherDiscussionsContainer)).click(function(){var n=!r._$otherDiscussionsHeader.data("expanded");return r._toggleOtherDiscussions(n),!1}),this._$otherDiscussionsContents=$(ft("div","other-discussions-content")).appendTo(this._$otherDiscussionsContainer).hide()),u=1+(this._$otherDiscussionsHeader.data("threadCount")||0),this._$otherDiscussionsHeader.data("threadCount",u),this._$otherDiscussionsHeader.text(c.format(tt.ShowOtherCommentsFormat,u)),i.appendTo(this._$otherDiscussionsContents),i.getElement().bind("discussion-thread-control-selected",function(){r._toggleOtherDiscussions(!0)})):i.appendTo(this._$artifactLevelDiscussionsContainer),t&&i.getCommentControl(n.comments[0].id).focus(),this._artifactThreadControls||(this._artifactThreadControls=[]),this._artifactThreadControls.push(i))},t.prototype._queueFetchDiffs=function(n,i){n=l.subtract(n,this._outstandingFetchDiffCalls,function(n,t){return n.change===t.change?0:-1});i?this._queuedDiffFetchInfos=n.concat(l.subtract(this._queuedDiffFetchInfos,n,function(n,t){return n.change===t.change?0:-1})):this._queuedDiffFetchInfos.concat(l.subtract(n,this._queuedDiffFetchInfos,function(n,t){return n.change===t.change?0:-1}));this._queuedDiffFetchInfos.length>=t.MAX_QUEUED_FETCH_DIFF_CALLS&&(this._queuedDiffFetchInfos=this._queuedDiffFetchInfos.splice(0,t.MAX_QUEUED_FETCH_DIFF_CALLS))},t.prototype._processFetchDiffQueue=function(){for(var n;this._outstandingFetchDiffCalls.length<t.MAX_SIMULTANEOUS_FETCH_DIFF_CALLS&&this._queuedDiffFetchInfos.length>0;)n=this._queuedDiffFetchInfos.splice(0,1)[0],this._outstandingFetchDiffCalls.push(n),this._fetchDiff(n)},t.prototype._fetchDiff=function(n){var f=this,t,e,u,h,c=this._oversion,o,r,v,s,y;n.$container.data("fetching-diff",!0);e=n.$container.find(".item-details-body");e.empty();y=n.$container.find(".file-name");r=n.change.changeType;v=!p.ChangeType.isEdit(r)&&!p.ChangeType.hasChangeFlag(r,a.VersionControlChangeType.Add)&&!p.ChangeType.hasChangeFlag(r,a.VersionControlChangeType.Delete)&&!p.ChangeType.hasChangeFlag(r,a.VersionControlChangeType.Undelete);t=i.BaseControl.createIn(nt.BuiltInDiffViewer,e,{tfsContext:this._options.tfsContext,partialDiff:!0,fixedSize:!1,orientation:this._diffOrientation,discussionThreadControlManager:this._discussionThreadControlManager,supportCommentStatus:this._options.supportCommentStatus,useNewDiscussionControl:this._options.useNewDiscussionControl,$summaryRow:y});t.setDiscussionManager(this._discussionManager,!1);t.setActiveState(this._activeState,!0);n.$container.data("diff-viewer",t);this._diffViewers.push(t);s=function(){l.remove(f._outstandingFetchDiffCalls,n);f._processFetchDiffQueue();f._fetchDiffsForViewableChanges()};v?(t.setDiffModel({modifiedFile:n.change.item}),s()):(p.ChangeType.hasChangeFlag(n.change.changeType,a.VersionControlChangeType.Add)||p.ChangeType.hasChangeFlag(n.change.changeType,a.VersionControlChangeType.Undelete)?u="":(u=n.change.item.serverItem,n.change.sourceServerItem&&(o=it.VersionSpec.parse(this._oversion),!p.ChangeType.hasChangeFlag(n.change.changeType,a.VersionControlChangeType.Branch)&&o instanceof it.PreviousVersionSpec||(u=n.change.sourceServerItem,n.change.pendingVersion&&o instanceof it.PreviousVersionSpec&&(c=n.change.pendingVersion)))),h=p.ChangeType.hasChangeFlag(n.change.changeType,a.VersionControlChangeType.Delete)?"":n.change.item.serverItem,t.beginShowDiff(this._repositoryContext,{opath:u,oversion:c,mpath:h,mversion:this._mversion},s))},t.prototype._fetchDiffsForViewableChanges=function(){var r=this,c=s.getHistoryService().getCurrentState(),u=this._$filesScrollContainer.scrollTop(),l=u+this._$filesScrollContainer.height(),f=this._$filesContainer[0].offsetTop,e=this._$filesContainer.height(),o=Math.min(Math.max(0,u-f-t.VIEWABLE_THRESHOLD_IN_PIXELS),e),n=Math.min(Math.max(0,l-f+t.VIEWABLE_THRESHOLD_IN_PIXELS),e),i=[],h=0;$.each(this._$filesContainer.children(".file-container"),function(u,f){var e=$(f),l=f.offsetTop,a=l+e.height(),w=e.data("fetching-diff"),b=e.is(":visible"),k=e.data("hiddenByFilter"),d=(l>=o||a>=o)&&(l<=n||a<=n),g=!(l<=n||a<=n),p,s,v,y;return k||(p=!w&&(b&&d||h<t.MIN_REQUESTED_BY_DEFAULT),p&&(s=e.data("changeIndex"),s===undefined||s===null||e.data("changeEntry")||(v=r._createFileRow(r._allChanges[s],s,c),e.replaceWith(v),e=v),e.data("fetching-diff")===!1&&(y=e.data("changeEntry"),y&&i.push({change:y,$container:e}))),h++),g?!1:void 0});i.length>0&&(this._queueFetchDiffs(i,!0),this._processFetchDiffQueue())},t.prototype._updateDiffMenuItems=function(){if(this._diffOrientationMenu){var n=[];n.push({id:v.DiffViewerOrientation.Inline,text:tt.InlineDiffText,title:tt.InlineDiffText,selected:this._diffOrientation===v.DiffViewerOrientation.Inline,value:v.DiffViewerOrientation.Inline,icon:"bowtie-icon bowtie-check"});n.push({id:v.DiffViewerOrientation.SideBySide,text:tt.SideBySideDiffText,title:tt.SideBySideDiffText,selected:this._diffOrientation===v.DiffViewerOrientation.SideBySide,value:v.DiffViewerOrientation.SideBySide,icon:"bowtie-icon bowtie-check"});this._diffOrientationMenu.updateItems(n,{showItemIcons:!0})}},t.prototype._updateMenuItems=function(){this._actionsMenu&&this._updateActionsMenu()},t.prototype._updateActionsMenu=function(){var u=this,n=[],i,t,r;this._discussionManager&&(this._options.hideArtifactLevelDiscussions||(!this._changeListModel||this._currentFilter)&&this._currentFilter.path||(r=this._repositoryContext.getRepositoryType()===y.RepositoryType.TFS?this._changeListModel.isShelveset?tt.AddShelvesetOverallComment:tt.AddChangesetOverallComment:tt.AddCommitOverallComment,n.push({id:"add-file-discussion",showText:!1,icon:"bowtie-icon bowtie-comment-add",title:r,arguments:{discussionManager:this._discussionManager}})),this._discussionManager.getAllThreads().length&&(i=s.getHistoryService().getCurrentState()||{},t=c.localeIgnoreCaseComparer(i.hideComments,"true")===0,this._allowHideComments&&n.push({id:"show-comments",title:t?tt.ShowCodeReviewComments:tt.HideCodeReviewComments,icon:"bowtie-icon bowtie-comment-outline",showText:!1,toggled:t?!1:!0,action:function(){var n=s.getHistoryService(),i=n.getCurrentState()||{};window.location.href=n.getFragmentActionLink(i._a||null,$.extend({},i,{hideComments:t?"false":"true"}))}})));this._options.additionalMenuItems&&$.each(this._options.additionalMenuItems(),function(t,i){var r=i.action?i.action:function(){};i.action=function(){r();u._updateMenuItems()};n.push(i)});this._actionsMenu.updateItems(n)},t.prototype.getTotalFileCount=function(){var n=0;return this._allChanges&&$.each(this._allChanges,function(t,i){i.item.isFolder||n++}),n},t.prototype._updateShowingSummary=function(n,i){var r,e=0,o=0,s=0,h=0,f,l,v,u;this._$diffSummaryHeader&&(this._$diffSummaryHeader.empty(),n.length&&(r=0,$.each(n,function(n,t){r++;p.ChangeType.hasChangeFlag(t.changeType,a.VersionControlChangeType.Add)?e++:p.ChangeType.hasChangeFlag(t.changeType,a.VersionControlChangeType.Delete)?s++:p.ChangeType.isEdit(t.changeType)?o++:p.ChangeType.hasChangeFlag(t.changeType,a.VersionControlChangeType.Rename)&&h++})),f=$(ft("span","diff-summary-prominent")).text(c.format(r===1?tt.DiffSummaryChangedSingleFile:tt.DiffSummaryChangedFiles,r)),i?(l=$(ft("span","diff-summary-filepath")).text(i),u=$(ft("span")).html(c.format(tt.DiffSummaryShowingFilesWithFilter,f[0].outerHTML,l[0].outerHTML))):u=$(ft("span")).html(c.format(tt.DiffSummaryShowingFiles,f[0].outerHTML)),v=$(ft("span")).appendTo(u),t.updateChangeCountsElement(v,e,o,s,h),this._$diffSummaryHeader.append(u))},t.updateChangeCountsElement=function(n,t,i,r,u,f){var e;n.empty();n.addClass("summary-change-counts");f>0&&$(ft("span","total-affected-count")).text(c.format(f===1?tt.AffectedFilesSingular:tt.AffectedFilesPluralFormat,f)).appendTo(n);t&&(e=$(ft("span","change-count")).text(""+t),$(ft("span","add-change")).appendTo(n).html(c.format(t===1?tt.ChangeCountAdd:tt.ChangeCountAdds,e[0].outerHTML)));i&&(e=$(ft("span","change-count")).text(""+i),$(ft("span","edit-change")).appendTo(n).html(c.format(i===1?tt.ChangeCountEdit:tt.ChangeCountEdits,e[0].outerHTML)));r&&(e=$(ft("span","change-count")).text(""+r),$(ft("span","delete-change")).appendTo(n).html(c.format(r===1?tt.ChangeCountDelete:tt.ChangeCountDeletes,e[0].outerHTML)));u&&(e=$(ft("span","change-count")).text(""+u),$(ft("span","rename-change")).appendTo(n).html(c.format(u===1?tt.ChangeCountRename:tt.ChangeCountRenames,e[0].outerHTML)))},t.MIN_REQUESTED_BY_DEFAULT=8,t.MAX_SIMULTANEOUS_FETCH_DIFF_CALLS=2,t.MAX_QUEUED_FETCH_DIFF_CALLS=20,t.VIEWABLE_THRESHOLD_IN_PIXELS=200,t.MAX_CLIENT_SORTING_THRESHOLD=1e3,t}(i.BaseControl);t.FilesSummaryControl=ot});
define("VersionControl/Scripts/Controls/PullRequestSearchAdapter",["require","exports","Presentation/Scripts/TFS/TFS.Host.UI","VersionControl/Scripts/GitRepositoryContext","VersionControl/Scripts/VersionControlUrls","VersionControl/Scripts/Resources/TFS.Resources.VersionControl","TFS/VersionControl/GitRestClient","Presentation/Scripts/TFS/TFS.OM.Common","Presentation/Scripts/TFS/TFS.Host.TfsContext"],function(n,t,i,r,u,f,e,o,s){var h=s.TfsContext,c=function(n){function t(t){n.call(this,t);this._gitRestClient=o.ProjectCollection.getDefaultConnection().getHttpClient(e.GitHttpClient3)}return __extends(t,n),t.prototype.getWatermarkText=function(){return f.PullRequestSearchWaterMark},t.prototype.getTooltip=function(){return f.PullRequestSearchToolTip},t.prototype.setRepository=function(n){this._repositoryContext=n},t.prototype.performSearch=function(n){var i=this,t;(t=this.searchTextToID(n),t<=0)||this._gitRestClient.getPullRequestById(t).then(function(n){i.redirect(u.getPullRequestUrl(r.GitRepositoryContext.create(n.repository,h.getDefault()),t,!1,null,{project:n.repository.project.name}))},function(n){n&&n.status==404?i.notifySearchFailed(f.PullRequest_NotFound,t.toString()):alert(n.message)})},t.prototype.searchTextToID=function(n){var r,i;return n?(r=n.match(/^\d+$/),i=r?parseInt(r[0],10):t.invalidPr,(i<=0||i>t.MAX_PR_ID)&&(this.notifySearchFailed(f.PullRequest_invalidID,n),i=t.invalidPr),i):t.invalidPr},t.prototype.notifySearchFailed=function(n,t){this.setErrorMessage(n,t)},t.prototype.redirect=function(n){window.location.href=n},t.invalidPr=-1,t.MAX_PR_ID=2147483647,t}(i.SearchAdapter);t.SearchAdapter=c});
define("VersionControl/Scripts/PullRequestTypes",["require","exports"],function(n,t){var i,r;(function(n){n[n.Success=0]="Success";n[n.Pending=1]="Pending";n[n.Failure=2]="Failure";n[n.Waiting=3]="Waiting";n[n.Info=4]="Info"})(t.PullRequestStatusState||(t.PullRequestStatusState={}));i=t.PullRequestStatusState,function(n){n[n.APPROVE=10]="APPROVE";n[n.APPROVE_WITH_COMMENT=5]="APPROVE_WITH_COMMENT";n[n.NONE=0]="NONE";n[n.NOT_READY=-5]="NOT_READY";n[n.REJECT=-10]="REJECT"}(t.PullRequestVoteStatus||(t.PullRequestVoteStatus={}));r=t.PullRequestVoteStatus});
define("VersionControl/Scripts/Controls/PullRequest",["require","exports","VSS/Controls","VersionControl/Scripts/Controls/PullRequestSearchAdapter","VersionControl/Scripts/Resources/TFS.Resources.VersionControl","VersionControl/Scripts/PullRequestTypes"],function(n,t,i,r,u,f){var c,l,a,v,y,p,w,b,k,e,o,s,h;t.MAX_CHANGES_TO_FETCH=1e3;t.MAX_COMMITS_TO_DISPLAY=3,function(n){n.ACTIVE="active";n.COMPLETED="completed";n.ABANDONED="abandoned";n.CREATENEW="createnew";n.MINE="mine";n.ALL="all"}(c=t.PullRequestsActions||(t.PullRequestsActions={})),function(n){n.DISCUSSION="discussion";n.COMMITS="commits";n.FILES="files";n.CODE="code";n.COMPARE="compare";n.CONTENT="content"}(l=t.PullRequestDetailsViews||(t.PullRequestDetailsViews={})),function(n){n.PULLREQUEST="pullrequest";n.PULLREQUESTS="pullrequests";n.PULLREQUESTCREATE="pullrequestcreate";n.PULLREQUESTREVIEW="pullrequestreview"}(a=t.PullRequestsRouteConstants||(t.PullRequestsRouteConstants={})),function(n){n.CREATED="PullRequestCreatedNotification";n.STATUS="StatusUpdateNotification";n.VOTE="ReviewerVoteNotification"}(v=t.PullRequestsNotificationEventTypes||(t.PullRequestsNotificationEventTypes={})),function(n){n.ACTIVE="Active";n.ABANDONED="Abandoned";n.COMPLETED="Completed"}(y=t.PullRequestsStatusConstants||(t.PullRequestsStatusConstants={})),function(n){n[n.NotSet=0]="NotSet";n[n.Queued=1]="Queued";n[n.Conflicts=2]="Conflicts";n[n.Succeeded=3]="Succeeded";n[n.RejectedByPolicy=4]="RejectedByPolicy";n[n.Failure=5]="Failure";n[n.InProgess=100]="InProgess"}(t.PullRequestAsyncStatusExtended||(t.PullRequestAsyncStatusExtended={}));p=t.PullRequestAsyncStatusExtended,function(n){n[n.CREATEDBYME=0]="CREATEDBYME";n[n.ASSIGNEDTOME=1]="ASSIGNEDTOME";n[n.ASSIGNEDTOTEAM=2]="ASSIGNEDTOTEAM";n[n.ALLPULLREQUESTS=3]="ALLPULLREQUESTS"}(t.PullRequestFilter||(t.PullRequestFilter={}));w=t.PullRequestFilter,function(n){n[n.ACTIVE=0]="ACTIVE";n[n.COMPLETED=1]="COMPLETED";n[n.ABANDONED=2]="ABANDONED"}(t.PullRequestStatusFilter||(t.PullRequestStatusFilter={}));b=t.PullRequestStatusFilter,function(n){n[n.RESULTS=0]="RESULTS";n[n.MINE=1]="MINE"}(t.PullRequestViewMode||(t.PullRequestViewMode={}));k=t.PullRequestViewMode;e=function(){function n(){}return n.voteDescription=function(n){switch(n){case f.PullRequestVoteStatus.APPROVE:return u.PullRequest_Approve;case f.PullRequestVoteStatus.APPROVE_WITH_COMMENT:return u.PullRequest_ApproveWithComment;case f.PullRequestVoteStatus.NONE:return u.PullRequest_ReviewerFeedback_NoResponse;case f.PullRequestVoteStatus.NOT_READY:return u.PullRequest_NotReady;case f.PullRequestVoteStatus.REJECT:return u.PullRequest_Reject}},n}();t.PullRequestVoteStatusUtils=e;o=function(){function n(){}return n.PullRequest="pullrequest",n}();t.MessageTypes=o;s=function(){function n(){}return n.BasicData="basic_data",n.MergeComplete="merge",n.Push="push",n.Vote="vote",n.Reviewers="reviewers",n.Status="status",n.Discussion="discussion",n.Policies="policies",n.CompletionErrors="completionErr",n}();t.PullRequestMessageTypes=s;h=function(){function n(){}return n.Source="source",n.Target="target",n}();t.PullRequestPushMessageParamTypes=h;i.Enhancement.registerEnhancement(r.SearchAdapter,".vc-search-adapter-pull-requests")});
define("Chat/Chat/Scripts/TFS.ChatRoom.Renderers",["require","exports","VSS/VSS","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Date","VSS/Diag","Presentation/Scripts/TFS/TFS.Host.TfsContext","Presentation/Scripts/TFS/TFS.Legacy.Ajax","VSS/Events/Action","VSS/Navigation/Services","Presentation/Scripts/TFS/TFS.IdentityImage","VSS/Artifacts/Services","Chat/Chat/Scripts/Resources/TFS.Resources.Chat","VersionControl/Scripts/Resources/TFS.Resources.VersionControl","VSS/Utils/Html","Presentation/Scripts/TFS/Generated/TFS.ChatRoom.Constants","Build.Common/Scripts/BuildArtifacts","Build.Common/Scripts/Xaml/Xaml.Legacy","Build.Common/Scripts/Controls/Histogram","VersionControl/Scripts/VersionControlUrls","VersionControl/Scripts/Controls/ChangeListSummaryFilesControl","VersionControl/Scripts/Controls/PullRequest","VSS/Controls","VSS/Controls/StatusIndicator","VersionControl/Scripts/PullRequestTypes"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut){function st(n,t,i,r){var u=$("<div />").appendTo(n);n.addClass("changecount-summary");nt.FilesSummaryControl.updateChangeCountsElement(u,t,i,r)}var kt=r.delegate,ft,ot,et,ht,ct,lt,at,vt,yt,pt,wt,bt,dt;(function(n){n[n.Text=0]="Text";n[n.Link=1]="Link";n[n.Unc=2]="Unc";n[n.Emoticon=3]="Emoticon";n[n.WitMention=4]="WitMention";n[n.UserMention=5]="UserMention"})(ft||(ft={}));ot=function(){function n(n){this.colonEmoticons=[{text:":)",emoticon:"smile"},{text:":-)",emoticon:"smile"},{text:":=)",emoticon:"smile"},{text:":]",emoticon:"smile"},{text:":(",emoticon:"sad"},{text:":-(",emoticon:"sad"},{text:":=(",emoticon:"sad"},{text:":[",emoticon:"sad"},{text:":<",emoticon:"sad"},{text:":-<",emoticon:"sad"},{text:":d",emoticon:"laugh"},{text:":-d",emoticon:"laugh"},{text:":=d",emoticon:"laugh"},{text:":>",emoticon:"laugh"},{text:":->",emoticon:"laugh"},{text:":-,)",emoticon:"wink"},{text:":'(",emoticon:"crying"},{text:":'-(",emoticon:"crying"},{text:":-p",emoticon:"tongue"},{text:":=p",emoticon:"tongue"},{text:":-o",emoticon:"surprised"},{text:":=o",emoticon:"surprised"},{text:":@",emoticon:"angry"},{text:":-@",emoticon:"angry"},{text:":=@",emoticon:"angry"},{text:":-s",emoticon:"confused"},{text:":=s",emoticon:"confused"},{text:":$",emoticon:"blush"},{text:":-$",emoticon:"blush"},{text:":=$",emoticon:"blush"},{text:':">',emoticon:"blush"},{text:":smile:",emoticon:"smile"},{text:":smiley:",emoticon:"smile"},{text:":frowning:",emoticon:"sad"},{text:":laughing:",emoticon:"laugh"},{text:":wink:",emoticon:"wink"},{text:":cry:",emoticon:"crying"},{text:":stuck_out_tongue:",emoticon:"tongue"},{text:":thumbsup:",emoticon:"yes"},{text:":thumbsdown:",emoticon:"no"},{text:":open_mouth:",emoticon:"surprised"},{text:":angry:",emoticon:"angry"},{text:":confused:",emoticon:"confused"},{text:":broken_heart:",emoticon:"brokenheart"},{text:":gift:",emoticon:"gift"},{text:":bulb:",emoticon:"idea"},{text:":bug:",emoticon:"bug"},{text:":sunglasses:",emoticon:"cool"},{text:":email:",emoticon:"mail"},{text:":alarm_clock:",emoticon:"time"},{text:":phone:",emoticon:"phone"},{text:":open_mouth:",emoticon:"surprised"},{text:":sweat:",emoticon:"sweating"},{text:":musical_note:",emoticon:"music"},{text:":airplane:",emoticon:"plane"},{text:":alien:",emoticon:"alien"},{text:":blush:",emoticon:"blush"},{text:":exclamation:",emoticon:"warning"},{text:":heart:",emoticon:"heart"},{text:":information_source:",emoticon:"info"},{text:":question:",emoticon:"question"},{text:":star:",emoticon:"star"},{text:":white_check_mark:",emoticon:"check"},{text:":video_game:",emoticon:"game"},{text:":o",emoticon:"surprised"},{text:":s",emoticon:"confused"},{text:":p",emoticon:"tongue"}];this.semicolonEmoticons=[{text:";)",emoticon:"wink"},{text:";-)",emoticon:"wink"},{text:";]",emoticon:"wink"},{text:";-]",emoticon:"wink"},{text:";d",emoticon:"wink"},{text:";^)",emoticon:"wink"},{text:";(",emoticon:"crying"},{text:";-(",emoticon:"crying"},{text:";=(",emoticon:"crying"}];this.starEmoticons=[{text:"*)",emoticon:"wink"},{text:"*-)",emoticon:"wink"}];this.eyesEmoticons=[{text:"8)",emoticon:"cool"},{text:"8-)",emoticon:"cool"},{text:"8=)",emoticon:"cool"}];this.glassesEmoticons=[{text:"b)",emoticon:"cool"},{text:"b-)",emoticon:"cool"},{text:"b=)",emoticon:"cool"}];this.crossEyesEmoticons=[{text:"x(",emoticon:"angry"},{text:"x-(",emoticon:"angry"},{text:"x=(",emoticon:"angry"}];this.haloEmoticons=[{text:"o:)",emoticon:"angel"},{text:"o:-)",emoticon:"angel"}];this.symbolEmoticons=[{text:"(b)",emoticon:"beer"},{text:"(c)",emoticon:"coffee"},{text:"(d)",emoticon:"drink"},{text:"(e)",emoticon:"mail"},{text:"(f)",emoticon:"flower"},{text:"(g)",emoticon:"gift"},{text:"(h)",emoticon:"heart"},{text:"(i)",emoticon:"info"},{text:"(l)",emoticon:"heart"},{text:"(m)",emoticon:"mail"},{text:"(n)",emoticon:"no"},{text:"(o)",emoticon:"time"},{text:"(t)",emoticon:"phone"},{text:"(y)",emoticon:"yes"},{text:"(u)",emoticon:"brokenheart"},{text:"(/)",emoticon:"check"},{text:"(^)",emoticon:"cake"},{text:"(*)",emoticon:"star"},{text:"(?)",emoticon:"question"},{text:"(!)",emoticon:"warning"},{text:"(0)",emoticon:"time"},{text:"(8)",emoticon:"music"},{text:"(ok)",emoticon:"yes"},{text:"(ph)",emoticon:"phone"},{text:"(pi)",emoticon:"pizza"},{text:"(pl)",emoticon:"plane"},{text:"(mp)",emoticon:"phone"},{text:"(alien)",emoticon:"alien"},{text:"(angel)",emoticon:"angel"},{text:"(angry)",emoticon:"angry"},{text:"(beer)",emoticon:"beer"},{text:"(blush)",emoticon:"blush"},{text:"(bomb)",emoticon:"bomb"},{text:"(brokenheart)",emoticon:"brokenheart"},{text:"(bug)",emoticon:"bug"},{text:"(cake)",emoticon:"cake"},{text:"(clock)",emoticon:"time"},{text:"(coffee)",emoticon:"coffee"},{text:"(confused)",emoticon:"confused"},{text:"(cool)",emoticon:"cool"},{text:"(drink)",emoticon:"drink"},{text:"(fail)",emoticon:"bomb"},{text:"(fire)",emoticon:"fire"},{text:"(flower)",emoticon:"flower"},{text:"(game)",emoticon:"game"},{text:"(gift)",emoticon:"gift"},{text:"(heart)",emoticon:"heart"},{text:"(idea)",emoticon:"idea"},{text:"(info)",emoticon:"info"},{text:"(mail)",emoticon:"mail"},{text:"(music)",emoticon:"music"},{text:"(no)",emoticon:"no"},{text:"(phone)",emoticon:"phone"},{text:"(plane)",emoticon:"plane"},{text:"(pizza)",emoticon:"pizza"},{text:"(question)",emoticon:"question"},{text:"(rose)",emoticon:"flower"},{text:"(star)",emoticon:"star"},{text:"(sweat)",emoticon:"sweating"},{text:"(time)",emoticon:"time"},{text:"(warning)",emoticon:"warning"},{text:"(yes)",emoticon:"yes"}];this._getTfsContext=n}return n.prototype.processText=function(n,t){var r=this,i;return t===void 0&&(t=[]),i=[{Type:ft.Text,Content:n}],$.each(t,function(n,t){t.type==="WorkItem"?i=r.processParts(i,r.workItemMentionPartParser(t.targetId,t.projectGuid)):t.type==="USER"&&u.ignoreCaseComparer(t.targetId,r._getTfsContext().currentIdentity.id)===0&&(i=r.processParts(i,r.userMentionPartParser(t.text)))}),i=this.processParts(i,this.urlPartParser),i=this.processParts(i,this.uncPartParser),i=this.processParts(i,this.emojiPartParser),this.combineParts(i)},n.prototype.combineParts=function(n){var t=$.map(n,function(n){return n.Type===ft.Text&&(n.Content=u.htmlEncode(n.Content)),n.Content});return t.join("")},n.prototype.processParts=function(n,t){for(var r,f,i=[],u=0;u<n.length;u++)r=n[u],r.Type!==ft.Text?i.push(r):(f=t.call(this,r),i=i.concat(f));return i},n.prototype.regexEscape=function(n){return(n+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},n.prototype.regexPartParser=function(n,t,i,r){for(var e,u=[],o=0,f=n.Content,c=!1,s,l,h;e=i.exec(f);)c=!0,s=f.substring(o,e.index),l=f.substring(e.index,i.lastIndex),o=i.lastIndex,s!==""&&u.push({Type:ft.Text,Content:s}),u.push({Type:t,Content:r(l)});return c?(h=f.substring(o),h!==""&&u.push({Type:ft.Text,Content:h})):u.push(n),u},n.prototype.urlPartParser=function(n){return this.regexPartParser(n,ft.Link,/\b(?:mailto:[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4})|(?:(http|https|ftp):(?:\/{2})|(file):(?:\/{2,3})|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:.*?(?=[\s`!\[\]{};'"<>\u00ab\u00bb\u201c\u201d\u2018\u2019]|$))/ig,this.buildLinkFromUrl)},n.prototype.buildLinkFromUrl=function(n){var t=u.htmlEncode(n),i=u.htmlEncode(n);return n.indexOf(":")===-1?"<a href='http://"+i+"' target='_blank'>"+t+"<\/a>":u.startsWith(n,"mailto:",u.ignoreCaseComparer)?"<a href='"+i+"'>"+t+"<\/a>":"<a href='"+i+"' target='_blank'>"+t+"<\/a>"},n.prototype.uncPartParser=function(n){return this.regexPartParser(n,ft.Link,/\\\\([^<>:"\\\/|?*\s]*\\)+[\w.]*\b/ig,this.buildLinkFromUnc)},n.prototype.buildLinkFromUnc=function(n){var t=n.replace(/^\\\\/,"file://").replace(/\\/g,"/");return"<a href='"+u.htmlEncode(t)+"' target='_blank'>"+u.htmlEncode(n)+"<\/a>"},n.prototype.workItemMentionPartParser=function(n,t){var i=this;return function(r){var u=new RegExp("(\\s|^|\\?|!|-|\\.|,|:|;|'|\")#"+i.regexEscape(n)+"(?=(\\s|$|\\?|!|\\.|,|:|;|-|'|\"))","ig");return i.regexPartParser(r,ft.WitMention,u,i.buildLinkFromWorkItemMention(n,t))}},n.prototype.buildLinkFromWorkItemMention=function(n,t){var i=this;return function(r){var f=r.charAt(0).match(/\s/)?r.charAt(0):"",e=i._getTfsContext().getPermalinkUrl("edit","workitems",{parameters:n,collectionId:i._getTfsContext().navigation.collection.instanceId,projectId:t});return f+"<a href='"+u.htmlEncode(e)+"' target='_blank'>"+u.htmlEncode($.trim(r))+"<\/a>"}},n.prototype.userMentionPartParser=function(n){var t=this;return function(i){var r=new RegExp("(\\s|^)@"+t.regexEscape(n)+"(?=(\\s|$|\\?|!|\\.|,|:|'|;|\"))","ig");return t.regexPartParser(i,ft.UserMention,r,t.buildLinkFromUserMention)}},n.prototype.buildLinkFromUserMention=function(n){var t=n.charAt(0).match(/\s/)?n.charAt(0):"";return t+"<span class='user-mention'>"+u.htmlEncode($.trim(n))+"<\/span>"},n.prototype.emojiPartParser=function(n){for(var i,o,u,h,e,c,s=[],f="",r=n.Content,t=0;t<r.length;t++){if(o=null,t>0&&!/\s/.test(r[t-1])){f+=r[t];continue}switch(r[t].toLowerCase()){case":":i=this.colonEmoticons;break;case";":i=this.semicolonEmoticons;break;case"*":i=this.starEmoticons;break;case"8":i=this.eyesEmoticons;break;case"b":i=this.glassesEmoticons;break;case"x":i=this.crossEyesEmoticons;break;case"o":i=this.haloEmoticons;break;case"(":i=this.symbolEmoticons;break;default:f+=r[t];continue}for(u=0;u<i.length;u++)if(h=!1,!(r.length>t+i[u].text.length)||/\s/.test(r[t+i[u].text.length])){for(e=1;e<i[u].text.length;e++)if(r.length<=t+e||i[u].text[e]!=r[t+e].toLowerCase()){h=!0;break}if(!h){o=i[u];break}}o!=null?(s.push({Type:ft.Text,Content:f}),c="<span class='emoji icon-emoji-"+o.emoticon+"' title='"+o.text+"'/>",s.push({Type:ft.Emoticon,Content:c}),f="",t=t+e-1):f+=r[t]}return f!==""&&s.push({Type:ft.Text,Content:f}),s},n}();t.MessageProcessor=ot;et=function(){function n(n){this._cssClass="notification";this._template='<li class="message ${message.cssClass} ${notification.type}" id="message_${message.id}" aria-live="assertive">   <div class="message-sender ${hideSenderClass}">        <div title="${author}">${author}<\/div>        <span class="icon ${serviceIcon}" title="${system}" alt="${system}">   <\/div>   <div class="tagged-message">   <div class="message-content tag-${tagClass}">       <div class="message-text">{{html content}}<\/div>       <div class="message-rightside">           <div class="message-time">${message.time}               <div class="message-chart"><\/div>           <\/div>       <\/div>    <\/div>    <\/div><\/li>';this.notificationData=n}return n.initializeRenderers=function(){h.getService().registerActionWorker(a.Artifact.ACTION_ARTIFACT_EXECUTE,function(n,t){var i=this.tfsContext.getPermalinkUrl("detail","build",{collectionId:this.tfsContext.navigation.collection.instanceId,buildUri:n.artifact.getUri()});return i&&n.artifact instanceof b.BuildArtifact?(h.getService().performAction(h.CommonActions.ACTION_WINDOW_OPEN,{url:i,target:"_blank"}),!0):t(n)},n.BuildClickActionOrder)},n.getNotificationRenderer=function(n){var t=r.parseMSJSON(n,!1),i=null;switch(t.type){case w.ChatConstants.WorkItemChangedEvent:i=new ct(t);break;case w.ChatConstants.BuildCompletedEvent:i=new lt(t);break;case w.ChatConstants.CheckinEvent:i=new at(t);break;case w.ChatConstants.CodeReviewChangedEvent:i=new ht(t);break;case w.ChatConstants.GitPushEvent:i=new vt(t);break;case w.ChatConstants.GitPullRequestEvent:i=new yt(t)}return i},n.prototype.transformEventData=function(){return p.TemplateEngine.tmpl(this.eventTemplates[this.data.notification.type],this.data)},n.prototype.render=function(n){return this.data={message:{time:f.localeFormat(n.PostedTime,"t",!0).toLowerCase(),id:n.Id,cssClass:this._cssClass},notification:this.notificationData,data:this.notificationData.data,serviceIcon:this.tagClass.toLowerCase(),system:this.tfsContext.isHosted?v.ServiceName:v.ServerName+" - "+this.serviceName,tagClass:this.tagClass,actionUrl:this.getActionUrl()},this.data.content=this.transformEventData(),this.element=$(p.TemplateEngine.tmpl(this._template,this.data)),this.element},n.prototype.getActionUrl=function(){return this.notificationData.url},n.BuildClickActionOrder=99,n}();t.BaseNotificationRenderer=et;ht=function(n){function t(t){n.call(this,t);this.serviceName=v.CodeReviewServiceName;this.tagClass="codeReview";this.eventTemplates={CodeReviewChangedEvent:'<div class="title" title="${notification.title}"><a href="${actionUrl}" title="${data.urlTitle}" class="title-link">${data.workItemType} ${data.workItemId}<\/a>${notification.title}<\/div><div>${data.requestedBy}<\/div>'}}return __extends(t,n),t.prototype.transformEventData=function(){var t=this.data.data;return t.requestor&&(t.requestedBy=u.format(v.RequestedBy,t.requestor)),t.urlTitle=v.OpenCodeReviewInVisualStudio,n.prototype.transformEventData.call(this)},t.prototype.render=function(t,i){var r,u;return n.prototype.render.call(this,t,i),r=this.data.data.changes,r&&(u=$(".message-chart",this.element),st(u,r.add,r.edit,r["delete"])),this.element},t.prototype.getActionUrl=function(){var n=this.notificationData.data.workItemId,t=this.tfsContext.getHostUrl()+this.tfsContext.configuration.getRootPath()+this.tfsContext.navigation.serviceHost.relVDir,i=a.LinkingUtilities.encodeUri({tool:"CodeReview",type:"Request",id:""+n});return i+"?url="+t},t}(et);t.CodeReviewNotificationRenderer=ht;ct=function(n){function t(t){n.call(this,t);this.serviceName=v.WorkItemsServiceName;this.tagClass="workItems";this.eventTemplates={WorkItemChangedEvent:'<div class="title" title="${data.title}"><a href="${actionUrl}" title="${data.title}" target="_blank" class="title-link">${data.workItemType} #${data.id}<\/a>${data.title}<\/div><div>${data.changedText}<\/div>'}}return __extends(t,n),t.prototype.transformEventData=function(){var t=this.data.data,i="",r;return t.stateChangedValue&&t.stateChangedValue!==null&&t.stateChangedValue!==""&&(i=u.format(v.WorkItemsTransitionTo,t.stateChangedValue,t.changedBy),t.isNewWorkItem&&(i=u.format(v.WorkItemsCreatedBy,t.changedBy))),r="",t.assignedToChangedValue!==undefined&&(r=t.assignedToChangedValue!==null&&t.assignedToChangedValue!==""?u.format(v.WorkItemsAssignedTo,t.assignedToChangedValue,t.changedBy):u.format(v.WorkItemsClearedAssignedTo,t.changedBy)),t.changedText="",i!==""&&(t.changedText+=i+" "),t.changedText+=r,n.prototype.transformEventData.call(this)},t}(et);t.WorkItemNotificationRenderer=ct;lt=function(n){function t(t){n.call(this,t);this.serviceName=v.BuildServiceName;this.tagClass="build";this.eventTemplates={BuildCompletedEvent:'<div class="build"><div class="build-details"><\/div><div class="title"><a href="${actionUrl}" class="build-summary" target="_blank">${data.buildDefinition.name} ${data.buildNumber}<\/a><span class="status icon icon-tfs-build-status-${data.buildStatus}"><\/span>${data.buildStatusText}<\/div><a href="${actionUrl}" class="build-summary" target="_blank">${data.buildSummary}<\/a><\/div>'};this._richBuildEventTemplate='<div class="build"><div class="build-details"><div class="title"><a href="${actionUrl}" class="build-summary" target="_blank">${buildDetails.definition} ${buildDetails.name}<\/a><span class="status icon icon-tfs-build-status-${buildDetails.status}"><\/span>${buildDetails.title}<\/div><div class="build-info" title="${buildDetails.reason}. ${buildDetails.testAndDuration}">${buildDetails.reason}. ${buildDetails.testAndDuration}<\/div><\/div><\/div>'}return __extends(t,n),t.prototype.transformEventData=function(){var t=this.data.data;return t.buildSummary=v.ChatAlertsBuildSummary,t.buildStatusText="",t.buildStatus&&(t.buildStatusText=k.BuildStatus.getName(t.buildStatusId,!0),t.buildStatus=t.buildStatus.toLowerCase()),n.prototype.transformEventData.call(this)},t.prototype.renderRichBuildData=function(n,t){var i,u,f,o,s,r;this._statusIndicator&&(this._statusIndicator.dispose(),this._statusIndicator=null);i=this.element;$(".build",i).empty();u="";n=$.extend(n,{definition:t.data.buildDefinition.name,definitionUri:t.data.buildDefinition.uri,buildUri:t.data.buildUri,requestedFor:t.data.buildReason.requestedFor});n.status!==k.BuildStatus.Succeeded&&(u=k.BuildTextConverter.getTestRunInformation(n));f="";o=k.BuildTextConverter.getBuildDurationTextSimple(n);f=u===""?o:u+" "+o;s={buildDetails:{status:k.BuildStatus.getName(n.status).toLowerCase(),name:n.name,definition:n.definition,title:k.BuildStatus.getName(n.status,!0),reason:k.BuildTextConverter.getBuildReasonDescriptionText(n),testAndDuration:f}};i=$(p.TemplateEngine.tmpl(this._richBuildEventTemplate,$.extend(this.data,s)));r=$(".message-chart",i);r&&r.length>0&&(r.addClass("histogram build-histogram"),it.Enhancement.enhance(d.BuildHistogram,r,{tfsContext:this.tfsContext,buildDefinitionUri:n.definitionUri,buildUri:n.uri,barCount:5,selectedState:"selected",hoverState:"hover"}));$(".message-text",this.element).append(i);e.logTracePoint("ChatRoom.ChatControl.RenderRichBuildMessage.Complete")},t.prototype.render=function(t,i){var e=this,u,f,r;this.element=n.prototype.render.call(this,t,i);u=this.notificationData.data.buildUri;f=this.tfsContext.getActionUrl("build","build",{area:"api"});this._statusIndicator=it.BaseControl.createIn(rt.StatusIndicator,this.element,{center:!1,imageClass:"status-progress",message:v.Loading,throttleMinTime:0});this._statusIndicator.start();r=null;try{r=JSON.parse(t.Content)}catch(o){this._statusIndicator&&(this._statusIndicator.dispose(),this._statusIndicator=null)}return s.getMSJSON(f,{uri:u,includeCoverage:!0,includeTestRuns:!0},kt(this,function(n){e.renderRichBuildData(n,r)}),kt(this,function(){this._statusIndicator&&(this._statusIndicator.dispose(),this._statusIndicator=null)})),this.element},t}(et);t.BuildNotificationRenderer=lt;at=function(n){function t(t){n.call(this,t);this.serviceName=v.VersionControlServiceName;this.tagClass="checkin";this.eventTemplates={CheckinEvent:'<div class="title" title="${data.comment}"><a href="${actionUrl}" title="${notification.title}" target="_blank" class="title-link">${notification.title}<\/a>${data.commentTitle}<\/div><div>${data.owner.displayName}<\/div>'}}return __extends(t,n),t.prototype.transformEventData=function(){var t=this.data.data;return this.data.notification.title=u.format(y.ChangesetLinkTextSimple,t.changeSetNumber),t.comment&&(t.commentTitle=t.comment.split("\n")[0]),n.prototype.transformEventData.call(this)},t.prototype.render=function(t,i){var r,u;return n.prototype.render.call(this,t,i),r=this.data.data.changes,r&&(u=$(".message-chart",this.element),st(u,r.add,r.edit,r["delete"])),this.element},t}(et);t.CheckinNotificationRenderer=at;vt=function(n){function t(t){n.call(this,t);this.serviceName=v.GitServiceName;this.tagClass="gitpush";this.eventTemplates={GitPushEvent:'<div class="title">${commitSummary} {{html branchString}}'+v.ChatRoomGitPushInRepo+' <a href="${data.repositoryUri}" title="'+u.format(v.ChatRoomGitPushTooltip,"${data.refName}","${data.shortNewId}")+'" target="_blank" class="title-link">${data.repositoryName}<\/a>'+v.ChatRoomGitPushBy+' ${data.pusherDisplayName}<\/div>{{each data.commits}}<div class="git-commit" title="${$value.shortComment}"><a href="${$value.idUrl}" title="'+u.format(v.ChatRoomGitPushCommit,"${$value.shortId}")+'" target="_blank" class="title-link">'+u.format(v.ChatRoomGitPushCommit,"${$value.shortId}")+"<\/a> ${$value.shortComment}<\/div>{{/each}}"}}return __extends(t,n),t.prototype.transformEventData=function(){var t=this.data.data.totalCommits,i,f,r,o;return t>3&&(i=t-3,this.eventTemplates[this.data.notification.type]=this.eventTemplates[this.data.notification.type]+"<div>"+u.format(i===1?v.ChatRoomTruncatedCommitsSingle:v.ChatRoomTruncatedCommitsPlural,i)+"<\/div>"),this.data.commitSummary=t===0?v.ChatRoomGitDeleteBranchTitle:t===1?t+v.ChatRoomGitPushTitleSingle:t+v.ChatRoomGitPushTitlePlural,f={project:this.data.data.projectName},this.data.data.repositoryUri=g.getGitActionUrl(this.tfsContext,this.data.data.repositoryId,null,f,!1),this.data.branchString=this.data.data.refName+" ",this.data.data.refUrl&&(r=this.data.data.refUrl.indexOf("#"),o=this.data.data.refUrl.substring(r-1),this.data.data.refUrl=this.data.data.repositoryUri+o,this.data.branchString=u.format('<a href="{0}" title="{1}" target="_blank" class="title-link">{1}<\/a>',u.htmlEncode(this.data.data.refUrl),u.htmlEncode(this.data.data.refName))),n.prototype.transformEventData.call(this)},t.prototype.render=function(t,i){var f,u,r,e;for(n.prototype.render.call(this,t,i),f=this.data.data.totalCommits,u=0;u<Math.min(f,3);u++)r=this.data.data.commits[u].changes,r&&(e=$(".message-chart",this.element),st(e,r.add,r.edit,r["delete"]));return this.element},t}(et);t.GitPushNotificationRenderer=vt;yt=function(n){function t(t){n.call(this,t);this.serviceName=v.GitServiceName;this.tagClass="codeReview";this.eventTemplates={GitPullRequestEvent:'<div class="title">${data.eventTriggeredBy} ${actionString}  <a href="${pullRequestUri}" title="'+u.format(v.ChatRoomGitPullRequestTooltip,"${data.pullRequestId}","${data.title}")+'" target="_blank" class="title-link">'+u.format(v.ChatRoomGitPullRequestLink,"${data.pullRequestId}")+"<\/a> "+v.ChatRoomGitPushInRepo+' <a href="${repositoryUri}" target="_blank" class="title-link">${data.repositoryName}<\/a><\/div>'}}return __extends(t,n),t.prototype.transformEventData=function(){var t,i;return this.data.data.eventTrigger===tt.PullRequestsNotificationEventTypes.CREATED?t=v.ChatRoomGitPullRequestCreated:this.data.data.eventTrigger===tt.PullRequestsNotificationEventTypes.STATUS?this.data.data.status===tt.PullRequestsStatusConstants.ACTIVE?t=v.ChatRoomGitPullRequestActive:this.data.data.status===tt.PullRequestsStatusConstants.ABANDONED?t=v.ChatRoomGitPullRequestAbandoned:this.data.data.status===tt.PullRequestsStatusConstants.COMPLETED&&(t=v.ChatRoomGitPullRequestCompleted):this.data.data.eventTrigger===tt.PullRequestsNotificationEventTypes.VOTE&&(parseInt(this.data.data.vote)===ut.PullRequestVoteStatus.APPROVE?t=v.ChatRoomGitPullRequestApproved:parseInt(this.data.data.vote)===ut.PullRequestVoteStatus.APPROVE_WITH_COMMENT?t=v.ChatRoomGitPullRequestApprovedWithComment:parseInt(this.data.data.vote)===ut.PullRequestVoteStatus.NOT_READY?t=v.ChatRoomGitPullRequestNotReady:parseInt(this.data.data.vote)===ut.PullRequestVoteStatus.REJECT?t=v.ChatRoomGitPullRequestRejected:parseInt(this.data.data.vote)===ut.PullRequestVoteStatus.NONE&&(t=v.ChatRoomGitPullRequestRescinded)),this.data.actionString=t,this.data.repositoryUri=g.getGitActionUrl(this.tfsContext,this.data.data.repositoryId,null,{project:this.data.data.projectGuid||this.data.data.teamProjectName},!1),i=[this.data.data.pullRequestId],this.data.pullRequestUri=g.getGitActionUrl(this.tfsContext,this.data.data.repositoryId,tt.PullRequestsRouteConstants.PULLREQUEST,{project:this.data.data.projectGuid||this.data.data.teamProjectName,parameters:i},!1)+c.getHistoryService().getFragmentActionLink(null,{view:tt.PullRequestDetailsViews.DISCUSSION}),n.prototype.transformEventData.call(this)},t}(et);t.GitPullRequestNotificationRenderer=yt;pt=function(){function n(){var n=this;this._cssClass="normal";this._template='<li class="message ${messageType} ${myClass}" id="message_${messageId}" aria-live="assertive">   <div class="message-sender ${hideSenderClass}">        <div title="${author}">${author}<\/div>        {{html avatar}}   <\/div>   <div class="message-content">       <div class="message-text">{{html messageContent}}<\/div>        <div class="message-rightside">            <span class="${mentionIconClass}"><\/span>            <div class="message-time">${messageTime}<\/div>        <\/div>   <\/div><\/li>';this._messageProcessor=new ot(function(){return n.tfsContext})}return n.prototype.render=function(n,t){var i=t!==undefined&&typeof t.showSender=="boolean"?t.showSender:!0,r=this._messageProcessor.processText(n.Content,n.Mentions),u={messageTime:f.localeFormat(n.PostedTime,"t",!0).toLowerCase(),messageContent:r,messageId:n.Id,messageType:this._cssClass,author:n.PostedBy.Name,myClass:this.tfsContext.currentIdentity.id===n.PostedBy.TfId?"my":"",hideSenderClass:i?"":"hidden",mentionIconClass:r.indexOf("class='user-mention'")>=0?"icon mentionicon":""},e;return i&&(e=l.identityImageElement(this.tfsContext,n.PostedBy.TfId,null,null,n.PostedBy.Name,n.PostedBy.Name),u.avatar=e[0].outerHTML),$(p.TemplateEngine.tmpl(this._template,u))},n}();t.PlainTextRenderer=pt;wt=function(){function n(){this._cssClass="system";this._template='<li class="message ${messageType} ${extraCssClass}" id="${messageIdPrefix}_${messageId}" aria-live="assertive">    <div class="message-content">        <div class="message-text">{{html messageContent}}<\/div>        <div class="message-rightside">            <div class="message-time">${messageTime}<\/div>        <\/div>    <\/div><\/li>'}return n.prototype.render=function(n,t){var i=t&&typeof t.showTimeStamp=="boolean"?t.showTimeStamp:!0,r={messageIdPrefix:t&&t.idPrefix||"message",messageTime:i?f.localeFormat(n.PostedTime,"t",!0).toLowerCase():"",messageContent:n.Content,messageId:n.Id,messageType:this._cssClass,extraCssClass:t&&t.extraCssClass||""};return $(p.TemplateEngine.tmpl(this._template,r))},n}();t.SystemTextRenderer=wt;bt=function(){function n(){this._cssClass="error";this._template='<li class="message ${messageType} ${extraCssClass}" id="${messageIdPrefix}_${messageId}" aria-live="assertive">    <div class="message-content">        <div class="message-rawText">{{html messageContent}}<\/div>        <div class="message-text">${couldNotSend}: &quot;{{html messageContent}}&quot; <a onclick="javascript:VSS.ChatRoom.ChatRoomModel.sendMessageOnRetryClick($(this).parent().parent().parent())">${tryAgain}<\/a><\/div>        <div class="message-rightside">            <div class="message-time">${messageTime}<\/div>        <\/div>    <\/div><\/li>'}return n.prototype.render=function(n,t){var i=t&&typeof t.showTimeStamp=="boolean"?t.showTimeStamp:!0,r={messageIdPrefix:t&&t.idPrefix||"message",messageTime:i?f.localeFormat(n.PostedTime,"t",!0).toLowerCase():"",messageContent:n.Content,messageId:n.Id,messageType:this._cssClass,couldNotSend:v.ErrorCouldNotSendMessage,tryAgain:v.ErrorChatRoomTryAgain,extraCssClass:t&&t.extraCssClass||""};return $(p.TemplateEngine.tmpl(this._template,r))},n}();t.ErrorTextRenderer=bt;dt=function(){function n(){}return n.getRenderer=function(t,i,r){var u;switch(t){case w.MessageType.Notification:u=et.getNotificationRenderer(i);break;case w.MessageType.System:n._renderersDictionary[t]?u=n._renderersDictionary[t]:(u=new wt,n._renderersDictionary[t]=u);break;case w.MessageType.Error:n._renderersDictionary[t]?u=n._renderersDictionary[t]:(u=new bt,n._renderersDictionary[t]=u);break;default:n._renderersDictionary[t]?u=n._renderersDictionary[t]:(u=new pt,n._renderersDictionary[t]=u)}return u.tfsContext=r||o.TfsContext.getDefault(),u},n._renderersDictionary={},n}();t.RendererFactory=dt;i.tfsModuleLoaded("TFS.ChatRoom.Renderers",t)});
define("WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking",["require","exports"],function(require,exports){var e=exports;e.LinkDialogWorkItemBrowseButton="...";e.SucessfullySavedNWisButFailedToSave="Successfully saved {0} work item(s), but failed to save {1} work item(s).";e.StateTransitionGraphViewAllChangesTitle="View all state transitions";e.MoveWorkItemDiscussionLabel="Add a reason for moving the work item";e.InvalidWorkItemUrl="WorkItem url not valid: {0}";e.LinksControlFetchingWorkItem="Work item {0} (getting details...)";e.LinksControlTestResultText="Test Result";e.DeleteSingleAttachmentDialogConfirmationText="Are you sure you want to delete the selected attachment?";e.TextFilterResultCountMessage="Showing the results of the first {0} from {1} items. {2}";e.MultiFieldRemoveFieldTooltip="Remove this field";e.CreateCopyOfWorkItemProject="Project";e.ConfirmWorkItemRefresh="You have unsaved changes to this work item which will be lost. Are you sure you want to refresh this work item?";e.WorkItemLogControlLinksHeader="Links";e.MyRecentChangesQuery="My recent changes";e.WorkItemDeleteError="Failed to delete work item: {0}. Error Details: {1}";e.WorkItemTemplateDoesNotExist="VS403203: No template was applied because the indicated template does not exist.";e.AttachmentsOversizedDialogTitle="Attachment(s) over size limit";e.LinkToExistingDialogTitleMultiple="Add Link to Multiple Items";e.HistoryControlSingleLinkAdornmentText="{0} was added";e.WorkItemDiscussionAdornmentOverLimitNumberDisplay="{0}+";e.WorkItemLogControlAttachmentAdded="added attachment";e.Backlog="Backlog";e.WorkItemArtifactLastUpdatedByLabel="Updated by {0} on {1}";e.HistoryControlAgoLastThirtyDays="Last thirty days";e.MoveWorkItemPermissionError="You have insufficient permissions to move a work item to another project.";e.ChangeTypeDiscussionLabel="Add a reason for changing the type";e.NoEntriesWithComments="[No entries with comments]";e.HistoryControlAssignmentAdornmentText="Assigned to {0}";e.FieldStatusInvalidUnknownError="There is an unknown problem with field \u0027{0}\u0027.";e.ColumnOptionsAllWorkItemTypes="All Work Item Types";e.BulkEditTagsAdd="Add";e.WorkItemTemplates_CaptureTemplateMenuItem_Text="Capture...";e.QueryManageDialog_Validator_NameInvalid="Name has invalid characters.";e.HistoryControlAssignmentDefaultAdornmentText="Assigned to edited";e.WorkItemLogControlField="Field";e.NewFeatureViewBoardLinkTitle="View your board";e.DeleteWorkItemDialogConfirmationTextWithCleanUpScheduled="You can restore deleted work items from the Recycle Bin until they are permanently deleted based on auto-delete settings (enabled). {0}.";e.AttachmentAsLinkType="Attachment";e.FailedToSaveNWorkItems="Failed to save the following {0} work item(s).";e.AttachmentUploadFailDialogTitle="Attachment(s) failed to upload";e.UnsavedWorkItemsQuery="Unsaved work items";e.DestroyWorkItemDialogConfirmationText="Are you sure you want to permanently delete the selected work item(s)? Permanently deleted work item(s) cannot be restored.";e.WorkItemTemplateDialog_Description="Description";e.WorkItemLogControlShowMoreRevision="({0} of {1})";e.PreviewAttachment="Preview attachment";e.Searching="Searching...";e.QueryReferencesFieldThatDoesNotExist="TF51005: The query references a field that does not exist.";e.RenameQuery="Rename";e.WorkItemEditorWindowTitle="{0}: {1}";e.BulkEditTagsRemove="Remove";e.SendWorkItemsInEmailDialogTitle="Send work items in email";e.WorkItemLogControlNewValue="New value";e.TriagePreviousWorkItemToolTip="Previous work item in the \"{0}\" query (Alt + P)";e.LinksControlChangesetText="Changeset";e.LinkToExistingDialogLinkTypeTitle="Link type";e.QueryEditorTargetFilterGroupingText="Filters for linked work items";e.SaveResultsToolTip="Save results";e.NewQuery="New query";e.WorkItemTemplates_ContextMenuItem_Text="Templates";e.WorkItemTemplateDialog_RemoveUnmodified="Remove unmodified fields";e.AddAttachmentFileNotFoundError="TF20004: Could not find the specified file \"{0}\". Check the file name and try again.";e.EmailWorkItemTooltip="Email work item";e.LinksControlTagsText="Tag";e.OpenInNewTabToolTip="Open in new window";e.ConfirmWorkItemDiscardNew="You have unsaved changes to this work item which will be lost. Are you sure you want to discard this work item?";e.HyperLinkText="Hyperlink";e.QueryEditorQueryTypeTree="Tree of work items";e.QueryEditorQueryTypeLink="Work items and direct links";e.BulkEdit_ApplyTemplateButton="Apply";e.WorkItemTemplateDialog_CopyLinkDisabledMessage="Save the template in order to enable Copy link.";e.AssignedToPrefix="Assigned to";e.QueryResultsGridLinkQueryStatusTextFormat="{0} work items ({1} top level, {2} linked and {3} selected)";e.NewLinkedWorkItemTitle="Title";e.AttachmentsNotSupported="Invalid link type, Attachments not supported";e.WorkItemLogControlOtherLinkAdded="added other link";e.LinkFormNoWorkItemSpecified="TF207006: No work item was specified. Select one or more work items, or click Cancel to cancel the operation.";e.ControlInstructionsBrowseText="click here to browse.";e.AddTagText="Add tag";e.WorkItemLinkTypeParentString="Parent";e.VisualizeYourWorkText="Kanban boards provide an interactive, customizable visualization of your backlog to help monitor the flow of your work items from idea to completion.";e.Cancel="Cancel";e.WorkItemChartsTreeQueryDisallowedMessage="You can create a chart for a flat list query, but not for a tree query or a direct links query.";e.KeyboardShortcutDescription_Previous_Item="Previous item";e.AddAttachment="Add attachment";e.OpenToolTip="Open";e.ReasonLabel="Reason";e.QueryEditor="Query Editor";e.NameLabel="Name";e.WorkItemToolbarTemplate="Templates";e.Navigation_NewWorkItemActionTitle="New {0}";e.LinkText="Link";e.QueryEditorQueryModeLabel="Filter options";e.HistoryControlOldValueText="Old Value";e.MoveWorkItemDestinationLabel="Destination project";e.SearchResults="Search results";e.HotSpotFollowsGeneralContent="Know what changes are made as they occur.";e.HistoryControlSummaryTextAnd=" and ";e.DeleteWorkItemDialogTitle="Delete work item(s)";e.QueryFolder="Query folder";e.FieldStatusInvalidValueInOtherFieldError="The field \u0027{0}\u0027 is unsupported because of a value in another field.";e.ColumnOptionsAllProjects="All Projects";e.WorkItemIDListString="Select items to add to the work item list";e.QueryManageDialog_Validator_FolderSelfReferential="Folder cannot refer to self as a parent or ancestor.";e.ErrorSendingEmail="Error sending email";e.ChangeTypeMessage="Learn more about changing the type";e.SaveWorkItem="Save work item (Ctrl + S)";e.MoveWorkItemTooltip="Move to team project";e.NoData="[No data]";e.LinksControlPullRequestText="Pull Request";e.DeleteSelectedWorkItemsToolTip="Delete selected work item(s)";e.DeleteAttachment="Delete attachment";e.LinkToExistingDialogFormNotFound="Form not found for link type {0}.";e.UnfollowWorkItemToolTip="Unfollow work item";e.LinkSelectedItemsToNewWorkItemToolTip="Link to a new work item";e.MoveWorkItemPathInvalid="The selected value does not exist.";e.SaveAll="Save all";e.WorkItemLogControlLinkAdded="added {0}link";e.SaveAttachmentButtonText="Save copy";e.SaveQueryAs="Save as...";e.StoryboardLinkInvalid="TF400063: You have entered an invalid storyboard link: {0}. You must provide a valid UNC path to a file or URL to a storyboard stored on a shared resource. Correct the link and try again.";e.WorkItemFinderQuery="Query";e.ProjectNameRequired="Project must be specified.";e.DeleteAttachmentsDialogConfirmationText="Are you sure you want to delete the {0} selected attachments?";e.FieldStatusInvalidEmptyError="Field \u0027{0}\u0027 cannot be empty.";e.HistoryControlAgoLastSevenDays="Last seven days";e.DestroyWorkItemsTooltip="Permanently delete selected work item(s)";e.CreateCopyCopiedWithAllLinksFrom="Copied with all links from {0}";e.CorrectWisAndTryAgain="Please correct the unsaved work item(s) and try again.";e.LinkFormValidationInProgress="Validating work items. Try again after validation completes.";e.NoQueryFolderChildren="No sub-folders.";e.HistoryControlDetailsUp="Up";e.ErrorEmailEmptyQueryResults="TF242408: The query you selected does not return any work items. Select a query that contains at least one work item, and try again.";e.WorkItemFinderSelectQueryText="\u003cSelect a Query\u003e";e.StateLabel="Stat\u0026e";e.WorkItemTemplates_NoTemplatesDisabledMenuItemTitle="Capture to add a template";e.ConfirmWorkItemRevert="You have unsaved changes to this work item which will be lost. Are you sure you want to revert your changes to the work item?";e.DeleteAttachmentsDialogTitle="Delete attachment(s)";e.NewChartText="New chart";e.LinksControlRelatedText="Related";e.WorkItemFinderDialogTitle="Choose Linked Work Items";e.NewMenuTitle="New";e.WorkItemBulkSaveFailed="One or more work items could not be saved. You might have lost the connection to your server. Refresh your browser, and then try again. If the problem persists, you might not have the area path permissions required to edit work items.";e.EditComments="Edit comments";e.KeyboardShortcutDescription_OpenBacklog="Open backlog";e.CopyQueryURLInvalidIdException="The parameter \u0027tempQueryId\u0027 is not a valid GUID.";e.EmailQueryResult="Send query as an email";e.WorkItemTemplateDialog_Name="Name";e.ShowMoreWorkItemsMessage="Showing the first {0} items. {1}";e.DestroyWorkItemDialogTitle="Permanently delete work item(s)";e.LinkToExistingDialogDescription="Select the link type and the details.";e.HistoryControlAttachmentDeletedText="Attachment Deleted";e.LinkToExistingItemToolTip="Link to an existing item";e.UseWorkItemAsATemplateToolTip="Create a clone of this work item without links and attachments.";e.RefreshTooltip="Refresh";e.DevelopmentControlWorkHasntStartedMessage="Development hasn\u0027t started on this item.";e.SaveAndCloseWorkItemText="Save \u0026 Close";e.LinkFormWorkItemDetails="{0} {1} ({2}): {3}";e.WorkItemLinkTypeDoesNotExists="Work item link type \u0027{0}\u0027 does not exist.";e.FieldStatusInvalidPathError="The area or iteration provided for field \u0027{0}\u0027 could not be found.";e.LinksControlCommentColumnText="Comment";e.FiltersForLinkedWorkItems="Filters for linked work items";e.ProjectDoesNotExist="Project \u0027{0}\u0027 does not exist.";e.QueryEditorTreeTypeLabel="Type of tree";e.ColumnOptionsInvalidWidth="Enter a value between 0 and 65536.";e.DevelopmentControlCreateBranchTitle="Create a new branch";e.AddAttachmentButtonTitle="Add attachment(s)...";e.HistoryControlViaTextEnd=")";e.CustomizeWorkItemsNewFeatureTitle="Customize your work items";e.DialogClose="Close";e.ErrorExpectingNumericValue="Expecting numeric value.";e.WorkItemBulkDestroyError="We were unable to destroy some work item(s). They are not present in the recycle bin or access is denied. Please refresh to see the failed items.";e.ErrorDateTimeValueOutOfRange="The DateTime value is out of range.";e.WorkItemFinderResultStatusString="{0} work item(s) found.";e.WorkItemLogControlAttachmentsHeader="Attachments";e.KeyboardShortcutDescription_ToggleFullScreen="Toggle full screen mode";e.LinkDialogNewWorkItem="(New work item)";e.WorkItemTemplates_CaptureTemplateMenuItem_TooManyItemsTooltip="Templates can only be generated from individual work items";e.MoveWorkItemDialogTitle="Move work item";e.QueryEditorQueryModeMayHave="Return all top level items";e.WorkItemTabHeaderCount="{0} ({1})";e.FieldStatusInvalidOldValueError="The value for field \u0027{0}\u0027 must be updated, the current value is no longer supported.";e.HistoryControlLinkAddedText="Link Added";e.WorkItemFieldLabelTitleFormat="{0}\r\n[Field Name: {1}]";e.BulkEdit_ApplyTemplateTitle="Apply template";e.RenameQueryFolderTitle="Rename query folder";e.WorkItemDeleteError_ClickHere="click here";e.AddTagPlusText="+";e.Unknown="\u003cunknown\u003e";e.CustomizeWorkItemsText="Personalize your work items with custom fields, picklists and states or add your own custom work items to match your business process.";e.KeyboardShortcutDescription_Next_Item="Next item";e.AddAttachmentButtonText="Add";e.RestoreWorkItemDialogConfirmationText="Are you sure you want to restore the selected work item(s)?";e.CopyNameTemplate="{0} ({1})";e.WorkItemDeleteError_MoreInfo="For more information on what might cause this error,";e.LinksControlAddLinkDisabledTooltip="You cannot add a link to an item in read-only mode";e.ReturnLinksOfAnyType="Return links of any type";e.MultiFieldInsertNewFieldTooltip="Insert new field";e.InvalidQuerySyntax="{0} The error is caused by {1}.";e.MoveWorkItemBulkTypeError="Work item type(s) {0} may not exist in {1}.  Change the type of all selected work items below, or exit the dialog and move work items separately.";e.RecycleBin="Recycle Bin";e.HistoryControlWorkItemTagAddedAdornmentText="Tag added";e.StartStoryboarding="Start storyboarding";e.InsertImageEditLabel="Image";e.TextFilterNextItemsMessage="Filter the next {0} items";e.WorkItemChartsPageNotReady="TF401194: The Work item charts page is in an unready state.";e.WorkItemLogControlWorkItemTypeChange="changed type from {0} to {1}";e.HistoryControlMultipleLinksAdornmentText="Multiple links were added";e.LinksControlLinkTypeColumnText="Link Type";e.CreateCopyCopiedFrom="Copied from {0}";e.FieldStatusInvalidListValueError="The field \u0027{0}\u0027 contains the value \u0027{1}\u0027 that is not in the list of supported values.";e.EmptyQueryChartList="Choose \u0027New chart\u0027 to create the first chart for \u0027{0}\u0027 query.";e.QueryManageDialog_Validator_NameRequired="Name cannot be empty.";e.WorkItemLogControlOtherLinkDeleted="deleted other link";e.HistoryControlMultipleAttachmentsAdornmentText="Multiple attachments were added";e.WorkItemLogControlLinkDeleted="deleted {0}link";e.RelatedArtifactsWorkHasntStartedMessage="Development hasn\u0027t started on this item.";e.HotSpotDevelopmentBranchContent="You can start your feature development right from your work item. Don\u0027t worry, we\u0027ll make sure it\u0027s linked for you.";e.WorkItemTemplateDialog_CopyLinkEnabledMessage="Copy the URL to add a work item using this template.";e.DeleteWorkItemDialogConfirmationTextLearnMoreLink="Learn more";e.SaveResults="Save results";e.HistoryControlLinkDeletedText="Link Deleted";e.WorkItemTemplateDialog_AddComment="Add a comment";e.LinkToExistingDialogTitle="Add Link to {0} {1}: {2}";e.SaveAllQueries="Save all queries";e.DragFavoriteFailed="The query \u0027{0}\u0027 could not be added to favorites. The underlying error was: \u0027{1}\u0027";e.MoveWorkItemIterationPathLabel="Iteration path";e.QueryManageDialog_Validator_FolderInvalid="Folder is invalid.";e.Customize="Customize";e.TriageSummary="{0} of {1}";e.ChangeTypeTooltip="Change work item type";e.WorkItemChartsUnsavedQuery="Please save your query before creating a chart.";e.WorkItemFinderAnyProject="Any Project";e.CreateCopyOfWorkItemTitle="Copy Work Item";e.LinksControlResultAttachmentText="Result Attachment";e.TitleEmptyText="Enter Title";e.WorkItemFieldDoesNotExist="Work item field \u0027{0}\u0027 does not exist.";e.WorkItemTypeNameRequired="Work item type must be specified.";e.DiscardWorkItemTooltip="Discard work item";e.LinksControlNewLinkedItem="New";e.MultiFieldAddNewField="Add new field";e.UnsavedWorkItemPrompt="You have modified this work item.  Close and lose changes?";e.TriageViewWorkItemSaveError="Work item {0}:";e.WorkItemFinderAllWorkItemTypes="All Work Item Types";e.UseWorkItemAsATemplate="Clone work item";e.SaveAttachments="Save attachments";e.WorkItemTemplates_CaptureTemplateDialogTitle="Capture Template";e.DeleteWorkItemDialogRefreshWarningMessage="After deleting selected work items, you need to refresh the page to reflect the changes.";e.WorkItemTemplates_ManageMenuItem_Title="Manage this team\u0027s templates";e.HotSpotFollowsTitle="Stay informed";e.DeleteAttachments="Delete attachments";e.MoveWorkItemProjectWatermark="Select a project";e.ColumnOptionsTooltip="Column options";e.HotSpotDevelopmentBranchTitle="Start development!";e.WorkItemLogControlFieldsHeader="Fields";e.LinksControlResolvingArtifact="Artifact {0} (getting details...)";e.WorkItemTypeChangeInProgress="Change type is almost complete! Simply click Save.";e.LinksUnsafeProtocolNotOpened="The URL contains a potentially unsafe protocol and will not be opened.";e.QueryAcrossProjects="Query across projects";e.LinkFormResultAttachmentMessage="To link an attachment from a test result to this work item, you must open the test result that contains the attachment and associate the work item with the test result.";e.DialogSave="Save";e.WorkItemDiscussionLabel="Discussion";e.DeleteSelectedWorkItems="Delete";e.SaveAndClose="Save and close";e.NewFeatureCustomizeProcessLinkTitle="Customize process";e.ConfirmDeleteQuery="Are you sure you want to delete \u0027{0}\u0027?";e.LinkDialogNewWorkItemWithType="New {0}: {1}";e.CopyQueryURL="Copy query URL";e.DeletedAreaPath="(removed area path)";e.LinkFormWorkItemNotFound="Work item {0}: Not found or no permission to access it.";e.WorkItemDiscussionAdornmentGoToDiscussion="Go to discussion";e.TrackChangesNewFeatureTitle="Track changes to work items and code";e.LinksControlBranchText="Branch";e.QueryItemAlreadyExist="Query item \u0027{0}\u0027 already exists.";e.HistoryControlAgoYesterday="Yesterday";e.RevertWorkItemTooltip="Undo changes to work item";e.QueryEditorQueryModeMustHave="Only return items that have matching links";e.WorkItemLogControlProjectChange="changed project from {0} to {1}";e.WorkItemEditorDirtyCaption="{0}*";e.WorkItemLogControlAttachmentDeleted="deleted attachment";e.WorkItemEditorCaption="{0} {1}";e.CopyQueryURLDataTooLargeException="VS402348: The query definition is too large to share. Please save the query as a Shared Query and share the link to the saved query.";e.CopyTemplateURL="Copy template URL";e.QueryDirtyDocumentTitleFormat="Query: {0}";e.LinkDialogMultipleWorkItemsSelected="(Multiple work items selected)";e.LinksControlAddLinkToExistingItem="Existing item";e.ColumnOptions="Column options";e.WorkItemTemplateDialog_CopyLink="Copy link";e.MoveWorkItemChangeTypeWatermark="Select a work item type";e.OpenAttachment="Open attachment";e.WorkItemDiscussionMentionLinkComment="{0} mentioned work item #{1} in #{2} discussions";e.AreaLabel="\u0026Area";e.FollowingWisCouldNotBeSaved="The following work item(s) could not be saved:";e.WorkItemRevert="Revert changes";e.FieldStatusInvalidCharactersError="The value for field \u0027{0}\u0027 has unsupported characters.";e.LinksControlWorkItemTypeFiltered="Work item {0}: Work item type {1} is not allowed to be added as a link.";e.LinksControlSelfWorkItemLink="You cannot link a work item to itself. Remove the following work item from the list of items that you are linking to and try again: \u0027{0}\u0027.";e.HistoryControlArtifactResolutionFailed="Could not resolve {0} {1}";e.MoveWorkItemAreaPathLabel="Area path";e.VisualizeYourWorkNewFeatureTitle="Visualize Your Work";e.WorkItemLogControlMadeOtherChanges="made other changes";e.ReturnSelectedLinkTypes="Return selected link types";e.LinksControlCommitText="Commit";e.OK="OK";e.RelatedArtifactsCreateBranchTitle="Create a new branch";e.HistoryControlCommentAdornmentText="{0} left a comment";e.LinksControlDuplicateHyperlink="Duplicate hyperlink.";e.LinksControlHyperlinkText="Hyperlink";e.RecentWorkItems="Recent work items";e.NewLinkedWorkItemToolTip="New linked work item";e.CannotGetRegisteredInstance="Cannot get registered instance for : {0}";e.LinksControlBuildText="Build";e.QueryEditorQuery="Query";e.HistoryControlAgoOlder="Older";e.EmailSelectedWorkItemToolTip="Email the selected work item";e.HistoryControlAgoToday="Today";e.LinkFormTestResultMessage="To link a test result to this work item, you must open the test result and associate the work item with the test result.";e.ErrorExpectingIntegerValue="Expecting integer value.";e.FileThrottleDialogTitle="Too many files";e.EmailWorkItem="Email...";e.BulkEditSelectedWorkItems="Edit...";e.LinkDialogCommentTitle="Comment";e.InvalidErrorParameter="Invalid Error Parameter";e.ExternalLinkText="External link";e.AddAttachmentUnknownError="Unknown Attachment Error.";e.LinksControlDescriptionColumnText="Description";e.QueryFilterErrorEmptyValue="The value for row {0} is not filled correctly.";e.StartStoryboardingToolTip="Start storyboarding using PowerPoint";e.WorkItemLogControlCreatedWorkItem="created the {0}";e.ErrorExpectingBooleanValue="Expecting boolean value.";e.Bug="Bug #{0}";e.WorkItemBulkRestoreError="We were unable to restore some work item(s). They are not present in the recycle bin or access is denied. Please refresh to see the failed items.";e.WorkItemLinkText="Work item link";e.UnsavedQueryPrompt="There are unsaved query changes. If you continue and refresh the query hierarchy then you will lose your changes.";e.EditComment="Edit comment";e.LinksControlLinkToExistingTooltip="Link to...";e.LinkDialogNoItemsSelected="(No items selected)";e.AssignedToEmptyText="Unassigned";e.QueryEditorLinkTypeLabel="Types of links";e.WorkItemChartsUnrecognizedQueryMessage="Query Type is unrecognized - You can create a chart for a flat list query.";e.StateEmptyText="Select State";e.WorkItemRemainingArtifactsDisplayStringPlural="{0} Work Items";e.FollowedWorkItemsQuery="Followed work items";e.LinksControlCreateNewLink="New item";e.CopyQueryURLExpirationMessage="Note: The query URL will expire in {0} days.";e.WorkItemMoveInProgress="Your move is almost complete! Simply click Save.";e.LinksControlAddLinkDisplayText="Add link";e.NoLicenseEmptyQueryChartList="To author charts, you must have the correct license and configuration. For more information, see \u003ca href=\u0027https://go.microsoft.com/fwlink/?LinkId=256033\u0027 target=\u0027_blank\u0027\u003eMSDN\u003c/a\u003e.";e.LinksControlVersionedItemText="Versioned Item";e.WorkItemTypeDoesNotExist="Work item type \u0027{0}\u0027 does not exist.";e.QueryEditorQueryMatchTopLevelItems="Match top-level work items first";e.HistoryControlWorkItemRestoredAdornmentText="Work item restored";e.KeyboardShortcutDescription_NewQuery="New query";e.RichEditorMaximizeName="Maximize";e.RestoreWorkItemsTooltip="Restore selected work item(s)";e.WorkItemToolbarSwitchToNewForm="Try the new form";e.HistoryControlWorkItemDeletedAdornmentText="Work item deleted";e.LinkDialogTypeNotValid="Could not find the specified link type.";e.AttachmentsGridCommentsColumn="Comments";e.KeyboardShortcutDescription_OpenTaskBoard="Open task board";e.WorkItemTypeChangeInProgressWithErrors="Change type is almost complete! Fix the errors and click Save.";e.LinksFormDuplicateWorkItemLink="The current work item already contains links to the following work item: {0}";e.ChartEditor_Query_GroupingTooltip="The columns you have specified in your query will show up as grouping for the chart.";e.UnableToCreateBugOfType="Unable to create work item of type: {0}.";e.InsertImageInvalidFileType="TF400116 Unsupported file type.  Valid file types are: {0}.";e.WorkItemArtifactLastUpdatedLabel="Updated {0}";e.StateTransitionGraphViewAllChangesText="Show all";e.UnableToFindQueryDefintion="Unable to find query definition: {0}.";e.WorkItemDiscussionAdornmentTooltipSingular="Go to discussion. There is 1 comment available";e.FolderLabel="Folder";e.NoLicenseHostedEmptyQueryChartList="No charts exist for this query.";e.HistoryControlShowMoreFormat="({0} of {1})";e.HistoryControlStateAdornmentText="Set to {0} state";e.LinkDialogErrorWorkItemTypesToAdd="The filter for the link control is defined so that no work items of any type can be added. Modify the filter definition and import it again.";e.ControlInstructionsDragDropText="Drag and drop attachments or ";e.Querying="Querying...";e.Development_GenericError="An error has occurred. Please refresh.";e.LinksControlDeleteLinkedItem="Delete link";e.NewLinkedWorkItemTypeTitle="Work item type";e.QueryName="Query name";e.ErrorCannotCreateWorkItemControl="Cannot create work item control of type \"{0}\"";e.LinksControlOpenLinkedItem="Open linked item";e.WorkItemLinkTypeEndDoesNotExist="Work item link type end \u0027{0}\u0027 does not exist.";e.WorkItemRestoreError="Failed to restore work item: {0}. Error Details: {1}";e.NewFeatureLearnMoreLinkTitle="Learn More";e.LinkDialogWorkItemIdsTitle="Work item IDs";e.InsertImageUploadingDialogTitle="Uploading Image...";e.InternalServerError="Internal Server Error:";e.NoEntries="[No entries]";e.WorkItemTemplates_CaptureTemplateMenuItem_Title="Save the fields of this work item as a reusable template";e.AdhocQueryDefaultName="Custom query";e.FollowingWorkItem="Following";e.BrowseFilesExceedMaxMb="Please re-select your files. The following file(s) couldn\u0027t be uploaded because they exceed our {0} MB file size limit: {1}";e.SaveAndCloseWorkItem="Save and close the work item (Ctrl + Enter)";e.AssignedToMeQuery="Assigned to me";e.MoveWorkItemTitle="Move to team project...";e.MoveWorkItemBlockedCase="Work item type {0} cannot be moved.";e.RevertQueryChanges="Revert changes";e.AttachmentsGrid_PlaceholderPrefixText="Uploading ";e.LinksControlLinkToExisting="Link to";e.WorkItemTemplate_FailedToLoad="Failed to load template.";e.WorkItemTemplate_FailedToSave="Failed to save template.";e.LinksControlStoryboardText="Storyboard";e.WorkItemFinderProject="Project";e.CopySelectedWorkItemsAsHtml="Copy as HTML";e.WorkItemTemplateDialog_ConfirmClosePrompt="You have modified this template. Close and lose changes?";e.QueryEditorQueryMatchLinkedItems="Match linked work items first";e.ColumnOptionsTitle="Column options";e.WorkItemLogControlDeletedWorkItem="deleted the work item";e.HistoryControlProjectAdornmentText="Work item moved to {0} project";e.EmailSelectedWorkItemsToolTip="Email the selected work items";e.MovingQueryLabel="{0} *";e.DiscardWorkItem="Discard";e.WorkItemDiscussionAdornmentTooltip="Go to discussion. There are {0} comments available";e.AddAttachmentDialogFieldComment="Comment";e.WorkItemDelete_NoPermission="We were unable to delete the work item(s), you do not have sufficient permissions to delete.";e.DestroyWorkItemDeleteButtonText="Permanently delete";e.LinkToExistingItem="Link to an existing item...";e.QueryResultsNewQueryGridStatusText="Run to see the query results.";e.WorkItemInfoBarCaptionFormat="{0}:";e.WorkItemTemplateDialog_Title="Edit Template";e.WorkItemDiscussionAddComment="Add a comment. Use # to link a work item or @ to mention a person";e.WorkItemChartsDisallowedAdhocQuery="TF401195: This generated query is not supported for use with Charting.";e.RecyclebinCleanupMessage="Recycle Bin items older than {0} days will be permanently deleted.";e.ErrorQueryDoesNotExist="\u0027{0}\u0027 does not exist";e.DeleteOrRestoreConfirmationMessage="Work items are still being deleted or restored. The operation may be canceled if you navigate away.";e.TagsLabelText="Tags";e.MoveWorkItemMessage="Learn more about moving a work item";e.TriageNextWorkItemToolTip="Next work item in the \"{0}\" query (Alt + N)";e.HistoryControlShowMoreLinkText="Show more";e.LinkDialogMultipleParentsNotAllowed="You cannot specify more than one parent link for the work item when the following link type is selected: {0}.";e.InvalidArgumentExpectingArray="Invalid argument, expecting array of WorkItemRelations";e.DeletedIterationPath="(removed iteration path)";e.SelectedWorkItemsLabel="Selected Work Items";e.LinksControlDuplicateStoryboard="The current work item already contains a link to this storyboard: {0}";e.MoveWorkItemDialogCurrentProjLabel="(current project)";e.RetrievingWorkItemTypes="Retrieving work item types...";e.FieldStatusInvalidDateErrorError="The value for field \u0027{0}\u0027 is not a recognized date.";e.LinksControlGroupText="{0} ({1})";e.InsertImageName="Insert image";e.ErrorExpectingDateTime="Expecting DateTime value.";e.FieldStatusInvalidValueNotInOtherFieldError="The field \u0027{0}\u0027 is unsupported because a value is missing in another field.";e.LinksControlEnterStoryboardUrl="You must specify a link to the storyboard. A valid UNC path to a file or URL to a storyboard stored on a shared resource is required.";e.DragQueryMoveFailed="Can\u0027t move query \u0027{0}\u0027 . The underlying error is: \u0027{1}\u0027";e.WorkItemLogControlDetailsTitle="All Changes";e.KeyboardShortcutDescription_RefreshQuery="Refresh query";e.QueryEditorQueryTypeLabel="Type of query";e.QueryEditorSourceFilterGroupingText="Filters for top level work items";e.ChangeTypeBlockedCase="Work item type {0} cannot be changed.";e.NoActiveWorkItem="Active work item document does not exist in the current context";e.FieldStatusInvalidComputedFieldError="The value for field \u0027{0}\u0027 is computed and cannot be changed.";e.DeleteWorkItemDialogConfirmationText="Are you sure you want to delete this work item?";e.BackToQueryResults="Return to the \"{0}\" query (Alt + Q)";e.RestoreWorkItemDeleteButtonText="Restore";e.AttachmentsGridNameColumn="Name";e.QueryEditorQueryTypeSimple="Flat list of work items";e.AttachmentsTitle="Attachments";e.WorkItemTemplates_UserDoesNotHaveTeamPermission="You do not have permission to edit templates for this team.";e.QueryEditorNewQueryNameFormat="New Query {0}";e.NewLinkedWorkItemDialogTitle="Add New Linked Work Item to {0} {1}: {2}";e.LastUpdatedDateLabel="Updated";e.FileThrottleMessage="You have attempted to upload more files than the maximum allowed at once: {0}";e.ContributionNotFound="Contribution not found.";e.HistoryControlAttachmentAddedText="Attachment Added";e.TriageView="Triage View";e.CannotCopyUrl="Cannot copy URL";e.AttachmentUploadFailMessage="You have attempted to upload files that either donâ€™t exist or are folders: {0}";e.CopySelectedWorkitemsOpenAsQuery="Open as query";e.CreateCopyOfWorkItem_IncludeLinks="Include existing links";e.WorkItemLogControlStateGraphTitle="State Graph";e.QueryEditorQueryModeDoesNotContain="Only return items that do not have matching links";e.DialogCloseButtonText="Close (ESC)";e.CopyQueryURLNotFoundException="VS402349: The custom query does not exist or is expired.";e.ErrorDialogTitle="Error";e.FieldStatusInvalidNotEmptyOrOldValueError="The value for field \u0027{0}\u0027 must be empty or the same as the original value.";e.FieldStatusInvalidNotOldValueError="The value for field \u0027{0}\u0027 must be the same as the original value.";e.AssignedToLabel="Assi\u0026gned To";e.SuccessfulUnfollowFromEmail="You are no longer following this work item.";e.ContributionTimedOut="\"Timed-out waiting for contribution source provider for contribution: {0}";e.QueryConfirmDragDropOperation="Are you sure you want to move the selected item from \u0027{0}\u0027 to \u0027{1}\u0027? Doing so prevents others from accessing it.";e.WorkItemLogControlUserViaUser="{0} (via {1})";e.LinksControlNewLinkedItemTooltip="New linked work item...";e.WorkItemLogControlOldValue="Old value";e.QueryResultsGridStatusTextFormat="{0} work items ({1} selected)";e.CopySelectedWorkItemsIdColumnTitle="ID";e.LinkFormNewWorkItemDetails="New {0}: {1}";e.WorkItemMoveInProgressWithErrors="Your move is almost complete! Fix the errors and click Save.";e.SaveQueryAsTooltip="Save query as...";e.QueryManageDialog_Validator_FolderRequired="Folder cannot be empty.";e.LinksControlEnterUrl="Enter a URL.";e.LastUpdatedLabel="Updated by ";e.MissingUri="Missing uri property for contribution : {0}";e.FutureIterations="Future Iterations";e.WorkItemToolbarSwitchToOldForm="Back to old form";e.FieldStatusInvalidEmptyOrOldValueError="Field \u0027{0}\u0027 cannot be empty, and must be different from the original value.";e.FieldStatusInvalidNotEmptyError="The value for field \u0027{0}\u0027 must be empty.";e.QueryingStatusText="Querying...";e.HistoryControlDetailsDown="Down";e.CreateCopyOfWorkItemType="Work item type";e.WorkItemTemplates_ManageMenuItem_Text="Manage...";e.ShowMoreWorkItemsLinkMessage="Show all items";e.KeyboardShortcutGroup_Work="Work";e.Refresh="Refresh";e.WorkItemsCreatedByMeQuery="Work items created by me";e.CreateCopyCopiedFromNewWorkItem="Copied from new work item";e.SwitchViewReloadPrompt="Switching views will close your current dialog and refresh your page. Confirm that you want to switch.";e.DeleteWorkItemDeleteButtonText="Delete";e.WorkItemRemainingArtifactsDisplayStringSingular="{0} Work Item";e.WorkItemLogControlLinksAndAttachmentsHeader="Links \u0026 Attachments";e.BulkEditWorkItemsNotesForHistoryLabel="Notes for History";e.IterationLabel="Ite\u0026ration";e.EmailWorkItemLimit="Only the first {0} work items are retrieved for the email.";e.WorkItemLogControlRestoredWorkItem="restored the work item";e.TriageViewSaveErrorTitle="Error saving work items";e.MoveWorkItemTypeError="Work item type {0} does not exist in {1}.";e.BulkUnfollowWorkItems="Unfollow";e.HistoryControlNewValueText="New Value";e.HotSpotFollowsGeneralAction="Click to unfollow at any time.";e.AttachmentsGridSizeColumn="Size";e.WorkItemTemplates_LegacyCopyMenuItem_Title="Generate a URL that will create a new work item with the modified field values of this work item.";e.WorkItemDestroyError="Failed to destroy work item: {0}. Error Details: {1}";e.WorkItemToolbarTemplateTooltip="Apply or capture a template";e.EmailSelectedWorkItem="Email selected work item...";e.MoveWorkItemKeepType="Keep current type(s)";e.ErrorEmailUnsavedQuery="You have unsaved changes made to the query \u0027{0}\u0027. Save the modified query before proceeding.";e.RemoveAttachmentsConfirm="Are you sure you want to remove the selected attachments?";e.FormGridSectionLabel="Section {0}";e.UnfollowWorkItem="Unfollow";e.WorkItemLogControlDiscussionTitle="Discussion Only";e.LinksControlUnsafeUrl="The URL specified has a potentially unsafe URL protocol.  Please specify a different URL.";e.HistoryControlLinksTitle="Links";e.WorkItemTemplateNotApplied="VS403204: No template was applied.";e.WorkItemHistoryShowMore="Show more";e.FollowsLearnMoreUrl="https://msdn.microsoft.com/Library/vs/alm/work/track/follow-work-items";e.LinkToExistingDialogTitleNew="Add Link to New {0}: {1}";e.NewLinkedWorkItemTitleMultiple="Add New Linked Work Item to Multiple Items";e.WorkItemTemplates_LegacyCopyMenuItem_Text="Copy template URL";e.AddAttachmentDialogTitle="Add Attachment(s)";e.SaveAttachmentButtonTitle="Download attachment...";e.WorkItemLogControlStateChange="changed state from {0} to {1}";e.QueryTree_Loading="Loading";e.CopySelectedWorkItems="Copy";e.WorkItemLogControlLinkRestored="restored link";e.LinksControlAddNewItemDisabledTooltip="You cannot link new work items to an item that has not been saved";e.WorkItemEditorCaptionNew="New {0} {1}";e.Navigation_AllWorkItemsTitle="All Work Items";e.WorkItemLogControlAddedComment="added comment";e.KeyboardShortcutGroup_Queries="Queries";e.WorkItemFinderQueryInProgress="Query in progress...";e.CopyQueryURLNotifyMessage="The query URL is copied to the clipboard.";e.CreateWorkitemIVURLSuccess="Successfully copied the template URL to the clipboard.";e.FailedUnfollowFromEmail="Unfollow was not successful";e.QueryFilterErrorUnrecognizedOperator="The operator for row {0} is not recognized.";e.MoveWorkItemIterationPathWatermark="Select an iteration path";e.CreateCopyOfWorkItemToolTip="Create a copy of this work item";e.NewQueryFolder="New query folder";e.WorkItemLogControlMadeChangeWithValue="changed {0} to {1}";e.QueryFilterErrorMissingOperator="The operator for row {0} is missing.";e.SaveQueryAsDialogTitle="Save query as";e.DeleteWorkItemDialogConfirmationTextWithoutCleanUpScheduled="You can restore deleted work items from the Recycle Bin until they are permanently deleted based on auto-delete settings (disabled). {0}.";e.TrackChangesText="View your code artifacts right from the work item form. Creating a new branch or pull request for a bug fix is just a click away.";e.LinkDialogStoryboardLinkAddressTitle="Location";e.GenericHistoryRetrievalError="Error retrieving work item history";e.NoTeamFavoriteQueries="Drag shared queries here to add them to your team favorites.";e.LinkSelectedItemsToNewWorkItem="Link to a new work item...";e.BrowserRefreshRequired="VS402831: Changes have been made to the process that require you to refresh your browser.";e.UnsavedContinue="Do you want to continue?";e.BulkEdit_ApplyTemplateMessage="Are you sure you want to apply the template \u0027{0}\u0027? The selected work items will be automatically saved.";e.LinksControlUnknownLinkTypeText="Unknown link type to execute.";e.QueryResultsGridStatusNoResultsText="Query returned no results.";e.BulkUnfollowsFailed="One or more items could not be unfollowed. Refresh the query and try again.";e.CopySelectedWorkItemsAsHtmlToolTip="Copy selected work item(s) to the clipboard in HTML format";e.ChangeTypeTooltipDisabled="Change work item type (not supported when querying across projects)";e.CreateCopyOfWorkItemSourceFormat="Creating a copy of {0} {1}: {2}";e.BulkEditSelectedWorkItemsTooltip="Edit the selected work items.";e.HistoryControlViaText=" via (";e.FilesUploadedExceedMaxMb="The following file(s) can\u0027t be uploaded because they exceed our {0} MB file size limit: {1}";e.ErrorEmailUnsavedWorkItems="The selected work items cannot be emailed. You have new work items that have not yet been saved. To proceed, exclude the new work items from the selection.";e.EmailSelectedWorkItems="Email...";e.SaveQuery="Save query";e.DeleteQuery="Delete";e.FieldStatusInvalidTooLongError="The value for field \u0027{0}\u0027 is too long.";e.BulkEditWorkItemsTitle="Edit work items";e.OpenInNewTab="Open in new window";e.ChangeTypeDialogTitle="Change work item type";e.RichEditorRestoreName="Restore";e.HistoryControlSingleAttachmentAdornmentText="{0} was added";e.NoMyFavoriteQueries="Drag queries here to add them to your favorites.";e.FollowWorkItemToolTip="Follow work item";e.CreateCopyOfWorkItem="Create copy of work item...";e.EditQuery="Edit query";e.RunQuery="Run query";e.RenameQueryTitle="Rename query";e.FollowWorkItem="Follow";e.QueryFilterInvalidMacro="TF20036: The macro \u0027{0}\u0027 is not recognized. Available macros include @Me, @Project, @Today and @CurrentIteration. ";e.MoveWorkItemAreaPathWatermark="Select an area path";e.HotSpotFollowsEmailContent="You\u0027ll get an email whenever a team member modifies a field value - courtesy of Visual Studio Team Services.";e.HistoryControlSummaryAssigned="Assigned";e.RestoreWorkItemDialogTitle="Restore work item(s)";e.StatusMessage_FatalError="An error has occurred while attempting to save your changes. Discard your changes and refresh the page. Error details: {0}";e.AttachmentsGridDateAttachedColumn="Date Attached";e.FieldStatusInvalidFormatError="The value for field \u0027{0}\u0027 is not in a recognized format.";e.AddAttachmentDialogFieldAttachment="Attachment(s)";e.CopyURLTooLong="Query URL string exceeds 2000 characters, current length is {0} characters. Reduce the number of query clauses and try again.";e.WorkItemBulkDeleteError="We were unable to delete some work item(s). They no longer exist or access is denied. Please refresh to see the failed items.";e.SaveAttachment="Save attachment";e.EditCommentDialogLabel="Comment:";e.LearnCustomization="Learn how to customizeâ€¦";e.LinkDialogHyperlinkAddressTitle="Address";e.Open="Open";e.Save="Save";e.KeyboardShortcutDescription_OpenCurrentIteration="Open current iteration";e.WorkItemLogControlMadeChanges="made field changes";e.WorkItemCommentsRetrievalError="Unable to retrieve comments";e.ChangeTypeTitle="Change type...";e.SwitchViewWithUnsavedWorkItemPrompt="Switching views will close your current dialog and refresh your page. You\u0027ll lose changes you\u0027ve made to this modified work item. Confirm that you want to switch.";e.FieldStatusInvalidTypeError="The value for field \u0027{0}\u0027 is not of the right type.";e.ChangeTypeLabel="Type";e.CopyQueryURLTitle="Copies the query URL to the clipboard.";e.WorkItemLogControlMadeChange="changed {0}";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("WorkItemTracking/Scripts/TFS.WorkItemTracking.WebApi",["require","exports","q","VSS/Diag","VSS/WebApi/RestClient","Presentation/Scripts/TFS/Generated/TFS.Server.WebAccess.WorkItemTracking.Constants"],function(n,t,i,r,u,f){var e,o,s;(function(n){n[n.Queries=0]="Queries";n[n.WorkItemTypeFields=1]="WorkItemTypeFields";n[n.WorkItemRuleEngine=2]="WorkItemRuleEngine";n[n.Attachments=3]="Attachments"})(e||(e={})),function(n){n.Simple="Simple";n.Chunked="Chunked"}(o=t.AttachmentUploadType||(t.AttachmentUploadType={}));t.DefaultAttachmentChunkSize=5e6;t.AttachmentsLocationId="E07B5FA4-1499-494D-A496-64B860FD64FF";s=function(n){function u(t){n.call(this,t);this._baseRootRequestPath=t}return __extends(u,n),u.prototype.beginGetRootQueries=function(n,t){var i=this._getQueryRequestOptions(n,t);return i.responseIsCollection=!0,this._beginRequest(i)},u.prototype.beginGetQueries=function(n,t,i){var u=this._getQueryRequestOptions(n,t,{query:i});return this._beginRequest(u)},u.prototype.beginGetQueriesByPath=function(n,t,i){var u=this._getQueryRequestOptions(n,t);return $.extend(u.data,{query:i}),this._beginRequest(u)},u.prototype.beginCreateQueryDefinition=function(n,t,i,u){return this._postQueryItem(n,{name:t,wiql:i,isFolder:!1},u)},u.prototype.beginCreateQueryFolder=function(n,t,i){return this._postQueryItem(n,{name:t,isFolder:!0},i)},u.prototype.beginMoveQueryItem=function(n,t,i){return this._postQueryItem(n,{id:t},i)},u.prototype.beginUpdateQueryDefinition=function(n,t,i){return this._patchQueryItem(n,{id:t,wiql:i})},u.prototype.beginRenameQueryItem=function(n,t,i){return this._patchQueryItem(n,{id:t,name:i})},u.prototype.beginDeleteQueryItem=function(n,t){var i=this._getRequestOptions(e.Queries,"DELETE",null,{query:t,project:n});return this._beginRequest(i)},u.prototype._beginGetLocation=function(n,t){var r=i.defer();switch(t){case u.WorkItemTypeFieldsLocation.id:r.resolve(u.WorkItemTypeFieldsLocation);break;case u.QueryLocation.id:r.resolve(u.QueryLocation);break;case u.WorkItemRuleEngineLocation.id:r.resolve(u.WorkItemRuleEngineLocation);break;case u.AttachmentsLocation.id:r.resolve(u.AttachmentsLocation)}return r.promise},u.prototype._postQueryItem=function(n,t,i){var r=this._getRequestOptions(e.Queries,"POST",t,{query:i,project:n});return this._beginRequest(r)},u.prototype._patchQueryItem=function(n,t){var i=this._getRequestOptions(e.Queries,"PATCH",t,{query:t.id,project:n});return this._beginRequest(i)},u.prototype._getRequestOptions=function(n,i,r,u){switch(n){case e.Queries:return{httpMethod:i,area:f.WitConstants.AreaName,locationId:f.WitConstants.QueriesLocationId,routeValues:u,data:$.extend(this._getDefaultParameters(),r),responseIsCollection:!1};case e.WorkItemTypeFields:return{httpMethod:i,area:f.WitConstants.AreaName,locationId:f.WitConstants.WorkItemTypeFieldsLocationId,routeValues:u,data:$.extend(this._getDefaultParameters(),r),responseIsCollection:!1};case e.WorkItemRuleEngine:return{httpMethod:i,area:f.WitConstants.AreaName,locationId:f.WitConstants.WorkItemRuleEngineLocationId,routeValues:u,queryParams:{"api-version":f.WitConstants.DefaultPreviewApiVersion},data:r,responseIsCollection:!1};case e.Attachments:return{httpMethod:i,area:f.WitConstants.AreaName,locationId:t.AttachmentsLocationId,routeValues:u,data:$.extend(this._getDefaultParameters(),r),responseIsCollection:!1}}},u.prototype._getQueryRequestOptions=function(n,t,i){return this._getRequestOptions(e.Queries,"GET",{$depth:t,$expand:"minimal"},$.extend({project:n},i))},u.prototype.beginGetWorkItemTypeFields=function(n,t,i){var u=this._getRequestOptions(e.WorkItemTypeFields,"GET",null,{project:n,type:t,field:i});return this._beginRequest(u)},u.prototype.beginRunRuleEngine=function(n,t,i,u){var f={rulesFrom:[n],fields:t,fieldValues:i,fieldUpdates:u},o=this._getRequestOptions(e.WorkItemRuleEngine,"POST",f);return this._beginRequest(o)},u.prototype.beginAttachmentUpload=function(n,i,u){var f=i?i:t.DefaultAttachmentChunkSize;return n.size>f?this.beginAttachmentUploadChunked(n,f,u):this.beginAttachmentUploadSimple(n)},u.prototype.beginAttachmentUploadChunked=function(n,t,i){var f=this,u;return u=jQuery.Deferred(),this._registerAttachment(n).then(function(r){f._uploadAttachment(r.id,n,t,i).then(function(){return u.resolve(r)},function(n){return u.reject(n)})}),u.promise()},u.prototype.beginAttachmentUploadSimple=function(n){var u=this;var i=jQuery.Deferred(),t=new FileReader,f=!1,e=function(n){f=!0;i.reject(n)};try{t.readAsArrayBuffer(n)}catch(s){e(s)}return t.onerror=function(n){e(n)},t.onloadend=function(){if(!f&&t.readyState===t.DONE){var n=new Uint8Array(t.result),r=$.extend(u._getAttachmentUploadRequestParams("POST",o.Simple),{data:n,isRawData:!0});u._beginRequest(r).then(function(n){return i.resolve(n)},function(n){return i.reject(n)})}},i.promise()},u.prototype._registerAttachment=function(){var n=this._getAttachmentUploadRequestParams("POST",o.Chunked);return this._beginRequest(n)},u.prototype._uploadAttachment=function(n,i,u,f){function l(){var t;$.isFunction(i.slice)&&(!f||f())?t=i.slice(c,s+1):e.reject();var n=new FileReader,r=!1,o=function(n){r=!0;e.reject(n)};try{n.readAsArrayBuffer(t)}catch(y){o(y)}n.onerror=function(n){o(n)};n.onloadend=function(){if(!r&&n.readyState===n.DONE){var t=$.extend(a,{data:new Uint8Array(n.result),isRawData:!0,customHeaders:{"Content-Range":"bytes "+c+"-"+s+"/"+h}});v._beginRequest(t).then(function(){return s<h-1?(c+=u,s=Math.min(s+u,h-1),l()):e.resolve(),null},function(n){return e.reject(n)})}}}var e;e=jQuery.Deferred();(!u||u<=0)&&(u=t.DefaultAttachmentChunkSize);var h=i.size,c=0,s=Math.min(u,h)-1,a=this._getAttachmentUploadRequestParams("PUT",o.Chunked,n),v=this;return l(),e.promise()},u.prototype._getAttachmentUploadRequestParams=function(n,i,r){var u={area:f.WitConstants.AreaName,locationId:t.AttachmentsLocationId,queryParams:{uploadType:i},httpMethod:n,apiVersion:f.WitConstants.DefaultReleaseApiVersion};return r?$.extend(u,{routeValues:{id:r}}):u},u.prototype._getDefaultParameters=function(){return{"api-version":f.WitConstants.DefaultReleaseApiVersion}},u.QueryLocation={id:f.WitConstants.QueriesLocationId,area:f.WitConstants.AreaName,maxVersion:"2.0",minVersion:"2.0",releasedVersion:"2.0",resourceName:"queries",resourceVersion:2,routeTemplate:"{project}/_apis/{area}/{resource}/{*query}"},u.WorkItemTypeFieldsLocation={id:f.WitConstants.WorkItemTypeFieldsLocationId,area:f.WitConstants.AreaName,maxVersion:"2.0",minVersion:"1.0",releasedVersion:"1.0",resourceName:"workItemTypesField",resourceVersion:1,routeTemplate:"{project}/_apis/{area}/workitemtypes/{type}/fields/{field}"},u.WorkItemRuleEngineLocation={id:f.WitConstants.WorkItemRuleEngineLocationId,area:f.WitConstants.AreaName,resourceName:"ruleEngine",routeTemplate:"_apis/{area}/${resource}",resourceVersion:1,minVersion:"1.0",maxVersion:"2.0",releasedVersion:"1.0"},u.AttachmentsLocation={id:t.AttachmentsLocationId,area:f.WitConstants.AreaName,resourceName:"attachments",routeTemplate:"_apis/{area}/{resource}/{id}",resourceVersion:1,minVersion:"1.0",maxVersion:"2.0",releasedVersion:"1.0"},u}(u.VssHttpClient);t.WorkItemTrackingHttpClient=s});
define("TFS/WorkItemTracking/BatchRestClient",["require","exports","VSS/Service","VSS/WebApi/RestClient","VSS/WebApi/Constants"],function(n,t,i,r,u){"use strict";function e(){return i.getClient(f)}var f=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.createWorkItemsBatch=function(n,t,i){for(var f,u=[],e="/"+t+"/_apis/wit/workitems/$"+i+"?api-version=3.0-preview.2",r=0,o=n.length;r<o;r++)f={method:"PATCH",uri:e,headers:{"Content-Type":"application/json-patch+json"},body:n[r]},u.push(f);return this._beginBatchRequest(u)},t.prototype.updateWorkItemsBatch=function(n){var t=this,i=n.map(function(n){return t._createBatchRequest(n[0],"PATCH","workItems",n[1])});return this._beginBatchRequest(i)},t.prototype.destroyWorkItemsBatch=function(n){var t=this._createBatchRequests(n,"DELETE","recyclebin");return this._beginBatchRequest(t)},t.prototype.restoreWorkItemsBatch=function(n){var t=this._createBatchRequests(n,"PATCH","recyclebin",[{op:"replace",path:"/IsDeleted",value:!1}]);return this._beginBatchRequest(t)},t.prototype.deleteWorkItemsBatch=function(n){var t=this._createBatchRequests(n,"DELETE","workItems");return this._beginBatchRequest(t)},t.prototype._createBatchRequests=function(n,t,i,r){for(var e,f=[],u=0,o=n.length;u<o;u++)e=this._createBatchRequest(n[u],t,i,r),f.push(e);return f},t.prototype._createBatchRequest=function(n,t,i,r){return{method:t,uri:"/_apis/wit/"+i+"/"+n+"?api-version=2.2-preview",headers:{"Content-Type":"application/json-patch+json"},body:r}},t.prototype._beginBatchRequest=function(n){return this._beginRequest({httpMethod:"POST",area:"wit",locationId:"A5AD93C8-56B7-4CB0-A9C0-8419DBD7FC71",resource:"batch",routeTemplate:"_apis/{area}/${resource}",data:n})},t.serviceInstanceId=u.ServiceInstanceTypes.TFS,t}(r.VssHttpClient);t.WorkItemTrackingHttpBatchClient=f;t.getClient=e});
define("WorkItemTracking/Scripts/CustomerIntelligence",["require","exports"],function(n,t){var e=function(){function n(){}return n.WORK_ITEM_TRACKING="WIT",n}(),i,r,u,f;t.WITCustomerIntelligenceArea=e;i=function(){function n(){}return n.CLIENTSIDEOPERATION_SEND_EMAIL="SendEmail",n.CLIENTSIDEOPERATION_OPEN_WORK_ITEM_IN_NEW_TAB="OpenWorkItemInNewTab",n.CLIENTSIDEOPERATION_PREFETCH_NEXT_WORKITEM="PrefetchNextWorkitemInTriageView",n.CLIENTSIDEOPERATION_PIN_STATE_TRANSITION_GRAPH="PinStateTransitionGraph",n.CLIENTSIDEOPERATION_COPY_QUERY_URL_RESULTS="CopyQueryURLResults",n.CLIENTSIDEOPERATION_COPY_QUERY_URL_EDITOR="CopyQueryURLEditor",n.CLIENTSIDEOPERATION_BACK_TO_QUERY_RESULTS="BackToQueryResults",n.CLIENTSIDEOPERATION_MAXIMIZE_RICH_EDITOR="MaximizeRichEditor",n.CLIENTSIDEOPERATION_QUERY_SOFTCAP_LINK="QuerySoftCapLink",n.CLIENTSIDEOPERATION_COPY_SELECTION_AS_HTML="CopySelectionAsHtml",n.CLIENTSIDEOPERATION_WORK_ITEM_FINDER="WorkItemFinder",n.TEXTFILTER="TextFilter",n.CLIENTSIDEOPERATION_QUERYACROSSPROJECTS="QueryAcrossProjects",n.CLIENTSIDEOPERATION_QUERY_WORK_ITEM="QueryWorkItem",n.CLIENTSIDEOPERATION_CREATE_QUERY="CreateQuery",n.CLIENTSIDEOPERATION_CHANGE_QUERY_COLUMNS="ChangeQueryColumns",n.CLIENTSIDEOPERATION_WIT_CLONE="CloneWorkItem",n.CLIENTSIDEOPERATION_VS_WORKITEM_NOT_IN_QUERY_RESULTS="VSOpenInWeb.WorkItemNotInQueryResult",n.CLIENTSIDEOPERATION_WIT_MOVE_CANCEL="WorkItemMove.CancelMove",n.CLIENTSIDEOPERATION_WIT_MOVE_CANCEL_AFTER_HIDDEN_TYPE_FAILED="WorkItemMove.CancelAfterHiddenTypeFailed",n.CLIENTSIDEOPERATION_WIT_MOVE_CANCEL_AFTER_TYPE_FAILED="WorkItemMove.CancelAfterTypeFailed",n.CLIENTSIDEOPERATION_WIT_MOVE_SUCCEED_AFTER_TYPE_FAILED="WorkItemMove.PassAfterTypeFailed",n.CLIENTSIDEOPERATION_WIT_MOVE_PERMISSIONS_ERROR="WorkItemMove.PermissionsError",n.CLIENTSIDEOPERATION_WIT_MOVE_ERROR="WorkItemMove.WitTypeError",n.CLIENTSIDEOPERATION_WIT_MOVE_REVERT="WorkItemMove.Revert",n.CLIENTSIDEOPERATION_WIT_MOVE_SUCCESS="WorkItemMove.Success",n.CLIENTSIDEOPERATION_WIT_TYPE_CHANGE_REVERT="WorkItemChangeType.Revert",n.CLIENTSIDEOPERATION_WIT_TYPE_CHANGE_CANCEL_AFTER_FAIL="WorkItemChangeType.CancelAfterFailed",n.CLIENTSIDEOPERATION_WIT_TYPE_CHANGE_CANCEL_AFTER_OPEN="WorkItemChangeType.CancelAfterOpen",n.CLIENTSIDEOPERATION_WIT_TYPE_CHANGE_ERROR="WorkItemChangeType.Error",n.CLIENTSIDEOPERATION_WIT_TYPE_CHANGE_SUCCESS="WorkItemChangeType.Success",n.BULK_EDIT_TAGS="BulkEditTags",n.TELEMETRY_ASSIGNTO_POPULATEMENU="AssignTo.PopulateMenu",n.WORKITEMHISTORY_LOGCONTROL="WorkItemHistoryLog",n.WORKITEM_DISCUSSIONCONTROL="WorkItemDiscussion",n.WORKITEM_VIEWFOLLOWS="ViewWorkItemFollows",n.WORKITEM_BULKUNFOLLOWS="BulkUnfollows",n.CLIENTSIDEOPERATION_DEVELOPMENT_CONTROL_SHOW_MORE="DevelopmentControlShowMoreClicked",n.CLIENTSIDEOPERATION_DEVELOPMENT_CONTROL_DELETE_LINK="DevelopmentControlDeleteLink",n.CLIENTSIDEOPERATION_DEVELOPMENT_CONTROL_ADD_LINK="DevelopmentControlAddLink",n.CLIENTSIDEOPERATION_DEVELOPMENT_CONTROL_ARTIFACT_COUNT="DevelopmentControlArtifactCount",n.CLIENTSIDEOPERATION_DEVELOPMENT_CONTROL_CREATE_BRANCH="DevelopmentControlCreateBranch",n.CLIENTSIDEOPERATION_RELATEDWORKITEMS_CONTROL_OPENWORKITEM="RelatedWorkItemsControlOpenWorkItem",n}();t.WITCustomerIntelligenceFeature=i;r=function(){function n(){}return n.WORKITEM_DISCUSSION_LINKING="WorkItem.Discussion.Linking",n.WORKITEMFORM_FOLLOWS_ACTION_FOLLOW="WorkItemForm.Follows.Action.Follow",n.WORKITEMFORM_FOLLOWS_ACTION_UNFOLLOW="WorkItemForm.Follows.Action.Unfollow",n.WORKITEM_OPENFORM="WorkItem.OpenForm",n.WORKITEM_OPENFORM_NEWLAYOUT="WorkItem.OpenForm.NewLayout",n.WORKITEM_OPENDIALOG="WorkItem.OpenDialog",n.WORKITEM_OPENDIALOG_NEWLAYOUT="WorkItem.OpenDialog.NewLayout",n.WORKITEM_OPENIDE="WorkItem.IDE.OpenForm",n.WORKITEM_OPENIDE_NEWLAYOUT="WorkItem.IDE.OpenForm.NewLayout",n.WORKITEM_SAVE="WorkItem.Save",n.QUERY_OPENRESULTS="Query.OpenResults",n.QUERY_SAVE="Query.Save",n.QUERY_SAVEAS="Query.SaveAs",n.QUERYHIERARCHY_LOAD="QueryHierarchy.Load",n}();t.WITPerformanceScenario=r;u=function(){function n(){}return n.WORKITEMDISCUSSION_LINKING_COMPLETE="WorkItemDiscussion.Linking.Complete",n.WORKITEMDIALOG_LOADWORKITEMFORM_COMPLETE="WorkItemDialog.LoadWorkItemForm.Complete",n.WORKITEMDIALOG_SHOWDIALOG_COMPLETE="WorkItemDialog.ShowDialog.Complete",n.WORKITEM_SAVE_COMPLETE="WorkItem.Save.Complete",n.WORKITEMFORM_SHOWWORKITEM="WorkItemForm.ShowWorkItem",n.WORKITEMFORM_GETWORKITEM="WorkItemForm.GetWorkItems",n.WORKITEMTRACKING_GETPROJECTS_REQUEST="WorkItemTracking.GetProjects.Request",n.WORKITEMTRACKING_GETTYPES="WorkItemTracking.GetTypes",n.WORKITEMTRACKING_GETTYPES_REQUEST="WorkItemTracking.GetTypes.Request",n.WORKITEMTRACKING_GETTYPEEXTENSIONS_REQUEST="WorkItemTracking.GetTypeExtensions.Request",n.WORKITEMTRACKING_GETCONSTANTSETS_REQUEST="WorkItemTracking.GetConstantSets.Request",n.WORKITEMTRACKING_GETLINKTYPES_REQUEST="WorkItemTracking.GetLinkTypes.Request",n.WORKITEMTRACKING_GETNODES_REQUEST="WorkItemTracking.GetNodes.Request",n.WORKITEMTRACKING_GETFIELDS_REQUEST="WorkItemTracking.GetFields.Request",n.WORKITEMTRACKING_GETFIELDS_PROCESS="WorkItemTracking.GetFields.Process",n.WORKITEMTRACKING_GETLAYOUTUSERSETTINGS_REQUEST="WorkItemTracking.GetLayoutUserSettings.Request",n.WORKITEMTRACKING_UPDATE_AJAX="WorkItemTracking.Update.Ajax",n.WORKITEMTRACKING_TAKEUPDATERESULT="WorkItemTracking.TakeUpdateResult",n.WORKITEMTRACKING_EVALUATELINKUPDATES="WorkItemTracking.EvaluateLinkUpdates",n.WORKITEMTRACKING_RESETAFTERSAVE="WorkItemTracking.ResetAfterSave",n.WORKITEMSVIEW_INITIALIZE="WorkItemsView.Initialize",n.WORKITEMSVIEW_NAVIGATE="WorkItemsView.Navigate",n.WORKITEMSVIEW_GETQUERY="WorkItemsView.GetQuery",n.WORKITEMSVIEW_SETUPTRIAGEVIEWMODE="WorkItemsView.SetupTriageViewMode",n.WORKITEMSVIEW_GETQUERYPROVIDER="WorkItemsView.GetQueryProvider",n.WORKITEMSVIEW_APPENDELEMENT="WorkItem.WorkItemView.AppendElement",n.WORKITEMSVIEW_BIND="WorkItem.WorkItemView.Bind",n.WORKITEMSVIEW_ONRENDER="WorkItem.WorkItemView.OnRender",n.TRIAGEVIEW_QUERYRESULT="TriageView.QueryResult",n.QUERYHIERARCHY_POPULATE="QueryHierarchy.Populate",n.QUERYHIERARCHY_GETQUERYFAVORITES_REQUEST="QueryHierarchy.GetQueryFavorites.Request",n.QUERYHIERARCHY_POPULATEFOLDERTREE="QueryHierarchy.PopulateFolderTree",n.QUERYHIERARCHY_GETHIERARCHY_REQUEST="QueryHierarchy.GetHierarchy.Request",n}();t.PerformanceEvents=u;f=function(){function n(){}return n.VIEWTYPE_QUERY="Query",n}();t.CustomerIntelligencePropertyValue=f;t.SHORTCUT_KEYDOWN="keydown";t.BUTTON_CLICKED="buttonClick"});
define("WorkItemTracking/Scripts/Utils/NodeHelpers",["require","exports"],function(n,t){var i;(function(n){function t(t){var i,u,r;if(t.children)for(i=0,u=t.children.length;i<u;i++)r=t.children[i],r.parent=t,n.link(r);return t}function i(n,t){var r=n.children,i,u;if(r)for(i=0,u=r.length;i<u;i++)if(r[i].structure===t)return r[i];return null}function r(t,i){var r,f,u;if(t){if(t.id===i)return t;if(t.children)for(r=0,f=t.children.length;r<f;r++)if(u=n.findById(t.children[r],i),u)return u}return null}function u(n,t,i,r){var o=0,f,s,l=0,u,e,h,c;for(t=t.replace(/^(\s|\u00A0|\\)+|(\s|\u00A0|\\)+$/g,""),c=t.toUpperCase().split("\\"),u=[n];u&&u.length>0&&o<c.length;){if(h=null,l++===i){for(e=[],f=0,s=u.length;f<s;f++)if(u[f].structure===r){e=u[f].children||[];break}u=e;continue}for(e=null,f=0,s=u.length;f<s;f++)if(u[f].name.toUpperCase()===c[o]){h=u[f];e=h.children;o++;break}u=e}return o===c.length?h:null}function f(n,t){for(var i=[];n;)i.unshift(n.name),n=n.parent;return typeof t=="number"&&i.splice(t,1),i}function e(t,i){var r=n.getNodeSegments(t,i);return r.join("\\")}n.link=t;n.findChildByStructure=i;n.findById=r;n.findByPath=u;n.getNodeSegments=f;n.getPath=e})(i=t.NodeHelpers||(t.NodeHelpers={}))});
define("WorkItemTracking/Scripts/Utils/PerfScenarioManager",["require","exports","VSS/Diag","WorkItemTracking/Scripts/CustomerIntelligence","VSS/Performance"],function(n,t,i,r,u){var f=function(){function n(){}return n.startScenario=function(t,i){if(n.abortScenario(t),i===!0){var r=n._getScenarioNameForPageNavigation(t);return u.getScenarioManager().startScenarioFromNavigation(n._featureArea,r,!0)}return u.getScenarioManager().startScenario(n._featureArea,t)},n.addSplitTiming=function(t,r,f,e){var o,s,h;f===void 0&&(f=!0);e===void 0&&(e=!0);o=r===!0?t+".Start":t+".Complete";e?(s=n._getWitScenarios(),$.each(s,function(n,t){t.isActive()===!0&&t.addSplitTiming(o)})):u.getScenarioManager().split(o);f&&(h=r===!0?i.StampEvent.Enter:i.StampEvent.Leave,i.timeStamp(t,h))},n.abortScenario=function(t){var i=n._getScenarios(t);$.each(i,function(n,t){t.isActive()===!0&&t.abort()})},n.endScenario=function(t){var i=n._getScenarios(t);$.each(i,function(n,t){t.isActive()===!0&&t.end()})},n._getScenarios=function(t){var i=u.getScenarioManager().getScenarios(n._featureArea,t),r=n._getScenarioNameForPageNavigation(t);return i.concat(u.getScenarioManager().getScenarios(n._featureArea,r))},n._getWitScenarios=function(){var t=[],i,f,e;for(i in r.WITPerformanceScenario)r.WITPerformanceScenario.hasOwnProperty(i)&&(f=r.WITPerformanceScenario[i],t=t.concat(u.getScenarioManager().getScenarios(n._featureArea,f)),e=n._getScenarioNameForPageNavigation(f),t=t.concat(u.getScenarioManager().getScenarios(n._featureArea,e)));return t},n._getScenarioNameForPageNavigation=function(t){return""+t+n._onPageNavigationScenarioSuffix},n._featureArea=r.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,n._onPageNavigationScenarioSuffix=".OnPageNavigation",n}();t.PerfScenarioManager=f});
define("WorkItemTracking/Scripts/TFS.WorkItemTracking",["require","exports","VSS/VSS","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","Presentation/Scripts/TFS/TFS.Core.Utils","Presentation/Scripts/TFS/TFS.Legacy.Ajax","VSS/Utils/Core","VSS/Utils/String","VSS/Utils/Date","VSS/Utils/Array","VSS/Utils/Number","VSS/Utils/File","VSS/Diag","WorkItemTracking/Scripts/Resources/TFS.Resources.WorkItemTracking","VSS/Events/Action","VSS/Events/Handlers","VSS/Events/Services","Presentation/Scripts/TFS/TFS.Service","Presentation/Scripts/TFS/TFS.OM.Identities","WorkItemTracking/Scripts/TFS.WorkItemTracking.WebApi","TFS/WorkItemTracking/BatchRestClient","VSS/Utils/Html","VSS/Telemetry/Services","q","VSS/Contributions/Services","VSS/Service","WorkItemTracking/Scripts/CustomerIntelligence","WorkItemTracking/Scripts/Utils/NodeHelpers","WorkItemTracking/Scripts/Utils/PerfScenarioManager","WorkItemTracking/Scripts/Utils/WitControlMode","WorkItemTracking/Scripts/OM/WorkItemConstants"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht){function hi(n){return n&&n.isIdentity&&!n.store.useTextControlForIdentityFields()}function kt(n,t){var i=new Error(n);return $.each(t,function(n,t){i[n]=t}),i}function ci(n){return kt(v.WorkItemBulkSaveFailed,{name:ht.Exceptions.WorkItemBulkSaveException,results:n})}function bi(n){return kt(o.format(v.ProjectDoesNotExist,n),{name:ht.Exceptions.ProjectDoesNotExistException,projectName:n})}function ki(n){return kt(o.format(v.WorkItemLinkTypeEndDoesNotExist,n),{name:ht.Exceptions.LinkTypeEndDoesNotExistException,linkTypeEnd:n})}function di(n){return kt(o.format(v.WorkItemLinkTypeDoesNotExists,n),{name:ht.Exceptions.LinkTypeDoesNotExistException,linkType:n})}function gi(n){var t=n.getInfoText().text;return kt(t,{name:ht.Exceptions.WorkItemSaveFailedDueToInvalidStatusException,detail:t,workItem:n})}var si=i.queueCallbacks,bt=i.queueRequest,nr=e.delegate,yt=i.handleError,vi=i.getErrorMessage,yi=/^\{?([\dA-F]{8})-?([\dA-F]{4})-?([\dA-F]{4})-?([\dA-F]{4})-?([\dA-F]{12})\}?$/i,pi=/[\u0000-\u0008\u000B\u000C\u000E-\u001F\u007F-\u009F]/g,wi=/(^[\uD800-\uDFFF]$)|[^\uD800-\uDBFF](?=[\uDC00-\uDFFF])|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/g,ei,ti,ii,li,lt,gt,ni,ri,ct,at,ui,fi,pt,dt,vt,ai,oi,wt;t.SearchStrategySpecialCharacters=["{","(","[","!","@","#","$","%","^","&","*","~","`","'",'"'];t.isIdentityPickerSupportedForField=hi;t.createError=kt,function(n){n[n.WorkItemMissingOrUpdated=600122]="WorkItemMissingOrUpdated";n[n.ResourceLinkNotFoundException=600180]="ResourceLinkNotFoundException"}(ti||(ti={}));ii=function(){function n(n,t){this.store=n;this.id=t.id;this.name=t.name;this.guid=t.guid;this.workItemTypeNames=t.workItemTypes;this.fieldIds=t.fieldIds;this.extras=t.extras||{};this.process=t.process;this.useTextControlForIdentityFields=t.useTextControlForIdentityFields;this.relatedData={};$.isArray(this.workItemTypeNames)&&this.workItemTypeNames.sort(o.localeIgnoreCaseComparer);this.workItemTypes={}}return n.prototype.getApiLocation=function(n,t){return this._getApiLocation(!1,n,t)},n.prototype.getApiLocationIncludingTeam=function(n,t){return this._getApiLocation(!0,n,t)},n.prototype.path=function(){return this.store.path()+"/"+this.name},n.prototype.beginGetWorkItemType=function(n,t,i){var r=this,u=function(n){t.apply(r,[n[0]])};this.beginGetWorkItemTypes([n],u,i)},n.prototype.beginGetWorkItemTypes=function(n,t,i){var u=this,e,p,c,w,tt;var l=0,b=!1,k=[],o=[],rt=st.isClientCachingEnabled()&&this.store.fields&&this.store.fields.length>0;ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETTYPES,!0);var s=function(){l--;b||l!==0||(k.length>0?u._constructWITsAsync(k).then(function(){it()},h):it())},it=function(){var f,e,i,r;for(ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETTYPES,!1),i=0,r=o.length;i<r;i++)o[i].finish();if(o=[],$.isFunction(t)){for(f=[],i=0,r=n.length;i<r;i++)e=n[i].toUpperCase(),f.push(u.workItemTypes[e]);t(f)}},h=function(n){for(var t=0,r=o.length;t<r;t++)o[t].error();o=[];b||(b=!0,$.isFunction(i)&&i.apply(u,[n]))},ut=function(n){var i=si(u,$.noop,$.noop),t,e,c,l;for(o.push(i),t=0,e=n.length;t<e;t++)c=n[t].toUpperCase(),u.workItemTypes[c]=i.register;l=u.store.addStampToParams(r.WITCommonConstants.WorkItemTypes,{typeNames:n});ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETTYPES_REQUEST,!0);f.getMSJSON(u.getApiLocation("workItemTypes"),l,function(n){ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETTYPES_REQUEST,!1);for(var t=0,i=n.length;t<i;t++)k.push(n[t]);s()},h)},y=[];for(e=0,p=n.length;e<p;e++)c=n[e],w=this.workItemTypes[c.toUpperCase()],w?$.isFunction(w)&&(l++,w(s,h)):y.push(c);y.sort();var c,v,d=[],g=0,nt=0;for(e=0,p=y.length;e<p;e++)c=y[e],g=c.length+11,nt+g>1024&&(nt=0,v=null),v?v.push(c):(v=[c],d.push(v),l++),nt+=g;for(l+=2,tt=this.store.userSettingsLoaded===undefined,tt&&(l+=1),this.beginGetNodes(s,h),rt?(this.store.setUserContext(),s()):this.store.beginGetFields(s,h),tt&&st.WitFormModeUtility.ensureWitFormModeLoaded(this.store.getTfsContext()).then(function(){st.WitFormModeUtility.useNewForm()?u.store.beginGetLayoutUserSettings(s,h):(u.store.userSettingsLoaded=!0,s())},h);d.length>0;)ut(d.pop())},n.prototype.getWorkItemTypes=function(n){var t=it.defer();return this.beginGetWorkItemTypes(n,function(n){t.resolve(n)},function(n){t.reject(n)}),t.promise},n.prototype._constructWITsAsync=function(n){for(var r,o,u,l,s,h,t=this,i=it.defer(),f={},c=[],a=function(){for(var r,e,o,u,h,c,s=!1,f=0,l=n.length;f<l;f++){for(r=n[f],e=r.fields,u=0;u<e.length;u++)if(o=e[u],!t.store.fieldMap[o]&&!t.store.fieldMapById[o]){s=!0;break}h=new gt(t,r);c=r.name.toUpperCase();t.workItemTypes[c]=h}s?t.store.refreshFields().then(function(){i.resolve(null)},function(n){i.reject(n)}):i.resolve(null)},v=function(r){for(var e,u=0,f=n.length;u<f;u++)e=n[u].name.toUpperCase(),delete t.workItemTypes[e];i.reject(r)},e=0,y=n.length;e<y;e++)if(r=n[e],r.rules&&r.rules.globals&&r.rules.globals.length>0)for(o=r.rules.globals,u=0,l=o.length;u<l;u++)s=o[u],f[s]=s;for(h in f)f.hasOwnProperty(h)&&c.push(h);return this.store.beginEnsureConstantSets(c,a,v),i.promise},n.prototype.getWorkItemType=function(n){var i=n.toUpperCase(),t;return t=this.workItemTypes[i],t&&!$.isFunction(t)?t:void 0},n.prototype.beginGetNodes=function(n,t){var i=this,u=this.store.addStampToParams(r.WITCommonConstants.Nodes,null);bt(this,this,"nodes",n,t,function(n,t){ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETNODES_REQUEST,!0);f.getMSJSON(i.getApiLocation("nodes"),u,function(t){ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETNODES_REQUEST,!1);n(et.NodeHelpers.link(t))},t)})},n.prototype.getNodes=function(){if(this.nodes&&!$.isFunction(this.nodes))return this.nodes},n.prototype.findAreaNodeByPath=function(n){return et.NodeHelpers.findByPath(this.getNodes(),n,1,1)},n.prototype.findIterationNodeByPath=function(n){return et.NodeHelpers.findByPath(this.getNodes(),n,1,2)},n.prototype.findNodeById=function(n){return et.NodeHelpers.findById(this.getNodes(),n)},n.prototype.getAreaNode=function(n){return this.areaNode||(this.areaNode=et.NodeHelpers.findChildByStructure(this.getNodes(),1)),n?{id:this.id,name:this.name,guid:this.guid,structure:0,type:-42,children:this.areaNode.children}:this.areaNode},n.prototype.getIterationNode=function(n){return this.iterationNode||(this.iterationNode=et.NodeHelpers.findChildByStructure(this.getNodes(),2)),n?{id:this.id,name:this.name,guid:this.guid,structure:0,type:-42,children:this.iterationNode.children}:this.iterationNode},n.prototype.beginQuery=function(n,t,i,r){this.store.beginQuery(this,n,t,i,r)},n.prototype.beginSearch=function(n,t,i,r){this.store.beginSearch(this,n,t,i,r)},n.prototype.beginUpdateColumnOptions=function(n,t,i,r){f.postMSJSON(this.getApiLocation("updateColumnOptions"),{persistenceId:n,fields:t},i,r)},n.prototype.beginGetGroups=function(n,t,i){this.store.beginGetGroups(this,n,t,i)},n.prototype.beginGetWorkItemCategories=function(n,t){this.store.beginGetWorkItemCategories(this,n,t)},n.prototype.beginGetVisibleWorkItemTypeNames=function(n,t){var i=[ht.WorkItemCategoryConstants.HIDDEN];this._beginGetWorkItemTypeNames(n,i,t)},n.prototype.beginGetValidWorkItemTypeNames=function(n,t){var i=[ht.WorkItemCategoryConstants.HIDDEN,ht.WorkItemCategoryConstants.TEST_CASE,ht.WorkItemCategoryConstants.TEST_PLAN,ht.WorkItemCategoryConstants.TEST_SUITE];this._beginGetWorkItemTypeNames(n,i,t)},n.prototype._beginGetWorkItemTypeNames=function(n,t,i){var r=this;this.beginGetWorkItemCategories(function(i){var f=[],u={},e;t&&$.each(t,function(n,t){if(i&&i[t]){var r=i[t];$.each(r.workItemTypeNames,function(n,t){u[t]=!0})}});$.each(r.workItemTypeNames,function(n,t){u.hasOwnProperty(t)||f.push(t)});e=Object.keys(u);$.isFunction(n)&&n.call(r,f,e)},i)},n.prototype._getApiLocation=function(n,t,i){var r={};return n||(r.team=""),this.store.getTfsContext().getActionUrl(t||"","wit",$.extend({project:this.guid,area:"api"},r,i))},n}();t.Project=ii;li=/^-(1|2|10|30)(\|.*)?$/;lt=function(n){function t(){n.call(this);this._ongoingDeleteOrRestoreOperationCt=0;this.constantSets={};this.allowedValues={};this.groups={};this.witCategories={};this.workItemTypeExtensions={};var i=this._getPageData(t.MetadataStampsKey);this._workItemMetaDataCacheStamps=i?i.workItemMetadataCacheStamp:null;this.relatedData={};this._allProjectsLoaded=!1;this._projectLoadingPromisesMap={}}return __extends(t,n),t.prototype.initializeConnection=function(t){n.prototype.initializeConnection.call(this,t)},t.prototype.isDeletingOrRestoring=function(){return this._ongoingDeleteOrRestoreOperationCt>0},t.prototype.path=function(){return l.combinePaths(this.getConnection().getHostUrl(),"WorkItemStore")},t.prototype.getApiLocation=function(n,t){return this.getTfsContext().getActionUrl(n||"","wit",$.extend({project:"",team:"",area:"api"},t))},t.prototype._getMetadataCacheStamp=function(n){return this._workItemMetaDataCacheStamps?this._workItemMetaDataCacheStamps[n]:null},t.prototype.addStampToParams=function(n,t){var i=this._getMetadataCacheStamp(n);return i?t?(t.stamp=i,t):{stamp:i}:t},t.prototype.getCurrentUser=function(){return this.currentUserContext&&!$.isFunction(this.currentUserContext)?this.currentUserContext.displayName:this.getTfsContext().currentUser},t.prototype.useTextControlForIdentityFields=function(){return this.projects?this.projects[0].useTextControlForIdentityFields:!1},t.prototype.setUserContext=function(){var n=this.getTfsContext().currentIdentity,t=n.displayName,i=n.uniqueName;this.currentUserContext={displayName:k.IdentityHelper.getDistinctDisplayName(t,i)}},t.prototype.beginGetFields=function(n,t){var i=this,u=!1,o=function(){u&&n(i.fields)},s=function(){u=!0;o()},e;this.setUserContext();e=this.addStampToParams(r.WITCommonConstants.Fields,null);bt(this,this,"fields",s,t,function(n,t){ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETFIELDS_REQUEST,!0);f.getMSJSON(i.getApiLocation("fields"),e,function(t){ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETFIELDS_REQUEST,!1);i._prepareFields(t);n(i.fields)},t)})},t.prototype.refreshFields=function(){var t=this,n=it.defer(),i=this.addStampToParams(r.WITCommonConstants.Fields,null);return f.getMSJSON(this.getApiLocation("fields"),i,function(i){t.fields=t._prepareFields(i);n.resolve(null)},function(t){n.reject(t)}),n.promise},t.prototype.getFieldDefinition=function(n){var t=(""+n).toUpperCase();return this.fieldMap[t]||this.fieldMapById[t]},t.prototype.beginGetProjects=function(n,t){var i=this;this._allProjectsLoaded?n(this.projects):this._allProjectsLoadingPromise=this._allProjectsLoadingPromise&&this._allProjectsLoadingPromise.isPending()?this._allProjectsLoadingPromise.then(function(t){return n(i.projects),t},function(n){return $.isFunction(t)&&t(n),n}):this._loadProjects().then(function(t){return i.projects=t.projects.map(function(n){return new ii(i,n)}),i._allProjectsLoaded=!0,n(i.projects),t},function(n){return $.isFunction(t)&&t(n),n})},t.prototype._loadProjects=function(n){var i=this,t=it.defer(),u=st.isClientCachingEnabled(),e=this.addStampToParams(r.WITCommonConstants.TeamProjects,{includeFieldDefinitions:u});return ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETPROJECTS_REQUEST,!0),n&&(e.namesOrIds=[n]),f.getMSJSON(this.getApiLocation("teamProjects"),e,function(n){ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETPROJECTS_REQUEST,!1);w.getService().fire(ht.Actions.NEW_PROJECT_DATA,i,n.projects);u&&i._prepareFields(n.fields,!0);t.resolve(n)},function(n){t.reject(n)}),t.promise},t.prototype.beginGetLayoutUserSettings=function(n,i){var u=this,e,r,o;this._layoutUserSettings||(e=this._getPageData(ht.ExtensionConstants.LayoutUserSettingsProvider)||{},r=e[t.LayoutUserSettingsKey],r&&(this._layoutUserSettings=r,this.userSettingsLoaded=!0));o="_layoutUserSettings";bt(this,this,o,n,i,function(n,t){ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETLAYOUTUSERSETTINGS_REQUEST,!0);f.getMSJSON(u.getApiLocation("GetLayoutUserSettings"),null,function(t){ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETLAYOUTUSERSETTINGS_REQUEST,!1);var i={processSettings:[],projectSettings:[],isWitDialogFullScreen:!1};t&&(i=JSON.parse(t));u.userSettingsLoaded=!0;n(i)},t,{showGlobalProgressIndicator:!1})})},t.prototype.getLayoutUserSettings=function(){return this._layoutUserSettings?this._layoutUserSettings:{processSettings:[],projectSettings:[],isWitDialogFullScreen:!1}},t.prototype.setGroupExpandState=function(n,t,i,r){var u=this;f.postMSJSON(this.getApiLocation("SetGroupExpandState"),{processId:n,workItemTypeRefName:t,groupId:i,isCollapsed:r},function(n){u._setLayoutUserSettings(n)},function(){},{showGlobalProgressIndicator:!1})},t.prototype.setGroupExpandStateForProject=function(n,t,i,r){var u=this;f.postMSJSON(this.getApiLocation("SetGroupExpandStateForProject"),{projectId:n,workItemTypeId:t,groupId:i,isCollapsed:r},function(n){u._setLayoutUserSettings(n)},function(){},{showGlobalProgressIndicator:!1})},t.prototype.setWorkItemDialogFullScreenState=function(n){var t=this;f.postMSJSON(this.getApiLocation("SetWorkItemDialogFullScreenState"),{isFullScreen:n},function(n){t._setLayoutUserSettings(n)},function(){},{showGlobalProgressIndicator:!1})},t.prototype._setLayoutUserSettings=function(n){var t={processSettings:[],projectSettings:[],isWitDialogFullScreen:!1};n&&(t=JSON.parse(n));this._layoutUserSettings=t},t.prototype.getProjects=function(){if(this.projects&&!$.isFunction(this.projects))return this.projects},t.prototype.getProject=function(n,t){t===void 0&&(t=!0);var r=t?this.getProjects():this.projects,i=h.first(r||[],function(t){return o.equals(t.name,n,!0)||o.equals(t.guid,n,!0)});if(i)return i;if(t)throw bi(n);else return null},t.prototype.hasProject=function(n){return this.projects&&!$.isFunction(this.projects)?h.arrayContains(n,this.projects,function(n,t){return o.equals(t.name,n,!0)||o.equals(t.guid,n,!0)}):!1},t.prototype.beginGetProject=function(n,t,i){var r=this,u=this.getProject(n,!1),f=function(){try{u=r.getProject(n);t.call(r,u)}catch(f){yt(f,i,r)}};u?t.call(this,u):this._allProjectsLoadingPromise&&this._allProjectsLoadingPromise.isPending()?this._allProjectsLoadingPromise=this._allProjectsLoadingPromise.then(function(n){return f(),n},function(n){return $.isFunction(i)&&i(n),n}):this._projectLoadingPromisesMap[n]=this._projectLoadingPromisesMap[n]&&this._projectLoadingPromisesMap[n].isPending()?this._projectLoadingPromisesMap[n].then(function(n){return f(),n},function(n){return $.isFunction(i)&&i(n),n}):this._loadProjects(n).then(function(n){var t,i;return n.projects&&n.projects.length===1&&(t=new ii(r,n.projects[0]),r.projects?(i=h.findIndex(r.projects,function(n){return o.equals(t.name,n.name,!0)||o.equals(t.guid,n.guid,!0)}),i===-1?r.projects.push(t):r.projects[i]=t):r.projects=[t]),f(),n},function(n){return $.isFunction(i)&&i(n),n})},t.prototype.beginGetWorkItemData=function(n,t,i,u,o){var l=this,a,c,h,s,v,y,p;if(n)$.isArray(n)||(a=+n,n=[a]);else{yt(new Error("Argument null: ids"),i,this);return}if(c=function(n){$.isFunction(t)&&(n&&n.length===1?t.call(l,n[0],i):t.call(l,n,i))},h=e.parseJsonIsland($(document),".work-item-data",!0),n.length===1&&h&&h.fields&&h.fields[r.CoreField.Id]===n[0])c(h);else{for(s=0,v=n.length;s<v;++s)if(n[s]=+n[s],isNaN(n[s])||n[s]<0){yt(new Error("Argument out of range: ids"),i,this);return}y=st.isIncrementalHistoryEnabled()&&!o?"workitemsnohistory":"workitems";p={ids:n,isDeleted:u};f.getMSJSON(this.getApiLocation(y),p,c,i)}},t.prototype.beginGetWorkItem=function(n,t,i,r,u){var f=this;this.beginGetWorkItems([n],function(n){$.isFunction(t)&&t.call(f,n&&n[0])},i,r,u)},t.prototype.beginGetWorkItems=function(n,t,i,u,f){var o=this;f===void 0&&(f=!1);this.beginGetWorkItemData(n,function(n){var s,l=0,h=[];n&&(s=$.isArray(n)?n:[n]);var a=function(){$.isFunction(t)&&t.call(o,h)},u=function(n){yt(n,i,o)},c=function(){var n,y;if(n=s&&s[l++],n){var t=null,i=null,p=!1,v=function(){if(t&&(!f||i)&&p)try{var r=t.create(n,i);r.extensionIds=r.extensionIds.concat(n.currentExtensions);h.push(r);e.delay(o,0,c)}catch(s){u(s)}};o.beginGetLinkTypes(function(){p=!0;v()},u);f&&o.beginGetWorkItemTypeExtensions(n.currentExtensions,function(n){i=n;v()},u);y=n.fields[r.CoreField.TeamProject];o.beginGetProject(y,function(i){var f=n.fields[r.CoreField.WorkItemType];i.beginGetWorkItemType(f,function(n){t=n;v()},u)},u)}else a()};c()},i,u)},t.prototype.beginQuery=function(n,t,i,r,u){var e=this,o=n?n.getApiLocationIncludingTeam("query"):this.getApiLocation("query");f.postMSJSON(o,$.extend({wiql:t},u),function(n){$.isFunction(i)&&i.call(e,n)},r)},t.prototype._getPageData=function(n){return ut.getService(rt.WebPageDataService).getPageData(n)},t.prototype._beginWorkItemsBatchHelper=function(n,t,i,r){var f=this,u=[],o=[];u.push(n);var h=function(n){$.isFunction(i)&&i.call(f,n)},c=function(n){yt(n,r,f)},s=function(){if(u.length>0){var n=u.pop();n.length>ht.PageSizes.SAVE&&u.push(n.splice(ht.PageSizes.SAVE));t(n).then(function(n){n&&n.count>0&&$.each(n.value,function(n,t){o.push(t)});e.delay(f,0,s)},function(n){c(n)})}else h(o)};s()},t.prototype._beginDeleteWorkItems=function(n){var t=this,i=this.tfsConnection.getHttpClient(g.WorkItemTrackingHttpBatchClient);return this._ongoingDeleteOrRestoreOperationCt++,i.deleteWorkItemsBatch(n).then(function(i){var u,r,f,e;if(t._ongoingDeleteOrRestoreOperationCt--,i.count>0)for(u=i.value,r=0,f=u.length;r<f;r++)e=u[r],e.code===204&&w.getService().fire(ht.Actions.WORKITEM_DELETED,t,{workItemId:n[r]});return i},function(n){t._ongoingDeleteOrRestoreOperationCt--;throw n;})},t.prototype.beginDeleteWorkItemsBatch=function(n,t,i){var r=this;this._beginWorkItemsBatchHelper(n,function(n){return r._beginDeleteWorkItems(n)},t,i)},t.prototype._beginRestoreWorkItems=function(n){var t=this,i=this.tfsConnection.getHttpClient(g.WorkItemTrackingHttpBatchClient);return this._ongoingDeleteOrRestoreOperationCt++,i.restoreWorkItemsBatch(n).then(function(n){if(t._ongoingDeleteOrRestoreOperationCt--,n.count>0){var i=n.value;i.forEach(function(n){if(n.code===200){var i=$.parseJSON(n.body);w.getService().fire(ht.Actions.WORKITEM_RESTORED,t,{workItemId:i.id})}})}return n},function(n){t._ongoingDeleteOrRestoreOperationCt--;throw n;})},t.prototype.beginRestoreWorkItemsBatch=function(n,t,i){var r=this;this._beginWorkItemsBatchHelper(n,function(n){return r._beginRestoreWorkItems(n)},t,i)},t.prototype._beginDestroyWorkItems=function(n){var t=this,i=this.tfsConnection.getHttpClient(g.WorkItemTrackingHttpBatchClient);return this._ongoingDeleteOrRestoreOperationCt++,i.destroyWorkItemsBatch(n).then(function(i){var u,r,f,e;if(t._ongoingDeleteOrRestoreOperationCt--,i.count>0)for(u=i.value,r=0,f=u.length;r<f;r++)e=u[r],e.code===204&&w.getService().fire(ht.Actions.WORKITEM_DESTROYED,t,{workItemId:n[r]});return i},function(n){t._ongoingDeleteOrRestoreOperationCt--;throw n;})},t.prototype.beginDestroyWorkItemsBatch=function(n,t,i){var r=this;this._beginWorkItemsBatchHelper(n,function(n){return r._beginDestroyWorkItems(n)},t,i)},t.prototype.beginSearch=function(n,t,i,r,u){var e=this;f.getMSJSON((n||this).getApiLocation("search"),$.extend({searchText:t},u),function(n){$.isFunction(i)&&i.call(e,n)},r)},t.prototype.beginGetLinkTypes=function(n,t){var i=this,u=function(){n&&n.call(i,i.linkTypes,i.registeredLinkTypes)},e=this.addStampToParams(r.WITCommonConstants.LinkTypes,null);bt(this,this,"linkTypes",u,t,function(n,t){ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETLINKTYPES_REQUEST,!0);f.getMSJSON(i.getApiLocation("linkTypes"),e,function(t){ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETLINKTYPES_REQUEST,!1);i._bindLinkTypeEnds(t.witLinkTypes);i.registeredLinkTypes=t.registeredLinkTypes;n(t.witLinkTypes)},t)})},t.prototype.getRegisteredLinkTypes=function(){if(this.registeredLinkTypes&&!$.isFunction(this.registeredLinkTypes))return this.registeredLinkTypes},t.prototype.getLinkTypes=function(){if(this.linkTypes&&!$.isFunction(this.linkTypes))return this.linkTypes},t.prototype.getLinkTypeEnds=function(){var r,t,n,i,u;if(n=this.linkTypeEnds,n)return n;for(r=this.getLinkTypes(),n=[],i=0,u=r.length;i<u;i++)t=r[i],n.push(t.forwardEnd),t.isDirectional&&n.push(t.reverseEnd);return this.linkTypeEnds=n,n},t.prototype.findLinkType=function(n){for(var i,u=(""+n).toUpperCase(),r=this.getLinkTypes(),t=0,f=r.length;t<f;t++)if(i=r[t],i.referenceName.toUpperCase()===u)return i;throw di(n);},t.prototype.findLinkTypeEnd=function(n){for(var t,r=(""+n).toUpperCase(),u=this.getLinkTypeEnds(),i=0,f=u.length;i<f;i++)if((t=u[i],t.id===n)||t.name.toUpperCase()===r||t.immutableName.toUpperCase()===r)return t;throw ki(n);},t.prototype.beginGetAllowedValues=function(n,t,i,u,e){var c=this,l=this.getFieldDefinition(n),s=l.id.toString();s=t?s+"|"+t:s;s=i?s+"|"+i:s;bt(this,this.allowedValues,s,u,e,function(n,u){var e={fieldId:l.id};i&&(e.workItemTypeNames=[i]);e=c.addStampToParams(r.WITCommonConstants.AllowedValues,e);f.getMSJSON(c.getApiLocation("allowedValues",{project:t||""}),e,function(t){h.flagSorted(t,o.localeIgnoreCaseComparer);n(t)},u)})},t.prototype.getAllowedValues=function(n,t,i){var r=it.defer();return this.beginGetAllowedValues(n,t,i,function(n){r.resolve(n)},function(n){r.reject(n)}),r.promise},t.prototype.beginGetGroups=function(n,t,i,r){var u=this,e=""+(n?n.id:0)+(t?"-global":"");bt(this,this.groups,e,i,r,function(i,r){f.getMSJSON((n||u).getApiLocation("groups"),{includeGlobal:t},function(n){i(n)},r)})},t.prototype.beginGetWorkItemCategories=function(n,t,i){var u=this,e=""+(n?n.id:0),o=this.addStampToParams(r.WITCommonConstants.WorkItemTypeCategories,null);bt(this,this.witCategories,e,t,i,function(t,i){f.getMSJSON((n||u).getApiLocation("workItemTypeCategories"),o,function(n){t(n)},i)})},t.prototype.beginGetWorkItemTypeExtension=function(n,t,i){var r=this.workItemTypeExtensions[n];r?t(r):this.beginGetWorkItemTypeExtensions([n],function(n){t(n[0])},i)},t.prototype.beginGetWorkItemTypeExtensions=function(n,t,i){var r=this,o=[],u,s=0,h=0,e=[],c=function(){h===0&&t.call(r,e)},l=function(n){ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETTYPEEXTENSIONS_REQUEST,!0);f.getMSJSON(r.getApiLocation("workItemTypeExtensions"),{extensionIds:n},function(n){ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETTYPEEXTENSIONS_REQUEST,!1);st.isClientCachingEnabled()&&n.forEach(function(n){var t=n.fields.map(function(n){return n.field});r._prepareFields(t,!0)});var t=[];n.forEach(function(n){r.workItemTypeExtensions[n.id]=n;n.globals&&(t=t.concat(n.globals))});r.beginEnsureConstantSets(t,function(){e=e.concat(n);h--;c()},i)},i)};if(n&&n.length>0)if(n.forEach(function(n){if(r.workItemTypeExtensions[n])e.push(r.workItemTypeExtensions[n]);else{var t=n.length+15;s+t>1024&&(s=0,u=null);u?u.push(n):(u=[n],o.push(u),h++);s+=t}}),o.length===0)c();else while(o.length>0)l(o.pop());else t.call(this,e)},t.prototype.beginGetConstantSet=function(n,t,i){var u=this,e=function(i){t&&t.call(u,n,i)},s=this.addStampToParams(r.WITCommonConstants.ConstantSets,{ids:[n]});bt(this,this.constantSets,n,e,i,function(t,i){f.getMSJSON(u.getApiLocation("constantSets"),s,function(i){var r=i[n];h.flagSorted(r,o.localeIgnoreCaseComparer);t(r)},i)})},t.prototype.beginEnsureConstantSets=function(n,t,i){var e=this,s,v,u,y=[],l,w=0,b=0,c=0,k=!1,g=function(n){k||(k=!0,$.isFunction(i)&&i.apply(e,n))},d=function(){c--;!k&&c<=0&&$.isFunction(t)&&t.apply(e)},nt=function(n){for(var c,s=si(e,d,g),t=0,i=n.length;t<i;t++)u=n[t],e.constantSets[u]=s.register;c=e.addStampToParams(r.WITCommonConstants.ConstantSets,{ids:n});ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETCONSTANTSETS_REQUEST,!0);f.getMSJSON(e.getApiLocation("constantSets"),c,function(r){ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETCONSTANTSETS_REQUEST,!1);var u,f;for(t=0,i=n.length;t<i;t++)f=n[t],u=r[f],h.flagSorted(u,o.localeIgnoreCaseComparer),e.constantSets[f]=u;s.finish()},function(r){var u;for(t=0,i=n.length;t<i;t++)u=n[t],delete e.constantSets[u];s.error(r)})},a,p;if(n){for(a=[],s=0,v=n.length;s<v;s++)u=n[s],p=this.constantSets[u],p?$.isFunction(p)&&(c++,p(d,g)):a.push(u);for(a.sort(),s=0,v=a.length;s<v;s++)u=a[s],li.test(u)?(y.push([u]),c++):(b=(u+"").length+5,w+b>1024&&(w=0,l=null),l?l.push(u):(l=[u],y.push(l),c++),w+=b)}while(y.length>0)nt(y.pop());c===0&&d()},t.prototype.invalidateExtensions=function(n){var t=this;Boolean(n)?$.each(n,function(n,i){delete t.workItemTypeExtensions[i]}):this.workItemTypeExtensions={}},t.prototype.getConstantSet=function(n){return this.constantSets[n]},t.prototype.beginPageWorkItems=function(n,t,i,r,u){var o=this,e;if(!$.isArray(n))throw new Error("Invalid argument type: ids must be an array.");if(!$.isArray(t))throw new Error("Invalid argument type: 'fields' must be an array.");e={workItemIds:n.join(","),fields:t.join(",")};u&&$.extend(e,u);f.postMSJSON(this.getApiLocation("pageWorkItems"),e,function(n){$.isFunction(i)&&i.apply(o,[n])},r)},t.prototype.beginPageWorkItemsByIdRev=function(n,t,i,r,u){var e=this,o={workItemIds:n.join(","),workItemRevisions:t.join(","),fields:i.join(",")};f.postMSJSON(this.getApiLocation("pageWorkItemsByIdRev"),o,function(n){$.isFunction(r)&&r.apply(e,[n])},u)},t.prototype.beginGetWorkItemResources=function(n,t,i){var r={ids:n};f.getMSJSON(this.getApiLocation("ResourceLinks"),r,function(n){t(n)},i)},t.prototype.beginSaveWorkItems=function(n,t,i,r){this._beginSaveWorkItemsInternal(n,{},t,i,r)},t.prototype._beginSaveWorkItemsInternal=function(n,t,i,u,o){var d=this,h,s,v,c,y,nt,tt,k,it,l,rt;c=[];y={};a.logTracePoint("TFS.WorkItemTracking.WorkItemStore.beginSaveWorkItems.start");o===undefined&&(o=!0);var g=function(n,i){for(var r,f,u=0,e=n.length;u<e;u++)r=n[u],f=y[r.id]?y[r.id]:y[r.tempId],f&&t[r.id]&&$.extend(f.changedFields,t[r.id]),r._setSavingStatus(i,f),r._setValidatingStatus(!1)},p=function(){try{if(v)v=ci(c),yt(v,u,d);else if($.isFunction(i)){a.logTracePoint("TFS.WorkItemTracking.WorkItemStore.beginSaveWorkItems.complete");a.logTracePoint("TFS.WorkItemTracking.WorkItemStore.beginSaveWorkItems.completedCallback.start");var t={workItems:n};i.call(d,t);a.logTracePoint("TFS.WorkItemTracking.WorkItemStore.beginSaveWorkItems.completedCallback.complete")}}finally{g(s,!1)}},w=function(n,t){v=new Error(t.message);o&&n.setError(v);c.push({workItem:n,error:t})},b=function(){var n,i,u,t,r,f;if(s&&s.length===c.length){for(n=0,i=s;n<i.length;n++)for(u=i[n],t=0,r=u.allLinks;t<r.length;t++)f=r[t],f.setState(!0);p()}},ut=function(n,t){var i={},e,u,f;for(e in t)t.hasOwnProperty(e)&&(u=Number(e),f=n.fieldMapById[u],f&&(i[f.fieldDefinition.referenceName]=f,u===r.CoreField.IterationId?i[r.CoreFieldRefNames.IterationPath]=n.fieldMapById[r.CoreField.IterationPath]:u===r.CoreField.AreaId&&(i[r.CoreFieldRefNames.AreaPath]=n.fieldMapById[r.CoreField.AreaPath])));return i},et=function(n,t){return{typeChanged:n.hasWorkItemTypeChanged(),projectChanged:n.hasTeamProjectChanged(),changedFields:ut(n,t.payload.fields),firstSave:n.id==0}};if(n&&n.length>0){for(nt=[],tt=[],s=[],k=0,it=n.length;k<it;k++)h=n[k],h.fireWorkItemPreSave(),h.isDirty()&&(l=h.getUpdateData(),l&&l.payload&&(tt.push(l),nt.push(l.payload),rt=h.id>0?h.id:h.tempId,y[rt]=et(h,l),s.push(h)));if(s.length>0){g(s,!0);try{ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_UPDATE_AJAX,!0);f.postMSJSON(this.getApiLocation("updateWorkItems"),{updatePackage:e.stringifyMSJSON(nt)},function(n){if(ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_UPDATE_AJAX,!1),n.length===s.length){var t=!1;$.each(n,function(n,i){if(i.state!==ht.WorkItemUpdateResultState.Success)return t=!0,!1});$.each(s,function(i,r){var u=n[i];u.state!==ht.WorkItemUpdateResultState.Success||t?u.state!==ht.WorkItemUpdateResultState.Success?(w(r,u.error),b()):(c.push({workItem:r}),b()):d.beginGetWorkItemTypeExtensions(u.currentExtensions,function(n){r._takeUpdateResult(u,tt[i],n);c.push({workItem:r});b()},function(n){w(r,n);b()})})}else $.each(s,function(n,t){w(t,{message:"Server data does not match with what client sent."})}),p()},function(n){ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_UPDATE_AJAX,!1);$.each(s,function(t,i){w(i,n)});p()})}catch(st){g(s,!1);throw st;}}else p()}else p()},t.prototype.beginSaveWorkItemsBatch=function(n,t,i){function c(){var s,v;u.length>0?(s=u.pop(),s.length>ht.PageSizes.SAVE&&(u.push(s.slice(ht.PageSizes.SAVE)),s=s.slice(0,ht.PageSizes.SAVE)),r._beginSaveWorkItemsInternal(s,h,function(){$.each(s,function(n,t){f.push({workItem:t})});e.delay(r,0,c)},function(t){function w(n){if(v===0){if(s.length===1&&n)u.push(s);else if(s.length>1){var i=s.length/2;u.push(s.slice(i));u.push(s.slice(0,i))}else f.push(t.results[0]);e.delay(r,0,c)}}function nt(n,t){v-=1;h[n.id]=$.extend(t,h[n.id]);w(!0)}function tt(){v-=1;o=!0;w(!1)}var v=0,k=!1,d=!1,a,b,y,p,g;if(t&&t.name===ht.Exceptions.WorkItemBulkSaveException){for(b=t.results,p=0,g=b.length;p<g;p++)a=b[p],y=a.workItem,a.error&&(a.error.errorCode===ti.WorkItemMissingOrUpdated||a.error.errorCode===ti.ResourceLinkNotFoundException)&&!l.hasOwnProperty(y.id.toString())?(k=!0,l[y.id]=!0,v+=1,r._beginTryMergeWorkItem(y,nt,tt)):d=!0;!k&&d&&(o=!0);w(!1)}else $.each(n,function(n,i){i.setError(t)}),yt(t,i,r)},!1)):o?($.each(f,function(){this.error&&this.workItem.setError(this.error)}),yt(ci(f),i,r)):(a.logTracePoint("TFS.WorkItemTracking.WorkItemStore.beginSaveWorkItemsBatch.complete"),a.logTracePoint("TFS.WorkItemTracking.WorkItemStore.beginSaveWorkItemsBatch.completedCallback.start"),$.isFunction(t)&&(v={workItems:n},t.call(r,v)),a.logTracePoint("TFS.WorkItemTracking.WorkItemStore.beginSaveWorkItemsBatch.completedCallback.complete"))}var r=this,s=[],u=[],h={},f=[],o=!1,l={};a.logTracePoint("VSS.WorkItemTracking.WorkItemStore.beginSaveWorkItemsBatch.start");$.each(n,function(n,t){t.isValid()?s.push(t):(o=!0,f.push({workItem:t,error:gi(t)}))});s.length>0&&u.push(s);c()},t.prototype.beginGetTagWorkitemIds=function(n,t,i){var r=this;if(!$.isArray(n))throw new Error("Invalid argument type: 'workItemIds' must be an Array.");f.postMSJSON(this.getApiLocation("getTagWorkitemIds"),{workItemIds:n.join(",")},function(n){var i=r._reduceTagWorkitemAssociation(n);$.isFunction(t)&&t(i)},i)},t.prototype._prepareFields=function(n,t){var i,r,e,f,u;if(t&&this.fields||(this.fields=[],this.fieldMap={},this.fieldMapById={}),n){for(ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETFIELDS_PROCESS,!0),r=0,e=n.length;r<e;r++)i=new ni(this,n[r]),f=!0,this.fieldMapById[i.id]||(f=!1),this.fieldMapById[i.id]=i,this.fieldMap[i.name.toUpperCase()]=i,this.fieldMap[i.referenceName.toUpperCase()]=i,f?(u=-1,$.each(this.fields,function(n,t){if(t.id===i.id)return u=n,!1}),u!==-1?this.fields[u]=i:this.fields.push(i)):this.fields.push(i);ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_GETFIELDS_PROCESS,!1)}return this.fields},t.prototype._reduceTagWorkitemAssociation=function(n){var t={},r={},i,u;return $.each(n,function(n,f){i=r[f.tagDefinition.name.toUpperCase()];i==null?(t[f.tagDefinition.name]=f.workitemIds,r[f.tagDefinition.name.toUpperCase()]=f.tagDefinition.name):(u=t[i],t[i]=h.union(u,f.workitemIds))}),t},t.prototype._beginTryMergeWorkItem=function(n,t,i){var u=this,r;r={};a.logTracePoint("TFS.WorkItemTracking.WorkItemStore._beginTryMergeWorkItem.start");this.beginGetWorkItemData([n.id],function(f){var o,e;if(u._hasConflicts(n,f,r)){i(n);return}o=u._getChangedFieldsForMerge(n,f);u._mergeWorkItem(n,f,r);n.evaluate();for(e in r)r.hasOwnProperty(e)&&n.setFieldValue(e,r[e]);n.isValid()?(a.logTracePoint("TFS.WorkItemTracking.WorkItemStore._beginTryMergeWorkItem.complete"),a.logTracePoint("TFS.WorkItemTracking.WorkItemStore._beginTryMergeWorkItem.completedCallback.start"),t(n,o),a.logTracePoint("TFS.WorkItemTracking.WorkItemStore._beginTryMergeWorkItem.completedCallback.complete")):i(n)},function(){i(n)},!1,!0)},t.prototype._getChangedFieldsForMerge=function(n,t){var u,f,r,s,i,e,o;u={};f=t.fields;for(r in f)f.hasOwnProperty(r)&&(s=Number(r),i=n.getField(r),i&&(e=i.getValue(!0),o=ct.convertValueToExternal(n.store,t.fields[r],i.fieldDefinition.type),ct.compareValues(e,o,!1)||(u[i.fieldDefinition.referenceName]=i)));return u},t.prototype._hasConflicts=function(n,t,i){var l,o,f,s,e,h,c,u;h=n.getFieldUpdates();for(c in h)if(h.hasOwnProperty(c)&&(u=Number(c),f=n.getField(u),f&&(l=f.getValue(!0),o=ct.convertValueToExternal(n.store,t.fields[u],f.fieldDefinition.type),f.isUserChange())))if(s=f.getValue(),u==r.CoreField.History||ct.compareValues(l,o,!1))i[u]=s,u===r.CoreField.IterationId?(e=n.getField(r.CoreField.IterationPath),i[r.CoreField.IterationPath]=e.getValue()):u===r.CoreField.AreaId&&(e=n.getField(r.CoreField.AreaPath),i[r.CoreField.AreaPath]=e.getValue());else if(!ct.compareValues(s,o,!1))return!0;return!1},t.prototype._mergeWorkItem=function(n,t,i){var u,r;u=n.getLinkUpdates();n._load(t,!0);for(r in i)i.hasOwnProperty(r)&&n._setFieldValueById(Number(r),i[r],!1);n._restoreLinkUpdates(u)},t.prototype._bindLinkTypeEnds=function(n){for(var i,t,r=0,u=n.length;r<u;r++)i=n[r],t=i.forwardEnd,t&&(t.linkType=i,t.oppositeEnd=i.reverseEnd),t=i.reverseEnd,t&&(t.linkType=i,t.oppositeEnd=i.forwardEnd)},t.FutureDate=new Date(2533707648e5),t.MetadataStampsKey="ms.vss-work-web.work-item-cache-data-provider",t.LayoutUserSettingsKey="WorkItemTracking.LayoutUserSettings",t}(b.TfsService);t.WorkItemStore=lt;gt=function(){function n(n,t){var f,o,s,e,u,l;this.project=n;this.store=n.store;this.id=t.id;this.name=t.name;this.referenceName=t.referenceName;this.dependentFieldsMapByReferenceName={};this._httpClient=this.store.tfsConnection.getHttpClient(d.WorkItemTrackingHttpClient);f=t.fields;this.form=t.rules.form;this.processId=t.rules.processId;this.triggerList=t.rules.triggerList;this.transitions=t.rules.transitions;o=t.rules.fieldRules;s=t.rules.fieldHelpTexts;this._parseStateColors(t.rules.stateColors);this.fieldMap={};e=this.fieldMap;this.fieldMapById={};var a=this.fieldMapById,h=this.fields=[],v=this.store.fieldMap,y=this.store.fieldMapById,i,r,c;for(u=0,l=f.length;u<l;u++)r=f[u],c=y[r]||v[r],i=new ni(this,c,o[r],s[r]||""),a[i.id]=i,e[i.name.toUpperCase()]=i,e[i.referenceName.toUpperCase()]=i,h[h.length]=i}return n.prototype.path=function(){return this.project.path()+"/wit/"+this.name},n.prototype.create=function(n,t){return new ri(this,n,t)},n.prototype.getFieldDefinition=function(n){var t=(""+n).toUpperCase();return this.fieldMapById[t]||this.fieldMap[t]},n.prototype.getTriggerList=function(){var t=this,n=[];return this.triggerList&&$.each(this.triggerList,function(i,r){t.getFieldDefinition(r)&&n.push(r)}),n},n.prototype.getInitialState=function(){var n;return this.transitions&&this.transitions[""]&&(n=this.transitions[""][0]),n||""},n.prototype.getRestUrl=function(){if(!this.restUrl){var n=this.store.getTfsContext(),t=n.navigation.publicAccessPoint.scheme+"://"+n.navigation.publicAccessPoint.authority+n.getServiceHostUrl();return o.format("{0}{1}/_apis/wit/workItemTypes/{2}",t,this.project.guid,this.name)}return this.restUrl},n.prototype.beginGetDependentFields=function(n,t,i){var r=this,u=this.getFieldDefinition(n);if(!u){$.isFunction(i)&&i.apply(this,{message:o.format("Field {0} doesn't exist in work item type {1}",n,this.name)});return}bt(this,this.dependentFieldsMapByReferenceName,u.referenceName,t,i,function(n,t){r._httpClient.beginGetWorkItemTypeFields(r.project.guid,r.name,u.referenceName).then(function(t){var i=$.map(t.dependentFields||[],function(n){return r.getFieldDefinition(n.referenceName)});r.restUrl=t._links.parent.href;n(i)},t)})},n.prototype._parseStateColors=function(n){var t=this;n&&(this.stateColors={},$.each(n,function(n,i){t.stateColors[i.name]="#"+i.color}))},n}();t.WorkItemType=gt;i.initClassPrototype(gt,{project:null,store:null,id:null,name:null,fields:null,fieldMap:null,fieldMapById:null,form:null,triggerList:null});ni=function(){function n(n,t,i,r){n instanceof lt?this.store=n:(this.workItemType=n,this.store=n.store);this.id=t.id;this.name=t.name;this.referenceName=t.referenceName;this.flags=t.flags;this.type=t.type;this.usages=t.usages;this.rules=i;this.helpText=r||"";this.isIdentity=t.isIdentity}return n.prototype.checkFlag=function(n){return(this.flags&+n)!==ht.FieldFlags.None},n.prototype.canSortBy=function(){return this.checkFlag(ht.FieldFlags.Sortable)},n.prototype.isQueryable=function(){return this.checkFlag(ht.FieldFlags.Queryable)},n.prototype.isCloneable=function(){return this.checkFlag(ht.FieldFlags.Cloneable)},n.prototype.isComputed=function(){return this.checkFlag(ht.FieldFlags.Computed)},n.prototype.supportsTextQuery=function(){return this.checkFlag(ht.FieldFlags.SupportsTextQuery)},n.prototype.isEditable=function(){switch(this.id){case r.CoreField.AreaPath:case r.CoreField.IterationPath:return!0;case r.CoreField.Id:case r.CoreField.Rev:case r.CoreField.WorkItemType:case r.CoreField.CreatedBy:return!1}return!this.isComputed()},n.prototype.isCoreField=function(){return this.referenceName.toLowerCase().indexOf("system.")===0},n.prototype.isoobfield=function(){return this.referenceName.toLowerCase().indexOf("microsoft.vsts.")===0},n.prototype.isCustomField=function(){return!this.isCoreField()&&!this.isoobfield()},n}();t.FieldDefinition=ni;i.initClassPrototype(ni,{store:null,workItemType:null,id:null,name:null,referenceName:null,type:null,usages:ht.FieldUsages.None,flags:ht.FieldFlags.None,rules:null,helpText:""});ri=function(){function n(n,t,i){this._saving=!1;this._validating=!1;this.id=0;this.tempId=0;this.revision=0;this.workItemType=n;this._originalWorkItemType=this.workItemType;this.store=n.store;this.project=n.project;this.extensions=i||[];this._originalExtensions=this.extensions;this._httpClient=this.store.tfsConnection.getHttpClient(d.WorkItemTrackingHttpClient);this.events=new p.NamedEventCollection;this._eventsEnabled=!1;this._initializeFields();this._defineExtensionFields();this._load(t,!1);this._eventsEnabled=!0;this.relatedData={};this.extensionIds=[]}return n.getTempId=function(){return--n.tempIdSeed},n.getTempIdSeed=function(){return n.tempIdSeed},n.reserveTempId=function(t){n.tempIdSeed>t&&(n.tempIdSeed=t)},n.prototype._initializeFields=function(){this.fields=[];this.fieldMap={};this.fieldMapById={};this._defineWorkItemTypeFields()},n.prototype.hasAttachmentsPendingUpload=function(){var n=!1;return this.allLinks.some(function(t){return t instanceof dt&&t.getPlaceholderStatus()&&(n=!0),n})},n.prototype.isReset=function(){return this._isReset},n.prototype.changeWorkItemType=function(n,t,i){var u,f,e,s;if(this.workItemType!==n){if(u=n.project!==this.project,i||(u?this.fireWorkItemProjectChanging():this.fireWorkItemTypeChanging()),f=this.workItemType,e=this._getFieldChangeOnBugTypeChanged(f,n),this.workItemType=n,this.ruleEngine=null,this._initializeFields(),this.extensions=t||[],this._defineExtensionFields(),this._setProject(n.project),!o.equals(n.name,f.name)){this.setFieldValue(r.CoreField.WorkItemType,n.name);for(s in e)this.setFieldValue(s,e[s])}this.evaluate();i||(u?this.fireWorkItemProjectChanged():this.fireWorkItemTypeChanged())}},n.prototype._getFieldChangeOnBugTypeChanged=function(n,t){var u={},i;return this._isBugTypeChange(n)?(i=this.getFieldValue(ht.BugWITFieldReferenceNames.ReproSteps),i&&(u[r.CoreFieldRefNames.Description]=i)):this._isBugTypeChange(t)&&(i=this.getFieldValue(r.CoreFieldRefNames.Description),i&&(u[ht.BugWITFieldReferenceNames.ReproSteps]=i)),u},n.prototype._isBugTypeChange=function(n){return n.fields?n.fields.some(function(n){return o.equals(n.referenceName,ht.BugWITFieldReferenceNames.ReproSteps,!0)}):!1},n.prototype.getOriginalWorkItemType=function(){return this._originalWorkItemType},n.prototype._setProject=function(n){this.project!==n&&(this.project=n,this._setFieldValueById(r.CoreField.TeamProject,n.name))},n.prototype._defineField=function(n){var t,i;this.fieldMap.hasOwnProperty(n.toUpperCase())||(t=this.workItemType.getFieldDefinition(n),t||(t=this.store.getFieldDefinition(n)),t&&!Boolean(this.fieldMapById[t.id+""])&&(i=new ct(this,t),this.fieldMap[t.referenceName.toUpperCase()]=i,this.fieldMap[t.name.toUpperCase()]=i,this.fieldMapById[t.id+""]=i,this.fields.push(i)))},n.prototype._defineWorkItemTypeFields=function(){var n=this;$.each(this.workItemType.fields,function(t,i){n._defineField(i.referenceName)})},n.prototype._defineExtensionFields=function(){var n=this;this.extensions&&$.each(this.extensions,function(t,i){i.markerField&&n._defineField(i.markerField.field.referenceName);i.fields&&$.each(i.fields,function(t,i){n._defineField(i.field.referenceName)})})},n.prototype.discardIfNew=function(){this.isNew()&&(this.fireWorkItemDiscarded(),w.getService().fire(ht.Actions.WORKITEM_DISCARDED,this))},n.prototype.isNew=function(){return+this.id<1},n.prototype.isDeleted=function(){return this.getFieldValue(r.CoreFieldRefNames.IsDeleted)},n.prototype.resetManualFieldChanges=function(){this.manuallySetFields={}},n.prototype.setExtensions=function(n){this.extensions=n||[];this._originalExtensions=this.extensions;this._defineExtensionFields()},n.prototype.isDirty=function(n){var r,t,i,u;if(this.isDeleted())return!1;if(this._fieldsDirty(n))return!0;for(r=this.allLinks,i=0,u=r.length;i<u;i++)if((t=r[i],!t.isRemoved())&&(!t.isNew()||!(t instanceof pt)||!t.linkData.isAddedBySystem)&&(t.deleted!==t.isNew()||t.updated))return!0;return!1},n.prototype.isValid=function(){var n=this.getInvalidFields(!0);return!n||n.length===0},n.prototype.isReadOnly=function(){return!1},n.prototype.isExtensionField=function(n){return(n.usages&ht.FieldUsages.WorkItemTypeExtension)===ht.FieldUsages.WorkItemTypeExtension},n.prototype.getRevisions=function(){return this._revisions},n.prototype.getUniqueId=function(){return this.id||this.tempId},n.prototype.setError=function(n){this._error=n;this.fireWorkItemErrorChanged()},n.prototype.clearError=function(){this._error&&(this._error=null,this.fireWorkItemErrorChanged())},n.prototype.getError=function(){return this._error},n.prototype.hasError=function(){return this._error?!0:!1},n.prototype.getInvalidFields=function(n){for(var t,r=[],u=this.fields,i=0,f=u.length;i<f;i++)if(t=u[i],!t.isValid()&&(r.push(t),n))break;return r},n.prototype.setFieldValue=function(n,t,i){var r=this.getField(n);return r?(r.setValue(t,!1,!1,i),!0):!1},n.prototype.getFieldValue=function(n,t,i){var r=this.getField(n);if(r)return r.getValue(t,i)},n.prototype.getFriendlyFieldValue=function(n,t,i){var r=this.getField(n);if(r)return r.getFriendlyValue(t,i)},n.prototype._getFieldValueById=function(n,t,i){var e=this.fieldUpdates,u,f;switch(n){case r.CoreField.AttachedFileCount:return this._getLinkCount(dt,t);case r.CoreField.ExternalLinkCount:return this._getLinkCount(ui,t);case r.CoreField.HyperLinkCount:return this._getLinkCount(fi,t);case r.CoreField.RelatedLinkCount:return this._getLinkCount(pt,t);case r.CoreField.TeamProject:if(this.isNew()&&this.project)return this.project.name}if(f=n+"",!t&&e.hasOwnProperty(f))if(u=e[f],u.setByRule){if(!i)return u.value}else return u.value;return n===r.CoreField.History?"":this.fieldData[f]},n.prototype._setFieldValueById=function(n,t,i){var u,f;switch(n){case r.CoreField.AttachedFileCount:case r.CoreField.ExternalLinkCount:case r.CoreField.HyperLinkCount:case r.CoreField.RelatedLinkCount:return;case r.CoreField.AreaId:case r.CoreField.IterationId:if(!this.project.findNodeById(t))throw new Error("Invalid node id.");}u=n+"";f=this.fieldData[u];!i&&this.manuallySetFields&&(this.manuallySetFields[u]=t);var e=n==r.CoreField.History,o=e&&!ct.compareValues("",t),s=!e&&!ct.compareValues(f,t);o||s?this.fieldUpdates[u]={value:t,setByRule:i}:(delete this.fieldUpdates[u],this.manuallySetFields&&delete this.manuallySetFields[u])},n.prototype.getFieldValueByRevision=function(n,t){var i=this._revisions,f=n+"",e,o,s,u;if(t<0)return null;if(n===r.CoreField.History)return t<i.length?i[t][f]:this.fieldData[f];if(e=this.getComputedFieldValue(n,t),e&&e.success)return e.value;for(s=!1,u=t;u<i.length;u++)if(i[u].hasOwnProperty(f)){o=i[u][f];s=!0;break}return s||(o=this._getFieldValueById(n,!0)),o},n.prototype.getNonComputedFieldValueByRevisionWithDefaultValue=function(n,t,i){if(t<0)return null;var u=this._revisions[t],f=n+"";return u&&u.hasOwnProperty(f)?u[f]:i===undefined||t>=this._revisions.length?this._getFieldValueById(n,!0):i},n.prototype.getComputedFieldValue=function(n,t){var f=n+"",i,u;if(t>=0&&(n===r.CoreField.TeamProject||n===r.CoreField.IterationPath||n===r.CoreField.AreaPath)&&(i=this._revisions[t],i&&i.hasOwnProperty(f)&&(u=i[f],u)))return{success:!0,value:u};switch(n){case r.CoreField.TeamProject:return this._getFieldValueById(n,!0);case r.CoreField.NodeName:return this.computeFieldValue(r.CoreField.NodeName,r.CoreField.AreaId,t);case r.CoreField.IterationPath:return this.computeFieldValue(r.CoreField.IterationPath,r.CoreField.IterationId,t);case r.CoreField.AreaPath:return this.computeFieldValue(r.CoreField.AreaPath,r.CoreField.AreaId,t);default:return null}},n.prototype.isSaving=function(){return this._saving},n.prototype.isValidating=function(){return this._validating},n.prototype.getTitle=function(){return this._getFieldValueById(r.CoreField.Title)||""},n.prototype.getCaption=function(n,t){var i,r;return this.isNew()?(r=t?"":-this.tempId,i=o.format(v.WorkItemEditorCaptionNew,this.workItemType.name,r)):i=o.format(v.WorkItemEditorCaption,this.workItemType.name,this.id),n&&this.isDirty(!0)&&(i=o.format(v.WorkItemEditorDirtyCaption,i)),i},n.prototype.getInfoText=function(){var n={},t=this.getInvalidFields(!0);return t&&t.length>0?(n.text=t[0].getErrorText(),n.invalid=!0):this.hasError()?(this._error.fieldReferenceName&&!this.fieldMap[this._error.fieldReferenceName.toUpperCase()]?(n.text=v.BrowserRefreshRequired,tt.publishEvent(new tt.TelemetryEventData(ft.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,"WorkItem.BrowserRefreshRequired",{fieldReferenceName:this._error.fieldReferenceName}))):n.text=vi(this.getError()),n.invalid=!0):n.text=this.getTitle(),n},n.prototype.getState=function(){return this._getFieldValueById(r.CoreField.State)||""},n.prototype.getPerson=function(n){return this.referencedPersons[n]||this.store.getCurrentUser()},n.prototype.getIdentity=function(n){return this.referencedIdentities[n]},n.prototype.updateCachedIdOnSave=function(){w.getService().fire(ht.Actions.WORKITEM_ID_UPDATED,this)},n.prototype.attachEvent=function(n,t){this.events.subscribe(n,t)},n.prototype.detachEvent=function(n,t){this.events.unsubscribe(n,t)},n.prototype.fireEvent=function(n,t){this._eventsEnabled&&this.events.invokeHandlers(n,this,t)},n.prototype.attachWorkItemChanged=function(n){this.attachEvent("workitem-changed",n)},n.prototype.detachWorkItemChanged=function(n){this.detachEvent("workitem-changed",n)},n.prototype.fireWorkItemChanged=function(n){n&&n.change!==ht.WorkItemChangeType.ErrorChanged&&n.change!==ht.WorkItemChangeType.SaveCompleted&&this.clearError();this.fireEvent("workitem-changed",n)},n.prototype.fireWorkItemPreSave=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:ht.WorkItemChangeType.PreSave},n))},n.prototype.fireWorkItemSaved=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:ht.WorkItemChangeType.Saved},n))},n.prototype.fireWorkItemSaving=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:ht.WorkItemChangeType.Saving},n))},n.prototype.fireWorkItemValidating=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:ht.WorkItemChangeType.Validating},n))},n.prototype.fireWorkItemValidationComplete=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:ht.WorkItemChangeType.ValidationCompleted},n))},n.prototype.fireWorkItemRefresh=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:ht.WorkItemChangeType.Refresh},n))},n.prototype.fireWorkItemReset=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:ht.WorkItemChangeType.Reset},n))},n.prototype.fireWorkItemDiscarded=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:ht.WorkItemChangeType.Discarded},n))},n.prototype.fireWorkItemSaveComplete=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:ht.WorkItemChangeType.SaveCompleted},n))},n.prototype.fireWorkItemDeleted=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:ht.WorkItemChangeType.Deleted},n))},n.prototype.fireWorkItemTypeChanging=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:ht.WorkItemChangeType.TypeChanging},n))},n.prototype.fireWorkItemTypeChanged=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:ht.WorkItemChangeType.TypeChanged},n))},n.prototype.fireWorkItemProjectChanging=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:ht.WorkItemChangeType.ProjectChanging},n))},n.prototype.fireWorkItemProjectChanged=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:ht.WorkItemChangeType.ProjectChanged},n))},n.prototype.fireWorkItemErrorChanged=function(t){this.fireWorkItemChanged($.extend({workItem:this,change:ht.WorkItemChangeType.ErrorChanged},t));this.hasError()&&this._error.fieldReferenceName?this.fireEvent("field-error:"+this._error.fieldReferenceName):this.fireEvent(n.FIELD_ERRORS_CLEARED)},n.prototype.fireWorkItemLinksUpdatedByOtherWorkItem=function(n){this.fireWorkItemChanged($.extend({workItem:this,change:ht.WorkItemChangeType.WorkItemLinkChangedOutside},n))},n.prototype.fireFieldChange=function(n){var f,t,i={},e,s,o,u;if(this._eventsEnabled&&n){for(e=0,s=n.length;e<s;e++)if(t=n[e],!i.hasOwnProperty(t))if(f=this.getField(t),f){o=f.fieldDefinition.id;i[o]=f;switch(o){case r.DalFields.AttachedFiles:u=r.CoreField.AttachedFileCount;break;case r.DalFields.RelatedLinks:u=r.CoreField.RelatedLinkCount;break;case r.DalFields.LinkedFiles:u=r.CoreField.HyperLinkCount;break;case r.DalFields.BISURI:u=r.CoreField.ExternalLinkCount}u&&(i[u]=this.getField(u))}else i[t]=null;n=[];for(t in i)i.hasOwnProperty(t)&&(f=i[t],n[n.length]=t,this.fireEvent("field-change:"+t,f))}this.fireWorkItemChanged({workItem:this,change:ht.WorkItemChangeType.FieldChange,changedFields:i})},n.prototype.attachFieldChange=function(n,t){var i=this.getField(n);i?this.attachEvent("field-change:"+i.fieldDefinition.id,t):this.attachEvent("field-change:"+n,t)},n.prototype.detachFieldChange=function(n,t){var i=this.getField(n);i?this.detachEvent("field-change:"+i.fieldDefinition.id,t):this.detachEvent("field-change:"+n,t)},n.prototype.getField=function(n){var t=(""+n).toUpperCase();return this.fieldMapById[t]||this.fieldMap[t]},n.prototype.computeFieldValue=function(n,t,i){function o(n){f&&(u=s.findNodeById(f),u&&(e.value=et.NodeHelpers.getNodeSegments(u)[n],e.success=!0))}var h,f,e={success:!1},s=this.project,u,l,c;h=n instanceof ct?n.fieldDefinition.id:n;f=i>=0?this.getFieldValueByRevision(t,i):this._getFieldValueById(t);switch(h){case r.CoreField.AreaId:case r.CoreField.IterationId:f&&(u=h===r.CoreField.AreaId?s.findAreaNodeByPath(f):s.findIterationNodeByPath(f),u&&(e.value=u.id,e.success=!0));break;case r.DalFields.AreaLevel1:case r.DalFields.IterationLevel1:o(0);break;case r.DalFields.AreaLevel2:case r.DalFields.IterationLevel2:o(2);break;case r.DalFields.AreaLevel3:case r.DalFields.IterationLevel3:o(3);break;case r.DalFields.AreaLevel4:case r.DalFields.IterationLevel4:o(4);break;case r.DalFields.AreaLevel5:case r.DalFields.IterationLevel5:o(5);break;case r.DalFields.AreaLevel6:case r.DalFields.IterationLevel6:o(6);break;case r.DalFields.AreaLevel7:case r.DalFields.IterationLevel7:o(7);break;case r.CoreField.AreaPath:case r.CoreField.IterationPath:if(f){if(u=s.findNodeById(f),!u&&(l=this.getFieldValueByRevision(r.CoreField.TeamProject,i),l))try{c=this.store.getProject(l);c.nodes&&!$.isFunction(c.nodes)&&(u=c.findNodeById(f))}catch(a){}u?(e.value=et.NodeHelpers.getPath(u,1),e.success=!0):(e.value=h===r.CoreField.AreaPath?v.DeletedAreaPath:v.DeletedIterationPath,e.success=!0)}break;case r.CoreField.NodeName:f&&(u=s.findNodeById(f),u&&(e.value=u.name,e.success=!0))}return e},n.prototype.beginSave=function(n,t){var r=this,i=ot.PerfScenarioManager.startScenario(ft.WITPerformanceScenario.WORKITEM_SAVE,!1);return this.store.beginSaveWorkItemsBatch([this],function(t){i&&i.addSplitTiming(ft.PerformanceEvents.WORKITEM_SAVE_COMPLETE);$.isFunction(n)&&n.call(r,t);i&&i.end()},function(n){i&&i.abort();n&&n.name===ht.Exceptions.WorkItemBulkSaveException&&(n=n.results[0].error);yt(n,t,r)})},n.prototype.beginValidate=function(n,t,r){var u=this,f,e;!this.isDirty()||this.isValidating()||this.isSaving()||(f=this.getUpdateData(),f&&f.payload&&(this._setValidatingStatus(!0),a.logTracePoint("VSS.WorkItemTracking.WorkItem.beginValidate.start"),e=this.getField(n),this.workItemType.beginGetDependentFields(n,function(n){var o=n.concat(e.fieldDefinition),i={},f={};$.each(o,function(n,t){i[t.referenceName]=u.getFieldValue(t.id,!0);u.fieldUpdates.hasOwnProperty(t.id+"")&&(f[t.referenceName]=u.getFieldValue(t.id))});u._httpClient.beginRunRuleEngine(u.workItemType.getRestUrl(),[e.fieldDefinition.referenceName],i,f).then(function(){u.isValidating()&&!u.isSaving()&&$.isFunction(t)&&t();u._setValidatingStatus(!1);a.logTracePoint("VSS.WorkItemTracking.WorkItem.beginValidate.end")},function(n){u.isValidating()&&!u.isSaving()&&(n.status===400?$.isFunction(r)&&r(n):$.isFunction(t)&&t());u._setValidatingStatus(!1);a.logTracePoint("VSS.WorkItemTracking.WorkItem.beginValidate.end")})},i.handleError)))},n.prototype.getFieldUpdates=function(){var u={},t,n,i,f,r=this.fieldUpdates,e=this.workItemType.fieldMap,o=this.workItemType.fieldMapById;for(n in r)if(r.hasOwnProperty(n)){if(i=o[n]||e[n],i&&i.checkFlag(ht.FieldFlags.Computed))continue;t=r[n].value;typeof t=="undefined"&&(t=null);u[n]=t;f=!0}return f?u:null},n.prototype.getTemplateFieldValues=function(){var i=this,n={},t=this.initialValues||{};return $.each(this.manuallySetFields,function(u,f){var e=+u,o=i.getField(e),h,c=e+"",s;e!==r.CoreField.AreaId&&e!==r.CoreField.IterationId&&((s=o.getValue(),s instanceof wt)||(h=t.hasOwnProperty(c)?!ct.compareValues(t[c].value,f):!ct.compareValues(o.getValue(!0),f),h&&(n[o.fieldDefinition.referenceName]=s)))}),n},n.prototype.getLinkUpdates=function(n){var r,s,o,t,u,f,e,i=null;for(o=this.allLinks,u=[],f=[],e=[],r=0,s=o.length;r<s;r++)(t=o[r],t.isRemoved())||(t.deleted?(u.push(t.linkData),n&&n.deletedLinks.push(t)):t.isNew()?(e.push(t.linkData),n&&n.addedLinks.push(t)):t.updated&&(f.push(t.linkData),n&&n.updatedLinks.push(t)));return u.length>0&&(i=i||{},i.deletedLinks=u),f.length>0&&(i=i||{},i.updatedLinks=f),e.length>0&&(i=i||{},i.addedLinks=e),i},n.prototype._restoreLinkUpdates=function(n){var u,f,t,r,i;if(n){if(n.addedLinks)for(u=n.addedLinks,t=0,r=u.length;t<r;t++)i=at.createFromLinkData(this,u[t]),this.addLink(i);if(n.deletedLinks)for(f=n.deletedLinks,t=0,r=f.length;t<r;t++)i=this.findLink(at.createFromLinkData(this,f[t])),i&&this.removeLinks([i])}},n.prototype.getUpdateData=function(){var t=!1,i={uniqueId:this.getUniqueId(),id:this.id,tempId:this.tempId,rev:this.revision,projectId:this.project.guid,addedLinks:[],deletedLinks:[],updatedLinks:[]},n={id:this.id,rev:this.revision,projectId:this.project.guid,isDirty:this._fieldsDirty()},u,f;return this.isNew()&&(n.tempId=this.tempId),u=this.getFieldUpdates(),u&&(n.fields=u,this.hasTeamProjectChanged()&&(n.fields[r.CoreFieldRefNames.TeamProject]=this.project.name),t=!0),f=this.getLinkUpdates(i),f&&(n.links=f,t=!0),t&&(i.payload=n),i},n.prototype.setRevisions=function(n){this._revisions=n;this._revisionsPopulated=!0},n.prototype.getRevisionsArePopulated=function(){return this._revisionsPopulated},n.prototype._takeUpdateResult=function(n,t,i){var c,u,h,a,v,y;ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_TAKEUPDATERESULT,!0);try{if(c=this.id,this._loadTime=n.loadTime,this.ruleEngine=null,this.extensions=i,this._originalExtensions=this.extensions,this._defineExtensionFields(),n.rev!==this.revision){if(this._setFieldValueById(r.CoreField.Id,n.id),this.id=n.id,c===0&&this.updateCachedIdOnSave(),this._setFieldValueById(r.CoreField.Rev,n.rev),this.revision=n.rev,h=n.fields,h)for(u in h)h.hasOwnProperty(u)&&this._setFieldValueById(+u,h[u]);var o=this.fieldUpdates,f=this.fieldData,s,l=""+r.CoreField.ChangedBy,e=""+r.CoreField.History;if(n.rev===1){for(u in o)o.hasOwnProperty(u)&&(f[u]=o[u].value);f[e]&&this._addDiscussionForRevision(f[e],f)}else{s={};f.hasOwnProperty(l)&&(s[l]=f[l]);for(u in o)o.hasOwnProperty(u)&&(s[u]=f[u],f[u]=o[u].value);f.hasOwnProperty(e)&&(s.hasOwnProperty(e)||(s[e]=f[e],delete f[e]));this._revisionsPopulated&&this._revisions.push(s);f[e]&&this._addDiscussionForRevision(f[e],f)}this.fieldUpdates={}}}finally{ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_TAKEUPDATERESULT,!1)}ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_EVALUATELINKUPDATES,!0);try{a=this._takeLinkUpdateResult(n,t);this.resetHistory();this.evaluate(a.changedFields);this.resetManualFieldChanges()}finally{ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_EVALUATELINKUPDATES,!1)}ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_RESETAFTERSAVE,!0);try{v=this.hasWorkItemTypeChanged();y=this.hasTeamProjectChanged();this._originalWorkItemType=this.workItemType;this.fireWorkItemSaved({changedWorkItemLinks:a.changedWorkItemLinks,firstSave:c!==this.id,typeChanged:v,projectChanged:y})}finally{ot.PerfScenarioManager.addSplitTiming(ft.PerformanceEvents.WORKITEMTRACKING_RESETAFTERSAVE,!1)}},n.prototype._takeLinkUpdateResult=function(n,t){var i=this,h=this.allLinks,u={},f=[],c=function(n){return n.SourceID==i.id?{targetId:n.TargetID,linkType:n.LinkType}:{targetId:n.SourceID,linkType:i.store.findLinkTypeEnd(n.LinkType).oppositeEnd.id}},l=function(n,t){var i=null;return $.each(h,function(r,u){if(u instanceof pt&&!u.isRemoved()){var f=u;if(f.getTargetId()==n&&f.getLinkType()==t)return i=f,!1}}),i},e,o,s;$.each(t.deletedLinks,function(n,t){t instanceof pt||(u[""+t.getFieldId()]=!0,t.linkData.RemovedDate=i._getFieldValueById(r.DalFields.LastChangedDateId))});$.each(n.deletedLinks,function(n,t){if(!t.ExtID){var e=c(t),r=l(e.targetId,e.linkType);r&&(u[""+r.getFieldId()]=!0,r.linkData["Revised Date"]=t.ChangedDate,r.linkData["Revised By"]=t.ChangedBy,f.push({command:"remove",sourceId:i.id,targetId:r.getTargetId(),linkData:r.linkData}))}});e={};$.each(t.addedLinks,function(n,t){t instanceof pt||(e[t.linkData.FilePath]=t)});$.each(n.addedLinks,function(n,t){var s,a,o;t.ExtID?(s=e[t.FilePath],s&&(u[""+s.getFieldId()]=!0,s.linkData.ExtID=t.ExtID,s.linkData.AddedDate=i._getFieldValueById(r.DalFields.LastChangedDateId))):(a=c(t),o=l(a.targetId,a.linkType),o||(o=pt.create(i,a.linkType,a.targetId,null),h.push(o)),u[""+o.getFieldId()]=!0,o.linkData["Changed Date"]=t.ChangedDate,o.linkData["Changed By"]=t.ChangedBy,f.push({command:"add",sourceId:i.id,targetId:o.getTargetId(),linkData:o.linkData}))});this.resetLinks();o=[];for(s in u)u.hasOwnProperty(s)&&o.push(+s);return{changedFields:o,changedWorkItemLinks:f}},n.prototype._getRuleEngine=function(){if(!this.ruleEngine){var n=[];$.each(this.workItemType.fields,function(t,i){i.rules&&n.push({fieldId:i.id,rules:i.rules})});this.extensions&&$.each(this.extensions,function(t,i){i.fieldRules&&$.each(i.fieldRules,function(t,i){n.push({fieldId:t,rules:i})})});this.ruleEngine=new oi(this,n)}return this.ruleEngine},n.prototype.evaluate=function(n){var i=[],t={};$.each(this.workItemType.getTriggerList(),function(n,r){var u=r+"";t.hasOwnProperty(u)||(i.push(r),t[u]=!0)});$.each(this.fields,function(n,r){var u=r.fieldDefinition.id,f=u+"";t.hasOwnProperty(f)||(i.push(u),t[f]=!0)});this.evaluateFields(i,n)},n.prototype.evaluateField=function(n,t,i){return this._getRuleEngine().evaluateField(n,t,i)},n.prototype.evaluateFields=function(n,t){var i={},r;t&&$.each(t,function(n,t){i[t+""]=!0});r=this._getRuleEngine().evaluateFields(n);r&&$.each(r,function(n,t){i[t+""]=!0});this.fireFieldChange(u.keys(i))},n.prototype.resetLinks=function(n){var r,i,t,u;if(this._links=null,n)for(i=this.allLinks,t=0,u=i.length;t<u;t++)r=i[t],r.deleted&&r.isNew()&&(i.splice(t--,1),u--)},n.prototype.getLinks=function(){var r,n,i,t,u;if(!this._links)for(this._links=r=[],i=this.allLinks,t=0,u=i.length;t<u;t++)n=i[t],n.deleted||n.isRemoved()||r.push(n);return this._links},n.prototype.findLink=function(n){var i,t,r;for(i=this.allLinks,t=0,r=i.length;t<r;t++)if(i[t].equals(n))return i[t];return undefined},n.prototype.addLink=function(n){this.addLinks([n])},n.prototype.addLinks=function(n){for(var f,u,e,s,r={},t,i=0,h=n.length;i<h;i++)f=!1,$.each(this.allLinks,function(t,r){if(!r.isRemoved()&&r.deleted&&n[i].isDuplicate(r))return o.equals(r.getComment(),n[i].getComment(),!1)||r.setComment(n[i].getComment()),f=!0,r.deleted=!1,!1}),t=n[i].getFieldId(),f?r[t]=0:(r[t]=(r[t]||0)+1,this.allLinks.push(n[i]));if(n.length){this.resetLinks();u=[];for(s in r)r.hasOwnProperty(s)&&(t=+s,u.push(t),e=at.getCountFieldId(t),this.evaluateField(e,!0,this.getFieldValue(e)-r[t]));this.evaluateFields(u,u)}},n.prototype.removeLinks=function(n){for(var r,u,o,f,s=0,t={},i,e=0,h=n.length;e<h;e++)r=n[e],r.getIsLocked()||(i=r.getFieldId(),r.remove({preventEvent:!0}),t[r.getFieldId()]=(t[i]||0)+1,s++);if(s){this.resetLinks(!0);u=[];for(f in t)t.hasOwnProperty(f)&&(i=+f,u.push(+f),o=at.getCountFieldId(i),this.evaluateField(o,!0,this.getFieldValue(o)+t[i]));this.evaluateFields(u,u)}},n.prototype.resetHistory=function(){w.getService().fire(ht.Actions.RESET_HISTORY,this,null)},n.prototype.getLoadTime=function(){return this._loadTime},n.prototype.getLinkUpdatedExternallyDate=function(){return this._linkUpdatedExternallyDate},n.prototype.linksUpdatedExternally=function(){this._linkUpdatedExternallyDate=new Date;this.resetHistory()},n.prototype._addDiscussionForRevision=function(n,t){w.getService().fire(ht.Actions.DISCUSSION_ADDED,this,{historyText:n,revision:t})},n.prototype._resetDiscussion=function(){w.getService().fire(ht.Actions.RESET_DISCUSSION,this,null)},n.prototype.beginResetExtension=function(n,t,i){var r=this;this.store.beginGetWorkItemTypeExtension(n,function(n){for(var i=0,u=r.extensions.length;i<u;i++)if(o.equals(r.extensions[i].id,n.id)){r.extensions[i]=n;r.ruleEngine=null;break}r.evaluate();$.isFunction(t)&&t(n)},i)},n.prototype.reset=function(){var n,i,t,u;for(this._links=null,i=this.allLinks,t=0,u=i.length;t<u;t++)n=i[t],n.isNew()?(i.splice(t--,1),u--):(n.deleted=!1,n.linkData.CommentChanged&&(n.linkData.Comment=n.comment,n.linkData.CommentChanged=!1),n.linkData.LockChanged&&(n.linkData.Lock=n.isLocked,n.linkData.LockChanged=!1),n.setState());this.relatedData={};this.fieldUpdates={};this.evaluate();this.resetManualFieldChanges();this._resetWorkItemTypeChanges();this._isReset=!0;this.fireFieldChange([r.DalFields.RelatedLinks,r.DalFields.BISURI,r.DalFields.LinkedFiles,r.DalFields.AttachedFiles,r.DalFields.Tags]);this.fireWorkItemReset()},n.prototype.updateWorkItemPayload=function(n,t,i){var u=this,f=function(){u._load(n,!0);u.fireWorkItemRefresh();$.isFunction(t)&&t.call(u,u)},e=n.fields[r.CoreField.TeamProject],o=n.fields[r.CoreField.WorkItemType];this._evaluateWorkItemTypeChange(e,o,f,i)},n.prototype.beginRefresh=function(n,t){var i=this;if(this.isNew())try{this.reset();$.isFunction(n)&&n.call(this,this)}catch(r){yt(r,t,this)}else this._isReset=!0,this.store.beginGetWorkItemData([this.id],function(r){i.updateWorkItemPayload(r,n,t)},t)},n.prototype._resetWorkItemTypeChanges=function(){if(this.hasWorkItemTypeChanged()){var n={SourceType:this._originalWorkItemType.name,DestinationType:this.workItemType.name};this.workItemType.project!==this._originalWorkItemType.project?tt.publishEvent(new tt.TelemetryEventData(ft.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,ft.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_WIT_MOVE_REVERT,n)):tt.publishEvent(new tt.TelemetryEventData(ft.WITCustomerIntelligenceArea.WORK_ITEM_TRACKING,ft.WITCustomerIntelligenceFeature.CLIENTSIDEOPERATION_WIT_TYPE_CHANGE_REVERT,n));this.changeWorkItemType(this._originalWorkItemType,this._originalExtensions);this._originalWorkItemType=this.workItemType;this._originalExtensions=this.extensions}},n.prototype._evaluateWorkItemTypeChange=function(n,t,i,r){var u=this;o.equals(n,this._originalWorkItemType.project.name,!0)&&o.equals(t,this._originalWorkItemType.name,!0)?o.equals(n,this.workItemType.project.name,!0)&&o.equals(t,this.workItemType.name,!0)?i():(this._resetWorkItemTypeChanges(),i()):this.store.beginGetProject(n,function(n){n.beginGetWorkItemType(t,function(n){u.changeWorkItemType(n);u._originalWorkItemType=n;i()},r)},r)},n.prototype._copyField=function(n,t,i){var f,u;if(t.isCloneable()&&(f=this.getField(t.id),f&&(u=f.getValue(),!ct.isEmpty(u)))){if((t.id===r.CoreField.AreaId||t.id===r.CoreField.IterationId)&&(typeof u!="number"||this.project.id!==i.project.id))return;n.setFieldValue(t.id,u)}},n.prototype.copy=function(n,t,i,u,f,e){var s,c,l,a=[],h,y={},nt,p,b,tt,k,d,g;for(n=n instanceof gt?n:this.workItemType,t=typeof t!="boolean"?!0:t,i=typeof i!="boolean"?!0:i,u=typeof u!="boolean"?!0:u,e=typeof e!="boolean"?!0:e,$.each(f||[],function(n,t){y[t]=!0}),h=n.create(),w.getService().fire(ht.Actions.WORKITEM_COPIED,h),s=0,c=n.triggerList.length;s<c;s++)nt=n.triggerList[s],p=nt.toString(),y.hasOwnProperty(p)||(l=n.fieldMapById[p],this._copyField(h,l,n),y[p]=!0);for(s=0,c=n.fields.length;s<c;s++)l=n.fields[s],y.hasOwnProperty(l.id.toString())||this._copyField(h,l,n);if(i&&(this.isNew()?b=v.CreateCopyCopiedFromNewWorkItem:(tt="<a href='x-mvwit:workitem/"+this.id+"'>"+this.workItemType.name+" "+this.id+"<\/a>",b=o.format(t?v.CreateCopyCopiedWithAllLinksFrom:v.CreateCopyCopiedFrom,tt)),h.setFieldValue(r.CoreField.History,b)),t)for(k=this.getLinks(),s=0,c=k.length;s<c;s++)(d=k[s],d instanceof dt)||(g=d.clone(h),g&&a.push(g));return!this.isNew()&&e&&a.push(pt.create(h,this.store.findLinkTypeEnd("System.LinkTypes.Related-Forward"),this.id,"")),a.length>0&&h.addLinks(a),h.evaluate([r.DalFields.RelatedLinks,r.DalFields.AttachedFiles,r.DalFields.BISURI,r.DalFields.LinkedFiles]),h},n.prototype.getTagNames=function(){return this._splitTagNames(this.getFieldValue(r.DalFields.Tags))},n.prototype._splitTagNames=function(n){return n?$.trim(n).split(/;\s*/):[]},n.prototype._load=function(t,i){var v=this,u,l,f,o,s,e,a,c;t=t||{};this._loadTime=t.loadTime||new Date;this.fieldData=t.fields||{};for(f in this.fieldData)this.fieldData.hasOwnProperty(f)&&(o=this.workItemType.getFieldDefinition(f),o&&ct.isLongTextField(o.type)&&(s=this.fieldData[f],s&&(this.fieldData[f]=s.trim())));for(this._revisions=t.revisions||[],this.fieldUpdates={},$.each(this.fieldData,function(n){v._defineField(n)}),i&&$.each(this.fields,function(n,t){t._reset()}),u=[],t.files&&h.addRange(u,t.files),t.relations&&h.addRange(u,t.relations),t.relationRevisions&&h.addRange(u,t.relationRevisions),this.allLinks=l=[],this._links=null,e=0,a=u.length;e<a;e++)l.push(at.createFromLinkData(this,u[e]));this.relatedData={};this.referencedPersons=t.referencedPersons||{};this.referencedIdentities=t.referencedIdentities||{};this.id=this._getFieldValueById(r.CoreField.Id)||0;this.id===0&&(t.tempId?(this.tempId=t.tempId,n.reserveTempId(this.tempId)):this.tempId=n.getTempId());this.revision=this._getFieldValueById(r.CoreField.Rev)||0;this.isNew()?(c=this.project.id,this._setFieldValueById(r.CoreField.AreaId,c,!0),this._setFieldValueById(r.CoreField.IterationId,c,!0),this._setFieldValueById(r.CoreField.WorkItemType,this.workItemType.name,!0),this._revisionsPopulated=!0):this._revisionsPopulated=!st.isIncrementalHistoryEnabled()||t.revisions!=undefined&&t.revisions!=null&&t.revisions.length>0||t.relationRevisions!=undefined&&t.relationRevisions!=null&&t.relationRevisions.length>0;this.resetHistory();this._resetDiscussion();this.evaluate([r.DalFields.RelatedLinks,r.DalFields.AttachedFiles,r.DalFields.BISURI,r.DalFields.LinkedFiles]);this.isNew()&&(this.initialValues=$.extend({},this.fieldUpdates));this.resetManualFieldChanges()},n.prototype._fieldsDirty=function(n){var t,i;if(n){if(this.manuallySetFields)for(t in this.manuallySetFields)if(this.manuallySetFields.hasOwnProperty(t))return!0}else{if(this.isNew())return!0;i=this.fieldUpdates;for(t in i)if(i.hasOwnProperty(t)&&!i[t].setByRule)return!0}return!1},n.prototype._setSavingStatus=function(n,t){this._saving!==n&&(this._saving=n,n?this.fireWorkItemSaving():this.fireWorkItemSaveComplete(t))},n.prototype._setValidatingStatus=function(n){this._validating!==n&&(this._validating=n,n?this.fireWorkItemValidating():this.fireWorkItemValidationComplete())},n.prototype._getLinkCount=function(n,t){var i=0,r=this.getLinks();return $.each(r,function(r,u){t&&u.isNew()||(n?u instanceof n&&i++:i++)}),i},n.prototype.hasWorkItemTypeChanged=function(){return this._originalWorkItemType!==this.workItemType},n.prototype.hasTeamProjectChanged=function(){return this._originalWorkItemType.project!==this.project},n.tempIdSeed=0,n.MAX_TITLE_LENGTH=255,n.FIELD_ERRORS_CLEARED="field-errors-cleared",n}();t.WorkItem=ri;ct=function(){function n(n,t){this.workItem=n;this.fieldDefinition=t}return n.isEmpty=function(n){return n===null||typeof n=="undefined"||typeof n=="string"&&$.trim(n).length===0},n.compareValues=function(t,i,r,u){var f,e,s;return t instanceof wt?i instanceof wt&&t.type===i.type?n.compareValues(t.value,i.value,r):!1:i instanceof wt?!1:((t===null||typeof t=="undefined")&&(t=""),(i===null||typeof i=="undefined")&&(i=""),t=""+t,i=""+i,f=!1,f=r?o.localeIgnoreCaseComparer(t,i)===0:o.localeComparer(t,i)===0,!f&&u&&(e=k.IdentityHelper.parseUniquefiedIdentityName(t),s=k.IdentityHelper.parseUniquefiedIdentityName(i),f=e&&s&&o.localeIgnoreCaseComparer(e.uniqueName,s.uniqueName)===0),f)},n.isMatch=function(n,t){return n?(n=n.replace(/[.*+?|()\[\]\^\${}\\]/g,"\\$&"),n=n.replace(/n/gi,"\\d").replace(/a/gi,"[a-zA-Z]").replace(/x/gi,"[a-zA-Z0-9]"),n="^"+n+"$",new RegExp(n,"i").test(t)):!0},n.hashset=function(n,t){var u={},r,i,f;if(t){if(n.__hashSetCaseInsensitive)return n.__hashSetCaseInsensitive;for(i=0,f=n.length;i<f;i++)r=n[i],u[r.toLocaleUpperCase()]=r;n.__hashSetCaseInsensitive=u}else{if(n.__hashSet)return n.__hashSet;for(i=0,f=n.length;i<f;i++)r=n[i],u[r]=r;n.__hashSet=u}return u},n.contains=function(t,i,r){if(r){var u=n.hashset(t,!0);return u.hasOwnProperty(i.toLocaleUpperCase())}return $.inArray(i,t)>=0},n.normalize=function(t,i){if(i){var r=n.hashset(t,!0);return r[i.toLocaleUpperCase()]||i}return i},n.intersect=function(t,i,r){var o,f,e,u,s;if(!i)return t;if(i.length===0)return[];if(t.length<i.length?o=n.hashset(t,r):(o=n.hashset(i,r),i=t),f=[],h.copySortFlag(f,i),r)for(u=0,s=i.length;u<s;u++)e=i[u],o.hasOwnProperty(e.toLocaleUpperCase())&&(f[f.length]=e);else for(u=0,s=i.length;u<s;u++)e=i[u],o.hasOwnProperty(e)&&(f[f.length]=e);return f},n.union=function(n,t,i){var e=i?o.localeIgnoreCaseComparer:o.localeComparer,r;if(!t||t.length===0)return n;if(!n||n.length===0)return t;h.sortIfNotSorted(n,e);h.sortIfNotSorted(t,e);r=[];h.flagSorted(r,e);for(var u=0,a=n.length,f=0,v=t.length,s,c,l;u<a&&f<v;)s=n[u],c=t[f],l=e(s,c),l===0?(r[r.length]=s,u++,f++):l>0?(r[r.length]=c,f++):(r[r.length]=s,u++);while(u<a)r[r.length]=n[u],u++;while(f<v)r[r.length]=t[f],f++;return r},n.subtract=function(t,i,r){var e,s,f,u,o;if(!i||i.length===0)return t;if(f=[],h.copySortFlag(f,t),s=n.hashset(i,r),r)for(u=0,o=t.length;u<o;u++)e=t[u],s.hasOwnProperty(e.toLocaleUpperCase())||(f[f.length]=e);else for(u=0,o=t.length;u<o;u++)e=t[u],s.hasOwnProperty(e)||(f[f.length]=e);return f},n.inList=function(t,i,r,u,f){var s,e,h;if(r&&n.contains(r,i,f))return!0;if(u)for(e=0,h=u.length;e<h;e++)if(s=t.getConstantSet(u[e]),!s,n.contains(s,i,f))return!0;return!1},n.unionLists=function(t,i,r){var u,e,f,s;if(r){for(i?(u=i.slice(0),h.copySortFlag(u,i)):(u=[],h.flagSorted(u,o.localeIgnoreCaseComparer)),f=0,s=r.length;f<s;f++)e=t.getConstantSet(r[f]),!e,u=n.union(u,e,!0);return u}return i},n.isLongTextField=function(n){switch(n){case r.FieldType.PlainText:case r.FieldType.Html:case r.FieldType.History:return!0;default:return!1}},n.isNumericField=function(n){switch(n){case r.FieldType.Integer:case r.FieldType.Double:return!0;default:return!1}},n.isStringField=function(n){switch(n){case r.FieldType.PlainText:case r.FieldType.Html:case r.FieldType.History:case r.FieldType.String:return!0;default:return!1}},n.convertValueToDisplayString=function(n){return n!==null&&typeof n!="undefined"&&n instanceof wt&&(n=n.value),e.convertValueToDisplayString(n)},n.isValidStringFieldValue=function(n,t){return!t&&o.containsControlChars(n)?!1:!o.containsMismatchedSurrogateChars(n)},n.normalizeStringValue=function(n,t){return t||(n=n.replace(pi," ")),n.replace(wi," ")},n.normalizeHtmlValue=function(n){return nt.HtmlNormalizer.normalizeStripAttributes(n,["class"])},n.convertValueToInternal=function(t,i,f){var l=0,e,a,h;if(i===null||typeof i=="undefined")e=null;else if(typeof i=="string"&&i.length===0)e=null;else if(i instanceof wt)e=i;else try{switch(f){case r.FieldType.Boolean:if(typeof i=="boolean")e=i?1:0;else if(typeof i=="number")e=i!==0?1:0;else if(typeof i=="string")e=/^\d+$/.test(i)?c.parseLocale(i)!==0?1:0:u.BoolUtils.parse(i)?1:0;else throw new Error("Invalid Boolean field value.");break;case r.FieldType.Integer:if(typeof i=="number"?e=Math.round(i):typeof i=="boolean"?e=i?0:1:typeof i=="string"&&/^[\-+]?\d+$/.test(i)&&(e=c.parseLocale(i)),typeof e=="undefined"||isNaN(e)||!isFinite(e))throw new Error(o.format("Invalid Integer field value.",i));break;case r.FieldType.Double:if(typeof i=="number"?e=i:typeof i=="boolean"?e=i?0:1:typeof i=="string"&&(e=c.parseLocale(i)),typeof e=="undefined"||isNaN(e)||!isFinite(e))throw new Error(o.format("Invalid Double field value.",i));break;case r.FieldType.DateTime:if(e=i instanceof Date?i:typeof i=="string"?s.parseDateString(i):null,e===null||isNaN(e))throw new Error("Invalid DateTime field value.");a=e.getFullYear();(a<1753||a>9999)&&(l=ht.FieldStatusFlags.InvalidDate);break;case r.FieldType.Guid:if(typeof i=="string"){if(h=yi.exec(i),!h)throw new Error("Invalid GUID field value.");e=h[1]+"-"+h[2]+"-"+h[3]+"-"+h[4]+"-"+h[5]}else throw new Error("Invalid GUID field value.");break;default:if(typeof i=="string")e=i;else if(typeof i=="number")e=c.localeFormat(i,"N");else if(typeof i=="boolean")e=i?"True":"False";else if(i instanceof Date)e=s.localeFormat(i,"F");else throw new Error("Invalid String field type.");typeof e=="undefined"&&(e=null);e!==null&&((f==r.FieldType.PlainText||f==r.FieldType.Html)&&(e=$.trim(e)),e.length===0&&(e=null));e!==null&&(f===r.FieldType.String&&e.length>ri.MAX_TITLE_LENGTH&&(l=ht.FieldStatusFlags.InvalidTooLong),n.isValidStringFieldValue(e,n.isLongTextField(f))||(l=ht.FieldStatusFlags.InvalidCharacters))}}catch(v){return{value:i,error:v,status:ht.FieldStatusFlags.InvalidType}}return{value:e,status:l}},n.convertValueToExternal=function(t,i,u){return typeof i=="undefined"&&(i=null),i===null&&n.isStringField(u)?i="":u===r.FieldType.Boolean&&(i=i?!0:!1),i},n.getFieldErrorText=function(n,t,i,r){switch(t){case ht.FieldStatus.InvalidEmpty:return o.format(v.FieldStatusInvalidEmptyError,n);case ht.FieldStatus.InvalidNotEmpty:return o.format(v.FieldStatusInvalidNotEmptyError,n);case ht.FieldStatus.InvalidFormat:return o.format(v.FieldStatusInvalidFormatError,n);case ht.FieldStatus.InvalidListValue:return o.format(v.FieldStatusInvalidListValueError,n,i);case ht.FieldStatus.InvalidOldValue:return o.format(v.FieldStatusInvalidOldValueError,n);case ht.FieldStatus.InvalidNotOldValue:return o.format(v.FieldStatusInvalidNotOldValueError,n);case ht.FieldStatus.InvalidEmptyOrOldValue:return o.format(v.FieldStatusInvalidEmptyOrOldValueError,n);case ht.FieldStatus.InvalidNotEmptyOrOldValue:return o.format(v.FieldStatusInvalidNotEmptyOrOldValueError,n);case ht.FieldStatus.InvalidValueInOtherField:return o.format(v.FieldStatusInvalidValueInOtherFieldError,n);case ht.FieldStatus.InvalidValueNotInOtherField:return o.format(v.FieldStatusInvalidValueNotInOtherFieldError,n);case ht.FieldStatus.InvalidDate:return o.format(v.FieldStatusInvalidDateErrorError,n);case ht.FieldStatus.InvalidTooLong:return o.format(v.FieldStatusInvalidTooLongError,n);case ht.FieldStatus.InvalidType:return o.format(v.FieldStatusInvalidTypeError,n);case ht.FieldStatus.InvalidComputedField:return o.format(v.FieldStatusInvalidComputedFieldError,n);case ht.FieldStatus.InvalidPath:return o.format(v.FieldStatusInvalidPathError,n);case ht.FieldStatus.InvalidCharacters:return o.format(v.FieldStatusInvalidCharactersError,n);case ht.FieldStatus.InvalidIdentity:return r||o.format(v.FieldStatusInvalidListValueError,n,i);default:return o.format(v.FieldStatusInvalidUnknownError,n)}},n.getFieldStatus=function(n){if((n&ht.FieldStatusFlags.InvalidMask)!==ht.FieldStatusFlags.None){for(var t=1,i=ei.length;t<i;t++)if((n&ei[t])!==ht.FieldStatusFlags.None)return t;return ht.FieldStatus.InvalidUnknown}return ht.FieldStatus.Valid},n.prototype.resetUpdate=function(){delete this.workItem.fieldUpdates[this.fieldDefinition.id+""]},n.prototype.getValue=function(t,i){return n.convertValueToExternal(this.workItem.store,this._getValue(t,i),this.fieldDefinition.type)},n.prototype.getFriendlyValue=function(n,t){var i=this.getValue(n,t);return this.fieldDefinition.isIdentity&&i?k.IdentityHelper.parseUniquefiedIdentityName(i).displayName:i},n.prototype.getDisplayText=function(t,i){return n.convertValueToDisplayString(this.getValue(t,i))},n.prototype.setValue=function(t,i,r,u){var e,f,o;i===void 0&&(i=!1);r===void 0&&(r=!1);u===void 0&&(u=!1);e=this.workItem._getFieldValueById(this.fieldDefinition.id);f=n.convertValueToInternal(this.workItem.store,this._tryNormalizeValue(t),this.fieldDefinition.type);this._setValue(f.value,u);n.compareValues(e,f.value)||(o=this.workItem.evaluateField(this.fieldDefinition.id,!0,e),this._status|=f.status,r&&this.validateIdentityFieldValue(),i||this.workItem.fireFieldChange(o))},n.prototype.validateIdentityFieldValue=function(){var n=this,t;hi(this.fieldDefinition)&&this.isValid()&&(t=this.getValue(),this.workItem.beginValidate(this.fieldDefinition.id,function(){n.getValue()===t&&(n._error="")},function(i){n.isValid()&&n.getValue()===t&&(n._error=i.message,n._status=ht.FieldStatusFlags.InvalidIdentityField,n.workItem.fireFieldChange([n.fieldDefinition.id]))}))},n.prototype.isDirty=function(){var t=this.fieldDefinition.id,n=this.workItem.fieldUpdates.hasOwnProperty(t+"");if(!n)switch(t){case r.CoreField.IterationPath:n=this.workItem.fieldUpdates.hasOwnProperty(r.CoreField.IterationId+"");break;case r.CoreField.AreaPath:n=this.workItem.fieldUpdates.hasOwnProperty(r.CoreField.AreaId+"")}return n},n.prototype.isUserChange=function(){var n=this.workItem.fieldUpdates[this.fieldDefinition.id+""];return n?n.setByRule?(this._status&ht.FieldStatusFlags.SetByComputedRule)!==ht.FieldStatusFlags.None?!0:!1:!0:!1},n.prototype.isValid=function(){return(this._status&ht.FieldStatusFlags.InvalidMask)===ht.FieldStatusFlags.None},n.prototype.isHistoricalRevision=function(){return this.workItem.isReadOnly()},n.prototype.isEditable=function(){if(this.isHistoricalRevision()||!this.fieldDefinition.isEditable())return!1;var n=this.fieldDefinition.id;switch(n){case r.CoreField.Rev:case r.CoreField.WorkItemType:case r.CoreField.CreatedBy:return!1;case r.CoreField.AreaPath:n=r.CoreField.AreaId;break;case r.CoreField.IterationPath:n=r.CoreField.IterationId;break;default:return(this._status&ht.FieldStatusFlags.ReadOnly)===ht.FieldStatusFlags.None}return this.workItem.getField(n).isEditable()},n.prototype.isReadOnly=function(){return!this.isEditable()},n.prototype.isRequired=function(){var n=this.fieldDefinition.id;switch(n){case r.CoreField.IterationPath:n=r.CoreField.IterationId;break;case r.CoreField.AreaPath:n=r.CoreField.AreaId;break;default:return(this._status&ht.FieldStatusFlags.Required)!==ht.FieldStatusFlags.None}return this.workItem.getField(n).isRequired()},n.prototype.getErrorText=function(){return n.getFieldErrorText(this.fieldDefinition.name,this.getStatus(),this.getDisplayText(),this._error)},n.prototype.getStatus=function(){return n.getFieldStatus(this._status)},n.prototype.validate=function(n){this.customValidators=this.customValidators||[];this.customValidators.push(n)},n.prototype.hasList=function(){return(this._status&ht.FieldStatusFlags.HasValues)!==ht.FieldStatusFlags.None},n.prototype.isLimitedToAllowedValues=function(){return(this._status&ht.FieldStatusFlags.LimitedToValues)!==ht.FieldStatusFlags.None},n.prototype.getAllowedValues=function(){var t=this._allowedValues,i,f,e,s,r,u;if(!t){if(this.hasList()){if(i=this._lists,f=this.workItem.store,i.allowedValues&&i.allowedValues.length>0)for(t=n.unionLists(f,i.allowedValues[0].items,i.allowedValues[0].globals),r=1,u=i.allowedValues.length;r<u;r++)t=n.intersect(t,n.unionLists(f,i.allowedValues[r].items,i.allowedValues[r].globals),!0);if(i.suggestedValues&&i.suggestedValues.length>0){for(e=[],r=0,u=i.suggestedValues.length;r<u;r++)e=n.union(e,n.unionLists(f,i.suggestedValues[r].items,i.suggestedValues[r].globals),!0);t=t?n.intersect(t,e):e}if(i.allowExistingValue&&(s=this._getValue(!0),n.isEmpty(s)||(t=t?n.union(t,[n.convertValueToDisplayString(s)],!0):[n.convertValueToDisplayString(s)])),t&&i.prohibitedValues&&i.prohibitedValues.length>0)for(r=0,u=i.prohibitedValues.length;r<u;r++)t=n.subtract(t,n.unionLists(f,i.prohibitedValues[r].items,i.prohibitedValues[r].globals),!0)}t=t||[];n.isNumericField(this.fieldDefinition.type)?h.sortIfNotSorted(t,c.defaultComparer):h.sortIfNotSorted(t,o.localeIgnoreCaseComparer);this._allowedValues=t}return t},n.prototype.isChangedInRevision=function(n){var t=this.fieldDefinition.id,i,u,e,f;switch(t){case r.CoreField.AreaPath:case r.CoreField.NodeName:case r.DalFields.AreaLevel1:case r.DalFields.AreaLevel2:case r.DalFields.AreaLevel3:case r.DalFields.AreaLevel4:case r.DalFields.AreaLevel5:case r.DalFields.AreaLevel6:case r.DalFields.AreaLevel7:t=r.CoreField.AreaId;break;case r.CoreField.IterationPath:case r.DalFields.IterationLevel1:case r.DalFields.IterationLevel2:case r.DalFields.IterationLevel3:case r.DalFields.IterationLevel4:case r.DalFields.IterationLevel5:case r.DalFields.IterationLevel6:case r.DalFields.IterationLevel7:t=r.CoreField.IterationId;break;case r.CoreField.AuthorizedAs:t=r.DalFields.PersonID;break;case r.CoreField.IsDeleted:if(n===0)return!1;break;case r.CoreField.AttachedFileCount:case r.CoreField.HyperLinkCount:case r.CoreField.ExternalLinkCount:case r.CoreField.RelatedLinkCount:return null}return n===0?this.workItem.getFieldValueByRevision(t,n)!==null:this.workItem.getRevisions()[n-1]&&(i=this.workItem.getRevisions(),u=t+"",i[n-1].hasOwnProperty(u))?t!==r.CoreField.TeamProject?!0:(e=i[n-1][u],f=n<i.length?i[n][u]:this.workItem.getFieldValue(r.CoreField.TeamProject,!0),f!=undefined&&e!==f):!1},n.prototype._reset=function(){this._status=ht.FieldStatusFlags.None;this._allowedValues=null;this._lists=null},n.prototype._getValue=function(n,t){return this.workItem._getFieldValueById(this.fieldDefinition.id,n,t)},n.prototype._setValue=function(n,t){this.workItem._setFieldValueById(this.fieldDefinition.id,n,t)},n.prototype._tryNormalizeValue=function(t){if(t&&typeof t=="string"&&this.hasList()){var i=this.getAllowedValues();t=n.normalize(i,t)}return t},n}();t.Field=ct;i.initClassPrototype(ct,{workItem:null,fieldDefinition:null,_status:ht.FieldStatusFlags.None,_allowedValues:null,_lists:null,customValidators:null});ei=[ht.FieldStatusFlags.None,ht.FieldStatusFlags.InvalidEmpty,ht.FieldStatusFlags.InvalidNotEmpty,ht.FieldStatusFlags.InvalidFormat,ht.FieldStatusFlags.InvalidListValue,ht.FieldStatusFlags.InvalidOldValue,ht.FieldStatusFlags.InvalidNotOldValue,ht.FieldStatusFlags.InvalidEmptyOrOldValue,ht.FieldStatusFlags.InvalidNotEmptyOrOldValue,ht.FieldStatusFlags.InvalidValueInOtherField,ht.FieldStatusFlags.InvalidValueNotInOtherField,ht.FieldStatusFlags.InvalidDate,ht.FieldStatusFlags.InvalidTooLong,ht.FieldStatusFlags.InvalidType,ht.FieldStatusFlags.InvalidComputedField,ht.FieldStatusFlags.InvalidPath,ht.FieldStatusFlags.InvalidCharacters,ht.FieldStatusFlags.InvalidIdentityField];at=function(){function n(n,t){this.workItem=n;this.linkData=t;this.updated=!1;this.deleted=!1;this.baseLinkType="Link";this.comment=this.linkData.Comment;this.isLocked=this.linkData.Lock}return n.createFromLinkData=function(t,i){i=i||{};i.FldID||(i.FldID=r.DalFields.RelatedLinks);var u=i.FldID;switch(u){case r.DalFields.AttachedFiles:return new dt(t,i);case r.DalFields.LinkedFiles:return new fi(t,i);case r.DalFields.BISURI:return new ui(t,i);case r.DalFields.RelatedLinks:return new pt(t,i);default:return new n(t,i)}},n.prototype.setState=function(n){n?(this.comment=this.getComment(),this.isLocked=this.getIsLocked(),this.updated=!1,this.linkData.CommentChanged=!1,this.linkData.LockChanged=!1):this.updated=this.linkData.CommentChanged||this.linkData.LockChanged},n.prototype._fireChanged=function(){this.workItem.fireFieldChange([this.getFieldId()])},n.prototype.isNew=function(){return s.equals(lt.FutureDate,this.getAddedDate())},n.prototype.isRemoved=function(){return!s.equals(lt.FutureDate,this.getRemovedDate())},n.prototype.getComment=function(){return this.linkData.Comment},n.prototype.setComment=function(n,t){this.linkData.Comment=n;this.linkData.CommentChanged=!0;this.setState();t||this._fireChanged()},n.prototype.remove=function(n){var t=n&&n.preventEvent===!0;this.deleted=!0;t||(this.workItem.resetLinks(!0),this._fireChanged())},n.prototype.clone=function(){return null},n.prototype.getFieldId=function(){return this.linkData.FldID},n.prototype.getIsLocked=function(){return this.linkData.Lock||!1},n.prototype.setIsLocked=function(n){this.linkData.Lock=n;this.linkData.LockChanged=!0;this.setState();this._fireChanged()},n.prototype.getAddedDate=function(){return this.linkData.AddedDate},n.prototype.getRemovedDate=function(){return this.linkData.RemovedDate},n.prototype.setRemovedDate=function(n){this.linkData.RemovedDate=n},n.prototype.equals=function(n){var t,i,r;if(n&&this.baseLinkType===n.baseLinkType){for(t in this)if(t.substr(0,3)==="get"&&$.isFunction(this[t])&&(i=this[t].call(this),r=n[t].call(n),!ct.compareValues(i,r,!1)))return!1}else return!1;return!0},n.prototype.isDuplicate=function(n){return this.equals(n)},n.prototype.getArtifactLinkType=function(){return""},n.getCountFieldId=function(n){var t;switch(n){case r.DalFields.AttachedFiles:t=r.CoreField.AttachedFileCount;break;case r.DalFields.RelatedLinks:t=r.CoreField.RelatedLinkCount;break;case r.DalFields.LinkedFiles:t=r.CoreField.HyperLinkCount;break;case r.DalFields.BISURI:t=r.CoreField.ExternalLinkCount}return t},n}();t.Link=at;ui=function(n){function t(t,i){n.call(this,t,i);this.baseLinkType="ExternalLink"}return __extends(t,n),t.create=function(n,i,u,f){return new t(n,{OriginalName:i,FilePath:u,Comment:f||"",FldID:r.DalFields.BISURI,AddedDate:lt.FutureDate,RemovedDate:lt.FutureDate})},t.prototype.getArtifactLinkType=function(){return this.linkData.OriginalName},t.prototype.getLinkedArtifactUri=function(){return this.linkData.FilePath},t.prototype.clone=function(n){return t.create(n,this.getArtifactLinkType(),this.getLinkedArtifactUri(),this.getComment())},t.prototype.isDuplicate=function(n){if(n instanceof t){var i=n;return this.getFieldId()===i.getFieldId()&&o.equals(this.getLinkedArtifactUri(),i.getLinkedArtifactUri(),!0)&&o.equals(this.getArtifactLinkType(),i.getArtifactLinkType(),!0)}return!1},t}(at);t.ExternalLink=ui;fi=function(n){function t(t,i){n.call(this,t,i);this.baseLinkType="HyperLink"}return __extends(t,n),t.create=function(n,i,u){return new t(n,{OriginalName:"",FilePath:i,Comment:u||"",FldID:r.DalFields.LinkedFiles,AddedDate:lt.FutureDate,RemovedDate:lt.FutureDate})},t.prototype.getArtifactLinkType=function(){return"Workitem Hyperlink"},t.prototype.getLocation=function(){return this.linkData.FilePath},t.prototype.clone=function(n){return t.create(n,this.getLocation(),this.getComment())},t.prototype.isDuplicate=function(n){if(n instanceof t){var i=n;return this.getFieldId()===i.getFieldId()&&o.equals(this.getLocation(),i.getLocation(),!0)}return!1},t}(at);t.Hyperlink=fi;pt=function(n){function t(t,i){n.call(this,t,i);this.baseLinkType="WorkItemLink"}return __extends(t,n),t.create=function(n,i,u,f,e){var o,s;return typeof i=="object"?o=i.id:(s=n.store.findLinkTypeEnd(i),o=s.id),new t(n,{ID:u,LinkType:o,Comment:f||"",FldID:r.DalFields.RelatedLinks,"Changed Date":lt.FutureDate,"Revised Date":lt.FutureDate,isAddedBySystem:e})},t.prototype.getSourceId=function(){return this.workItem.id},t.prototype.getTargetId=function(){return this.linkData.ID},t.prototype.getAddedDate=function(){return this.linkData["Changed Date"]},t.prototype.getAddedBy=function(){return this.linkData["Changed By"]},t.prototype.getRemovedDate=function(){return this.linkData["Revised Date"]},t.prototype.setRemovedDate=function(n){this.linkData["Revised Date"]=n},t.prototype.getRemovedBy=function(){return this.linkData["Revised By"]||-1},t.prototype.getLinkType=function(){return this.linkData.LinkType},t.prototype.getLinkTypeEnd=function(){return this.linkTypeEnd||(this.linkTypeEnd=this.workItem.store.findLinkTypeEnd(this.getLinkType())),this.linkTypeEnd},t.prototype.clone=function(n){var r=this.getLinkTypeEnd(),i=r.linkType;if(i&&i.isActive&&i.topology!=="Unknown"&&!(i.isOneToMany&&r.isForwardLink))return t.create(n,r,this.getTargetId(),this.getComment())},t.prototype.isDuplicate=function(n){if(n instanceof t){var i=n;return this.getFieldId()===i.getFieldId()&&this.getLinkType()===i.getLinkType()&&this.getTargetId()===i.getTargetId()&&this.getSourceId()===i.getSourceId()}return!1},t}(at);t.WorkItemLink=pt;dt=function(n){function t(t,i){n.call(this,t,i);this.baseLinkType="Attachment";this.uploaded=!0}return __extends(t,n),t.prototype.getPlaceholderStatus=function(){return this.isPlaceholder},t.create=function(n,i,u,f,e,o,s,h){var c;return h?(c=new t(n,{OriginalName:i,Comment:"",ExtID:0,FldID:r.DalFields.AttachedFiles,Length:e,CreationDate:new Date,LastWriteDate:new Date,AddedDate:lt.FutureDate,RemovedDate:lt.FutureDate}),c.isPlaceholder=!0):(c=new t(n,{OriginalName:i,FilePath:u,Comment:f||"",ExtID:0,FldID:r.DalFields.AttachedFiles,Length:e,CreationDate:o||new Date,LastWriteDate:s||new Date,AddedDate:lt.FutureDate,RemovedDate:lt.FutureDate}),c.isPlaceholder=!1),c},t.prototype.resolvePlaceholder=function(n,t,i){this.isPlaceholder=!1;this.linkData.FilePath=n;t!=null&&(this.linkData.CreationDate=t);i!=null&&(this.linkData.LastWriteDate=i);this._fireChanged()},t.prototype.getName=function(){return this.linkData.OriginalName},t.prototype.setName=function(n){this.linkData.OriginalName=n;this._fireChanged()},t.prototype.getLength=function(){return this.linkData.Length},t.prototype.setLength=function(n){this.linkData.Length=n;this._fireChanged()},t.prototype.getFilePath=function(){return this.linkData.FilePath},t.prototype.setFilePath=function(n){this.linkData.FilePath=n;this._fireChanged()},t.prototype.getUri=function(n){var i=this.linkData.ExtID,t={fileName:this.getName()};return i?t.attachmentId=i:t.fileGuid=this.getFilePath(),n&&(t.contentOnly=!0),this.workItem.store.getApiLocation("DownloadAttachment",t)},t.prototype.open=function(){y.getService().performAction(y.CommonActions.ACTION_WINDOW_OPEN,{url:this.getUri(!0),target:"_blank"})},t.prototype.save=function(){y.getService().performAction(y.CommonActions.ACTION_WINDOW_OPEN,{url:this.getUri(!1),target:"_blank"})},t.prototype._uploadComplete=function(n,t,i){this.uploaded=!0;this.linkData.OriginalName=n;this.linkData.FilePath=t;this.linkData.Length=i;this._fireChanged()},t.prototype.isDuplicate=function(){return!1},t}(at);t.Attachment=dt,function(n){n[n.Value=1]="Value";n[n.CurrentValue=2]="CurrentValue";n[n.OriginalValue=4]="OriginalValue";n[n.OtherFieldCurrentValue=8]="OtherFieldCurrentValue";n[n.OtherFieldOriginalValue=16]="OtherFieldOriginalValue";n[n.CurrentUser=32]="CurrentUser";n[n.Clock=64]="Clock"}(vt||(vt={}));ai=function(){function n(n,t,i,r,u,f,e){this.executionPhase=ht.RuleEvaluatorExecutionPhase.DefaultRules;this.userChange=!1;this.valueLocked=!1;this.setByRule=!1;this.setByDefaultRule=!1;this.setByComputedRule=!1;this.readOnly=!1;this.empty=!1;this.required=!1;this.frozen=!1;this.cannotLoseValue=!1;this.otherField=!1;this.allowExistingValue=!1;this.validUser=!1;this.serverDefault=!1;this.isIdentityField=!1;this.fieldId=n;this.workItem=t;this.field=i;this.value=r;this.originalValue=u;this.valueLocked=f;this.userChange=f;this.evalState=e;this.isIdentityField=i.fieldDefinition.isIdentity}return n.compareLists=function(n,t){var r,i;if(n!==t){if(!n||!t||(r=n.length,r!==t.length))return!1;for(i=0;i<r;i++)if(n[i].items!==t[i].items||n[i].globals!==t[i].globals)return!1}return!0},n.compareFieldLists=function(t,i){return t!==i&&(!t||!i||t.allowExistingValue!==i.allowExistingValue||!n.compareLists(t.allowedValues,i.allowedValues)||!n.compareLists(t.suggestedValues,i.suggestedValues)||!n.compareLists(t.prohibitedValues,i.prohibitedValues))?!1:!0},n.prototype.setExecutionPhase=function(n){this.executionPhase=n},n.prototype.evaluate=function(n){n&&(this.setExecutionPhase(ht.RuleEvaluatorExecutionPhase.CopyRules),this.Block(n),this.setExecutionPhase(ht.RuleEvaluatorExecutionPhase.DefaultRules),this.Block(n),this.setExecutionPhase(ht.RuleEvaluatorExecutionPhase.OtherRules),this.Block(n));this.validate()},n.prototype.Block=function(n){for(var t=0,u=n.length,i,r;t<u;)i=n[t++],r=n[t++]||[],this[i].apply(this,r)},n.prototype.When=function(n,t,i,r,u){i=this._getValueFrom(r,i);var f=this._isIdentityField(t),e=r==vt.Value&&f;(ct.compareValues(this._getFieldValue(t,!1),i,!0,e)?!n:n)&&this.Block(u)},n.prototype.WhenWas=function(n,t,i,r,u){i=this._getValueFrom(r,i);var f=this._isIdentityField(t),e=r==vt.Value&&f;(ct.compareValues(this._getFieldValue(t,!0),i,!0,e)?!n:n)&&this.Block(u)},n.prototype.WhenChanged=function(n,t,i){(ct.compareValues(this._getFieldValue(t,!1),this._getFieldValue(t,!0),!0)?n:!n)&&this.Block(i)},n.prototype.WhenBecameNonEmpty=function(n,t,i){(ct.compareValues(this._getFieldValue(t,!0),null,!0)&&!ct.compareValues(this._getFieldValue(t,!1),null,!0)?!n:n)&&this.Block(i)},n.prototype.WhenRemainedNonEmpty=function(n,t,i){(ct.compareValues(this._getFieldValue(t,!0),null,!0)||ct.compareValues(this._getFieldValue(t,!1),null,!0)?n:!n)&&this.Block(i)},n.prototype.OtherField=function(n,t,i){this.executionPhase===ht.RuleEvaluatorExecutionPhase.OtherRules&&(this.otherField=this._getFieldValue(n,i),this.otherFieldCheck=t,t==="same-as"&&!this.userChange&&i&&(this.value=this.otherField,this.setByRule=!0))},n.prototype.Map=function(n,t,i,r){var a=this,s,u,c,f,o,l,e;this.executionPhase===ht.RuleEvaluatorExecutionPhase.CopyRules&&(s=this._getFieldValue(n,!1),t?(o=this.evalState[n+""],l=o&&o.prevValue!==undefined?o.prevValue:this._getFieldValue(n,!1),ct.compareValues(this._getFieldValue(n,!1),l,!0)||this.userChange||(i!=null&&$.each(i,function(n,t){return t.values&&$.each(t.values,function(n,i){if(ct.compareValues(s,i,!0))return e=t["case"],!1}),e?!1:void 0}),e===undefined||ct.compareValues(e,this.value,!0)||(this.value=e,this.valueLocked=!0,this.setByRule=!0))):(this.userChange||(i!=null&&$.each(i,function(n,t){if(ct.compareValues(s,t["case"],!0))return u=t,!1}),u||(u=r),u&&(c=!1,u.values&&$.each(u.values,function(n,t){if(ct.compareValues(t,a.value,!0))return c=!0,!1}),c||(u["default"]?h.contains(u.values,this.originalValue)?(this.value=this.originalValue,this.valueLocked=!0,this.setByRule=!0):ct.compareValues(u["default"],this.value,!0)||(this.value=u["default"],this.valueLocked=!0,this.setByRule=!0):(this.value=u.values&&u.values[0],this.valueLocked=!0,this.setByRule=!0)))),this.allowedValues||(this.allowedValues=[]),f=[],i!=null&&$.each(this._getAllowedValues(n),function(n,t){var r;$.each(i,function(n,i){if(ct.compareValues(t,i["case"],!0))return r=i,!1});r&&(f=ct.union(f,r.values,!0))}),r&&(f=ct.union(f,r.values,!0)),this.allowedValues.push({items:f})))},n.prototype.AllowExistingValue=function(){this.executionPhase===ht.RuleEvaluatorExecutionPhase.OtherRules&&(this.allowExistingValue=!0)},n.prototype.ReadOnly=function(){this.executionPhase===ht.RuleEvaluatorExecutionPhase.OtherRules&&(this.readOnly=!0,this.userChange||(this.value=this.originalValue,this.setByRule=!0))},n.prototype.Empty=function(){this.executionPhase===ht.RuleEvaluatorExecutionPhase.OtherRules&&(this.empty=!0,this.userChange||(this.value=undefined,this.setByRule=!0))},n.prototype.Required=function(){this.executionPhase===ht.RuleEvaluatorExecutionPhase.OtherRules&&(this.required=!0)},n.prototype.Frozen=function(){this.executionPhase===ht.RuleEvaluatorExecutionPhase.OtherRules&&(this.frozen=!0,!this.userChange&&this.originalValue&&(this.value=this.originalValue,this.setByRule=!0))},n.prototype.CannotLoseValue=function(){this.executionPhase===ht.RuleEvaluatorExecutionPhase.OtherRules&&(this.cannotLoseValue=!0)},n.prototype.ValidUser=function(){this.executionPhase===ht.RuleEvaluatorExecutionPhase.OtherRules&&(this.validUser=!0)},n.prototype.Copy=function(n,t){this.executionPhase===ht.RuleEvaluatorExecutionPhase.CopyRules&&(this.valueLocked||(this.value=this._getValueFrom(n,t),this.valueLocked=!0,this.setByRule=!0))},n.prototype.Default=function(n,t){this.executionPhase===ht.RuleEvaluatorExecutionPhase.DefaultRules&&(this.valueLocked||ct.isEmpty(this.value)&&(this.value=this._getValueFrom(n,t),this.valueLocked=!0,this.setByRule=!0,this.setByDefaultRule=!0))},n.prototype.AllowedValues=function(n,t){this.executionPhase===ht.RuleEvaluatorExecutionPhase.OtherRules&&(this.allowedValues||(this.allowedValues=[]),n&&h.flagSorted(n,o.localeIgnoreCaseComparer),this.allowedValues.push({items:n,globals:t}))},n.prototype.SuggestedValues=function(n,t){this.executionPhase===ht.RuleEvaluatorExecutionPhase.OtherRules&&(this.suggestedValues||(this.suggestedValues=[]),n&&h.flagSorted(n,o.localeIgnoreCaseComparer),this.suggestedValues.push({items:n,globals:t}))},n.prototype.ProhibitedValues=function(n,t){this.executionPhase===ht.RuleEvaluatorExecutionPhase.OtherRules&&(this.prohibitedValues||(this.prohibitedValues=[]),n&&h.flagSorted(n,o.localeIgnoreCaseComparer),this.prohibitedValues.push({items:n,globals:t}))},n.prototype.Match=function(n,t){this.executionPhase===ht.RuleEvaluatorExecutionPhase.OtherRules&&(this.patterns||(this.patterns=[]),n&&h.flagSorted(n,o.localeIgnoreCaseComparer),this.patterns.push({items:n,globals:t}))},n.prototype.ServerDefault=function(n){this.executionPhase===ht.RuleEvaluatorExecutionPhase.CopyRules&&(this.value=new wt(n,this.originalValue),this.serverDefault=!0,this.valueLocked=!0,this.setByRule=!0,this.setByDefaultRule=!0)},n.prototype.Computed=function(n){if(this.executionPhase===ht.RuleEvaluatorExecutionPhase.DefaultRules&&!this.valueLocked){var t=this.workItem.computeFieldValue(this.field,n);t&&t.success&&(this.value=t.value,this.valueLocked=!0,this.setByRule=!0,this.setByComputedRule=!0)}},n.prototype.Trigger=function(n){var t=this;this.executionPhase===ht.RuleEvaluatorExecutionPhase.OtherRules&&n&&(this.triggerFields||(this.triggerFieldMap={},this.triggerFields=[]),$.each(n,function(n,i){var r=i+"";t.triggerFieldMap.hasOwnProperty(r)||(t.triggerFieldMap[r]=!0,t.triggerFields.push(i))}))},n.prototype.validate=function(){var i,e,u,f,l,c,o,t=this.field,a,v,s,h;if(t._status=ht.FieldStatusFlags.None,o=t.workItem.store,s=ct.convertValueToInternal(o,this.originalValue,t.fieldDefinition.type),l=ct.convertValueToInternal(o,this.value,t.fieldDefinition.type),f=l.value,t._status|=l.status,this.setByRule&&(t._setValue(f,this.setByRule),t._status|=ht.FieldStatusFlags.SetByRule),this.setByDefaultRule&&(t._status|=ht.FieldStatusFlags.SetByDefaultRule),this.setByComputedRule&&(t._status|=ht.FieldStatusFlags.SetByComputedRule),(this.readOnly||this.serverDefault||this.empty)&&(t._status|=ht.FieldStatusFlags.ReadOnly),this.cannotLoseValue&&(ct.isEmpty(this.originalValue)||(this.required=!0)),this.required&&(t._status|=ht.FieldStatusFlags.Required),u={},u.allowedValues=this.allowedValues,this.allowedValues&&this.allowedValues.length>0&&(t._status|=ht.FieldStatusFlags.HasValues,t._status|=ht.FieldStatusFlags.LimitedToValues),u.suggestedValues=this.suggestedValues,this.suggestedValues&&this.suggestedValues.length>0&&(t._status|=ht.FieldStatusFlags.HasValues,t._status&=~ht.FieldStatusFlags.LimitedToValues),u.prohibitedValues=this.prohibitedValues,u.allowExistingValue=this.allowExistingValue,n.compareFieldLists(t._lists,u)||(t._lists=u,t._allowedValues=null),this.allowExistingValue&&(t._status|=ht.FieldStatusFlags.AllowsOldValue),this.patterns&&this.patterns.length>0)for(h=ct.unionLists(o,this.patterns[0].items,this.patterns[0].globals),i=1,e=this.patterns.length;i<e;i++)h=ct.intersect(h,ct.unionLists(o,this.patterns[i].items,this.patterns[i].globals),!0);if(t.patterns=h,h&&(t._status|=ht.FieldStatusFlags.HasFormats),ct.isEmpty(f)){if(!this.empty){if(t.isRequired()){t._status|=ht.FieldStatusFlags.Required;t._status|=ht.FieldStatusFlags.InvalidEmpty;return}if(typeof this.otherFieldCheck!="undefined")if(ct.isEmpty(this.otherField)){if(this.otherFieldCheck==="not-same-as"){t._status|=ht.FieldStatusFlags.Required;t._status|=ht.FieldStatusFlags.InvalidValueNotInOtherField;return}}else if(this.otherFieldCheck==="same-as"){t._status|=ht.FieldStatusFlags.Required;t._status|=ht.FieldStatusFlags.InvalidValueInOtherField;return}}return}if(this.empty){t._status&=~ht.FieldStatusFlags.ReadOnly;t._status|=ht.FieldStatusFlags.InvalidNotEmpty;return}if(this.readOnly&&!this.serverDefault&&!this.setByDefaultRule&&!ct.compareValues(f,s.value)){t._status|=ht.FieldStatusFlags.InvalidNotOldValue;return}if(typeof this.otherFieldCheck!="undefined")if(ct.compareValues(f,this.otherField)){if(this.otherFieldCheck==="not-same-as"){t._status|=ht.FieldStatusFlags.InvalidValueInOtherField;return}}else if(this.otherFieldCheck==="same-as"){t._status|=ht.FieldStatusFlags.InvalidValueNotInOtherField;return}if(this.frozen&&!ct.isEmpty(s.value)&&!ct.compareValues(f,s.value)){t._status|=ht.FieldStatusFlags.InvalidNotEmptyOrOldValue;return}if(t.fieldDefinition.type===r.FieldType.TreePath&&(v=t.fieldDefinition.id===r.CoreField.AreaPath?this.workItem.project.findAreaNodeByPath(f):this.workItem.project.findIterationNodeByPath(f),!v)){t._status|=ht.FieldStatusFlags.InvalidPath;return}if(!(this.serverDefault||f instanceof wt)){if(c=f===undefined||f===null?"":""+f,t.patterns){for(a=!1,i=0,e=t.patterns.length;i<e;i++)if(ct.isMatch(t.patterns[i],c)){a=!0;break}if(!a){t._status|=ht.FieldStatusFlags.InvalidFormat;return}}if(u.prohibitedValues)for(i=0,e=u.prohibitedValues.length;i<e;i++)if(ct.inList(o,c,u.prohibitedValues[i].items,u.prohibitedValues[i].globals,!0)){t._status|=ht.FieldStatusFlags.InvalidListValue;return}if(this.allowExistingValue&&!ct.isEmpty(s.value)&&ct.compareValues(f,s.value))return;if(u.allowedValues)for(i=0,e=u.allowedValues.length;i<e;i++)if(!ct.inList(o,c,u.allowedValues[i].items,u.allowedValues[i].globals,!0)){t._status|=ht.FieldStatusFlags.InvalidListValue;return}}},n.prototype._isIdentityField=function(n){var t=this.workItem.getField(n);return t&&t.fieldDefinition.isIdentity},n.prototype._getFieldValue=function(n,t){return n===this.fieldId?t?this.originalValue:this.value:this.workItem._getFieldValueById(n,t)},n.prototype._getValueFrom=function(n,t){switch(n){case vt.Clock:return new Date;case vt.CurrentUser:return this.workItem.store.getCurrentUser();case vt.OtherFieldOriginalValue:return this._getFieldValue(t,!0);case vt.OtherFieldCurrentValue:return this._getFieldValue(t,!1);case vt.Value:return t;case vt.CurrentValue:return this.value;case vt.OriginalValue:return this.originalValue;default:return t}},n.prototype._getAllowedValues=function(n){return this.workItem.getField(n).getAllowedValues()},n}();oi=function(){function n(n,t){var i,u;if(this.workItem=n,this.fieldRules={},t)for(i=0,u=t.length;i<u;i++){var f=t[i],e=f.fieldId+"",r=this.fieldRules[e];r||(this.fieldRules[e]=r=[]);r.push("Block");r.push([f.rules])}}return n.prototype.evaluateFields=function(n){var i={},t,r,u;if(n)for(t=0,r=n.length;t<r;t++)u=n[t],this._evaluateFieldRule(u,i,!1);return this._evalStateToChangedFields(i)},n.prototype.evaluateField=function(n,t,i){var r={};return this._evaluateFieldRule(n,r,t,i),this._evalStateToChangedFields(r)},n.prototype._evalStateToChangedFields=function(n){var t=[];for(var i in n)n.hasOwnProperty(i)&&t.push(+i);return t},n.prototype._evaluateFieldRule=function(n,t,i,r){var h=this,u=this.workItem.getField(n),f,e,o,s;u&&(f=n+"",e=u._getValue(),t[f]={state:!0,prevValue:r===undefined?e:r},o=new ai(n,this.workItem,u,e,u._getValue(!0),i||!1,t),o.evaluate(this.fieldRules[f]),s=i?!0:!ct.compareValues(e,u._getValue()),s&&o.triggerFields&&$.each(o.triggerFields,function(n,i){var r=t[i+""];r&&r.state||h._evaluateFieldRule(i,t,!1)}),t[f].state=!1)},n}();t.RuleEngine=oi;wt=function(){function n(n,t){this.type=ht.ServerDefaultValueType.None;this.type=n;this.value=t}return n.prototype.toString=function(){return""+this.value},n.prototype.valueOf=function(){return this.value},n}();t.ServerDefaultValue=wt;i.tfsModuleLoaded("TFS.WorkItemTracking",t)});
define("VersionControl/Scripts/TfvcClientService",["require","exports","Presentation/Scripts/TFS/TFS.Legacy.Ajax","VSS/Utils/Core","TFS/VersionControl/Contracts","VersionControl/Scripts/VersionControlClientServiceBase","VersionControl/Scripts/Generated/TFS.VersionControl.Legacy.Contracts","VersionControl/Scripts/TFS.VersionControl.WebApi","VSS/VSS","VersionControl/Scripts/TFS.VersionControl.VersionSpecs"],function(n,t,i,r,u,f,e,o,s,h){var c=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.initializeConnection=function(t){n.prototype.initializeConnection.call(this,t);this._projectInfoByName={};this._httpClient=t.getHttpClient(o.TfvcHttpClient)},t.prototype.beginGetProjectInfo=function(n,t,i){var u=this,r=this._projectInfoByName[n];if(s.queuedRequestHasResult(r)){t.call(this,r);return}s.queueRequest(this,this._projectInfoByName,n,t,i||s.handleError,function(t,i){u._httpClient.beginGetProjectInfo(n).then(function(n){t(n)},i)})},t.prototype.beginGetProjectInfos=function(n,t){var i=this;s.queueRequest(this,this,"_cachedProjects",n,t||s.handleError,function(n,t){i._httpClient.beginGetProjectInfos().then(function(t){n(t)},t)})},t.prototype._setProjectInfoFromViewData=function(n,t,i){this._projectInfoByName[n]=i;this._projectInfoByName[t]=i},t.prototype.beginGetHistory=function(n,t,f,e){var o=this,s={repositoryId:n.getRepositoryId()||"",searchCriteria:r.stringifyMSJSON(t)};i.postMSJSON(this._getApiLocation("history"),s,function(n){$.each(n.results,function(n,t){o._processChangeList(t.changeList)});t.excludeDeletes&&(n.results=$.grep(n.results,function(n){return(n.itemChangeType&u.VersionControlChangeType.Delete)!=0?!1:!0}));$.isFunction(f)&&f.call(o,n)},e)},t.prototype.beginGetChangesets=function(n,t,r,u){i.getMSJSON(this._getApiLocation("changesets"),{path:n,version:t},r,u)},t.prototype.beginCreateChangeset=function(n,t,i){this._httpClient.beginCreateChangeset(n).then(function(n){$.isFunction(t)&&t(n)},i||s.handleError)},t.prototype.beginCreateProjectFolder=function(n,t,r){i.postHTML(this._getApiLocation("createProjectFolder"),{projectUri:n},t,r)},t.prototype.beginGetShelvesets=function(n,t,r){i.getMSJSON(this._getApiLocation("shelvesets"),{owner:n},t,r)},t.prototype.beginGetAnnotateTfsDiffs=function(n,t,u){i.postMSJSON(this._getApiLocation("annotateTfsDiffs"),{annotateDiffParameters:r.stringifyMSJSON(n)},t,u)},t.prototype.beginGetItem=function(n,i,r,u,f,o){var a=this,h,c=u&&u.recursionLevel?u.recursionLevel:e.VersionControlRecursionType.None,v=u&&u.includeContentMetadata,l;c!==e.VersionControlRecursionType.None&&(h=i,i="");v?this.beginGetItems(n,[{version:r,path:h||i}],u,function(n){if($.isFunction(f)){var t;n&&n.length&&(t=n[0]);f(t)}},o):(l=null,r&&(l=t.tfvcVersionStringToVersionDescriptor(r)),this._httpClient.beginGetItem(i,h,l,c,"",!1).then(function(n){var t;t=$.isArray(n)?a._tfvcItemArrayToLegacyItemModel(n,c):a._tfvcItemArrayToLegacyItemModel([n]);$.isFunction(f)&&f(t)},o||s.handleError))},t.prototype.beginGetItems=function(n,i,r,u,f){var h=this,o=r&&r.recursionLevel?r.recursionLevel:e.VersionControlRecursionType.None,c={includeContentMetadata:r?r.includeContentMetadata:!1,includeLinks:null,itemDescriptors:$.map(i,function(n){var i=t.tfvcVersionStringToVersionDescriptor(n.version);return{path:n.path,version:i.version,versionOption:i.versionOption,versionType:i.versionType,recursionLevel:o}})};return this._httpClient.beginGetItemsBatch(c).then(function(n){var t=[];$.each(n,function(n,i){t.push(h._tfvcItemArrayToLegacyItemModel(i,o))});$.isFunction(u)&&u(t)},f||s.handleError)},t.prototype._tfvcItemArrayToLegacyItemModel=function(n,t){var o=this,r,i,u,f;return n&&n.length&&(i=n[0],u=null,u=i.isPendingChange?h.VersionSpec.tfvcFromUri(i.url).toVersionString():"C"+i.version,r={changeDate:i.changeDate,changeset:i.version,contentMetadata:this._newFileContentMetadataToLegacyFileContentMetadata(i.contentMetadata),deletionId:i.deletionId,isBranch:i.isBranch,isFolder:i.isFolder,isPendingChange:i.isPendingChange,isSymLink:i.isSymLink,serverItem:i.path,url:i.url,version:u,versionDescription:i.version?i.version.toString():null},(n.length>1||t&&t!==e.VersionControlRecursionType.None)&&(f=t===e.VersionControlRecursionType.Full?e.VersionControlRecursionType.Full:null,r.childItems=$.map(n.slice(1),function(n){return o._tfvcItemArrayToLegacyItemModel([n],f)}))),r},t.prototype._newFileContentMetadataToLegacyFileContentMetadata=function(n){var i,t;if(n)return n.extension&&(t=n.extension.lastIndexOf("."),i=t>-1?n.extension.substr(t+1):n.extension),{contentType:n.contentType,encoding:n.encoding,extension:i,fileName:n.fileName,isBinary:n.isBinary,isImage:n.isImage,vsLink:n.vsLink}},t.tfvcVersionStringToVersionDescriptor=function(n){var i=h.VersionSpec.parse(n);return t.versionSpecToVersionDescriptor(i)},t.versionSpecToVersionDescriptor=function(n){var i={},r;return n instanceof h.LatestVersionSpec?i.versionType=u.TfvcVersionType.Latest:n instanceof h.TipVersionSpec?(i=t.versionSpecToVersionDescriptor(n.version),n.version instanceof h.ShelvesetVersionSpec&&(i.version="S"+i.version),i.versionType=u.TfvcVersionType.Tip):n instanceof h.PreviousVersionSpec?(i=t.versionSpecToVersionDescriptor(n.version),i.versionOption=u.TfvcVersionOption.Previous):n instanceof h.ChangesetVersionSpec?(i.versionType=u.TfvcVersionType.Changeset,i.version=n.changeset):n instanceof h.ChangeVersionSpec?(i.versionType=u.TfvcVersionType.Change,i.version=n.changeset):n instanceof h.MergeSourceVersionSpec?(i.versionType=u.TfvcVersionType.MergeSource,i.version=n.changeset.toString(),i.versionOption=n.useRenameSource?u.TfvcVersionOption.UseRename:u.TfvcVersionOption.None):n instanceof h.ShelvesetVersionSpec?(i.versionType=u.TfvcVersionType.Shelveset,r=n,i.version=r.name+(r.owner?";"+r.owner:"")):n instanceof h.DateVersionSpec?(i.versionType=u.TfvcVersionType.Date,i.version=n.date):i.versionType=u.TfvcVersionType.Latest,i},t.prototype.beginGetPullRequests=function(){},t.prototype.beginGetPullRequest=function(){},t.prototype.beginCreatePullRequest=function(){},t.prototype.beginUpdatePullRequest=function(){},t.prototype.beginUpdatePullRequestReviewer=function(){},t.prototype.beginAddPullRequestReviewer=function(){},t.prototype.beginDeletePullRequestReviewer=function(){},t.prototype.beginGetPullRequestWorkItemsResourceRef=function(){},t.prototype.beginGetReferencedWorkItems=function(){},t.prototype.beginGetPullRequestPingEmail=function(){},t}(f.VersionControlClientServiceBase);t.TfvcClientService=c});
define("Chat/Chat/Scripts/TFS.ChatRoom.Controls",["require","exports","VSS/VSS","VSS/Utils/Html","Presentation/Scripts/TFS/TFS.Host.TfsContext","Alerts/Scripts/TFS.Alerts","Alerts/Scripts/Resources/TFS.Resources.Alerts","VSS/Controls","Chat/Chat/Scripts/Resources/TFS.Resources.Chat","VSS/Resources/VSS.Resources.Platform","VSS/Resources/VSS.Resources.Common","VSS/Controls/Combos","VSS/Controls/Panels","VSS/Controls/Notifications","VSS/Controls/Dialogs","VSS/Controls/StatusIndicator","Admin/Scripts/Resources/TFS.Resources.Admin","VSS/Utils/Core","VSS/Utils/Culture","VSS/Utils/String","VSS/Utils/Date","VSS/Utils/Number","VSS/Diag","Presentation/Scripts/TFS/TFS.IdentityImage","VSS/Controls/Navigation","VSS/Navigation/Services","VSS/Controls/Splitter","VSS/Utils/UI","Admin/Scripts/TFS.Admin.Common","Admin/Scripts/TFS.Admin.Security","Presentation/Scripts/TFS/TFS.OM.Common","VSS/Controls/Menus","VSS/Controls/TreeView","Chat/Chat/Scripts/TFS.ChatRoom","Chat/Chat/Scripts/TFS.ChatRoom.Renderers","Chat/Chat/Scripts/TFS.ChatRoom.Utils","Presentation/Scripts/TFS/Generated/TFS.ChatRoom.Constants","VSS/Controls/Validation","WorkItemTracking/Scripts/TFS.WorkItemTracking","VersionControl/Scripts/GitClientService","VersionControl/Scripts/TfvcClientService","Presentation/Scripts/TFS/Generated/TFS.WorkItemTracking.Constants","VSS/Service","TFS/Build/RestClient","TFS/Build/Contracts","VSS/Common/Contracts/Platform","jQueryUI/autocomplete","jQueryUI/dialog","jQueryUI/tabs"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,dt,gt,ni,ti,ii,ri){function oi(){return gi||(gi=ht.Application.getDefaultConnection().getService(at.ChatRoomService)),gi}var ei=b.delegate,lr=l.DatePicker,ar=y.Dialog,fi=u.TfsContext.getDefault(),ci=at.ChatConstants.PAGE_SIZE,si=yt.ChatPreferences,hr=i.getErrorMessage,hi=et.domElem,gi,ai,nr,tr,ui,vi,yi,pi,wi,ir,rr,ur,fr,bi,er,ki,li,di,cr,or,sr;t.getChatService=oi;$(window).bind("keydown",function(n){if(n.keyCode===et.KeyCode.ESCAPE)return n.preventDefault(),!1});nr=function(){function n(){this._roomTitle=document.title;this._isNotificationOn=!1;this._isTranscriptInFocus=!1;this._isDialogInFocus=!1;this._notificationCount=0;this._toggleTitleTimer=null;this._attachWindowEvents()}return n.prototype.attachNotificationEvents=function(){var n=this;this._eventManager=at.ChatRoomEventManager.GetInstance();this._eventManager.attachEvent(at.ChatRoomEvent.NOTIFY_ROOM,function(t,i){si.isAudioNotificationOn()&&n._playNotifySound();n._isNotificationOn&&(n._notificationCount++,n._updateTitle(i.userMentioned))});this._eventManager.attachEvent(at.ChatRoomEvent.ROOM_NOTIFICATION_UPDATE,function(t,i){i.notificationOn?(n._toggleTitleNotifications(!0),i.context==="dialog"?n._isDialogInFocus=!0:n._isTranscriptInFocus=!0):i.context==="dialog"?(n._isDialogInFocus=!1,n._isTranscriptInFocus||n._toggleTitleNotifications(!1)):(n._isTranscriptInFocus=!1,n._isDialogInFocus||n._toggleTitleNotifications(!1))})},n.prototype._attachWindowEvents=function(){var n=this;$(window).focus(function(){n._isTranscriptInFocus||n._isDialogInFocus||n._toggleTitleNotifications(!1)});$(window).blur(function(){n._toggleTitleNotifications(!0)})},n.prototype._toggleTitleNotifications=function(n){var t=this;n?this._isNotificationOn=!0:(this._isNotificationOn=!1,this._resetNotifications(),b.delay(this,200,function(){document.title=t._roomTitle}))},n.prototype._resetNotifications=function(){this._notificationCount=0;this._toggleTitleTimer!==null&&(window.clearInterval(this._toggleTitleTimer),this._toggleTitleTimer=null)},n.prototype._playNotifySound=function(){n.notificationSound||(n.notificationSound=$("#notificationSound")[0]);try{n.notificationSound&&n.notificationSound.readyState&&n.notificationSound.play()}catch(t){}},n.prototype._updateTitle=function(t){var r=this,i;this._toggleTitleTimer||(t?(i=!1,this._toggleTitleTimer=window.setInterval(function(){i?(document.title=s.MentionMessage,i=!1):(document.title=r._getDefaultNotificationTitle(),i=!0)},n.NotificationToggleTime)):document.title=this._getDefaultNotificationTitle())},n.prototype._getDefaultNotificationTitle=function(){return d.format("({0}) {1}",this._notificationCount,this._roomTitle)},n.prototype.setTitle=function(t){var i=this;this._resetNotifications();this._roomTitle=t+" - "+n.defaultTitle;b.delay(this,200,function(){document.title=i._roomTitle})},n.defaultTitle=document.title,n.notificationSound=$("#notificationSound")[0],n.NotificationToggleTime=500,n}();t.ChatRoomNotificationManager=nr;tr=new nr;ui=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(i){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:t.coreCssClass},i))},t.prototype.initialize=function(){var n=this,i=this.getElement(),r,t;this._options.test=this._options.test!==undefined?this._options.test:!1;this._options.test?(this._options.pageSize!==undefined&&(ci=this._options.pageSize),fi.currentIdentity=this._options.tfsContext.currentIdentity,fi.getIdentityImageUrl=this._options.tfsContext.getIdentityImageUrl,this._me=new at.Member(this._options.me.displayName,this._options.me.id,at.ChatConstants.ONLINE),this._chatRoomModel=this._options.testModel,at.tfsContext=fi,at.ChatRoomModel.selectedCollectionName="DefaultCollection",at.setCollectionScopedTfsContexts({DefaultCollection:fi}),window.location.hash="collectionName=DefaultCollection"):(this._me=new at.Member(fi.currentIdentity.displayName,fi.currentIdentity.id,at.ChatConstants.ONLINE),this._chatRoomModel=new at.ChatRoomModel(this._options));this._eventManager=at.ChatRoomEventManager.GetInstance();tr.attachNotificationEvents();this.setRoomTitle(this._options.RoomName);si.initializeChatPreferences(this._options);this._splitter=o.BaseControl.createIn(ft.Splitter,i,{fixedSide:"right",vertical:!1});$("<div>").addClass("toolbar").appendTo(i);r=this.getServiceAccountId(this._options.CollectionRoomsData,at.ChatRoomModel.selectedCollectionName);t={splitter:this._splitter,chatRoomModel:this._chatRoomModel,CanManageUsers:this._options.CanManageUsers,Members:this._options.Members,RoomId:this._options.RoomId,RoomName:this._options.RoomName,ServiceAccountId:r};this._historyChatControl=o.BaseControl.createIn(yi,this._element,t);this._liveChatControl=o.BaseControl.createIn(pi,this._element,t);this._eventManager.attachEvent(at.ChatRoomEvent.ON_NEW_DAY_BEGIN,function(t,i){n._onNewDayBegin(i.newDate)});this._eventManager.attachEvent(at.ChatRoomEvent.CONNECTION_FAILURE,function(t,i){n._connectionTimeout&&(clearTimeout(n._connectionTimeout),n._connectionTimeout=null);i.stopConnection&&n._chatRoomModel.stop(!0)});this._eventManager.attachEvent(at.ChatRoomEvent.CONNECTION_SUCCESS,function(){n._connectionTimeout&&(clearTimeout(n._connectionTimeout),n._connectionTimeout=null)});this._createNavigationToolbar(this._createNavigationToolbarItems(),function(t){n._onNavigationToolbarItemClick(t)});this._createChatPreferencesToolbar(this._createChatPreferencesToolbarItems(),function(t){n._onChatPreferencesToolbarItemClick(t)})},t.prototype.getServiceAccountId=function(n,t){var r=n[t],u,i;return r||(u=Object.keys(n),i="",$.each(u,function(n,r){if(d.ignoreCaseComparer(r,t)===0)return i=r,!1}),i&&(r=n[i])),r.Data.ServiceAccountId},t.prototype.setRoomTitle=function(n){$(".chatroom-header .chat-room-title").text(n).attr("title",n);tr.setTitle(n)},t.prototype._onNewDayBegin=function(n){this._selectedDate=n;this.setSelectedDate(n);this._liveChatControl.setSelectedDate(n);this._synchronizeDatePicker()},t.prototype._displayError=function(n){this._historyChatControl.chatControl.clearChatAndShowStatusIndicator();this._historyChatControl.showChatSession();this._historyChatControl.chatControl.displayError(n);this._historyChatControl.chatControl.showChatBox()},t.prototype._clearError=function(){$(".transcript-error",this._element).empty()},t.prototype.navigateToDate=function(n,i){var r=this;(this._action=n,this._isLive=n==t.ACTION_TODAY,this._setIdleTimeoutEvents(),this._validateDate(i))&&(this._synchronizeDatePicker(),this._setToolbarStyle(),this._updateChatSessionControls(),this._connectionTimeout&&(clearTimeout(this._connectionTimeout),this._connectionTimeout=null),this._chatRoomModel.isConnected()||(this._connectionTimeout=setTimeout(function(){r._eventManager.fireEvent(at.ChatRoomEvent.CONNECTION_FAILURE,r,{error:s.ErrorChatRoomConnectionFailure,stopConnection:!0,silent:r.getModel().isConnectionSilent()})},t.CONNECTION_TIME_OUT_DELAY)),this._connectToCollectionHub())},t.prototype._connectToCollectionHub=function(){var n=this;t.getCollectionContext().done(function(t){n._currentlyConnectedCollectionName&&d.localeIgnoreCaseComparer(t,n._currentlyConnectedCollectionName)===0||(n._currentlyConnectedCollectionName=t,at.ChatRoomModel.getCollectionIdFromName(t).done(function(t){n._chatRoomModel.connect(t)}))})},t.getCollectionContext=function(){var n=$.Deferred(),i=t.getCollectionNameFromUrl();return i.length>0?n.resolve(i):at.ChatRoomModel.getCollectionsData().done(function(t){t===undefined||t.length===0?(at.ChatRoomErrorManager.GetInstance().showError(s.NoCollectionExist),n.reject("")):ai&&ai.CollectionName.length>0?n.resolve(ai.CollectionName):n.resolve(t[0].name)}),n.pipe()},t.getWindowHash=function(){return window.location.hash.substring(1)},t.getCollectionNameFromUrl=function(){var i=ut.getHistoryService(),n=i.getCurrentState(),t="";return n&&n.collectionName&&(t=decodeURIComponent(n.collectionName.replace(/\+/g,"%20"))),t},t.prototype._setIdleTimeoutEvents=function(){var n=this;$(window).bind("focus mouseover",function(){n._clearIdleTimeout()});$(window).bind("blur mouseleave",function(){n._setIdleTimeout()})},t.prototype._clearIdleTimeout=function(){this._idleTimeout&&(clearTimeout(this._idleTimeout),this._idleTimeout=null)},t.prototype._setIdleTimeout=function(){var n=this;this._idleTimeout||(this._idleTimeout=setTimeout(function(){n._isLive&&(n._liveChatControl.errorManager.showError(s.ErrorChatRoomIdleTimeout),n._liveChatControl.getChatControl().disable());n._chatRoomModel.stop(!0)},this._options.CollectionRoomsData[at.ChatRoomModel.selectedCollectionName].Data.IdleTimeout))},t.prototype._synchronizeDatePicker=function(){g.defaultComparer(this._getDatePickerSelectedDate(),this._selectedDate)!==0&&this._datePicker.getBehavior().setSelectedDate(this._selectedDate,!1)},t.prototype._updateChatSessionControls=function(){this._liveChatControl.attachEventhandlers();this._historyChatControl.attachEventhandlers();this._historyChatControl.hideChatSession();this._liveChatControl.hideChatSession();this._historyChatControl.updateAction(this._action);this._liveChatControl.updateAction(this._action)},t.prototype._updateCommandState=function(n,t){var i=this._navigationToolbar.getItem(n);i.update(t)},t.prototype._setToolbarStyle=function(){this._isLive?this._updateCommandState(t.CMD_TODAY,{id:t.CMD_TODAY,text:s.Live,noIcon:!0,disabled:!0}):this._updateCommandState(t.CMD_TODAY,{id:t.CMD_TODAY,text:s.Live,noIcon:!0});g.isGivenDayInPast(this._selectedDate)?this._updateCommandState(t.CMD_NEXT_DAY,{id:t.CMD_NEXT_DAY,icon:"icon-next"}):this._updateCommandState(t.CMD_NEXT_DAY,{id:t.CMD_NEXT_DAY,icon:"icon-next",disabled:!0})},t.prototype._validateDate=function(n){var t=g.getTodayInUserTimeZone();if(this._isLive)this._selectedDate=t;else if(this._selectedDate=n.date?g.parseDateString(n.date,"MM/dd/yy",!0):t,!this._selectedDate)return this._historyChatControl.hideChatSession(),this._liveChatControl.hideChatSession(),this._displayError(s.InvalidDateMessage),!1;return this.setSelectedDate(this._selectedDate),!0},t.prototype.isLive=function(){return this._isLive},t.prototype.getModel=function(){return this._chatRoomModel},t.prototype.dispose=function(){at.ChatRoomEventManager.dispose();this._connectionTimeout&&(clearTimeout(this._connectionTimeout),this._connectionTimeout=null);this._chatRoomModel.stop(!0);this._liveChatControl.dispose();this._historyChatControl.dispose();n.prototype.dispose.call(this)},t.prototype._createNavigationToolbar=function(n,t){this._navigationToolbar=o.BaseControl.createIn(ct.MenuBar,$(".chatroom-header .toolbar"),{items:n,orientation:"horizontal",executeAction:function(n){t(n)}});var i=$(".chatroom-header .toolbar .menu-bar .menu-item"),r=i.eq(1);r.addClass("date-selector");i.eq(3).addClass("live-menu");this._$pickedDate=$("<div>").appendTo(r);this._$pickedDate.addClass("date-time");this._datePicker=o.Enhancement.enhance(l.DatePicker,this._$pickedDate,{type:"date-time",dropOptions:{host:this._$pickedDate,canTakeFocus:!0},getInitialDate:ei(this,this._getInitialDate),change:ei(this,this._onSelectedDateChanged),dropShow:ei(this,this._onDropOpened)})},t.prototype._createNavigationToolbarItems=function(){return[{id:t.CMD_PREVIOUS_DAY,icon:"icon-prev"},{id:t.CMD_PICK_A_DATE,text:s.PickADate,noIcon:!0},{id:t.CMD_NEXT_DAY,icon:"icon-tfs-right"},{id:t.CMD_TODAY,text:s.Live,noIcon:!0}]},t.prototype._onNavigationToolbarItemClick=function(n){var i=n.get_commandName(),r,u;switch(i){case t.CMD_PREVIOUS_DAY:r=g.addDays(this._getDatePickerSelectedDate(),-1,!0);this._setDateAndNavigate(r);break;case t.CMD_PICK_A_DATE:this._datePicker.toggleDropDown();break;case t.CMD_NEXT_DAY:u=g.addDays(this._getDatePickerSelectedDate(),1,!0);this._setDateAndNavigate(u);break;case t.CMD_TODAY:this._setDateAndNavigate(g.getTodayInUserTimeZone())}},t.prototype._createChatPreferencesToolbar=function(n,t){var i=this.getElement();this._preferencesToolbar=o.BaseControl.createIn(ct.MenuBar,$(".chatroom-header .chat-preferences"),{items:n,orientation:"horizontal",executeAction:function(n){t(n)}})},t.prototype._createChatPreferencesToolbarItems=function(){var n=si.isAudioNotificationOn()?"icon-audio-on":"icon-audio-off",i=si.isAudioNotificationOn()?s.SoundIconOffTitle:s.SoundIconOnTitle;return[{id:t.ACTION_TOGGLE_AUDIO_NOTIFICATION,icon:n,showText:!1,title:i}]},t.prototype._onChatPreferencesToolbarItemClick=function(n){var i=n.get_commandName();oi().beginGetCollectionProperties(at.ChatRoomModel.selectedCollectionName,function(r){var u=fi.getCollectionTfsContext(r.serviceHost);switch(i){case t.ACTION_TOGGLE_AUDIO_NOTIFICATION:si.isAudioNotificationOn()?(si.toggleAudioNotificationState(u,!1),$(".icon",n._commandSource._element).removeClass("icon-audio-on").addClass("icon-audio-off").attr("title",s.SoundIconOnTitle)):(si.toggleAudioNotificationState(u,!0),$(".icon",n._commandSource._element).removeClass("icon-audio-off").addClass("icon-audio-on").attr("title",s.SoundIconOffTitle))}})},t.prototype._getDatePickerSelectedDate=function(){var n=this._datePicker.getBehavior().getSelectedDate();return n?n:g.getTodayInUserTimeZone()},t.prototype._setDateAndNavigate=function(n){var i=$(".date-selector .text"),t=g.parseDateString(i.text());this.setSelectedDate(n);n?this._datePicker.getBehavior().setSelectedDate(n):t?this._datePicker.getBehavior().setSelectedDate(t):this._datePicker.getBehavior().setSelectedDate(g.getTodayInUserTimeZone())},t.prototype.setSelectedDate=function(n){var t=$(".date-selector .text");t.text(g.localeFormat(n,k.getDateTimeFormat().ShortDatePattern,!0));this._historyChatControl.setSelectedDate(n)},t.prototype._onFocusOutOfDatePanel=function(n){var i=$(".date-panel"),t;i.has(n.target).length==0&&(t=this._datePicker.getBehavior(),t&&t.isDropVisible()&&this._datePicker.toggleDropDown(),$(document).unbind("mouseup",ei(this,this._onFocusOutOfDatePanel)))},t.prototype._onDropOpened=function(n){$(document).bind("mouseup",ei(this,this._onFocusOutOfDatePanel,n))},t.prototype._getInitialDate=function(){return this._selectedDate?this._selectedDate:g.getTodayInUserTimeZone()},t.prototype._onSelectedDateChanged=function(n){tt.logTracePoint("ChatRoom.DatePicker.OnDateSelected");var i=n.getBehavior().getSelectedDate();this.setSelectedDate(i);$(document).unbind("mouseup",ei(this,this._onFocusOutOfDatePanel));g.isGivenDayToday(i)?ut.getHistoryService().addHistoryPoint(t.ACTION_TODAY,this._createState({})):ut.getHistoryService().addHistoryPoint(t.ACTION_TRANSCRIPT,this._createState({date:g.localeFormat(i,"MM/dd/yy",!0)}))},t.prototype._createState=function(n){return $.extend({date:null},n)},t.coreCssClass="chatroom-view",t.CMD_MANAGE_USERS="manage-users",t.CMD_CONFIGURE_EVENTS="configure-events",t.CMD_TODAY="today-transcript",t.CMD_NEXT_DAY="next-day-transcript",t.CMD_PREVIOUS_DAY="previous-day-transcript",t.CMD_PICK_A_DATE="pick-a-date",t.ACTION_TODAY="today",t.ACTION_TRANSCRIPT="transcript",t.ACTION_TOGGLE_AUDIO_NOTIFICATION="toggle-audio-notifications",t.CONNECTION_TIME_OUT_DELAY=3e4,t}(o.BaseControl);t.ChatRoomControl=ui;vi=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:wi.coreCssClass},t))},t.prototype.initialize=function(){var n=this;this.members={};this.chatRoomModel=this._options.chatRoomModel;this.eventManager=at.ChatRoomEventManager.GetInstance();this.errorManager=at.ChatRoomErrorManager.GetInstance();this._splitter=this._options.splitter;this._removedUsers={};this.chatControl=o.BaseControl.createIn(wi,this._splitter.leftPane,{showInput:this._options.showInput,members:this._options.Members});this.membersListControl=o.BaseControl.createIn(ir,this._splitter.rightPane);this.membersListControl.createToolbar(this._createManageToolbarItems(),function(t){n._onManageToolbarItemClick(t)});this.hideChatSession();$(window).resize(function(){n.chatControl.scrollToBottom()})},t.prototype.hideChatSession=function(){},t.prototype.showChatSession=function(){},t.prototype.onChatLoaded=function(){this.chatControl.showChatBox();this.chatControl.scrollToBottom()},t.prototype.dispose=function(){this.chatControl.dispose();n.prototype.dispose.call(this)},t.prototype.updateAction=function(n){this.action=n},t.prototype.buildMessageModel=function(n){var t=this.getMember(n.postedByUserTfId,n.postedByUserName);return new at.Message(n.id,n.content,n.messageType,n.postedTime,t,n.mentions)},t.prototype.buildMessageModels=function(n){var t=this;return $.map(n,function(n){return t.buildMessageModel(n)})},t.prototype.loadChat=function(n){var t=[];this.onChatLoaded();t=this.buildMessageModels(n);this.chatControl.renderMessages(t);tt.logTracePoint("ChatRoom.ChatRoomControl.LoadChat.Complete")},t.prototype.getChatControl=function(){return this.chatControl},t.prototype.getSelectedDate=function(){return this.selectedDate},t.prototype.getMembersListControl=function(){return this.membersListControl},t.prototype.getChatRoomModel=function(){return this.chatRoomModel},t.prototype.attachEventhandlers=function(){var n=this;this.eventsAttached||(this.eventManager.attachEvent(at.ChatRoomEvent.CONNECTION_SUCCESS,function(){n.onConnectionStart()}),this.eventManager.attachEvent(at.ChatRoomEvent.CONNECTION_FAILURE,function(t,i){n._onConnectionError(i)}))},t.prototype.hasMember=function(n){return n in this.members},t.prototype.onConnectionStart=function(){this.onChatLoadInit()},t.prototype.initializeMembers=function(){$.isArray(this._options.Members)&&this._loadMembersInBatches()},t.prototype._loadBatch=function(n,t){for(var i,r,u=n;u<t;u++)if(i=this._options.Members[u],i){if(this._removedUsers[i.id]!==undefined){delete this.members[i.id];continue}r=this.members[i.id];r||(r=new at.Member(i.displayName,i.id,at.ChatConstants.OFFLINE,i.HasAvatar),this.members[r.TfId]=r);this.membersListControl.addMember(r,!1,!0)}},t.prototype._loadMembersInBatches=function(){var i=this,r=0,n=Math.min(this._options.Members.length,t.LOAD_USER_BATCH_SIZE),u;this._loadBatch(r,n);this.membersListControl.addBatchSpinner();u=setInterval(function(){if(i.membersListControl.isAwayContainerExpanded()){if(n<i._options.Members.length)r=n,n+=t.LOAD_USER_BATCH_SIZE,n=Math.min(i._options.Members.length,n);else{clearInterval(u);i.membersListControl.deleteBatchSpinner();return}i._loadBatch(r,n)}},500)},t.prototype.handleMessage=function(n,t){t===void 0&&(t=!0);var i=this.buildMessageModel(n);this.chatControl.renderMessage(i,t)},t.prototype.getMember=function(n,t){return this.hasMember(n)?this.members[n]:new at.Member(t,n)},t.prototype._onConnectionError=function(n){n&&!n.silent&&n.error&&this.errorManager.showError(n.error);this.membersListControl.clearStatusIndicator()},t.prototype.onMessageSendError=function(n){n&&!n.silent&&n.error&&this.errorManager.showError(n.error.error)},t.prototype.onMembersRetrieveFailure=function(n){n&&!n.silent&&n.error&&this.errorManager.showError(n.error)},t.prototype.onChatLoadFailure=function(n){n&&!n.silent&&n.error&&this.errorManager.showError(n.error)},t.prototype.onChatLoadInit=function(){$(".initial-load-container",".rooms-view-right-pane").remove()},t.prototype.updateMember=function(n,t,i,r){r===void 0&&(r=!0);var u=this.members[n.tfid];u?(n.displayName&&d.localeIgnoreCaseComparer(u.Name,n.displayName)!==0&&(u.Name=n.displayName),u.updatePresence(t),this.membersListControl.updateMember(u,i,!0)):r&&(u=new at.Member(n.displayName,n.tfid,t),this.addMember(u,i))},t.prototype.addMember=function(n,t){t===void 0&&(t=!1);delete this._removedUsers[n.TfId];this.members[n.TfId]=n;this.membersListControl.addMember(n,t)},t.prototype.removeMember=function(n){delete this.members[n.TfId];this._removedUsers[n.TfId]=n;this.membersListControl.removeMember(n)},t.prototype.setSelectedDate=function(n){this.selectedDate=n},t.prototype._createManageToolbarItems=function(){return this._options.CanManageUsers?[{id:ui.CMD_MANAGE_USERS,text:s.ManageUsers,noIcon:!0},{id:ui.CMD_CONFIGURE_EVENTS,text:s.ConfigureEvents,noIcon:!0}]:[]},t.prototype._onManageToolbarItemClick=function(n){var t=this,r=ui.getCollectionNameFromUrl(),u=oi();u.beginGetCollectionProperties(r,function(r){var f=n.get_commandName(),u=fi.getCollectionTfsContext(r.serviceHost),e=at.getEncodedUriComponentForIE(r.serviceHost.name);u.navigation.serviceHost.vDir=at.getEncodedUriForIE(u.navigation.serviceHost.vDir);switch(f){case ui.CMD_MANAGE_USERS:y.Dialog.beginExecuteDialogAction(function(){tt.logTracePoint("ChatRoom.ChatSessionControl.ManagerUserClick.Start");i.using(["Admin/Scripts/TFS.Admin.Dialogs"],function(){y.show(bi,{RoomName:t._options.RoomName,RoomId:t._options.RoomId,tfsContext:u,dialogClosed:function(){t.eventManager.fireEvent(at.ChatRoomEvent.ROOM_NOTIFICATION_UPDATE,t,{notificationOn:!1,context:"dialog"})}});t.eventManager.fireEvent(at.ChatRoomEvent.ROOM_NOTIFICATION_UPDATE,t,{notificationOn:!0,context:"dialog"})})});break;case ui.CMD_CONFIGURE_EVENTS:y.show(li,{RoomName:t._options.RoomName,RoomId:t._options.RoomId,ServiceAccountId:t._options.ServiceAccountId,CollectionName:e,tfsContext:u,cssClass:"chat-alert-dialog-host",useLegacyStyle:!0,dialogClosed:function(){t.eventManager.fireEvent(at.ChatRoomEvent.ROOM_NOTIFICATION_UPDATE,t,{notificationOn:!1,context:"dialog"})}});t.eventManager.fireEvent(at.ChatRoomEvent.ROOM_NOTIFICATION_UPDATE,t,{notificationOn:!0,context:"dialog"})}})},t.LOAD_USER_BATCH_SIZE=25,t}(o.BaseControl);t.ChatSessionControl=vi;yi=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(i){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:t.coreCssClass,showInput:!1},i))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this.chatControl.getElement().addClass(t.coreCssClass);this.membersListControl.getElement().addClass(t.coreCssClass)},t.prototype.updateMember=function(n,t,i,r){r===void 0&&(r=!0)},t.prototype.loadChat=function(t){t.length==0&&(g.isGivenDayInFuture(this.getSelectedDate())?this.chatControl.displayError(s.EmptyTranscriptFutureDateMessage):g.isGivenDayInPast(this.getSelectedDate())&&this.chatControl.displayError(d.format(s.EmptyTranscriptPastDateMessage,g.localeFormat(this.getSelectedDate(),k.getDateTimeFormat().LongDatePattern,!0))));n.prototype.loadChat.call(this,t)},t.prototype.removeMember=function(){},t.prototype.attachEventhandlers=function(){var t=this;n.prototype.attachEventhandlers.call(this);this.eventsAttached||(this.eventManager.attachEvent(at.ChatRoomEvent.TRANSCRIPT_LOAD_SUCCESS,function(n,i){g.defaultComparer(t.selectedDate,i.currentDate)===0&&t._loadMembersAndTranscript(i.chat)}),this.eventManager.attachEvent(at.ChatRoomEvent.TRANSCRIPT_LOAD_FAILURE,function(n,i){if(g.defaultComparer(t.selectedDate,i.currentDate)===0)t.onChatLoadFailure(i)}),this.eventsAttached=!0)},t.prototype.hideChatSession=function(){n.prototype.hideChatSession.call(this);$(".transcript-chat",$(".chatroom-view")).addClass("hidden")},t.prototype.showChatSession=function(){n.prototype.showChatSession.call(this);$(".transcript-chat",$(".chatroom-view")).removeClass("hidden")},t.prototype.onChatLoadInit=function(){n.prototype.onChatLoadInit.call(this);this.action==ui.ACTION_TRANSCRIPT&&(this.chatControl.clearChatAndShowStatusIndicator(),this.membersListControl.updateLiveAndSetHeader(!1),this.chatRoomModel.fetchTranscript(g.addDays(n.prototype.getSelectedDate.call(this),1,!0)),this.eventManager.fireEvent(at.ChatRoomEvent.ROOM_NOTIFICATION_UPDATE,this,{notificationOn:!0,context:"chat-control"}))},t.prototype._loadMembersAndTranscript=function(n){var u,r,t,i;for(this.showChatSession(),u={},this.membersListControl.resetMembers(),r=0;r<n.length;r++)t=n[r],u[t.postedByUserTfId]||t.messageType!=pt.MessageType.Normal||(i=this.getMember(t.postedByUserTfId,t.postedByUserName),u[t.postedByUserTfId]=i,i.updatePresence(at.ChatConstants.ONLINE),this.addMember(i),this.membersListControl.updateMember(i,!1));this.membersListControl.showMemberLists(!1,n.length==0);this.loadChat(n)},t.prototype.updateAction=function(n){this.action=n;this.action==ui.ACTION_TRANSCRIPT?(this.showChatSession(),this.chatRoomModel.isConnected()&&this.onChatLoadInit()):this.hideChatSession()},t.coreCssClass="transcript-chat",t}(vi);t.TranscriptChatControl=yi;i.classExtend(yi,u.TfsContext.ControlExtensions);pi=function(n){function t(t){n.call(this,t);this._errorIdCounter=-1}return __extends(t,n),t.prototype.initializeOptions=function(i){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:t.coreCssClass,showInput:!0},i))},t.prototype.initialize=function(){n.prototype.initialize.call(this);this.selectedDate=g.getTodayInUserTimeZone();this.chatControl.getElement().addClass(t.coreCssClass);this.membersListControl.getElement().addClass(t.coreCssClass)},t.prototype.onChatLoadInit=function(){if(n.prototype.onChatLoadInit.call(this),this.action==ui.ACTION_TODAY){this.chatControl.clearChatAndShowStatusIndicator();this.membersListControl.updateLiveAndSetHeader(!0);this.chatRoomModel.fetchOnlineMembers();this.chatRoomModel.fetchRecentChat();var t=this.chatRoomModel.getPendingMessageToRetry();t&&(this.chatRoomModel.clearPendingMessageToRetry(),this.chatRoomModel.sendMessage(t.messageText,t.messageUiId,!0));this.eventManager.fireEvent(at.ChatRoomEvent.ROOM_NOTIFICATION_UPDATE,this,{notificationOn:!1,context:"chat-control"})}},t.prototype.attachEventhandlers=function(){var t=this;n.prototype.attachEventhandlers.call(this);this.eventsAttached||(this.eventManager.attachEvent(at.ChatRoomEvent.MEMBERS_RETRIEVE_FAILURE,function(n,i){t.onMembersRetrieveFailure(i)}),this.eventManager.attachEvent(at.ChatRoomEvent.MESSAGE_SEND_SUCCESS,function(n,i){t.handleMessage(i.message,!1)}),this.eventManager.attachEvent(at.ChatRoomEvent.MESSAGE_RETRY_FAILED,function(n,i){if(!i.silent){var r=new at.Message(--t._errorIdCounter,i.messageText,pt.MessageType.Error,(new Date).toString(),null,[]);t.chatControl.renderMessage(r,!1)}}),this.eventManager.attachEvent(at.ChatRoomEvent.MESSAGE_SEND_FAILURE,function(n,i){t.onMessageSendError(i)}),this.eventManager.attachEvent(at.ChatRoomEvent.MEMBER_ADDED,function(n,i){var r,u;r=i.member;t.hasMember(r.tfid)||(u=new at.Member(r.displayName,r.tfid,at.ChatConstants.OFFLINE),t.addMember(u),t.chatControl.getMessageInput().addMentionItem({id:r.tfid,label:r.displayName,imageUrl:fi.getIdentityImageUrl(r.tfid)}))}),this.eventManager.attachEvent(at.ChatRoomEvent.MEMBER_REMOVED,function(n,i){var r=i.member,u;u=t.hasMember(i.member.Tfid)?t.members[i.member.Tfid]:new at.Member(r.displayName,r.tfid,at.ChatConstants.OFFLINE);t.removeMember(u);t.chatControl.getMessageInput().removeMentionItem(r.tfid)}),this.eventManager.attachEvent(at.ChatRoomEvent.MEMBER_ENTERED,function(n,i){t.updateMember(i.member,at.ChatConstants.ONLINE,!0)}),this.eventManager.attachEvent(at.ChatRoomEvent.MEMBER_LEFT,function(n,i){t.updateMember(i.member,at.ChatConstants.OFFLINE,!0,!1)}),this.eventManager.attachEvent(at.ChatRoomEvent.MEMBERS_RETRIEVED,function(n,i){t.membersListControl.resetMembers();t.members={};t.initializeMembers();$.each(i.members,function(n,i){t.updateMember(i,at.ChatConstants.ONLINE,!1)});t.membersListControl.showMemberLists(!0)}),this.eventManager.attachEvent(at.ChatRoomEvent.MESSAGE_READY,function(n,i){i.retryNode?t.chatRoomModel.sendMessage(i.messageText,i.messageUiId,!0,i.retryNode):t.chatRoomModel.sendMessage(i.messageText,i.messageUiId)}),this.eventManager.attachEvent(at.ChatRoomEvent.MESSAGE_RECEIVED,function(n,i){t.handleMessage(i.message,i.message.MessageType!==pt.MessageType.System)}),this.eventManager.attachEvent(at.ChatRoomEvent.CHAT_LOAD_SUCCESS,function(n,i){t.action==ui.ACTION_TODAY&&t.loadChat(i.chat)}),this.eventManager.attachEvent(at.ChatRoomEvent.CHAT_LOAD_FAILURE,function(n,i){if(t.action==ui.ACTION_TODAY)t.onChatLoadFailure(i)}),this.eventManager.attachEvent(at.ChatRoomEvent.READY_FOR_MESSAGE_STREAMING,function(n,i){var r=[];t.action==ui.ACTION_TODAY&&i.messages!==null&&(r=t.buildMessageModels(i.messages),t.chatControl.renderMessages(r,!0));tt.logTracePoint("ChatRoom.ChatControl.READY_FOR_MESSAGE_STREAMING.Complete")}),this.eventsAttached=!0)},t.prototype.setSelectedDate=function(){this.selectedDate=g.getTodayInUserTimeZone()},t.prototype.updateAction=function(n){this.action=n;this.action==ui.ACTION_TODAY?(this.showChatSession(),this.chatRoomModel.isConnected()&&this.onChatLoadInit()):this.hideChatSession()},t.prototype.hideChatSession=function(){$(".live-chat",$(".chatroom-view")).addClass("hidden")},t.prototype.showChatSession=function(){$(".live-chat",$(".chatroom-view")).removeClass("hidden");n.prototype.showChatSession.call(this)},t.coreCssClass="live-chat",t}(vi);t.LiveChatSessionControl=pi;i.classExtend(pi,u.TfsContext.ControlExtensions);wi=function(n){function t(t){n.call(this,t);this._scrollTimeout=null}return __extends(t,n),t.prototype.resetLastSender=function(){this._lastSenderTfId=""},t.prototype.initializeOptions=function(i){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:t.coreCssClass},i))},t.prototype.initialize=function(){var i=this,n;this._eventManager=at.ChatRoomEventManager.GetInstance();this._showInput=this._options.showInput;n=this.getElement();this._chatBox=$("<ul>").appendTo(n).addClass(t.chatBoxClass).attr("tabIndex","0").addClass("hidden");this._showInput&&(this._messageInput=o.BaseControl.createIn(rr,n,{onSend:function(n){i._sendMessage(n)},coreCssClass:t.msgInputClass,mentionData:this._createMentionData(this._options.members),enabled:!1}))},t.prototype._createMentionData=function(n){var t=[];return $.each(n,function(n,i){var r={id:i.id,label:i.displayName,imageUrl:fi.getIdentityImageUrl(i.id)};t.push(r)}),t},t.prototype.clearChatAndShowStatusIndicator=function(){$(".chat-box").empty();this.resetLastSender();this._statusIndicator||(this._statusIndicator=o.BaseControl.createIn(p.StatusIndicator,this._element,{center:!1,imageClass:"big-status-progress",message:s.LoadingChat,throttleMinTime:0}),this._statusIndicator.start())},t.prototype.displayError=function(n){var t=$("<div>").text(n).addClass("chat-error");this._chatBox.append(t)},t.prototype.dispose=function(){this._messages=[];$(".chat-box").empty();n.prototype.dispose.call(this)},t.prototype.doesMessageExist=function(n){var t=this._chatBox.find("#message_"+n.Id);return t.length>0},t.prototype.buildMessageUI=function(n,t){var u,i,r;u=this._lastSenderTfId&&n.PostedBy&&this._lastSenderTfId===n.PostedBy.TfId?!1:!0;n.PostedBy&&(this._lastSenderTfId=n.PostedBy.TfId);try{return i=vt.RendererFactory.getRenderer(n.Type,n.Content,at.getCurrentTfsContext()),i?i.render(n,$.extend({showSender:u},t)):$()}catch(f){return r=d.format(s.ErrorLoadingMessages,n.Id),$("<li class='message error'><div class='message-text error'>"+r+"<\/div><\/li>")}},t.prototype._checkForNewDayAndReturnMessageAsNecessary=function(n,t){var i,u,r;return this._lastMessageTimestamp&&g.daysBetweenDates(this._lastMessageTimestamp,n.PostedTime,!0)>0?(i=new Date(n.PostedTime.getTime()),i.setHours(0,0,0,0),u=new at.Member(fi.currentIdentity.displayName,fi.currentIdentity.id),r=new at.Message(i.getTime(),g.localeFormat(i,k.getDateTimeFormat().LongDatePattern,!0),pt.MessageType.System,"",null),t&&this._eventManager.fireEvent(at.ChatRoomEvent.ON_NEW_DAY_BEGIN,this,{newDate:i}),this.buildMessageUI(r,{idPrefix:"new_day",showTimeStamp:!1,extraCssClass:"new-day-message"})):$()},t.prototype.renderMessages=function(n,t){t===void 0&&(t=!1);var r=this.isCloseToBottom(),i;this._lastMessageTimestamp=null;this._isPagingOn=undefined;i=this.getMessagePageToRender(n,!1);this._bindToScroll();this.renderMessagePage(i,t);r&&this.scrollToBottom()},t.prototype._bindToScroll=function(){this._isPagingOn&&(this._isScrollEventProcessed=!1,this._chatBox.scroll(ei(this,this._firePagingTimer)))},t.prototype._firePagingTimer=function(){this._scrollTimeout!==null&&clearTimeout(this._scrollTimeout);setTimeout(ei(this,this._loadNextPage),250)},t.prototype._loadNextPage=function(){var n;this.isCloseToTop()&&(this._isScrollEventProcessed||(this._isScrollEventProcessed=!0,this._unbindScroll(),this._pageLoadingStatusIndicator||($(".chat-box",this._element).prepend('<div class="page-status-container"><\/div>'),this._pageLoadingStatusIndicator=o.BaseControl.createIn(p.StatusIndicator,$(".page-status-container",this._element),{center:!1,imageClass:"big-status-progress",message:s.LoadingChat,throttleMinTime:300}),this._pageLoadingStatusIndicator.start(),et.BrowserCheckUtils.isMsie()&&this._chatBox.scrollTop(1)),n=this.getMessagePageToRender(this._messages,!0),this.renderMessagePage(n,!1),clearTimeout(this._scrollTimeout),this._scrollTimeout=null))},t.prototype._unbindScroll=function(){this._chatBox.unbind("scroll",this._firePagingTimer)},t.prototype.getMessagePageToRender=function(n,t){var i;return this._isPagingOn===undefined&&n.length>ci&&(this._messages=n,this._isPagingOn=!0,this._lastRenderedMessageIndex=n.length,t=!0),this._isPagingOn&&t?(this._lastRenderedMessageIndex<=ci?(this._lastRenderedMessageIndex=0,this._unbindScroll()):this._lastRenderedMessageIndex=this._lastRenderedMessageIndex-ci,i=this._messages.slice(this._lastRenderedMessageIndex,this._lastRenderedMessageIndex+ci),this._messages.splice(this._lastRenderedMessageIndex),this._lastRenderedMessagesCount=i.length):i=n,i},t.prototype.renderMessagePage=function(n,t){var r=this,i,u;t===void 0&&(t=!1);i=[];$.each(n,function(n,t){if(!r.doesMessageExist(t)){var f=r._checkForNewDayAndReturnMessageAsNecessary(t,!1);f.length>0&&i.push(f[0]);r._lastMessageTimestamp=t.PostedTime;u=r.buildMessageUI(t);u.length>0&&i.push(u[0])}});this._pageLoadingStatusIndicator&&($(".page-status-container",this._element).remove(),this._pageLoadingStatusIndicator.dispose(),this._pageLoadingStatusIndicator=null);t?this._chatBox.append(i):this._chatBox.prepend(i);this.scrollToCurrentPage()},t.prototype.scrollToCurrentPage=function(){var n=this,t=0,i=this;this._isPagingOn&&($.each($(".message",this._chatBox[0]),function(n,r){var u=$(r).height();if(n+1>=i._lastRenderedMessagesCount)return i._lastRenderedMessagesCount>0&&(t=t-u*2),!1;t=t+u}),b.delay(this,100,function(){n._unbindScroll();n._chatBox.scrollTop(t);n._lastRenderedMessageIndex===0?n._isPagingOn=!1:n._bindToScroll()}))},t.prototype.renderMessage=function(n,t,i){var r,u,f;this.doesMessageExist(n)||(r=this._checkForNewDayAndReturnMessageAsNecessary(n,!0),r.length>0&&this._chatBox.append(r),this._lastMessageTimestamp=n.PostedTime,u=this.buildMessageUI(n,i),f=this.isCloseToBottom(),t&&this._eventManager.fireEvent(at.ChatRoomEvent.NOTIFY_ROOM,this,{userMentioned:n.CurrentUserMentioned}),this._chatBox.append(u),f&&this.scrollToBottom(),n.Type===pt.MessageType.System?tt.logTracePoint("ChatRoom.ChatControl.RenderSystemMessage.Complete"):tt.logTracePoint("ChatRoom.ChatControl.RenderMessage.Complete"))},t.prototype._sendMessage=function(n){$.trim(n)!=""&&this._eventManager.fireEvent(at.ChatRoomEvent.MESSAGE_READY,this,{messageText:n,messageUiId:"a unique id or the jquery object of the message"})},t.prototype.showChatBox=function(){this.enable();this._statusIndicator&&(this._statusIndicator.dispose(),this._statusIndicator=null);this._chatBox.removeClass("hidden")},t.prototype.enable=function(){this._showInput&&this._messageInput.enable()},t.prototype.disable=function(){this._showInput&&this._messageInput.disable()},t.prototype.getChatBox=function(){return this._chatBox},t.prototype.getMessageInput=function(){return this._messageInput},t.prototype.scrollToBottom=function(){this._chatBox.scrollTop(this._chatBox[0].scrollHeight)},t.prototype.isCloseToBottom=function(){return this._chatBox.scrollTop()+this._chatBox.outerHeight()>=this._chatBox[0].scrollHeight-5},t.prototype.isCloseToTop=function(){return this._chatBox.scrollTop()<t.CLOSE_TO_TOP_PIXEL_VALUE},t.coreCssClass="chatroom-chat-control",t.chatBoxClass="chat-box",t.todayLinkClass="today-link",t.msgInputClass="message-input-container",t.CLOSE_TO_TOP_PIXEL_VALUE=20,t}(o.BaseControl);t.ChatControl=wi;ir=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(i){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:t.coreCssClass},i))},t.prototype.initialize=function(){var n=this._element,t={center:!1,imageClass:"big-status-progress",message:s.LoadingMembers,throttleMinTime:0};this._statusIndicator=o.BaseControl.createIn(p.StatusIndicator,n,t);this._statusIndicator.start();this._onlineMembersPanel=o.BaseControl.createIn(a.CollapsiblePanel,n,{cssClass:"members-panel",collapsed:!1});this._offlineMembersPanel=o.BaseControl.createIn(a.CollapsiblePanel,n,{cssClass:"members-panel",collapsed:!0});$("<div>").addClass("toolbar").appendTo(n);this._hideElements();this._membersMap={};this._membersAnimationTimer={};this._onlineListContainer=$("<ul>").addClass("members-online-list");this._offlineListContainer=$("<ul>").addClass("members-offline-list");this._onlineMembersPanel.appendHeaderText(s.OnlineMembersTitle);this._onlineMembersPanel.appendContent(this._onlineListContainer);this._offlineMembersPanel.appendHeaderText(s.OfflineMembersTitle);this._offlineMembersPanel.appendContent(this._offlineListContainer);this._defaultImageLocation=fi.configuration.getResourcesFile("User.svg")},t.prototype.updateLiveAndSetHeader=function(n){this._isLive=n;this._isLive?this._onlineMembersPanel.replaceHeaderTextIfPresent(s.OnlineMembersTitle):this._onlineMembersPanel.replaceHeaderTextIfPresent(s.TranscriptMembersTitle);this._statusIndicator||(this._hideElements(),this._statusIndicator=o.BaseControl.createIn(p.StatusIndicator,this._element,{center:!1,imageClass:"big-status-progress",message:s.LoadingMembers,throttleMinTime:0}),this._statusIndicator.start())},t.prototype.addBatchSpinner=function(){var n=$('<div class="batch-spinner"><\/div>'),t;this._offlineMembersPanel.appendContent(n);t=o.BaseControl.createIn(p.StatusIndicator,n,{center:!1,imageClass:"big-status-progress",message:s.LoadingMembers,throttleMinTime:0});t.start()},t.prototype.deleteBatchSpinner=function(){$(".batch-spinner",this._offlineMembersPanel.getElement()).remove()},t.prototype.createToolbar=function(n,t){var i=this.getElement();o.BaseControl.createIn(ct.MenuBar,i.find("div.toolbar"),{items:n,executeAction:function(n){t(n)}})},t.prototype.clearStatusIndicator=function(){this._statusIndicator&&(this._statusIndicator.dispose(),this._statusIndicator=null)},t.prototype.showMemberLists=function(n,t){if(t===void 0&&(t=!1),this.clearStatusIndicator(),t){var i=$("<div>").text(s.EmptyTranscriptPeopleMessage);this._onlineListContainer.append(i)}this._onlineMembersPanel.showElement();this._element.find("div.toolbar").removeClass("hidden");this._isLive?this._offlineMembersPanel.showElement():this._offlineMembersPanel.hideElement();tt.logTracePoint("ChatRoom.MembersListControl.ShowMemberLists.Complete")},t.prototype.hasMember=function(n){return n in this._membersMap},t.prototype.addMember=function(n,t,i){var r,u,f;t===void 0&&(t=!1);i===void 0&&(i=!1);this.hasMember(n.TfId)||(r=$("<li>"),u=$("<div>").addClass("member-container"),n.HasAvatar?this._updateMemberUI(r,n.Name,n.TfId):(f=$('<img class="identity-picture" />'),f.attr("src",this._defaultImageLocation),r.append(f)),n.Name&&(r.attr("title",n.Name),$("<div>").addClass("member-name").text(n.Name).attr("title",n.Name).appendTo(u)),$("<div>").addClass("member-status").appendTo(u),r.append(u),this._membersMap[n.TfId]=r,this.updateMember(n,t,!1,i))},t.prototype.removeMember=function(n){this.hasMember(n.TfId)&&(this._membersMap[n.TfId].remove(),delete this._membersMap[n.TfId])},t.prototype.resetMembers=function(){this._membersMap={};this._onlineListContainer.empty();this._offlineListContainer.empty()},t.prototype.updateMember=function(n,i,r,u){if(r===void 0&&(r=!1),u===void 0&&(u=!1),this.hasMember(n.TfId)){var h=this,f=this._membersMap[n.TfId],e,o=$(".member-status",f);r&&this._updateMemberUI(f,n.Name,n.TfId);n.Presence===at.MemberPresence.Online?(f.stop(!0),this._removeShowTimer(n.TfId),f.remove().css("opacity",1).css("display","block"),this._insertMemberSorted(f,this._onlineListContainer,u),e=s.MemberJustArrived,tt.logTracePoint("ChatRoom.MemberListControl.UpdateMember.Complete"),i&&(o.text(e),f.css("display","none").fadeIn(t.ANIMATION_FADING_TIME),this._membersAnimationTimer[n.TfId]=b.delay(this,t.ENTER_ANIMATION_TIME,function(){o.text("");this._removeShowTimer(n.TfId)}))):(e=s.MemberJustLeft,f.stop(!0),this._removeShowTimer(n.TfId),i?(o.text(e),f.css("opacity",t.ANIMATION_OPACITY).addClass(t.TRANSITION_CSS_CLASS),this._removeShowTimer(n.TfId),this._membersAnimationTimer[n.TfId]=b.delay(this,t.LEFT_ANIMATION_TIME,function(){f.fadeOut(t.ANIMATION_FADING_TIME,function(){o.text("");f.remove().css("display","block").css("opacity",1).removeClass(t.TRANSITION_CSS_CLASS);h._insertMemberSorted(f,h._offlineListContainer);tt.logTracePoint("ChatRoom.MemberListControl.UpdateMember.Complete")})})):(f.remove().css("display","block").css("opacity",1),this._insertMemberSorted(f,this._offlineListContainer,u)))}},t.prototype.getMemberUi=function(n){return this._membersMap[n]},t.prototype.isAwayContainerExpanded=function(){return this._offlineMembersPanel.isExpanded()},t.prototype._updateMemberUI=function(n,t,i){n.attr("title",t);$(".member-name",n).attr("title",t).text(t);oi().beginGetCollectionProperties(at.ChatRoomModel.selectedCollectionName,function(r){var u=fi.getCollectionTfsContext(r.serviceHost),f=it.identityImageElement(u,i,null,null,t,t);$("img.identity-picture",n).remove();n.prepend(f)})},t.prototype._hideElements=function(){this._onlineMembersPanel.hideElement();this._offlineMembersPanel.hideElement();this._element.find("div.toolbar").addClass("hidden")},t.prototype._insertMemberSorted=function(n,t,i){i===void 0&&(i=!1);var r=t.children(),u=r.length,f=n.attr("title");i?t.append(n):r.each(function(){if(d.localeIgnoreCaseComparer($(this).attr("title"),f)>0)return $(this).before(n),!1});t.children().length===u&&t.append(n)},t.prototype._removeShowTimer=function(n){n in this._membersAnimationTimer&&(this._membersAnimationTimer[n].cancel(),delete this._membersAnimationTimer[n])},t.coreCssClass="chatroom-members-list",t.ENTER_ANIMATION_TIME=3e4,t.LEFT_ANIMATION_TIME=5e3,t.ANIMATION_OPACITY=.4,t.ANIMATION_FADING_TIME=1e3,t.TRANSITION_CSS_CLASS="transitioning",t}(o.BaseControl);t.MembersListControl=ir;rr=function(n){function t(t){n.call(this,t);this._truncationWarningHidden=!0;this._noMentionMatches=!1;this._mentionSearchTerm="";this._mentionTriggered=!1;this._showNoMentionMatches=!0;this._mentionStartPosition=-1;this._mentionSearchResult=[];this._scrollbarVisible=!1;this._cursorPositionIESpecific=null}return __extends(t,n),t.prototype.initialize=function(){var n=this,r=this.getElement(),t,i,u,f;this._mentionData=this._options.mentionData;this._mentionDropDownContainer=$("<div>").addClass("autocomplete-menu-container").appendTo(r);t=$("<div>").appendTo(r).addClass("message-input");i=$("<div>").appendTo(t).addClass("inner-message-input");this._textBox=$("<textarea>").appendTo(i).attr("title",s.MessageInputWatermark);et.Watermark(this._textBox,{watermarkText:s.MessageInputWatermark});this._truncationWarning=$("<div>").addClass("hidden truncated-message").appendTo(t);this._options.enabled!==undefined&&this._options.enabled===!1&&this.disable();this.makeMentionable();this._textBox.focus();this._textBox.keydown(function(t){n._onInputKeyDown(t)});this._textBox.bind("keyup scroll",function(){n._resize()});this._textBox.bind("blur",function(t){n._onBlur(t)});this._textBox.bind("beforedeactivate",function(){n._cursorPositionIESpecific=n._textBox[0].selectionStart});u=b.throttledDelegate(this,100,this._checkMessageLength);this._textBox.bind("paste keyup change",u);f=b.throttledDelegate(this,100,this._updateEmojiPickerPosition);this._textBox.bind("paste keyup cut change focus",f);this._emojiPicker=o.BaseControl.createIn(ur,i,{columns:8,textboxUpdateCallback:function(t){t.hasAttribute("text")&&(n._insertText(t.attributes.text.value),n._textBox.focus())},textBoxFocus:function(){n._textBox.focus()}})},t.prototype._insertText=function(n){var i=this._textBox[0],t=this._cursorPositionIESpecific!==null?this._cursorPositionIESpecific:i.selectionStart,r=this._textBox.val(),u=r.slice(0,t),f=r.slice(t),e=u.charAt(t-1)===""||/\s/.test(u.charAt(t-1))?"":" ",o=f.charAt(0)===""||/\s/.test(f.charAt(0))?"":" ";n=e+n+o;r=u+n+f;this._textBox.val(r);i=this._textBox[0];i.selectionStart=t+n.length;i.selectionEnd=t+n.length;this._textBox.focus()},t.prototype._updateEmojiPickerPosition=function(){var n=this._textBox[0],t="movein";n.clientHeight<n.scrollHeight&&!this._scrollbarVisible?(this._scrollbarInfo===undefined&&this._calculateScrollbarInfo(n),this._emojiPicker._element.addClass(t),this._scrollbarVisible=!0,this._emojiPicker._element[0].style.right=this._scrollbarInfo.emojiRight,this._textBox[0].style.paddingRight=this._scrollbarInfo.textBoxPadding):this._textBox[0].clientHeight>=this._textBox[0].scrollHeight&&this._scrollbarVisible&&(this._emojiPicker._element.removeClass(t),this._scrollbarVisible=!1,this._emojiPicker._element[0].style.right=this._scrollbarInfo.startEmojiRight,this._textBox[0].style.paddingRight=this._scrollbarInfo.startTextBoxPadding)},t.prototype._calculateScrollbarInfo=function(n){var t,u,f,i,r;u=this._textBox[0].style.padding;f=this._emojiPicker._element[0].style.right;et.BrowserCheckUtils.isFirefox()?(r="0px",i="25px"):(t=n.offsetWidth-n.clientWidth,r=String(t)+"px",i=String(t+25)+"px");this._scrollbarInfo={scrollbarOffset:t,startTextBoxPadding:u,startEmojiRight:f,textBoxPadding:i,emojiRight:r}},t.prototype._checkMessageLength=function(){var n=t.MaxMessageLength,u=t.MessageLengthThreshold,f=this._textBox.val(),i=f.length,r=i<n-u;if(this._truncationWarningHidden!==r&&(this._truncationWarning.toggleClass("hidden",r),this._truncationWarningHidden=r),!this._truncationWarningHidden){var e=nt.toDecimalLocaleString(n,!0,k.getCurrentCulture()),o=nt.toDecimalLocaleString(i,!0,k.getCurrentCulture()),h=d.format(s.MessageCharacterCount,o,e);this._truncationWarning.text(h);this._truncationWarning.toggleClass("warning",i>n)}},t.prototype._resize=function(){var n=this._textBox.outerHeight()-this._textBox.innerHeight();this._textBox.height(this._textBox[0].scrollHeight+n)},t.prototype._onBlur=function(){b.delay(this,100,function(){this._textBox.height(0);this._resize()})},t.prototype._onInputKeyDown=function(n){return n.keyCode===et.KeyCode.ENTER?n.shiftKey?!0:(n.preventDefault(),this.sendMsg(),!1):n.keyCode===et.KeyCode.ESCAPE?(this.clear(),!1):!0},t.prototype.sendMsg=function(){if($.isFunction(this._options.onSend)){var n=this.getText();n&&n.length>t.MaxMessageLength&&(n=n.substring(0,t.MaxMessageLength));this._options.onSend(n)}b.delay(this,0,this.clear)},t.prototype.clear=function(){this.setText("")},t.prototype.getText=function(){return this._textBox.val()||""},t.prototype.setText=function(n){var t=this;this._textBox.val(n);this._checkMessageLength();(n||n==="")&&b.delay(this,0,function(){t._textBox.height(0);t._resize()})},t.prototype.enable=function(){this._textBox.removeAttr("disabled");this._textBox.focus()},t.prototype.disable=function(){this._textBox.attr("disabled","disabled")},t.prototype.addMentionItem=function(n){var t=0;$.each(this._mentionData,function(i,r){return d.localeIgnoreCaseComparer(n.label,r.label)>0?(t++,!0):!1});this._mentionData.splice(t,0,n)},t.prototype.removeMentionItem=function(n){var t;$.each(this._mentionData,function(i,r){r.id===n&&(t=i)});this._mentionData.splice(t,1)},t.prototype._getCaretPosition=function(){var n=0,i=this._textBox[0],t;return i.selectionStart?n=i.selectionStart:b.documentSelection&&(this._textBox.focus(),t=b.documentSelection.createRange(),t.moveStart("character",-this._textBox.val().length),n=t.text.length),n},t.prototype.makeMentionable=function(){var n=this;this._textBox.bind("keydown.autocomplete",function(t){n._mentionUIKeyDownHandler(t)}).bind("keyup",function(){var u=n._textBox.val(),r=u.length,f,i=t.AutocompleteTriggerer;!n._mentionTriggered&&r>=i.length&&(f=u.substring(r-i.length),(r===i.length||u.substring(r-i.length-1).match(/\s/))&&(n._mentionTriggered=f===i))}).bind("mouseup",function(){b.delay(n,0,function(){n._toggleMentionDropdownAsNecessary()})}).autocomplete({minLength:0,autoFocus:!0,delay:100,appendTo:this._mentionDropDownContainer,source:function(t,i){var u=t.term,r;r=n._getMentionSearchResult(u);$.isArray(r)&&r.length>200&&r.splice(200);i(r)},focus:function(){return!1},select:function(t,i){return n._noMentionMatches||n._selectMentionItem(t,i),!1},open:function(){var t=n._textBox.data("ui-autocomplete").menu.element,i=t.outerHeight();t.css("left","0");t.css("top","0");t.css("width","auto");n._mentionDropDownContainer.css("bottom",i)}}).data("ui-autocomplete")._renderItem=function(t,i){return n._noMentionMatches?n._renderNoMentionItemFound(t,i):n._renderMentionItem(t,i)};this._textBox.data("ui-autocomplete").menu.element.addClass("autocomplete-menu")},t.prototype._getMentionSearchResult=function(n){var i=[],s=t.AutocompleteTriggerer,f=new RegExp("(^|\\s)"+s,"i"),u=!1,r,e,o;return this._mentionTriggered&&n.match(f)&&(r=n.split(f).pop(),this._mentionStartPosition=n.length-r.length,u=r.match($.ui.autocomplete.escapeRegex(this._mentionSearchTerm)+"\\s")!==null?!0:!1,this._noMentionMatches&&this._showNoMentionMatches&&u&&(this._showNoMentionMatches=!1),this._mentionSearchTerm=r,e=$.ui.autocomplete.escapeRegex(this._mentionSearchTerm),o=new RegExp("(^|\\s)"+e,"i"),i=$.grep(this._mentionData,function(n){return o.test(n.label)}),i.length==0?(this._noMentionMatches=!0,this._showNoMentionMatches&&(u?this._showNoMentionMatches=!1:i=[t.NoMentionMatchesLabel])):(this._showNoMentionMatches=!0,this._noMentionMatches=!1)),this._mentionSearchResult=i,i},t.prototype._selectMentionItem=function(n,i){var u=this._textBox.val(),r=u.split(t.AutocompleteTriggerer);r.pop();r.push(i.item.label);this._textBox.val(r.join(t.AutocompleteTriggerer)+" ");this._mentionTriggered=!1;this._mentionStartPosition=-1;this._showNoMentionMatches=!0},t.prototype._mentionUIKeyDownHandler=function(n){var e=this._textBox.data("ui-autocomplete").menu,t=e.active,r=e.element,i=this._textBox.data("ui-autocomplete").menu.element.css("display")!=="none",u,f;n.keyCode===et.KeyCode.TAB||n.keyCode===et.KeyCode.ENTER?t?(n.stopImmediatePropagation(),n.preventDefault(),n.stopPropagation(),this._textBox.data("ui-autocomplete").menu.select()):i&&(n.stopImmediatePropagation(),n.preventDefault(),n.stopPropagation(),this._textBox.autocomplete("close")):n.keyCode===et.KeyCode.ESCAPE?i?(n.stopImmediatePropagation(),n.preventDefault(),n.stopPropagation(),this._textBox.autocomplete("close")):this._textBox.data("ui-autocomplete").term="":n.keyCode===et.KeyCode.UP?i?t&&(u=r.children(":first-child"),f=r.children(":last-child"),t.is(u)&&(n.preventDefault(),n.stopImmediatePropagation())):n.stopImmediatePropagation():n.keyCode===et.KeyCode.DOWN?i?t&&(u=r.children(":first-child"),f=r.children(":last-child"),t.is(f)&&(n.preventDefault(),n.stopImmediatePropagation())):n.stopImmediatePropagation():this._mentionTriggered&&(n.keyCode===et.KeyCode.LEFT||n.keyCode===et.KeyCode.RIGHT||n.keyCode===et.KeyCode.HOME||n.keyCode===et.KeyCode.END)?b.delay(this,0,this._toggleMentionDropdownAsNecessary):i&&(n.keyCode===et.KeyCode.PAGE_UP||n.keyCode===et.KeyCode.PAGE_DOWN)&&n.preventDefault()},t.prototype._toggleMentionDropdownAsNecessary=function(){var n=this._textBox.data("ui-autocomplete").menu.active,t=this._textBox.data("ui-autocomplete").menu.element.css("display")!=="none",i=this._getCaretPosition();i<this._mentionStartPosition?t&&this._textBox.autocomplete("close"):n||this._textBox.autocomplete("search")},t.prototype._renderMentionItem=function(n,t){var f=$.ui.autocomplete.escapeRegex(this._mentionSearchTerm),e=new RegExp("(^|\\s)"+f,"ig"),i=d.htmlEncode(t.label),o=i.replace(e,function(n){return"<b>"+n+"<\/b>"}),u=$(r.TemplateEngine.tmpl('<li class="user-mention-item">   <a>      <img src="${imageUrl}" alt="${alt}" />      <span>{{html label}}<\/span>   <\/a><\/li>',{imageUrl:t.imageUrl,label:o,alt:i}));return u.data("ui-autocomplete-item",t).appendTo(n),u},t.prototype._renderNoMentionItemFound=function(n,t){var i=$(r.TemplateEngine.tmpl('<li class="user-mention-item no-matches">   <a>      <span>${label}<\/span>   <\/a><\/li>',{label:t.label}));return i.data("ui-autocomplete-item",t).appendTo(n),i},t.AutocompleteTriggerer="@",t.NoMentionMatchesLabel={id:null,label:s.NoMentionMatchesFound,imageUrl:null},t.MaxMessageLength=pt.ChatConstants.MaxChatMessageLength,t.MessageLengthThreshold=30,t}(o.BaseControl);t.MessageInputControl=rr;ur=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(i){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:t.coreCssClass},i))},t.prototype.initialize=function(){var n=this,t=this.getElement(),i=$("<span>").addClass("emoji icon-emoji-plainsmile");this.$_emojiButton=$("<div>").addClass("emoji-button").append(i).attr("title",s.EmojiButtonTitle);this.$_emojiButton.mousedown(function(){return n._setButtonState(!0)});this.$_emojiButton.blur(function(){return n._setButtonState(!1)});this.$_emojiButton.click(function(){return n._toggleIconSelector()});this.$_emojiButton.keydown(function(t){return n._handleButton(t)});this.$_emojiButton.attr("tabindex",0);t.append(this.$_emojiButton)},t.prototype._setButtonState=function(n){this._emojiSelector&&this._emojiSelector._setButtonAsActive(n)},t.prototype._toggleIconSelector=function(){this._emojiSelector?(this._disposeEmojiSelector(),this._options.textBoxFocus()):this._createSelector()},t.prototype._handleButton=function(n){n.keyCode===et.KeyCode.ENTER&&this._createSelector()},t.prototype._updateText=function(n){this._options.textboxUpdateCallback(n)},t.prototype._createSelector=function(){var n=this;this._emojiSelector=o.BaseControl.createIn(fr,this._element,{iconList:this._getEmojiList(),textboxUpdateCallback:function(t){n._updateText(t)},iconSelectorRemove:function(){n._disposeEmojiSelector()},textBoxFocus:function(){n._options.textBoxFocus()},columns:this._options.columns});this._emojiSelector.focus();this.$_emojiButton.addClass("selector-open")},t.prototype._disposeEmojiSelector=function(){b.delay(this,100,function(){this._emojiSelector!==null&&(this._emojiSelector.dispose(),this._emojiSelector=null,this.$_emojiButton.removeClass("selector-open"))})},t.prototype._getEmojiList=function(){return[{icon:"icon-emoji-smile",name:"IconEmojiSmile",text:":)"},{icon:"icon-emoji-sad",name:"IconEmojiSad",text:":("},{icon:"icon-emoji-laugh",name:"IconEmojiLaugh",text:":D"},{icon:"icon-emoji-wink",name:"IconEmojiWink",text:";)"},{icon:"icon-emoji-crying",name:"IconEmojiCrying",text:";("},{icon:"icon-emoji-tongue",name:"IconEmojiTongue",text:":P"},{icon:"icon-emoji-cool",name:"IconEmojiCool",text:"8-)"},{icon:"icon-emoji-sweating",name:"IconEmojiSweating",text:":sweat:"},{icon:"icon-emoji-surprised",name:"IconEmojiSurprised",text:":o"},{icon:"icon-emoji-angry",name:"IconEmojiAngry",text:":@"},{icon:"icon-emoji-confused",name:"IconEmojiConfused",text:":S"},{icon:"icon-emoji-blush",name:"IconEmojiBlushing",text:":$"},{icon:"icon-emoji-angel",name:"IconEmojiAngel",text:"O:)"},{icon:"icon-emoji-yes",name:"IconEmojiYes",text:"(y)"},{icon:"icon-emoji-no",name:"IconEmojiNo",text:"(n)"},{icon:"icon-emoji-star",name:"IconEmojiStar",text:"(*)"},{icon:"icon-emoji-heart",name:"IconEmojiHeart",text:"(h)"},{icon:"icon-emoji-brokenheart",name:"IconEmojiBrokenHeart",text:"(u)"},{icon:"icon-emoji-check",name:"IconEmojiCheck",text:"(/)"},{icon:"icon-emoji-info",name:"IconEmojiInfo",text:"(i)"},{icon:"icon-emoji-warning",name:"IconEmojiWarning",text:"(!)"},{icon:"icon-emoji-question",name:"IconEmojiQuestion",text:"(?)"},{icon:"icon-emoji-gift",name:"IconEmojiGift",text:"(gift)"},{icon:"icon-emoji-idea",name:"IconEmojiIdea",text:":bulb:"},{icon:"icon-emoji-mail",name:"IconEmojiMail",text:"(m)"},{icon:"icon-emoji-time",name:"IconEmojiTime",text:"(o)"},{icon:"icon-emoji-phone",name:"IconEmojiPhone",text:"(ph)"},{icon:"icon-emoji-plane",name:"IconEmojiPlane",text:"(pl)"},{icon:"icon-emoji-coffee",name:"IconEmojiCoffee",text:"(coffee)"},{icon:"icon-emoji-pizza",name:"IconEmojiPizza",text:"(pi)"},{icon:"icon-emoji-beer",name:"IconEmojiBeer",text:"(beer)"},{icon:"icon-emoji-drink",name:"IconEmojiDrink",text:"(d)"},{icon:"icon-emoji-flower",name:"IconEmojiFlower",text:"(F)"},{icon:"icon-emoji-music",name:"IconEmojiMusic",text:"(music)"},{icon:"icon-emoji-game",name:"IconEmojiGame",text:"(game)"},{icon:"icon-emoji-cake",name:"IconEmojiCake",text:"(^)"},{icon:"icon-emoji-alien",name:"IconEmojiAlien",text:"(alien)"},{icon:"icon-emoji-bomb",name:"IconEmojiBomb",text:"(bomb)"},{icon:"icon-emoji-fire",name:"IconEmojiFire",text:"(fire)"},{icon:"icon-emoji-bug",name:"IconEmojiBug",text:"(bug)"}]},t.coreCssClass="emoji-picker",t}(o.BaseControl);t.EmojiPicker=ur;fr=function(n){function t(t){n.call(this,t);this._openButtonActive=!1;this._iconList=this._options.iconList;this._columns=this._options.columns;this._currentImageIndex=NaN}return __extends(t,n),t.prototype.initializeOptions=function(i){n.prototype.initializeOptions.call(this,$.extend({coreCssClass:t.coreCssClass},i))},t.prototype.initialize=function(){var n=this,t=this.getElement(),r=0,i=$.map(this._iconList,function(n){var f=n.icon.slice(11),t=$("<div>").addClass("emoji icon-emoji-"+f),i=s[n.name],u;return t.attr("name",i).attr("text",n.text),u=$("<div>").append(t).attr("title",i+" "+n.text).attr("number",r),r++,u[0]}),u,f,e,o;t.append(i);u=$(i[0]).outerWidth();f=$(i[0]).outerHeight();this._rows=Math.ceil(this._iconList.length/this._columns);e=f*this._rows+10+3;o=u*this._columns+10+3+2;t.height(e);t.width(o);this._element.mousedown(function(t){var i=t.srcElement?t.srcElement:t.target;n._updateText(i);t.preventDefault()});this._element.blur(function(){n._openButtonActive===!1&&n._options.iconSelectorRemove()});this._element.keydown(function(t){n._processKey(t)});this._element.mousemove(function(t){n._processMouseMove(t)});this._element.mouseleave(function(){n._processMouseLeave()});this._element.attr("tabindex",0)},t.prototype._processKey=function(n){var i=this.getElement(),t=n.keyCode;t===et.KeyCode.ENTER?(this._updateText(i.children().eq(this._currentImageIndex).children().eq(0)[0]),n.preventDefault()):t===et.KeyCode.UP?(this._changeSelectedIcon(this._columns*-1),n.preventDefault()):t===et.KeyCode.DOWN?(this._changeSelectedIcon(this._columns),n.preventDefault()):t===et.KeyCode.LEFT?(this._changeSelectedIcon(-1),n.preventDefault()):t===et.KeyCode.RIGHT?(this._changeSelectedIcon(1),n.preventDefault()):t===et.KeyCode.ESCAPE?(this._options.iconSelectorRemove(),this._options.textBoxFocus()):t===et.KeyCode.END?this._updateCurrElement(this._iconList.length-1):t===et.KeyCode.HOME&&this._updateCurrElement(0)},t.prototype._processMouseMove=function(n){var t=n.srcElement?n.srcElement:n.target,i;t.hasAttribute("number")?(i=Number(t.attributes.number.value),this._updateCurrElement(i)):t.parentElement.hasAttribute("number")&&(i=Number(t.parentElement.attributes.number.value),this._updateCurrElement(i))},t.prototype._processMouseLeave=function(){this._updateCurrElement(NaN)},t.prototype._updateText=function(n){n.hasAttribute("text")?(this._options.textboxUpdateCallback(n),this._options.iconSelectorRemove()):n.children[0].hasAttribute("text")&&(this._options.textboxUpdateCallback(n.children[0]),this._options.iconSelectorRemove())},t.prototype._changeSelectedIcon=function(n){var i=this._currentImageIndex,t,r=this._columns*this._rows;if(isNaN(i))t=0;else do t=this._mod(i+n,r),i=t;while(t>=this._iconList.length||t<0);this._updateCurrElement(t)},t.prototype._updateCurrElement=function(n){var t,i;t=this.getElement();isNaN(this._currentImageIndex)||(i=t.children().eq(this._currentImageIndex),i.removeClass("affect"));t.children().eq(n).addClass("affect");this._currentImageIndex=n},t.prototype._mod=function(n,t){return(n+t)%t},t.prototype._setButtonAsActive=function(n){this._openButtonActive=n},t.coreCssClass="icon-selector",t}(o.BaseControl);t.IconSelector=fr;bi=function(n){function t(t){n.call(this,t);this._membersModified=!1}return __extends(t,n),t.prototype.initializeOptions=function(t){n.prototype.initializeOptions.call(this,$.extend({width:600,height:450,modal:!0,open:function(){tt.logTracePoint("ManageChatRoomMembersDialog.OpenDialog")},title:d.format(s.ManageRoomMembersDialogTitle,t.RoomName||"")},t))},t.prototype.initialize=function(){var t=this;this._options.buttons=[{id:"manage-room-members-close-button",text:w.Close,click:function(){$(this).dialog("close")}}];n.prototype.initialize.call(this);this._element.siblings(".ui-dialog-buttonpane").find("#manage-room-members-close-button").focus();var i=$("<div class='room-members-dialog-container' />").appendTo(this._element).bind("member-added member-removed",function(){t._membersModified=!0}),r={canAddMemberToGroup:this._options.tfsContext.getActionUrl("CanAddMember","chatroom",{area:"api"}),readGroupMembers:this._options.tfsContext.getActionUrl("ReadMembers","chatroom",{area:"api"}),editMembership:this._options.tfsContext.getActionUrl("EditMembership","chatroom",{area:"api"}),addIdentities:this._options.tfsContext.getActionUrl("AddIdentities","chatroom",{area:"api"})},u=o.Enhancement.enhance(er,i,{customGroupId:this._options.RoomId,setInitialFocus:!0,actionUrls:r,tfsContext:this._options.tfsContext,showAllGroupsIfCollection:!0})},t.prototype.onClose=function(t){$.isFunction(this._options.dialogClosed)&&this._options.dialogClosed(this._membersModified===!0);n.prototype.onClose.call(this,t)},t._controlType="ManageChatRoomMembersDialog",t}(y.ModalDialogO);t.ManageChatRoomMembersDialog=bi;i.classExtend(bi,u.TfsContext.ControlExtensions);er=function(n){function t(t){n.call(this,$.extend({isTeam:!1,editMembers:!0},t))}return __extends(t,n),t.enhancementTypeName="tfs.ChatRoom.ChatRoomMembersControl",t}(ot.MembershipControl);i.classExtend(er,u.TfsContext.ControlExtensions);ki=function(n){function t(t){n.call(this,t);this._textTruncationLimit=90;this._areaPathField="Area Path";this._tfsContext=this._options.tfsContext||u.TfsContext.getDefault();this._roomId=this._options.RoomId;this._roomName=this._options.RoomName;this._serviceAccountId=this._options.ServiceAccountId;this._collectionName=this._options.CollectionName;this._teamDefaults=[];this._errorManager=[];this._dynamicIndex=0;this._defaultIndex=0;this._subscriberList=[];this._subscriberList.push(s.ChatAlertsMemberRoom);this._subscriberList.push(s.ChatAlertsMemberEveryone);this._areaPathFilterList=[];this._areaPathFilterList.push(s.ChatAlertsAreaPathUnder);this._areaPathFilterList.push(s.ChatAlertsAreaPathIn);this._witStore=this._options.witService||this._getWitStore(this._tfsContext);this._gitClient=this._options.gitService||this._getGitClientService(this._tfsContext);this._tfvcClient=this._options.tfvcService||this._getTfvcClientService(this._tfsContext);this._customizableRoomTemplates=[];this._alertsMarkedForDeletion=[];this._areaPaths=[];this._gitProjects=[];this._projectRepoInfo=[];this._isAreaPathsQueried=!1;this._buildDefinitionCache={};this._eventTypeSectionMap={CheckinEvent:"ChatCodeAlerts",CodeReviewChangedEvent:"ChatCodeReviewAlerts",BuildCompletedEvent:"ChatBuildAlerts",WorkItemChangedEvent:"ChatWorkItemAlerts",GitPushEvent:"ChatCodeAlerts",GitPullRequestEvent:"ChatPullRequestAlerts"};this._eventMap=[];this._buildEventMap()}return __extends(t,n),t.prototype.initialize=function(){var n=this,t=this._element;this._statusIndicator=o.BaseControl.createIn(p.StatusIndicator,t,{center:!0,imageClass:"big-status-progress",message:"",throttleMinTime:0});this._statusIndicator.start();this._chatService=oi();this._alertsManager=ht.ProjectCollection.getConnection(this._tfsContext).getService(f.AlertsManager);this._controlId=o.getId();this._errorPane=o.BaseControl.createIn(v.MessageAreaControl,this._element);this._witStore.beginGetFields(function(t){if(t&&t.length>0)for(var i=0;i<t.length;i++)if(t[i].referenceName===gt.CoreFieldRefNames.AreaPath){n._areaPathField=t[i].name;break}n.beginLoadAlerts()})},t.prototype.beginLoadAlerts=function(){var n=this;this._alertsManager.dropCachedAlerts();$(this).trigger("loadingAlertsStarted");this._alertsManager.getAlertsForChatRoom(this._roomId,function(t){n._alertsManager.getChatRoomTemplates(function(i){n._roomTemplates=i;$.each(i,function(t,i){n._customizableRoomTemplates.push(i)});n._tfvcClient.beginGetProjectInfos(function(i){n._allProjectsInfo=i;n._deserializeMetadata(t);n._roomAlerts=t;n._getTeamDefaults(function(){n._createPredefinedCustomizableAlertsFromTeamDefaults();n._deleteDirtyCodeChangeAlerts();n._setIsDynamicOnAlerts();n._statusIndicator&&n._statusIndicator.complete();n._decorate();n._populate();$(n).trigger("loadingAlertsCompleted")})},function(){n._statusIndicator&&n._statusIndicator.complete();n._setError(s.ChatAlertsErrorRetrieving,!0);$(n).trigger("loadingAlertsError")})})},function(){n._statusIndicator&&n._statusIndicator.complete();n._setError(s.ChatAlertsErrorRetrieving,!0);$(n).trigger("loadingAlertsError")})},t.prototype.getRoomAlerts=function(){return this._roomAlerts},t.prototype._setIsDynamicOnAlerts=function(){for(var i,u,r,n=0;n<this._roomAlerts.length;n++)if(this._roomAlerts[n].eventTypeName===t.BuildEventTypeName)for(i=0;i<this._teamDefaults.length;i++){if(this._teamDefaults[i].Builds.length===0){this._roomAlerts[n].metadata.parameters.IsDynamic=!0;continue}for(u=!1,r=0;r<this._teamDefaults[i].Builds.length;r++)if(d.ignoreCaseComparer(this._roomAlerts[n].metadata.parameters.Name,this._teamDefaults[i].Builds[r].Name)===0){this._roomAlerts[n].metadata.parameters.IsDynamic=!1;u=!0;break}else this._roomAlerts[n].metadata.parameters.IsDynamic=!0;if(u)break}else if(this._roomAlerts[n].eventTypeName===t.CheckinEventTypeName||this._roomAlerts[n].eventTypeName===t.GitPushEventTypeName)for(i=0;i<this._teamDefaults.length;i++)if(this._roomAlerts[n].metadata.parameters.ProjectName===this._teamDefaults[i].ProjectName){this._roomAlerts[n].metadata.parameters.IsDynamic=!1;break}else this._roomAlerts[n].metadata.parameters.IsDynamic=!0;else if(this._roomAlerts[n].eventTypeName===t.WorkItemEventTypeName||this._roomAlerts[n].eventTypeName===t.CodeReviewEventTypeName)for(i=0;i<this._teamDefaults.length;i++){if(this._teamDefaults[i].AreaPaths.length===0){this._roomAlerts[n].metadata.parameters.IsDynamic=!0;continue}for(u=!1,r=0;r<this._teamDefaults[i].AreaPaths.length;r++)if(this._roomAlerts[n].metadata.parameters.AreaPath===this._teamDefaults[i].AreaPaths[r].Path){this._roomAlerts[n].metadata.parameters.IsDynamic=!1;u=!0;break}else this._roomAlerts[n].metadata.parameters.IsDynamic=!0;if(u)break}},t.prototype._deleteDirtyCodeChangeAlerts=function(){for(var f,i,r=[],u=[],n=0;n<this._roomAlerts.length;n++)if(this._roomAlerts[n].eventTypeName===t.CheckinEventTypeName)for(f=this._roomAlerts[n].metadata.parameters.ProjectName,i=0;i<this._allProjectsInfo.length;i++)if(f===this._allProjectsInfo[i].project.name&&this._allProjectsInfo[i].supportsGit){u.push(n);r.push(this._roomAlerts[n]);break}for(n=0;n<u.length;n++)this._roomAlerts.splice(u[n],1);r.length>0&&this._deleteAlerts(r,function(){},function(){})},t.prototype._decorate=function(){var o=this,h=$("<div>").addClass("header").appendTo(this._element);$("<span>").addClass("chat-alert-instructions").text(this._tfsContext.isHosted?s.ChatAlertsDialogHeaderService:s.ChatAlertsDialogHeaderServer).appendTo(h);this._tabsControlDiv=$(hi("div")).appendTo(this._element);var n=$(hi("ul")).appendTo(this._tabsControlDiv),t=this.getId(),i="build_"+t,r="code_"+t,u="work_"+t,f="codereview_"+t,e="pullrequest_"+t;this._buildContent=$(hi("div")).attr("id",i).appendTo(this._tabsControlDiv);this._codeContent=$(hi("div")).attr("id",r).appendTo(this._tabsControlDiv);this._workContent=$(hi("div")).attr("id",u).appendTo(this._tabsControlDiv);this._codeReviewContent=$(hi("div")).attr("id",f).appendTo(this._tabsControlDiv);this._pullRequestContent=$(hi("div")).attr("id",e).appendTo(this._tabsControlDiv);this._tabsControlDiv.tabs({select:function(n,t){o._clearError();b.delay(this,0,function(){$(t.tab).focus()})}});n.append($('<li><a href="#'+i+'">'+s.ChatAlertsBuildTab+"<\/a><\/li>"));n.append($('<li><a href="#'+r+'">'+s.ChatAlertsCodeTab+"<\/a><\/li>"));n.append($('<li><a href="#'+u+'">'+s.ChatAlertsWorkTab+"<\/a><\/li>"));n.append($('<li><a href="#'+f+'">'+s.ChatAlertsCodeReviewTab+"<\/a><\/li>"));n.append($('<li><a href="#'+e+'">'+s.ChatAlertsPullRequestTab+"<\/a><\/li>"));this._tabsControlDiv.tabs("refresh");this._tabsControlDiv.tabs("option","active",0)},t.prototype._populate=function(){var i=this,n=this._groupBy(this._roomAlerts,function(n){return i._eventTypeSectionMap[n.eventTypeName]});this._renderSection(this._buildContent,s.ChatAlertsBuildDescription,n.ChatBuildAlerts,"build",t.BuildEventTypeName,this._setBuildComboValues,this._addUpdateBuildAlert);this._renderSection(this._codeContent,s.ChatAlertsCodeDescription,n.ChatCodeAlerts,"code",t.CheckinEventTypeName,this._setCodeDataComboValues,this._addUpdateCodeChangeAlert);this._renderSection(this._workContent,s.ChatAlertsWorkDescription,n.ChatWorkItemAlerts,"work",t.WorkItemEventTypeName,this._setWorkItemAndCodeReviewComboValues,this._addUpdateWorkItemAlert);this._renderSection(this._codeReviewContent,s.ChatAlertsCodeReviewDescription,n.ChatCodeReviewAlerts,"codereview",t.CodeReviewEventTypeName,this._setWorkItemAndCodeReviewComboValues,this._addUpdateCodeReviewAlert);this._renderSection(this._pullRequestContent,s.ChatAlertsPullRequestDescription,n.ChatPullRequestAlerts,"pullrequest",t.GitPullRequestEventTypeName,this._setCodeDataComboValues,this._addUpdatePullRequestAlert);tt.logTracePoint("ChatRoom.ChatRoomAlertsView.RenderComplete")},t.prototype._setWorkItemAndCodeReviewComboValues=function(n,t,i){n._witStore.beginGetProjects(function(r){var u,f;n._allProjects=r;u=n._getWorkItemAndCodeReviewData(r);i.setSource(u);f=setInterval(function(){n._areaPaths.length!==0&&(clearInterval(f),n.setComboFromAlert(i,t))},100)},function(){n._setError(s.ErrorRetrievingTeamProjects,!0)})},t.prototype._getWorkItemAndCodeReviewData=function(n){var i=this,t,r;if(!this._isAreaPathsQueried)for(this._isAreaPathsQueried=!0,t=0;t<n.length;t++)r=n[t],r.beginGetNodes(function(){i._areaPaths.push(this.getAreaNode(!0))});return function(){function n(t,i){var r,e,u=t.children,f;if(i?(f=lt.TreeNode.create(t.name),i.add(f),i=f):i=lt.TreeNode.create(t.name),u)for(r=0,e=u.length;r<e;r++)t=u[r],n(t,i);return i}return $.map(i._areaPaths,function(t){return n(t,null)})}},t.prototype._renderSection=function(n,t,i,r,u,f,e){var s=$("<div>").addClass("description-container").appendTo(n),o;$('<table style="margin:15px"><tr><td><span class = "description-icon '+r+'"><\/span><\/td><td class="description-text">'+t+"<\/td><\/tr><\/table>").appendTo(n);o=$("<div>").addClass("chat-alert-section").appendTo(n);i&&this._renderAlerts(o,i,r,f,e,!1,!1);this._renderDynamicEventSection(o,this._eventMap[u])},t.prototype._renderDynamicEventSection=function(n,t){$(n).append('<div class="dynamicEventSection"><div class="newAlert"><\/div><div><a href="#" class="add-new-alert"><span class="icon icon-add" title="'+t.createNewText+'"><\/span><span class="add-new-alert-text"> '+t.createNewText+"<span><\/a><\/div><\/div>");var i=$(".add-new-alert",n);i.data("enabled",!0);i.click(function(){return i.data("enabled")&&t.createAlert($(".newAlert",n),i,t),i.data("enabled",!1),!1})},t.prototype._parseBuildProjectFromPath=function(n){if(!n)return null;var t=n.split("\\");return t.length>1?t[1]:null},t.prototype._getBuildProjects=function(n){for(var t=[],i=0;i<n.length;i++)t.push(n[i].project.name);return t.sort(function(n,t){return d.localeIgnoreCaseComparer(n,t)}),t},t.prototype._beginGetBuildDefinitions=function(n){var t=n.id,i,r;return this._buildDefinitionCache[t]||(i=this._createCollectionContext(),r=ni.getCollectionClient(ti.BuildHttpClient2_2,i),this._buildDefinitionCache[t]=r.getDefinitions(n.name)),this._buildDefinitionCache[t]},t.prototype._setBuildComboValues=function(n,i,r,u,f){n._tfvcClient.beginGetProjectInfos(function(e){var a,h,c,y;if(n._allProjectsInfo=e,a=i.metadata.parameters.ProjectId||n._parseBuildProjectFromPath(i.metadata.parameters.FullPath),a){for(h=null,c=0;c<n._allProjectsInfo.length;c++)if(a===n._allProjectsInfo[c].project.name||d.equals(a,n._allProjectsInfo[c].project.id,!0)){h=n._allProjectsInfo[c];break}if(y=n._getBuildProjects(n._allProjectsInfo),r.setSource(y),h){r.setText(h.project.name);var w=h.project.name,p=h.project.id,b=u.find(".secondCombo")[0],v=o.BaseControl.createIn(l.Combo,$(b),{mode:"drop",allowEdit:!0,change:function(r){var u;if(r.getSelectedIndex()!==-1){var y=r.getBehavior().getDataSource(),o=y.getItem(r.getSelectedIndex()),c=o.uri,h=o.name,l=o.id,b=i.metadata.parameters.Name;if(i.metadata.parameters.Name=h,i.metadata.parameters.FullPath=c,i.metadata.parameters.DefinitionId=l,i.metadata.parameters.ProjectId=p,u=n._getAlertIndexes(i),u.length>1){n._setError(d.format(s.ChatAlertsBuildDefinitionAlreadyExists,h,w),!0,n._getAlertId(i,f));return}if(n._clearError(n._getAlertId(i,f)),b===""&&i.metadata.parameters.ComboId&&i.metadata.parameters.ComboId.indexOf("default")===0&&n._clearError(n._getAlertId(i,i.metadata.ComboId)),u.length!==0){var e=n._roomAlerts[u[0]],k=n._getTemplateByTag(e.metadata.templateTag),a={Name:h,FullPath:c,ComboId:f,MemberSubscription:e.metadata.parameters.MemberSubscription,IsDynamic:!0,ProjectId:p,DefinitionId:l},v=n._buildAlert(k,e.metadata.isEnabled,a);n._formatAlertFilterFieldValue(v,t.BuildDefinitionUriFieldName,a.FullPath);n._replaceAlert(e,v)}}}});v.getElement().addClass("build-combo");n._beginGetBuildDefinitions(h.project).then(function(n){var t=n.sort(function(n,t){return d.localeIgnoreCaseComparer(n.name,t.name)}),f=!!i.metadata.parameters.DefinitionId,r,u;v.setSource(t);v.getBehavior().getDataSource().getItemText=function(n){var i=t[n];return i.type===ii.DefinitionType.Xaml?i.name+" "+s.ChatAlertsXamlBuildDisplayText:i.name};r=f?t.filter(function(n){return n.id===i.metadata.parameters.DefinitionId}):t.filter(function(n){return d.localeIgnoreCaseComparer(n.name,i.metadata.parameters.Name)===0});r.length>0&&(u=t.indexOf(r[0]),v.setSelectedIndex(u))},function(){n._errorPane.setError(s.ErrorRetrievingBuildDefinitions)})}}})},t.prototype._getBuildData=function(n){for(var i=[],t=0;t<n.length;t++)i.push(n[t].name);return i},t.prototype._createDynamicBuildAlert=function(n,t,i){var r=this;this._tfvcClient.beginGetProjectInfos(function(u){r._allProjectsInfo=u;var f=r._getBuildProjects(r._allProjectsInfo),e=r._getTemplateByTag(i.templates[0]),o=r._buildAlert(e,!0,{Name:"",FullPath:"",ProjectId:""}),s="_"+ ++r._dynamicIndex;r._renderDynamicAlert(s,o,"build",f,n,t,r._addUpdateBuildAlert)},function(){r._setError(s.ErrorRetrievingTeamProjects,!0)})},t.prototype._getRepoId=function(n,t){var i=this._projectRepoInfo[n],r;if(i!==undefined&&i!==null)for(r=0;r<i.length;r++)if(d.ignoreCaseComparer(i[r].name,t)===0)return i[r].id;return null},t.prototype._setCodeDataComboValues=function(n,i,r,u,f){n._tfvcClient.beginGetProjectInfos(function(e){var a=i.metadata.parameters.ProjectName,h,c,y,p,v;for(n._allProjectsInfo=e,a=i.metadata.parameters.ProjectName,h=null,c=0;c<n._allProjectsInfo.length;c++)if(a===n._allProjectsInfo[c].project.name){h=n._allProjectsInfo[c];break}y=n._getCodeData(n._allProjectsInfo,!1,i.eventTypeName===t.GitPullRequestEventTypeName);r.setSource(y);n.setComboFromAlert(r,i);h!==null&&h.supportsGit&&(p=u.find(".secondCombo")[0],v=o.BaseControl.createIn(l.Combo,$(p),{mode:"drop",allowEdit:!0,change:function(t){var e,o;if(t.getSelectedIndex()!==-1){var r=t.getText(),u=n._getRepoId(a,r),h=i.metadata.parameters.RepoName;if(i.metadata.parameters.RepoName=r,i.metadata.parameters.RepoId=u,e=n._getAlertIndexes(i),e.length>1){n._setError(d.format(s.ChatAlertsGitRepoAlreadyExists,r,a),!0,n._getAlertId(i,f));return}(n._clearError(n._getAlertId(i,f)),h===""&&i.metadata.parameters.ComboId&&i.metadata.parameters.ComboId.indexOf("default")===0&&n._clearError(n._getAlertId(i,i.metadata.ComboId)),e.length!==0)&&(o=n._roomAlerts[e[0]],o.metadata.parameters.RepoName=r,o.metadata.parameters.RepoId=u,u!==null&&n._formatAlertFilterFieldValueByIndex(o,0,u,!0))}}}),v.getElement().addClass("repo-combo"),n._gitClient.beginGetProjectRepositories(h.project.id,function(t){var u,r;for(t.sort(function(n,t){return d.localeIgnoreCaseComparer(n.name,t.name)}),n._projectRepoInfo[h.project.name]=t,u=[],r=0;r<t.length;r++)u.push(t[r].name);v.setSource(u);v.setText(i.metadata.parameters.RepoName)}))},function(){n._errorPane.setError(s.ErrorRetrievingTeamProjects)})},t.prototype._getCodeData=function(n,t,i){for(var u=[],r=0;r<n.length;r++)(!i||i&&n[r].supportsGit)&&u.push(n[r].project.name);return u.sort(function(n,t){return d.localeIgnoreCaseComparer(n,t)}),u},t.prototype._createDynamicCodeChangeAlert=function(n,t,i){var r=this;this._tfvcClient.beginGetProjectInfos(function(u){r._allProjectsInfo=u;var f=r._getCodeData(r._allProjectsInfo,!0,!1),e=r._getTemplateByTag(i.templates[0]),o=r._buildAlert(e,!0,{Name:"",FullPath:""}),s="_"+ ++r._dynamicIndex;r._renderDynamicAlert(s,o,"code",f,n,t,r._addUpdateCodeChangeAlert)},function(){r._setError(s.ErrorRetrievingTeamProjects,!0)})},t.prototype._createDynamicWorkItemAndCodeReviewAlert=function(n,t,i){var r=this;this._witStore.beginGetProjects(function(u){r._allProjects=u;var f=r._getWorkItemAndCodeReviewData(u),e=r._getTemplateByTag(i.templates[0]),o=r._buildAlert(e,!0,{Name:"",FullPath:""}),s="_"+ ++r._dynamicIndex;r._renderDynamicAlert(s,o,i.idPrefix,f,n,t,i.addUpdateAlert)},function(){r._setError(s.ErrorRetrievingTeamProjects,!0)})},t.prototype._createDynamicPullRequestAlert=function(n,t,i){var r=this;this._tfvcClient.beginGetProjectInfos(function(u){r._allProjectsInfo=u;var f=r._getCodeData(r._allProjectsInfo,!0,!0),e=r._getTemplateByTag(i.templates[0]),o=r._buildAlert(e,!0,{Name:"",FullPath:""}),s="_"+ ++r._dynamicIndex;r._renderDynamicAlert(s,o,"pullrequest",f,n,t,r._addUpdatePullRequestAlert)},function(){r._setError(s.ErrorRetrievingTeamProjects,!0)})},t.prototype._getWitStore=function(n){return ht.ProjectCollection.getConnection(n).getService(bt.WorkItemStore)},t.prototype._getGitClientService=function(n){return ht.ProjectCollection.getConnection(n).getService(kt.GitClientService)},t.prototype._getTfvcClientService=function(n){return ht.ProjectCollection.getConnection(n).getService(dt.TfvcClientService)},t.prototype._createPredefinedCustomizableAlertsFromTeamDefaults=function(){var n=this,i=this._getTemplateByTag(this._eventMap[t.BuildEventTypeName].templates[0]),r=this._getTemplateByTag(this._eventMap[t.CheckinEventTypeName].templates[0]),u=this._getTemplateByTag(this._eventMap[t.GitPushEventTypeName].templates[0]),f=$.map([this._eventMap[t.WorkItemEventTypeName].templates[0],this._eventMap[t.CodeReviewEventTypeName].templates[0]],function(t){return n._getTemplateByTag(t)});$.each(this._teamDefaults,function(o,s){var l,c,a,v,h;for($.each(s.Builds,function(r,u){var e={Name:u.Name,FullPath:u.FullPath},f=n._buildAlert(i,!1,e);n._hasAlert(f)||(n._formatAlertFilterFieldValue(f,t.BuildDefinitionUriFieldName,u.FullPath),n._roomAlerts.push(f))}),$.each(f,function(t,i){$.each(s.AreaPaths,function(t,r){var f={AreaPath:r.Path,IncludeChildren:r.IncludeChildren},u=n._buildAlert(i,!1,f);n._hasAlert(u,function(n,t){return n.AreaPath==t.AreaPath})||(n._formatAlertFilterFieldValue(u,n._areaPathField,r.Path),n._setAlertFilterOperatorValue(u,n._areaPathField,r.IncludeChildren?e.OperatorUnder:e.OperatorEqualTo),n._roomAlerts.push(u))})}),l=!1,c=0;c<n._allProjectsInfo.length;c++)if(s.ProjectName&&s.ProjectName===n._allProjectsInfo[c].project.name&&n._allProjectsInfo[c].supportsGit){l=!0;break}l?(a={ProjectName:s.ProjectName,RepoName:"",ComboId:"default_"+ ++n._defaultIndex},h=n._buildAlert(u,!1,a),n._hasAlert(h,function(n,t){return n.ProjectName==t.ProjectName})||(n._formatAlertFilterFieldValueByIndex(h,0,""),n._roomAlerts.push(h))):(v={ProjectName:s.ProjectName},h=n._buildAlert(r,!1,v),n._hasAlert(h)||(n._formatAlertFilterFieldValue(h,e.FieldNameTeamProject,s.ProjectName),n._roomAlerts.push(h)))})},t.prototype._renderAlerts=function(n,t,i,r,u,f,e,h){var a=this,c;h===void 0&&(h=null);t.sort(function(n,t){return!n.isBasicAlert||!t.isBasicAlert||n.isBasicAlert&&t.isBasicAlert?n.isBasicAlert?1:-1:d.localeIgnoreCaseComparer(n.metadata.templateTag,t.metadata.templateTag)});c=this;$.each(t,function(t,v){var tt="chatAlert_"+i,k=tt+t,y,d,nt,p,g,w,b;h!==undefined&&h!==null&&(k=h);y=$("<div class='chat-alert'>").addClass(v.metadata.templateTag);f?n.replaceWith(y):y.appendTo(n);d=$("<input id='"+k+"' type='checkbox' />").appendTo(y).bind("change",ei(a,a._onCheckboxChanged));d.prop("checked",v.metadata.isEnabled);d.data("alert",v);$('<div class="firstCombo" style="display:inline-block"><\/div>').appendTo(y);$('<div class="secondCombo" style="display:inline-block"><\/div>').appendTo(y);nt=y.find(".firstCombo")[0];p=o.BaseControl.createIn(l.Combo,$(nt),{mode:"drop",allowEdit:!0,change:function(n){n.getSelectedIndex()!==-1&&(n.getSelectedIndex()!==0||n.getText()!==s.ChatAlertsNoDataAvailable)&&u(this,v,k,i,y,c,!0,y,!0)}});p.getElement().addClass("event-combo");(i==="work"||i==="codereview")&&p.setType("tree");r(c,v,p,y,k);e&&$(p.getInput()).focus();g=a._getAlertTooltipText(v);g&&y.attr("title",g);a._eventMap[v.eventTypeName]&&(w=o.BaseControl.createIn(l.Combo,y,{mode:"drop",allowEdit:!1,change:function(n){var i=c._getAlertIndexAndAlert(v),t=null;i!==null&&(t=i.alert,c._addPeopleInfoToAlert(t,n.getSelectedIndex(),c._eventMap[t.eventTypeName],d))}}),w.getElement().addClass("subscription-combo"),w.setSource(a._subscriberList),v.metadata&&v.metadata.parameters&&v.metadata.parameters.MemberSubscription?v.metadata.parameters.MemberSubscription===1?w.setSelectedIndex(1,!1):w.setSelectedIndex(0,!1):w.setSelectedIndex(0,!1),a._eventMap[v.eventTypeName].areaPathFilter&&(b=o.BaseControl.createIn(l.Combo,y,{mode:"drop",allowEdit:!1,change:function(n){var i=c._getAlertIndexAndAlert(v),t=null;i!==null&&(t=i.alert,d.data("alert",t),n.getSelectedIndex()===0?t.metadata.parameters.IncludeChildren=!0:n.getSelectedIndex()===1&&(t.metadata.parameters.IncludeChildren=!1),c._formatAreaPathField(t,t.metadata.parameters))}}),b.getElement().addClass("area-path-combo"),b.setSource(a._areaPathFilterList),v.metadata&&v.metadata.parameters&&typeof v.metadata.parameters.IncludeChildren!="undefined"?v.metadata.parameters.IncludeChildren===!1?b.setSelectedIndex(1,!1):b.setSelectedIndex(0,!1):b.setSelectedIndex(0,!1)));v.metadata&&v.metadata.parameters&&v.metadata.parameters.IsDynamic&&v.id?a._createDeleteButton(v.id,y,function(){return c._onDeleteButtonClicked(this),!1}):v.metadata&&v.metadata.parameters&&v.metadata.parameters.IsDynamic&&v.metadata.parameters.ComboId?a._createDeleteButton(v.metadata.parameters.ComboId,y,function(){var n=$(this).attr("data-alertId"),t;return c._clearError(n),t=c._getAlertByComboId(n,!0),c._deleteAlert(t,this),!1}):(a._createDeleteButton(k,y,function(){return!1},s.ChatEventCannotBeDeleted),p.setEnabled(!1))})},t.prototype._onDeleteButtonClicked=function(n){var t=$(n).attr("data-alertId"),i=this._getAlertByAlertId(t);if(this._clearError(t),i===null){this._setFocusAndDeleteAlert(n);return}this._markAlertForDeletion(i,n)},t.prototype._createDeleteButton=function(n,t,i,r){r===void 0&&(r=null);var u=$('<a class="delete-alert-button" href="#" data-alertId="'+n+'"><span class="icon icon-delete"><\/span><\/a>').appendTo(t);return r!==undefined&&r!==null&&(u.attr("title",r),u.addClass("disabled")),u.click(i),u},t.prototype._markAlertForDeletion=function(n,t){n!==null&&(this._alertsMarkedForDeletion.push(n.alert),this._deleteAlert(n,t))},t.prototype._deleteAlert=function(n,t){n!==null&&(this._roomAlerts.splice(n.index,1),t!==null&&this._setFocusAndDeleteAlert(t))},t.prototype._setFocusAndDeleteAlert=function(n){var t=$("input",$(n).parent().next())[0];t!==undefined?t.focus():$(".add-new-alert",$(n).closest(".chat-alert-section")).focus();$(n).parent().remove()},t.prototype._renderDynamicAlert=function(n,t,i,r,u,f,e){var y=this,a="chatAlert_"+i+n,h=$("<div class='chat-alert'>").addClass(t.metadata.templateTag).appendTo(u),p=$("<input id='"+a+"' type='checkbox' />").appendTo(h).bind("change",ei(this,this._onCheckboxChanged)),k,w,b,c,v;p.prop("checked",t.metadata.isEnabled);p.data("alert",t);k=t;$('<div class="firstCombo" style="display:inline-block"><\/div>').appendTo(h);$('<div class="secondCombo" style="display:inline-block"><\/div>').appendTo(h);w=h.find(".firstCombo")[0];r&&typeof r=="object"&&r.length===0&&r.push(s.ChatAlertsNoDataAvailable);b={mode:"drop",allowEdit:!1,change:function(n){if(n.getSelectedIndex()!==-1){if(n.getSelectedIndex()===0&&n.getText()===s.ChatAlertsNoDataAvailable){n.setInputText("",!1);return}e(this,t,a,i,u,y,!1,h,!0)&&(h.remove(),f.data("enabled",!0))}}};c=o.BaseControl.createIn(l.Combo,$(w),b);(i==="work"||i==="codereview")&&c.setType("tree");c.setSource(r);$(c.getInput()).focus();v=this._getAlertTooltipText(t);v&&h.attr("title",v);this._createDeleteButton(a,h,function(){var n=$(this).attr("data-alertId");return y._clearError(n),$(this).parent().remove(),f.data("enabled",!0),f.focus(),!1})},t.prototype._addPeopleInfoToAlert=function(n,t,i,r){var o,e,u,f;n.metadata&&n.metadata.parameters&&n.metadata.parameters.MemberSubscription===t||(o=this._getTemplateByTag(i.templates[0]),t===1&&(o=this._getTemplateByTag(i.templates[1])),e=n.metadata.parameters,e.MemberSubscription=t,u=this._buildAlert(o,n.metadata.isEnabled,e),f=this._getAlertIndexAndAlert(n),f===null&&n.metadata.parameters&&n.metadata.parameters.ComboId&&(f=this._getAlertByComboId(n.metadata.parameters.ComboId,!0)),f!==null&&this._roomAlerts.splice(f.index,1),i.formatFilterField(u,e),u.id=n.id,r.prop("checked",u.metadata.isEnabled),r.data("alert",u),this._roomAlerts.push(u))},t.prototype._formatBuildDefinitionField=function(n,i){this._formatAlertFilterFieldValue(n,t.BuildDefinitionUriFieldName,i.FullPath)},t.prototype._formatAreaPathField=function(n,t){this._formatAlertFilterFieldValue(n,this._areaPathField,t.AreaPath);this._setAlertFilterOperatorValue(n,this._areaPathField,t.IncludeChildren?e.OperatorUnder:e.OperatorEqualTo)},t.prototype._formatProjectNameField=function(n,t){this._formatAlertFilterFieldValue(n,e.FieldNameTeamProject,t.ProjectName)},t.prototype._formatRepoIdField=function(n,t){this._formatAlertFilterFieldValueByIndex(n,0,t.RepoId,!0)},t.prototype._addUpdateBuildAlert=function(n,i,r,u,f,e,o,h,c){var b=e._getTemplateByTag(e._eventMap[t.BuildEventTypeName].templates[0]),v=n.getText(),y,p,l,w,a;if(v==="")return!1;for(y=!1,p=null,l=0;l<e._allProjectsInfo.length;l++)if(v===e._allProjectsInfo[l].project.name){y=!0;p=e._allProjectsInfo[l];break}return y?(w={Name:"",FullPath:"",ComboId:r,MemberSubscription:0,IsDynamic:!0,ProjectId:p.project.id,DefinitionId:""},a=e._buildAlert(b,i.metadata.isEnabled,w),!e._checkForAlertError(a,e._getAlertId(i,r),d.format(s.ChatAlertsTeamProjectAlreadyExists,v)))?(e._replaceAlert(i,null),!1):(e._formatAlertFilterFieldValue(a,t.BuildDefinitionUriFieldName,w.FullPath),e._replaceAlert(i,a),e._renderAlerts(f,[a],u,e._setBuildComboValues,e._addUpdateBuildAlert,o,c,r),!0):!1},t.prototype._removeAlert=function(n){var t=this._getAlertIndexAndAlert(n);t!==null&&this._roomAlerts.splice(t.index,1)},t.prototype._addUpdateCodeChangeAlert=function(n,i,r,u,f,o,h,c,l){var g=0,w=o._getTemplateByTag(o._eventMap[t.CheckinEventTypeName].templates[0]),a=n.getText(),b,k,y,p,v;if(a==="")return!1;for(b=!1,k=null,y=0;y<o._allProjectsInfo.length;y++)if(a===o._allProjectsInfo[y].project.name){b=!0;k=o._allProjectsInfo[y];break}if(!b)return!1;if(p={ProjectName:a,ComboId:r,MemberSubscription:g,IsDynamic:!0},v=o._buildAlert(w,i.metadata.isEnabled,p),k.supportsGit)w=o._getTemplateByTag(o._eventMap[t.GitPushEventTypeName].templates[0]),p={ProjectName:a,RepoName:"",ComboId:r,MemberSubscription:g,IsDynamic:!0},v=o._buildAlert(w,i.metadata.isEnabled,p);else try{delete p.RepoName}catch(nt){}return o._checkForAlertError(v,o._getAlertId(i,r),d.format(s.ChatAlertsTeamProjectAlreadyExists,a))?(o._formatAlertFilterFieldValue(v,e.FieldNameTeamProject,a),o._replaceAlert(i,v),o._renderAlerts(f,[v],u,o._setCodeDataComboValues,o._addUpdateCodeChangeAlert,h,l,r),!0):(o._replaceAlert(i,null),!1)},t.prototype._addUpdateWorkItemAlert=function(n,i,r,u,f,e,o,h,c){var y=e._getTemplateByTag(e._eventMap[t.WorkItemEventTypeName].templates[0]),a=n.getText(),v,l;return a===""?!1:(v={AreaPath:a,ComboId:r,MemberSubscription:0,IsDynamic:!0,IncludeChildren:!0},l=e._buildAlert(y,i.metadata.isEnabled,v),!e._checkForAlertError(l,e._getAlertId(i,r),d.format(s.ChatAlertsAreaPathAlreadyExists,a)))?(e._replaceAlert(i,null),!1):(e._formatAlertFilterFieldValue(l,e._areaPathField,a),e._replaceAlert(i,l),e._renderAlerts(f,[l],u,e._setWorkItemAndCodeReviewComboValues,e._addUpdateWorkItemAlert,o,c,r),!0)},t.prototype._addUpdateCodeReviewAlert=function(n,i,r,u,f,e,o,h,c){var y=e._getTemplateByTag(e._eventMap[t.CodeReviewEventTypeName].templates[0]),a=n.getText(),v,l;return a===""?!1:(v={AreaPath:a,ComboId:r,MemberSubscription:0,IsDynamic:!0,IncludeChildren:!0},l=e._buildAlert(y,i.metadata.isEnabled,v),!e._checkForAlertError(l,e._getAlertId(i,r),d.format(s.ChatAlertsAreaPathAlreadyExists,a)))?(e._replaceAlert(i,null),!1):(e._formatAlertFilterFieldValue(l,e._areaPathField,a),e._replaceAlert(i,l),e._renderAlerts(f,[l],u,e._setWorkItemAndCodeReviewComboValues,e._addUpdateCodeReviewAlert,o,c,r),!0)},t.prototype._addUpdatePullRequestAlert=function(n,i,r,u,f,o,h,c,l){var p=o._getTemplateByTag(o._eventMap[t.GitPullRequestEventTypeName].templates[0]),a=n.getText(),y;if(a===""||(y=null,$.each(o._allProjectsInfo,function(n,t){if(d.ignoreCaseComparer(a,t.project.name)===0)return y=t,!1}),!y))return!1;var p=o._getTemplateByTag(o._eventMap[t.GitPullRequestEventTypeName].templates[0]),w={ProjectName:a,RepoName:"",ComboId:r,MemberSubscription:0,IsDynamic:!0},v=o._buildAlert(p,i.metadata.isEnabled,w);return o._checkForAlertError(v,o._getAlertId(i,r),d.format(s.ChatAlertsTeamProjectAlreadyExists,a))?(o._formatAlertFilterFieldValue(v,e.FieldNameTeamProject,a),o._replaceAlert(i,v),o._renderAlerts(f,[v],u,o._setCodeDataComboValues,o._addUpdatePullRequestAlert,h,l,r),!0):(o._replaceAlert(i,null),!1)},t.prototype._replaceAlert=function(n,t){n.id?this._markAlertForDeletion(this._getAlertIndexAndAlert(n),null):this._removeAlert(n);t!==null&&this._roomAlerts.push(t)},t.prototype._getAlertByComboId=function(n,t){if(t===void 0&&(t=!1),!this._roomAlerts)return null;for(var i=0;i<this._roomAlerts.length;i++)if((!t||this._roomAlerts[i].id===0)&&this._roomAlerts[i].metadata&&this._roomAlerts[i].metadata.parameters&&this._roomAlerts[i].metadata.parameters.ComboId!==undefined&&this._roomAlerts[i].metadata.parameters.ComboId!==null&&this._roomAlerts[i].metadata.parameters.ComboId===n)return{index:i,alert:this._roomAlerts[i]};return null},t.prototype._getAlertByAlertId=function(n){if(!this._roomAlerts)return null;for(var t=0;t<this._roomAlerts.length;t++)if(this._roomAlerts[t].id!==undefined&&this._roomAlerts[t].id!==null&&this._roomAlerts[t].id==n)return n!=0?{index:t,alert:this._roomAlerts[t]}:null;return null},t.prototype.setComboFromAlert=function(n,t){var i=this._getAlertDisplayText(t);n.setText(i,!1)},t.prototype._getAlertDisplayText=function(n){var i=s[n.metadata.templateTag];switch(n.metadata.templateTag){case this._eventMap[t.BuildEventTypeName].templates[0]:case this._eventMap[t.BuildEventTypeName].templates[1]:return d.htmlEncodeJavascriptAttribute(n.metadata.parameters.Name);case this._eventMap[t.WorkItemEventTypeName].templates[0]:case this._eventMap[t.WorkItemEventTypeName].templates[1]:case this._eventMap[t.CodeReviewEventTypeName].templates[0]:case this._eventMap[t.CodeReviewEventTypeName].templates[1]:return this._truncateText(d.htmlEncodeJavascriptAttribute(n.metadata.parameters.AreaPath),this._textTruncationLimit);case this._eventMap[t.CheckinEventTypeName].templates[0]:case this._eventMap[t.CheckinEventTypeName].templates[1]:case this._eventMap[t.GitPushEventTypeName].templates[0]:case this._eventMap[t.GitPushEventTypeName].templates[1]:case this._eventMap[t.GitPullRequestEventTypeName].templates[0]:case this._eventMap[t.GitPullRequestEventTypeName].templates[1]:return d.htmlEncodeJavascriptAttribute(n.metadata.parameters.ProjectName);default:return d.htmlEncodeJavascriptAttribute(d.format(i))}},t.prototype._getAlertTooltipText=function(n){switch(n.metadata.templateTag){case this._eventMap[t.WorkItemEventTypeName].templates[0]:case this._eventMap[t.WorkItemEventTypeName].templates[1]:case this._eventMap[t.CodeReviewEventTypeName].templates[0]:case this._eventMap[t.CodeReviewEventTypeName].templates[1]:var i=s.ChatRoomAreaPathUnder;return n.metadata.parameters&&typeof n.metadata.parameters.IncludeChildren!="undefined"&&(n.metadata.parameters.IncludeChildren||(i=s.ChatRoomAreaPathIn)),d.htmlEncodeJavascriptAttribute(d.format(i,n.metadata.parameters.AreaPath));default:return null}},t.prototype._truncateText=function(n,t){var i=n;return n.length>t&&(i=n.substring(0,t-4)+"..."),i},t.prototype._formatAlertFilterFieldValue=function(n,t,i,r){$.each(n.filter.clauses,function(n,u){u.fieldName===t&&(u.value=r?i:d.format(u.value,i))})},t.prototype._formatAlertFilterFieldValueByIndex=function(n,t,i,r){$.each(n.filter.clauses,function(n,u){n===t&&(u.value=r?i:d.format(u.value,i))})},t.prototype._setAlertFilterOperatorValue=function(n,t,i){$.each(n.filter.clauses,function(n,r){r.fieldName===t&&r.operator&&(r.operator=i)})},t.prototype._getTemplateByTag=function(n){for(var t=0;t<this._roomTemplates.length;t++)if(this._roomTemplates[t].basicTemplateTag===n)return this._roomTemplates[t];return null},t.prototype._groupBy=function(n,t){for(var u,i={},r=0;r<n.length;r++)u=t(n[r]),typeof i[u]=="undefined"&&(i[u]=[]),i[u].push(n[r]);return i},t.prototype._hasAlert=function(n,t){return this._getAlertIndexInList(this._roomAlerts,n,t)>=0},t.prototype._getAlertIndexInList=function(n,t,i){for(var u,r=0;r<n.length;r++){if(u=n[r],u===t)return r;if(t.categoryName===u.categoryName)if(i){if(i(t.metadata.parameters,u.metadata.parameters))return r}else if(this._compareObjects(t.metadata.parameters,u.metadata.parameters,["IsDynamic","MemberSubscription","ComboId","IncludeChildren"]))return r}return-1},t.prototype._getAlertIndexes=function(n,t){for(var r,u=[],i=0;i<this._roomAlerts.length;i++){if(r=this._roomAlerts[i],r===n){u.push(i);continue}if(n.categoryName===r.categoryName)if(t){if(t(n.metadata.parameters,r.metadata.parameters)){u.push(i);continue}}else if(this._compareObjects(n.metadata.parameters,r.metadata.parameters,["IsDynamic","MemberSubscription","ComboId","IncludeChildren"])){u.push(i);continue}}return u},t.prototype._getAlertIndexAndAlert=function(n,t){var i=this._getAlertIndexInList(this._roomAlerts,n,t);return i===-1?null:{index:i,alert:this._roomAlerts[i]}},t.prototype._compareObjects=function(n,t,i){if(n===t)return!0;if(!(n instanceof Object)||!(t instanceof Object)||n.constructor!==t.constructor)return!1;for(var r in n)if((!i||!($.inArray(r,i)>=0))&&n.hasOwnProperty(r)){if(!t.hasOwnProperty(r))return!1;if(n[r]!==t[r]&&(typeof n[r]!="object"||!this._compareObjects(n[r],t[r],i)))return!1}for(r in t)if((!i||!($.inArray(r,i)>=0))&&t.hasOwnProperty(r)&&!n.hasOwnProperty(r))return!1;return!0},t.prototype._getAlertsForTemplate=function(n){return $.map(this._roomAlerts,function(t){return t.metadata.templateTag===n.basicTemplateTag?t:null})},t.prototype._onCheckboxChanged=function(n){var t,i=$(n.target);t=i.data("alert");t.metadata.isEnabled=i.prop("checked")?!0:!1},t.prototype._buildAlert=function(n,t,i){i===void 0&&(i={});var r=this._alertsManager.createNewChatRoomAlertFromTemplate(n,this._roomId,this._serviceAccountId),u={templateTag:n.basicTemplateTag,parameters:i,isEnabled:t};return r.metadata=u,r},t.prototype._saveAlerts=function(n,t,i){this._serializeMetadata(n);this._alertsManager.saveAlerts(n,t,i)},t.prototype._deleteAlerts=function(n,t,i){this._serializeMetadata(n);this._alertsManager.deleteAlerts(n,t,i)},t.prototype._serializeMetadata=function(n){var t=this;$.each(n,function(n,i){i.metadata.parameters.hasOwnProperty("AreaPath")&&(i.metadata.parameters.AreaPath=t._areaPathConvert(i.metadata.parameters.AreaPath,!0));i.tag=b.stringifyMSJSON(i.metadata)})},t.prototype._deserializeMetadata=function(n){var t=this;$.each(n,function(n,i){i.metadata=b.parseMSJSON(i.tag,!1);i.metadata.parameters.hasOwnProperty("AreaPath")&&(i.metadata.parameters.AreaPath=t._areaPathConvert(i.metadata.parameters.AreaPath,!1))})},t.prototype._areaPathConvert=function(n,t){var i;if(n.length==0)return n;var o=n[0]==="\\",r=n.substr(o?1:0),u=r.indexOf("\\"),f=r.substr(0,u===-1?r.length:u),s=r.substr(u===-1?r.length:u),e=f;return t?(i=this._allProjectsInfo.filter(function(n){return n.project.name===f}),i.length>0&&(e=i[0].project.id)):(i=this._allProjectsInfo.filter(function(n){return n.project.id===f}),i.length>0&&(e=i[0].project.name)),(o?"\\":"")+e+s},t.prototype._hasDirtyGitPushAlerts=function(n){var i=this,r=!1;return $.each(n,function(n,u){if(u.eventTypeName===t.GitPushEventTypeName&&u.metadata.parameters.RepoName===""&&u.metadata.isEnabled){var f=d.format(s.ChatAlertsErrorNoRepositorySelected,u.metadata.parameters.ProjectName);i._setError(f,!0,i._getAlertId(u,u.metadata.parameters.ComboId));r=!0}}),r},t.prototype._saveChanges=function(n,t){var i=this;this._element.find("input[type=checkbox]").prop("disabled",!0);this._roomAlerts&&this._roomAlerts.length>0?this._saveAlerts(this._roomAlerts,function(){return i._handleSaveComplete(n,t)},function(r){return i._handleSaveComplete(n,t,r)}):this._alertsMarkedForDeletion.length===0?this._handleSaveComplete(n,function(n){i._setError(n,!0);t(n)},s.ChatAlertsNoData):n()},t.prototype.commitChanges=function(n,t){var i=this;if(this._hasDirtyGitPushAlerts(this._roomAlerts)){t(null);return}this._alertsMarkedForDeletion.length>0?this._deleteAlerts(this._alertsMarkedForDeletion,function(){i._saveChanges(n,t)},function(n){i._setError(s.ChatAlertDeleteError,!0);t(n)}):this._saveChanges(n,t)},t.prototype._handleSaveComplete=function(n,t,i){i?($(this).trigger("savingAlertError"),this._setError(s.ChatAlertsErrorSaving,!0),t(i)):($(this).trigger("savingAlertCompleted"),this._clearError(),n());this._element.find("input[type=checkbox]").removeAttr("disabled")},t.prototype._buildEventMap=function(){this._buildBuildEventMap();this._buildCheckinEventMap();this._buildWorkItemEventMap();this._buildCodeReviewEventMap();this._buildGitPushEventMap();this._buildGitPullRequestEventMap()},t.prototype._buildCodeReviewEventMap=function(){var n=this;this._eventMap[t.CodeReviewEventTypeName]={};this._eventMap[t.CodeReviewEventTypeName].eventTypeName=t.CodeReviewEventTypeName;this._eventMap[t.CodeReviewEventTypeName].templates=[];this._eventMap[t.CodeReviewEventTypeName].templates[0]="ChatRoomTemplateCodeReviewRequestedByMember";this._eventMap[t.CodeReviewEventTypeName].templates[1]="ChatRoomTemplateCodeReviewAreaPathTemplate";this._eventMap[t.CodeReviewEventTypeName].createNewText=s.ChatAlertsSelectAreaPath;this._eventMap[t.CodeReviewEventTypeName].createAlert=function(t,i,r){return n._createDynamicWorkItemAndCodeReviewAlert(t,i,r)};this._eventMap[t.CodeReviewEventTypeName].formatFilterField=function(t,i){return n._formatAreaPathField(t,i)};this._eventMap[t.CodeReviewEventTypeName].comboMode="tree";this._eventMap[t.CodeReviewEventTypeName].idPrefix="codereview";this._eventMap[t.CodeReviewEventTypeName].addUpdateAlert=this._addUpdateCodeReviewAlert;this._eventMap[t.CodeReviewEventTypeName].areaPathFilter=!0},t.prototype._buildBuildEventMap=function(){var n=this;this._eventMap[t.BuildEventTypeName]={};this._eventMap[t.BuildEventTypeName].templates=[];this._eventMap[t.BuildEventTypeName].templates[0]="ChatRoomTemplateBuildCompletedByMember";this._eventMap[t.BuildEventTypeName].templates[1]="ChatRoomTemplateBuildNameTemplate";this._eventMap[t.BuildEventTypeName].createNewText=s.ChatAlertsSelectBuild;this._eventMap[t.BuildEventTypeName].createAlert=function(t,i,r){return n._createDynamicBuildAlert(t,i,r)};this._eventMap[t.BuildEventTypeName].formatFilterField=function(t,i){return n._formatBuildDefinitionField(t,i)}},t.prototype._buildCheckinEventMap=function(){var n=this;this._eventMap[t.CheckinEventTypeName]={};this._eventMap[t.CheckinEventTypeName].templates=[];this._eventMap[t.CheckinEventTypeName].templates[0]="ChatRoomTemplateCheckinByMember";this._eventMap[t.CheckinEventTypeName].templates[1]="ChatRoomTemplateCheckInProjectTemplate";this._eventMap[t.CheckinEventTypeName].createNewText=s.ChatAlertsSelectProject;this._eventMap[t.CheckinEventTypeName].createAlert=function(t,i,r){return n._createDynamicCodeChangeAlert(t,i,r)};this._eventMap[t.CheckinEventTypeName].formatFilterField=function(t,i){return n._formatProjectNameField(t,i)}},t.prototype._buildWorkItemEventMap=function(){var n=this;this._eventMap[t.WorkItemEventTypeName]={};this._eventMap[t.WorkItemEventTypeName].eventTypeName=t.WorkItemEventTypeName;this._eventMap[t.WorkItemEventTypeName].templates=[];this._eventMap[t.WorkItemEventTypeName].templates[0]="ChatRoomTemplateWorkItemChangedByMember";this._eventMap[t.WorkItemEventTypeName].templates[1]="ChatRoomTemplateWorkItemAreaPathTemplate";this._eventMap[t.WorkItemEventTypeName].createNewText=s.ChatAlertsSelectAreaPath;this._eventMap[t.WorkItemEventTypeName].createAlert=function(t,i,r){return n._createDynamicWorkItemAndCodeReviewAlert(t,i,r)};this._eventMap[t.WorkItemEventTypeName].formatFilterField=function(t,i){return n._formatAreaPathField(t,i)};this._eventMap[t.WorkItemEventTypeName].comboMode="tree";this._eventMap[t.WorkItemEventTypeName].idPrefix="work";this._eventMap[t.WorkItemEventTypeName].addUpdateAlert=this._addUpdateWorkItemAlert;this._eventMap[t.WorkItemEventTypeName].areaPathFilter=!0},t.prototype._buildGitPushEventMap=function(){var n=this;this._eventMap[t.GitPushEventTypeName]={};this._eventMap[t.GitPushEventTypeName].eventTypeName=t.GitPushEventTypeName;this._eventMap[t.GitPushEventTypeName].templates=[];this._eventMap[t.GitPushEventTypeName].templates[0]="ChatRoomTemplateGitPushByMember";this._eventMap[t.GitPushEventTypeName].templates[1]="ChatRoomTemplateGitPushTemplate";this._eventMap[t.GitPushEventTypeName].formatFilterField=function(t,i){return n._formatRepoIdField(t,i)}},t.prototype._buildGitPullRequestEventMap=function(){var n=this;this._eventMap[t.GitPullRequestEventTypeName]={};this._eventMap[t.GitPullRequestEventTypeName].eventTypeName=t.GitPullRequestEventTypeName;this._eventMap[t.GitPullRequestEventTypeName].templates=[];this._eventMap[t.GitPullRequestEventTypeName].templates[0]="ChatRoomTemplateGitPullRequestByMember";this._eventMap[t.GitPullRequestEventTypeName].templates[1]="ChatRoomTemplateGitPullRequestTemplate";this._eventMap[t.GitPullRequestEventTypeName].createNewText=s.ChatAlertsSelectProject;this._eventMap[t.GitPullRequestEventTypeName].createAlert=function(t,i,r){return n._createDynamicPullRequestAlert(t,i,r)};this._eventMap[t.GitPullRequestEventTypeName].formatFilterField=function(t,i){return n._formatRepoIdField(t,i)}},t.prototype._getTeamDefaults=function(n){var t=this;this._chatService.beginGetTeamDefaultsForRoom(this._collectionName,this._roomId,function(i){t._teamDefaults=i;n()},function(i){t._setError(i.message||i,!0);$(t).trigger("loadingAlertsError");n()})},t.prototype._createCollectionContext=function(){var t=ui.getCollectionNameFromUrl(),n=$.extend(!0,{},fi.contextData);return fi.isHosted||(n.host.relativeUri+=t+"/",n.host.hostType=ri.ContextHostType.ProjectCollection,n.host.uri=""+n.host.uri+t+"/",n.host.name=t,n.collection={id:n.host.id,name:n.host.name,relativeUri:n.host.relativeUri,uri:n.host.uri}),n},t.prototype._getAlertId=function(n,t){return n.id!==0?n.id.toString():t},t.prototype._checkForAlertError=function(n,t,i){return this._hasAlert(n)?(this._setError(i,!0,t),!1):(this._isAlertError&&this._clearError(t),!0)},t.prototype._setError=function(n,t,i){t&&$(this).trigger("error");this._errorPane.setError(n);i!==undefined&&i!==null&&(this._isAlertError=!0,$.inArray(i,this._errorManager)===-1&&this._errorManager.push(i))},t.prototype._removeError=function(n){var t=$.inArray(n,this._errorManager);t!==-1&&this._errorManager.splice(t,1)},t.prototype._clearError=function(n){n!==undefined&&n!==null&&this._removeError(n);this._isAlertError&&this._errorManager.length===0&&($(this).trigger("errorCleared"),this._errorPane.clear(),this._isAlertError=!1)},t.enhancementTypeName="tfs.ChatRoom.ChatRoomAlertsView",t.BuildEventTypeName="BuildCompletedEvent",t.CheckinEventTypeName="CheckinEvent",t.CodeReviewEventTypeName="CodeReviewChangedEvent",t.WorkItemEventTypeName="WorkItemChangedEvent",t.GitPushEventTypeName="GitPushEvent",t.GitPullRequestEventTypeName="GitPullRequestEvent",t.BuildDefinitionUriFieldName="tb1:Definition/@Uri",t}(o.BaseControl);t.ChatRoomAlertsView=ki;i.classExtend(ki,u.TfsContext.ControlExtensions);li=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){t=$.extend({resizable:!1,width:640,height:450,title:d.format(s.ChatAlertsDialogTitle,t.RoomName)},t);t.buttons={saveAndCloseButton:{id:"ok",text:e.AlertDialogSaveAndCloseButtonText,click:ei(this,this._onSaveAndClose)},closeButton:{id:"cancel",text:e.AlertDialogCloseButtonText,click:ei(this,this.onCancelClick)}};n.prototype.initializeOptions.call(this,t)},t.prototype.initialize=function(){var t=this,i;n.prototype.initialize.call(this);this._element.addClass("chat-alert-view");this._chatAlertsControl=o.Enhancement.enhance(ki,this._element,$.extend({},this._options,{title:null}));$(this._chatAlertsControl).on("loadingAlertsCompleted",function(){t._addWarningMessage()});$(this._chatAlertsControl).on("error",function(){t.updateOkButton(!1)});$(this._chatAlertsControl).on("errorCleared",function(){t.updateOkButton(!0)});i=this._element.prev().addClass("titlebar-no-margin");this.updateOkButton(!0)},t.prototype.onCancelClick=function(){this.close()},t.prototype.onClose=function(t){$.isFunction(this._options.dialogClosed)&&this._options.dialogClosed();n.prototype.onClose.call(this,t)},t.prototype._addWarningMessage=function(){var i=$("<div>").addClass("chat-alert-warning-container").appendTo(this._element),n=$("<table><tr><td><\/td><td><\/td><td><\/td><\/tr><\/table>").appendTo(i);$("<span>").addClass("icon").addClass("icon-info").appendTo($(n).find("td")[0]);$("<span>").addClass("chat-alert-warning").text(s.ChatAlertsWarning).appendTo($(n).find("td")[1]);$("<a>").attr("href",t._moreInfoFWLink).attr("target","_blank").text("  "+s.ChatAlertsMoreInfo).appendTo($(n).find("td")[1])},t.prototype._onSaveAndClose=function(){var n=this;this.updateOkButton(!1);this._chatAlertsControl.commitChanges(function(){n.close()},function(){n.updateOkButton(!0)})},t._controlType="tfs.ChatRoom.ChatRoomAlertsDialog",t._moreInfoFWLink="https://go.microsoft.com/fwlink/?LinkId=301947",t}(y.ModalDialogO);t.ChatRoomAlertsDialog=li;di=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initializeOptions=function(t){var i=this,r=t.action==="update"?s.RenameRoom:s.NewRoom;t=$.extend({width:350,height:"auto",resizable:!1,cssClass:"update-room-dialog",title:r},t);t.buttons={saveAndCloseButton:{id:"ok",text:h.ModalDialogOkButton,click:function(){return i._onSaveAndNavigate()}},closeButton:{id:"cancel",text:h.ModalDialogCancelButton,click:function(){return i.close()}}};n.prototype.initializeOptions.call(this,t)},t.prototype.initialize=function(){var i=this,r;n.prototype.initialize.call(this);this._roomName=this._options.RoomName||"";this._roomId=this._options.RoomId||"";this._collectionName=this._options.collectionName||"";this._action=this._options.action==="update"?"UpdateRoom":"CreateRoom";this._roomData=this._options.action==="update"?{roomId:this._roomId,collectionName:this._collectionName}:{collectionName:this._collectionName};this._validators=[];$("<label />").text(s.NameLabel).attr("for",t.RoomNameInputId).appendTo(this._element);this._input=$("<input />").attr("type","text").attr("id",t.RoomNameInputId).addClass("input-text").appendTo(this._element).attr("maxlength",t.MaxNameLength).val(this._roomName).keydown(function(n){n.keyCode===et.KeyCode.ENTER&&i._onSaveAndNavigate(n)});this._options.action!=="update"&&at.ChatRoomModel.getCollectionsData().done(function(n){var r=[],f,u;$.each(n,function(n,t){i._options.collectionRoomsData[t.name].Data.CanCreateRoom&&r.push(t.name)});i._options.collectionRoomsData[i._collectionName].Data.CanCreateRoom||r.length>0&&(i._collectionName=r[0]);i._collectionName||r.length>0&&(i._collectionName=r[0]);r.length>1&&($("<label />").text(s.CollectionNameLabel).attr("for",t.CollectionInputId).appendTo(i._element),f=i._element.append("<div>").addClass("collectionCombo"),u=o.BaseControl.createIn(l.Combo,f,{mode:"drop",allowEdit:!1,change:function(n){i._collectionName=n.getText()}}),u.setSource(r),u.setText(i._collectionName))});r={center:!1,imageClass:"big-status-progress",message:"",throttleMinTime:0};this._statusIndicator=o.BaseControl.createIn(p.StatusIndicator,this._element,r);this._validators.push(o.Enhancement.enhance(wt.RequiredValidator,this._input,{message:s.RoomNameRequired,bindtokeystrokes:!0}));this._validators.push(o.Enhancement.enhance(wt.MaxLengthValidator,this._input,{maxLength:t.MaxNameLength,message:d.format(s.RoomNameMaxLengthReached,t.MaxNameLength)}));et.Watermark(this._input,{watermarkText:c.RequiredFieldWatermark});this._validators[0].validate();this._input.focus().select()},t.prototype.onClose=function(t){$.isFunction(this._options.dialogClosed)&&this._options.dialogClosed();n.prototype.onClose.call(this,t)},t.prototype._onSaveAndNavigate=function(){var n=this,t,u;if(tt.logTracePoint("ChatRoom.CreateUpdateRoomDialog.OnOKClick"),t=!0,$.each(this._validators,function(i,r){if(!r.isValid())return n._showError(r.getMessage()),t=!1,!1}),t){this.updateOkButton(!1);this._clearError();var i=null,r=!1,f=this._action;this._statusIndicator.start();u=this._input.val();oi().updateRoom(f,$.extend(this._roomData,{roomName:u,collectionName:this._collectionName}),function(t){var u=t.roomId;f==="CreateRoom"?oi().hasReadPermissionsToRoom(u,n._collectionName,function(f){f===!0?(tt.logTracePoint("ChatRoom.CreateUpdateRoomDialog.CreateComplete"),n._clearStatusAndClose(t)):i=window.setInterval(function(){r||(r=!0,oi().hasReadPermissionsToRoom(u,n._collectionName,function(u){u===!0?(tt.logTracePoint("ChatRoom.CreateUpdateRoomDialog.CreateComplete"),window.clearInterval(i),n._clearStatusAndClose(t)):r=!1},function(t){window.clearInterval(i);var r=s.ErrorGetPermissionAfterRoomCreation;n._onError(t,r)}))},1e3)},function(t){var i=s.ErrorGetPermissionAfterRoomCreation;n._onError(t,i)}):n._clearStatusAndClose(t)},function(t){var i=n._getUpdateRoomErrorMessage(t,u);n._onError(t,i)})}},t.prototype._onError=function(n,t){if(this._statusIndicator.complete(),n&&n.message&&(n.message=t),this._showError(t),$.isFunction(this._options.onError))this._options.onError(n);this.updateOkButton(!0)},t.prototype._getUpdateRoomErrorMessage=function(n,t){return!n||!n.type?s.Error_ChatRoomCreateUpdateRoom:n.type==="Microsoft.TeamFoundation.Chat.Server.RoomAlreadyExistsException"?d.format(s.Error_DuplicateRoom,t):n.type==="Microsoft.TeamFoundation.Chat.Server.UpdateRoomPermissionsException"?s.Error_CannotUpdateRoom:n.type==="Microsoft.TeamFoundation.Chat.Server.CreateRoomPermissionsException"?s.Error_CannotCreateRoom:s.Error_ChatRoomCreateUpdateRoom},t.prototype._clearStatusAndClose=function(n){if(this._statusIndicator&&(this._statusIndicator.dispose(),this._statusIndicator=null),this.close(),$.isFunction(this._options.onSave))this._options.onSave(n);this.updateOkButton(!0)},t.prototype._showError=function(n){this._errorSection||(this._errorSection=o.BaseControl.createIn(v.MessageAreaControl,this._element));this._errorSection.setError(hr(n))},t.prototype._clearError=function(){this._errorSection&&(this._errorSection.dispose(),this._errorSection=null)},t.RoomNameInputId="roomname-input",t.CollectionInputId="roomcollection-combo",t.MaxNameLength=80,t._controlType="tfs.ChatRoom.CreateUpdateRoomDialog",t}(y.ModalDialogO);t.CreateUpdateRoomDialog=di;i.classExtend(li,u.TfsContext.ControlExtensions);o.Enhancement.registerEnhancement(ui,"."+ui.coreCssClass);cr=function(n){function t(t,i,r){n.call(this,t.Name,i,r);this.RoomId=t.Id;var u=ui.ACTION_TODAY;this.link=ut.getHistoryService().getFragmentActionLink(u,{name:t.Name,collectionName:t.CollectionName});this.Permissions=t.Permissions;this.CollectionName=t.CollectionName}return __extends(t,n),t}(lt.TreeNode);or=function(n){function t(){n.apply(this,arguments);this._refreshIndex=0}return __extends(t,n),t.prototype.initialize=function(){n.prototype.initialize.call(this);this._eventManager=at.ChatRoomEventManager.GetInstance();this._securityManager=st.SecurityManager.create(this._options.Security.Namespace,{scope:this._options.Security.Scope,separator:this._options.Security.Separator,showAllGroupsIfCollection:!0});this.refresh()},t.prototype.initializeOptions=function(t){var i=this;n.prototype.initializeOptions.call(this,$.extend({clickToggles:!0,clickSelects:!0,contextMenu:{executeAction:function(n){return i._onPopupItemClick(n)},arguments:function(n){return{item:n.item}}}},t))},t.prototype.invalidatePromises=function(){this._roomsPromise=[];this._refreshIndex++},t.prototype.refresh=function(){delete this._rooms;delete this._roomsPromise;this._refreshIndex++;this.populate()},t.prototype._refreshAndSelectDefaultForCollection=function(n,t){var i=this;this._refreshIndex++;this._roomsPromise[n]=null;this._populateRoomsTreeForCollection(n,t,function(){i._selectDefaultRoom(t.children[0])})},t.prototype._createCollectionNode=function(n,t,i){var r=lt.TreeNode.create(n);return r.emptyFolderNodeText=s.Loading,i&&(this._updateTreeNodes(r,t),t.length===0&&(r.emptyFolderNodeText=s.NoRoomsInCollectionTree)),r.expanded=i,r.config.unselectable=!0,r.folder=!0,r.noContextMenu=!0,r},t.prototype._toggle=function(t,i,r){var u=this,f=t.expanded;return(n.prototype._toggle.call(this,t,i),!r)?t.folder?(f||this._getCollectionNameFromNodeElement(i).done(function(n){u._populateRoomsTreeForCollection(n,t,null)}),!0):!1:!1},t.prototype._getRoomsRefreshToken=function(n){return n+"_rooms"+this._refreshIndex},t.prototype._populateRoomsTreeForCollection=function(n,t,i){var r=this;oi().beginGetRooms(n,this,this._getRoomsRefreshToken(n),function(n){var f,u;n.sort(function(n,t){return d.ignoreCaseComparer(n.Name,t.Name)});t.clear();r._updateTreeNodes(t,n);n.length===0&&(t.emptyFolderNodeText=s.NoRoomsInCollectionTree);f=r._getNodeElement(t);t.expanded=!0;u=f.find("ul.tree-children:first");u&&u.length>0?(u.remove(),r._drawChildren(t,f)):r._draw();i&&i();tt.logTracePoint("ChatRoomsView.Populate.Collection.Complete")},function(n){r._showError(n.response||n.message)})},t.prototype.populate=function(){var t=this,n=$.Deferred();return ui.getCollectionContext().done(function(i){t.getRoomsForCollection(i).done(function(t){n.resolve(t)})}),n.pipe()},t.prototype.getRoomsForCollection=function(n){var t=this,i=$.Deferred(),r=this.getSelectedNode();return this.getRooms(n).done(function(u){u.sort(function(n,t){return d.ignoreCaseComparer(n.Name,t.Name)});at.ChatRoomModel.getCollectionsData().done(function(f){t.rootNode.clear();f.length>1?ui.getCollectionContext().done(function(n){$.each(f,function(i,r){var f=d.ignoreCaseComparer(r.name,n)===0;f&&(at.ChatRoomModel.selectedCollectionName=r.name);t.rootNode.add(t._createCollectionNode(r.name,u,f))});t._updateTreeView(r,i,u)}):(t._populateRoomsTreeForCollection(n,t.rootNode),t._updateTreeView(r,i,u))})}),i.pipe()},t.prototype._updateTreeView=function(n,t,i){this._draw();n?this.setSelectedRoom(n.RoomId,!0):this._selectedRoomId&&this.setSelectedRoom(this._selectedRoomId,!0,!0);tt.logTracePoint("ChatRoomsView.Populate.Complete");t.resolve(i)},t.prototype._selectRoom=function(n,t,i,r,u){var f=this;$.each(n,function(n,e){if(e.RoomId===t){f.setSelectedNode(e,r);i&&i.length!==0||(i=at.ChatRoomModel.selectedCollectionName);var s=ut.getHistoryService(),o=s.getCurrentState(),h;return h=o&&o.action&&d.localeIgnoreCaseComparer(o.action,"transcript")===0?ui.ACTION_TRANSCRIPT:ui.ACTION_TODAY,u&&s.addHistoryPoint(h,{name:e.text,collectionName:i}),!1}})},t.prototype.setSelectedRoom=function(n,t,i){var r=this;ui.getCollectionContext().done(function(u){r._selectedRoomId=n;r.getRooms(u).done(function(){var f=r.rootNode.children;f&&(f.length>0&&f[0].folder?$.each(f,function(f,e){if(d.localeIgnoreCaseComparer(e.text,u)===0){var o=e.children;return o&&o.length>0?r._selectRoom(o,n,u,t,i):r._selectRoom(e.children,n,u,t,i),!1}}):r._selectRoom(r.rootNode.children,n,"",t,i))})})},t.prototype.beginFindRoom=function(n){var i=this,t=$.Deferred();return ui.getCollectionContext().done(function(r){i.getRooms(r).done(function(i){var r=null;i&&$.each(i,function(t,i){if(d.ignoreCaseComparer(n,i.Name)===0)return r=i,!1});r?t.resolve(r):i&&i.length!==0?t.resolve(i[0]):t.reject(n)})}),t.pipe()},t.prototype.setSelectedNode=function(t,i){n.prototype.setSelectedNode.call(this,t,i);var r=this._getNodeElement(t)[0];this._isScrolledIntoView(r)||r.scrollIntoView(!0)},t.prototype._isScrolledIntoView=function(n){if(n){var t=$(this._element).scrollTop(),r=t+$(this._element).height(),i=$(n).offset().top,u=i+$(n).height();return u<r&&i>t}return!0},t.prototype.getRooms=function(n){var i=this,t;return this._roomsPromise||(this._roomsPromise=[]),this._roomsPromise[n]||(t=$.Deferred(),oi().beginGetRooms(n,this,this._getRoomsRefreshToken(n),function(n){t.resolve(n)},function(n){i._showError(n.response||n.message);t.reject(n)}),this._roomsPromise[n]=t.pipe()),this._roomsPromise[n]},t.prototype._updateTreeNodes=function(n,t){if(t){var i=$.map(t,function(n){return new cr(n)});n.addRange(i)}},t.prototype._renameRoom=function(n,t,i,r){var u=this;this.getRooms(i).done(function(f){$.each(f,function(i,r){if(r.Id===n)return r.Name=t,!1});u._populateRoomsTreeForCollection(i,r.parent);u._eventManager.fireEvent(at.ChatRoomEvent.ROOM_RENAMED,u,{roomId:n,roomName:t,collectionName:i})})},t.prototype.onCreateRoom=function(n,t,i){var r=this;this._roomsPromise[i]=null;this._refreshIndex++;this.getRooms(i).done(function(){var n=r._findMatchingCollectionNode(i);n||(n=r.rootNode);r._populateRoomsTreeForCollection(i,n,function(){ut.getHistoryService().addHistoryPoint(ui.ACTION_TODAY,{name:t,collectionName:i})})})},t.prototype._getCollectionNameFromNodeElement=function(n){var i=$.Deferred(),u=$(".node-content",n),r,t;return u&&(r=u.parents(".folder")),r&&(t=r.attr("title")),t&&t.length!==0?i.resolve(t):ui.getCollectionContext().done(function(n){i.resolve(n)}),i.pipe()},t.prototype._getCollectionNameFromNode=function(n){var t=$.Deferred(),i=n.CollectionName;return i&&i.length!==0?t.resolve(i):ui.getCollectionContext().done(function(n){t.resolve(n)}),t.pipe()},t.prototype._selectDefaultRoom=function(n){n&&(this.setSelectedNode(n,!0),ut.getHistoryService().replaceHistoryPoint(ui.ACTION_TODAY,{name:n.text,collectionName:n.CollectionName}))},t.prototype._findMatchingRoomInCollection=function(n){var r=this,i,t=$.Deferred();return n.children&&n.children.length>0?this._populateRoomsTreeForCollection(n.children[0].CollectionName,n,function(){$.each(n.children,function(n,t){if(d.localeIgnoreCaseComparer(t.text,r._options.MostRecentRoom.RoomName)===0)return i=t,!1});t.resolve(i)}):t.reject(),t.pipe()},t.prototype._findMatchingCollectionNode=function(n){var t;return this.rootNode.children.length>0&&this.rootNode.children[0].folder&&$.each(this.rootNode.children,function(i,r){if(d.localeIgnoreCaseComparer(r.text,n)===0)return t=r,!1}),t},t.prototype._selectDefaultRoomFromMruList=function(){var i=this,n=$.Deferred(),t;return!this._options.MostRecentRoom||this._options.MostRecentRoom.CollectionName.length===0||this._options.MostRecentRoom.RoomName.length===0||this.rootNode.children.length===0?(n.reject(),n.pipe()):(t=this.rootNode.children.length>0&&this.rootNode.children[0].folder?this._findMatchingCollectionNode(this._options.MostRecentRoom.CollectionName):this.rootNode,t?this._findMatchingRoomInCollection(t).done(function(t){t&&(i._selectDefaultRoom(t),n.resolve());n.reject()}).fail(function(){n.reject()}):n.reject(),n.pipe())},t.prototype._selectDefaultRoomFromDom=function(n){var i=this,t;this.rootNode.children&&(t=n?this._findMatchingCollectionNode(n):this.rootNode.children[0],t&&t.folder?t.children.length===0?this._populateRoomsTreeForCollection(t.text,t,function(){if(t.children){var n=t.children&&t.children[0];i._selectDefaultRoom(n)}}):this._selectDefaultRoom(t.children[0]):this._selectDefaultRoom(t||this.rootNode.children[0]))},t.prototype.setDefaultRoom=function(n){var t=this;n&&n.length>0?this._selectDefaultRoomFromDom(n):this._selectDefaultRoomFromMruList().fail(function(){t._selectDefaultRoomFromDom()})},t.prototype._showError=function(n){var t=at.ChatRoomErrorManager.GetInstance();t.showError(n)},t.prototype.onShowPopupMenu=function(i,r){if(!i.folder){var u=i.Permissions&&typeof i.Permissions.CanManageUsers=="boolean"?i.Permissions.CanManageUsers:!1,f=i.Permissions&&typeof i.Permissions.CanUpdateRoom=="boolean"?i.Permissions.CanUpdateRoom:!1,e=i.Permissions&&typeof i.Permissions.CanDeleteRoom=="boolean"?i.Permissions.CanDeleteRoom:!1,o=[{id:t.CMD_RENAME,text:s.ContextMenuItem_Rename,title:s.ContextMenuItem_Title_Rename,icon:"icon-rename",disabled:!f},{id:t.CMD_MANAGE_EVENTS,text:s.ConfigureEvents,title:s.ContextMenuItem_Title_Events,icon:null,disabled:!u},{id:t.CMD_SECURITY,text:s.ContextMenuItem_Security,title:s.ContextMenuItem_Title_Security,icon:"icon-admin",disabled:!u},{id:t.CMD_DELETE,text:s.DeleteRoom,title:s.ContextMenuItem_Title_Delete,icon:"icon-delete",disabled:!e}];n.prototype.onShowPopupMenu.call(this,i,$.extend({},r,{items:o}))}},t.prototype._onPopupItemClick=function(n){var i=this,r=n._commandArgument.item;this._getCollectionNameFromNode(r).done(function(u){var h=n.get_commandName(),c=n.get_commandArgument(),f=r.RoomId,e=r.text,o=oi();switch(h){case t.CMD_RENAME:y.show(di,{action:"update",RoomId:f,RoomName:e,collectionName:u,dialogClosed:function(){return i._eventManager.fireEvent(at.ChatRoomEvent.ROOM_NOTIFICATION_UPDATE,i,{notificationOn:!1,context:"dialog"})},onSave:function(n){return i._renameRoom(f,n.roomName,u,r)}});i._eventManager.fireEvent(at.ChatRoomEvent.ROOM_NOTIFICATION_UPDATE,i,{notificationOn:!0,context:"dialog"});break;case t.CMD_SECURITY:o.beginGetCollectionProperties(u,function(n){var t=fi.getCollectionTfsContext(n.serviceHost);i._securityManager.showPermissions(f,e,null,t)});break;case t.CMD_MANAGE_EVENTS:o.beginGetCollectionProperties(u,function(n){var t=at.getEncodedUriComponentForIE(n.serviceHost.name);n.serviceHost.vDir=at.getEncodedUriForIE(n.serviceHost.vDir);y.show(li,{RoomId:f,RoomName:e,ServiceAccountId:i._options.CollectionRoomsData[u].Data.ServiceAccountId,CollectionName:t,tfsContext:fi.getCollectionTfsContext(n.serviceHost),useLegacyStyle:!0,cssClass:"chat-alert-dialog-host",dialogClosed:function(){return i._eventManager.fireEvent(at.ChatRoomEvent.ROOM_NOTIFICATION_UPDATE,i,{notificationOn:!1,context:"dialog"})}});i._eventManager.fireEvent(at.ChatRoomEvent.ROOM_NOTIFICATION_UPDATE,i,{notificationOn:!0,context:"dialog"})});break;case t.CMD_DELETE:confirm(d.format(s.ConfirmDeleteRoom,e))&&o.deleteRoom({roomId:f,collectionName:u},function(){var n=i.getSelectedNode();n.RoomId===f&&d.localeIgnoreCaseComparer(u,n.CollectionName)===0?i._refreshAndSelectDefaultForCollection(u,r.parent):(i._roomsPromise[u]=null,i._refreshIndex++,i._populateRoomsTreeForCollection(u,r.parent));tt.logTracePoint("ChatRoomsView.DeleteRoom.Complete")},function(n){alert(hr(n))})}})},t.CMD_SECURITY="security",t.CMD_MANAGE_EVENTS="manage-events",t.CMD_RENAME="rename",t.CMD_DELETE="delete",t}(lt.TreeViewO);t.RoomsTreeView=or;sr=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.initialize=function(){ai=this._options.MostRecentRoom;var t=this.getElement();(this._leftPane=t.find(".rooms-view-left-pane"),this._rightPane=t.find(".rooms-view-right-pane"),this._hubTitle=t.find(".hub-title").eq(0),this._roomsList=o.Enhancement.enhance(or,$(".rooms-tree-view",t),this._options),this._splitter=o.Enhancement.ensureEnhancement(ft.Splitter,t),n.prototype.initialize.call(this),this._splitter.setCollapsedLabel(s.RoomExplorer_CollapsedTitle),et.BrowserCheckUtils.isLessThanOrEqualToIE8())||(this._setupInitialLoad(this._rightPane),this._setupEvents(),this._menuBar=this._createMenuBar(),this._attachNavigation(),at.ChatRoomModel.initializeConnectionHub(),vt.BaseNotificationRenderer.initializeRenderers(),tt.logTracePoint("ChatRoomsView.initialize.complete"))},t.prototype._setupInitialLoad=function(n){var t=$('<div class="initial-load-container"><\/div>').appendTo(n),i=o.BaseControl.createIn(p.StatusIndicator,t,{center:!1,imageClass:"big-status-progress",message:s.Loading,throttleMinTime:0});i.start();tt.logTracePoint("ChatRoom.ChatControl.Initialize.Start")},t.prototype._attachNavigation=function(){var n=this;ut.getHistoryService().attachNavigate(function(t,i){n.navigate(i.action,i)},!0)},t.prototype._findAndJoinRoom=function(n,t,i){var r=this,u=at.getEncodedUriComponentForIE(n);at.beginGetTfsContext(u,function(){at.ChatRoomModel.selectedCollectionName=n;i.name?r._joinRoomByName(t,i):r._roomsList.getRooms(u).done(function(n){n.length===0?at.ChatRoomErrorManager.GetInstance().showError(s.NoRoomsInCollection):(i.name=n[0].Name,r._joinRoomByName(t,i))})},function(){})},t.prototype._joinRoomByName=function(n,t){var i=this;this._getRoomId(t.name).done(function(r){i._roomsList.setSelectedRoom(r,!0);i._joinRoom(r,n,t);ut.getHistoryService().replaceHistoryPoint(n,{name:t.name,collectionName:at.ChatRoomModel.selectedCollectionName,date:t.date},undefined,!0)}).fail(function(n){at.ChatRoomErrorManager.GetInstance().showError(d.format(s.ChatRoomNotFound,n))})},t.prototype.navigate=function(n,t){var i=this;n||(n=ui.ACTION_TODAY);!t.collectionName&&t.name&&delete t.name;t&&t.collectionName?this._findAndJoinRoom(t.collectionName,n,t):ui.getCollectionContext().done(function(r){i._findAndJoinRoom(r,n,t)})},t.prototype._setupEvents=function(){var n=this;this._eventManager=at.ChatRoomEventManager.GetInstance();this._eventManager.attachEvent(at.ChatRoomEvent.ROOM_RENAMED,function(t,i){var u=i.roomId,r=i.roomName,f=i.collectionName;u===n._roomId&&n._chatRoom&&(n._chatRoom.setRoomTitle(r),ut.getHistoryService().replaceHistoryPoint(ui.ACTION_TODAY,{name:r,collectionName:f}))})},t.prototype._clearChatRoomHeader=function(){at.ChatRoomErrorManager.GetInstance().hideError();$(".chatroom-header .toolbar",this._element).empty();$(".chatroom-header .chat-preferences",this._element).empty();$(".chatroom-header .chat-room-title",this._element).empty()},t.prototype._joinRoom=function(n,t,i){var r=this;n!==this._roomId||d.ignoreCaseComparer(this._collectionName,at.ChatRoomModel.selectedCollectionName)!==0?oi().beginGetRoomModel(at.ChatRoomModel.selectedCollectionName,n,function(u){r._clearChatRoomHeader();r._chatRoom&&r._chatRoom.dispose();var f=$.extend({},r._options,u);r._chatRoom=o.BaseControl.createIn(ui,r._rightPane,f);r._chatRoom.navigateToDate(t,i);r._roomId=n;r._collectionName=at.ChatRoomModel.selectedCollectionName},function(n){return r._showError(n)}):this._chatRoom&&this._chatRoom.navigateToDate(t,i)},t.prototype._getRoomId=function(n){return this._roomsList.beginFindRoom(n).pipe(function(n){return n.Id})},t.prototype._showError=function(n){at.ChatRoomErrorManager.GetInstance().showError(n.message)},t.prototype._createMenuBar=function(){var r=this,n=[],i=!1;return $.each(this._options.CollectionRoomsData,function(n,t){if(t.Data.CanCreateRoom)return i=!0,!1}),n.push({id:t.CMD_NEW,text:s.RoomExplorer_NewRoom,title:s.RoomExplorer_NewRoom,noIcon:!0,disabled:!i},{separator:!0},{id:t.CMD_REFRESH_LIST,text:s.RoomExplorer_Refresh,title:s.RoomExplorer_Refresh,showText:!1,icon:"icon-refresh"}),o.BaseControl.createIn(ct.MenuBar,this._element.find(".rooms-explorer .toolbar"),{items:n,executeAction:function(n){return r._onMenubarItemClick(n)}})},t.prototype._onMenubarItemClick=function(n){var i=this,r=n.get_commandName();switch(r){case t.CMD_REFRESH_LIST:this._roomsList.refresh();break;case t.CMD_NEW:y.show(di,{action:"create",collectionName:at.ChatRoomModel.selectedCollectionName,dialogClosed:function(){return i._eventManager.fireEvent(at.ChatRoomEvent.ROOM_NOTIFICATION_UPDATE,i,{notificationOn:!1,context:"dialog"})},onSave:function(n){i._roomsList.onCreateRoom(n.roomId,n.roomName,n.collectionName)},collectionRoomsData:this._options.CollectionRoomsData});this._eventManager.fireEvent(at.ChatRoomEvent.ROOM_NOTIFICATION_UPDATE,this,{notificationOn:!0,context:"dialog"})}},t.coreCssClass="chat-rooms-view",t.CMD_NEW="new-room",t.CMD_REFRESH_LIST="refresh-rooms-explorer",t}(rt.NavigationView);o.Enhancement.registerEnhancement(sr,"."+sr.coreCssClass);i.tfsModuleLoaded("TFS.ChatRoom.Controls",t)});
define("Search/Scripts/Navigation/TFS.L1.SearchBox",["require","exports","VSS/Controls","Presentation/Scripts/TFS/TFS.Host.MultiEntitySearch","TfsCommon/Scripts/Navigation/Common","VSS/SDK/Shim","VSS/LoaderPlugins/Css!Search/Navigation/TFS.L1.SearchBox"],function(n,t,i,r,u,f){f.registerContent("navbar.level1.search",function(n){var t=u.getRightMenuItem(n.options.headerContext,"search"),f;t&&t.available&&(n.$container.addClass("header-post11"),f=i.BaseControl.createIn(r.MultiEntitySearchBox,n.$container,{cssClass:t.properties&&t.properties.cssClass?t.properties.cssClass:"multi-entity-search-box"}),f._fire("l1HeaderLayoutUpdated"))})});
define("Admin/Scripts/Resources/TFS.Resources.Admin.Navigation",["require","exports"],function(require,exports){var e=exports;e.TeamSettings="Team settings";e.ProjectSettings="Project settings";e.CollectionSettings="Collection settings";e.AccountSettings="Account settings";e.TurnOffFeatureReasonLabel="How can we make this feature better?";e.ServerSettings="Server settings";e.TurnOffFeatureDialogTitleFormat="Disable {0}";});

// Copyright (C) Microsoft Corporation. All rights reserved.
define("Admin/Scripts/Navigation",["require","exports","VSS/Context","VSS/Common/Contracts/Platform","Admin/Scripts/Resources/TFS.Resources.Admin.Navigation","VSS/Locations","VSS/SDK/Shim"],function(n,t,i,r,u,f,e){var o=function(){function n(){}return n.prototype.getMenuItems=function(){var o="admin",e=i.getPageContext(),s=i.getDefaultWebContext(),h=e.webAccessConfiguration.isHosted,t,n;return e.navigation.topMostLevel===r.NavigationContextLevels.Project&&!(s.team&&s.team.name)?[]:(t=[],t.push({separator:!0}),e.navigation.topMostLevel===r.NavigationContextLevels.Project?(n={id:"navigate-to-project-settings",text:u.TeamSettings,noIcon:!0,href:f.urlHelper.getMvcUrl({level:r.NavigationContextLevels.Team,area:o,team:s.team.name})},t.push(n)):e.navigation.topMostLevel===r.NavigationContextLevels.Team&&(n={id:"navigate-to-project-settings",text:u.ProjectSettings,noIcon:!0,href:f.urlHelper.getMvcUrl({level:r.NavigationContextLevels.Project,area:o})},t.push(n)),e.navigation.topMostLevel>r.NavigationContextLevels.Collection&&(n={id:"navigate-to-collection-settings",text:h?u.AccountSettings:u.CollectionSettings,noIcon:!0,href:f.urlHelper.getMvcUrl({level:r.NavigationContextLevels.Collection,area:o})},t.push(n)),!h&&e.navigation.topMostLevel>r.NavigationContextLevels.Application&&(n={id:"navigate-to-server-settings",text:u.ServerSettings,noIcon:!0,href:f.urlHelper.getMvcUrl({level:r.NavigationContextLevels.Application,area:o})},t.push(n)),t)},n}(),s=new o;e.VSS.register("ms.vss-web.project-admin-hub-group-actions",function(){return s})});
if (window.performance && window.performance.mark) { window.performance.mark('endLoadBundleInner-view'); }